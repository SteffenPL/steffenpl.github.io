const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-DfuxXGsT.js","assets/webworkerAll-DBQFWgGl.js","assets/colorToUniform-By2VfLd-.js","assets/WebGPURenderer-Dh4yxhyd.js","assets/SharedSystems-BKgWEE86.js","assets/WebGLRenderer-CXMKg58l.js"])))=>i.map(i=>d[i]);
function _mergeNamespaces(_,T){for(var R=0;R<T.length;R++){const P=T[R];if(typeof P!="string"&&!Array.isArray(P)){for(const O in P)if(O!=="default"&&!(O in _)){const I=Object.getOwnPropertyDescriptor(P,O);I&&Object.defineProperty(_,O,I.get?I:{enumerable:!0,get:()=>P[O]})}}}return Object.freeze(Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}))}(function(){const T=document.createElement("link").relList;if(T&&T.supports&&T.supports("modulepreload"))return;for(const O of document.querySelectorAll('link[rel="modulepreload"]'))P(O);new MutationObserver(O=>{for(const I of O)if(I.type==="childList")for(const z of I.addedNodes)z.tagName==="LINK"&&z.rel==="modulepreload"&&P(z)}).observe(document,{childList:!0,subtree:!0});function R(O){const I={};return O.integrity&&(I.integrity=O.integrity),O.referrerPolicy&&(I.referrerPolicy=O.referrerPolicy),O.crossOrigin==="use-credentials"?I.credentials="include":O.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function P(O){if(O.ep)return;O.ep=!0;const I=R(O);fetch(O.href,I)}})();function getDefaultExportFromCjs(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}function getAugmentedNamespace(_){if(Object.prototype.hasOwnProperty.call(_,"__esModule"))return _;var T=_.default;if(typeof T=="function"){var R=function P(){var O=!1;try{O=this instanceof P}catch{}return O?Reflect.construct(T,arguments,this.constructor):T.apply(this,arguments)};R.prototype=T.prototype}else R={};return Object.defineProperty(R,"__esModule",{value:!0}),Object.keys(_).forEach(function(P){var O=Object.getOwnPropertyDescriptor(_,P);Object.defineProperty(R,P,O.get?O:{enumerable:!0,get:function(){return _[P]}})}),R}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var _=Symbol.for("react.transitional.element"),T=Symbol.for("react.fragment");function R(P,O,I){var z=null;if(I!==void 0&&(z=""+I),O.key!==void 0&&(z=""+O.key),"key"in O){I={};for(var F in O)F!=="key"&&(I[F]=O[F])}else I=O;return O=I.ref,{$$typeof:_,type:P,key:z,ref:O!==void 0?O:null,props:I}}return reactJsxRuntime_production.Fragment=T,reactJsxRuntime_production.jsx=R,reactJsxRuntime_production.jsxs=R,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var _=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),z=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),V=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),Q=Symbol.iterator;function J(_e){return _e===null||typeof _e!="object"?null:(_e=Q&&_e[Q]||_e["@@iterator"],typeof _e=="function"?_e:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ne=Object.assign,se={};function oe(_e,$e,Ne){this.props=_e,this.context=$e,this.refs=se,this.updater=Ne||ee}oe.prototype.isReactComponent={},oe.prototype.setState=function(_e,$e){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,$e,"setState")},oe.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function ae(){}ae.prototype=oe.prototype;function ce(_e,$e,Ne){this.props=_e,this.context=$e,this.refs=se,this.updater=Ne||ee}var le=ce.prototype=new ae;le.constructor=ce,ne(le,oe.prototype),le.isPureReactComponent=!0;var pe=Array.isArray;function me(){}var he={H:null,A:null,T:null,S:null},fe=Object.prototype.hasOwnProperty;function de(_e,$e,Ne){var Be=Ne.ref;return{$$typeof:_,type:_e,key:$e,ref:Be!==void 0?Be:null,props:Ne}}function be(_e,$e){return de(_e.type,$e,_e.props)}function ye(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===_}function Ce(_e){var $e={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(Ne){return $e[Ne]})}var ve=/\/+/g;function Ee(_e,$e){return typeof _e=="object"&&_e!==null&&_e.key!=null?Ce(""+_e.key):$e.toString(36)}function we(_e){switch(_e.status){case"fulfilled":return _e.value;case"rejected":throw _e.reason;default:switch(typeof _e.status=="string"?_e.then(me,me):(_e.status="pending",_e.then(function($e){_e.status==="pending"&&(_e.status="fulfilled",_e.value=$e)},function($e){_e.status==="pending"&&(_e.status="rejected",_e.reason=$e)})),_e.status){case"fulfilled":return _e.value;case"rejected":throw _e.reason}}throw _e}function ge(_e,$e,Ne,Be,Ze){var We=typeof _e;(We==="undefined"||We==="boolean")&&(_e=null);var Oe=!1;if(_e===null)Oe=!0;else switch(We){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(_e.$$typeof){case _:case T:Oe=!0;break;case Z:return Oe=_e._init,ge(Oe(_e._payload),$e,Ne,Be,Ze)}}if(Oe)return Ze=Ze(_e),Oe=Be===""?"."+Ee(_e,0):Be,pe(Ze)?(Ne="",Oe!=null&&(Ne=Oe.replace(ve,"$&/")+"/"),ge(Ze,$e,Ne,"",function(Fe){return Fe})):Ze!=null&&(ye(Ze)&&(Ze=be(Ze,Ne+(Ze.key==null||_e&&_e.key===Ze.key?"":(""+Ze.key).replace(ve,"$&/")+"/")+Oe)),$e.push(Ze)),1;Oe=0;var Ge=Be===""?".":Be+":";if(pe(_e))for(var je=0;je<_e.length;je++)Be=_e[je],We=Ge+Ee(Be,je),Oe+=ge(Be,$e,Ne,We,Ze);else if(je=J(_e),typeof je=="function")for(_e=je.call(_e),je=0;!(Be=_e.next()).done;)Be=Be.value,We=Ge+Ee(Be,je++),Oe+=ge(Be,$e,Ne,We,Ze);else if(We==="object"){if(typeof _e.then=="function")return ge(we(_e),$e,Ne,Be,Ze);throw $e=String(_e),Error("Objects are not valid as a React child (found: "+($e==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":$e)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function Se(_e,$e,Ne){if(_e==null)return _e;var Be=[],Ze=0;return ge(_e,Be,"","",function(We){return $e.call(Ne,We,Ze++)}),Be}function Te(_e){if(_e._status===-1){var $e=_e._result;$e=$e(),$e.then(function(Ne){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=Ne)},function(Ne){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=Ne)}),_e._status===-1&&(_e._status=0,_e._result=$e)}if(_e._status===1)return _e._result.default;throw _e._result}var Ae=typeof reportError=="function"?reportError:function(_e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _e=="object"&&_e!==null&&typeof _e.message=="string"?String(_e.message):String(_e),error:_e});if(!window.dispatchEvent($e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_e);return}console.error(_e)},Ue={map:Se,forEach:function(_e,$e,Ne){Se(_e,function(){$e.apply(this,arguments)},Ne)},count:function(_e){var $e=0;return Se(_e,function(){$e++}),$e},toArray:function(_e){return Se(_e,function($e){return $e})||[]},only:function(_e){if(!ye(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};return react_production.Activity=Y,react_production.Children=Ue,react_production.Component=oe,react_production.Fragment=R,react_production.Profiler=O,react_production.PureComponent=ce,react_production.StrictMode=P,react_production.Suspense=G,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=he,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(_e){return he.H.useMemoCache(_e)}},react_production.cache=function(_e){return function(){return _e.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(_e,$e,Ne){if(_e==null)throw Error("The argument must be a React element, but you passed "+_e+".");var Be=ne({},_e.props),Ze=_e.key;if($e!=null)for(We in $e.key!==void 0&&(Ze=""+$e.key),$e)!fe.call($e,We)||We==="key"||We==="__self"||We==="__source"||We==="ref"&&$e.ref===void 0||(Be[We]=$e[We]);var We=arguments.length-2;if(We===1)Be.children=Ne;else if(1<We){for(var Oe=Array(We),Ge=0;Ge<We;Ge++)Oe[Ge]=arguments[Ge+2];Be.children=Oe}return de(_e.type,Ze,Be)},react_production.createContext=function(_e){return _e={$$typeof:z,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null},_e.Provider=_e,_e.Consumer={$$typeof:I,_context:_e},_e},react_production.createElement=function(_e,$e,Ne){var Be,Ze={},We=null;if($e!=null)for(Be in $e.key!==void 0&&(We=""+$e.key),$e)fe.call($e,Be)&&Be!=="key"&&Be!=="__self"&&Be!=="__source"&&(Ze[Be]=$e[Be]);var Oe=arguments.length-2;if(Oe===1)Ze.children=Ne;else if(1<Oe){for(var Ge=Array(Oe),je=0;je<Oe;je++)Ge[je]=arguments[je+2];Ze.children=Ge}if(_e&&_e.defaultProps)for(Be in Oe=_e.defaultProps,Oe)Ze[Be]===void 0&&(Ze[Be]=Oe[Be]);return de(_e,We,Ze)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(_e){return{$$typeof:F,render:_e}},react_production.isValidElement=ye,react_production.lazy=function(_e){return{$$typeof:Z,_payload:{_status:-1,_result:_e},_init:Te}},react_production.memo=function(_e,$e){return{$$typeof:V,type:_e,compare:$e===void 0?null:$e}},react_production.startTransition=function(_e){var $e=he.T,Ne={};he.T=Ne;try{var Be=_e(),Ze=he.S;Ze!==null&&Ze(Ne,Be),typeof Be=="object"&&Be!==null&&typeof Be.then=="function"&&Be.then(me,Ae)}catch(We){Ae(We)}finally{$e!==null&&Ne.types!==null&&($e.types=Ne.types),he.T=$e}},react_production.unstable_useCacheRefresh=function(){return he.H.useCacheRefresh()},react_production.use=function(_e){return he.H.use(_e)},react_production.useActionState=function(_e,$e,Ne){return he.H.useActionState(_e,$e,Ne)},react_production.useCallback=function(_e,$e){return he.H.useCallback(_e,$e)},react_production.useContext=function(_e){return he.H.useContext(_e)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(_e,$e){return he.H.useDeferredValue(_e,$e)},react_production.useEffect=function(_e,$e){return he.H.useEffect(_e,$e)},react_production.useEffectEvent=function(_e){return he.H.useEffectEvent(_e)},react_production.useId=function(){return he.H.useId()},react_production.useImperativeHandle=function(_e,$e,Ne){return he.H.useImperativeHandle(_e,$e,Ne)},react_production.useInsertionEffect=function(_e,$e){return he.H.useInsertionEffect(_e,$e)},react_production.useLayoutEffect=function(_e,$e){return he.H.useLayoutEffect(_e,$e)},react_production.useMemo=function(_e,$e){return he.H.useMemo(_e,$e)},react_production.useOptimistic=function(_e,$e){return he.H.useOptimistic(_e,$e)},react_production.useReducer=function(_e,$e,Ne){return he.H.useReducer(_e,$e,Ne)},react_production.useRef=function(_e){return he.H.useRef(_e)},react_production.useState=function(_e){return he.H.useState(_e)},react_production.useSyncExternalStore=function(_e,$e,Ne){return he.H.useSyncExternalStore(_e,$e,Ne)},react_production.useTransition=function(){return he.H.useTransition()},react_production.version="19.2.3",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(_){function T(ge,Se){var Te=ge.length;ge.push(Se);e:for(;0<Te;){var Ae=Te-1>>>1,Ue=ge[Ae];if(0<O(Ue,Se))ge[Ae]=Se,ge[Te]=Ue,Te=Ae;else break e}}function R(ge){return ge.length===0?null:ge[0]}function P(ge){if(ge.length===0)return null;var Se=ge[0],Te=ge.pop();if(Te!==Se){ge[0]=Te;e:for(var Ae=0,Ue=ge.length,_e=Ue>>>1;Ae<_e;){var $e=2*(Ae+1)-1,Ne=ge[$e],Be=$e+1,Ze=ge[Be];if(0>O(Ne,Te))Be<Ue&&0>O(Ze,Ne)?(ge[Ae]=Ze,ge[Be]=Te,Ae=Be):(ge[Ae]=Ne,ge[$e]=Te,Ae=$e);else if(Be<Ue&&0>O(Ze,Te))ge[Ae]=Ze,ge[Be]=Te,Ae=Be;else break e}}return Se}function O(ge,Se){var Te=ge.sortIndex-Se.sortIndex;return Te!==0?Te:ge.id-Se.id}if(_.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var I=performance;_.unstable_now=function(){return I.now()}}else{var z=Date,F=z.now();_.unstable_now=function(){return z.now()-F}}var G=[],V=[],Z=1,Y=null,Q=3,J=!1,ee=!1,ne=!1,se=!1,oe=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function le(ge){for(var Se=R(V);Se!==null;){if(Se.callback===null)P(V);else if(Se.startTime<=ge)P(V),Se.sortIndex=Se.expirationTime,T(G,Se);else break;Se=R(V)}}function pe(ge){if(ne=!1,le(ge),!ee)if(R(G)!==null)ee=!0,me||(me=!0,Ce());else{var Se=R(V);Se!==null&&we(pe,Se.startTime-ge)}}var me=!1,he=-1,fe=5,de=-1;function be(){return se?!0:!(_.unstable_now()-de<fe)}function ye(){if(se=!1,me){var ge=_.unstable_now();de=ge;var Se=!0;try{e:{ee=!1,ne&&(ne=!1,ae(he),he=-1),J=!0;var Te=Q;try{t:{for(le(ge),Y=R(G);Y!==null&&!(Y.expirationTime>ge&&be());){var Ae=Y.callback;if(typeof Ae=="function"){Y.callback=null,Q=Y.priorityLevel;var Ue=Ae(Y.expirationTime<=ge);if(ge=_.unstable_now(),typeof Ue=="function"){Y.callback=Ue,le(ge),Se=!0;break t}Y===R(G)&&P(G),le(ge)}else P(G);Y=R(G)}if(Y!==null)Se=!0;else{var _e=R(V);_e!==null&&we(pe,_e.startTime-ge),Se=!1}}break e}finally{Y=null,Q=Te,J=!1}Se=void 0}}finally{Se?Ce():me=!1}}}var Ce;if(typeof ce=="function")Ce=function(){ce(ye)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,Ee=ve.port2;ve.port1.onmessage=ye,Ce=function(){Ee.postMessage(null)}}else Ce=function(){oe(ye,0)};function we(ge,Se){he=oe(function(){ge(_.unstable_now())},Se)}_.unstable_IdlePriority=5,_.unstable_ImmediatePriority=1,_.unstable_LowPriority=4,_.unstable_NormalPriority=3,_.unstable_Profiling=null,_.unstable_UserBlockingPriority=2,_.unstable_cancelCallback=function(ge){ge.callback=null},_.unstable_forceFrameRate=function(ge){0>ge||125<ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<ge?Math.floor(1e3/ge):5},_.unstable_getCurrentPriorityLevel=function(){return Q},_.unstable_next=function(ge){switch(Q){case 1:case 2:case 3:var Se=3;break;default:Se=Q}var Te=Q;Q=Se;try{return ge()}finally{Q=Te}},_.unstable_requestPaint=function(){se=!0},_.unstable_runWithPriority=function(ge,Se){switch(ge){case 1:case 2:case 3:case 4:case 5:break;default:ge=3}var Te=Q;Q=ge;try{return Se()}finally{Q=Te}},_.unstable_scheduleCallback=function(ge,Se,Te){var Ae=_.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Ae+Te:Ae):Te=Ae,ge){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=Te+Ue,ge={id:Z++,callback:Se,priorityLevel:ge,startTime:Te,expirationTime:Ue,sortIndex:-1},Te>Ae?(ge.sortIndex=Te,T(V,ge),R(G)===null&&ge===R(V)&&(ne?(ae(he),he=-1):ne=!0,we(pe,Te-Ae))):(ge.sortIndex=Ue,T(G,ge),ee||J||(ee=!0,me||(me=!0,Ce()))),ge},_.unstable_shouldYield=be,_.unstable_wrapCallback=function(ge){var Se=Q;return function(){var Te=Q;Q=Se;try{return ge.apply(this,arguments)}finally{Q=Te}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var _=requireReact();function T(G){var V="https://react.dev/errors/"+G;if(1<arguments.length){V+="?args[]="+encodeURIComponent(arguments[1]);for(var Z=2;Z<arguments.length;Z++)V+="&args[]="+encodeURIComponent(arguments[Z])}return"Minified React error #"+G+"; visit "+V+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function R(){}var P={d:{f:R,r:function(){throw Error(T(522))},D:R,C:R,L:R,m:R,X:R,S:R,M:R},p:0,findDOMNode:null},O=Symbol.for("react.portal");function I(G,V,Z){var Y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:Y==null?null:""+Y,children:G,containerInfo:V,implementation:Z}}var z=_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function F(G,V){if(G==="font")return"";if(typeof V=="string")return V==="use-credentials"?V:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,reactDom_production.createPortal=function(G,V){var Z=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!V||V.nodeType!==1&&V.nodeType!==9&&V.nodeType!==11)throw Error(T(299));return I(G,V,null,Z)},reactDom_production.flushSync=function(G){var V=z.T,Z=P.p;try{if(z.T=null,P.p=2,G)return G()}finally{z.T=V,P.p=Z,P.d.f()}},reactDom_production.preconnect=function(G,V){typeof G=="string"&&(V?(V=V.crossOrigin,V=typeof V=="string"?V==="use-credentials"?V:"":void 0):V=null,P.d.C(G,V))},reactDom_production.prefetchDNS=function(G){typeof G=="string"&&P.d.D(G)},reactDom_production.preinit=function(G,V){if(typeof G=="string"&&V&&typeof V.as=="string"){var Z=V.as,Y=F(Z,V.crossOrigin),Q=typeof V.integrity=="string"?V.integrity:void 0,J=typeof V.fetchPriority=="string"?V.fetchPriority:void 0;Z==="style"?P.d.S(G,typeof V.precedence=="string"?V.precedence:void 0,{crossOrigin:Y,integrity:Q,fetchPriority:J}):Z==="script"&&P.d.X(G,{crossOrigin:Y,integrity:Q,fetchPriority:J,nonce:typeof V.nonce=="string"?V.nonce:void 0})}},reactDom_production.preinitModule=function(G,V){if(typeof G=="string")if(typeof V=="object"&&V!==null){if(V.as==null||V.as==="script"){var Z=F(V.as,V.crossOrigin);P.d.M(G,{crossOrigin:Z,integrity:typeof V.integrity=="string"?V.integrity:void 0,nonce:typeof V.nonce=="string"?V.nonce:void 0})}}else V==null&&P.d.M(G)},reactDom_production.preload=function(G,V){if(typeof G=="string"&&typeof V=="object"&&V!==null&&typeof V.as=="string"){var Z=V.as,Y=F(Z,V.crossOrigin);P.d.L(G,Z,{crossOrigin:Y,integrity:typeof V.integrity=="string"?V.integrity:void 0,nonce:typeof V.nonce=="string"?V.nonce:void 0,type:typeof V.type=="string"?V.type:void 0,fetchPriority:typeof V.fetchPriority=="string"?V.fetchPriority:void 0,referrerPolicy:typeof V.referrerPolicy=="string"?V.referrerPolicy:void 0,imageSrcSet:typeof V.imageSrcSet=="string"?V.imageSrcSet:void 0,imageSizes:typeof V.imageSizes=="string"?V.imageSizes:void 0,media:typeof V.media=="string"?V.media:void 0})}},reactDom_production.preloadModule=function(G,V){if(typeof G=="string")if(V){var Z=F(V.as,V.crossOrigin);P.d.m(G,{as:typeof V.as=="string"&&V.as!=="script"?V.as:void 0,crossOrigin:Z,integrity:typeof V.integrity=="string"?V.integrity:void 0})}else P.d.m(G)},reactDom_production.requestFormReset=function(G){P.d.r(G)},reactDom_production.unstable_batchedUpdates=function(G,V){return G(V)},reactDom_production.useFormState=function(G,V,Z){return z.H.useFormState(G,V,Z)},reactDom_production.useFormStatus=function(){return z.H.useHostTransitionStatus()},reactDom_production.version="19.2.3",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(T){console.error(T)}}return _(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var _=requireScheduler(),T=requireReact(),R=requireReactDom();function P(L){var U="https://react.dev/errors/"+L;if(1<arguments.length){U+="?args[]="+encodeURIComponent(arguments[1]);for(var q=2;q<arguments.length;q++)U+="&args[]="+encodeURIComponent(arguments[q])}return"Minified React error #"+L+"; visit "+U+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function O(L){return!(!L||L.nodeType!==1&&L.nodeType!==9&&L.nodeType!==11)}function I(L){var U=L,q=L;if(L.alternate)for(;U.return;)U=U.return;else{L=U;do U=L,(U.flags&4098)!==0&&(q=U.return),L=U.return;while(L)}return U.tag===3?q:null}function z(L){if(L.tag===13){var U=L.memoizedState;if(U===null&&(L=L.alternate,L!==null&&(U=L.memoizedState)),U!==null)return U.dehydrated}return null}function F(L){if(L.tag===31){var U=L.memoizedState;if(U===null&&(L=L.alternate,L!==null&&(U=L.memoizedState)),U!==null)return U.dehydrated}return null}function G(L){if(I(L)!==L)throw Error(P(188))}function V(L){var U=L.alternate;if(!U){if(U=I(L),U===null)throw Error(P(188));return U!==L?null:L}for(var q=L,W=U;;){var te=q.return;if(te===null)break;var ie=te.alternate;if(ie===null){if(W=te.return,W!==null){q=W;continue}break}if(te.child===ie.child){for(ie=te.child;ie;){if(ie===q)return G(te),L;if(ie===W)return G(te),U;ie=ie.sibling}throw Error(P(188))}if(q.return!==W.return)q=te,W=ie;else{for(var ue=!1,xe=te.child;xe;){if(xe===q){ue=!0,q=te,W=ie;break}if(xe===W){ue=!0,W=te,q=ie;break}xe=xe.sibling}if(!ue){for(xe=ie.child;xe;){if(xe===q){ue=!0,q=ie,W=te;break}if(xe===W){ue=!0,W=ie,q=te;break}xe=xe.sibling}if(!ue)throw Error(P(189))}}if(q.alternate!==W)throw Error(P(190))}if(q.tag!==3)throw Error(P(188));return q.stateNode.current===q?L:U}function Z(L){var U=L.tag;if(U===5||U===26||U===27||U===6)return L;for(L=L.child;L!==null;){if(U=Z(L),U!==null)return U;L=L.sibling}return null}var Y=Object.assign,Q=Symbol.for("react.element"),J=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),se=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),de=Symbol.for("react.activity"),be=Symbol.for("react.memo_cache_sentinel"),ye=Symbol.iterator;function Ce(L){return L===null||typeof L!="object"?null:(L=ye&&L[ye]||L["@@iterator"],typeof L=="function"?L:null)}var ve=Symbol.for("react.client.reference");function Ee(L){if(L==null)return null;if(typeof L=="function")return L.$$typeof===ve?null:L.displayName||L.name||null;if(typeof L=="string")return L;switch(L){case ne:return"Fragment";case oe:return"Profiler";case se:return"StrictMode";case pe:return"Suspense";case me:return"SuspenseList";case de:return"Activity"}if(typeof L=="object")switch(L.$$typeof){case ee:return"Portal";case ce:return L.displayName||"Context";case ae:return(L._context.displayName||"Context")+".Consumer";case le:var U=L.render;return L=L.displayName,L||(L=U.displayName||U.name||"",L=L!==""?"ForwardRef("+L+")":"ForwardRef"),L;case he:return U=L.displayName||null,U!==null?U:Ee(L.type)||"Memo";case fe:U=L._payload,L=L._init;try{return Ee(L(U))}catch{}}return null}var we=Array.isArray,ge=T.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se=R.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Ae=[],Ue=-1;function _e(L){return{current:L}}function $e(L){0>Ue||(L.current=Ae[Ue],Ae[Ue]=null,Ue--)}function Ne(L,U){Ue++,Ae[Ue]=L.current,L.current=U}var Be=_e(null),Ze=_e(null),We=_e(null),Oe=_e(null);function Ge(L,U){switch(Ne(We,U),Ne(Ze,L),Ne(Be,null),U.nodeType){case 9:case 11:L=(L=U.documentElement)&&(L=L.namespaceURI)?jh(L):0;break;default:if(L=U.tagName,U=U.namespaceURI)U=jh(U),L=Oh(U,L);else switch(L){case"svg":L=1;break;case"math":L=2;break;default:L=0}}$e(Be),Ne(Be,L)}function je(){$e(Be),$e(Ze),$e(We)}function Fe(L){L.memoizedState!==null&&Ne(Oe,L);var U=Be.current,q=Oh(U,L.type);U!==q&&(Ne(Ze,L),Ne(Be,q))}function ze(L){Ze.current===L&&($e(Be),$e(Ze)),Oe.current===L&&($e(Oe),Ts._currentValue=Te)}var Me,Ke;function Ye(L){if(Me===void 0)try{throw Error()}catch(q){var U=q.stack.trim().match(/\n( *(at )?)/);Me=U&&U[1]||"",Ke=-1<q.stack.indexOf(`
    at`)?" (<anonymous>)":-1<q.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Me+L+Ke}var Qe=!1;function Je(L,U){if(!L||Qe)return"";Qe=!0;var q=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var W={DetermineComponentFrameRoot:function(){try{if(U){var Xe=function(){throw Error()};if(Object.defineProperty(Xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xe,[])}catch(He){var Le=He}Reflect.construct(L,[],Xe)}else{try{Xe.call()}catch(He){Le=He}L.call(Xe.prototype)}}else{try{throw Error()}catch(He){Le=He}(Xe=L())&&typeof Xe.catch=="function"&&Xe.catch(function(){})}}catch(He){if(He&&Le&&typeof He.stack=="string")return[He.stack,Le.stack]}return[null,null]}};W.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var te=Object.getOwnPropertyDescriptor(W.DetermineComponentFrameRoot,"name");te&&te.configurable&&Object.defineProperty(W.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ie=W.DetermineComponentFrameRoot(),ue=ie[0],xe=ie[1];if(ue&&xe){var Re=ue.split(`
`),De=xe.split(`
`);for(te=W=0;W<Re.length&&!Re[W].includes("DetermineComponentFrameRoot");)W++;for(;te<De.length&&!De[te].includes("DetermineComponentFrameRoot");)te++;if(W===Re.length||te===De.length)for(W=Re.length-1,te=De.length-1;1<=W&&0<=te&&Re[W]!==De[te];)te--;for(;1<=W&&0<=te;W--,te--)if(Re[W]!==De[te]){if(W!==1||te!==1)do if(W--,te--,0>te||Re[W]!==De[te]){var Ve=`
`+Re[W].replace(" at new "," at ");return L.displayName&&Ve.includes("<anonymous>")&&(Ve=Ve.replace("<anonymous>",L.displayName)),Ve}while(1<=W&&0<=te);break}}}finally{Qe=!1,Error.prepareStackTrace=q}return(q=L?L.displayName||L.name:"")?Ye(q):""}function lt(L,U){switch(L.tag){case 26:case 27:case 5:return Ye(L.type);case 16:return Ye("Lazy");case 13:return L.child!==U&&U!==null?Ye("Suspense Fallback"):Ye("Suspense");case 19:return Ye("SuspenseList");case 0:case 15:return Je(L.type,!1);case 11:return Je(L.type.render,!1);case 1:return Je(L.type,!0);case 31:return Ye("Activity");default:return""}}function et(L){try{var U="",q=null;do U+=lt(L,q),q=L,L=L.return;while(L);return U}catch(W){return`
Error generating stack: `+W.message+`
`+W.stack}}var ot=Object.prototype.hasOwnProperty,At=_.unstable_scheduleCallback,pt=_.unstable_cancelCallback,xt=_.unstable_shouldYield,qt=_.unstable_requestPaint,ft=_.unstable_now,Gt=_.unstable_getCurrentPriorityLevel,Rt=_.unstable_ImmediatePriority,Ot=_.unstable_UserBlockingPriority,kt=_.unstable_NormalPriority,cr=_.unstable_LowPriority,Sn=_.unstable_IdlePriority,In=_.log,sn=_.unstable_setDisableYieldValue,tn=null,$t=null;function Zt(L){if(typeof In=="function"&&sn(L),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(tn,L)}catch{}}var nn=Math.clz32?Math.clz32:_d,xd=Math.log,bd=Math.LN2;function _d(L){return L>>>=0,L===0?32:31-(xd(L)/bd|0)|0}var Ps=256,js=262144,Os=4194304;function Or(L){var U=L&42;if(U!==0)return U;switch(L&-L){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return L&261888;case 262144:case 524288:case 1048576:case 2097152:return L&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return L&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return L}}function ks(L,U,q){var W=L.pendingLanes;if(W===0)return 0;var te=0,ie=L.suspendedLanes,ue=L.pingedLanes;L=L.warmLanes;var xe=W&134217727;return xe!==0?(W=xe&~ie,W!==0?te=Or(W):(ue&=xe,ue!==0?te=Or(ue):q||(q=xe&~L,q!==0&&(te=Or(q))))):(xe=W&~ie,xe!==0?te=Or(xe):ue!==0?te=Or(ue):q||(q=W&~L,q!==0&&(te=Or(q)))),te===0?0:U!==0&&U!==te&&(U&ie)===0&&(ie=te&-te,q=U&-U,ie>=q||ie===32&&(q&4194048)!==0)?U:te}function Bi(L,U){return(L.pendingLanes&~(L.suspendedLanes&~L.pingedLanes)&U)===0}function vd(L,U){switch(L){case 1:case 2:case 4:case 8:case 64:return U+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return U+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dc(){var L=Os;return Os<<=1,(Os&62914560)===0&&(Os=4194304),L}function Wa(L){for(var U=[],q=0;31>q;q++)U.push(L);return U}function zi(L,U){L.pendingLanes|=U,U!==268435456&&(L.suspendedLanes=0,L.pingedLanes=0,L.warmLanes=0)}function Sd(L,U,q,W,te,ie){var ue=L.pendingLanes;L.pendingLanes=q,L.suspendedLanes=0,L.pingedLanes=0,L.warmLanes=0,L.expiredLanes&=q,L.entangledLanes&=q,L.errorRecoveryDisabledLanes&=q,L.shellSuspendCounter=0;var xe=L.entanglements,Re=L.expirationTimes,De=L.hiddenUpdates;for(q=ue&~q;0<q;){var Ve=31-nn(q),Xe=1<<Ve;xe[Ve]=0,Re[Ve]=-1;var Le=De[Ve];if(Le!==null)for(De[Ve]=null,Ve=0;Ve<Le.length;Ve++){var He=Le[Ve];He!==null&&(He.lane&=-536870913)}q&=~Xe}W!==0&&pc(L,W,0),ie!==0&&te===0&&L.tag!==0&&(L.suspendedLanes|=ie&~(ue&~U))}function pc(L,U,q){L.pendingLanes|=U,L.suspendedLanes&=~U;var W=31-nn(U);L.entangledLanes|=U,L.entanglements[W]=L.entanglements[W]|1073741824|q&261930}function mc(L,U){var q=L.entangledLanes|=U;for(L=L.entanglements;q;){var W=31-nn(q),te=1<<W;te&U|L[W]&U&&(L[W]|=U),q&=~te}}function gc(L,U){var q=U&-U;return q=(q&42)!==0?1:Ka(q),(q&(L.suspendedLanes|U))!==0?0:q}function Ka(L){switch(L){case 2:L=1;break;case 8:L=4;break;case 32:L=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:L=128;break;case 268435456:L=134217728;break;default:L=0}return L}function Qa(L){return L&=-L,2<L?8<L?(L&134217727)!==0?32:268435456:8:2}function yc(){var L=Se.p;return L!==0?L:(L=window.event,L===void 0?32:rd(L.type))}function xc(L,U){var q=Se.p;try{return Se.p=L,U()}finally{Se.p=q}}var ur=Math.random().toString(36).slice(2),Wt="__reactFiber$"+ur,an="__reactProps$"+ur,Jr="__reactContainer$"+ur,Ja="__reactEvents$"+ur,wd="__reactListeners$"+ur,Ed="__reactHandles$"+ur,bc="__reactResources$"+ur,Hi="__reactMarker$"+ur;function eo(L){delete L[Wt],delete L[an],delete L[Ja],delete L[wd],delete L[Ed]}function ei(L){var U=L[Wt];if(U)return U;for(var q=L.parentNode;q;){if(U=q[Jr]||q[Wt]){if(q=U.alternate,U.child!==null||q!==null&&q.child!==null)for(L=Hh(L);L!==null;){if(q=L[Wt])return q;L=Hh(L)}return U}L=q,q=L.parentNode}return null}function ti(L){if(L=L[Wt]||L[Jr]){var U=L.tag;if(U===5||U===6||U===13||U===31||U===26||U===27||U===3)return L}return null}function Ui(L){var U=L.tag;if(U===5||U===26||U===27||U===6)return L.stateNode;throw Error(P(33))}function ni(L){var U=L[bc];return U||(U=L[bc]={hoistableStyles:new Map,hoistableScripts:new Map}),U}function Yt(L){L[Hi]=!0}var _c=new Set,vc={};function Ir(L,U){ri(L,U),ri(L+"Capture",U)}function ri(L,U){for(vc[L]=U,L=0;L<U.length;L++)_c.add(U[L])}var Cd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sc={},wc={};function Td(L){return ot.call(wc,L)?!0:ot.call(Sc,L)?!1:Cd.test(L)?wc[L]=!0:(Sc[L]=!0,!1)}function Is(L,U,q){if(Td(U))if(q===null)L.removeAttribute(U);else{switch(typeof q){case"undefined":case"function":case"symbol":L.removeAttribute(U);return;case"boolean":var W=U.toLowerCase().slice(0,5);if(W!=="data-"&&W!=="aria-"){L.removeAttribute(U);return}}L.setAttribute(U,""+q)}}function Ds(L,U,q){if(q===null)L.removeAttribute(U);else{switch(typeof q){case"undefined":case"function":case"symbol":case"boolean":L.removeAttribute(U);return}L.setAttribute(U,""+q)}}function Un(L,U,q,W){if(W===null)L.removeAttribute(q);else{switch(typeof W){case"undefined":case"function":case"symbol":case"boolean":L.removeAttribute(q);return}L.setAttributeNS(U,q,""+W)}}function wn(L){switch(typeof L){case"bigint":case"boolean":case"number":case"string":case"undefined":return L;case"object":return L;default:return""}}function Ec(L){var U=L.type;return(L=L.nodeName)&&L.toLowerCase()==="input"&&(U==="checkbox"||U==="radio")}function Ad(L,U,q){var W=Object.getOwnPropertyDescriptor(L.constructor.prototype,U);if(!L.hasOwnProperty(U)&&typeof W<"u"&&typeof W.get=="function"&&typeof W.set=="function"){var te=W.get,ie=W.set;return Object.defineProperty(L,U,{configurable:!0,get:function(){return te.call(this)},set:function(ue){q=""+ue,ie.call(this,ue)}}),Object.defineProperty(L,U,{enumerable:W.enumerable}),{getValue:function(){return q},setValue:function(ue){q=""+ue},stopTracking:function(){L._valueTracker=null,delete L[U]}}}}function to(L){if(!L._valueTracker){var U=Ec(L)?"checked":"value";L._valueTracker=Ad(L,U,""+L[U])}}function Cc(L){if(!L)return!1;var U=L._valueTracker;if(!U)return!0;var q=U.getValue(),W="";return L&&(W=Ec(L)?L.checked?"true":"false":L.value),L=W,L!==q?(U.setValue(L),!0):!1}function Ls(L){if(L=L||(typeof document<"u"?document:void 0),typeof L>"u")return null;try{return L.activeElement||L.body}catch{return L.body}}var Rd=/[\n"\\]/g;function En(L){return L.replace(Rd,function(U){return"\\"+U.charCodeAt(0).toString(16)+" "})}function no(L,U,q,W,te,ie,ue,xe){L.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?L.type=ue:L.removeAttribute("type"),U!=null?ue==="number"?(U===0&&L.value===""||L.value!=U)&&(L.value=""+wn(U)):L.value!==""+wn(U)&&(L.value=""+wn(U)):ue!=="submit"&&ue!=="reset"||L.removeAttribute("value"),U!=null?ro(L,ue,wn(U)):q!=null?ro(L,ue,wn(q)):W!=null&&L.removeAttribute("value"),te==null&&ie!=null&&(L.defaultChecked=!!ie),te!=null&&(L.checked=te&&typeof te!="function"&&typeof te!="symbol"),xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?L.name=""+wn(xe):L.removeAttribute("name")}function Tc(L,U,q,W,te,ie,ue,xe){if(ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"&&(L.type=ie),U!=null||q!=null){if(!(ie!=="submit"&&ie!=="reset"||U!=null)){to(L);return}q=q!=null?""+wn(q):"",U=U!=null?""+wn(U):q,xe||U===L.value||(L.value=U),L.defaultValue=U}W=W??te,W=typeof W!="function"&&typeof W!="symbol"&&!!W,L.checked=xe?L.checked:!!W,L.defaultChecked=!!W,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(L.name=ue),to(L)}function ro(L,U,q){U==="number"&&Ls(L.ownerDocument)===L||L.defaultValue===""+q||(L.defaultValue=""+q)}function ii(L,U,q,W){if(L=L.options,U){U={};for(var te=0;te<q.length;te++)U["$"+q[te]]=!0;for(q=0;q<L.length;q++)te=U.hasOwnProperty("$"+L[q].value),L[q].selected!==te&&(L[q].selected=te),te&&W&&(L[q].defaultSelected=!0)}else{for(q=""+wn(q),U=null,te=0;te<L.length;te++){if(L[te].value===q){L[te].selected=!0,W&&(L[te].defaultSelected=!0);return}U!==null||L[te].disabled||(U=L[te])}U!==null&&(U.selected=!0)}}function Ac(L,U,q){if(U!=null&&(U=""+wn(U),U!==L.value&&(L.value=U),q==null)){L.defaultValue!==U&&(L.defaultValue=U);return}L.defaultValue=q!=null?""+wn(q):""}function Rc(L,U,q,W){if(U==null){if(W!=null){if(q!=null)throw Error(P(92));if(we(W)){if(1<W.length)throw Error(P(93));W=W[0]}q=W}q==null&&(q=""),U=q}q=wn(U),L.defaultValue=q,W=L.textContent,W===q&&W!==""&&W!==null&&(L.value=W),to(L)}function si(L,U){if(U){var q=L.firstChild;if(q&&q===L.lastChild&&q.nodeType===3){q.nodeValue=U;return}}L.textContent=U}var $d=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $c(L,U,q){var W=U.indexOf("--")===0;q==null||typeof q=="boolean"||q===""?W?L.setProperty(U,""):U==="float"?L.cssFloat="":L[U]="":W?L.setProperty(U,q):typeof q!="number"||q===0||$d.has(U)?U==="float"?L.cssFloat=q:L[U]=(""+q).trim():L[U]=q+"px"}function Mc(L,U,q){if(U!=null&&typeof U!="object")throw Error(P(62));if(L=L.style,q!=null){for(var W in q)!q.hasOwnProperty(W)||U!=null&&U.hasOwnProperty(W)||(W.indexOf("--")===0?L.setProperty(W,""):W==="float"?L.cssFloat="":L[W]="");for(var te in U)W=U[te],U.hasOwnProperty(te)&&q[te]!==W&&$c(L,te,W)}else for(var ie in U)U.hasOwnProperty(ie)&&$c(L,ie,U[ie])}function io(L){if(L.indexOf("-")===-1)return!1;switch(L){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Md=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bs(L){return Nd.test(""+L)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":L}function Fn(){}var so=null;function ao(L){return L=L.target||L.srcElement||window,L.correspondingUseElement&&(L=L.correspondingUseElement),L.nodeType===3?L.parentNode:L}var ai=null,oi=null;function Nc(L){var U=ti(L);if(U&&(L=U.stateNode)){var q=L[an]||null;e:switch(L=U.stateNode,U.type){case"input":if(no(L,q.value,q.defaultValue,q.defaultValue,q.checked,q.defaultChecked,q.type,q.name),U=q.name,q.type==="radio"&&U!=null){for(q=L;q.parentNode;)q=q.parentNode;for(q=q.querySelectorAll('input[name="'+En(""+U)+'"][type="radio"]'),U=0;U<q.length;U++){var W=q[U];if(W!==L&&W.form===L.form){var te=W[an]||null;if(!te)throw Error(P(90));no(W,te.value,te.defaultValue,te.defaultValue,te.checked,te.defaultChecked,te.type,te.name)}}for(U=0;U<q.length;U++)W=q[U],W.form===L.form&&Cc(W)}break e;case"textarea":Ac(L,q.value,q.defaultValue);break e;case"select":U=q.value,U!=null&&ii(L,!!q.multiple,U,!1)}}}var oo=!1;function Pc(L,U,q){if(oo)return L(U,q);oo=!0;try{var W=L(U);return W}finally{if(oo=!1,(ai!==null||oi!==null)&&(Aa(),ai&&(U=ai,L=oi,oi=ai=null,Nc(U),L)))for(U=0;U<L.length;U++)Nc(L[U])}}function Fi(L,U){var q=L.stateNode;if(q===null)return null;var W=q[an]||null;if(W===null)return null;q=W[U];e:switch(U){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(W=!W.disabled)||(L=L.type,W=!(L==="button"||L==="input"||L==="select"||L==="textarea")),L=!W;break e;default:L=!1}if(L)return null;if(q&&typeof q!="function")throw Error(P(231,U,typeof q));return q}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lo=!1;if(Gn)try{var Gi={};Object.defineProperty(Gi,"passive",{get:function(){lo=!0}}),window.addEventListener("test",Gi,Gi),window.removeEventListener("test",Gi,Gi)}catch{lo=!1}var fr=null,co=null,zs=null;function jc(){if(zs)return zs;var L,U=co,q=U.length,W,te="value"in fr?fr.value:fr.textContent,ie=te.length;for(L=0;L<q&&U[L]===te[L];L++);var ue=q-L;for(W=1;W<=ue&&U[q-W]===te[ie-W];W++);return zs=te.slice(L,1<W?1-W:void 0)}function Hs(L){var U=L.keyCode;return"charCode"in L?(L=L.charCode,L===0&&U===13&&(L=13)):L=U,L===10&&(L=13),32<=L||L===13?L:0}function Us(){return!0}function Oc(){return!1}function on(L){function U(q,W,te,ie,ue){this._reactName=q,this._targetInst=te,this.type=W,this.nativeEvent=ie,this.target=ue,this.currentTarget=null;for(var xe in L)L.hasOwnProperty(xe)&&(q=L[xe],this[xe]=q?q(ie):ie[xe]);return this.isDefaultPrevented=(ie.defaultPrevented!=null?ie.defaultPrevented:ie.returnValue===!1)?Us:Oc,this.isPropagationStopped=Oc,this}return Y(U.prototype,{preventDefault:function(){this.defaultPrevented=!0;var q=this.nativeEvent;q&&(q.preventDefault?q.preventDefault():typeof q.returnValue!="unknown"&&(q.returnValue=!1),this.isDefaultPrevented=Us)},stopPropagation:function(){var q=this.nativeEvent;q&&(q.stopPropagation?q.stopPropagation():typeof q.cancelBubble!="unknown"&&(q.cancelBubble=!0),this.isPropagationStopped=Us)},persist:function(){},isPersistent:Us}),U}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(L){return L.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fs=on(Dr),Vi=Y({},Dr,{view:0,detail:0}),Pd=on(Vi),uo,fo,qi,Gs=Y({},Vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:po,button:0,buttons:0,relatedTarget:function(L){return L.relatedTarget===void 0?L.fromElement===L.srcElement?L.toElement:L.fromElement:L.relatedTarget},movementX:function(L){return"movementX"in L?L.movementX:(L!==qi&&(qi&&L.type==="mousemove"?(uo=L.screenX-qi.screenX,fo=L.screenY-qi.screenY):fo=uo=0,qi=L),uo)},movementY:function(L){return"movementY"in L?L.movementY:fo}}),kc=on(Gs),jd=Y({},Gs,{dataTransfer:0}),Od=on(jd),kd=Y({},Vi,{relatedTarget:0}),ho=on(kd),Id=Y({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),Dd=on(Id),Ld=Y({},Dr,{clipboardData:function(L){return"clipboardData"in L?L.clipboardData:window.clipboardData}}),Bd=on(Ld),zd=Y({},Dr,{data:0}),Ic=on(zd),Hd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ud={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gd(L){var U=this.nativeEvent;return U.getModifierState?U.getModifierState(L):(L=Fd[L])?!!U[L]:!1}function po(){return Gd}var Vd=Y({},Vi,{key:function(L){if(L.key){var U=Hd[L.key]||L.key;if(U!=="Unidentified")return U}return L.type==="keypress"?(L=Hs(L),L===13?"Enter":String.fromCharCode(L)):L.type==="keydown"||L.type==="keyup"?Ud[L.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:po,charCode:function(L){return L.type==="keypress"?Hs(L):0},keyCode:function(L){return L.type==="keydown"||L.type==="keyup"?L.keyCode:0},which:function(L){return L.type==="keypress"?Hs(L):L.type==="keydown"||L.type==="keyup"?L.keyCode:0}}),qd=on(Vd),Zd=Y({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dc=on(Zd),Yd=Y({},Vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:po}),Xd=on(Yd),Wd=Y({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kd=on(Wd),Qd=Y({},Gs,{deltaX:function(L){return"deltaX"in L?L.deltaX:"wheelDeltaX"in L?-L.wheelDeltaX:0},deltaY:function(L){return"deltaY"in L?L.deltaY:"wheelDeltaY"in L?-L.wheelDeltaY:"wheelDelta"in L?-L.wheelDelta:0},deltaZ:0,deltaMode:0}),Jd=on(Qd),ep=Y({},Dr,{newState:0,oldState:0}),tp=on(ep),np=[9,13,27,32],mo=Gn&&"CompositionEvent"in window,Zi=null;Gn&&"documentMode"in document&&(Zi=document.documentMode);var rp=Gn&&"TextEvent"in window&&!Zi,Lc=Gn&&(!mo||Zi&&8<Zi&&11>=Zi),Bc=" ",zc=!1;function Hc(L,U){switch(L){case"keyup":return np.indexOf(U.keyCode)!==-1;case"keydown":return U.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uc(L){return L=L.detail,typeof L=="object"&&"data"in L?L.data:null}var li=!1;function ip(L,U){switch(L){case"compositionend":return Uc(U);case"keypress":return U.which!==32?null:(zc=!0,Bc);case"textInput":return L=U.data,L===Bc&&zc?null:L;default:return null}}function sp(L,U){if(li)return L==="compositionend"||!mo&&Hc(L,U)?(L=jc(),zs=co=fr=null,li=!1,L):null;switch(L){case"paste":return null;case"keypress":if(!(U.ctrlKey||U.altKey||U.metaKey)||U.ctrlKey&&U.altKey){if(U.char&&1<U.char.length)return U.char;if(U.which)return String.fromCharCode(U.which)}return null;case"compositionend":return Lc&&U.locale!=="ko"?null:U.data;default:return null}}var ap={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fc(L){var U=L&&L.nodeName&&L.nodeName.toLowerCase();return U==="input"?!!ap[L.type]:U==="textarea"}function Gc(L,U,q,W){ai?oi?oi.push(W):oi=[W]:ai=W,U=Oa(U,"onChange"),0<U.length&&(q=new Fs("onChange","change",null,q,W),L.push({event:q,listeners:U}))}var Yi=null,Xi=null;function op(L){Ah(L,0)}function Vs(L){var U=Ui(L);if(Cc(U))return L}function Vc(L,U){if(L==="change")return U}var qc=!1;if(Gn){var go;if(Gn){var yo="oninput"in document;if(!yo){var Zc=document.createElement("div");Zc.setAttribute("oninput","return;"),yo=typeof Zc.oninput=="function"}go=yo}else go=!1;qc=go&&(!document.documentMode||9<document.documentMode)}function Yc(){Yi&&(Yi.detachEvent("onpropertychange",Xc),Xi=Yi=null)}function Xc(L){if(L.propertyName==="value"&&Vs(Xi)){var U=[];Gc(U,Xi,L,ao(L)),Pc(op,U)}}function lp(L,U,q){L==="focusin"?(Yc(),Yi=U,Xi=q,Yi.attachEvent("onpropertychange",Xc)):L==="focusout"&&Yc()}function cp(L){if(L==="selectionchange"||L==="keyup"||L==="keydown")return Vs(Xi)}function up(L,U){if(L==="click")return Vs(U)}function fp(L,U){if(L==="input"||L==="change")return Vs(U)}function hp(L,U){return L===U&&(L!==0||1/L===1/U)||L!==L&&U!==U}var pn=typeof Object.is=="function"?Object.is:hp;function Wi(L,U){if(pn(L,U))return!0;if(typeof L!="object"||L===null||typeof U!="object"||U===null)return!1;var q=Object.keys(L),W=Object.keys(U);if(q.length!==W.length)return!1;for(W=0;W<q.length;W++){var te=q[W];if(!ot.call(U,te)||!pn(L[te],U[te]))return!1}return!0}function Wc(L){for(;L&&L.firstChild;)L=L.firstChild;return L}function Kc(L,U){var q=Wc(L);L=0;for(var W;q;){if(q.nodeType===3){if(W=L+q.textContent.length,L<=U&&W>=U)return{node:q,offset:U-L};L=W}e:{for(;q;){if(q.nextSibling){q=q.nextSibling;break e}q=q.parentNode}q=void 0}q=Wc(q)}}function Qc(L,U){return L&&U?L===U?!0:L&&L.nodeType===3?!1:U&&U.nodeType===3?Qc(L,U.parentNode):"contains"in L?L.contains(U):L.compareDocumentPosition?!!(L.compareDocumentPosition(U)&16):!1:!1}function Jc(L){L=L!=null&&L.ownerDocument!=null&&L.ownerDocument.defaultView!=null?L.ownerDocument.defaultView:window;for(var U=Ls(L.document);U instanceof L.HTMLIFrameElement;){try{var q=typeof U.contentWindow.location.href=="string"}catch{q=!1}if(q)L=U.contentWindow;else break;U=Ls(L.document)}return U}function xo(L){var U=L&&L.nodeName&&L.nodeName.toLowerCase();return U&&(U==="input"&&(L.type==="text"||L.type==="search"||L.type==="tel"||L.type==="url"||L.type==="password")||U==="textarea"||L.contentEditable==="true")}var dp=Gn&&"documentMode"in document&&11>=document.documentMode,ci=null,bo=null,Ki=null,_o=!1;function eu(L,U,q){var W=q.window===q?q.document:q.nodeType===9?q:q.ownerDocument;_o||ci==null||ci!==Ls(W)||(W=ci,"selectionStart"in W&&xo(W)?W={start:W.selectionStart,end:W.selectionEnd}:(W=(W.ownerDocument&&W.ownerDocument.defaultView||window).getSelection(),W={anchorNode:W.anchorNode,anchorOffset:W.anchorOffset,focusNode:W.focusNode,focusOffset:W.focusOffset}),Ki&&Wi(Ki,W)||(Ki=W,W=Oa(bo,"onSelect"),0<W.length&&(U=new Fs("onSelect","select",null,U,q),L.push({event:U,listeners:W}),U.target=ci)))}function Lr(L,U){var q={};return q[L.toLowerCase()]=U.toLowerCase(),q["Webkit"+L]="webkit"+U,q["Moz"+L]="moz"+U,q}var ui={animationend:Lr("Animation","AnimationEnd"),animationiteration:Lr("Animation","AnimationIteration"),animationstart:Lr("Animation","AnimationStart"),transitionrun:Lr("Transition","TransitionRun"),transitionstart:Lr("Transition","TransitionStart"),transitioncancel:Lr("Transition","TransitionCancel"),transitionend:Lr("Transition","TransitionEnd")},vo={},tu={};Gn&&(tu=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function Br(L){if(vo[L])return vo[L];if(!ui[L])return L;var U=ui[L],q;for(q in U)if(U.hasOwnProperty(q)&&q in tu)return vo[L]=U[q];return L}var nu=Br("animationend"),ru=Br("animationiteration"),iu=Br("animationstart"),pp=Br("transitionrun"),mp=Br("transitionstart"),gp=Br("transitioncancel"),su=Br("transitionend"),au=new Map,So="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");So.push("scrollEnd");function jn(L,U){au.set(L,U),Ir(U,[L])}var qs=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},Cn=[],fi=0,wo=0;function Zs(){for(var L=fi,U=wo=fi=0;U<L;){var q=Cn[U];Cn[U++]=null;var W=Cn[U];Cn[U++]=null;var te=Cn[U];Cn[U++]=null;var ie=Cn[U];if(Cn[U++]=null,W!==null&&te!==null){var ue=W.pending;ue===null?te.next=te:(te.next=ue.next,ue.next=te),W.pending=te}ie!==0&&ou(q,te,ie)}}function Ys(L,U,q,W){Cn[fi++]=L,Cn[fi++]=U,Cn[fi++]=q,Cn[fi++]=W,wo|=W,L.lanes|=W,L=L.alternate,L!==null&&(L.lanes|=W)}function Eo(L,U,q,W){return Ys(L,U,q,W),Xs(L)}function zr(L,U){return Ys(L,null,null,U),Xs(L)}function ou(L,U,q){L.lanes|=q;var W=L.alternate;W!==null&&(W.lanes|=q);for(var te=!1,ie=L.return;ie!==null;)ie.childLanes|=q,W=ie.alternate,W!==null&&(W.childLanes|=q),ie.tag===22&&(L=ie.stateNode,L===null||L._visibility&1||(te=!0)),L=ie,ie=ie.return;return L.tag===3?(ie=L.stateNode,te&&U!==null&&(te=31-nn(q),L=ie.hiddenUpdates,W=L[te],W===null?L[te]=[U]:W.push(U),U.lane=q|536870912),ie):null}function Xs(L){if(50<bs)throw bs=0,jl=null,Error(P(185));for(var U=L.return;U!==null;)L=U,U=L.return;return L.tag===3?L.stateNode:null}var hi={};function yp(L,U,q,W){this.tag=L,this.key=q,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=U,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=W,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(L,U,q,W){return new yp(L,U,q,W)}function Co(L){return L=L.prototype,!(!L||!L.isReactComponent)}function Vn(L,U){var q=L.alternate;return q===null?(q=mn(L.tag,U,L.key,L.mode),q.elementType=L.elementType,q.type=L.type,q.stateNode=L.stateNode,q.alternate=L,L.alternate=q):(q.pendingProps=U,q.type=L.type,q.flags=0,q.subtreeFlags=0,q.deletions=null),q.flags=L.flags&65011712,q.childLanes=L.childLanes,q.lanes=L.lanes,q.child=L.child,q.memoizedProps=L.memoizedProps,q.memoizedState=L.memoizedState,q.updateQueue=L.updateQueue,U=L.dependencies,q.dependencies=U===null?null:{lanes:U.lanes,firstContext:U.firstContext},q.sibling=L.sibling,q.index=L.index,q.ref=L.ref,q.refCleanup=L.refCleanup,q}function lu(L,U){L.flags&=65011714;var q=L.alternate;return q===null?(L.childLanes=0,L.lanes=U,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=q.childLanes,L.lanes=q.lanes,L.child=q.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=q.memoizedProps,L.memoizedState=q.memoizedState,L.updateQueue=q.updateQueue,L.type=q.type,U=q.dependencies,L.dependencies=U===null?null:{lanes:U.lanes,firstContext:U.firstContext}),L}function Ws(L,U,q,W,te,ie){var ue=0;if(W=L,typeof L=="function")Co(L)&&(ue=1);else if(typeof L=="string")ue=Sm(L,q,Be.current)?26:L==="html"||L==="head"||L==="body"?27:5;else e:switch(L){case de:return L=mn(31,q,U,te),L.elementType=de,L.lanes=ie,L;case ne:return Hr(q.children,te,ie,U);case se:ue=8,te|=24;break;case oe:return L=mn(12,q,U,te|2),L.elementType=oe,L.lanes=ie,L;case pe:return L=mn(13,q,U,te),L.elementType=pe,L.lanes=ie,L;case me:return L=mn(19,q,U,te),L.elementType=me,L.lanes=ie,L;default:if(typeof L=="object"&&L!==null)switch(L.$$typeof){case ce:ue=10;break e;case ae:ue=9;break e;case le:ue=11;break e;case he:ue=14;break e;case fe:ue=16,W=null;break e}ue=29,q=Error(P(130,L===null?"null":typeof L,"")),W=null}return U=mn(ue,q,U,te),U.elementType=L,U.type=W,U.lanes=ie,U}function Hr(L,U,q,W){return L=mn(7,L,W,U),L.lanes=q,L}function To(L,U,q){return L=mn(6,L,null,U),L.lanes=q,L}function cu(L){var U=mn(18,null,null,0);return U.stateNode=L,U}function Ao(L,U,q){return U=mn(4,L.children!==null?L.children:[],L.key,U),U.lanes=q,U.stateNode={containerInfo:L.containerInfo,pendingChildren:null,implementation:L.implementation},U}var uu=new WeakMap;function Tn(L,U){if(typeof L=="object"&&L!==null){var q=uu.get(L);return q!==void 0?q:(U={value:L,source:U,stack:et(U)},uu.set(L,U),U)}return{value:L,source:U,stack:et(U)}}var di=[],mi=0,Ks=null,Qi=0,An=[],Rn=0,hr=null,Dn=1,Ln="";function qn(L,U){di[mi++]=Qi,di[mi++]=Ks,Ks=L,Qi=U}function fu(L,U,q){An[Rn++]=Dn,An[Rn++]=Ln,An[Rn++]=hr,hr=L;var W=Dn;L=Ln;var te=32-nn(W)-1;W&=~(1<<te),q+=1;var ie=32-nn(U)+te;if(30<ie){var ue=te-te%5;ie=(W&(1<<ue)-1).toString(32),W>>=ue,te-=ue,Dn=1<<32-nn(U)+te|q<<te|W,Ln=ie+L}else Dn=1<<ie|q<<te|W,Ln=L}function Ro(L){L.return!==null&&(qn(L,1),fu(L,1,0))}function $o(L){for(;L===Ks;)Ks=di[--mi],di[mi]=null,Qi=di[--mi],di[mi]=null;for(;L===hr;)hr=An[--Rn],An[Rn]=null,Ln=An[--Rn],An[Rn]=null,Dn=An[--Rn],An[Rn]=null}function hu(L,U){An[Rn++]=Dn,An[Rn++]=Ln,An[Rn++]=hr,Dn=U.id,Ln=U.overflow,hr=L}var Kt=null,Nt=null,yt=!1,dr=null,$n=!1,Mo=Error(P(519));function pr(L){var U=Error(P(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ji(Tn(U,L)),Mo}function du(L){var U=L.stateNode,q=L.type,W=L.memoizedProps;switch(U[Wt]=L,U[an]=W,q){case"dialog":dt("cancel",U),dt("close",U);break;case"iframe":case"object":case"embed":dt("load",U);break;case"video":case"audio":for(q=0;q<vs.length;q++)dt(vs[q],U);break;case"source":dt("error",U);break;case"img":case"image":case"link":dt("error",U),dt("load",U);break;case"details":dt("toggle",U);break;case"input":dt("invalid",U),Tc(U,W.value,W.defaultValue,W.checked,W.defaultChecked,W.type,W.name,!0);break;case"select":dt("invalid",U);break;case"textarea":dt("invalid",U),Rc(U,W.value,W.defaultValue,W.children)}q=W.children,typeof q!="string"&&typeof q!="number"&&typeof q!="bigint"||U.textContent===""+q||W.suppressHydrationWarning===!0||Nh(U.textContent,q)?(W.popover!=null&&(dt("beforetoggle",U),dt("toggle",U)),W.onScroll!=null&&dt("scroll",U),W.onScrollEnd!=null&&dt("scrollend",U),W.onClick!=null&&(U.onclick=Fn),U=!0):U=!1,U||pr(L,!0)}function pu(L){for(Kt=L.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:Kt=Kt.return}}function gi(L){if(L!==Kt)return!1;if(!yt)return pu(L),yt=!0,!1;var U=L.tag,q;if((q=U!==3&&U!==27)&&((q=U===5)&&(q=L.type,q=!(q!=="form"&&q!=="button")||Yl(L.type,L.memoizedProps)),q=!q),q&&Nt&&pr(L),pu(L),U===13){if(L=L.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(P(317));Nt=zh(L)}else if(U===31){if(L=L.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(P(317));Nt=zh(L)}else U===27?(U=Nt,Rr(L.type)?(L=Jl,Jl=null,Nt=L):Nt=U):Nt=Kt?Nn(L.stateNode.nextSibling):null;return!0}function Ur(){Nt=Kt=null,yt=!1}function No(){var L=dr;return L!==null&&(hn===null?hn=L:hn.push.apply(hn,L),dr=null),L}function Ji(L){dr===null?dr=[L]:dr.push(L)}var Po=_e(null),Fr=null,Wn=null;function mr(L,U,q){Ne(Po,U._currentValue),U._currentValue=q}function Kn(L){L._currentValue=Po.current,$e(Po)}function jo(L,U,q){for(;L!==null;){var W=L.alternate;if((L.childLanes&U)!==U?(L.childLanes|=U,W!==null&&(W.childLanes|=U)):W!==null&&(W.childLanes&U)!==U&&(W.childLanes|=U),L===q)break;L=L.return}}function Oo(L,U,q,W){var te=L.child;for(te!==null&&(te.return=L);te!==null;){var ie=te.dependencies;if(ie!==null){var ue=te.child;ie=ie.firstContext;e:for(;ie!==null;){var xe=ie;ie=te;for(var Re=0;Re<U.length;Re++)if(xe.context===U[Re]){ie.lanes|=q,xe=ie.alternate,xe!==null&&(xe.lanes|=q),jo(ie.return,q,L),W||(ue=null);break e}ie=xe.next}}else if(te.tag===18){if(ue=te.return,ue===null)throw Error(P(341));ue.lanes|=q,ie=ue.alternate,ie!==null&&(ie.lanes|=q),jo(ue,q,L),ue=null}else ue=te.child;if(ue!==null)ue.return=te;else for(ue=te;ue!==null;){if(ue===L){ue=null;break}if(te=ue.sibling,te!==null){te.return=ue.return,ue=te;break}ue=ue.return}te=ue}}function yi(L,U,q,W){L=null;for(var te=U,ie=!1;te!==null;){if(!ie){if((te.flags&524288)!==0)ie=!0;else if((te.flags&262144)!==0)break}if(te.tag===10){var ue=te.alternate;if(ue===null)throw Error(P(387));if(ue=ue.memoizedProps,ue!==null){var xe=te.type;pn(te.pendingProps.value,ue.value)||(L!==null?L.push(xe):L=[xe])}}else if(te===Oe.current){if(ue=te.alternate,ue===null)throw Error(P(387));ue.memoizedState.memoizedState!==te.memoizedState.memoizedState&&(L!==null?L.push(Ts):L=[Ts])}te=te.return}L!==null&&Oo(U,L,q,W),U.flags|=262144}function Qs(L){for(L=L.firstContext;L!==null;){if(!pn(L.context._currentValue,L.memoizedValue))return!0;L=L.next}return!1}function Gr(L){Fr=L,Wn=null,L=L.dependencies,L!==null&&(L.firstContext=null)}function Qt(L){return mu(Fr,L)}function Js(L,U){return Fr===null&&Gr(L),mu(L,U)}function mu(L,U){var q=U._currentValue;if(U={context:U,memoizedValue:q,next:null},Wn===null){if(L===null)throw Error(P(308));Wn=U,L.dependencies={lanes:0,firstContext:U},L.flags|=524288}else Wn=Wn.next=U;return q}var xp=typeof AbortController<"u"?AbortController:function(){var L=[],U=this.signal={aborted:!1,addEventListener:function(q,W){L.push(W)}};this.abort=function(){U.aborted=!0,L.forEach(function(q){return q()})}},bp=_.unstable_scheduleCallback,_p=_.unstable_NormalPriority,zt={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ko(){return{controller:new xp,data:new Map,refCount:0}}function es(L){L.refCount--,L.refCount===0&&bp(_p,function(){L.controller.abort()})}var ts=null,Io=0,xi=0,bi=null;function vp(L,U){if(ts===null){var q=ts=[];Io=0,xi=Bl(),bi={status:"pending",value:void 0,then:function(W){q.push(W)}}}return Io++,U.then(gu,gu),U}function gu(){if(--Io===0&&ts!==null){bi!==null&&(bi.status="fulfilled");var L=ts;ts=null,xi=0,bi=null;for(var U=0;U<L.length;U++)(0,L[U])()}}function Sp(L,U){var q=[],W={status:"pending",value:null,reason:null,then:function(te){q.push(te)}};return L.then(function(){W.status="fulfilled",W.value=U;for(var te=0;te<q.length;te++)(0,q[te])(U)},function(te){for(W.status="rejected",W.reason=te,te=0;te<q.length;te++)(0,q[te])(void 0)}),W}var yu=ge.S;ge.S=function(L,U){th=ft(),typeof U=="object"&&U!==null&&typeof U.then=="function"&&vp(L,U),yu!==null&&yu(L,U)};var Vr=_e(null);function Do(){var L=Vr.current;return L!==null?L:Mt.pooledCache}function ea(L,U){U===null?Ne(Vr,Vr.current):Ne(Vr,U.pool)}function xu(){var L=Do();return L===null?null:{parent:zt._currentValue,pool:L}}var _i=Error(P(460)),Lo=Error(P(474)),ta=Error(P(542)),na={then:function(){}};function bu(L){return L=L.status,L==="fulfilled"||L==="rejected"}function _u(L,U,q){switch(q=L[q],q===void 0?L.push(U):q!==U&&(U.then(Fn,Fn),U=q),U.status){case"fulfilled":return U.value;case"rejected":throw L=U.reason,Su(L),L;default:if(typeof U.status=="string")U.then(Fn,Fn);else{if(L=Mt,L!==null&&100<L.shellSuspendCounter)throw Error(P(482));L=U,L.status="pending",L.then(function(W){if(U.status==="pending"){var te=U;te.status="fulfilled",te.value=W}},function(W){if(U.status==="pending"){var te=U;te.status="rejected",te.reason=W}})}switch(U.status){case"fulfilled":return U.value;case"rejected":throw L=U.reason,Su(L),L}throw Zr=U,_i}}function qr(L){try{var U=L._init;return U(L._payload)}catch(q){throw q!==null&&typeof q=="object"&&typeof q.then=="function"?(Zr=q,_i):q}}var Zr=null;function vu(){if(Zr===null)throw Error(P(459));var L=Zr;return Zr=null,L}function Su(L){if(L===_i||L===ta)throw Error(P(483))}var vi=null,ns=0;function ra(L){var U=ns;return ns+=1,vi===null&&(vi=[]),_u(vi,L,U)}function rs(L,U){U=U.props.ref,L.ref=U!==void 0?U:null}function ia(L,U){throw U.$$typeof===Q?Error(P(525)):(L=Object.prototype.toString.call(U),Error(P(31,L==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":L)))}function wu(L){function U(ke,Pe){if(L){var Ie=ke.deletions;Ie===null?(ke.deletions=[Pe],ke.flags|=16):Ie.push(Pe)}}function q(ke,Pe){if(!L)return null;for(;Pe!==null;)U(ke,Pe),Pe=Pe.sibling;return null}function W(ke){for(var Pe=new Map;ke!==null;)ke.key!==null?Pe.set(ke.key,ke):Pe.set(ke.index,ke),ke=ke.sibling;return Pe}function te(ke,Pe){return ke=Vn(ke,Pe),ke.index=0,ke.sibling=null,ke}function ie(ke,Pe,Ie){return ke.index=Ie,L?(Ie=ke.alternate,Ie!==null?(Ie=Ie.index,Ie<Pe?(ke.flags|=67108866,Pe):Ie):(ke.flags|=67108866,Pe)):(ke.flags|=1048576,Pe)}function ue(ke){return L&&ke.alternate===null&&(ke.flags|=67108866),ke}function xe(ke,Pe,Ie,qe){return Pe===null||Pe.tag!==6?(Pe=To(Ie,ke.mode,qe),Pe.return=ke,Pe):(Pe=te(Pe,Ie),Pe.return=ke,Pe)}function Re(ke,Pe,Ie,qe){var st=Ie.type;return st===ne?Ve(ke,Pe,Ie.props.children,qe,Ie.key):Pe!==null&&(Pe.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===fe&&qr(st)===Pe.type)?(Pe=te(Pe,Ie.props),rs(Pe,Ie),Pe.return=ke,Pe):(Pe=Ws(Ie.type,Ie.key,Ie.props,null,ke.mode,qe),rs(Pe,Ie),Pe.return=ke,Pe)}function De(ke,Pe,Ie,qe){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==Ie.containerInfo||Pe.stateNode.implementation!==Ie.implementation?(Pe=Ao(Ie,ke.mode,qe),Pe.return=ke,Pe):(Pe=te(Pe,Ie.children||[]),Pe.return=ke,Pe)}function Ve(ke,Pe,Ie,qe,st){return Pe===null||Pe.tag!==7?(Pe=Hr(Ie,ke.mode,qe,st),Pe.return=ke,Pe):(Pe=te(Pe,Ie),Pe.return=ke,Pe)}function Xe(ke,Pe,Ie){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return Pe=To(""+Pe,ke.mode,Ie),Pe.return=ke,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case J:return Ie=Ws(Pe.type,Pe.key,Pe.props,null,ke.mode,Ie),rs(Ie,Pe),Ie.return=ke,Ie;case ee:return Pe=Ao(Pe,ke.mode,Ie),Pe.return=ke,Pe;case fe:return Pe=qr(Pe),Xe(ke,Pe,Ie)}if(we(Pe)||Ce(Pe))return Pe=Hr(Pe,ke.mode,Ie,null),Pe.return=ke,Pe;if(typeof Pe.then=="function")return Xe(ke,ra(Pe),Ie);if(Pe.$$typeof===ce)return Xe(ke,Js(ke,Pe),Ie);ia(ke,Pe)}return null}function Le(ke,Pe,Ie,qe){var st=Pe!==null?Pe.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return st!==null?null:xe(ke,Pe,""+Ie,qe);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case J:return Ie.key===st?Re(ke,Pe,Ie,qe):null;case ee:return Ie.key===st?De(ke,Pe,Ie,qe):null;case fe:return Ie=qr(Ie),Le(ke,Pe,Ie,qe)}if(we(Ie)||Ce(Ie))return st!==null?null:Ve(ke,Pe,Ie,qe,null);if(typeof Ie.then=="function")return Le(ke,Pe,ra(Ie),qe);if(Ie.$$typeof===ce)return Le(ke,Pe,Js(ke,Ie),qe);ia(ke,Ie)}return null}function He(ke,Pe,Ie,qe,st){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return ke=ke.get(Ie)||null,xe(Pe,ke,""+qe,st);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case J:return ke=ke.get(qe.key===null?Ie:qe.key)||null,Re(Pe,ke,qe,st);case ee:return ke=ke.get(qe.key===null?Ie:qe.key)||null,De(Pe,ke,qe,st);case fe:return qe=qr(qe),He(ke,Pe,Ie,qe,st)}if(we(qe)||Ce(qe))return ke=ke.get(Ie)||null,Ve(Pe,ke,qe,st,null);if(typeof qe.then=="function")return He(ke,Pe,Ie,ra(qe),st);if(qe.$$typeof===ce)return He(ke,Pe,Ie,Js(Pe,qe),st);ia(Pe,qe)}return null}function tt(ke,Pe,Ie,qe){for(var st=null,bt=null,nt=Pe,ut=Pe=0,gt=null;nt!==null&&ut<Ie.length;ut++){nt.index>ut?(gt=nt,nt=null):gt=nt.sibling;var _t=Le(ke,nt,Ie[ut],qe);if(_t===null){nt===null&&(nt=gt);break}L&&nt&&_t.alternate===null&&U(ke,nt),Pe=ie(_t,Pe,ut),bt===null?st=_t:bt.sibling=_t,bt=_t,nt=gt}if(ut===Ie.length)return q(ke,nt),yt&&qn(ke,ut),st;if(nt===null){for(;ut<Ie.length;ut++)nt=Xe(ke,Ie[ut],qe),nt!==null&&(Pe=ie(nt,Pe,ut),bt===null?st=nt:bt.sibling=nt,bt=nt);return yt&&qn(ke,ut),st}for(nt=W(nt);ut<Ie.length;ut++)gt=He(nt,ke,ut,Ie[ut],qe),gt!==null&&(L&&gt.alternate!==null&&nt.delete(gt.key===null?ut:gt.key),Pe=ie(gt,Pe,ut),bt===null?st=gt:bt.sibling=gt,bt=gt);return L&&nt.forEach(function(jr){return U(ke,jr)}),yt&&qn(ke,ut),st}function at(ke,Pe,Ie,qe){if(Ie==null)throw Error(P(151));for(var st=null,bt=null,nt=Pe,ut=Pe=0,gt=null,_t=Ie.next();nt!==null&&!_t.done;ut++,_t=Ie.next()){nt.index>ut?(gt=nt,nt=null):gt=nt.sibling;var jr=Le(ke,nt,_t.value,qe);if(jr===null){nt===null&&(nt=gt);break}L&&nt&&jr.alternate===null&&U(ke,nt),Pe=ie(jr,Pe,ut),bt===null?st=jr:bt.sibling=jr,bt=jr,nt=gt}if(_t.done)return q(ke,nt),yt&&qn(ke,ut),st;if(nt===null){for(;!_t.done;ut++,_t=Ie.next())_t=Xe(ke,_t.value,qe),_t!==null&&(Pe=ie(_t,Pe,ut),bt===null?st=_t:bt.sibling=_t,bt=_t);return yt&&qn(ke,ut),st}for(nt=W(nt);!_t.done;ut++,_t=Ie.next())_t=He(nt,ke,ut,_t.value,qe),_t!==null&&(L&&_t.alternate!==null&&nt.delete(_t.key===null?ut:_t.key),Pe=ie(_t,Pe,ut),bt===null?st=_t:bt.sibling=_t,bt=_t);return L&&nt.forEach(function(jm){return U(ke,jm)}),yt&&qn(ke,ut),st}function Tt(ke,Pe,Ie,qe){if(typeof Ie=="object"&&Ie!==null&&Ie.type===ne&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case J:e:{for(var st=Ie.key;Pe!==null;){if(Pe.key===st){if(st=Ie.type,st===ne){if(Pe.tag===7){q(ke,Pe.sibling),qe=te(Pe,Ie.props.children),qe.return=ke,ke=qe;break e}}else if(Pe.elementType===st||typeof st=="object"&&st!==null&&st.$$typeof===fe&&qr(st)===Pe.type){q(ke,Pe.sibling),qe=te(Pe,Ie.props),rs(qe,Ie),qe.return=ke,ke=qe;break e}q(ke,Pe);break}else U(ke,Pe);Pe=Pe.sibling}Ie.type===ne?(qe=Hr(Ie.props.children,ke.mode,qe,Ie.key),qe.return=ke,ke=qe):(qe=Ws(Ie.type,Ie.key,Ie.props,null,ke.mode,qe),rs(qe,Ie),qe.return=ke,ke=qe)}return ue(ke);case ee:e:{for(st=Ie.key;Pe!==null;){if(Pe.key===st)if(Pe.tag===4&&Pe.stateNode.containerInfo===Ie.containerInfo&&Pe.stateNode.implementation===Ie.implementation){q(ke,Pe.sibling),qe=te(Pe,Ie.children||[]),qe.return=ke,ke=qe;break e}else{q(ke,Pe);break}else U(ke,Pe);Pe=Pe.sibling}qe=Ao(Ie,ke.mode,qe),qe.return=ke,ke=qe}return ue(ke);case fe:return Ie=qr(Ie),Tt(ke,Pe,Ie,qe)}if(we(Ie))return tt(ke,Pe,Ie,qe);if(Ce(Ie)){if(st=Ce(Ie),typeof st!="function")throw Error(P(150));return Ie=st.call(Ie),at(ke,Pe,Ie,qe)}if(typeof Ie.then=="function")return Tt(ke,Pe,ra(Ie),qe);if(Ie.$$typeof===ce)return Tt(ke,Pe,Js(ke,Ie),qe);ia(ke,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint"?(Ie=""+Ie,Pe!==null&&Pe.tag===6?(q(ke,Pe.sibling),qe=te(Pe,Ie),qe.return=ke,ke=qe):(q(ke,Pe),qe=To(Ie,ke.mode,qe),qe.return=ke,ke=qe),ue(ke)):q(ke,Pe)}return function(ke,Pe,Ie,qe){try{ns=0;var st=Tt(ke,Pe,Ie,qe);return vi=null,st}catch(nt){if(nt===_i||nt===ta)throw nt;var bt=mn(29,nt,null,ke.mode);return bt.lanes=qe,bt.return=ke,bt}}}var Yr=wu(!0),Eu=wu(!1),gr=!1;function Bo(L){L.updateQueue={baseState:L.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zo(L,U){L=L.updateQueue,U.updateQueue===L&&(U.updateQueue={baseState:L.baseState,firstBaseUpdate:L.firstBaseUpdate,lastBaseUpdate:L.lastBaseUpdate,shared:L.shared,callbacks:null})}function yr(L){return{lane:L,tag:0,payload:null,callback:null,next:null}}function xr(L,U,q){var W=L.updateQueue;if(W===null)return null;if(W=W.shared,(vt&2)!==0){var te=W.pending;return te===null?U.next=U:(U.next=te.next,te.next=U),W.pending=U,U=Xs(L),ou(L,null,q),U}return Ys(L,W,U,q),Xs(L)}function is(L,U,q){if(U=U.updateQueue,U!==null&&(U=U.shared,(q&4194048)!==0)){var W=U.lanes;W&=L.pendingLanes,q|=W,U.lanes=q,mc(L,q)}}function Ho(L,U){var q=L.updateQueue,W=L.alternate;if(W!==null&&(W=W.updateQueue,q===W)){var te=null,ie=null;if(q=q.firstBaseUpdate,q!==null){do{var ue={lane:q.lane,tag:q.tag,payload:q.payload,callback:null,next:null};ie===null?te=ie=ue:ie=ie.next=ue,q=q.next}while(q!==null);ie===null?te=ie=U:ie=ie.next=U}else te=ie=U;q={baseState:W.baseState,firstBaseUpdate:te,lastBaseUpdate:ie,shared:W.shared,callbacks:W.callbacks},L.updateQueue=q;return}L=q.lastBaseUpdate,L===null?q.firstBaseUpdate=U:L.next=U,q.lastBaseUpdate=U}var Uo=!1;function ss(){if(Uo){var L=bi;if(L!==null)throw L}}function as(L,U,q,W){Uo=!1;var te=L.updateQueue;gr=!1;var ie=te.firstBaseUpdate,ue=te.lastBaseUpdate,xe=te.shared.pending;if(xe!==null){te.shared.pending=null;var Re=xe,De=Re.next;Re.next=null,ue===null?ie=De:ue.next=De,ue=Re;var Ve=L.alternate;Ve!==null&&(Ve=Ve.updateQueue,xe=Ve.lastBaseUpdate,xe!==ue&&(xe===null?Ve.firstBaseUpdate=De:xe.next=De,Ve.lastBaseUpdate=Re))}if(ie!==null){var Xe=te.baseState;ue=0,Ve=De=Re=null,xe=ie;do{var Le=xe.lane&-536870913,He=Le!==xe.lane;if(He?(mt&Le)===Le:(W&Le)===Le){Le!==0&&Le===xi&&(Uo=!0),Ve!==null&&(Ve=Ve.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var tt=L,at=xe;Le=U;var Tt=q;switch(at.tag){case 1:if(tt=at.payload,typeof tt=="function"){Xe=tt.call(Tt,Xe,Le);break e}Xe=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=at.payload,Le=typeof tt=="function"?tt.call(Tt,Xe,Le):tt,Le==null)break e;Xe=Y({},Xe,Le);break e;case 2:gr=!0}}Le=xe.callback,Le!==null&&(L.flags|=64,He&&(L.flags|=8192),He=te.callbacks,He===null?te.callbacks=[Le]:He.push(Le))}else He={lane:Le,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},Ve===null?(De=Ve=He,Re=Xe):Ve=Ve.next=He,ue|=Le;if(xe=xe.next,xe===null){if(xe=te.shared.pending,xe===null)break;He=xe,xe=He.next,He.next=null,te.lastBaseUpdate=He,te.shared.pending=null}}while(!0);Ve===null&&(Re=Xe),te.baseState=Re,te.firstBaseUpdate=De,te.lastBaseUpdate=Ve,ie===null&&(te.shared.lanes=0),wr|=ue,L.lanes=ue,L.memoizedState=Xe}}function Cu(L,U){if(typeof L!="function")throw Error(P(191,L));L.call(U)}function Tu(L,U){var q=L.callbacks;if(q!==null)for(L.callbacks=null,L=0;L<q.length;L++)Cu(q[L],U)}var Si=_e(null),sa=_e(0);function Au(L,U){L=ar,Ne(sa,L),Ne(Si,U),ar=L|U.baseLanes}function Fo(){Ne(sa,ar),Ne(Si,Si.current)}function Go(){ar=sa.current,$e(Si),$e(sa)}var gn=_e(null),Mn=null;function br(L){var U=L.alternate;Ne(Lt,Lt.current&1),Ne(gn,L),Mn===null&&(U===null||Si.current!==null||U.memoizedState!==null)&&(Mn=L)}function Vo(L){Ne(Lt,Lt.current),Ne(gn,L),Mn===null&&(Mn=L)}function Ru(L){L.tag===22?(Ne(Lt,Lt.current),Ne(gn,L),Mn===null&&(Mn=L)):_r()}function _r(){Ne(Lt,Lt.current),Ne(gn,gn.current)}function yn(L){$e(gn),Mn===L&&(Mn=null),$e(Lt)}var Lt=_e(0);function aa(L){for(var U=L;U!==null;){if(U.tag===13){var q=U.memoizedState;if(q!==null&&(q=q.dehydrated,q===null||Kl(q)||Ql(q)))return U}else if(U.tag===19&&(U.memoizedProps.revealOrder==="forwards"||U.memoizedProps.revealOrder==="backwards"||U.memoizedProps.revealOrder==="unstable_legacy-backwards"||U.memoizedProps.revealOrder==="together")){if((U.flags&128)!==0)return U}else if(U.child!==null){U.child.return=U,U=U.child;continue}if(U===L)break;for(;U.sibling===null;){if(U.return===null||U.return===L)return null;U=U.return}U.sibling.return=U.return,U=U.sibling}return null}var Qn=0,ct=null,Et=null,Ht=null,oa=!1,wi=!1,Xr=!1,la=0,os=0,Ei=null,wp=0;function It(){throw Error(P(321))}function qo(L,U){if(U===null)return!1;for(var q=0;q<U.length&&q<L.length;q++)if(!pn(L[q],U[q]))return!1;return!0}function Zo(L,U,q,W,te,ie){return Qn=ie,ct=U,U.memoizedState=null,U.updateQueue=null,U.lanes=0,ge.H=L===null||L.memoizedState===null?hf:ll,Xr=!1,ie=q(W,te),Xr=!1,wi&&(ie=Mu(U,q,W,te)),$u(L),ie}function $u(L){ge.H=us;var U=Et!==null&&Et.next!==null;if(Qn=0,Ht=Et=ct=null,oa=!1,os=0,Ei=null,U)throw Error(P(300));L===null||Ut||(L=L.dependencies,L!==null&&Qs(L)&&(Ut=!0))}function Mu(L,U,q,W){ct=L;var te=0;do{if(wi&&(Ei=null),os=0,wi=!1,25<=te)throw Error(P(301));if(te+=1,Ht=Et=null,L.updateQueue!=null){var ie=L.updateQueue;ie.lastEffect=null,ie.events=null,ie.stores=null,ie.memoCache!=null&&(ie.memoCache.index=0)}ge.H=df,ie=U(q,W)}while(wi);return ie}function Ep(){var L=ge.H,U=L.useState()[0];return U=typeof U.then=="function"?ls(U):U,L=L.useState()[0],(Et!==null?Et.memoizedState:null)!==L&&(ct.flags|=1024),U}function Yo(){var L=la!==0;return la=0,L}function Xo(L,U,q){U.updateQueue=L.updateQueue,U.flags&=-2053,L.lanes&=~q}function Wo(L){if(oa){for(L=L.memoizedState;L!==null;){var U=L.queue;U!==null&&(U.pending=null),L=L.next}oa=!1}Qn=0,Ht=Et=ct=null,wi=!1,os=la=0,Ei=null}function rn(){var L={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?ct.memoizedState=Ht=L:Ht=Ht.next=L,Ht}function Bt(){if(Et===null){var L=ct.alternate;L=L!==null?L.memoizedState:null}else L=Et.next;var U=Ht===null?ct.memoizedState:Ht.next;if(U!==null)Ht=U,Et=L;else{if(L===null)throw ct.alternate===null?Error(P(467)):Error(P(310));Et=L,L={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Ht===null?ct.memoizedState=Ht=L:Ht=Ht.next=L}return Ht}function ca(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ls(L){var U=os;return os+=1,Ei===null&&(Ei=[]),L=_u(Ei,L,U),U=ct,(Ht===null?U.memoizedState:Ht.next)===null&&(U=U.alternate,ge.H=U===null||U.memoizedState===null?hf:ll),L}function ua(L){if(L!==null&&typeof L=="object"){if(typeof L.then=="function")return ls(L);if(L.$$typeof===ce)return Qt(L)}throw Error(P(438,String(L)))}function Ko(L){var U=null,q=ct.updateQueue;if(q!==null&&(U=q.memoCache),U==null){var W=ct.alternate;W!==null&&(W=W.updateQueue,W!==null&&(W=W.memoCache,W!=null&&(U={data:W.data.map(function(te){return te.slice()}),index:0})))}if(U==null&&(U={data:[],index:0}),q===null&&(q=ca(),ct.updateQueue=q),q.memoCache=U,q=U.data[U.index],q===void 0)for(q=U.data[U.index]=Array(L),W=0;W<L;W++)q[W]=be;return U.index++,q}function Jn(L,U){return typeof U=="function"?U(L):U}function fa(L){var U=Bt();return Qo(U,Et,L)}function Qo(L,U,q){var W=L.queue;if(W===null)throw Error(P(311));W.lastRenderedReducer=q;var te=L.baseQueue,ie=W.pending;if(ie!==null){if(te!==null){var ue=te.next;te.next=ie.next,ie.next=ue}U.baseQueue=te=ie,W.pending=null}if(ie=L.baseState,te===null)L.memoizedState=ie;else{U=te.next;var xe=ue=null,Re=null,De=U,Ve=!1;do{var Xe=De.lane&-536870913;if(Xe!==De.lane?(mt&Xe)===Xe:(Qn&Xe)===Xe){var Le=De.revertLane;if(Le===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),Xe===xi&&(Ve=!0);else if((Qn&Le)===Le){De=De.next,Le===xi&&(Ve=!0);continue}else Xe={lane:0,revertLane:De.revertLane,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},Re===null?(xe=Re=Xe,ue=ie):Re=Re.next=Xe,ct.lanes|=Le,wr|=Le;Xe=De.action,Xr&&q(ie,Xe),ie=De.hasEagerState?De.eagerState:q(ie,Xe)}else Le={lane:Xe,revertLane:De.revertLane,gesture:De.gesture,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},Re===null?(xe=Re=Le,ue=ie):Re=Re.next=Le,ct.lanes|=Xe,wr|=Xe;De=De.next}while(De!==null&&De!==U);if(Re===null?ue=ie:Re.next=xe,!pn(ie,L.memoizedState)&&(Ut=!0,Ve&&(q=bi,q!==null)))throw q;L.memoizedState=ie,L.baseState=ue,L.baseQueue=Re,W.lastRenderedState=ie}return te===null&&(W.lanes=0),[L.memoizedState,W.dispatch]}function Jo(L){var U=Bt(),q=U.queue;if(q===null)throw Error(P(311));q.lastRenderedReducer=L;var W=q.dispatch,te=q.pending,ie=U.memoizedState;if(te!==null){q.pending=null;var ue=te=te.next;do ie=L(ie,ue.action),ue=ue.next;while(ue!==te);pn(ie,U.memoizedState)||(Ut=!0),U.memoizedState=ie,U.baseQueue===null&&(U.baseState=ie),q.lastRenderedState=ie}return[ie,W]}function Nu(L,U,q){var W=ct,te=Bt(),ie=yt;if(ie){if(q===void 0)throw Error(P(407));q=q()}else q=U();var ue=!pn((Et||te).memoizedState,q);if(ue&&(te.memoizedState=q,Ut=!0),te=te.queue,nl(Ou.bind(null,W,te,L),[L]),te.getSnapshot!==U||ue||Ht!==null&&Ht.memoizedState.tag&1){if(W.flags|=2048,Ci(9,{destroy:void 0},ju.bind(null,W,te,q,U),null),Mt===null)throw Error(P(349));ie||(Qn&127)!==0||Pu(W,U,q)}return q}function Pu(L,U,q){L.flags|=16384,L={getSnapshot:U,value:q},U=ct.updateQueue,U===null?(U=ca(),ct.updateQueue=U,U.stores=[L]):(q=U.stores,q===null?U.stores=[L]:q.push(L))}function ju(L,U,q,W){U.value=q,U.getSnapshot=W,ku(U)&&Iu(L)}function Ou(L,U,q){return q(function(){ku(U)&&Iu(L)})}function ku(L){var U=L.getSnapshot;L=L.value;try{var q=U();return!pn(L,q)}catch{return!0}}function Iu(L){var U=zr(L,2);U!==null&&dn(U,L,2)}function el(L){var U=rn();if(typeof L=="function"){var q=L;if(L=q(),Xr){Zt(!0);try{q()}finally{Zt(!1)}}}return U.memoizedState=U.baseState=L,U.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:L},U}function Du(L,U,q,W){return L.baseState=q,Qo(L,Et,typeof W=="function"?W:Jn)}function Cp(L,U,q,W,te){if(pa(L))throw Error(P(485));if(L=U.action,L!==null){var ie={payload:te,action:L,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){ie.listeners.push(ue)}};ge.T!==null?q(!0):ie.isTransition=!1,W(ie),q=U.pending,q===null?(ie.next=U.pending=ie,Lu(U,ie)):(ie.next=q.next,U.pending=q.next=ie)}}function Lu(L,U){var q=U.action,W=U.payload,te=L.state;if(U.isTransition){var ie=ge.T,ue={};ge.T=ue;try{var xe=q(te,W),Re=ge.S;Re!==null&&Re(ue,xe),Bu(L,U,xe)}catch(De){tl(L,U,De)}finally{ie!==null&&ue.types!==null&&(ie.types=ue.types),ge.T=ie}}else try{ie=q(te,W),Bu(L,U,ie)}catch(De){tl(L,U,De)}}function Bu(L,U,q){q!==null&&typeof q=="object"&&typeof q.then=="function"?q.then(function(W){zu(L,U,W)},function(W){return tl(L,U,W)}):zu(L,U,q)}function zu(L,U,q){U.status="fulfilled",U.value=q,Hu(U),L.state=q,U=L.pending,U!==null&&(q=U.next,q===U?L.pending=null:(q=q.next,U.next=q,Lu(L,q)))}function tl(L,U,q){var W=L.pending;if(L.pending=null,W!==null){W=W.next;do U.status="rejected",U.reason=q,Hu(U),U=U.next;while(U!==W)}L.action=null}function Hu(L){L=L.listeners;for(var U=0;U<L.length;U++)(0,L[U])()}function Uu(L,U){return U}function Fu(L,U){if(yt){var q=Mt.formState;if(q!==null){e:{var W=ct;if(yt){if(Nt){t:{for(var te=Nt,ie=$n;te.nodeType!==8;){if(!ie){te=null;break t}if(te=Nn(te.nextSibling),te===null){te=null;break t}}ie=te.data,te=ie==="F!"||ie==="F"?te:null}if(te){Nt=Nn(te.nextSibling),W=te.data==="F!";break e}}pr(W)}W=!1}W&&(U=q[0])}}return q=rn(),q.memoizedState=q.baseState=U,W={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:U},q.queue=W,q=cf.bind(null,ct,W),W.dispatch=q,W=el(!1),ie=ol.bind(null,ct,!1,W.queue),W=rn(),te={state:U,dispatch:null,action:L,pending:null},W.queue=te,q=Cp.bind(null,ct,te,ie,q),te.dispatch=q,W.memoizedState=L,[U,q,!1]}function Gu(L){var U=Bt();return Vu(U,Et,L)}function Vu(L,U,q){if(U=Qo(L,U,Uu)[0],L=fa(Jn)[0],typeof U=="object"&&U!==null&&typeof U.then=="function")try{var W=ls(U)}catch(ue){throw ue===_i?ta:ue}else W=U;U=Bt();var te=U.queue,ie=te.dispatch;return q!==U.memoizedState&&(ct.flags|=2048,Ci(9,{destroy:void 0},Tp.bind(null,te,q),null)),[W,ie,L]}function Tp(L,U){L.action=U}function qu(L){var U=Bt(),q=Et;if(q!==null)return Vu(U,q,L);Bt(),U=U.memoizedState,q=Bt();var W=q.queue.dispatch;return q.memoizedState=L,[U,W,!1]}function Ci(L,U,q,W){return L={tag:L,create:q,deps:W,inst:U,next:null},U=ct.updateQueue,U===null&&(U=ca(),ct.updateQueue=U),q=U.lastEffect,q===null?U.lastEffect=L.next=L:(W=q.next,q.next=L,L.next=W,U.lastEffect=L),L}function Zu(){return Bt().memoizedState}function ha(L,U,q,W){var te=rn();ct.flags|=L,te.memoizedState=Ci(1|U,{destroy:void 0},q,W===void 0?null:W)}function da(L,U,q,W){var te=Bt();W=W===void 0?null:W;var ie=te.memoizedState.inst;Et!==null&&W!==null&&qo(W,Et.memoizedState.deps)?te.memoizedState=Ci(U,ie,q,W):(ct.flags|=L,te.memoizedState=Ci(1|U,ie,q,W))}function Yu(L,U){ha(8390656,8,L,U)}function nl(L,U){da(2048,8,L,U)}function Ap(L){ct.flags|=4;var U=ct.updateQueue;if(U===null)U=ca(),ct.updateQueue=U,U.events=[L];else{var q=U.events;q===null?U.events=[L]:q.push(L)}}function Xu(L){var U=Bt().memoizedState;return Ap({ref:U,nextImpl:L}),function(){if((vt&2)!==0)throw Error(P(440));return U.impl.apply(void 0,arguments)}}function Wu(L,U){return da(4,2,L,U)}function Ku(L,U){return da(4,4,L,U)}function Qu(L,U){if(typeof U=="function"){L=L();var q=U(L);return function(){typeof q=="function"?q():U(null)}}if(U!=null)return L=L(),U.current=L,function(){U.current=null}}function Ju(L,U,q){q=q!=null?q.concat([L]):null,da(4,4,Qu.bind(null,U,L),q)}function rl(){}function ef(L,U){var q=Bt();U=U===void 0?null:U;var W=q.memoizedState;return U!==null&&qo(U,W[1])?W[0]:(q.memoizedState=[L,U],L)}function tf(L,U){var q=Bt();U=U===void 0?null:U;var W=q.memoizedState;if(U!==null&&qo(U,W[1]))return W[0];if(W=L(),Xr){Zt(!0);try{L()}finally{Zt(!1)}}return q.memoizedState=[W,U],W}function il(L,U,q){return q===void 0||(Qn&1073741824)!==0&&(mt&261930)===0?L.memoizedState=U:(L.memoizedState=q,L=rh(),ct.lanes|=L,wr|=L,q)}function nf(L,U,q,W){return pn(q,U)?q:Si.current!==null?(L=il(L,q,W),pn(L,U)||(Ut=!0),L):(Qn&42)===0||(Qn&1073741824)!==0&&(mt&261930)===0?(Ut=!0,L.memoizedState=q):(L=rh(),ct.lanes|=L,wr|=L,U)}function rf(L,U,q,W,te){var ie=Se.p;Se.p=ie!==0&&8>ie?ie:8;var ue=ge.T,xe={};ge.T=xe,ol(L,!1,U,q);try{var Re=te(),De=ge.S;if(De!==null&&De(xe,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var Ve=Sp(Re,W);cs(L,U,Ve,_n(L))}else cs(L,U,W,_n(L))}catch(Xe){cs(L,U,{then:function(){},status:"rejected",reason:Xe},_n())}finally{Se.p=ie,ue!==null&&xe.types!==null&&(ue.types=xe.types),ge.T=ue}}function Rp(){}function sl(L,U,q,W){if(L.tag!==5)throw Error(P(476));var te=sf(L).queue;rf(L,te,U,Te,q===null?Rp:function(){return af(L),q(W)})}function sf(L){var U=L.memoizedState;if(U!==null)return U;U={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:Te},next:null};var q={};return U.next={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:q},next:null},L.memoizedState=U,L=L.alternate,L!==null&&(L.memoizedState=U),U}function af(L){var U=sf(L);U.next===null&&(U=L.alternate.memoizedState),cs(L,U.next.queue,{},_n())}function al(){return Qt(Ts)}function of(){return Bt().memoizedState}function lf(){return Bt().memoizedState}function $p(L){for(var U=L.return;U!==null;){switch(U.tag){case 24:case 3:var q=_n();L=yr(q);var W=xr(U,L,q);W!==null&&(dn(W,U,q),is(W,U,q)),U={cache:ko()},L.payload=U;return}U=U.return}}function Mp(L,U,q){var W=_n();q={lane:W,revertLane:0,gesture:null,action:q,hasEagerState:!1,eagerState:null,next:null},pa(L)?uf(U,q):(q=Eo(L,U,q,W),q!==null&&(dn(q,L,W),ff(q,U,W)))}function cf(L,U,q){var W=_n();cs(L,U,q,W)}function cs(L,U,q,W){var te={lane:W,revertLane:0,gesture:null,action:q,hasEagerState:!1,eagerState:null,next:null};if(pa(L))uf(U,te);else{var ie=L.alternate;if(L.lanes===0&&(ie===null||ie.lanes===0)&&(ie=U.lastRenderedReducer,ie!==null))try{var ue=U.lastRenderedState,xe=ie(ue,q);if(te.hasEagerState=!0,te.eagerState=xe,pn(xe,ue))return Ys(L,U,te,0),Mt===null&&Zs(),!1}catch{}if(q=Eo(L,U,te,W),q!==null)return dn(q,L,W),ff(q,U,W),!0}return!1}function ol(L,U,q,W){if(W={lane:2,revertLane:Bl(),gesture:null,action:W,hasEagerState:!1,eagerState:null,next:null},pa(L)){if(U)throw Error(P(479))}else U=Eo(L,q,W,2),U!==null&&dn(U,L,2)}function pa(L){var U=L.alternate;return L===ct||U!==null&&U===ct}function uf(L,U){wi=oa=!0;var q=L.pending;q===null?U.next=U:(U.next=q.next,q.next=U),L.pending=U}function ff(L,U,q){if((q&4194048)!==0){var W=U.lanes;W&=L.pendingLanes,q|=W,U.lanes=q,mc(L,q)}}var us={readContext:Qt,use:ua,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It};us.useEffectEvent=It;var hf={readContext:Qt,use:ua,useCallback:function(L,U){return rn().memoizedState=[L,U===void 0?null:U],L},useContext:Qt,useEffect:Yu,useImperativeHandle:function(L,U,q){q=q!=null?q.concat([L]):null,ha(4194308,4,Qu.bind(null,U,L),q)},useLayoutEffect:function(L,U){return ha(4194308,4,L,U)},useInsertionEffect:function(L,U){ha(4,2,L,U)},useMemo:function(L,U){var q=rn();U=U===void 0?null:U;var W=L();if(Xr){Zt(!0);try{L()}finally{Zt(!1)}}return q.memoizedState=[W,U],W},useReducer:function(L,U,q){var W=rn();if(q!==void 0){var te=q(U);if(Xr){Zt(!0);try{q(U)}finally{Zt(!1)}}}else te=U;return W.memoizedState=W.baseState=te,L={pending:null,lanes:0,dispatch:null,lastRenderedReducer:L,lastRenderedState:te},W.queue=L,L=L.dispatch=Mp.bind(null,ct,L),[W.memoizedState,L]},useRef:function(L){var U=rn();return L={current:L},U.memoizedState=L},useState:function(L){L=el(L);var U=L.queue,q=cf.bind(null,ct,U);return U.dispatch=q,[L.memoizedState,q]},useDebugValue:rl,useDeferredValue:function(L,U){var q=rn();return il(q,L,U)},useTransition:function(){var L=el(!1);return L=rf.bind(null,ct,L.queue,!0,!1),rn().memoizedState=L,[!1,L]},useSyncExternalStore:function(L,U,q){var W=ct,te=rn();if(yt){if(q===void 0)throw Error(P(407));q=q()}else{if(q=U(),Mt===null)throw Error(P(349));(mt&127)!==0||Pu(W,U,q)}te.memoizedState=q;var ie={value:q,getSnapshot:U};return te.queue=ie,Yu(Ou.bind(null,W,ie,L),[L]),W.flags|=2048,Ci(9,{destroy:void 0},ju.bind(null,W,ie,q,U),null),q},useId:function(){var L=rn(),U=Mt.identifierPrefix;if(yt){var q=Ln,W=Dn;q=(W&~(1<<32-nn(W)-1)).toString(32)+q,U="_"+U+"R_"+q,q=la++,0<q&&(U+="H"+q.toString(32)),U+="_"}else q=wp++,U="_"+U+"r_"+q.toString(32)+"_";return L.memoizedState=U},useHostTransitionStatus:al,useFormState:Fu,useActionState:Fu,useOptimistic:function(L){var U=rn();U.memoizedState=U.baseState=L;var q={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return U.queue=q,U=ol.bind(null,ct,!0,q),q.dispatch=U,[L,U]},useMemoCache:Ko,useCacheRefresh:function(){return rn().memoizedState=$p.bind(null,ct)},useEffectEvent:function(L){var U=rn(),q={impl:L};return U.memoizedState=q,function(){if((vt&2)!==0)throw Error(P(440));return q.impl.apply(void 0,arguments)}}},ll={readContext:Qt,use:ua,useCallback:ef,useContext:Qt,useEffect:nl,useImperativeHandle:Ju,useInsertionEffect:Wu,useLayoutEffect:Ku,useMemo:tf,useReducer:fa,useRef:Zu,useState:function(){return fa(Jn)},useDebugValue:rl,useDeferredValue:function(L,U){var q=Bt();return nf(q,Et.memoizedState,L,U)},useTransition:function(){var L=fa(Jn)[0],U=Bt().memoizedState;return[typeof L=="boolean"?L:ls(L),U]},useSyncExternalStore:Nu,useId:of,useHostTransitionStatus:al,useFormState:Gu,useActionState:Gu,useOptimistic:function(L,U){var q=Bt();return Du(q,Et,L,U)},useMemoCache:Ko,useCacheRefresh:lf};ll.useEffectEvent=Xu;var df={readContext:Qt,use:ua,useCallback:ef,useContext:Qt,useEffect:nl,useImperativeHandle:Ju,useInsertionEffect:Wu,useLayoutEffect:Ku,useMemo:tf,useReducer:Jo,useRef:Zu,useState:function(){return Jo(Jn)},useDebugValue:rl,useDeferredValue:function(L,U){var q=Bt();return Et===null?il(q,L,U):nf(q,Et.memoizedState,L,U)},useTransition:function(){var L=Jo(Jn)[0],U=Bt().memoizedState;return[typeof L=="boolean"?L:ls(L),U]},useSyncExternalStore:Nu,useId:of,useHostTransitionStatus:al,useFormState:qu,useActionState:qu,useOptimistic:function(L,U){var q=Bt();return Et!==null?Du(q,Et,L,U):(q.baseState=L,[L,q.queue.dispatch])},useMemoCache:Ko,useCacheRefresh:lf};df.useEffectEvent=Xu;function cl(L,U,q,W){U=L.memoizedState,q=q(W,U),q=q==null?U:Y({},U,q),L.memoizedState=q,L.lanes===0&&(L.updateQueue.baseState=q)}var ul={enqueueSetState:function(L,U,q){L=L._reactInternals;var W=_n(),te=yr(W);te.payload=U,q!=null&&(te.callback=q),U=xr(L,te,W),U!==null&&(dn(U,L,W),is(U,L,W))},enqueueReplaceState:function(L,U,q){L=L._reactInternals;var W=_n(),te=yr(W);te.tag=1,te.payload=U,q!=null&&(te.callback=q),U=xr(L,te,W),U!==null&&(dn(U,L,W),is(U,L,W))},enqueueForceUpdate:function(L,U){L=L._reactInternals;var q=_n(),W=yr(q);W.tag=2,U!=null&&(W.callback=U),U=xr(L,W,q),U!==null&&(dn(U,L,q),is(U,L,q))}};function pf(L,U,q,W,te,ie,ue){return L=L.stateNode,typeof L.shouldComponentUpdate=="function"?L.shouldComponentUpdate(W,ie,ue):U.prototype&&U.prototype.isPureReactComponent?!Wi(q,W)||!Wi(te,ie):!0}function mf(L,U,q,W){L=U.state,typeof U.componentWillReceiveProps=="function"&&U.componentWillReceiveProps(q,W),typeof U.UNSAFE_componentWillReceiveProps=="function"&&U.UNSAFE_componentWillReceiveProps(q,W),U.state!==L&&ul.enqueueReplaceState(U,U.state,null)}function Wr(L,U){var q=U;if("ref"in U){q={};for(var W in U)W!=="ref"&&(q[W]=U[W])}if(L=L.defaultProps){q===U&&(q=Y({},q));for(var te in L)q[te]===void 0&&(q[te]=L[te])}return q}function gf(L){qs(L)}function yf(L){console.error(L)}function xf(L){qs(L)}function ma(L,U){try{var q=L.onUncaughtError;q(U.value,{componentStack:U.stack})}catch(W){setTimeout(function(){throw W})}}function bf(L,U,q){try{var W=L.onCaughtError;W(q.value,{componentStack:q.stack,errorBoundary:U.tag===1?U.stateNode:null})}catch(te){setTimeout(function(){throw te})}}function fl(L,U,q){return q=yr(q),q.tag=3,q.payload={element:null},q.callback=function(){ma(L,U)},q}function _f(L){return L=yr(L),L.tag=3,L}function vf(L,U,q,W){var te=q.type.getDerivedStateFromError;if(typeof te=="function"){var ie=W.value;L.payload=function(){return te(ie)},L.callback=function(){bf(U,q,W)}}var ue=q.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(L.callback=function(){bf(U,q,W),typeof te!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var xe=W.stack;this.componentDidCatch(W.value,{componentStack:xe!==null?xe:""})})}function Np(L,U,q,W,te){if(q.flags|=32768,W!==null&&typeof W=="object"&&typeof W.then=="function"){if(U=q.alternate,U!==null&&yi(U,q,te,!0),q=gn.current,q!==null){switch(q.tag){case 31:case 13:return Mn===null?Ra():q.alternate===null&&Dt===0&&(Dt=3),q.flags&=-257,q.flags|=65536,q.lanes=te,W===na?q.flags|=16384:(U=q.updateQueue,U===null?q.updateQueue=new Set([W]):U.add(W),Il(L,W,te)),!1;case 22:return q.flags|=65536,W===na?q.flags|=16384:(U=q.updateQueue,U===null?(U={transitions:null,markerInstances:null,retryQueue:new Set([W])},q.updateQueue=U):(q=U.retryQueue,q===null?U.retryQueue=new Set([W]):q.add(W)),Il(L,W,te)),!1}throw Error(P(435,q.tag))}return Il(L,W,te),Ra(),!1}if(yt)return U=gn.current,U!==null?((U.flags&65536)===0&&(U.flags|=256),U.flags|=65536,U.lanes=te,W!==Mo&&(L=Error(P(422),{cause:W}),Ji(Tn(L,q)))):(W!==Mo&&(U=Error(P(423),{cause:W}),Ji(Tn(U,q))),L=L.current.alternate,L.flags|=65536,te&=-te,L.lanes|=te,W=Tn(W,q),te=fl(L.stateNode,W,te),Ho(L,te),Dt!==4&&(Dt=2)),!1;var ie=Error(P(520),{cause:W});if(ie=Tn(ie,q),xs===null?xs=[ie]:xs.push(ie),Dt!==4&&(Dt=2),U===null)return!0;W=Tn(W,q),q=U;do{switch(q.tag){case 3:return q.flags|=65536,L=te&-te,q.lanes|=L,L=fl(q.stateNode,W,L),Ho(q,L),!1;case 1:if(U=q.type,ie=q.stateNode,(q.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(Er===null||!Er.has(ie))))return q.flags|=65536,te&=-te,q.lanes|=te,te=_f(te),vf(te,L,q,W),Ho(q,te),!1}q=q.return}while(q!==null);return!1}var hl=Error(P(461)),Ut=!1;function Jt(L,U,q,W){U.child=L===null?Eu(U,null,q,W):Yr(U,L.child,q,W)}function Sf(L,U,q,W,te){q=q.render;var ie=U.ref;if("ref"in W){var ue={};for(var xe in W)xe!=="ref"&&(ue[xe]=W[xe])}else ue=W;return Gr(U),W=Zo(L,U,q,ue,ie,te),xe=Yo(),L!==null&&!Ut?(Xo(L,U,te),er(L,U,te)):(yt&&xe&&Ro(U),U.flags|=1,Jt(L,U,W,te),U.child)}function wf(L,U,q,W,te){if(L===null){var ie=q.type;return typeof ie=="function"&&!Co(ie)&&ie.defaultProps===void 0&&q.compare===null?(U.tag=15,U.type=ie,Ef(L,U,ie,W,te)):(L=Ws(q.type,null,W,U,U.mode,te),L.ref=U.ref,L.return=U,U.child=L)}if(ie=L.child,!_l(L,te)){var ue=ie.memoizedProps;if(q=q.compare,q=q!==null?q:Wi,q(ue,W)&&L.ref===U.ref)return er(L,U,te)}return U.flags|=1,L=Vn(ie,W),L.ref=U.ref,L.return=U,U.child=L}function Ef(L,U,q,W,te){if(L!==null){var ie=L.memoizedProps;if(Wi(ie,W)&&L.ref===U.ref)if(Ut=!1,U.pendingProps=W=ie,_l(L,te))(L.flags&131072)!==0&&(Ut=!0);else return U.lanes=L.lanes,er(L,U,te)}return dl(L,U,q,W,te)}function Cf(L,U,q,W){var te=W.children,ie=L!==null?L.memoizedState:null;if(L===null&&U.stateNode===null&&(U.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),W.mode==="hidden"){if((U.flags&128)!==0){if(ie=ie!==null?ie.baseLanes|q:q,L!==null){for(W=U.child=L.child,te=0;W!==null;)te=te|W.lanes|W.childLanes,W=W.sibling;W=te&~ie}else W=0,U.child=null;return Tf(L,U,ie,q,W)}if((q&536870912)!==0)U.memoizedState={baseLanes:0,cachePool:null},L!==null&&ea(U,ie!==null?ie.cachePool:null),ie!==null?Au(U,ie):Fo(),Ru(U);else return W=U.lanes=536870912,Tf(L,U,ie!==null?ie.baseLanes|q:q,q,W)}else ie!==null?(ea(U,ie.cachePool),Au(U,ie),_r(),U.memoizedState=null):(L!==null&&ea(U,null),Fo(),_r());return Jt(L,U,te,q),U.child}function fs(L,U){return L!==null&&L.tag===22||U.stateNode!==null||(U.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),U.sibling}function Tf(L,U,q,W,te){var ie=Do();return ie=ie===null?null:{parent:zt._currentValue,pool:ie},U.memoizedState={baseLanes:q,cachePool:ie},L!==null&&ea(U,null),Fo(),Ru(U),L!==null&&yi(L,U,W,!0),U.childLanes=te,null}function ga(L,U){return U=xa({mode:U.mode,children:U.children},L.mode),U.ref=L.ref,L.child=U,U.return=L,U}function Af(L,U,q){return Yr(U,L.child,null,q),L=ga(U,U.pendingProps),L.flags|=2,yn(U),U.memoizedState=null,L}function Pp(L,U,q){var W=U.pendingProps,te=(U.flags&128)!==0;if(U.flags&=-129,L===null){if(yt){if(W.mode==="hidden")return L=ga(U,W),U.lanes=536870912,fs(null,L);if(Vo(U),(L=Nt)?(L=Bh(L,$n),L=L!==null&&L.data==="&"?L:null,L!==null&&(U.memoizedState={dehydrated:L,treeContext:hr!==null?{id:Dn,overflow:Ln}:null,retryLane:536870912,hydrationErrors:null},q=cu(L),q.return=U,U.child=q,Kt=U,Nt=null)):L=null,L===null)throw pr(U);return U.lanes=536870912,null}return ga(U,W)}var ie=L.memoizedState;if(ie!==null){var ue=ie.dehydrated;if(Vo(U),te)if(U.flags&256)U.flags&=-257,U=Af(L,U,q);else if(U.memoizedState!==null)U.child=L.child,U.flags|=128,U=null;else throw Error(P(558));else if(Ut||yi(L,U,q,!1),te=(q&L.childLanes)!==0,Ut||te){if(W=Mt,W!==null&&(ue=gc(W,q),ue!==0&&ue!==ie.retryLane))throw ie.retryLane=ue,zr(L,ue),dn(W,L,ue),hl;Ra(),U=Af(L,U,q)}else L=ie.treeContext,Nt=Nn(ue.nextSibling),Kt=U,yt=!0,dr=null,$n=!1,L!==null&&hu(U,L),U=ga(U,W),U.flags|=4096;return U}return L=Vn(L.child,{mode:W.mode,children:W.children}),L.ref=U.ref,U.child=L,L.return=U,L}function ya(L,U){var q=U.ref;if(q===null)L!==null&&L.ref!==null&&(U.flags|=4194816);else{if(typeof q!="function"&&typeof q!="object")throw Error(P(284));(L===null||L.ref!==q)&&(U.flags|=4194816)}}function dl(L,U,q,W,te){return Gr(U),q=Zo(L,U,q,W,void 0,te),W=Yo(),L!==null&&!Ut?(Xo(L,U,te),er(L,U,te)):(yt&&W&&Ro(U),U.flags|=1,Jt(L,U,q,te),U.child)}function Rf(L,U,q,W,te,ie){return Gr(U),U.updateQueue=null,q=Mu(U,W,q,te),$u(L),W=Yo(),L!==null&&!Ut?(Xo(L,U,ie),er(L,U,ie)):(yt&&W&&Ro(U),U.flags|=1,Jt(L,U,q,ie),U.child)}function $f(L,U,q,W,te){if(Gr(U),U.stateNode===null){var ie=hi,ue=q.contextType;typeof ue=="object"&&ue!==null&&(ie=Qt(ue)),ie=new q(W,ie),U.memoizedState=ie.state!==null&&ie.state!==void 0?ie.state:null,ie.updater=ul,U.stateNode=ie,ie._reactInternals=U,ie=U.stateNode,ie.props=W,ie.state=U.memoizedState,ie.refs={},Bo(U),ue=q.contextType,ie.context=typeof ue=="object"&&ue!==null?Qt(ue):hi,ie.state=U.memoizedState,ue=q.getDerivedStateFromProps,typeof ue=="function"&&(cl(U,q,ue,W),ie.state=U.memoizedState),typeof q.getDerivedStateFromProps=="function"||typeof ie.getSnapshotBeforeUpdate=="function"||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(ue=ie.state,typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount(),ue!==ie.state&&ul.enqueueReplaceState(ie,ie.state,null),as(U,W,ie,te),ss(),ie.state=U.memoizedState),typeof ie.componentDidMount=="function"&&(U.flags|=4194308),W=!0}else if(L===null){ie=U.stateNode;var xe=U.memoizedProps,Re=Wr(q,xe);ie.props=Re;var De=ie.context,Ve=q.contextType;ue=hi,typeof Ve=="object"&&Ve!==null&&(ue=Qt(Ve));var Xe=q.getDerivedStateFromProps;Ve=typeof Xe=="function"||typeof ie.getSnapshotBeforeUpdate=="function",xe=U.pendingProps!==xe,Ve||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(xe||De!==ue)&&mf(U,ie,W,ue),gr=!1;var Le=U.memoizedState;ie.state=Le,as(U,W,ie,te),ss(),De=U.memoizedState,xe||Le!==De||gr?(typeof Xe=="function"&&(cl(U,q,Xe,W),De=U.memoizedState),(Re=gr||pf(U,q,Re,W,Le,De,ue))?(Ve||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(U.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(U.flags|=4194308),U.memoizedProps=W,U.memoizedState=De),ie.props=W,ie.state=De,ie.context=ue,W=Re):(typeof ie.componentDidMount=="function"&&(U.flags|=4194308),W=!1)}else{ie=U.stateNode,zo(L,U),ue=U.memoizedProps,Ve=Wr(q,ue),ie.props=Ve,Xe=U.pendingProps,Le=ie.context,De=q.contextType,Re=hi,typeof De=="object"&&De!==null&&(Re=Qt(De)),xe=q.getDerivedStateFromProps,(De=typeof xe=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(ue!==Xe||Le!==Re)&&mf(U,ie,W,Re),gr=!1,Le=U.memoizedState,ie.state=Le,as(U,W,ie,te),ss();var He=U.memoizedState;ue!==Xe||Le!==He||gr||L!==null&&L.dependencies!==null&&Qs(L.dependencies)?(typeof xe=="function"&&(cl(U,q,xe,W),He=U.memoizedState),(Ve=gr||pf(U,q,Ve,W,Le,He,Re)||L!==null&&L.dependencies!==null&&Qs(L.dependencies))?(De||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(W,He,Re),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(W,He,Re)),typeof ie.componentDidUpdate=="function"&&(U.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(U.flags|=1024)):(typeof ie.componentDidUpdate!="function"||ue===L.memoizedProps&&Le===L.memoizedState||(U.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||ue===L.memoizedProps&&Le===L.memoizedState||(U.flags|=1024),U.memoizedProps=W,U.memoizedState=He),ie.props=W,ie.state=He,ie.context=Re,W=Ve):(typeof ie.componentDidUpdate!="function"||ue===L.memoizedProps&&Le===L.memoizedState||(U.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||ue===L.memoizedProps&&Le===L.memoizedState||(U.flags|=1024),W=!1)}return ie=W,ya(L,U),W=(U.flags&128)!==0,ie||W?(ie=U.stateNode,q=W&&typeof q.getDerivedStateFromError!="function"?null:ie.render(),U.flags|=1,L!==null&&W?(U.child=Yr(U,L.child,null,te),U.child=Yr(U,null,q,te)):Jt(L,U,q,te),U.memoizedState=ie.state,L=U.child):L=er(L,U,te),L}function Mf(L,U,q,W){return Ur(),U.flags|=256,Jt(L,U,q,W),U.child}var pl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ml(L){return{baseLanes:L,cachePool:xu()}}function gl(L,U,q){return L=L!==null?L.childLanes&~q:0,U&&(L|=bn),L}function Nf(L,U,q){var W=U.pendingProps,te=!1,ie=(U.flags&128)!==0,ue;if((ue=ie)||(ue=L!==null&&L.memoizedState===null?!1:(Lt.current&2)!==0),ue&&(te=!0,U.flags&=-129),ue=(U.flags&32)!==0,U.flags&=-33,L===null){if(yt){if(te?br(U):_r(),(L=Nt)?(L=Bh(L,$n),L=L!==null&&L.data!=="&"?L:null,L!==null&&(U.memoizedState={dehydrated:L,treeContext:hr!==null?{id:Dn,overflow:Ln}:null,retryLane:536870912,hydrationErrors:null},q=cu(L),q.return=U,U.child=q,Kt=U,Nt=null)):L=null,L===null)throw pr(U);return Ql(L)?U.lanes=32:U.lanes=536870912,null}var xe=W.children;return W=W.fallback,te?(_r(),te=U.mode,xe=xa({mode:"hidden",children:xe},te),W=Hr(W,te,q,null),xe.return=U,W.return=U,xe.sibling=W,U.child=xe,W=U.child,W.memoizedState=ml(q),W.childLanes=gl(L,ue,q),U.memoizedState=pl,fs(null,W)):(br(U),yl(U,xe))}var Re=L.memoizedState;if(Re!==null&&(xe=Re.dehydrated,xe!==null)){if(ie)U.flags&256?(br(U),U.flags&=-257,U=xl(L,U,q)):U.memoizedState!==null?(_r(),U.child=L.child,U.flags|=128,U=null):(_r(),xe=W.fallback,te=U.mode,W=xa({mode:"visible",children:W.children},te),xe=Hr(xe,te,q,null),xe.flags|=2,W.return=U,xe.return=U,W.sibling=xe,U.child=W,Yr(U,L.child,null,q),W=U.child,W.memoizedState=ml(q),W.childLanes=gl(L,ue,q),U.memoizedState=pl,U=fs(null,W));else if(br(U),Ql(xe)){if(ue=xe.nextSibling&&xe.nextSibling.dataset,ue)var De=ue.dgst;ue=De,W=Error(P(419)),W.stack="",W.digest=ue,Ji({value:W,source:null,stack:null}),U=xl(L,U,q)}else if(Ut||yi(L,U,q,!1),ue=(q&L.childLanes)!==0,Ut||ue){if(ue=Mt,ue!==null&&(W=gc(ue,q),W!==0&&W!==Re.retryLane))throw Re.retryLane=W,zr(L,W),dn(ue,L,W),hl;Kl(xe)||Ra(),U=xl(L,U,q)}else Kl(xe)?(U.flags|=192,U.child=L.child,U=null):(L=Re.treeContext,Nt=Nn(xe.nextSibling),Kt=U,yt=!0,dr=null,$n=!1,L!==null&&hu(U,L),U=yl(U,W.children),U.flags|=4096);return U}return te?(_r(),xe=W.fallback,te=U.mode,Re=L.child,De=Re.sibling,W=Vn(Re,{mode:"hidden",children:W.children}),W.subtreeFlags=Re.subtreeFlags&65011712,De!==null?xe=Vn(De,xe):(xe=Hr(xe,te,q,null),xe.flags|=2),xe.return=U,W.return=U,W.sibling=xe,U.child=W,fs(null,W),W=U.child,xe=L.child.memoizedState,xe===null?xe=ml(q):(te=xe.cachePool,te!==null?(Re=zt._currentValue,te=te.parent!==Re?{parent:Re,pool:Re}:te):te=xu(),xe={baseLanes:xe.baseLanes|q,cachePool:te}),W.memoizedState=xe,W.childLanes=gl(L,ue,q),U.memoizedState=pl,fs(L.child,W)):(br(U),q=L.child,L=q.sibling,q=Vn(q,{mode:"visible",children:W.children}),q.return=U,q.sibling=null,L!==null&&(ue=U.deletions,ue===null?(U.deletions=[L],U.flags|=16):ue.push(L)),U.child=q,U.memoizedState=null,q)}function yl(L,U){return U=xa({mode:"visible",children:U},L.mode),U.return=L,L.child=U}function xa(L,U){return L=mn(22,L,null,U),L.lanes=0,L}function xl(L,U,q){return Yr(U,L.child,null,q),L=yl(U,U.pendingProps.children),L.flags|=2,U.memoizedState=null,L}function Pf(L,U,q){L.lanes|=U;var W=L.alternate;W!==null&&(W.lanes|=U),jo(L.return,U,q)}function bl(L,U,q,W,te,ie){var ue=L.memoizedState;ue===null?L.memoizedState={isBackwards:U,rendering:null,renderingStartTime:0,last:W,tail:q,tailMode:te,treeForkCount:ie}:(ue.isBackwards=U,ue.rendering=null,ue.renderingStartTime=0,ue.last=W,ue.tail=q,ue.tailMode=te,ue.treeForkCount=ie)}function jf(L,U,q){var W=U.pendingProps,te=W.revealOrder,ie=W.tail;W=W.children;var ue=Lt.current,xe=(ue&2)!==0;if(xe?(ue=ue&1|2,U.flags|=128):ue&=1,Ne(Lt,ue),Jt(L,U,W,q),W=yt?Qi:0,!xe&&L!==null&&(L.flags&128)!==0)e:for(L=U.child;L!==null;){if(L.tag===13)L.memoizedState!==null&&Pf(L,q,U);else if(L.tag===19)Pf(L,q,U);else if(L.child!==null){L.child.return=L,L=L.child;continue}if(L===U)break e;for(;L.sibling===null;){if(L.return===null||L.return===U)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}switch(te){case"forwards":for(q=U.child,te=null;q!==null;)L=q.alternate,L!==null&&aa(L)===null&&(te=q),q=q.sibling;q=te,q===null?(te=U.child,U.child=null):(te=q.sibling,q.sibling=null),bl(U,!1,te,q,ie,W);break;case"backwards":case"unstable_legacy-backwards":for(q=null,te=U.child,U.child=null;te!==null;){if(L=te.alternate,L!==null&&aa(L)===null){U.child=te;break}L=te.sibling,te.sibling=q,q=te,te=L}bl(U,!0,q,null,ie,W);break;case"together":bl(U,!1,null,null,void 0,W);break;default:U.memoizedState=null}return U.child}function er(L,U,q){if(L!==null&&(U.dependencies=L.dependencies),wr|=U.lanes,(q&U.childLanes)===0)if(L!==null){if(yi(L,U,q,!1),(q&U.childLanes)===0)return null}else return null;if(L!==null&&U.child!==L.child)throw Error(P(153));if(U.child!==null){for(L=U.child,q=Vn(L,L.pendingProps),U.child=q,q.return=U;L.sibling!==null;)L=L.sibling,q=q.sibling=Vn(L,L.pendingProps),q.return=U;q.sibling=null}return U.child}function _l(L,U){return(L.lanes&U)!==0?!0:(L=L.dependencies,!!(L!==null&&Qs(L)))}function jp(L,U,q){switch(U.tag){case 3:Ge(U,U.stateNode.containerInfo),mr(U,zt,L.memoizedState.cache),Ur();break;case 27:case 5:Fe(U);break;case 4:Ge(U,U.stateNode.containerInfo);break;case 10:mr(U,U.type,U.memoizedProps.value);break;case 31:if(U.memoizedState!==null)return U.flags|=128,Vo(U),null;break;case 13:var W=U.memoizedState;if(W!==null)return W.dehydrated!==null?(br(U),U.flags|=128,null):(q&U.child.childLanes)!==0?Nf(L,U,q):(br(U),L=er(L,U,q),L!==null?L.sibling:null);br(U);break;case 19:var te=(L.flags&128)!==0;if(W=(q&U.childLanes)!==0,W||(yi(L,U,q,!1),W=(q&U.childLanes)!==0),te){if(W)return jf(L,U,q);U.flags|=128}if(te=U.memoizedState,te!==null&&(te.rendering=null,te.tail=null,te.lastEffect=null),Ne(Lt,Lt.current),W)break;return null;case 22:return U.lanes=0,Cf(L,U,q,U.pendingProps);case 24:mr(U,zt,L.memoizedState.cache)}return er(L,U,q)}function Of(L,U,q){if(L!==null)if(L.memoizedProps!==U.pendingProps)Ut=!0;else{if(!_l(L,q)&&(U.flags&128)===0)return Ut=!1,jp(L,U,q);Ut=(L.flags&131072)!==0}else Ut=!1,yt&&(U.flags&1048576)!==0&&fu(U,Qi,U.index);switch(U.lanes=0,U.tag){case 16:e:{var W=U.pendingProps;if(L=qr(U.elementType),U.type=L,typeof L=="function")Co(L)?(W=Wr(L,W),U.tag=1,U=$f(null,U,L,W,q)):(U.tag=0,U=dl(null,U,L,W,q));else{if(L!=null){var te=L.$$typeof;if(te===le){U.tag=11,U=Sf(null,U,L,W,q);break e}else if(te===he){U.tag=14,U=wf(null,U,L,W,q);break e}}throw U=Ee(L)||L,Error(P(306,U,""))}}return U;case 0:return dl(L,U,U.type,U.pendingProps,q);case 1:return W=U.type,te=Wr(W,U.pendingProps),$f(L,U,W,te,q);case 3:e:{if(Ge(U,U.stateNode.containerInfo),L===null)throw Error(P(387));W=U.pendingProps;var ie=U.memoizedState;te=ie.element,zo(L,U),as(U,W,null,q);var ue=U.memoizedState;if(W=ue.cache,mr(U,zt,W),W!==ie.cache&&Oo(U,[zt],q,!0),ss(),W=ue.element,ie.isDehydrated)if(ie={element:W,isDehydrated:!1,cache:ue.cache},U.updateQueue.baseState=ie,U.memoizedState=ie,U.flags&256){U=Mf(L,U,W,q);break e}else if(W!==te){te=Tn(Error(P(424)),U),Ji(te),U=Mf(L,U,W,q);break e}else for(L=U.stateNode.containerInfo,L.nodeType===9?L=L.body:L=L.nodeName==="HTML"?L.ownerDocument.body:L,Nt=Nn(L.firstChild),Kt=U,yt=!0,dr=null,$n=!0,q=Eu(U,null,W,q),U.child=q;q;)q.flags=q.flags&-3|4096,q=q.sibling;else{if(Ur(),W===te){U=er(L,U,q);break e}Jt(L,U,W,q)}U=U.child}return U;case 26:return ya(L,U),L===null?(q=Vh(U.type,null,U.pendingProps,null))?U.memoizedState=q:yt||(q=U.type,L=U.pendingProps,W=Ia(We.current).createElement(q),W[Wt]=U,W[an]=L,en(W,q,L),Yt(W),U.stateNode=W):U.memoizedState=Vh(U.type,L.memoizedProps,U.pendingProps,L.memoizedState),null;case 27:return Fe(U),L===null&&yt&&(W=U.stateNode=Uh(U.type,U.pendingProps,We.current),Kt=U,$n=!0,te=Nt,Rr(U.type)?(Jl=te,Nt=Nn(W.firstChild)):Nt=te),Jt(L,U,U.pendingProps.children,q),ya(L,U),L===null&&(U.flags|=4194304),U.child;case 5:return L===null&&yt&&((te=W=Nt)&&(W=cm(W,U.type,U.pendingProps,$n),W!==null?(U.stateNode=W,Kt=U,Nt=Nn(W.firstChild),$n=!1,te=!0):te=!1),te||pr(U)),Fe(U),te=U.type,ie=U.pendingProps,ue=L!==null?L.memoizedProps:null,W=ie.children,Yl(te,ie)?W=null:ue!==null&&Yl(te,ue)&&(U.flags|=32),U.memoizedState!==null&&(te=Zo(L,U,Ep,null,null,q),Ts._currentValue=te),ya(L,U),Jt(L,U,W,q),U.child;case 6:return L===null&&yt&&((L=q=Nt)&&(q=um(q,U.pendingProps,$n),q!==null?(U.stateNode=q,Kt=U,Nt=null,L=!0):L=!1),L||pr(U)),null;case 13:return Nf(L,U,q);case 4:return Ge(U,U.stateNode.containerInfo),W=U.pendingProps,L===null?U.child=Yr(U,null,W,q):Jt(L,U,W,q),U.child;case 11:return Sf(L,U,U.type,U.pendingProps,q);case 7:return Jt(L,U,U.pendingProps,q),U.child;case 8:return Jt(L,U,U.pendingProps.children,q),U.child;case 12:return Jt(L,U,U.pendingProps.children,q),U.child;case 10:return W=U.pendingProps,mr(U,U.type,W.value),Jt(L,U,W.children,q),U.child;case 9:return te=U.type._context,W=U.pendingProps.children,Gr(U),te=Qt(te),W=W(te),U.flags|=1,Jt(L,U,W,q),U.child;case 14:return wf(L,U,U.type,U.pendingProps,q);case 15:return Ef(L,U,U.type,U.pendingProps,q);case 19:return jf(L,U,q);case 31:return Pp(L,U,q);case 22:return Cf(L,U,q,U.pendingProps);case 24:return Gr(U),W=Qt(zt),L===null?(te=Do(),te===null&&(te=Mt,ie=ko(),te.pooledCache=ie,ie.refCount++,ie!==null&&(te.pooledCacheLanes|=q),te=ie),U.memoizedState={parent:W,cache:te},Bo(U),mr(U,zt,te)):((L.lanes&q)!==0&&(zo(L,U),as(U,null,null,q),ss()),te=L.memoizedState,ie=U.memoizedState,te.parent!==W?(te={parent:W,cache:W},U.memoizedState=te,U.lanes===0&&(U.memoizedState=U.updateQueue.baseState=te),mr(U,zt,W)):(W=ie.cache,mr(U,zt,W),W!==te.cache&&Oo(U,[zt],q,!0))),Jt(L,U,U.pendingProps.children,q),U.child;case 29:throw U.pendingProps}throw Error(P(156,U.tag))}function tr(L){L.flags|=4}function vl(L,U,q,W,te){if((U=(L.mode&32)!==0)&&(U=!1),U){if(L.flags|=16777216,(te&335544128)===te)if(L.stateNode.complete)L.flags|=8192;else if(oh())L.flags|=8192;else throw Zr=na,Lo}else L.flags&=-16777217}function kf(L,U){if(U.type!=="stylesheet"||(U.state.loading&4)!==0)L.flags&=-16777217;else if(L.flags|=16777216,!Wh(U))if(oh())L.flags|=8192;else throw Zr=na,Lo}function ba(L,U){U!==null&&(L.flags|=4),L.flags&16384&&(U=L.tag!==22?dc():536870912,L.lanes|=U,$i|=U)}function hs(L,U){if(!yt)switch(L.tailMode){case"hidden":U=L.tail;for(var q=null;U!==null;)U.alternate!==null&&(q=U),U=U.sibling;q===null?L.tail=null:q.sibling=null;break;case"collapsed":q=L.tail;for(var W=null;q!==null;)q.alternate!==null&&(W=q),q=q.sibling;W===null?U||L.tail===null?L.tail=null:L.tail.sibling=null:W.sibling=null}}function Pt(L){var U=L.alternate!==null&&L.alternate.child===L.child,q=0,W=0;if(U)for(var te=L.child;te!==null;)q|=te.lanes|te.childLanes,W|=te.subtreeFlags&65011712,W|=te.flags&65011712,te.return=L,te=te.sibling;else for(te=L.child;te!==null;)q|=te.lanes|te.childLanes,W|=te.subtreeFlags,W|=te.flags,te.return=L,te=te.sibling;return L.subtreeFlags|=W,L.childLanes=q,U}function Op(L,U,q){var W=U.pendingProps;switch($o(U),U.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(U),null;case 1:return Pt(U),null;case 3:return q=U.stateNode,W=null,L!==null&&(W=L.memoizedState.cache),U.memoizedState.cache!==W&&(U.flags|=2048),Kn(zt),je(),q.pendingContext&&(q.context=q.pendingContext,q.pendingContext=null),(L===null||L.child===null)&&(gi(U)?tr(U):L===null||L.memoizedState.isDehydrated&&(U.flags&256)===0||(U.flags|=1024,No())),Pt(U),null;case 26:var te=U.type,ie=U.memoizedState;return L===null?(tr(U),ie!==null?(Pt(U),kf(U,ie)):(Pt(U),vl(U,te,null,W,q))):ie?ie!==L.memoizedState?(tr(U),Pt(U),kf(U,ie)):(Pt(U),U.flags&=-16777217):(L=L.memoizedProps,L!==W&&tr(U),Pt(U),vl(U,te,L,W,q)),null;case 27:if(ze(U),q=We.current,te=U.type,L!==null&&U.stateNode!=null)L.memoizedProps!==W&&tr(U);else{if(!W){if(U.stateNode===null)throw Error(P(166));return Pt(U),null}L=Be.current,gi(U)?du(U):(L=Uh(te,W,q),U.stateNode=L,tr(U))}return Pt(U),null;case 5:if(ze(U),te=U.type,L!==null&&U.stateNode!=null)L.memoizedProps!==W&&tr(U);else{if(!W){if(U.stateNode===null)throw Error(P(166));return Pt(U),null}if(ie=Be.current,gi(U))du(U);else{var ue=Ia(We.current);switch(ie){case 1:ie=ue.createElementNS("http://www.w3.org/2000/svg",te);break;case 2:ie=ue.createElementNS("http://www.w3.org/1998/Math/MathML",te);break;default:switch(te){case"svg":ie=ue.createElementNS("http://www.w3.org/2000/svg",te);break;case"math":ie=ue.createElementNS("http://www.w3.org/1998/Math/MathML",te);break;case"script":ie=ue.createElement("div"),ie.innerHTML="<script><\/script>",ie=ie.removeChild(ie.firstChild);break;case"select":ie=typeof W.is=="string"?ue.createElement("select",{is:W.is}):ue.createElement("select"),W.multiple?ie.multiple=!0:W.size&&(ie.size=W.size);break;default:ie=typeof W.is=="string"?ue.createElement(te,{is:W.is}):ue.createElement(te)}}ie[Wt]=U,ie[an]=W;e:for(ue=U.child;ue!==null;){if(ue.tag===5||ue.tag===6)ie.appendChild(ue.stateNode);else if(ue.tag!==4&&ue.tag!==27&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===U)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===U)break e;ue=ue.return}ue.sibling.return=ue.return,ue=ue.sibling}U.stateNode=ie;e:switch(en(ie,te,W),te){case"button":case"input":case"select":case"textarea":W=!!W.autoFocus;break e;case"img":W=!0;break e;default:W=!1}W&&tr(U)}}return Pt(U),vl(U,U.type,L===null?null:L.memoizedProps,U.pendingProps,q),null;case 6:if(L&&U.stateNode!=null)L.memoizedProps!==W&&tr(U);else{if(typeof W!="string"&&U.stateNode===null)throw Error(P(166));if(L=We.current,gi(U)){if(L=U.stateNode,q=U.memoizedProps,W=null,te=Kt,te!==null)switch(te.tag){case 27:case 5:W=te.memoizedProps}L[Wt]=U,L=!!(L.nodeValue===q||W!==null&&W.suppressHydrationWarning===!0||Nh(L.nodeValue,q)),L||pr(U,!0)}else L=Ia(L).createTextNode(W),L[Wt]=U,U.stateNode=L}return Pt(U),null;case 31:if(q=U.memoizedState,L===null||L.memoizedState!==null){if(W=gi(U),q!==null){if(L===null){if(!W)throw Error(P(318));if(L=U.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(P(557));L[Wt]=U}else Ur(),(U.flags&128)===0&&(U.memoizedState=null),U.flags|=4;Pt(U),L=!1}else q=No(),L!==null&&L.memoizedState!==null&&(L.memoizedState.hydrationErrors=q),L=!0;if(!L)return U.flags&256?(yn(U),U):(yn(U),null);if((U.flags&128)!==0)throw Error(P(558))}return Pt(U),null;case 13:if(W=U.memoizedState,L===null||L.memoizedState!==null&&L.memoizedState.dehydrated!==null){if(te=gi(U),W!==null&&W.dehydrated!==null){if(L===null){if(!te)throw Error(P(318));if(te=U.memoizedState,te=te!==null?te.dehydrated:null,!te)throw Error(P(317));te[Wt]=U}else Ur(),(U.flags&128)===0&&(U.memoizedState=null),U.flags|=4;Pt(U),te=!1}else te=No(),L!==null&&L.memoizedState!==null&&(L.memoizedState.hydrationErrors=te),te=!0;if(!te)return U.flags&256?(yn(U),U):(yn(U),null)}return yn(U),(U.flags&128)!==0?(U.lanes=q,U):(q=W!==null,L=L!==null&&L.memoizedState!==null,q&&(W=U.child,te=null,W.alternate!==null&&W.alternate.memoizedState!==null&&W.alternate.memoizedState.cachePool!==null&&(te=W.alternate.memoizedState.cachePool.pool),ie=null,W.memoizedState!==null&&W.memoizedState.cachePool!==null&&(ie=W.memoizedState.cachePool.pool),ie!==te&&(W.flags|=2048)),q!==L&&q&&(U.child.flags|=8192),ba(U,U.updateQueue),Pt(U),null);case 4:return je(),L===null&&Fl(U.stateNode.containerInfo),Pt(U),null;case 10:return Kn(U.type),Pt(U),null;case 19:if($e(Lt),W=U.memoizedState,W===null)return Pt(U),null;if(te=(U.flags&128)!==0,ie=W.rendering,ie===null)if(te)hs(W,!1);else{if(Dt!==0||L!==null&&(L.flags&128)!==0)for(L=U.child;L!==null;){if(ie=aa(L),ie!==null){for(U.flags|=128,hs(W,!1),L=ie.updateQueue,U.updateQueue=L,ba(U,L),U.subtreeFlags=0,L=q,q=U.child;q!==null;)lu(q,L),q=q.sibling;return Ne(Lt,Lt.current&1|2),yt&&qn(U,W.treeForkCount),U.child}L=L.sibling}W.tail!==null&&ft()>Ca&&(U.flags|=128,te=!0,hs(W,!1),U.lanes=4194304)}else{if(!te)if(L=aa(ie),L!==null){if(U.flags|=128,te=!0,L=L.updateQueue,U.updateQueue=L,ba(U,L),hs(W,!0),W.tail===null&&W.tailMode==="hidden"&&!ie.alternate&&!yt)return Pt(U),null}else 2*ft()-W.renderingStartTime>Ca&&q!==536870912&&(U.flags|=128,te=!0,hs(W,!1),U.lanes=4194304);W.isBackwards?(ie.sibling=U.child,U.child=ie):(L=W.last,L!==null?L.sibling=ie:U.child=ie,W.last=ie)}return W.tail!==null?(L=W.tail,W.rendering=L,W.tail=L.sibling,W.renderingStartTime=ft(),L.sibling=null,q=Lt.current,Ne(Lt,te?q&1|2:q&1),yt&&qn(U,W.treeForkCount),L):(Pt(U),null);case 22:case 23:return yn(U),Go(),W=U.memoizedState!==null,L!==null?L.memoizedState!==null!==W&&(U.flags|=8192):W&&(U.flags|=8192),W?(q&536870912)!==0&&(U.flags&128)===0&&(Pt(U),U.subtreeFlags&6&&(U.flags|=8192)):Pt(U),q=U.updateQueue,q!==null&&ba(U,q.retryQueue),q=null,L!==null&&L.memoizedState!==null&&L.memoizedState.cachePool!==null&&(q=L.memoizedState.cachePool.pool),W=null,U.memoizedState!==null&&U.memoizedState.cachePool!==null&&(W=U.memoizedState.cachePool.pool),W!==q&&(U.flags|=2048),L!==null&&$e(Vr),null;case 24:return q=null,L!==null&&(q=L.memoizedState.cache),U.memoizedState.cache!==q&&(U.flags|=2048),Kn(zt),Pt(U),null;case 25:return null;case 30:return null}throw Error(P(156,U.tag))}function kp(L,U){switch($o(U),U.tag){case 1:return L=U.flags,L&65536?(U.flags=L&-65537|128,U):null;case 3:return Kn(zt),je(),L=U.flags,(L&65536)!==0&&(L&128)===0?(U.flags=L&-65537|128,U):null;case 26:case 27:case 5:return ze(U),null;case 31:if(U.memoizedState!==null){if(yn(U),U.alternate===null)throw Error(P(340));Ur()}return L=U.flags,L&65536?(U.flags=L&-65537|128,U):null;case 13:if(yn(U),L=U.memoizedState,L!==null&&L.dehydrated!==null){if(U.alternate===null)throw Error(P(340));Ur()}return L=U.flags,L&65536?(U.flags=L&-65537|128,U):null;case 19:return $e(Lt),null;case 4:return je(),null;case 10:return Kn(U.type),null;case 22:case 23:return yn(U),Go(),L!==null&&$e(Vr),L=U.flags,L&65536?(U.flags=L&-65537|128,U):null;case 24:return Kn(zt),null;case 25:return null;default:return null}}function If(L,U){switch($o(U),U.tag){case 3:Kn(zt),je();break;case 26:case 27:case 5:ze(U);break;case 4:je();break;case 31:U.memoizedState!==null&&yn(U);break;case 13:yn(U);break;case 19:$e(Lt);break;case 10:Kn(U.type);break;case 22:case 23:yn(U),Go(),L!==null&&$e(Vr);break;case 24:Kn(zt)}}function ds(L,U){try{var q=U.updateQueue,W=q!==null?q.lastEffect:null;if(W!==null){var te=W.next;q=te;do{if((q.tag&L)===L){W=void 0;var ie=q.create,ue=q.inst;W=ie(),ue.destroy=W}q=q.next}while(q!==te)}}catch(xe){wt(U,U.return,xe)}}function vr(L,U,q){try{var W=U.updateQueue,te=W!==null?W.lastEffect:null;if(te!==null){var ie=te.next;W=ie;do{if((W.tag&L)===L){var ue=W.inst,xe=ue.destroy;if(xe!==void 0){ue.destroy=void 0,te=U;var Re=q,De=xe;try{De()}catch(Ve){wt(te,Re,Ve)}}}W=W.next}while(W!==ie)}}catch(Ve){wt(U,U.return,Ve)}}function Df(L){var U=L.updateQueue;if(U!==null){var q=L.stateNode;try{Tu(U,q)}catch(W){wt(L,L.return,W)}}}function Lf(L,U,q){q.props=Wr(L.type,L.memoizedProps),q.state=L.memoizedState;try{q.componentWillUnmount()}catch(W){wt(L,U,W)}}function ps(L,U){try{var q=L.ref;if(q!==null){switch(L.tag){case 26:case 27:case 5:var W=L.stateNode;break;case 30:W=L.stateNode;break;default:W=L.stateNode}typeof q=="function"?L.refCleanup=q(W):q.current=W}}catch(te){wt(L,U,te)}}function Bn(L,U){var q=L.ref,W=L.refCleanup;if(q!==null)if(typeof W=="function")try{W()}catch(te){wt(L,U,te)}finally{L.refCleanup=null,L=L.alternate,L!=null&&(L.refCleanup=null)}else if(typeof q=="function")try{q(null)}catch(te){wt(L,U,te)}else q.current=null}function Bf(L){var U=L.type,q=L.memoizedProps,W=L.stateNode;try{e:switch(U){case"button":case"input":case"select":case"textarea":q.autoFocus&&W.focus();break e;case"img":q.src?W.src=q.src:q.srcSet&&(W.srcset=q.srcSet)}}catch(te){wt(L,L.return,te)}}function Sl(L,U,q){try{var W=L.stateNode;rm(W,L.type,q,U),W[an]=U}catch(te){wt(L,L.return,te)}}function zf(L){return L.tag===5||L.tag===3||L.tag===26||L.tag===27&&Rr(L.type)||L.tag===4}function wl(L){e:for(;;){for(;L.sibling===null;){if(L.return===null||zf(L.return))return null;L=L.return}for(L.sibling.return=L.return,L=L.sibling;L.tag!==5&&L.tag!==6&&L.tag!==18;){if(L.tag===27&&Rr(L.type)||L.flags&2||L.child===null||L.tag===4)continue e;L.child.return=L,L=L.child}if(!(L.flags&2))return L.stateNode}}function El(L,U,q){var W=L.tag;if(W===5||W===6)L=L.stateNode,U?(q.nodeType===9?q.body:q.nodeName==="HTML"?q.ownerDocument.body:q).insertBefore(L,U):(U=q.nodeType===9?q.body:q.nodeName==="HTML"?q.ownerDocument.body:q,U.appendChild(L),q=q._reactRootContainer,q!=null||U.onclick!==null||(U.onclick=Fn));else if(W!==4&&(W===27&&Rr(L.type)&&(q=L.stateNode,U=null),L=L.child,L!==null))for(El(L,U,q),L=L.sibling;L!==null;)El(L,U,q),L=L.sibling}function va(L,U,q){var W=L.tag;if(W===5||W===6)L=L.stateNode,U?q.insertBefore(L,U):q.appendChild(L);else if(W!==4&&(W===27&&Rr(L.type)&&(q=L.stateNode),L=L.child,L!==null))for(va(L,U,q),L=L.sibling;L!==null;)va(L,U,q),L=L.sibling}function Hf(L){var U=L.stateNode,q=L.memoizedProps;try{for(var W=L.type,te=U.attributes;te.length;)U.removeAttributeNode(te[0]);en(U,W,q),U[Wt]=L,U[an]=q}catch(ie){wt(L,L.return,ie)}}var nr=!1,Ft=!1,Cl=!1,Uf=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function Ip(L,U){if(L=L.containerInfo,ql=Fa,L=Jc(L),xo(L)){if("selectionStart"in L)var q={start:L.selectionStart,end:L.selectionEnd};else e:{q=(q=L.ownerDocument)&&q.defaultView||window;var W=q.getSelection&&q.getSelection();if(W&&W.rangeCount!==0){q=W.anchorNode;var te=W.anchorOffset,ie=W.focusNode;W=W.focusOffset;try{q.nodeType,ie.nodeType}catch{q=null;break e}var ue=0,xe=-1,Re=-1,De=0,Ve=0,Xe=L,Le=null;t:for(;;){for(var He;Xe!==q||te!==0&&Xe.nodeType!==3||(xe=ue+te),Xe!==ie||W!==0&&Xe.nodeType!==3||(Re=ue+W),Xe.nodeType===3&&(ue+=Xe.nodeValue.length),(He=Xe.firstChild)!==null;)Le=Xe,Xe=He;for(;;){if(Xe===L)break t;if(Le===q&&++De===te&&(xe=ue),Le===ie&&++Ve===W&&(Re=ue),(He=Xe.nextSibling)!==null)break;Xe=Le,Le=Xe.parentNode}Xe=He}q=xe===-1||Re===-1?null:{start:xe,end:Re}}else q=null}q=q||{start:0,end:0}}else q=null;for(Zl={focusedElem:L,selectionRange:q},Fa=!1,Xt=U;Xt!==null;)if(U=Xt,L=U.child,(U.subtreeFlags&1028)!==0&&L!==null)L.return=U,Xt=L;else for(;Xt!==null;){switch(U=Xt,ie=U.alternate,L=U.flags,U.tag){case 0:if((L&4)!==0&&(L=U.updateQueue,L=L!==null?L.events:null,L!==null))for(q=0;q<L.length;q++)te=L[q],te.ref.impl=te.nextImpl;break;case 11:case 15:break;case 1:if((L&1024)!==0&&ie!==null){L=void 0,q=U,te=ie.memoizedProps,ie=ie.memoizedState,W=q.stateNode;try{var tt=Wr(q.type,te);L=W.getSnapshotBeforeUpdate(tt,ie),W.__reactInternalSnapshotBeforeUpdate=L}catch(at){wt(q,q.return,at)}}break;case 3:if((L&1024)!==0){if(L=U.stateNode.containerInfo,q=L.nodeType,q===9)Wl(L);else if(q===1)switch(L.nodeName){case"HEAD":case"HTML":case"BODY":Wl(L);break;default:L.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((L&1024)!==0)throw Error(P(163))}if(L=U.sibling,L!==null){L.return=U.return,Xt=L;break}Xt=U.return}}function Ff(L,U,q){var W=q.flags;switch(q.tag){case 0:case 11:case 15:ir(L,q),W&4&&ds(5,q);break;case 1:if(ir(L,q),W&4)if(L=q.stateNode,U===null)try{L.componentDidMount()}catch(ue){wt(q,q.return,ue)}else{var te=Wr(q.type,U.memoizedProps);U=U.memoizedState;try{L.componentDidUpdate(te,U,L.__reactInternalSnapshotBeforeUpdate)}catch(ue){wt(q,q.return,ue)}}W&64&&Df(q),W&512&&ps(q,q.return);break;case 3:if(ir(L,q),W&64&&(L=q.updateQueue,L!==null)){if(U=null,q.child!==null)switch(q.child.tag){case 27:case 5:U=q.child.stateNode;break;case 1:U=q.child.stateNode}try{Tu(L,U)}catch(ue){wt(q,q.return,ue)}}break;case 27:U===null&&W&4&&Hf(q);case 26:case 5:ir(L,q),U===null&&W&4&&Bf(q),W&512&&ps(q,q.return);break;case 12:ir(L,q);break;case 31:ir(L,q),W&4&&qf(L,q);break;case 13:ir(L,q),W&4&&Zf(L,q),W&64&&(L=q.memoizedState,L!==null&&(L=L.dehydrated,L!==null&&(q=Vp.bind(null,q),fm(L,q))));break;case 22:if(W=q.memoizedState!==null||nr,!W){U=U!==null&&U.memoizedState!==null||Ft,te=nr;var ie=Ft;nr=W,(Ft=U)&&!ie?sr(L,q,(q.subtreeFlags&8772)!==0):ir(L,q),nr=te,Ft=ie}break;case 30:break;default:ir(L,q)}}function Gf(L){var U=L.alternate;U!==null&&(L.alternate=null,Gf(U)),L.child=null,L.deletions=null,L.sibling=null,L.tag===5&&(U=L.stateNode,U!==null&&eo(U)),L.stateNode=null,L.return=null,L.dependencies=null,L.memoizedProps=null,L.memoizedState=null,L.pendingProps=null,L.stateNode=null,L.updateQueue=null}var jt=null,ln=!1;function rr(L,U,q){for(q=q.child;q!==null;)Vf(L,U,q),q=q.sibling}function Vf(L,U,q){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(tn,q)}catch{}switch(q.tag){case 26:Ft||Bn(q,U),rr(L,U,q),q.memoizedState?q.memoizedState.count--:q.stateNode&&(q=q.stateNode,q.parentNode.removeChild(q));break;case 27:Ft||Bn(q,U);var W=jt,te=ln;Rr(q.type)&&(jt=q.stateNode,ln=!1),rr(L,U,q),ws(q.stateNode),jt=W,ln=te;break;case 5:Ft||Bn(q,U);case 6:if(W=jt,te=ln,jt=null,rr(L,U,q),jt=W,ln=te,jt!==null)if(ln)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(q.stateNode)}catch(ie){wt(q,U,ie)}else try{jt.removeChild(q.stateNode)}catch(ie){wt(q,U,ie)}break;case 18:jt!==null&&(ln?(L=jt,Dh(L.nodeType===9?L.body:L.nodeName==="HTML"?L.ownerDocument.body:L,q.stateNode),Di(L)):Dh(jt,q.stateNode));break;case 4:W=jt,te=ln,jt=q.stateNode.containerInfo,ln=!0,rr(L,U,q),jt=W,ln=te;break;case 0:case 11:case 14:case 15:vr(2,q,U),Ft||vr(4,q,U),rr(L,U,q);break;case 1:Ft||(Bn(q,U),W=q.stateNode,typeof W.componentWillUnmount=="function"&&Lf(q,U,W)),rr(L,U,q);break;case 21:rr(L,U,q);break;case 22:Ft=(W=Ft)||q.memoizedState!==null,rr(L,U,q),Ft=W;break;default:rr(L,U,q)}}function qf(L,U){if(U.memoizedState===null&&(L=U.alternate,L!==null&&(L=L.memoizedState,L!==null))){L=L.dehydrated;try{Di(L)}catch(q){wt(U,U.return,q)}}}function Zf(L,U){if(U.memoizedState===null&&(L=U.alternate,L!==null&&(L=L.memoizedState,L!==null&&(L=L.dehydrated,L!==null))))try{Di(L)}catch(q){wt(U,U.return,q)}}function Dp(L){switch(L.tag){case 31:case 13:case 19:var U=L.stateNode;return U===null&&(U=L.stateNode=new Uf),U;case 22:return L=L.stateNode,U=L._retryCache,U===null&&(U=L._retryCache=new Uf),U;default:throw Error(P(435,L.tag))}}function Sa(L,U){var q=Dp(L);U.forEach(function(W){if(!q.has(W)){q.add(W);var te=qp.bind(null,L,W);W.then(te,te)}})}function un(L,U){var q=U.deletions;if(q!==null)for(var W=0;W<q.length;W++){var te=q[W],ie=L,ue=U,xe=ue;e:for(;xe!==null;){switch(xe.tag){case 27:if(Rr(xe.type)){jt=xe.stateNode,ln=!1;break e}break;case 5:jt=xe.stateNode,ln=!1;break e;case 3:case 4:jt=xe.stateNode.containerInfo,ln=!0;break e}xe=xe.return}if(jt===null)throw Error(P(160));Vf(ie,ue,te),jt=null,ln=!1,ie=te.alternate,ie!==null&&(ie.return=null),te.return=null}if(U.subtreeFlags&13886)for(U=U.child;U!==null;)Yf(U,L),U=U.sibling}var On=null;function Yf(L,U){var q=L.alternate,W=L.flags;switch(L.tag){case 0:case 11:case 14:case 15:un(U,L),fn(L),W&4&&(vr(3,L,L.return),ds(3,L),vr(5,L,L.return));break;case 1:un(U,L),fn(L),W&512&&(Ft||q===null||Bn(q,q.return)),W&64&&nr&&(L=L.updateQueue,L!==null&&(W=L.callbacks,W!==null&&(q=L.shared.hiddenCallbacks,L.shared.hiddenCallbacks=q===null?W:q.concat(W))));break;case 26:var te=On;if(un(U,L),fn(L),W&512&&(Ft||q===null||Bn(q,q.return)),W&4){var ie=q!==null?q.memoizedState:null;if(W=L.memoizedState,q===null)if(W===null)if(L.stateNode===null){e:{W=L.type,q=L.memoizedProps,te=te.ownerDocument||te;t:switch(W){case"title":ie=te.getElementsByTagName("title")[0],(!ie||ie[Hi]||ie[Wt]||ie.namespaceURI==="http://www.w3.org/2000/svg"||ie.hasAttribute("itemprop"))&&(ie=te.createElement(W),te.head.insertBefore(ie,te.querySelector("head > title"))),en(ie,W,q),ie[Wt]=L,Yt(ie),W=ie;break e;case"link":var ue=Yh("link","href",te).get(W+(q.href||""));if(ue){for(var xe=0;xe<ue.length;xe++)if(ie=ue[xe],ie.getAttribute("href")===(q.href==null||q.href===""?null:q.href)&&ie.getAttribute("rel")===(q.rel==null?null:q.rel)&&ie.getAttribute("title")===(q.title==null?null:q.title)&&ie.getAttribute("crossorigin")===(q.crossOrigin==null?null:q.crossOrigin)){ue.splice(xe,1);break t}}ie=te.createElement(W),en(ie,W,q),te.head.appendChild(ie);break;case"meta":if(ue=Yh("meta","content",te).get(W+(q.content||""))){for(xe=0;xe<ue.length;xe++)if(ie=ue[xe],ie.getAttribute("content")===(q.content==null?null:""+q.content)&&ie.getAttribute("name")===(q.name==null?null:q.name)&&ie.getAttribute("property")===(q.property==null?null:q.property)&&ie.getAttribute("http-equiv")===(q.httpEquiv==null?null:q.httpEquiv)&&ie.getAttribute("charset")===(q.charSet==null?null:q.charSet)){ue.splice(xe,1);break t}}ie=te.createElement(W),en(ie,W,q),te.head.appendChild(ie);break;default:throw Error(P(468,W))}ie[Wt]=L,Yt(ie),W=ie}L.stateNode=W}else Xh(te,L.type,L.stateNode);else L.stateNode=Zh(te,W,L.memoizedProps);else ie!==W?(ie===null?q.stateNode!==null&&(q=q.stateNode,q.parentNode.removeChild(q)):ie.count--,W===null?Xh(te,L.type,L.stateNode):Zh(te,W,L.memoizedProps)):W===null&&L.stateNode!==null&&Sl(L,L.memoizedProps,q.memoizedProps)}break;case 27:un(U,L),fn(L),W&512&&(Ft||q===null||Bn(q,q.return)),q!==null&&W&4&&Sl(L,L.memoizedProps,q.memoizedProps);break;case 5:if(un(U,L),fn(L),W&512&&(Ft||q===null||Bn(q,q.return)),L.flags&32){te=L.stateNode;try{si(te,"")}catch(tt){wt(L,L.return,tt)}}W&4&&L.stateNode!=null&&(te=L.memoizedProps,Sl(L,te,q!==null?q.memoizedProps:te)),W&1024&&(Cl=!0);break;case 6:if(un(U,L),fn(L),W&4){if(L.stateNode===null)throw Error(P(162));W=L.memoizedProps,q=L.stateNode;try{q.nodeValue=W}catch(tt){wt(L,L.return,tt)}}break;case 3:if(Ba=null,te=On,On=Da(U.containerInfo),un(U,L),On=te,fn(L),W&4&&q!==null&&q.memoizedState.isDehydrated)try{Di(U.containerInfo)}catch(tt){wt(L,L.return,tt)}Cl&&(Cl=!1,Xf(L));break;case 4:W=On,On=Da(L.stateNode.containerInfo),un(U,L),fn(L),On=W;break;case 12:un(U,L),fn(L);break;case 31:un(U,L),fn(L),W&4&&(W=L.updateQueue,W!==null&&(L.updateQueue=null,Sa(L,W)));break;case 13:un(U,L),fn(L),L.child.flags&8192&&L.memoizedState!==null!=(q!==null&&q.memoizedState!==null)&&(Ea=ft()),W&4&&(W=L.updateQueue,W!==null&&(L.updateQueue=null,Sa(L,W)));break;case 22:te=L.memoizedState!==null;var Re=q!==null&&q.memoizedState!==null,De=nr,Ve=Ft;if(nr=De||te,Ft=Ve||Re,un(U,L),Ft=Ve,nr=De,fn(L),W&8192)e:for(U=L.stateNode,U._visibility=te?U._visibility&-2:U._visibility|1,te&&(q===null||Re||nr||Ft||Kr(L)),q=null,U=L;;){if(U.tag===5||U.tag===26){if(q===null){Re=q=U;try{if(ie=Re.stateNode,te)ue=ie.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none";else{xe=Re.stateNode;var Xe=Re.memoizedProps.style,Le=Xe!=null&&Xe.hasOwnProperty("display")?Xe.display:null;xe.style.display=Le==null||typeof Le=="boolean"?"":(""+Le).trim()}}catch(tt){wt(Re,Re.return,tt)}}}else if(U.tag===6){if(q===null){Re=U;try{Re.stateNode.nodeValue=te?"":Re.memoizedProps}catch(tt){wt(Re,Re.return,tt)}}}else if(U.tag===18){if(q===null){Re=U;try{var He=Re.stateNode;te?Lh(He,!0):Lh(Re.stateNode,!1)}catch(tt){wt(Re,Re.return,tt)}}}else if((U.tag!==22&&U.tag!==23||U.memoizedState===null||U===L)&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===L)break e;for(;U.sibling===null;){if(U.return===null||U.return===L)break e;q===U&&(q=null),U=U.return}q===U&&(q=null),U.sibling.return=U.return,U=U.sibling}W&4&&(W=L.updateQueue,W!==null&&(q=W.retryQueue,q!==null&&(W.retryQueue=null,Sa(L,q))));break;case 19:un(U,L),fn(L),W&4&&(W=L.updateQueue,W!==null&&(L.updateQueue=null,Sa(L,W)));break;case 30:break;case 21:break;default:un(U,L),fn(L)}}function fn(L){var U=L.flags;if(U&2){try{for(var q,W=L.return;W!==null;){if(zf(W)){q=W;break}W=W.return}if(q==null)throw Error(P(160));switch(q.tag){case 27:var te=q.stateNode,ie=wl(L);va(L,ie,te);break;case 5:var ue=q.stateNode;q.flags&32&&(si(ue,""),q.flags&=-33);var xe=wl(L);va(L,xe,ue);break;case 3:case 4:var Re=q.stateNode.containerInfo,De=wl(L);El(L,De,Re);break;default:throw Error(P(161))}}catch(Ve){wt(L,L.return,Ve)}L.flags&=-3}U&4096&&(L.flags&=-4097)}function Xf(L){if(L.subtreeFlags&1024)for(L=L.child;L!==null;){var U=L;Xf(U),U.tag===5&&U.flags&1024&&U.stateNode.reset(),L=L.sibling}}function ir(L,U){if(U.subtreeFlags&8772)for(U=U.child;U!==null;)Ff(L,U.alternate,U),U=U.sibling}function Kr(L){for(L=L.child;L!==null;){var U=L;switch(U.tag){case 0:case 11:case 14:case 15:vr(4,U,U.return),Kr(U);break;case 1:Bn(U,U.return);var q=U.stateNode;typeof q.componentWillUnmount=="function"&&Lf(U,U.return,q),Kr(U);break;case 27:ws(U.stateNode);case 26:case 5:Bn(U,U.return),Kr(U);break;case 22:U.memoizedState===null&&Kr(U);break;case 30:Kr(U);break;default:Kr(U)}L=L.sibling}}function sr(L,U,q){for(q=q&&(U.subtreeFlags&8772)!==0,U=U.child;U!==null;){var W=U.alternate,te=L,ie=U,ue=ie.flags;switch(ie.tag){case 0:case 11:case 15:sr(te,ie,q),ds(4,ie);break;case 1:if(sr(te,ie,q),W=ie,te=W.stateNode,typeof te.componentDidMount=="function")try{te.componentDidMount()}catch(De){wt(W,W.return,De)}if(W=ie,te=W.updateQueue,te!==null){var xe=W.stateNode;try{var Re=te.shared.hiddenCallbacks;if(Re!==null)for(te.shared.hiddenCallbacks=null,te=0;te<Re.length;te++)Cu(Re[te],xe)}catch(De){wt(W,W.return,De)}}q&&ue&64&&Df(ie),ps(ie,ie.return);break;case 27:Hf(ie);case 26:case 5:sr(te,ie,q),q&&W===null&&ue&4&&Bf(ie),ps(ie,ie.return);break;case 12:sr(te,ie,q);break;case 31:sr(te,ie,q),q&&ue&4&&qf(te,ie);break;case 13:sr(te,ie,q),q&&ue&4&&Zf(te,ie);break;case 22:ie.memoizedState===null&&sr(te,ie,q),ps(ie,ie.return);break;case 30:break;default:sr(te,ie,q)}U=U.sibling}}function Tl(L,U){var q=null;L!==null&&L.memoizedState!==null&&L.memoizedState.cachePool!==null&&(q=L.memoizedState.cachePool.pool),L=null,U.memoizedState!==null&&U.memoizedState.cachePool!==null&&(L=U.memoizedState.cachePool.pool),L!==q&&(L!=null&&L.refCount++,q!=null&&es(q))}function Al(L,U){L=null,U.alternate!==null&&(L=U.alternate.memoizedState.cache),U=U.memoizedState.cache,U!==L&&(U.refCount++,L!=null&&es(L))}function kn(L,U,q,W){if(U.subtreeFlags&10256)for(U=U.child;U!==null;)Wf(L,U,q,W),U=U.sibling}function Wf(L,U,q,W){var te=U.flags;switch(U.tag){case 0:case 11:case 15:kn(L,U,q,W),te&2048&&ds(9,U);break;case 1:kn(L,U,q,W);break;case 3:kn(L,U,q,W),te&2048&&(L=null,U.alternate!==null&&(L=U.alternate.memoizedState.cache),U=U.memoizedState.cache,U!==L&&(U.refCount++,L!=null&&es(L)));break;case 12:if(te&2048){kn(L,U,q,W),L=U.stateNode;try{var ie=U.memoizedProps,ue=ie.id,xe=ie.onPostCommit;typeof xe=="function"&&xe(ue,U.alternate===null?"mount":"update",L.passiveEffectDuration,-0)}catch(Re){wt(U,U.return,Re)}}else kn(L,U,q,W);break;case 31:kn(L,U,q,W);break;case 13:kn(L,U,q,W);break;case 23:break;case 22:ie=U.stateNode,ue=U.alternate,U.memoizedState!==null?ie._visibility&2?kn(L,U,q,W):ms(L,U):ie._visibility&2?kn(L,U,q,W):(ie._visibility|=2,Ti(L,U,q,W,(U.subtreeFlags&10256)!==0||!1)),te&2048&&Tl(ue,U);break;case 24:kn(L,U,q,W),te&2048&&Al(U.alternate,U);break;default:kn(L,U,q,W)}}function Ti(L,U,q,W,te){for(te=te&&((U.subtreeFlags&10256)!==0||!1),U=U.child;U!==null;){var ie=L,ue=U,xe=q,Re=W,De=ue.flags;switch(ue.tag){case 0:case 11:case 15:Ti(ie,ue,xe,Re,te),ds(8,ue);break;case 23:break;case 22:var Ve=ue.stateNode;ue.memoizedState!==null?Ve._visibility&2?Ti(ie,ue,xe,Re,te):ms(ie,ue):(Ve._visibility|=2,Ti(ie,ue,xe,Re,te)),te&&De&2048&&Tl(ue.alternate,ue);break;case 24:Ti(ie,ue,xe,Re,te),te&&De&2048&&Al(ue.alternate,ue);break;default:Ti(ie,ue,xe,Re,te)}U=U.sibling}}function ms(L,U){if(U.subtreeFlags&10256)for(U=U.child;U!==null;){var q=L,W=U,te=W.flags;switch(W.tag){case 22:ms(q,W),te&2048&&Tl(W.alternate,W);break;case 24:ms(q,W),te&2048&&Al(W.alternate,W);break;default:ms(q,W)}U=U.sibling}}var gs=8192;function Ai(L,U,q){if(L.subtreeFlags&gs)for(L=L.child;L!==null;)Kf(L,U,q),L=L.sibling}function Kf(L,U,q){switch(L.tag){case 26:Ai(L,U,q),L.flags&gs&&L.memoizedState!==null&&wm(q,On,L.memoizedState,L.memoizedProps);break;case 5:Ai(L,U,q);break;case 3:case 4:var W=On;On=Da(L.stateNode.containerInfo),Ai(L,U,q),On=W;break;case 22:L.memoizedState===null&&(W=L.alternate,W!==null&&W.memoizedState!==null?(W=gs,gs=16777216,Ai(L,U,q),gs=W):Ai(L,U,q));break;default:Ai(L,U,q)}}function Qf(L){var U=L.alternate;if(U!==null&&(L=U.child,L!==null)){U.child=null;do U=L.sibling,L.sibling=null,L=U;while(L!==null)}}function ys(L){var U=L.deletions;if((L.flags&16)!==0){if(U!==null)for(var q=0;q<U.length;q++){var W=U[q];Xt=W,eh(W,L)}Qf(L)}if(L.subtreeFlags&10256)for(L=L.child;L!==null;)Jf(L),L=L.sibling}function Jf(L){switch(L.tag){case 0:case 11:case 15:ys(L),L.flags&2048&&vr(9,L,L.return);break;case 3:ys(L);break;case 12:ys(L);break;case 22:var U=L.stateNode;L.memoizedState!==null&&U._visibility&2&&(L.return===null||L.return.tag!==13)?(U._visibility&=-3,wa(L)):ys(L);break;default:ys(L)}}function wa(L){var U=L.deletions;if((L.flags&16)!==0){if(U!==null)for(var q=0;q<U.length;q++){var W=U[q];Xt=W,eh(W,L)}Qf(L)}for(L=L.child;L!==null;){switch(U=L,U.tag){case 0:case 11:case 15:vr(8,U,U.return),wa(U);break;case 22:q=U.stateNode,q._visibility&2&&(q._visibility&=-3,wa(U));break;default:wa(U)}L=L.sibling}}function eh(L,U){for(;Xt!==null;){var q=Xt;switch(q.tag){case 0:case 11:case 15:vr(8,q,U);break;case 23:case 22:if(q.memoizedState!==null&&q.memoizedState.cachePool!==null){var W=q.memoizedState.cachePool.pool;W!=null&&W.refCount++}break;case 24:es(q.memoizedState.cache)}if(W=q.child,W!==null)W.return=q,Xt=W;else e:for(q=L;Xt!==null;){W=Xt;var te=W.sibling,ie=W.return;if(Gf(W),W===q){Xt=null;break e}if(te!==null){te.return=ie,Xt=te;break e}Xt=ie}}}var Lp={getCacheForType:function(L){var U=Qt(zt),q=U.data.get(L);return q===void 0&&(q=L(),U.data.set(L,q)),q},cacheSignal:function(){return Qt(zt).controller.signal}},Bp=typeof WeakMap=="function"?WeakMap:Map,vt=0,Mt=null,ht=null,mt=0,St=0,xn=null,Sr=!1,Ri=!1,Rl=!1,ar=0,Dt=0,wr=0,Qr=0,$l=0,bn=0,$i=0,xs=null,hn=null,Ml=!1,Ea=0,th=0,Ca=1/0,Ta=null,Er=null,Vt=0,Cr=null,Mi=null,or=0,Nl=0,Pl=null,nh=null,bs=0,jl=null;function _n(){return(vt&2)!==0&&mt!==0?mt&-mt:ge.T!==null?Bl():yc()}function rh(){if(bn===0)if((mt&536870912)===0||yt){var L=js;js<<=1,(js&3932160)===0&&(js=262144),bn=L}else bn=536870912;return L=gn.current,L!==null&&(L.flags|=32),bn}function dn(L,U,q){(L===Mt&&(St===2||St===9)||L.cancelPendingCommit!==null)&&(Ni(L,0),Tr(L,mt,bn,!1)),zi(L,q),((vt&2)===0||L!==Mt)&&(L===Mt&&((vt&2)===0&&(Qr|=q),Dt===4&&Tr(L,mt,bn,!1)),zn(L))}function ih(L,U,q){if((vt&6)!==0)throw Error(P(327));var W=!q&&(U&127)===0&&(U&L.expiredLanes)===0||Bi(L,U),te=W?Up(L,U):kl(L,U,!0),ie=W;do{if(te===0){Ri&&!W&&Tr(L,U,0,!1);break}else{if(q=L.current.alternate,ie&&!zp(q)){te=kl(L,U,!1),ie=!1;continue}if(te===2){if(ie=U,L.errorRecoveryDisabledLanes&ie)var ue=0;else ue=L.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){U=ue;e:{var xe=L;te=xs;var Re=xe.current.memoizedState.isDehydrated;if(Re&&(Ni(xe,ue).flags|=256),ue=kl(xe,ue,!1),ue!==2){if(Rl&&!Re){xe.errorRecoveryDisabledLanes|=ie,Qr|=ie,te=4;break e}ie=hn,hn=te,ie!==null&&(hn===null?hn=ie:hn.push.apply(hn,ie))}te=ue}if(ie=!1,te!==2)continue}}if(te===1){Ni(L,0),Tr(L,U,0,!0);break}e:{switch(W=L,ie=te,ie){case 0:case 1:throw Error(P(345));case 4:if((U&4194048)!==U)break;case 6:Tr(W,U,bn,!Sr);break e;case 2:hn=null;break;case 3:case 5:break;default:throw Error(P(329))}if((U&62914560)===U&&(te=Ea+300-ft(),10<te)){if(Tr(W,U,bn,!Sr),ks(W,0,!0)!==0)break e;or=U,W.timeoutHandle=kh(sh.bind(null,W,q,hn,Ta,Ml,U,bn,Qr,$i,Sr,ie,"Throttled",-0,0),te);break e}sh(W,q,hn,Ta,Ml,U,bn,Qr,$i,Sr,ie,null,-0,0)}}break}while(!0);zn(L)}function sh(L,U,q,W,te,ie,ue,xe,Re,De,Ve,Xe,Le,He){if(L.timeoutHandle=-1,Xe=U.subtreeFlags,Xe&8192||(Xe&16785408)===16785408){Xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fn},Kf(U,ie,Xe);var tt=(ie&62914560)===ie?Ea-ft():(ie&4194048)===ie?th-ft():0;if(tt=Em(Xe,tt),tt!==null){or=ie,L.cancelPendingCommit=tt(dh.bind(null,L,U,ie,q,W,te,ue,xe,Re,Ve,Xe,null,Le,He)),Tr(L,ie,ue,!De);return}}dh(L,U,ie,q,W,te,ue,xe,Re)}function zp(L){for(var U=L;;){var q=U.tag;if((q===0||q===11||q===15)&&U.flags&16384&&(q=U.updateQueue,q!==null&&(q=q.stores,q!==null)))for(var W=0;W<q.length;W++){var te=q[W],ie=te.getSnapshot;te=te.value;try{if(!pn(ie(),te))return!1}catch{return!1}}if(q=U.child,U.subtreeFlags&16384&&q!==null)q.return=U,U=q;else{if(U===L)break;for(;U.sibling===null;){if(U.return===null||U.return===L)return!0;U=U.return}U.sibling.return=U.return,U=U.sibling}}return!0}function Tr(L,U,q,W){U&=~$l,U&=~Qr,L.suspendedLanes|=U,L.pingedLanes&=~U,W&&(L.warmLanes|=U),W=L.expirationTimes;for(var te=U;0<te;){var ie=31-nn(te),ue=1<<ie;W[ie]=-1,te&=~ue}q!==0&&pc(L,q,U)}function Aa(){return(vt&6)===0?(_s(0),!1):!0}function Ol(){if(ht!==null){if(St===0)var L=ht.return;else L=ht,Wn=Fr=null,Wo(L),vi=null,ns=0,L=ht;for(;L!==null;)If(L.alternate,L),L=L.return;ht=null}}function Ni(L,U){var q=L.timeoutHandle;q!==-1&&(L.timeoutHandle=-1,am(q)),q=L.cancelPendingCommit,q!==null&&(L.cancelPendingCommit=null,q()),or=0,Ol(),Mt=L,ht=q=Vn(L.current,null),mt=U,St=0,xn=null,Sr=!1,Ri=Bi(L,U),Rl=!1,$i=bn=$l=Qr=wr=Dt=0,hn=xs=null,Ml=!1,(U&8)!==0&&(U|=U&32);var W=L.entangledLanes;if(W!==0)for(L=L.entanglements,W&=U;0<W;){var te=31-nn(W),ie=1<<te;U|=L[te],W&=~ie}return ar=U,Zs(),q}function ah(L,U){ct=null,ge.H=us,U===_i||U===ta?(U=vu(),St=3):U===Lo?(U=vu(),St=4):St=U===hl?8:U!==null&&typeof U=="object"&&typeof U.then=="function"?6:1,xn=U,ht===null&&(Dt=1,ma(L,Tn(U,L.current)))}function oh(){var L=gn.current;return L===null?!0:(mt&4194048)===mt?Mn===null:(mt&62914560)===mt||(mt&536870912)!==0?L===Mn:!1}function lh(){var L=ge.H;return ge.H=us,L===null?us:L}function ch(){var L=ge.A;return ge.A=Lp,L}function Ra(){Dt=4,Sr||(mt&4194048)!==mt&&gn.current!==null||(Ri=!0),(wr&134217727)===0&&(Qr&134217727)===0||Mt===null||Tr(Mt,mt,bn,!1)}function kl(L,U,q){var W=vt;vt|=2;var te=lh(),ie=ch();(Mt!==L||mt!==U)&&(Ta=null,Ni(L,U)),U=!1;var ue=Dt;e:do try{if(St!==0&&ht!==null){var xe=ht,Re=xn;switch(St){case 8:Ol(),ue=6;break e;case 3:case 2:case 9:case 6:gn.current===null&&(U=!0);var De=St;if(St=0,xn=null,Pi(L,xe,Re,De),q&&Ri){ue=0;break e}break;default:De=St,St=0,xn=null,Pi(L,xe,Re,De)}}Hp(),ue=Dt;break}catch(Ve){ah(L,Ve)}while(!0);return U&&L.shellSuspendCounter++,Wn=Fr=null,vt=W,ge.H=te,ge.A=ie,ht===null&&(Mt=null,mt=0,Zs()),ue}function Hp(){for(;ht!==null;)uh(ht)}function Up(L,U){var q=vt;vt|=2;var W=lh(),te=ch();Mt!==L||mt!==U?(Ta=null,Ca=ft()+500,Ni(L,U)):Ri=Bi(L,U);e:do try{if(St!==0&&ht!==null){U=ht;var ie=xn;t:switch(St){case 1:St=0,xn=null,Pi(L,U,ie,1);break;case 2:case 9:if(bu(ie)){St=0,xn=null,fh(U);break}U=function(){St!==2&&St!==9||Mt!==L||(St=7),zn(L)},ie.then(U,U);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:bu(ie)?(St=0,xn=null,fh(U)):(St=0,xn=null,Pi(L,U,ie,7));break;case 5:var ue=null;switch(ht.tag){case 26:ue=ht.memoizedState;case 5:case 27:var xe=ht;if(ue?Wh(ue):xe.stateNode.complete){St=0,xn=null;var Re=xe.sibling;if(Re!==null)ht=Re;else{var De=xe.return;De!==null?(ht=De,$a(De)):ht=null}break t}}St=0,xn=null,Pi(L,U,ie,5);break;case 6:St=0,xn=null,Pi(L,U,ie,6);break;case 8:Ol(),Dt=6;break e;default:throw Error(P(462))}}Fp();break}catch(Ve){ah(L,Ve)}while(!0);return Wn=Fr=null,ge.H=W,ge.A=te,vt=q,ht!==null?0:(Mt=null,mt=0,Zs(),Dt)}function Fp(){for(;ht!==null&&!xt();)uh(ht)}function uh(L){var U=Of(L.alternate,L,ar);L.memoizedProps=L.pendingProps,U===null?$a(L):ht=U}function fh(L){var U=L,q=U.alternate;switch(U.tag){case 15:case 0:U=Rf(q,U,U.pendingProps,U.type,void 0,mt);break;case 11:U=Rf(q,U,U.pendingProps,U.type.render,U.ref,mt);break;case 5:Wo(U);default:If(q,U),U=ht=lu(U,ar),U=Of(q,U,ar)}L.memoizedProps=L.pendingProps,U===null?$a(L):ht=U}function Pi(L,U,q,W){Wn=Fr=null,Wo(U),vi=null,ns=0;var te=U.return;try{if(Np(L,te,U,q,mt)){Dt=1,ma(L,Tn(q,L.current)),ht=null;return}}catch(ie){if(te!==null)throw ht=te,ie;Dt=1,ma(L,Tn(q,L.current)),ht=null;return}U.flags&32768?(yt||W===1?L=!0:Ri||(mt&536870912)!==0?L=!1:(Sr=L=!0,(W===2||W===9||W===3||W===6)&&(W=gn.current,W!==null&&W.tag===13&&(W.flags|=16384))),hh(U,L)):$a(U)}function $a(L){var U=L;do{if((U.flags&32768)!==0){hh(U,Sr);return}L=U.return;var q=Op(U.alternate,U,ar);if(q!==null){ht=q;return}if(U=U.sibling,U!==null){ht=U;return}ht=U=L}while(U!==null);Dt===0&&(Dt=5)}function hh(L,U){do{var q=kp(L.alternate,L);if(q!==null){q.flags&=32767,ht=q;return}if(q=L.return,q!==null&&(q.flags|=32768,q.subtreeFlags=0,q.deletions=null),!U&&(L=L.sibling,L!==null)){ht=L;return}ht=L=q}while(L!==null);Dt=6,ht=null}function dh(L,U,q,W,te,ie,ue,xe,Re){L.cancelPendingCommit=null;do Ma();while(Vt!==0);if((vt&6)!==0)throw Error(P(327));if(U!==null){if(U===L.current)throw Error(P(177));if(ie=U.lanes|U.childLanes,ie|=wo,Sd(L,q,ie,ue,xe,Re),L===Mt&&(ht=Mt=null,mt=0),Mi=U,Cr=L,or=q,Nl=ie,Pl=te,nh=W,(U.subtreeFlags&10256)!==0||(U.flags&10256)!==0?(L.callbackNode=null,L.callbackPriority=0,Zp(kt,function(){return xh(),null})):(L.callbackNode=null,L.callbackPriority=0),W=(U.flags&13878)!==0,(U.subtreeFlags&13878)!==0||W){W=ge.T,ge.T=null,te=Se.p,Se.p=2,ue=vt,vt|=4;try{Ip(L,U,q)}finally{vt=ue,Se.p=te,ge.T=W}}Vt=1,ph(),mh(),gh()}}function ph(){if(Vt===1){Vt=0;var L=Cr,U=Mi,q=(U.flags&13878)!==0;if((U.subtreeFlags&13878)!==0||q){q=ge.T,ge.T=null;var W=Se.p;Se.p=2;var te=vt;vt|=4;try{Yf(U,L);var ie=Zl,ue=Jc(L.containerInfo),xe=ie.focusedElem,Re=ie.selectionRange;if(ue!==xe&&xe&&xe.ownerDocument&&Qc(xe.ownerDocument.documentElement,xe)){if(Re!==null&&xo(xe)){var De=Re.start,Ve=Re.end;if(Ve===void 0&&(Ve=De),"selectionStart"in xe)xe.selectionStart=De,xe.selectionEnd=Math.min(Ve,xe.value.length);else{var Xe=xe.ownerDocument||document,Le=Xe&&Xe.defaultView||window;if(Le.getSelection){var He=Le.getSelection(),tt=xe.textContent.length,at=Math.min(Re.start,tt),Tt=Re.end===void 0?at:Math.min(Re.end,tt);!He.extend&&at>Tt&&(ue=Tt,Tt=at,at=ue);var ke=Kc(xe,at),Pe=Kc(xe,Tt);if(ke&&Pe&&(He.rangeCount!==1||He.anchorNode!==ke.node||He.anchorOffset!==ke.offset||He.focusNode!==Pe.node||He.focusOffset!==Pe.offset)){var Ie=Xe.createRange();Ie.setStart(ke.node,ke.offset),He.removeAllRanges(),at>Tt?(He.addRange(Ie),He.extend(Pe.node,Pe.offset)):(Ie.setEnd(Pe.node,Pe.offset),He.addRange(Ie))}}}}for(Xe=[],He=xe;He=He.parentNode;)He.nodeType===1&&Xe.push({element:He,left:He.scrollLeft,top:He.scrollTop});for(typeof xe.focus=="function"&&xe.focus(),xe=0;xe<Xe.length;xe++){var qe=Xe[xe];qe.element.scrollLeft=qe.left,qe.element.scrollTop=qe.top}}Fa=!!ql,Zl=ql=null}finally{vt=te,Se.p=W,ge.T=q}}L.current=U,Vt=2}}function mh(){if(Vt===2){Vt=0;var L=Cr,U=Mi,q=(U.flags&8772)!==0;if((U.subtreeFlags&8772)!==0||q){q=ge.T,ge.T=null;var W=Se.p;Se.p=2;var te=vt;vt|=4;try{Ff(L,U.alternate,U)}finally{vt=te,Se.p=W,ge.T=q}}Vt=3}}function gh(){if(Vt===4||Vt===3){Vt=0,qt();var L=Cr,U=Mi,q=or,W=nh;(U.subtreeFlags&10256)!==0||(U.flags&10256)!==0?Vt=5:(Vt=0,Mi=Cr=null,yh(L,L.pendingLanes));var te=L.pendingLanes;if(te===0&&(Er=null),Qa(q),U=U.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(tn,U,void 0,(U.current.flags&128)===128)}catch{}if(W!==null){U=ge.T,te=Se.p,Se.p=2,ge.T=null;try{for(var ie=L.onRecoverableError,ue=0;ue<W.length;ue++){var xe=W[ue];ie(xe.value,{componentStack:xe.stack})}}finally{ge.T=U,Se.p=te}}(or&3)!==0&&Ma(),zn(L),te=L.pendingLanes,(q&261930)!==0&&(te&42)!==0?L===jl?bs++:(bs=0,jl=L):bs=0,_s(0)}}function yh(L,U){(L.pooledCacheLanes&=U)===0&&(U=L.pooledCache,U!=null&&(L.pooledCache=null,es(U)))}function Ma(){return ph(),mh(),gh(),xh()}function xh(){if(Vt!==5)return!1;var L=Cr,U=Nl;Nl=0;var q=Qa(or),W=ge.T,te=Se.p;try{Se.p=32>q?32:q,ge.T=null,q=Pl,Pl=null;var ie=Cr,ue=or;if(Vt=0,Mi=Cr=null,or=0,(vt&6)!==0)throw Error(P(331));var xe=vt;if(vt|=4,Jf(ie.current),Wf(ie,ie.current,ue,q),vt=xe,_s(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(tn,ie)}catch{}return!0}finally{Se.p=te,ge.T=W,yh(L,U)}}function bh(L,U,q){U=Tn(q,U),U=fl(L.stateNode,U,2),L=xr(L,U,2),L!==null&&(zi(L,2),zn(L))}function wt(L,U,q){if(L.tag===3)bh(L,L,q);else for(;U!==null;){if(U.tag===3){bh(U,L,q);break}else if(U.tag===1){var W=U.stateNode;if(typeof U.type.getDerivedStateFromError=="function"||typeof W.componentDidCatch=="function"&&(Er===null||!Er.has(W))){L=Tn(q,L),q=_f(2),W=xr(U,q,2),W!==null&&(vf(q,W,U,L),zi(W,2),zn(W));break}}U=U.return}}function Il(L,U,q){var W=L.pingCache;if(W===null){W=L.pingCache=new Bp;var te=new Set;W.set(U,te)}else te=W.get(U),te===void 0&&(te=new Set,W.set(U,te));te.has(q)||(Rl=!0,te.add(q),L=Gp.bind(null,L,U,q),U.then(L,L))}function Gp(L,U,q){var W=L.pingCache;W!==null&&W.delete(U),L.pingedLanes|=L.suspendedLanes&q,L.warmLanes&=~q,Mt===L&&(mt&q)===q&&(Dt===4||Dt===3&&(mt&62914560)===mt&&300>ft()-Ea?(vt&2)===0&&Ni(L,0):$l|=q,$i===mt&&($i=0)),zn(L)}function _h(L,U){U===0&&(U=dc()),L=zr(L,U),L!==null&&(zi(L,U),zn(L))}function Vp(L){var U=L.memoizedState,q=0;U!==null&&(q=U.retryLane),_h(L,q)}function qp(L,U){var q=0;switch(L.tag){case 31:case 13:var W=L.stateNode,te=L.memoizedState;te!==null&&(q=te.retryLane);break;case 19:W=L.stateNode;break;case 22:W=L.stateNode._retryCache;break;default:throw Error(P(314))}W!==null&&W.delete(U),_h(L,q)}function Zp(L,U){return At(L,U)}var Na=null,ji=null,Dl=!1,Pa=!1,Ll=!1,Ar=0;function zn(L){L!==ji&&L.next===null&&(ji===null?Na=ji=L:ji=ji.next=L),Pa=!0,Dl||(Dl=!0,Xp())}function _s(L,U){if(!Ll&&Pa){Ll=!0;do for(var q=!1,W=Na;W!==null;){if(L!==0){var te=W.pendingLanes;if(te===0)var ie=0;else{var ue=W.suspendedLanes,xe=W.pingedLanes;ie=(1<<31-nn(42|L)+1)-1,ie&=te&~(ue&~xe),ie=ie&201326741?ie&201326741|1:ie?ie|2:0}ie!==0&&(q=!0,Eh(W,ie))}else ie=mt,ie=ks(W,W===Mt?ie:0,W.cancelPendingCommit!==null||W.timeoutHandle!==-1),(ie&3)===0||Bi(W,ie)||(q=!0,Eh(W,ie));W=W.next}while(q);Ll=!1}}function Yp(){vh()}function vh(){Pa=Dl=!1;var L=0;Ar!==0&&sm()&&(L=Ar);for(var U=ft(),q=null,W=Na;W!==null;){var te=W.next,ie=Sh(W,U);ie===0?(W.next=null,q===null?Na=te:q.next=te,te===null&&(ji=q)):(q=W,(L!==0||(ie&3)!==0)&&(Pa=!0)),W=te}Vt!==0&&Vt!==5||_s(L),Ar!==0&&(Ar=0)}function Sh(L,U){for(var q=L.suspendedLanes,W=L.pingedLanes,te=L.expirationTimes,ie=L.pendingLanes&-62914561;0<ie;){var ue=31-nn(ie),xe=1<<ue,Re=te[ue];Re===-1?((xe&q)===0||(xe&W)!==0)&&(te[ue]=vd(xe,U)):Re<=U&&(L.expiredLanes|=xe),ie&=~xe}if(U=Mt,q=mt,q=ks(L,L===U?q:0,L.cancelPendingCommit!==null||L.timeoutHandle!==-1),W=L.callbackNode,q===0||L===U&&(St===2||St===9)||L.cancelPendingCommit!==null)return W!==null&&W!==null&&pt(W),L.callbackNode=null,L.callbackPriority=0;if((q&3)===0||Bi(L,q)){if(U=q&-q,U===L.callbackPriority)return U;switch(W!==null&&pt(W),Qa(q)){case 2:case 8:q=Ot;break;case 32:q=kt;break;case 268435456:q=Sn;break;default:q=kt}return W=wh.bind(null,L),q=At(q,W),L.callbackPriority=U,L.callbackNode=q,U}return W!==null&&W!==null&&pt(W),L.callbackPriority=2,L.callbackNode=null,2}function wh(L,U){if(Vt!==0&&Vt!==5)return L.callbackNode=null,L.callbackPriority=0,null;var q=L.callbackNode;if(Ma()&&L.callbackNode!==q)return null;var W=mt;return W=ks(L,L===Mt?W:0,L.cancelPendingCommit!==null||L.timeoutHandle!==-1),W===0?null:(ih(L,W,U),Sh(L,ft()),L.callbackNode!=null&&L.callbackNode===q?wh.bind(null,L):null)}function Eh(L,U){if(Ma())return null;ih(L,U,!0)}function Xp(){om(function(){(vt&6)!==0?At(Rt,Yp):vh()})}function Bl(){if(Ar===0){var L=xi;L===0&&(L=Ps,Ps<<=1,(Ps&261888)===0&&(Ps=256)),Ar=L}return Ar}function Ch(L){return L==null||typeof L=="symbol"||typeof L=="boolean"?null:typeof L=="function"?L:Bs(""+L)}function Th(L,U){var q=U.ownerDocument.createElement("input");return q.name=U.name,q.value=U.value,L.id&&q.setAttribute("form",L.id),U.parentNode.insertBefore(q,U),L=new FormData(L),q.parentNode.removeChild(q),L}function Wp(L,U,q,W,te){if(U==="submit"&&q&&q.stateNode===te){var ie=Ch((te[an]||null).action),ue=W.submitter;ue&&(U=(U=ue[an]||null)?Ch(U.formAction):ue.getAttribute("formAction"),U!==null&&(ie=U,ue=null));var xe=new Fs("action","action",null,W,te);L.push({event:xe,listeners:[{instance:null,listener:function(){if(W.defaultPrevented){if(Ar!==0){var Re=ue?Th(te,ue):new FormData(te);sl(q,{pending:!0,data:Re,method:te.method,action:ie},null,Re)}}else typeof ie=="function"&&(xe.preventDefault(),Re=ue?Th(te,ue):new FormData(te),sl(q,{pending:!0,data:Re,method:te.method,action:ie},ie,Re))},currentTarget:te}]})}}for(var zl=0;zl<So.length;zl++){var Hl=So[zl],Kp=Hl.toLowerCase(),Qp=Hl[0].toUpperCase()+Hl.slice(1);jn(Kp,"on"+Qp)}jn(nu,"onAnimationEnd"),jn(ru,"onAnimationIteration"),jn(iu,"onAnimationStart"),jn("dblclick","onDoubleClick"),jn("focusin","onFocus"),jn("focusout","onBlur"),jn(pp,"onTransitionRun"),jn(mp,"onTransitionStart"),jn(gp,"onTransitionCancel"),jn(su,"onTransitionEnd"),ri("onMouseEnter",["mouseout","mouseover"]),ri("onMouseLeave",["mouseout","mouseover"]),ri("onPointerEnter",["pointerout","pointerover"]),ri("onPointerLeave",["pointerout","pointerover"]),Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vs));function Ah(L,U){U=(U&4)!==0;for(var q=0;q<L.length;q++){var W=L[q],te=W.event;W=W.listeners;e:{var ie=void 0;if(U)for(var ue=W.length-1;0<=ue;ue--){var xe=W[ue],Re=xe.instance,De=xe.currentTarget;if(xe=xe.listener,Re!==ie&&te.isPropagationStopped())break e;ie=xe,te.currentTarget=De;try{ie(te)}catch(Ve){qs(Ve)}te.currentTarget=null,ie=Re}else for(ue=0;ue<W.length;ue++){if(xe=W[ue],Re=xe.instance,De=xe.currentTarget,xe=xe.listener,Re!==ie&&te.isPropagationStopped())break e;ie=xe,te.currentTarget=De;try{ie(te)}catch(Ve){qs(Ve)}te.currentTarget=null,ie=Re}}}}function dt(L,U){var q=U[Ja];q===void 0&&(q=U[Ja]=new Set);var W=L+"__bubble";q.has(W)||(Rh(U,L,2,!1),q.add(W))}function Ul(L,U,q){var W=0;U&&(W|=4),Rh(q,L,W,U)}var ja="_reactListening"+Math.random().toString(36).slice(2);function Fl(L){if(!L[ja]){L[ja]=!0,_c.forEach(function(q){q!=="selectionchange"&&(Jp.has(q)||Ul(q,!1,L),Ul(q,!0,L))});var U=L.nodeType===9?L:L.ownerDocument;U===null||U[ja]||(U[ja]=!0,Ul("selectionchange",!1,U))}}function Rh(L,U,q,W){switch(rd(U)){case 2:var te=Am;break;case 8:te=Rm;break;default:te=ic}q=te.bind(null,U,q,L),te=void 0,!lo||U!=="touchstart"&&U!=="touchmove"&&U!=="wheel"||(te=!0),W?te!==void 0?L.addEventListener(U,q,{capture:!0,passive:te}):L.addEventListener(U,q,!0):te!==void 0?L.addEventListener(U,q,{passive:te}):L.addEventListener(U,q,!1)}function Gl(L,U,q,W,te){var ie=W;if((U&1)===0&&(U&2)===0&&W!==null)e:for(;;){if(W===null)return;var ue=W.tag;if(ue===3||ue===4){var xe=W.stateNode.containerInfo;if(xe===te)break;if(ue===4)for(ue=W.return;ue!==null;){var Re=ue.tag;if((Re===3||Re===4)&&ue.stateNode.containerInfo===te)return;ue=ue.return}for(;xe!==null;){if(ue=ei(xe),ue===null)return;if(Re=ue.tag,Re===5||Re===6||Re===26||Re===27){W=ie=ue;continue e}xe=xe.parentNode}}W=W.return}Pc(function(){var De=ie,Ve=ao(q),Xe=[];e:{var Le=au.get(L);if(Le!==void 0){var He=Fs,tt=L;switch(L){case"keypress":if(Hs(q)===0)break e;case"keydown":case"keyup":He=qd;break;case"focusin":tt="focus",He=ho;break;case"focusout":tt="blur",He=ho;break;case"beforeblur":case"afterblur":He=ho;break;case"click":if(q.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=Od;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=Xd;break;case nu:case ru:case iu:He=Dd;break;case su:He=Kd;break;case"scroll":case"scrollend":He=Pd;break;case"wheel":He=Jd;break;case"copy":case"cut":case"paste":He=Bd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=Dc;break;case"toggle":case"beforetoggle":He=tp}var at=(U&4)!==0,Tt=!at&&(L==="scroll"||L==="scrollend"),ke=at?Le!==null?Le+"Capture":null:Le;at=[];for(var Pe=De,Ie;Pe!==null;){var qe=Pe;if(Ie=qe.stateNode,qe=qe.tag,qe!==5&&qe!==26&&qe!==27||Ie===null||ke===null||(qe=Fi(Pe,ke),qe!=null&&at.push(Ss(Pe,qe,Ie))),Tt)break;Pe=Pe.return}0<at.length&&(Le=new He(Le,tt,null,q,Ve),Xe.push({event:Le,listeners:at}))}}if((U&7)===0){e:{if(Le=L==="mouseover"||L==="pointerover",He=L==="mouseout"||L==="pointerout",Le&&q!==so&&(tt=q.relatedTarget||q.fromElement)&&(ei(tt)||tt[Jr]))break e;if((He||Le)&&(Le=Ve.window===Ve?Ve:(Le=Ve.ownerDocument)?Le.defaultView||Le.parentWindow:window,He?(tt=q.relatedTarget||q.toElement,He=De,tt=tt?ei(tt):null,tt!==null&&(Tt=I(tt),at=tt.tag,tt!==Tt||at!==5&&at!==27&&at!==6)&&(tt=null)):(He=null,tt=De),He!==tt)){if(at=kc,qe="onMouseLeave",ke="onMouseEnter",Pe="mouse",(L==="pointerout"||L==="pointerover")&&(at=Dc,qe="onPointerLeave",ke="onPointerEnter",Pe="pointer"),Tt=He==null?Le:Ui(He),Ie=tt==null?Le:Ui(tt),Le=new at(qe,Pe+"leave",He,q,Ve),Le.target=Tt,Le.relatedTarget=Ie,qe=null,ei(Ve)===De&&(at=new at(ke,Pe+"enter",tt,q,Ve),at.target=Ie,at.relatedTarget=Tt,qe=at),Tt=qe,He&&tt)t:{for(at=em,ke=He,Pe=tt,Ie=0,qe=ke;qe;qe=at(qe))Ie++;qe=0;for(var st=Pe;st;st=at(st))qe++;for(;0<Ie-qe;)ke=at(ke),Ie--;for(;0<qe-Ie;)Pe=at(Pe),qe--;for(;Ie--;){if(ke===Pe||Pe!==null&&ke===Pe.alternate){at=ke;break t}ke=at(ke),Pe=at(Pe)}at=null}else at=null;He!==null&&$h(Xe,Le,He,at,!1),tt!==null&&Tt!==null&&$h(Xe,Tt,tt,at,!0)}}e:{if(Le=De?Ui(De):window,He=Le.nodeName&&Le.nodeName.toLowerCase(),He==="select"||He==="input"&&Le.type==="file")var bt=Vc;else if(Fc(Le))if(qc)bt=fp;else{bt=cp;var nt=lp}else He=Le.nodeName,!He||He.toLowerCase()!=="input"||Le.type!=="checkbox"&&Le.type!=="radio"?De&&io(De.elementType)&&(bt=Vc):bt=up;if(bt&&(bt=bt(L,De))){Gc(Xe,bt,q,Ve);break e}nt&&nt(L,Le,De),L==="focusout"&&De&&Le.type==="number"&&De.memoizedProps.value!=null&&ro(Le,"number",Le.value)}switch(nt=De?Ui(De):window,L){case"focusin":(Fc(nt)||nt.contentEditable==="true")&&(ci=nt,bo=De,Ki=null);break;case"focusout":Ki=bo=ci=null;break;case"mousedown":_o=!0;break;case"contextmenu":case"mouseup":case"dragend":_o=!1,eu(Xe,q,Ve);break;case"selectionchange":if(dp)break;case"keydown":case"keyup":eu(Xe,q,Ve)}var ut;if(mo)e:{switch(L){case"compositionstart":var gt="onCompositionStart";break e;case"compositionend":gt="onCompositionEnd";break e;case"compositionupdate":gt="onCompositionUpdate";break e}gt=void 0}else li?Hc(L,q)&&(gt="onCompositionEnd"):L==="keydown"&&q.keyCode===229&&(gt="onCompositionStart");gt&&(Lc&&q.locale!=="ko"&&(li||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&li&&(ut=jc()):(fr=Ve,co="value"in fr?fr.value:fr.textContent,li=!0)),nt=Oa(De,gt),0<nt.length&&(gt=new Ic(gt,L,null,q,Ve),Xe.push({event:gt,listeners:nt}),ut?gt.data=ut:(ut=Uc(q),ut!==null&&(gt.data=ut)))),(ut=rp?ip(L,q):sp(L,q))&&(gt=Oa(De,"onBeforeInput"),0<gt.length&&(nt=new Ic("onBeforeInput","beforeinput",null,q,Ve),Xe.push({event:nt,listeners:gt}),nt.data=ut)),Wp(Xe,L,De,q,Ve)}Ah(Xe,U)})}function Ss(L,U,q){return{instance:L,listener:U,currentTarget:q}}function Oa(L,U){for(var q=U+"Capture",W=[];L!==null;){var te=L,ie=te.stateNode;if(te=te.tag,te!==5&&te!==26&&te!==27||ie===null||(te=Fi(L,q),te!=null&&W.unshift(Ss(L,te,ie)),te=Fi(L,U),te!=null&&W.push(Ss(L,te,ie))),L.tag===3)return W;L=L.return}return[]}function em(L){if(L===null)return null;do L=L.return;while(L&&L.tag!==5&&L.tag!==27);return L||null}function $h(L,U,q,W,te){for(var ie=U._reactName,ue=[];q!==null&&q!==W;){var xe=q,Re=xe.alternate,De=xe.stateNode;if(xe=xe.tag,Re!==null&&Re===W)break;xe!==5&&xe!==26&&xe!==27||De===null||(Re=De,te?(De=Fi(q,ie),De!=null&&ue.unshift(Ss(q,De,Re))):te||(De=Fi(q,ie),De!=null&&ue.push(Ss(q,De,Re)))),q=q.return}ue.length!==0&&L.push({event:U,listeners:ue})}var tm=/\r\n?/g,nm=/\u0000|\uFFFD/g;function Mh(L){return(typeof L=="string"?L:""+L).replace(tm,`
`).replace(nm,"")}function Nh(L,U){return U=Mh(U),Mh(L)===U}function Ct(L,U,q,W,te,ie){switch(q){case"children":typeof W=="string"?U==="body"||U==="textarea"&&W===""||si(L,W):(typeof W=="number"||typeof W=="bigint")&&U!=="body"&&si(L,""+W);break;case"className":Ds(L,"class",W);break;case"tabIndex":Ds(L,"tabindex",W);break;case"dir":case"role":case"viewBox":case"width":case"height":Ds(L,q,W);break;case"style":Mc(L,W,ie);break;case"data":if(U!=="object"){Ds(L,"data",W);break}case"src":case"href":if(W===""&&(U!=="a"||q!=="href")){L.removeAttribute(q);break}if(W==null||typeof W=="function"||typeof W=="symbol"||typeof W=="boolean"){L.removeAttribute(q);break}W=Bs(""+W),L.setAttribute(q,W);break;case"action":case"formAction":if(typeof W=="function"){L.setAttribute(q,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ie=="function"&&(q==="formAction"?(U!=="input"&&Ct(L,U,"name",te.name,te,null),Ct(L,U,"formEncType",te.formEncType,te,null),Ct(L,U,"formMethod",te.formMethod,te,null),Ct(L,U,"formTarget",te.formTarget,te,null)):(Ct(L,U,"encType",te.encType,te,null),Ct(L,U,"method",te.method,te,null),Ct(L,U,"target",te.target,te,null)));if(W==null||typeof W=="symbol"||typeof W=="boolean"){L.removeAttribute(q);break}W=Bs(""+W),L.setAttribute(q,W);break;case"onClick":W!=null&&(L.onclick=Fn);break;case"onScroll":W!=null&&dt("scroll",L);break;case"onScrollEnd":W!=null&&dt("scrollend",L);break;case"dangerouslySetInnerHTML":if(W!=null){if(typeof W!="object"||!("__html"in W))throw Error(P(61));if(q=W.__html,q!=null){if(te.children!=null)throw Error(P(60));L.innerHTML=q}}break;case"multiple":L.multiple=W&&typeof W!="function"&&typeof W!="symbol";break;case"muted":L.muted=W&&typeof W!="function"&&typeof W!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(W==null||typeof W=="function"||typeof W=="boolean"||typeof W=="symbol"){L.removeAttribute("xlink:href");break}q=Bs(""+W),L.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",q);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":W!=null&&typeof W!="function"&&typeof W!="symbol"?L.setAttribute(q,""+W):L.removeAttribute(q);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":W&&typeof W!="function"&&typeof W!="symbol"?L.setAttribute(q,""):L.removeAttribute(q);break;case"capture":case"download":W===!0?L.setAttribute(q,""):W!==!1&&W!=null&&typeof W!="function"&&typeof W!="symbol"?L.setAttribute(q,W):L.removeAttribute(q);break;case"cols":case"rows":case"size":case"span":W!=null&&typeof W!="function"&&typeof W!="symbol"&&!isNaN(W)&&1<=W?L.setAttribute(q,W):L.removeAttribute(q);break;case"rowSpan":case"start":W==null||typeof W=="function"||typeof W=="symbol"||isNaN(W)?L.removeAttribute(q):L.setAttribute(q,W);break;case"popover":dt("beforetoggle",L),dt("toggle",L),Is(L,"popover",W);break;case"xlinkActuate":Un(L,"http://www.w3.org/1999/xlink","xlink:actuate",W);break;case"xlinkArcrole":Un(L,"http://www.w3.org/1999/xlink","xlink:arcrole",W);break;case"xlinkRole":Un(L,"http://www.w3.org/1999/xlink","xlink:role",W);break;case"xlinkShow":Un(L,"http://www.w3.org/1999/xlink","xlink:show",W);break;case"xlinkTitle":Un(L,"http://www.w3.org/1999/xlink","xlink:title",W);break;case"xlinkType":Un(L,"http://www.w3.org/1999/xlink","xlink:type",W);break;case"xmlBase":Un(L,"http://www.w3.org/XML/1998/namespace","xml:base",W);break;case"xmlLang":Un(L,"http://www.w3.org/XML/1998/namespace","xml:lang",W);break;case"xmlSpace":Un(L,"http://www.w3.org/XML/1998/namespace","xml:space",W);break;case"is":Is(L,"is",W);break;case"innerText":case"textContent":break;default:(!(2<q.length)||q[0]!=="o"&&q[0]!=="O"||q[1]!=="n"&&q[1]!=="N")&&(q=Md.get(q)||q,Is(L,q,W))}}function Vl(L,U,q,W,te,ie){switch(q){case"style":Mc(L,W,ie);break;case"dangerouslySetInnerHTML":if(W!=null){if(typeof W!="object"||!("__html"in W))throw Error(P(61));if(q=W.__html,q!=null){if(te.children!=null)throw Error(P(60));L.innerHTML=q}}break;case"children":typeof W=="string"?si(L,W):(typeof W=="number"||typeof W=="bigint")&&si(L,""+W);break;case"onScroll":W!=null&&dt("scroll",L);break;case"onScrollEnd":W!=null&&dt("scrollend",L);break;case"onClick":W!=null&&(L.onclick=Fn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vc.hasOwnProperty(q))e:{if(q[0]==="o"&&q[1]==="n"&&(te=q.endsWith("Capture"),U=q.slice(2,te?q.length-7:void 0),ie=L[an]||null,ie=ie!=null?ie[q]:null,typeof ie=="function"&&L.removeEventListener(U,ie,te),typeof W=="function")){typeof ie!="function"&&ie!==null&&(q in L?L[q]=null:L.hasAttribute(q)&&L.removeAttribute(q)),L.addEventListener(U,W,te);break e}q in L?L[q]=W:W===!0?L.setAttribute(q,""):Is(L,q,W)}}}function en(L,U,q){switch(U){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dt("error",L),dt("load",L);var W=!1,te=!1,ie;for(ie in q)if(q.hasOwnProperty(ie)){var ue=q[ie];if(ue!=null)switch(ie){case"src":W=!0;break;case"srcSet":te=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(P(137,U));default:Ct(L,U,ie,ue,q,null)}}te&&Ct(L,U,"srcSet",q.srcSet,q,null),W&&Ct(L,U,"src",q.src,q,null);return;case"input":dt("invalid",L);var xe=ie=ue=te=null,Re=null,De=null;for(W in q)if(q.hasOwnProperty(W)){var Ve=q[W];if(Ve!=null)switch(W){case"name":te=Ve;break;case"type":ue=Ve;break;case"checked":Re=Ve;break;case"defaultChecked":De=Ve;break;case"value":ie=Ve;break;case"defaultValue":xe=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(P(137,U));break;default:Ct(L,U,W,Ve,q,null)}}Tc(L,ie,xe,Re,De,ue,te,!1);return;case"select":dt("invalid",L),W=ue=ie=null;for(te in q)if(q.hasOwnProperty(te)&&(xe=q[te],xe!=null))switch(te){case"value":ie=xe;break;case"defaultValue":ue=xe;break;case"multiple":W=xe;default:Ct(L,U,te,xe,q,null)}U=ie,q=ue,L.multiple=!!W,U!=null?ii(L,!!W,U,!1):q!=null&&ii(L,!!W,q,!0);return;case"textarea":dt("invalid",L),ie=te=W=null;for(ue in q)if(q.hasOwnProperty(ue)&&(xe=q[ue],xe!=null))switch(ue){case"value":W=xe;break;case"defaultValue":te=xe;break;case"children":ie=xe;break;case"dangerouslySetInnerHTML":if(xe!=null)throw Error(P(91));break;default:Ct(L,U,ue,xe,q,null)}Rc(L,W,te,ie);return;case"option":for(Re in q)q.hasOwnProperty(Re)&&(W=q[Re],W!=null)&&(Re==="selected"?L.selected=W&&typeof W!="function"&&typeof W!="symbol":Ct(L,U,Re,W,q,null));return;case"dialog":dt("beforetoggle",L),dt("toggle",L),dt("cancel",L),dt("close",L);break;case"iframe":case"object":dt("load",L);break;case"video":case"audio":for(W=0;W<vs.length;W++)dt(vs[W],L);break;case"image":dt("error",L),dt("load",L);break;case"details":dt("toggle",L);break;case"embed":case"source":case"link":dt("error",L),dt("load",L);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(De in q)if(q.hasOwnProperty(De)&&(W=q[De],W!=null))switch(De){case"children":case"dangerouslySetInnerHTML":throw Error(P(137,U));default:Ct(L,U,De,W,q,null)}return;default:if(io(U)){for(Ve in q)q.hasOwnProperty(Ve)&&(W=q[Ve],W!==void 0&&Vl(L,U,Ve,W,q,void 0));return}}for(xe in q)q.hasOwnProperty(xe)&&(W=q[xe],W!=null&&Ct(L,U,xe,W,q,null))}function rm(L,U,q,W){switch(U){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var te=null,ie=null,ue=null,xe=null,Re=null,De=null,Ve=null;for(He in q){var Xe=q[He];if(q.hasOwnProperty(He)&&Xe!=null)switch(He){case"checked":break;case"value":break;case"defaultValue":Re=Xe;default:W.hasOwnProperty(He)||Ct(L,U,He,null,W,Xe)}}for(var Le in W){var He=W[Le];if(Xe=q[Le],W.hasOwnProperty(Le)&&(He!=null||Xe!=null))switch(Le){case"type":ie=He;break;case"name":te=He;break;case"checked":De=He;break;case"defaultChecked":Ve=He;break;case"value":ue=He;break;case"defaultValue":xe=He;break;case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(P(137,U));break;default:He!==Xe&&Ct(L,U,Le,He,W,Xe)}}no(L,ue,xe,Re,De,Ve,ie,te);return;case"select":He=ue=xe=Le=null;for(ie in q)if(Re=q[ie],q.hasOwnProperty(ie)&&Re!=null)switch(ie){case"value":break;case"multiple":He=Re;default:W.hasOwnProperty(ie)||Ct(L,U,ie,null,W,Re)}for(te in W)if(ie=W[te],Re=q[te],W.hasOwnProperty(te)&&(ie!=null||Re!=null))switch(te){case"value":Le=ie;break;case"defaultValue":xe=ie;break;case"multiple":ue=ie;default:ie!==Re&&Ct(L,U,te,ie,W,Re)}U=xe,q=ue,W=He,Le!=null?ii(L,!!q,Le,!1):!!W!=!!q&&(U!=null?ii(L,!!q,U,!0):ii(L,!!q,q?[]:"",!1));return;case"textarea":He=Le=null;for(xe in q)if(te=q[xe],q.hasOwnProperty(xe)&&te!=null&&!W.hasOwnProperty(xe))switch(xe){case"value":break;case"children":break;default:Ct(L,U,xe,null,W,te)}for(ue in W)if(te=W[ue],ie=q[ue],W.hasOwnProperty(ue)&&(te!=null||ie!=null))switch(ue){case"value":Le=te;break;case"defaultValue":He=te;break;case"children":break;case"dangerouslySetInnerHTML":if(te!=null)throw Error(P(91));break;default:te!==ie&&Ct(L,U,ue,te,W,ie)}Ac(L,Le,He);return;case"option":for(var tt in q)Le=q[tt],q.hasOwnProperty(tt)&&Le!=null&&!W.hasOwnProperty(tt)&&(tt==="selected"?L.selected=!1:Ct(L,U,tt,null,W,Le));for(Re in W)Le=W[Re],He=q[Re],W.hasOwnProperty(Re)&&Le!==He&&(Le!=null||He!=null)&&(Re==="selected"?L.selected=Le&&typeof Le!="function"&&typeof Le!="symbol":Ct(L,U,Re,Le,W,He));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var at in q)Le=q[at],q.hasOwnProperty(at)&&Le!=null&&!W.hasOwnProperty(at)&&Ct(L,U,at,null,W,Le);for(De in W)if(Le=W[De],He=q[De],W.hasOwnProperty(De)&&Le!==He&&(Le!=null||He!=null))switch(De){case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(P(137,U));break;default:Ct(L,U,De,Le,W,He)}return;default:if(io(U)){for(var Tt in q)Le=q[Tt],q.hasOwnProperty(Tt)&&Le!==void 0&&!W.hasOwnProperty(Tt)&&Vl(L,U,Tt,void 0,W,Le);for(Ve in W)Le=W[Ve],He=q[Ve],!W.hasOwnProperty(Ve)||Le===He||Le===void 0&&He===void 0||Vl(L,U,Ve,Le,W,He);return}}for(var ke in q)Le=q[ke],q.hasOwnProperty(ke)&&Le!=null&&!W.hasOwnProperty(ke)&&Ct(L,U,ke,null,W,Le);for(Xe in W)Le=W[Xe],He=q[Xe],!W.hasOwnProperty(Xe)||Le===He||Le==null&&He==null||Ct(L,U,Xe,Le,W,He)}function Ph(L){switch(L){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function im(){if(typeof performance.getEntriesByType=="function"){for(var L=0,U=0,q=performance.getEntriesByType("resource"),W=0;W<q.length;W++){var te=q[W],ie=te.transferSize,ue=te.initiatorType,xe=te.duration;if(ie&&xe&&Ph(ue)){for(ue=0,xe=te.responseEnd,W+=1;W<q.length;W++){var Re=q[W],De=Re.startTime;if(De>xe)break;var Ve=Re.transferSize,Xe=Re.initiatorType;Ve&&Ph(Xe)&&(Re=Re.responseEnd,ue+=Ve*(Re<xe?1:(xe-De)/(Re-De)))}if(--W,U+=8*(ie+ue)/(te.duration/1e3),L++,10<L)break}}if(0<L)return U/L/1e6}return navigator.connection&&(L=navigator.connection.downlink,typeof L=="number")?L:5}var ql=null,Zl=null;function Ia(L){return L.nodeType===9?L:L.ownerDocument}function jh(L){switch(L){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Oh(L,U){if(L===0)switch(U){case"svg":return 1;case"math":return 2;default:return 0}return L===1&&U==="foreignObject"?0:L}function Yl(L,U){return L==="textarea"||L==="noscript"||typeof U.children=="string"||typeof U.children=="number"||typeof U.children=="bigint"||typeof U.dangerouslySetInnerHTML=="object"&&U.dangerouslySetInnerHTML!==null&&U.dangerouslySetInnerHTML.__html!=null}var Xl=null;function sm(){var L=window.event;return L&&L.type==="popstate"?L===Xl?!1:(Xl=L,!0):(Xl=null,!1)}var kh=typeof setTimeout=="function"?setTimeout:void 0,am=typeof clearTimeout=="function"?clearTimeout:void 0,Ih=typeof Promise=="function"?Promise:void 0,om=typeof queueMicrotask=="function"?queueMicrotask:typeof Ih<"u"?function(L){return Ih.resolve(null).then(L).catch(lm)}:kh;function lm(L){setTimeout(function(){throw L})}function Rr(L){return L==="head"}function Dh(L,U){var q=U,W=0;do{var te=q.nextSibling;if(L.removeChild(q),te&&te.nodeType===8)if(q=te.data,q==="/$"||q==="/&"){if(W===0){L.removeChild(te),Di(U);return}W--}else if(q==="$"||q==="$?"||q==="$~"||q==="$!"||q==="&")W++;else if(q==="html")ws(L.ownerDocument.documentElement);else if(q==="head"){q=L.ownerDocument.head,ws(q);for(var ie=q.firstChild;ie;){var ue=ie.nextSibling,xe=ie.nodeName;ie[Hi]||xe==="SCRIPT"||xe==="STYLE"||xe==="LINK"&&ie.rel.toLowerCase()==="stylesheet"||q.removeChild(ie),ie=ue}}else q==="body"&&ws(L.ownerDocument.body);q=te}while(q);Di(U)}function Lh(L,U){var q=L;L=0;do{var W=q.nextSibling;if(q.nodeType===1?U?(q._stashedDisplay=q.style.display,q.style.display="none"):(q.style.display=q._stashedDisplay||"",q.getAttribute("style")===""&&q.removeAttribute("style")):q.nodeType===3&&(U?(q._stashedText=q.nodeValue,q.nodeValue=""):q.nodeValue=q._stashedText||""),W&&W.nodeType===8)if(q=W.data,q==="/$"){if(L===0)break;L--}else q!=="$"&&q!=="$?"&&q!=="$~"&&q!=="$!"||L++;q=W}while(q)}function Wl(L){var U=L.firstChild;for(U&&U.nodeType===10&&(U=U.nextSibling);U;){var q=U;switch(U=U.nextSibling,q.nodeName){case"HTML":case"HEAD":case"BODY":Wl(q),eo(q);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(q.rel.toLowerCase()==="stylesheet")continue}L.removeChild(q)}}function cm(L,U,q,W){for(;L.nodeType===1;){var te=q;if(L.nodeName.toLowerCase()!==U.toLowerCase()){if(!W&&(L.nodeName!=="INPUT"||L.type!=="hidden"))break}else if(W){if(!L[Hi])switch(U){case"meta":if(!L.hasAttribute("itemprop"))break;return L;case"link":if(ie=L.getAttribute("rel"),ie==="stylesheet"&&L.hasAttribute("data-precedence"))break;if(ie!==te.rel||L.getAttribute("href")!==(te.href==null||te.href===""?null:te.href)||L.getAttribute("crossorigin")!==(te.crossOrigin==null?null:te.crossOrigin)||L.getAttribute("title")!==(te.title==null?null:te.title))break;return L;case"style":if(L.hasAttribute("data-precedence"))break;return L;case"script":if(ie=L.getAttribute("src"),(ie!==(te.src==null?null:te.src)||L.getAttribute("type")!==(te.type==null?null:te.type)||L.getAttribute("crossorigin")!==(te.crossOrigin==null?null:te.crossOrigin))&&ie&&L.hasAttribute("async")&&!L.hasAttribute("itemprop"))break;return L;default:return L}}else if(U==="input"&&L.type==="hidden"){var ie=te.name==null?null:""+te.name;if(te.type==="hidden"&&L.getAttribute("name")===ie)return L}else return L;if(L=Nn(L.nextSibling),L===null)break}return null}function um(L,U,q){if(U==="")return null;for(;L.nodeType!==3;)if((L.nodeType!==1||L.nodeName!=="INPUT"||L.type!=="hidden")&&!q||(L=Nn(L.nextSibling),L===null))return null;return L}function Bh(L,U){for(;L.nodeType!==8;)if((L.nodeType!==1||L.nodeName!=="INPUT"||L.type!=="hidden")&&!U||(L=Nn(L.nextSibling),L===null))return null;return L}function Kl(L){return L.data==="$?"||L.data==="$~"}function Ql(L){return L.data==="$!"||L.data==="$?"&&L.ownerDocument.readyState!=="loading"}function fm(L,U){var q=L.ownerDocument;if(L.data==="$~")L._reactRetry=U;else if(L.data!=="$?"||q.readyState!=="loading")U();else{var W=function(){U(),q.removeEventListener("DOMContentLoaded",W)};q.addEventListener("DOMContentLoaded",W),L._reactRetry=W}}function Nn(L){for(;L!=null;L=L.nextSibling){var U=L.nodeType;if(U===1||U===3)break;if(U===8){if(U=L.data,U==="$"||U==="$!"||U==="$?"||U==="$~"||U==="&"||U==="F!"||U==="F")break;if(U==="/$"||U==="/&")return null}}return L}var Jl=null;function zh(L){L=L.nextSibling;for(var U=0;L;){if(L.nodeType===8){var q=L.data;if(q==="/$"||q==="/&"){if(U===0)return Nn(L.nextSibling);U--}else q!=="$"&&q!=="$!"&&q!=="$?"&&q!=="$~"&&q!=="&"||U++}L=L.nextSibling}return null}function Hh(L){L=L.previousSibling;for(var U=0;L;){if(L.nodeType===8){var q=L.data;if(q==="$"||q==="$!"||q==="$?"||q==="$~"||q==="&"){if(U===0)return L;U--}else q!=="/$"&&q!=="/&"||U++}L=L.previousSibling}return null}function Uh(L,U,q){switch(U=Ia(q),L){case"html":if(L=U.documentElement,!L)throw Error(P(452));return L;case"head":if(L=U.head,!L)throw Error(P(453));return L;case"body":if(L=U.body,!L)throw Error(P(454));return L;default:throw Error(P(451))}}function ws(L){for(var U=L.attributes;U.length;)L.removeAttributeNode(U[0]);eo(L)}var Pn=new Map,Fh=new Set;function Da(L){return typeof L.getRootNode=="function"?L.getRootNode():L.nodeType===9?L:L.ownerDocument}var lr=Se.d;Se.d={f:hm,r:dm,D:pm,C:mm,L:gm,m:ym,X:bm,S:xm,M:_m};function hm(){var L=lr.f(),U=Aa();return L||U}function dm(L){var U=ti(L);U!==null&&U.tag===5&&U.type==="form"?af(U):lr.r(L)}var Oi=typeof document>"u"?null:document;function Gh(L,U,q){var W=Oi;if(W&&typeof U=="string"&&U){var te=En(U);te='link[rel="'+L+'"][href="'+te+'"]',typeof q=="string"&&(te+='[crossorigin="'+q+'"]'),Fh.has(te)||(Fh.add(te),L={rel:L,crossOrigin:q,href:U},W.querySelector(te)===null&&(U=W.createElement("link"),en(U,"link",L),Yt(U),W.head.appendChild(U)))}}function pm(L){lr.D(L),Gh("dns-prefetch",L,null)}function mm(L,U){lr.C(L,U),Gh("preconnect",L,U)}function gm(L,U,q){lr.L(L,U,q);var W=Oi;if(W&&L&&U){var te='link[rel="preload"][as="'+En(U)+'"]';U==="image"&&q&&q.imageSrcSet?(te+='[imagesrcset="'+En(q.imageSrcSet)+'"]',typeof q.imageSizes=="string"&&(te+='[imagesizes="'+En(q.imageSizes)+'"]')):te+='[href="'+En(L)+'"]';var ie=te;switch(U){case"style":ie=ki(L);break;case"script":ie=Ii(L)}Pn.has(ie)||(L=Y({rel:"preload",href:U==="image"&&q&&q.imageSrcSet?void 0:L,as:U},q),Pn.set(ie,L),W.querySelector(te)!==null||U==="style"&&W.querySelector(Es(ie))||U==="script"&&W.querySelector(Cs(ie))||(U=W.createElement("link"),en(U,"link",L),Yt(U),W.head.appendChild(U)))}}function ym(L,U){lr.m(L,U);var q=Oi;if(q&&L){var W=U&&typeof U.as=="string"?U.as:"script",te='link[rel="modulepreload"][as="'+En(W)+'"][href="'+En(L)+'"]',ie=te;switch(W){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ie=Ii(L)}if(!Pn.has(ie)&&(L=Y({rel:"modulepreload",href:L},U),Pn.set(ie,L),q.querySelector(te)===null)){switch(W){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(q.querySelector(Cs(ie)))return}W=q.createElement("link"),en(W,"link",L),Yt(W),q.head.appendChild(W)}}}function xm(L,U,q){lr.S(L,U,q);var W=Oi;if(W&&L){var te=ni(W).hoistableStyles,ie=ki(L);U=U||"default";var ue=te.get(ie);if(!ue){var xe={loading:0,preload:null};if(ue=W.querySelector(Es(ie)))xe.loading=5;else{L=Y({rel:"stylesheet",href:L,"data-precedence":U},q),(q=Pn.get(ie))&&ec(L,q);var Re=ue=W.createElement("link");Yt(Re),en(Re,"link",L),Re._p=new Promise(function(De,Ve){Re.onload=De,Re.onerror=Ve}),Re.addEventListener("load",function(){xe.loading|=1}),Re.addEventListener("error",function(){xe.loading|=2}),xe.loading|=4,La(ue,U,W)}ue={type:"stylesheet",instance:ue,count:1,state:xe},te.set(ie,ue)}}}function bm(L,U){lr.X(L,U);var q=Oi;if(q&&L){var W=ni(q).hoistableScripts,te=Ii(L),ie=W.get(te);ie||(ie=q.querySelector(Cs(te)),ie||(L=Y({src:L,async:!0},U),(U=Pn.get(te))&&tc(L,U),ie=q.createElement("script"),Yt(ie),en(ie,"link",L),q.head.appendChild(ie)),ie={type:"script",instance:ie,count:1,state:null},W.set(te,ie))}}function _m(L,U){lr.M(L,U);var q=Oi;if(q&&L){var W=ni(q).hoistableScripts,te=Ii(L),ie=W.get(te);ie||(ie=q.querySelector(Cs(te)),ie||(L=Y({src:L,async:!0,type:"module"},U),(U=Pn.get(te))&&tc(L,U),ie=q.createElement("script"),Yt(ie),en(ie,"link",L),q.head.appendChild(ie)),ie={type:"script",instance:ie,count:1,state:null},W.set(te,ie))}}function Vh(L,U,q,W){var te=(te=We.current)?Da(te):null;if(!te)throw Error(P(446));switch(L){case"meta":case"title":return null;case"style":return typeof q.precedence=="string"&&typeof q.href=="string"?(U=ki(q.href),q=ni(te).hoistableStyles,W=q.get(U),W||(W={type:"style",instance:null,count:0,state:null},q.set(U,W)),W):{type:"void",instance:null,count:0,state:null};case"link":if(q.rel==="stylesheet"&&typeof q.href=="string"&&typeof q.precedence=="string"){L=ki(q.href);var ie=ni(te).hoistableStyles,ue=ie.get(L);if(ue||(te=te.ownerDocument||te,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ie.set(L,ue),(ie=te.querySelector(Es(L)))&&!ie._p&&(ue.instance=ie,ue.state.loading=5),Pn.has(L)||(q={rel:"preload",as:"style",href:q.href,crossOrigin:q.crossOrigin,integrity:q.integrity,media:q.media,hrefLang:q.hrefLang,referrerPolicy:q.referrerPolicy},Pn.set(L,q),ie||vm(te,L,q,ue.state))),U&&W===null)throw Error(P(528,""));return ue}if(U&&W!==null)throw Error(P(529,""));return null;case"script":return U=q.async,q=q.src,typeof q=="string"&&U&&typeof U!="function"&&typeof U!="symbol"?(U=Ii(q),q=ni(te).hoistableScripts,W=q.get(U),W||(W={type:"script",instance:null,count:0,state:null},q.set(U,W)),W):{type:"void",instance:null,count:0,state:null};default:throw Error(P(444,L))}}function ki(L){return'href="'+En(L)+'"'}function Es(L){return'link[rel="stylesheet"]['+L+"]"}function qh(L){return Y({},L,{"data-precedence":L.precedence,precedence:null})}function vm(L,U,q,W){L.querySelector('link[rel="preload"][as="style"]['+U+"]")?W.loading=1:(U=L.createElement("link"),W.preload=U,U.addEventListener("load",function(){return W.loading|=1}),U.addEventListener("error",function(){return W.loading|=2}),en(U,"link",q),Yt(U),L.head.appendChild(U))}function Ii(L){return'[src="'+En(L)+'"]'}function Cs(L){return"script[async]"+L}function Zh(L,U,q){if(U.count++,U.instance===null)switch(U.type){case"style":var W=L.querySelector('style[data-href~="'+En(q.href)+'"]');if(W)return U.instance=W,Yt(W),W;var te=Y({},q,{"data-href":q.href,"data-precedence":q.precedence,href:null,precedence:null});return W=(L.ownerDocument||L).createElement("style"),Yt(W),en(W,"style",te),La(W,q.precedence,L),U.instance=W;case"stylesheet":te=ki(q.href);var ie=L.querySelector(Es(te));if(ie)return U.state.loading|=4,U.instance=ie,Yt(ie),ie;W=qh(q),(te=Pn.get(te))&&ec(W,te),ie=(L.ownerDocument||L).createElement("link"),Yt(ie);var ue=ie;return ue._p=new Promise(function(xe,Re){ue.onload=xe,ue.onerror=Re}),en(ie,"link",W),U.state.loading|=4,La(ie,q.precedence,L),U.instance=ie;case"script":return ie=Ii(q.src),(te=L.querySelector(Cs(ie)))?(U.instance=te,Yt(te),te):(W=q,(te=Pn.get(ie))&&(W=Y({},q),tc(W,te)),L=L.ownerDocument||L,te=L.createElement("script"),Yt(te),en(te,"link",W),L.head.appendChild(te),U.instance=te);case"void":return null;default:throw Error(P(443,U.type))}else U.type==="stylesheet"&&(U.state.loading&4)===0&&(W=U.instance,U.state.loading|=4,La(W,q.precedence,L));return U.instance}function La(L,U,q){for(var W=q.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),te=W.length?W[W.length-1]:null,ie=te,ue=0;ue<W.length;ue++){var xe=W[ue];if(xe.dataset.precedence===U)ie=xe;else if(ie!==te)break}ie?ie.parentNode.insertBefore(L,ie.nextSibling):(U=q.nodeType===9?q.head:q,U.insertBefore(L,U.firstChild))}function ec(L,U){L.crossOrigin==null&&(L.crossOrigin=U.crossOrigin),L.referrerPolicy==null&&(L.referrerPolicy=U.referrerPolicy),L.title==null&&(L.title=U.title)}function tc(L,U){L.crossOrigin==null&&(L.crossOrigin=U.crossOrigin),L.referrerPolicy==null&&(L.referrerPolicy=U.referrerPolicy),L.integrity==null&&(L.integrity=U.integrity)}var Ba=null;function Yh(L,U,q){if(Ba===null){var W=new Map,te=Ba=new Map;te.set(q,W)}else te=Ba,W=te.get(q),W||(W=new Map,te.set(q,W));if(W.has(L))return W;for(W.set(L,null),q=q.getElementsByTagName(L),te=0;te<q.length;te++){var ie=q[te];if(!(ie[Hi]||ie[Wt]||L==="link"&&ie.getAttribute("rel")==="stylesheet")&&ie.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=ie.getAttribute(U)||"";ue=L+ue;var xe=W.get(ue);xe?xe.push(ie):W.set(ue,[ie])}}return W}function Xh(L,U,q){L=L.ownerDocument||L,L.head.insertBefore(q,U==="title"?L.querySelector("head > title"):null)}function Sm(L,U,q){if(q===1||U.itemProp!=null)return!1;switch(L){case"meta":case"title":return!0;case"style":if(typeof U.precedence!="string"||typeof U.href!="string"||U.href==="")break;return!0;case"link":if(typeof U.rel!="string"||typeof U.href!="string"||U.href===""||U.onLoad||U.onError)break;return U.rel==="stylesheet"?(L=U.disabled,typeof U.precedence=="string"&&L==null):!0;case"script":if(U.async&&typeof U.async!="function"&&typeof U.async!="symbol"&&!U.onLoad&&!U.onError&&U.src&&typeof U.src=="string")return!0}return!1}function Wh(L){return!(L.type==="stylesheet"&&(L.state.loading&3)===0)}function wm(L,U,q,W){if(q.type==="stylesheet"&&(typeof W.media!="string"||matchMedia(W.media).matches!==!1)&&(q.state.loading&4)===0){if(q.instance===null){var te=ki(W.href),ie=U.querySelector(Es(te));if(ie){U=ie._p,U!==null&&typeof U=="object"&&typeof U.then=="function"&&(L.count++,L=za.bind(L),U.then(L,L)),q.state.loading|=4,q.instance=ie,Yt(ie);return}ie=U.ownerDocument||U,W=qh(W),(te=Pn.get(te))&&ec(W,te),ie=ie.createElement("link"),Yt(ie);var ue=ie;ue._p=new Promise(function(xe,Re){ue.onload=xe,ue.onerror=Re}),en(ie,"link",W),q.instance=ie}L.stylesheets===null&&(L.stylesheets=new Map),L.stylesheets.set(q,U),(U=q.state.preload)&&(q.state.loading&3)===0&&(L.count++,q=za.bind(L),U.addEventListener("load",q),U.addEventListener("error",q))}}var nc=0;function Em(L,U){return L.stylesheets&&L.count===0&&Ua(L,L.stylesheets),0<L.count||0<L.imgCount?function(q){var W=setTimeout(function(){if(L.stylesheets&&Ua(L,L.stylesheets),L.unsuspend){var ie=L.unsuspend;L.unsuspend=null,ie()}},6e4+U);0<L.imgBytes&&nc===0&&(nc=62500*im());var te=setTimeout(function(){if(L.waitingForImages=!1,L.count===0&&(L.stylesheets&&Ua(L,L.stylesheets),L.unsuspend)){var ie=L.unsuspend;L.unsuspend=null,ie()}},(L.imgBytes>nc?50:800)+U);return L.unsuspend=q,function(){L.unsuspend=null,clearTimeout(W),clearTimeout(te)}}:null}function za(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ua(this,this.stylesheets);else if(this.unsuspend){var L=this.unsuspend;this.unsuspend=null,L()}}}var Ha=null;function Ua(L,U){L.stylesheets=null,L.unsuspend!==null&&(L.count++,Ha=new Map,U.forEach(Cm,L),Ha=null,za.call(L))}function Cm(L,U){if(!(U.state.loading&4)){var q=Ha.get(L);if(q)var W=q.get(null);else{q=new Map,Ha.set(L,q);for(var te=L.querySelectorAll("link[data-precedence],style[data-precedence]"),ie=0;ie<te.length;ie++){var ue=te[ie];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(q.set(ue.dataset.precedence,ue),W=ue)}W&&q.set(null,W)}te=U.instance,ue=te.getAttribute("data-precedence"),ie=q.get(ue)||W,ie===W&&q.set(null,te),q.set(ue,te),this.count++,W=za.bind(this),te.addEventListener("load",W),te.addEventListener("error",W),ie?ie.parentNode.insertBefore(te,ie.nextSibling):(L=L.nodeType===9?L.head:L,L.insertBefore(te,L.firstChild)),U.state.loading|=4}}var Ts={$$typeof:ce,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function Tm(L,U,q,W,te,ie,ue,xe,Re){this.tag=1,this.containerInfo=L,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wa(0),this.hiddenUpdates=Wa(null),this.identifierPrefix=W,this.onUncaughtError=te,this.onCaughtError=ie,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Re,this.incompleteTransitions=new Map}function Kh(L,U,q,W,te,ie,ue,xe,Re,De,Ve,Xe){return L=new Tm(L,U,q,ue,Re,De,Ve,Xe,xe),U=1,ie===!0&&(U|=24),ie=mn(3,null,null,U),L.current=ie,ie.stateNode=L,U=ko(),U.refCount++,L.pooledCache=U,U.refCount++,ie.memoizedState={element:W,isDehydrated:q,cache:U},Bo(ie),L}function Qh(L){return L?(L=hi,L):hi}function Jh(L,U,q,W,te,ie){te=Qh(te),W.context===null?W.context=te:W.pendingContext=te,W=yr(U),W.payload={element:q},ie=ie===void 0?null:ie,ie!==null&&(W.callback=ie),q=xr(L,W,U),q!==null&&(dn(q,L,U),is(q,L,U))}function ed(L,U){if(L=L.memoizedState,L!==null&&L.dehydrated!==null){var q=L.retryLane;L.retryLane=q!==0&&q<U?q:U}}function rc(L,U){ed(L,U),(L=L.alternate)&&ed(L,U)}function td(L){if(L.tag===13||L.tag===31){var U=zr(L,67108864);U!==null&&dn(U,L,67108864),rc(L,67108864)}}function nd(L){if(L.tag===13||L.tag===31){var U=_n();U=Ka(U);var q=zr(L,U);q!==null&&dn(q,L,U),rc(L,U)}}var Fa=!0;function Am(L,U,q,W){var te=ge.T;ge.T=null;var ie=Se.p;try{Se.p=2,ic(L,U,q,W)}finally{Se.p=ie,ge.T=te}}function Rm(L,U,q,W){var te=ge.T;ge.T=null;var ie=Se.p;try{Se.p=8,ic(L,U,q,W)}finally{Se.p=ie,ge.T=te}}function ic(L,U,q,W){if(Fa){var te=sc(W);if(te===null)Gl(L,U,W,Ga,q),sd(L,W);else if(Mm(te,L,U,q,W))W.stopPropagation();else if(sd(L,W),U&4&&-1<$m.indexOf(L)){for(;te!==null;){var ie=ti(te);if(ie!==null)switch(ie.tag){case 3:if(ie=ie.stateNode,ie.current.memoizedState.isDehydrated){var ue=Or(ie.pendingLanes);if(ue!==0){var xe=ie;for(xe.pendingLanes|=2,xe.entangledLanes|=2;ue;){var Re=1<<31-nn(ue);xe.entanglements[1]|=Re,ue&=~Re}zn(ie),(vt&6)===0&&(Ca=ft()+500,_s(0))}}break;case 31:case 13:xe=zr(ie,2),xe!==null&&dn(xe,ie,2),Aa(),rc(ie,2)}if(ie=sc(W),ie===null&&Gl(L,U,W,Ga,q),ie===te)break;te=ie}te!==null&&W.stopPropagation()}else Gl(L,U,W,null,q)}}function sc(L){return L=ao(L),ac(L)}var Ga=null;function ac(L){if(Ga=null,L=ei(L),L!==null){var U=I(L);if(U===null)L=null;else{var q=U.tag;if(q===13){if(L=z(U),L!==null)return L;L=null}else if(q===31){if(L=F(U),L!==null)return L;L=null}else if(q===3){if(U.stateNode.current.memoizedState.isDehydrated)return U.tag===3?U.stateNode.containerInfo:null;L=null}else U!==L&&(L=null)}}return Ga=L,null}function rd(L){switch(L){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gt()){case Rt:return 2;case Ot:return 8;case kt:case cr:return 32;case Sn:return 268435456;default:return 32}default:return 32}}var oc=!1,$r=null,Mr=null,Nr=null,As=new Map,Rs=new Map,Pr=[],$m="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sd(L,U){switch(L){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":As.delete(U.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rs.delete(U.pointerId)}}function $s(L,U,q,W,te,ie){return L===null||L.nativeEvent!==ie?(L={blockedOn:U,domEventName:q,eventSystemFlags:W,nativeEvent:ie,targetContainers:[te]},U!==null&&(U=ti(U),U!==null&&td(U)),L):(L.eventSystemFlags|=W,U=L.targetContainers,te!==null&&U.indexOf(te)===-1&&U.push(te),L)}function Mm(L,U,q,W,te){switch(U){case"focusin":return $r=$s($r,L,U,q,W,te),!0;case"dragenter":return Mr=$s(Mr,L,U,q,W,te),!0;case"mouseover":return Nr=$s(Nr,L,U,q,W,te),!0;case"pointerover":var ie=te.pointerId;return As.set(ie,$s(As.get(ie)||null,L,U,q,W,te)),!0;case"gotpointercapture":return ie=te.pointerId,Rs.set(ie,$s(Rs.get(ie)||null,L,U,q,W,te)),!0}return!1}function ad(L){var U=ei(L.target);if(U!==null){var q=I(U);if(q!==null){if(U=q.tag,U===13){if(U=z(q),U!==null){L.blockedOn=U,xc(L.priority,function(){nd(q)});return}}else if(U===31){if(U=F(q),U!==null){L.blockedOn=U,xc(L.priority,function(){nd(q)});return}}else if(U===3&&q.stateNode.current.memoizedState.isDehydrated){L.blockedOn=q.tag===3?q.stateNode.containerInfo:null;return}}}L.blockedOn=null}function Va(L){if(L.blockedOn!==null)return!1;for(var U=L.targetContainers;0<U.length;){var q=sc(L.nativeEvent);if(q===null){q=L.nativeEvent;var W=new q.constructor(q.type,q);so=W,q.target.dispatchEvent(W),so=null}else return U=ti(q),U!==null&&td(U),L.blockedOn=q,!1;U.shift()}return!0}function od(L,U,q){Va(L)&&q.delete(U)}function Nm(){oc=!1,$r!==null&&Va($r)&&($r=null),Mr!==null&&Va(Mr)&&(Mr=null),Nr!==null&&Va(Nr)&&(Nr=null),As.forEach(od),Rs.forEach(od)}function qa(L,U){L.blockedOn===U&&(L.blockedOn=null,oc||(oc=!0,_.unstable_scheduleCallback(_.unstable_NormalPriority,Nm)))}var Za=null;function ld(L){Za!==L&&(Za=L,_.unstable_scheduleCallback(_.unstable_NormalPriority,function(){Za===L&&(Za=null);for(var U=0;U<L.length;U+=3){var q=L[U],W=L[U+1],te=L[U+2];if(typeof W!="function"){if(ac(W||q)===null)continue;break}var ie=ti(q);ie!==null&&(L.splice(U,3),U-=3,sl(ie,{pending:!0,data:te,method:q.method,action:W},W,te))}}))}function Di(L){function U(Re){return qa(Re,L)}$r!==null&&qa($r,L),Mr!==null&&qa(Mr,L),Nr!==null&&qa(Nr,L),As.forEach(U),Rs.forEach(U);for(var q=0;q<Pr.length;q++){var W=Pr[q];W.blockedOn===L&&(W.blockedOn=null)}for(;0<Pr.length&&(q=Pr[0],q.blockedOn===null);)ad(q),q.blockedOn===null&&Pr.shift();if(q=(L.ownerDocument||L).$$reactFormReplay,q!=null)for(W=0;W<q.length;W+=3){var te=q[W],ie=q[W+1],ue=te[an]||null;if(typeof ie=="function")ue||ld(q);else if(ue){var xe=null;if(ie&&ie.hasAttribute("formAction")){if(te=ie,ue=ie[an]||null)xe=ue.formAction;else if(ac(te)!==null)continue}else xe=ue.action;typeof xe=="function"?q[W+1]=xe:(q.splice(W,3),W-=3),ld(q)}}}function cd(){function L(ie){ie.canIntercept&&ie.info==="react-transition"&&ie.intercept({handler:function(){return new Promise(function(ue){return te=ue})},focusReset:"manual",scroll:"manual"})}function U(){te!==null&&(te(),te=null),W||setTimeout(q,20)}function q(){if(!W&&!navigation.transition){var ie=navigation.currentEntry;ie&&ie.url!=null&&navigation.navigate(ie.url,{state:ie.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var W=!1,te=null;return navigation.addEventListener("navigate",L),navigation.addEventListener("navigatesuccess",U),navigation.addEventListener("navigateerror",U),setTimeout(q,100),function(){W=!0,navigation.removeEventListener("navigate",L),navigation.removeEventListener("navigatesuccess",U),navigation.removeEventListener("navigateerror",U),te!==null&&(te(),te=null)}}}function lc(L){this._internalRoot=L}Ya.prototype.render=lc.prototype.render=function(L){var U=this._internalRoot;if(U===null)throw Error(P(409));var q=U.current,W=_n();Jh(q,W,L,U,null,null)},Ya.prototype.unmount=lc.prototype.unmount=function(){var L=this._internalRoot;if(L!==null){this._internalRoot=null;var U=L.containerInfo;Jh(L.current,2,null,L,null,null),Aa(),U[Jr]=null}};function Ya(L){this._internalRoot=L}Ya.prototype.unstable_scheduleHydration=function(L){if(L){var U=yc();L={blockedOn:null,target:L,priority:U};for(var q=0;q<Pr.length&&U!==0&&U<Pr[q].priority;q++);Pr.splice(q,0,L),q===0&&ad(L)}};var ud=T.version;if(ud!=="19.2.3")throw Error(P(527,ud,"19.2.3"));Se.findDOMNode=function(L){var U=L._reactInternals;if(U===void 0)throw typeof L.render=="function"?Error(P(188)):(L=Object.keys(L).join(","),Error(P(268,L)));return L=V(U),L=L!==null?Z(L):null,L=L===null?null:L.stateNode,L};var Pm={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ge,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xa.isDisabled&&Xa.supportsFiber)try{tn=Xa.inject(Pm),$t=Xa}catch{}}return reactDomClient_production.createRoot=function(L,U){if(!O(L))throw Error(P(299));var q=!1,W="",te=gf,ie=yf,ue=xf;return U!=null&&(U.unstable_strictMode===!0&&(q=!0),U.identifierPrefix!==void 0&&(W=U.identifierPrefix),U.onUncaughtError!==void 0&&(te=U.onUncaughtError),U.onCaughtError!==void 0&&(ie=U.onCaughtError),U.onRecoverableError!==void 0&&(ue=U.onRecoverableError)),U=Kh(L,1,!1,null,null,q,W,null,te,ie,ue,cd),L[Jr]=U.current,Fl(L),new lc(U)},reactDomClient_production.hydrateRoot=function(L,U,q){if(!O(L))throw Error(P(299));var W=!1,te="",ie=gf,ue=yf,xe=xf,Re=null;return q!=null&&(q.unstable_strictMode===!0&&(W=!0),q.identifierPrefix!==void 0&&(te=q.identifierPrefix),q.onUncaughtError!==void 0&&(ie=q.onUncaughtError),q.onCaughtError!==void 0&&(ue=q.onCaughtError),q.onRecoverableError!==void 0&&(xe=q.onRecoverableError),q.formState!==void 0&&(Re=q.formState)),U=Kh(L,1,!0,U,q??null,W,te,Re,ie,ue,xe,cd),U.context=Qh(null),q=U.current,W=_n(),W=Ka(W),te=yr(W),te.callback=null,xr(q,te,W),q=W,U.current.lanes=q,zi(U,q),zn(U),L[Jr]=U.current,Fl(L),new Ya(U)},reactDomClient_production.version="19.2.3",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(T){console.error(T)}}return _(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();function parseVersion(_){const T=_.split(".").map(Number);return{major:T[0]||0,minor:T[1]||0,patch:T[2]||0}}function compareVersions(_,T){return _.major!==T.major?_.major-T.major:_.minor!==T.minor?_.minor-T.minor:_.patch-T.patch}function isCompatible(_,T){return _.major===T.major&&compareVersions(_,T)>=0}function formatVersion(_){return`${_.major}.${_.minor}.${_.patch}`}class ModelRegistry{models=new Map;defaultModelName=null;constructor(){console.log("[Registry] Initializing")}register(T){const R=parseVersion(T.version),P=formatVersion(R),O=T;if(!this.models.has(T.id))this.models.set(T.id,{latestModel:O,versions:new Map([[P,O]])}),console.log(`[Registry] Registered new model: ${T.id} (v${P})`);else{const I=this.models.get(T.id);I.versions.set(P,O);const z=parseVersion(I.latestModel.version);(R.major>z.major||R.major===z.major&&R.minor>z.minor||R.major===z.major&&R.minor===z.minor&&R.patch>z.patch)&&(I.latestModel=O,console.log(`[Registry] Updated model ${T.id} to version ${P}`))}}setDefault(T){if(!this.models.has(T))throw new Error(`Cannot set default: model "${T}" is not registered`);this.defaultModelName=T}get(T){return this.models.get(T)?.latestModel}getVersion(T,R){return this.models.get(T)?.versions.get(R)}getModelNames(){return Array.from(this.models.keys())}getVersions(T){const R=this.models.get(T);return R?Array.from(R.versions.keys()):[]}getDefault(){return this.defaultModelName?this.get(this.defaultModelName):void 0}getDefaultName(){return this.defaultModelName}findCompatibleModel(T){const R=this.models.get(T.model);if(!R)return;const P=parseVersion(T.version);let O,I;for(const[z,F]of R.versions){const G=parseVersion(z);isCompatible(G,P)&&(!I||G.minor>I.minor||G.minor===I.minor&&G.patch>I.patch)&&(O=F,I=G)}return O}has(T){return this.models.has(T)}getAll(){return Array.from(this.models.values()).map(T=>T.latestModel)}}const modelRegistry=new ModelRegistry;class Vector2{constructor(T=0,R=0){this.x=T,this.y=R}static from(T){return new Vector2(T.x,T.y)}static zero(){return new Vector2(0,0)}static fromAngle(T){return new Vector2(Math.cos(T),Math.sin(T))}add(T){return new Vector2(this.x+T.x,this.y+T.y)}sub(T){return new Vector2(this.x-T.x,this.y-T.y)}scale(T){return new Vector2(this.x*T,this.y*T)}mult(T){return this.scale(T)}div(T){return T===0?(console.warn("Vector2.div: division by zero"),this):new Vector2(this.x/T,this.y/T)}negate(){return new Vector2(-this.x,-this.y)}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}magSq(){return this.x*this.x+this.y*this.y}normalize(){const T=this.mag();return T===0?this:new Vector2(this.x/T,this.y/T)}setMag(T){return this.normalize().scale(T)}limit(T){return this.magSq()>T*T?this.normalize().scale(T):this}dot(T){return this.x*T.x+this.y*T.y}cross(T){return this.x*T.y-this.y*T.x}dist(T){const R=this.x-T.x,P=this.y-T.y;return Math.sqrt(R*R+P*P)}distSq(T){const R=this.x-T.x,P=this.y-T.y;return R*R+P*P}heading(){return Math.atan2(this.y,this.x)}rotate(T){const R=Math.cos(T),P=Math.sin(T);return new Vector2(this.x*R-this.y*P,this.x*P+this.y*R)}lerp(T,R){return new Vector2(this.x+(T.x-this.x)*R,this.y+(T.y-this.y)*R)}equals(T){return this.x===T.x&&this.y===T.y}approxEquals(T,R=1e-10){return Math.abs(this.x-T.x)<R&&Math.abs(this.y-T.y)<R}copy(){return new Vector2(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toString(){return`Vector2(${this.x}, ${this.y})`}toArray(){return[this.x,this.y]}}var alea$1={exports:{}},alea=alea$1.exports,hasRequiredAlea;function requireAlea(){return hasRequiredAlea||(hasRequiredAlea=1,(function(_){(function(T,R,P){function O(G){var V=this,Z=F();V.next=function(){var Y=2091639*V.s0+V.c*23283064365386963e-26;return V.s0=V.s1,V.s1=V.s2,V.s2=Y-(V.c=Y|0)},V.c=1,V.s0=Z(" "),V.s1=Z(" "),V.s2=Z(" "),V.s0-=Z(G),V.s0<0&&(V.s0+=1),V.s1-=Z(G),V.s1<0&&(V.s1+=1),V.s2-=Z(G),V.s2<0&&(V.s2+=1),Z=null}function I(G,V){return V.c=G.c,V.s0=G.s0,V.s1=G.s1,V.s2=G.s2,V}function z(G,V){var Z=new O(G),Y=V&&V.state,Q=Z.next;return Q.int32=function(){return Z.next()*4294967296|0},Q.double=function(){return Q()+(Q()*2097152|0)*11102230246251565e-32},Q.quick=Q,Y&&(typeof Y=="object"&&I(Y,Z),Q.state=function(){return I(Z,{})}),Q}function F(){var G=4022871197,V=function(Z){Z=String(Z);for(var Y=0;Y<Z.length;Y++){G+=Z.charCodeAt(Y);var Q=.02519603282416938*G;G=Q>>>0,Q-=G,Q*=G,G=Q>>>0,Q-=G,G+=Q*4294967296}return(G>>>0)*23283064365386963e-26};return V}R&&R.exports?R.exports=z:this.alea=z})(alea,_)})(alea$1)),alea$1.exports}var xor128$1={exports:{}},xor128=xor128$1.exports,hasRequiredXor128;function requireXor128(){return hasRequiredXor128||(hasRequiredXor128=1,(function(_){(function(T,R,P){function O(F){var G=this,V="";G.x=0,G.y=0,G.z=0,G.w=0,G.next=function(){var Y=G.x^G.x<<11;return G.x=G.y,G.y=G.z,G.z=G.w,G.w^=G.w>>>19^Y^Y>>>8},F===(F|0)?G.x=F:V+=F;for(var Z=0;Z<V.length+64;Z++)G.x^=V.charCodeAt(Z)|0,G.next()}function I(F,G){return G.x=F.x,G.y=F.y,G.z=F.z,G.w=F.w,G}function z(F,G){var V=new O(F),Z=G&&G.state,Y=function(){return(V.next()>>>0)/4294967296};return Y.double=function(){do var Q=V.next()>>>11,J=(V.next()>>>0)/4294967296,ee=(Q+J)/(1<<21);while(ee===0);return ee},Y.int32=V.next,Y.quick=Y,Z&&(typeof Z=="object"&&I(Z,V),Y.state=function(){return I(V,{})}),Y}R&&R.exports?R.exports=z:this.xor128=z})(xor128,_)})(xor128$1)),xor128$1.exports}var xorwow$1={exports:{}},xorwow=xorwow$1.exports,hasRequiredXorwow;function requireXorwow(){return hasRequiredXorwow||(hasRequiredXorwow=1,(function(_){(function(T,R,P){function O(F){var G=this,V="";G.next=function(){var Y=G.x^G.x>>>2;return G.x=G.y,G.y=G.z,G.z=G.w,G.w=G.v,(G.d=G.d+362437|0)+(G.v=G.v^G.v<<4^(Y^Y<<1))|0},G.x=0,G.y=0,G.z=0,G.w=0,G.v=0,F===(F|0)?G.x=F:V+=F;for(var Z=0;Z<V.length+64;Z++)G.x^=V.charCodeAt(Z)|0,Z==V.length&&(G.d=G.x<<10^G.x>>>4),G.next()}function I(F,G){return G.x=F.x,G.y=F.y,G.z=F.z,G.w=F.w,G.v=F.v,G.d=F.d,G}function z(F,G){var V=new O(F),Z=G&&G.state,Y=function(){return(V.next()>>>0)/4294967296};return Y.double=function(){do var Q=V.next()>>>11,J=(V.next()>>>0)/4294967296,ee=(Q+J)/(1<<21);while(ee===0);return ee},Y.int32=V.next,Y.quick=Y,Z&&(typeof Z=="object"&&I(Z,V),Y.state=function(){return I(V,{})}),Y}R&&R.exports?R.exports=z:this.xorwow=z})(xorwow,_)})(xorwow$1)),xorwow$1.exports}var xorshift7$1={exports:{}},xorshift7=xorshift7$1.exports,hasRequiredXorshift7;function requireXorshift7(){return hasRequiredXorshift7||(hasRequiredXorshift7=1,(function(_){(function(T,R,P){function O(F){var G=this;G.next=function(){var Z=G.x,Y=G.i,Q,J;return Q=Z[Y],Q^=Q>>>7,J=Q^Q<<24,Q=Z[Y+1&7],J^=Q^Q>>>10,Q=Z[Y+3&7],J^=Q^Q>>>3,Q=Z[Y+4&7],J^=Q^Q<<7,Q=Z[Y+7&7],Q=Q^Q<<13,J^=Q^Q<<9,Z[Y]=J,G.i=Y+1&7,J};function V(Z,Y){var Q,J=[];if(Y===(Y|0))J[0]=Y;else for(Y=""+Y,Q=0;Q<Y.length;++Q)J[Q&7]=J[Q&7]<<15^Y.charCodeAt(Q)+J[Q+1&7]<<13;for(;J.length<8;)J.push(0);for(Q=0;Q<8&&J[Q]===0;++Q);for(Q==8?J[7]=-1:J[Q],Z.x=J,Z.i=0,Q=256;Q>0;--Q)Z.next()}V(G,F)}function I(F,G){return G.x=F.x.slice(),G.i=F.i,G}function z(F,G){F==null&&(F=+new Date);var V=new O(F),Z=G&&G.state,Y=function(){return(V.next()>>>0)/4294967296};return Y.double=function(){do var Q=V.next()>>>11,J=(V.next()>>>0)/4294967296,ee=(Q+J)/(1<<21);while(ee===0);return ee},Y.int32=V.next,Y.quick=Y,Z&&(Z.x&&I(Z,V),Y.state=function(){return I(V,{})}),Y}R&&R.exports?R.exports=z:this.xorshift7=z})(xorshift7,_)})(xorshift7$1)),xorshift7$1.exports}var xor4096$1={exports:{}},xor4096=xor4096$1.exports,hasRequiredXor4096;function requireXor4096(){return hasRequiredXor4096||(hasRequiredXor4096=1,(function(_){(function(T,R,P){function O(F){var G=this;G.next=function(){var Z=G.w,Y=G.X,Q=G.i,J,ee;return G.w=Z=Z+1640531527|0,ee=Y[Q+34&127],J=Y[Q=Q+1&127],ee^=ee<<13,J^=J<<17,ee^=ee>>>15,J^=J>>>12,ee=Y[Q]=ee^J,G.i=Q,ee+(Z^Z>>>16)|0};function V(Z,Y){var Q,J,ee,ne,se,oe=[],ae=128;for(Y===(Y|0)?(J=Y,Y=null):(Y=Y+"\0",J=0,ae=Math.max(ae,Y.length)),ee=0,ne=-32;ne<ae;++ne)Y&&(J^=Y.charCodeAt((ne+32)%Y.length)),ne===0&&(se=J),J^=J<<10,J^=J>>>15,J^=J<<4,J^=J>>>13,ne>=0&&(se=se+1640531527|0,Q=oe[ne&127]^=J+se,ee=Q==0?ee+1:0);for(ee>=128&&(oe[(Y&&Y.length||0)&127]=-1),ee=127,ne=512;ne>0;--ne)J=oe[ee+34&127],Q=oe[ee=ee+1&127],J^=J<<13,Q^=Q<<17,J^=J>>>15,Q^=Q>>>12,oe[ee]=J^Q;Z.w=se,Z.X=oe,Z.i=ee}V(G,F)}function I(F,G){return G.i=F.i,G.w=F.w,G.X=F.X.slice(),G}function z(F,G){F==null&&(F=+new Date);var V=new O(F),Z=G&&G.state,Y=function(){return(V.next()>>>0)/4294967296};return Y.double=function(){do var Q=V.next()>>>11,J=(V.next()>>>0)/4294967296,ee=(Q+J)/(1<<21);while(ee===0);return ee},Y.int32=V.next,Y.quick=Y,Z&&(Z.X&&I(Z,V),Y.state=function(){return I(V,{})}),Y}R&&R.exports?R.exports=z:this.xor4096=z})(xor4096,_)})(xor4096$1)),xor4096$1.exports}var tychei$1={exports:{}},tychei=tychei$1.exports,hasRequiredTychei;function requireTychei(){return hasRequiredTychei||(hasRequiredTychei=1,(function(_){(function(T,R,P){function O(F){var G=this,V="";G.next=function(){var Y=G.b,Q=G.c,J=G.d,ee=G.a;return Y=Y<<25^Y>>>7^Q,Q=Q-J|0,J=J<<24^J>>>8^ee,ee=ee-Y|0,G.b=Y=Y<<20^Y>>>12^Q,G.c=Q=Q-J|0,G.d=J<<16^Q>>>16^ee,G.a=ee-Y|0},G.a=0,G.b=0,G.c=-1640531527,G.d=1367130551,F===Math.floor(F)?(G.a=F/4294967296|0,G.b=F|0):V+=F;for(var Z=0;Z<V.length+20;Z++)G.b^=V.charCodeAt(Z)|0,G.next()}function I(F,G){return G.a=F.a,G.b=F.b,G.c=F.c,G.d=F.d,G}function z(F,G){var V=new O(F),Z=G&&G.state,Y=function(){return(V.next()>>>0)/4294967296};return Y.double=function(){do var Q=V.next()>>>11,J=(V.next()>>>0)/4294967296,ee=(Q+J)/(1<<21);while(ee===0);return ee},Y.int32=V.next,Y.quick=Y,Z&&(typeof Z=="object"&&I(Z,V),Y.state=function(){return I(V,{})}),Y}R&&R.exports?R.exports=z:this.tychei=z})(tychei,_)})(tychei$1)),tychei$1.exports}var seedrandom$3={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var seedrandom$2=seedrandom$3.exports,hasRequiredSeedrandom$1;function requireSeedrandom$1(){return hasRequiredSeedrandom$1||(hasRequiredSeedrandom$1=1,(function(_){(function(T,R,P){var O=256,I=6,z=52,F="random",G=P.pow(O,I),V=P.pow(2,z),Z=V*2,Y=O-1,Q;function J(le,pe,me){var he=[];pe=pe==!0?{entropy:!0}:pe||{};var fe=oe(se(pe.entropy?[le,ce(R)]:le??ae(),3),he),de=new ee(he),be=function(){for(var ye=de.g(I),Ce=G,ve=0;ye<V;)ye=(ye+ve)*O,Ce*=O,ve=de.g(1);for(;ye>=Z;)ye/=2,Ce/=2,ve>>>=1;return(ye+ve)/Ce};return be.int32=function(){return de.g(4)|0},be.quick=function(){return de.g(4)/4294967296},be.double=be,oe(ce(de.S),R),(pe.pass||me||function(ye,Ce,ve,Ee){return Ee&&(Ee.S&&ne(Ee,de),ye.state=function(){return ne(de,{})}),ve?(P[F]=ye,Ce):ye})(be,fe,"global"in pe?pe.global:this==P,pe.state)}function ee(le){var pe,me=le.length,he=this,fe=0,de=he.i=he.j=0,be=he.S=[];for(me||(le=[me++]);fe<O;)be[fe]=fe++;for(fe=0;fe<O;fe++)be[fe]=be[de=Y&de+le[fe%me]+(pe=be[fe])],be[de]=pe;(he.g=function(ye){for(var Ce,ve=0,Ee=he.i,we=he.j,ge=he.S;ye--;)Ce=ge[Ee=Y&Ee+1],ve=ve*O+ge[Y&(ge[Ee]=ge[we=Y&we+Ce])+(ge[we]=Ce)];return he.i=Ee,he.j=we,ve})(O)}function ne(le,pe){return pe.i=le.i,pe.j=le.j,pe.S=le.S.slice(),pe}function se(le,pe){var me=[],he=typeof le,fe;if(pe&&he=="object")for(fe in le)try{me.push(se(le[fe],pe-1))}catch{}return me.length?me:he=="string"?le:le+"\0"}function oe(le,pe){for(var me=le+"",he,fe=0;fe<me.length;)pe[Y&fe]=Y&(he^=pe[Y&fe]*19)+me.charCodeAt(fe++);return ce(pe)}function ae(){try{var le;return Q&&(le=Q.randomBytes)?le=le(O):(le=new Uint8Array(O),(T.crypto||T.msCrypto).getRandomValues(le)),ce(le)}catch{var pe=T.navigator,me=pe&&pe.plugins;return[+new Date,T,me,T.screen,ce(R)]}}function ce(le){return String.fromCharCode.apply(0,le)}if(oe(P.random(),R),_.exports){_.exports=J;try{Q=require$$0}catch{}}else P["seed"+F]=J})(typeof self<"u"?self:seedrandom$2,[],Math)})(seedrandom$3)),seedrandom$3.exports}var seedrandom$1,hasRequiredSeedrandom;function requireSeedrandom(){if(hasRequiredSeedrandom)return seedrandom$1;hasRequiredSeedrandom=1;var _=requireAlea(),T=requireXor128(),R=requireXorwow(),P=requireXorshift7(),O=requireXor4096(),I=requireTychei(),z=requireSeedrandom$1();return z.alea=_,z.xor128=T,z.xorwow=R,z.xorshift7=P,z.xor4096=O,z.tychei=I,seedrandom$1=z,seedrandom$1}var seedrandomExports=requireSeedrandom();const seedrandom=getDefaultExportFromCjs(seedrandomExports);class SeededRandom{rng;constructor(T=0){this.rng=seedrandom(String(T))}reset(T){this.rng=seedrandom(String(T))}random(T,R){const P=this.rng();return T===void 0?P:R===void 0?P*T:T+P*(R-T)}randomInt(T,R){return Math.floor(R===void 0?this.random(T):this.random(T,R))}randomBool(T=.5){return this.rng()<T}gaussian(){let T,R;do T=this.rng(),R=this.rng();while(T===0);return Math.sqrt(-2*Math.log(T))*Math.cos(2*Math.PI*R)}randomGaussian(T=0,R=1){return T+R*this.gaussian()}choice(T){if(T.length===0)throw new Error("Cannot pick from empty array");return T[Math.floor(this.rng()*T.length)]}shuffle(T){for(let R=T.length-1;R>0;R--){const P=Math.floor(this.rng()*(R+1));[T[R],T[P]]=[T[P],T[R]]}return T}}function shapeCenter(_,T){return _===0&&T===0?new Vector2(0,0):T===0?new Vector2(0,0):new Vector2(0,1/T)}class BasalGeometry{curvedToCartesian(T,R){const P=this.getPointAtArcLength(T),O=this.getNormal(P);return P.add(O.scale(R))}}class StraightLineGeometry extends BasalGeometry{type="line";curvature_1=0;curvature_2=0;perimeter=1/0;projectPoint(T){return new Vector2(T.x,0)}getArcLength(T){return T.x}getPointAtArcLength(T){return new Vector2(T,0)}getNormal(T){return new Vector2(0,1)}}class CircularGeometry extends BasalGeometry{constructor(T,R){super(),this.curvature_1=T,this.curvature_2=R,this.radius=Math.abs(1/T),this.perimeter=2*Math.PI*this.radius,this.dir=-Math.sign(R),this.center=new Vector2(0,1/R)}type="circle";center;radius;perimeter;dir;projectPoint(T){const R=T.sub(this.center);return this.center.add(R.setMag(this.radius))}getArcLength(T){const R=T.sub(this.center);return Math.atan2(this.dir*R.x,this.dir*R.y)*this.radius}getPointAtArcLength(T){const R=T/this.radius;return new Vector2(this.center.x+this.dir*this.radius*Math.cos(R),this.center.y+this.dir*this.radius*Math.sin(R))}getNormal(T){return this.center.sub(T).setMag(Math.sign(this.curvature_2))}}class EllipticalGeometry extends BasalGeometry{constructor(T,R,P=360){super(),this.curvature_1=T,this.curvature_2=R,this.a=Math.abs(1/T),this.b=Math.abs(1/R),this.dir=-Math.sign(R),this.center=new Vector2(0,1/R),this.numPoints=P,this.points=this.discretizeCurve(),this.perimeter=this.points[this.points.length-1].arcLength}type="ellipse";center;a;b;dir;perimeter;points;numPoints;discretizeCurve(){const T=[];let R=0;for(let P=0;P<=this.numPoints;P++){const O=P/this.numPoints*2*Math.PI,I=this.center.x+this.dir*this.a*Math.cos(O),z=this.center.y+this.dir*this.b*Math.sin(O),F=new Vector2(I,z);if(P>0){const Q=T[P-1].position,J=F.dist(Q);R+=J}const G=F.sub(this.center).scale(this.dir),V=2*G.x/(this.a*this.a),Z=2*G.y/(this.b*this.b),Y=new Vector2(V,Z).setMag(Math.sign(this.curvature_2));T.push({position:F,arcLength:R,theta:O,normal:Y})}return T}findBracket(T,R){let P=0,O=this.points.length-1;for(;O-P>1;){const I=Math.floor((P+O)/2);R(this.points[I])<T?P=I:O=I}return[P,O]}interpolate(T,R,P,O){const I=O(T),z=O(R),F=(P-I)/(z-I);return{position:T.position.lerp(R.position,F),arcLength:T.arcLength+F*(R.arcLength-T.arcLength),theta:T.theta+F*(R.theta-T.theta),normal:T.normal.lerp(R.normal,F).normalize()}}projectPoint(T){let R=1/0,P=0;for(let J=0;J<this.points.length;J++){const ee=T.distSq(this.points[J].position);ee<R&&(R=ee,P=J)}const O=P===0?this.points.length-1:P-1,I=P===this.points.length-1?0:P+1,z=this.points[P].position,F=this.points[O].position,G=this.points[I].position,V=this.projectOntoSegment(T,F,z),Z=T.distSq(V),Y=this.projectOntoSegment(T,z,G),Q=T.distSq(Y);return Z<Q?V:Y}projectOntoSegment(T,R,P){const O=P.sub(R),I=T.sub(R),z=O.magSq();if(z<1e-10)return R;const F=Math.max(0,Math.min(1,I.dot(O)/z));return R.add(O.scale(F))}getArcLength(T){const R=this.projectPoint(T);let P=1/0,O=0;for(let I=0;I<this.points.length;I++){const z=R.distSq(this.points[I].position);z<P&&(P=z,O=I)}return this.points[O].arcLength}getPointAtArcLength(T){const R=(T%this.perimeter+this.perimeter)%this.perimeter,[P,O]=this.findBracket(R,z=>z.arcLength);return this.interpolate(this.points[P],this.points[O],R,z=>z.arcLength).position}getNormal(T){let R=1/0,P=0;for(let O=0;O<this.points.length;O++){const I=T.distSq(this.points[O].position);I<R&&(R=I,P=O)}return this.points[P].normal}}function createBasalGeometry(_,T,R=360){return _===0&&T===0?new StraightLineGeometry:Math.abs(_-T)<1e-10?new CircularGeometry(_,T):new EllipticalGeometry(_,T,R)}var CellPhase=(_=>(_[_.G1=0]="G1",_[_.G2=1]="G2",_[_.Mitosis=2]="Mitosis",_[_.Division=3]="Division",_))(CellPhase||{});function createInitialEHTState(_="default"){return{cells:[],ap_links:[],ba_links:[],t:0,step_count:0,basalGeometry:new StraightLineGeometry,rngSeed:_}}function $constructor(_,T,R){function P(F,G){if(F._zod||Object.defineProperty(F,"_zod",{value:{def:G,constr:z,traits:new Set},enumerable:!1}),F._zod.traits.has(_))return;F._zod.traits.add(_),T(F,G);const V=z.prototype,Z=Object.keys(V);for(let Y=0;Y<Z.length;Y++){const Q=Z[Y];Q in F||(F[Q]=V[Q].bind(F))}}const O=R?.Parent??Object;class I extends O{}Object.defineProperty(I,"name",{value:_});function z(F){var G;const V=R?.Parent?new I:this;P(V,F),(G=V._zod).deferred??(G.deferred=[]);for(const Z of V._zod.deferred)Z();return V}return Object.defineProperty(z,"init",{value:P}),Object.defineProperty(z,Symbol.hasInstance,{value:F=>R?.Parent&&F instanceof R.Parent?!0:F?._zod?.traits?.has(_)}),Object.defineProperty(z,"name",{value:_}),z}class $ZodAsyncError extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class $ZodEncodeError extends Error{constructor(T){super(`Encountered unidirectional transform during encode: ${T}`),this.name="ZodEncodeError"}}const globalConfig={};function config(_){return globalConfig}function getEnumValues(_){const T=Object.values(_).filter(P=>typeof P=="number");return Object.entries(_).filter(([P,O])=>T.indexOf(+P)===-1).map(([P,O])=>O)}function jsonStringifyReplacer(_,T){return typeof T=="bigint"?T.toString():T}function cached(_){return{get value(){{const T=_();return Object.defineProperty(this,"value",{value:T}),T}}}}function nullish(_){return _==null}function cleanRegex(_){const T=_.startsWith("^")?1:0,R=_.endsWith("$")?_.length-1:_.length;return _.slice(T,R)}function floatSafeRemainder(_,T){const R=(_.toString().split(".")[1]||"").length,P=T.toString();let O=(P.split(".")[1]||"").length;if(O===0&&/\d?e-\d?/.test(P)){const G=P.match(/\d?e-(\d?)/);G?.[1]&&(O=Number.parseInt(G[1]))}const I=R>O?R:O,z=Number.parseInt(_.toFixed(I).replace(".","")),F=Number.parseInt(T.toFixed(I).replace(".",""));return z%F/10**I}const EVALUATING=Symbol("evaluating");function defineLazy(_,T,R){let P;Object.defineProperty(_,T,{get(){if(P!==EVALUATING)return P===void 0&&(P=EVALUATING,P=R()),P},set(O){Object.defineProperty(_,T,{value:O})},configurable:!0})}function assignProp(_,T,R){Object.defineProperty(_,T,{value:R,writable:!0,enumerable:!0,configurable:!0})}function mergeDefs(..._){const T={};for(const R of _){const P=Object.getOwnPropertyDescriptors(R);Object.assign(T,P)}return Object.defineProperties({},T)}function esc(_){return JSON.stringify(_)}function slugify(_){return _.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const captureStackTrace="captureStackTrace"in Error?Error.captureStackTrace:(..._)=>{};function isObject$2(_){return typeof _=="object"&&_!==null&&!Array.isArray(_)}const allowsEval=cached(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const _=Function;return new _(""),!0}catch{return!1}});function isPlainObject$1(_){if(isObject$2(_)===!1)return!1;const T=_.constructor;if(T===void 0||typeof T!="function")return!0;const R=T.prototype;return!(isObject$2(R)===!1||Object.prototype.hasOwnProperty.call(R,"isPrototypeOf")===!1)}function shallowClone(_){return isPlainObject$1(_)?{..._}:Array.isArray(_)?[..._]:_}const propertyKeyTypes=new Set(["string","number","symbol"]);function escapeRegex(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function clone(_,T,R){const P=new _._zod.constr(T??_._zod.def);return(!T||R?.parent)&&(P._zod.parent=_),P}function normalizeParams(_){const T=_;if(!T)return{};if(typeof T=="string")return{error:()=>T};if(T?.message!==void 0){if(T?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");T.error=T.message}return delete T.message,typeof T.error=="string"?{...T,error:()=>T.error}:T}function optionalKeys(_){return Object.keys(_).filter(T=>_[T]._zod.optin==="optional"&&_[T]._zod.optout==="optional")}const NUMBER_FORMAT_RANGES={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function pick(_,T){const R=_._zod.def,P=R.checks;if(P&&P.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const I=mergeDefs(_._zod.def,{get shape(){const z={};for(const F in T){if(!(F in R.shape))throw new Error(`Unrecognized key: "${F}"`);T[F]&&(z[F]=R.shape[F])}return assignProp(this,"shape",z),z},checks:[]});return clone(_,I)}function omit(_,T){const R=_._zod.def,P=R.checks;if(P&&P.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const I=mergeDefs(_._zod.def,{get shape(){const z={..._._zod.def.shape};for(const F in T){if(!(F in R.shape))throw new Error(`Unrecognized key: "${F}"`);T[F]&&delete z[F]}return assignProp(this,"shape",z),z},checks:[]});return clone(_,I)}function extend$1(_,T){if(!isPlainObject$1(T))throw new Error("Invalid input to extend: expected a plain object");const R=_._zod.def.checks;if(R&&R.length>0){const I=_._zod.def.shape;for(const z in T)if(Object.getOwnPropertyDescriptor(I,z)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const O=mergeDefs(_._zod.def,{get shape(){const I={..._._zod.def.shape,...T};return assignProp(this,"shape",I),I}});return clone(_,O)}function safeExtend(_,T){if(!isPlainObject$1(T))throw new Error("Invalid input to safeExtend: expected a plain object");const R=mergeDefs(_._zod.def,{get shape(){const P={..._._zod.def.shape,...T};return assignProp(this,"shape",P),P}});return clone(_,R)}function merge$2(_,T){const R=mergeDefs(_._zod.def,{get shape(){const P={..._._zod.def.shape,...T._zod.def.shape};return assignProp(this,"shape",P),P},get catchall(){return T._zod.def.catchall},checks:[]});return clone(_,R)}function partial(_,T,R){const O=T._zod.def.checks;if(O&&O.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const z=mergeDefs(T._zod.def,{get shape(){const F=T._zod.def.shape,G={...F};if(R)for(const V in R){if(!(V in F))throw new Error(`Unrecognized key: "${V}"`);R[V]&&(G[V]=_?new _({type:"optional",innerType:F[V]}):F[V])}else for(const V in F)G[V]=_?new _({type:"optional",innerType:F[V]}):F[V];return assignProp(this,"shape",G),G},checks:[]});return clone(T,z)}function required(_,T,R){const P=mergeDefs(T._zod.def,{get shape(){const O=T._zod.def.shape,I={...O};if(R)for(const z in R){if(!(z in I))throw new Error(`Unrecognized key: "${z}"`);R[z]&&(I[z]=new _({type:"nonoptional",innerType:O[z]}))}else for(const z in O)I[z]=new _({type:"nonoptional",innerType:O[z]});return assignProp(this,"shape",I),I}});return clone(T,P)}function aborted(_,T=0){if(_.aborted===!0)return!0;for(let R=T;R<_.issues.length;R++)if(_.issues[R]?.continue!==!0)return!0;return!1}function prefixIssues(_,T){return T.map(R=>{var P;return(P=R).path??(P.path=[]),R.path.unshift(_),R})}function unwrapMessage(_){return typeof _=="string"?_:_?.message}function finalizeIssue(_,T,R){const P={..._,path:_.path??[]};if(!_.message){const O=unwrapMessage(_.inst?._zod.def?.error?.(_))??unwrapMessage(T?.error?.(_))??unwrapMessage(R.customError?.(_))??unwrapMessage(R.localeError?.(_))??"Invalid input";P.message=O}return delete P.inst,delete P.continue,T?.reportInput||delete P.input,P}function getLengthableOrigin(_){return Array.isArray(_)?"array":typeof _=="string"?"string":"unknown"}function issue(..._){const[T,R,P]=_;return typeof T=="string"?{message:T,code:"custom",input:R,inst:P}:{...T}}const initializer$2=(_,T)=>{_.name="$ZodError",Object.defineProperty(_,"_zod",{value:_._zod,enumerable:!1}),Object.defineProperty(_,"issues",{value:T,enumerable:!1}),_.message=JSON.stringify(T,jsonStringifyReplacer,2),Object.defineProperty(_,"toString",{value:()=>_.message,enumerable:!1})},$ZodError=$constructor("$ZodError",initializer$2),$ZodRealError=$constructor("$ZodError",initializer$2,{Parent:Error});function flattenError(_,T=R=>R.message){const R={},P=[];for(const O of _.issues)O.path.length>0?(R[O.path[0]]=R[O.path[0]]||[],R[O.path[0]].push(T(O))):P.push(T(O));return{formErrors:P,fieldErrors:R}}function formatError(_,T=R=>R.message){const R={_errors:[]},P=O=>{for(const I of O.issues)if(I.code==="invalid_union"&&I.errors.length)I.errors.map(z=>P({issues:z}));else if(I.code==="invalid_key")P({issues:I.issues});else if(I.code==="invalid_element")P({issues:I.issues});else if(I.path.length===0)R._errors.push(T(I));else{let z=R,F=0;for(;F<I.path.length;){const G=I.path[F];F===I.path.length-1?(z[G]=z[G]||{_errors:[]},z[G]._errors.push(T(I))):z[G]=z[G]||{_errors:[]},z=z[G],F++}}};return P(_),R}const _parse=_=>(T,R,P,O)=>{const I=P?Object.assign(P,{async:!1}):{async:!1},z=T._zod.run({value:R,issues:[]},I);if(z instanceof Promise)throw new $ZodAsyncError;if(z.issues.length){const F=new(O?.Err??_)(z.issues.map(G=>finalizeIssue(G,I,config())));throw captureStackTrace(F,O?.callee),F}return z.value},_parseAsync=_=>async(T,R,P,O)=>{const I=P?Object.assign(P,{async:!0}):{async:!0};let z=T._zod.run({value:R,issues:[]},I);if(z instanceof Promise&&(z=await z),z.issues.length){const F=new(O?.Err??_)(z.issues.map(G=>finalizeIssue(G,I,config())));throw captureStackTrace(F,O?.callee),F}return z.value},_safeParse=_=>(T,R,P)=>{const O=P?{...P,async:!1}:{async:!1},I=T._zod.run({value:R,issues:[]},O);if(I instanceof Promise)throw new $ZodAsyncError;return I.issues.length?{success:!1,error:new(_??$ZodError)(I.issues.map(z=>finalizeIssue(z,O,config())))}:{success:!0,data:I.value}},safeParse$1=_safeParse($ZodRealError),_safeParseAsync=_=>async(T,R,P)=>{const O=P?Object.assign(P,{async:!0}):{async:!0};let I=T._zod.run({value:R,issues:[]},O);return I instanceof Promise&&(I=await I),I.issues.length?{success:!1,error:new _(I.issues.map(z=>finalizeIssue(z,O,config())))}:{success:!0,data:I.value}},safeParseAsync$1=_safeParseAsync($ZodRealError),_encode=_=>(T,R,P)=>{const O=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return _parse(_)(T,R,O)},_decode=_=>(T,R,P)=>_parse(_)(T,R,P),_encodeAsync=_=>async(T,R,P)=>{const O=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return _parseAsync(_)(T,R,O)},_decodeAsync=_=>async(T,R,P)=>_parseAsync(_)(T,R,P),_safeEncode=_=>(T,R,P)=>{const O=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return _safeParse(_)(T,R,O)},_safeDecode=_=>(T,R,P)=>_safeParse(_)(T,R,P),_safeEncodeAsync=_=>async(T,R,P)=>{const O=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return _safeParseAsync(_)(T,R,O)},_safeDecodeAsync=_=>async(T,R,P)=>_safeParseAsync(_)(T,R,P),cuid=/^[cC][^\s-]{8,}$/,cuid2=/^[0-9a-z]+$/,ulid=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,xid=/^[0-9a-vA-V]{20}$/,ksuid=/^[A-Za-z0-9]{27}$/,nanoid=/^[a-zA-Z0-9_-]{21}$/,duration$1=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,guid=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,uuid=_=>_?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${_}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,email=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,_emoji$1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function emoji(){return new RegExp(_emoji$1,"u")}const ipv4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,cidrv4=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,cidrv6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,base64url=/^[A-Za-z0-9_-]*$/,e164=/^\+[1-9]\d{6,14}$/,dateSource="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",date$3=new RegExp(`^${dateSource}$`);function timeSource(_){const T="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof _.precision=="number"?_.precision===-1?`${T}`:_.precision===0?`${T}:[0-5]\\d`:`${T}:[0-5]\\d\\.\\d{${_.precision}}`:`${T}(?::[0-5]\\d(?:\\.\\d+)?)?`}function time$2(_){return new RegExp(`^${timeSource(_)}$`)}function datetime$1(_){const T=timeSource({precision:_.precision}),R=["Z"];_.local&&R.push(""),_.offset&&R.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const P=`${T}(?:${R.join("|")})`;return new RegExp(`^${dateSource}T(?:${P})$`)}const string$2=_=>{const T=_?`[\\s\\S]{${_?.minimum??0},${_?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${T}$`)},integer=/^-?\d+$/,number$6=/^-?\d+(?:\.\d+)?$/,boolean$1=/^(?:true|false)$/i,lowercase=/^[^A-Z]*$/,uppercase=/^[^a-z]*$/,$ZodCheck=$constructor("$ZodCheck",(_,T)=>{var R;_._zod??(_._zod={}),_._zod.def=T,(R=_._zod).onattach??(R.onattach=[])}),numericOriginMap={number:"number",bigint:"bigint",object:"date"},$ZodCheckLessThan=$constructor("$ZodCheckLessThan",(_,T)=>{$ZodCheck.init(_,T);const R=numericOriginMap[typeof T.value];_._zod.onattach.push(P=>{const O=P._zod.bag,I=(T.inclusive?O.maximum:O.exclusiveMaximum)??Number.POSITIVE_INFINITY;T.value<I&&(T.inclusive?O.maximum=T.value:O.exclusiveMaximum=T.value)}),_._zod.check=P=>{(T.inclusive?P.value<=T.value:P.value<T.value)||P.issues.push({origin:R,code:"too_big",maximum:typeof T.value=="object"?T.value.getTime():T.value,input:P.value,inclusive:T.inclusive,inst:_,continue:!T.abort})}}),$ZodCheckGreaterThan=$constructor("$ZodCheckGreaterThan",(_,T)=>{$ZodCheck.init(_,T);const R=numericOriginMap[typeof T.value];_._zod.onattach.push(P=>{const O=P._zod.bag,I=(T.inclusive?O.minimum:O.exclusiveMinimum)??Number.NEGATIVE_INFINITY;T.value>I&&(T.inclusive?O.minimum=T.value:O.exclusiveMinimum=T.value)}),_._zod.check=P=>{(T.inclusive?P.value>=T.value:P.value>T.value)||P.issues.push({origin:R,code:"too_small",minimum:typeof T.value=="object"?T.value.getTime():T.value,input:P.value,inclusive:T.inclusive,inst:_,continue:!T.abort})}}),$ZodCheckMultipleOf=$constructor("$ZodCheckMultipleOf",(_,T)=>{$ZodCheck.init(_,T),_._zod.onattach.push(R=>{var P;(P=R._zod.bag).multipleOf??(P.multipleOf=T.value)}),_._zod.check=R=>{if(typeof R.value!=typeof T.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof R.value=="bigint"?R.value%T.value===BigInt(0):floatSafeRemainder(R.value,T.value)===0)||R.issues.push({origin:typeof R.value,code:"not_multiple_of",divisor:T.value,input:R.value,inst:_,continue:!T.abort})}}),$ZodCheckNumberFormat=$constructor("$ZodCheckNumberFormat",(_,T)=>{$ZodCheck.init(_,T),T.format=T.format||"float64";const R=T.format?.includes("int"),P=R?"int":"number",[O,I]=NUMBER_FORMAT_RANGES[T.format];_._zod.onattach.push(z=>{const F=z._zod.bag;F.format=T.format,F.minimum=O,F.maximum=I,R&&(F.pattern=integer)}),_._zod.check=z=>{const F=z.value;if(R){if(!Number.isInteger(F)){z.issues.push({expected:P,format:T.format,code:"invalid_type",continue:!1,input:F,inst:_});return}if(!Number.isSafeInteger(F)){F>0?z.issues.push({input:F,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:_,origin:P,inclusive:!0,continue:!T.abort}):z.issues.push({input:F,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:_,origin:P,inclusive:!0,continue:!T.abort});return}}F<O&&z.issues.push({origin:"number",input:F,code:"too_small",minimum:O,inclusive:!0,inst:_,continue:!T.abort}),F>I&&z.issues.push({origin:"number",input:F,code:"too_big",maximum:I,inclusive:!0,inst:_,continue:!T.abort})}}),$ZodCheckMaxLength=$constructor("$ZodCheckMaxLength",(_,T)=>{var R;$ZodCheck.init(_,T),(R=_._zod.def).when??(R.when=P=>{const O=P.value;return!nullish(O)&&O.length!==void 0}),_._zod.onattach.push(P=>{const O=P._zod.bag.maximum??Number.POSITIVE_INFINITY;T.maximum<O&&(P._zod.bag.maximum=T.maximum)}),_._zod.check=P=>{const O=P.value;if(O.length<=T.maximum)return;const z=getLengthableOrigin(O);P.issues.push({origin:z,code:"too_big",maximum:T.maximum,inclusive:!0,input:O,inst:_,continue:!T.abort})}}),$ZodCheckMinLength=$constructor("$ZodCheckMinLength",(_,T)=>{var R;$ZodCheck.init(_,T),(R=_._zod.def).when??(R.when=P=>{const O=P.value;return!nullish(O)&&O.length!==void 0}),_._zod.onattach.push(P=>{const O=P._zod.bag.minimum??Number.NEGATIVE_INFINITY;T.minimum>O&&(P._zod.bag.minimum=T.minimum)}),_._zod.check=P=>{const O=P.value;if(O.length>=T.minimum)return;const z=getLengthableOrigin(O);P.issues.push({origin:z,code:"too_small",minimum:T.minimum,inclusive:!0,input:O,inst:_,continue:!T.abort})}}),$ZodCheckLengthEquals=$constructor("$ZodCheckLengthEquals",(_,T)=>{var R;$ZodCheck.init(_,T),(R=_._zod.def).when??(R.when=P=>{const O=P.value;return!nullish(O)&&O.length!==void 0}),_._zod.onattach.push(P=>{const O=P._zod.bag;O.minimum=T.length,O.maximum=T.length,O.length=T.length}),_._zod.check=P=>{const O=P.value,I=O.length;if(I===T.length)return;const z=getLengthableOrigin(O),F=I>T.length;P.issues.push({origin:z,...F?{code:"too_big",maximum:T.length}:{code:"too_small",minimum:T.length},inclusive:!0,exact:!0,input:P.value,inst:_,continue:!T.abort})}}),$ZodCheckStringFormat=$constructor("$ZodCheckStringFormat",(_,T)=>{var R,P;$ZodCheck.init(_,T),_._zod.onattach.push(O=>{const I=O._zod.bag;I.format=T.format,T.pattern&&(I.patterns??(I.patterns=new Set),I.patterns.add(T.pattern))}),T.pattern?(R=_._zod).check??(R.check=O=>{T.pattern.lastIndex=0,!T.pattern.test(O.value)&&O.issues.push({origin:"string",code:"invalid_format",format:T.format,input:O.value,...T.pattern?{pattern:T.pattern.toString()}:{},inst:_,continue:!T.abort})}):(P=_._zod).check??(P.check=()=>{})}),$ZodCheckRegex=$constructor("$ZodCheckRegex",(_,T)=>{$ZodCheckStringFormat.init(_,T),_._zod.check=R=>{T.pattern.lastIndex=0,!T.pattern.test(R.value)&&R.issues.push({origin:"string",code:"invalid_format",format:"regex",input:R.value,pattern:T.pattern.toString(),inst:_,continue:!T.abort})}}),$ZodCheckLowerCase=$constructor("$ZodCheckLowerCase",(_,T)=>{T.pattern??(T.pattern=lowercase),$ZodCheckStringFormat.init(_,T)}),$ZodCheckUpperCase=$constructor("$ZodCheckUpperCase",(_,T)=>{T.pattern??(T.pattern=uppercase),$ZodCheckStringFormat.init(_,T)}),$ZodCheckIncludes=$constructor("$ZodCheckIncludes",(_,T)=>{$ZodCheck.init(_,T);const R=escapeRegex(T.includes),P=new RegExp(typeof T.position=="number"?`^.{${T.position}}${R}`:R);T.pattern=P,_._zod.onattach.push(O=>{const I=O._zod.bag;I.patterns??(I.patterns=new Set),I.patterns.add(P)}),_._zod.check=O=>{O.value.includes(T.includes,T.position)||O.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:T.includes,input:O.value,inst:_,continue:!T.abort})}}),$ZodCheckStartsWith=$constructor("$ZodCheckStartsWith",(_,T)=>{$ZodCheck.init(_,T);const R=new RegExp(`^${escapeRegex(T.prefix)}.*`);T.pattern??(T.pattern=R),_._zod.onattach.push(P=>{const O=P._zod.bag;O.patterns??(O.patterns=new Set),O.patterns.add(R)}),_._zod.check=P=>{P.value.startsWith(T.prefix)||P.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:T.prefix,input:P.value,inst:_,continue:!T.abort})}}),$ZodCheckEndsWith=$constructor("$ZodCheckEndsWith",(_,T)=>{$ZodCheck.init(_,T);const R=new RegExp(`.*${escapeRegex(T.suffix)}$`);T.pattern??(T.pattern=R),_._zod.onattach.push(P=>{const O=P._zod.bag;O.patterns??(O.patterns=new Set),O.patterns.add(R)}),_._zod.check=P=>{P.value.endsWith(T.suffix)||P.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:T.suffix,input:P.value,inst:_,continue:!T.abort})}}),$ZodCheckOverwrite=$constructor("$ZodCheckOverwrite",(_,T)=>{$ZodCheck.init(_,T),_._zod.check=R=>{R.value=T.tx(R.value)}});class Doc{constructor(T=[]){this.content=[],this.indent=0,this&&(this.args=T)}indented(T){this.indent+=1,T(this),this.indent-=1}write(T){if(typeof T=="function"){T(this,{execution:"sync"}),T(this,{execution:"async"});return}const P=T.split(`
`).filter(z=>z),O=Math.min(...P.map(z=>z.length-z.trimStart().length)),I=P.map(z=>z.slice(O)).map(z=>" ".repeat(this.indent*2)+z);for(const z of I)this.content.push(z)}compile(){const T=Function,R=this?.args,O=[...(this?.content??[""]).map(I=>`  ${I}`)];return new T(...R,O.join(`
`))}}const version={major:4,minor:3,patch:5},$ZodType=$constructor("$ZodType",(_,T)=>{var R;_??(_={}),_._zod.def=T,_._zod.bag=_._zod.bag||{},_._zod.version=version;const P=[..._._zod.def.checks??[]];_._zod.traits.has("$ZodCheck")&&P.unshift(_);for(const O of P)for(const I of O._zod.onattach)I(_);if(P.length===0)(R=_._zod).deferred??(R.deferred=[]),_._zod.deferred?.push(()=>{_._zod.run=_._zod.parse});else{const O=(z,F,G)=>{let V=aborted(z),Z;for(const Y of F){if(Y._zod.def.when){if(!Y._zod.def.when(z))continue}else if(V)continue;const Q=z.issues.length,J=Y._zod.check(z);if(J instanceof Promise&&G?.async===!1)throw new $ZodAsyncError;if(Z||J instanceof Promise)Z=(Z??Promise.resolve()).then(async()=>{await J,z.issues.length!==Q&&(V||(V=aborted(z,Q)))});else{if(z.issues.length===Q)continue;V||(V=aborted(z,Q))}}return Z?Z.then(()=>z):z},I=(z,F,G)=>{if(aborted(z))return z.aborted=!0,z;const V=O(F,P,G);if(V instanceof Promise){if(G.async===!1)throw new $ZodAsyncError;return V.then(Z=>_._zod.parse(Z,G))}return _._zod.parse(V,G)};_._zod.run=(z,F)=>{if(F.skipChecks)return _._zod.parse(z,F);if(F.direction==="backward"){const V=_._zod.parse({value:z.value,issues:[]},{...F,skipChecks:!0});return V instanceof Promise?V.then(Z=>I(Z,z,F)):I(V,z,F)}const G=_._zod.parse(z,F);if(G instanceof Promise){if(F.async===!1)throw new $ZodAsyncError;return G.then(V=>O(V,P,F))}return O(G,P,F)}}defineLazy(_,"~standard",()=>({validate:O=>{try{const I=safeParse$1(_,O);return I.success?{value:I.data}:{issues:I.error?.issues}}catch{return safeParseAsync$1(_,O).then(z=>z.success?{value:z.data}:{issues:z.error?.issues})}},vendor:"zod",version:1}))}),$ZodString=$constructor("$ZodString",(_,T)=>{$ZodType.init(_,T),_._zod.pattern=[..._?._zod.bag?.patterns??[]].pop()??string$2(_._zod.bag),_._zod.parse=(R,P)=>{if(T.coerce)try{R.value=String(R.value)}catch{}return typeof R.value=="string"||R.issues.push({expected:"string",code:"invalid_type",input:R.value,inst:_}),R}}),$ZodStringFormat=$constructor("$ZodStringFormat",(_,T)=>{$ZodCheckStringFormat.init(_,T),$ZodString.init(_,T)}),$ZodGUID=$constructor("$ZodGUID",(_,T)=>{T.pattern??(T.pattern=guid),$ZodStringFormat.init(_,T)}),$ZodUUID=$constructor("$ZodUUID",(_,T)=>{if(T.version){const P={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[T.version];if(P===void 0)throw new Error(`Invalid UUID version: "${T.version}"`);T.pattern??(T.pattern=uuid(P))}else T.pattern??(T.pattern=uuid());$ZodStringFormat.init(_,T)}),$ZodEmail=$constructor("$ZodEmail",(_,T)=>{T.pattern??(T.pattern=email),$ZodStringFormat.init(_,T)}),$ZodURL=$constructor("$ZodURL",(_,T)=>{$ZodStringFormat.init(_,T),_._zod.check=R=>{try{const P=R.value.trim(),O=new URL(P);T.hostname&&(T.hostname.lastIndex=0,T.hostname.test(O.hostname)||R.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:T.hostname.source,input:R.value,inst:_,continue:!T.abort})),T.protocol&&(T.protocol.lastIndex=0,T.protocol.test(O.protocol.endsWith(":")?O.protocol.slice(0,-1):O.protocol)||R.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:T.protocol.source,input:R.value,inst:_,continue:!T.abort})),T.normalize?R.value=O.href:R.value=P;return}catch{R.issues.push({code:"invalid_format",format:"url",input:R.value,inst:_,continue:!T.abort})}}}),$ZodEmoji=$constructor("$ZodEmoji",(_,T)=>{T.pattern??(T.pattern=emoji()),$ZodStringFormat.init(_,T)}),$ZodNanoID=$constructor("$ZodNanoID",(_,T)=>{T.pattern??(T.pattern=nanoid),$ZodStringFormat.init(_,T)}),$ZodCUID=$constructor("$ZodCUID",(_,T)=>{T.pattern??(T.pattern=cuid),$ZodStringFormat.init(_,T)}),$ZodCUID2=$constructor("$ZodCUID2",(_,T)=>{T.pattern??(T.pattern=cuid2),$ZodStringFormat.init(_,T)}),$ZodULID=$constructor("$ZodULID",(_,T)=>{T.pattern??(T.pattern=ulid),$ZodStringFormat.init(_,T)}),$ZodXID=$constructor("$ZodXID",(_,T)=>{T.pattern??(T.pattern=xid),$ZodStringFormat.init(_,T)}),$ZodKSUID=$constructor("$ZodKSUID",(_,T)=>{T.pattern??(T.pattern=ksuid),$ZodStringFormat.init(_,T)}),$ZodISODateTime=$constructor("$ZodISODateTime",(_,T)=>{T.pattern??(T.pattern=datetime$1(T)),$ZodStringFormat.init(_,T)}),$ZodISODate=$constructor("$ZodISODate",(_,T)=>{T.pattern??(T.pattern=date$3),$ZodStringFormat.init(_,T)}),$ZodISOTime=$constructor("$ZodISOTime",(_,T)=>{T.pattern??(T.pattern=time$2(T)),$ZodStringFormat.init(_,T)}),$ZodISODuration=$constructor("$ZodISODuration",(_,T)=>{T.pattern??(T.pattern=duration$1),$ZodStringFormat.init(_,T)}),$ZodIPv4=$constructor("$ZodIPv4",(_,T)=>{T.pattern??(T.pattern=ipv4),$ZodStringFormat.init(_,T),_._zod.bag.format="ipv4"}),$ZodIPv6=$constructor("$ZodIPv6",(_,T)=>{T.pattern??(T.pattern=ipv6),$ZodStringFormat.init(_,T),_._zod.bag.format="ipv6",_._zod.check=R=>{try{new URL(`http://[${R.value}]`)}catch{R.issues.push({code:"invalid_format",format:"ipv6",input:R.value,inst:_,continue:!T.abort})}}}),$ZodCIDRv4=$constructor("$ZodCIDRv4",(_,T)=>{T.pattern??(T.pattern=cidrv4),$ZodStringFormat.init(_,T)}),$ZodCIDRv6=$constructor("$ZodCIDRv6",(_,T)=>{T.pattern??(T.pattern=cidrv6),$ZodStringFormat.init(_,T),_._zod.check=R=>{const P=R.value.split("/");try{if(P.length!==2)throw new Error;const[O,I]=P;if(!I)throw new Error;const z=Number(I);if(`${z}`!==I)throw new Error;if(z<0||z>128)throw new Error;new URL(`http://[${O}]`)}catch{R.issues.push({code:"invalid_format",format:"cidrv6",input:R.value,inst:_,continue:!T.abort})}}});function isValidBase64(_){if(_==="")return!0;if(_.length%4!==0)return!1;try{return atob(_),!0}catch{return!1}}const $ZodBase64=$constructor("$ZodBase64",(_,T)=>{T.pattern??(T.pattern=base64),$ZodStringFormat.init(_,T),_._zod.bag.contentEncoding="base64",_._zod.check=R=>{isValidBase64(R.value)||R.issues.push({code:"invalid_format",format:"base64",input:R.value,inst:_,continue:!T.abort})}});function isValidBase64URL(_){if(!base64url.test(_))return!1;const T=_.replace(/[-_]/g,P=>P==="-"?"+":"/"),R=T.padEnd(Math.ceil(T.length/4)*4,"=");return isValidBase64(R)}const $ZodBase64URL=$constructor("$ZodBase64URL",(_,T)=>{T.pattern??(T.pattern=base64url),$ZodStringFormat.init(_,T),_._zod.bag.contentEncoding="base64url",_._zod.check=R=>{isValidBase64URL(R.value)||R.issues.push({code:"invalid_format",format:"base64url",input:R.value,inst:_,continue:!T.abort})}}),$ZodE164=$constructor("$ZodE164",(_,T)=>{T.pattern??(T.pattern=e164),$ZodStringFormat.init(_,T)});function isValidJWT(_,T=null){try{const R=_.split(".");if(R.length!==3)return!1;const[P]=R;if(!P)return!1;const O=JSON.parse(atob(P));return!("typ"in O&&O?.typ!=="JWT"||!O.alg||T&&(!("alg"in O)||O.alg!==T))}catch{return!1}}const $ZodJWT=$constructor("$ZodJWT",(_,T)=>{$ZodStringFormat.init(_,T),_._zod.check=R=>{isValidJWT(R.value,T.alg)||R.issues.push({code:"invalid_format",format:"jwt",input:R.value,inst:_,continue:!T.abort})}}),$ZodNumber=$constructor("$ZodNumber",(_,T)=>{$ZodType.init(_,T),_._zod.pattern=_._zod.bag.pattern??number$6,_._zod.parse=(R,P)=>{if(T.coerce)try{R.value=Number(R.value)}catch{}const O=R.value;if(typeof O=="number"&&!Number.isNaN(O)&&Number.isFinite(O))return R;const I=typeof O=="number"?Number.isNaN(O)?"NaN":Number.isFinite(O)?void 0:"Infinity":void 0;return R.issues.push({expected:"number",code:"invalid_type",input:O,inst:_,...I?{received:I}:{}}),R}}),$ZodNumberFormat=$constructor("$ZodNumberFormat",(_,T)=>{$ZodCheckNumberFormat.init(_,T),$ZodNumber.init(_,T)}),$ZodBoolean=$constructor("$ZodBoolean",(_,T)=>{$ZodType.init(_,T),_._zod.pattern=boolean$1,_._zod.parse=(R,P)=>{if(T.coerce)try{R.value=!!R.value}catch{}const O=R.value;return typeof O=="boolean"||R.issues.push({expected:"boolean",code:"invalid_type",input:O,inst:_}),R}}),$ZodUnknown=$constructor("$ZodUnknown",(_,T)=>{$ZodType.init(_,T),_._zod.parse=R=>R}),$ZodNever=$constructor("$ZodNever",(_,T)=>{$ZodType.init(_,T),_._zod.parse=(R,P)=>(R.issues.push({expected:"never",code:"invalid_type",input:R.value,inst:_}),R)});function handleArrayResult(_,T,R){_.issues.length&&T.issues.push(...prefixIssues(R,_.issues)),T.value[R]=_.value}const $ZodArray=$constructor("$ZodArray",(_,T)=>{$ZodType.init(_,T),_._zod.parse=(R,P)=>{const O=R.value;if(!Array.isArray(O))return R.issues.push({expected:"array",code:"invalid_type",input:O,inst:_}),R;R.value=Array(O.length);const I=[];for(let z=0;z<O.length;z++){const F=O[z],G=T.element._zod.run({value:F,issues:[]},P);G instanceof Promise?I.push(G.then(V=>handleArrayResult(V,R,z))):handleArrayResult(G,R,z)}return I.length?Promise.all(I).then(()=>R):R}});function handlePropertyResult(_,T,R,P,O){if(_.issues.length){if(O&&!(R in P))return;T.issues.push(...prefixIssues(R,_.issues))}_.value===void 0?R in P&&(T.value[R]=void 0):T.value[R]=_.value}function normalizeDef(_){const T=Object.keys(_.shape);for(const P of T)if(!_.shape?.[P]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${P}": expected a Zod schema`);const R=optionalKeys(_.shape);return{..._,keys:T,keySet:new Set(T),numKeys:T.length,optionalKeys:new Set(R)}}function handleCatchall(_,T,R,P,O,I){const z=[],F=O.keySet,G=O.catchall._zod,V=G.def.type,Z=G.optout==="optional";for(const Y in T){if(F.has(Y))continue;if(V==="never"){z.push(Y);continue}const Q=G.run({value:T[Y],issues:[]},P);Q instanceof Promise?_.push(Q.then(J=>handlePropertyResult(J,R,Y,T,Z))):handlePropertyResult(Q,R,Y,T,Z)}return z.length&&R.issues.push({code:"unrecognized_keys",keys:z,input:T,inst:I}),_.length?Promise.all(_).then(()=>R):R}const $ZodObject=$constructor("$ZodObject",(_,T)=>{if($ZodType.init(_,T),!Object.getOwnPropertyDescriptor(T,"shape")?.get){const F=T.shape;Object.defineProperty(T,"shape",{get:()=>{const G={...F};return Object.defineProperty(T,"shape",{value:G}),G}})}const P=cached(()=>normalizeDef(T));defineLazy(_._zod,"propValues",()=>{const F=T.shape,G={};for(const V in F){const Z=F[V]._zod;if(Z.values){G[V]??(G[V]=new Set);for(const Y of Z.values)G[V].add(Y)}}return G});const O=isObject$2,I=T.catchall;let z;_._zod.parse=(F,G)=>{z??(z=P.value);const V=F.value;if(!O(V))return F.issues.push({expected:"object",code:"invalid_type",input:V,inst:_}),F;F.value={};const Z=[],Y=z.shape;for(const Q of z.keys){const J=Y[Q],ee=J._zod.optout==="optional",ne=J._zod.run({value:V[Q],issues:[]},G);ne instanceof Promise?Z.push(ne.then(se=>handlePropertyResult(se,F,Q,V,ee))):handlePropertyResult(ne,F,Q,V,ee)}return I?handleCatchall(Z,V,F,G,P.value,_):Z.length?Promise.all(Z).then(()=>F):F}}),$ZodObjectJIT=$constructor("$ZodObjectJIT",(_,T)=>{$ZodObject.init(_,T);const R=_._zod.parse,P=cached(()=>normalizeDef(T)),O=Q=>{const J=new Doc(["shape","payload","ctx"]),ee=P.value,ne=ce=>{const le=esc(ce);return`shape[${le}]._zod.run({ value: input[${le}], issues: [] }, ctx)`};J.write("const input = payload.value;");const se=Object.create(null);let oe=0;for(const ce of ee.keys)se[ce]=`key_${oe++}`;J.write("const newResult = {};");for(const ce of ee.keys){const le=se[ce],pe=esc(ce),he=Q[ce]?._zod?.optout==="optional";J.write(`const ${le} = ${ne(ce)};`),he?J.write(`
        if (${le}.issues.length) {
          if (${pe} in input) {
            payload.issues = payload.issues.concat(${le}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${pe}, ...iss.path] : [${pe}]
            })));
          }
        }
        
        if (${le}.value === undefined) {
          if (${pe} in input) {
            newResult[${pe}] = undefined;
          }
        } else {
          newResult[${pe}] = ${le}.value;
        }
        
      `):J.write(`
        if (${le}.issues.length) {
          payload.issues = payload.issues.concat(${le}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${pe}, ...iss.path] : [${pe}]
          })));
        }
        
        if (${le}.value === undefined) {
          if (${pe} in input) {
            newResult[${pe}] = undefined;
          }
        } else {
          newResult[${pe}] = ${le}.value;
        }
        
      `)}J.write("payload.value = newResult;"),J.write("return payload;");const ae=J.compile();return(ce,le)=>ae(Q,ce,le)};let I;const z=isObject$2,F=!globalConfig.jitless,V=F&&allowsEval.value,Z=T.catchall;let Y;_._zod.parse=(Q,J)=>{Y??(Y=P.value);const ee=Q.value;return z(ee)?F&&V&&J?.async===!1&&J.jitless!==!0?(I||(I=O(T.shape)),Q=I(Q,J),Z?handleCatchall([],ee,Q,J,Y,_):Q):R(Q,J):(Q.issues.push({expected:"object",code:"invalid_type",input:ee,inst:_}),Q)}});function handleUnionResults(_,T,R,P){for(const I of _)if(I.issues.length===0)return T.value=I.value,T;const O=_.filter(I=>!aborted(I));return O.length===1?(T.value=O[0].value,O[0]):(T.issues.push({code:"invalid_union",input:T.value,inst:R,errors:_.map(I=>I.issues.map(z=>finalizeIssue(z,P,config())))}),T)}const $ZodUnion=$constructor("$ZodUnion",(_,T)=>{$ZodType.init(_,T),defineLazy(_._zod,"optin",()=>T.options.some(O=>O._zod.optin==="optional")?"optional":void 0),defineLazy(_._zod,"optout",()=>T.options.some(O=>O._zod.optout==="optional")?"optional":void 0),defineLazy(_._zod,"values",()=>{if(T.options.every(O=>O._zod.values))return new Set(T.options.flatMap(O=>Array.from(O._zod.values)))}),defineLazy(_._zod,"pattern",()=>{if(T.options.every(O=>O._zod.pattern)){const O=T.options.map(I=>I._zod.pattern);return new RegExp(`^(${O.map(I=>cleanRegex(I.source)).join("|")})$`)}});const R=T.options.length===1,P=T.options[0]._zod.run;_._zod.parse=(O,I)=>{if(R)return P(O,I);let z=!1;const F=[];for(const G of T.options){const V=G._zod.run({value:O.value,issues:[]},I);if(V instanceof Promise)F.push(V),z=!0;else{if(V.issues.length===0)return V;F.push(V)}}return z?Promise.all(F).then(G=>handleUnionResults(G,O,_,I)):handleUnionResults(F,O,_,I)}}),$ZodIntersection=$constructor("$ZodIntersection",(_,T)=>{$ZodType.init(_,T),_._zod.parse=(R,P)=>{const O=R.value,I=T.left._zod.run({value:O,issues:[]},P),z=T.right._zod.run({value:O,issues:[]},P);return I instanceof Promise||z instanceof Promise?Promise.all([I,z]).then(([G,V])=>handleIntersectionResults(R,G,V)):handleIntersectionResults(R,I,z)}});function mergeValues(_,T){if(_===T)return{valid:!0,data:_};if(_ instanceof Date&&T instanceof Date&&+_==+T)return{valid:!0,data:_};if(isPlainObject$1(_)&&isPlainObject$1(T)){const R=Object.keys(T),P=Object.keys(_).filter(I=>R.indexOf(I)!==-1),O={..._,...T};for(const I of P){const z=mergeValues(_[I],T[I]);if(!z.valid)return{valid:!1,mergeErrorPath:[I,...z.mergeErrorPath]};O[I]=z.data}return{valid:!0,data:O}}if(Array.isArray(_)&&Array.isArray(T)){if(_.length!==T.length)return{valid:!1,mergeErrorPath:[]};const R=[];for(let P=0;P<_.length;P++){const O=_[P],I=T[P],z=mergeValues(O,I);if(!z.valid)return{valid:!1,mergeErrorPath:[P,...z.mergeErrorPath]};R.push(z.data)}return{valid:!0,data:R}}return{valid:!1,mergeErrorPath:[]}}function handleIntersectionResults(_,T,R){const P=new Map;let O;for(const F of T.issues)if(F.code==="unrecognized_keys"){O??(O=F);for(const G of F.keys)P.has(G)||P.set(G,{}),P.get(G).l=!0}else _.issues.push(F);for(const F of R.issues)if(F.code==="unrecognized_keys")for(const G of F.keys)P.has(G)||P.set(G,{}),P.get(G).r=!0;else _.issues.push(F);const I=[...P].filter(([,F])=>F.l&&F.r).map(([F])=>F);if(I.length&&O&&_.issues.push({...O,keys:I}),aborted(_))return _;const z=mergeValues(T.value,R.value);if(!z.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(z.mergeErrorPath)}`);return _.value=z.data,_}const $ZodTuple=$constructor("$ZodTuple",(_,T)=>{$ZodType.init(_,T);const R=T.items;_._zod.parse=(P,O)=>{const I=P.value;if(!Array.isArray(I))return P.issues.push({input:I,inst:_,expected:"tuple",code:"invalid_type"}),P;P.value=[];const z=[],F=[...R].reverse().findIndex(Z=>Z._zod.optin!=="optional"),G=F===-1?0:R.length-F;if(!T.rest){const Z=I.length>R.length,Y=I.length<G-1;if(Z||Y)return P.issues.push({...Z?{code:"too_big",maximum:R.length,inclusive:!0}:{code:"too_small",minimum:R.length},input:I,inst:_,origin:"array"}),P}let V=-1;for(const Z of R){if(V++,V>=I.length&&V>=G)continue;const Y=Z._zod.run({value:I[V],issues:[]},O);Y instanceof Promise?z.push(Y.then(Q=>handleTupleResult(Q,P,V))):handleTupleResult(Y,P,V)}if(T.rest){const Z=I.slice(R.length);for(const Y of Z){V++;const Q=T.rest._zod.run({value:Y,issues:[]},O);Q instanceof Promise?z.push(Q.then(J=>handleTupleResult(J,P,V))):handleTupleResult(Q,P,V)}}return z.length?Promise.all(z).then(()=>P):P}});function handleTupleResult(_,T,R){_.issues.length&&T.issues.push(...prefixIssues(R,_.issues)),T.value[R]=_.value}const $ZodRecord=$constructor("$ZodRecord",(_,T)=>{$ZodType.init(_,T),_._zod.parse=(R,P)=>{const O=R.value;if(!isPlainObject$1(O))return R.issues.push({expected:"record",code:"invalid_type",input:O,inst:_}),R;const I=[],z=T.keyType._zod.values;if(z){R.value={};const F=new Set;for(const V of z)if(typeof V=="string"||typeof V=="number"||typeof V=="symbol"){F.add(typeof V=="number"?V.toString():V);const Z=T.valueType._zod.run({value:O[V],issues:[]},P);Z instanceof Promise?I.push(Z.then(Y=>{Y.issues.length&&R.issues.push(...prefixIssues(V,Y.issues)),R.value[V]=Y.value})):(Z.issues.length&&R.issues.push(...prefixIssues(V,Z.issues)),R.value[V]=Z.value)}let G;for(const V in O)F.has(V)||(G=G??[],G.push(V));G&&G.length>0&&R.issues.push({code:"unrecognized_keys",input:O,inst:_,keys:G})}else{R.value={};for(const F of Reflect.ownKeys(O)){if(F==="__proto__")continue;let G=T.keyType._zod.run({value:F,issues:[]},P);if(G instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof F=="string"&&number$6.test(F)&&G.issues.length&&G.issues.some(Y=>Y.code==="invalid_type"&&Y.expected==="number")){const Y=T.keyType._zod.run({value:Number(F),issues:[]},P);if(Y instanceof Promise)throw new Error("Async schemas not supported in object keys currently");Y.issues.length===0&&(G=Y)}if(G.issues.length){T.mode==="loose"?R.value[F]=O[F]:R.issues.push({code:"invalid_key",origin:"record",issues:G.issues.map(Y=>finalizeIssue(Y,P,config())),input:F,path:[F],inst:_});continue}const Z=T.valueType._zod.run({value:O[F],issues:[]},P);Z instanceof Promise?I.push(Z.then(Y=>{Y.issues.length&&R.issues.push(...prefixIssues(F,Y.issues)),R.value[G.value]=Y.value})):(Z.issues.length&&R.issues.push(...prefixIssues(F,Z.issues)),R.value[G.value]=Z.value)}}return I.length?Promise.all(I).then(()=>R):R}}),$ZodEnum=$constructor("$ZodEnum",(_,T)=>{$ZodType.init(_,T);const R=getEnumValues(T.entries),P=new Set(R);_._zod.values=P,_._zod.pattern=new RegExp(`^(${R.filter(O=>propertyKeyTypes.has(typeof O)).map(O=>typeof O=="string"?escapeRegex(O):O.toString()).join("|")})$`),_._zod.parse=(O,I)=>{const z=O.value;return P.has(z)||O.issues.push({code:"invalid_value",values:R,input:z,inst:_}),O}}),$ZodLiteral=$constructor("$ZodLiteral",(_,T)=>{if($ZodType.init(_,T),T.values.length===0)throw new Error("Cannot create literal schema with no valid values");const R=new Set(T.values);_._zod.values=R,_._zod.pattern=new RegExp(`^(${T.values.map(P=>typeof P=="string"?escapeRegex(P):P?escapeRegex(P.toString()):String(P)).join("|")})$`),_._zod.parse=(P,O)=>{const I=P.value;return R.has(I)||P.issues.push({code:"invalid_value",values:T.values,input:I,inst:_}),P}}),$ZodTransform=$constructor("$ZodTransform",(_,T)=>{$ZodType.init(_,T),_._zod.parse=(R,P)=>{if(P.direction==="backward")throw new $ZodEncodeError(_.constructor.name);const O=T.transform(R.value,R);if(P.async)return(O instanceof Promise?O:Promise.resolve(O)).then(z=>(R.value=z,R));if(O instanceof Promise)throw new $ZodAsyncError;return R.value=O,R}});function handleOptionalResult(_,T){return _.issues.length&&T===void 0?{issues:[],value:void 0}:_}const $ZodOptional=$constructor("$ZodOptional",(_,T)=>{$ZodType.init(_,T),_._zod.optin="optional",_._zod.optout="optional",defineLazy(_._zod,"values",()=>T.innerType._zod.values?new Set([...T.innerType._zod.values,void 0]):void 0),defineLazy(_._zod,"pattern",()=>{const R=T.innerType._zod.pattern;return R?new RegExp(`^(${cleanRegex(R.source)})?$`):void 0}),_._zod.parse=(R,P)=>{if(T.innerType._zod.optin==="optional"){const O=T.innerType._zod.run(R,P);return O instanceof Promise?O.then(I=>handleOptionalResult(I,R.value)):handleOptionalResult(O,R.value)}return R.value===void 0?R:T.innerType._zod.run(R,P)}}),$ZodExactOptional=$constructor("$ZodExactOptional",(_,T)=>{$ZodOptional.init(_,T),defineLazy(_._zod,"values",()=>T.innerType._zod.values),defineLazy(_._zod,"pattern",()=>T.innerType._zod.pattern),_._zod.parse=(R,P)=>T.innerType._zod.run(R,P)}),$ZodNullable=$constructor("$ZodNullable",(_,T)=>{$ZodType.init(_,T),defineLazy(_._zod,"optin",()=>T.innerType._zod.optin),defineLazy(_._zod,"optout",()=>T.innerType._zod.optout),defineLazy(_._zod,"pattern",()=>{const R=T.innerType._zod.pattern;return R?new RegExp(`^(${cleanRegex(R.source)}|null)$`):void 0}),defineLazy(_._zod,"values",()=>T.innerType._zod.values?new Set([...T.innerType._zod.values,null]):void 0),_._zod.parse=(R,P)=>R.value===null?R:T.innerType._zod.run(R,P)}),$ZodDefault=$constructor("$ZodDefault",(_,T)=>{$ZodType.init(_,T),_._zod.optin="optional",defineLazy(_._zod,"values",()=>T.innerType._zod.values),_._zod.parse=(R,P)=>{if(P.direction==="backward")return T.innerType._zod.run(R,P);if(R.value===void 0)return R.value=T.defaultValue,R;const O=T.innerType._zod.run(R,P);return O instanceof Promise?O.then(I=>handleDefaultResult(I,T)):handleDefaultResult(O,T)}});function handleDefaultResult(_,T){return _.value===void 0&&(_.value=T.defaultValue),_}const $ZodPrefault=$constructor("$ZodPrefault",(_,T)=>{$ZodType.init(_,T),_._zod.optin="optional",defineLazy(_._zod,"values",()=>T.innerType._zod.values),_._zod.parse=(R,P)=>(P.direction==="backward"||R.value===void 0&&(R.value=T.defaultValue),T.innerType._zod.run(R,P))}),$ZodNonOptional=$constructor("$ZodNonOptional",(_,T)=>{$ZodType.init(_,T),defineLazy(_._zod,"values",()=>{const R=T.innerType._zod.values;return R?new Set([...R].filter(P=>P!==void 0)):void 0}),_._zod.parse=(R,P)=>{const O=T.innerType._zod.run(R,P);return O instanceof Promise?O.then(I=>handleNonOptionalResult(I,_)):handleNonOptionalResult(O,_)}});function handleNonOptionalResult(_,T){return!_.issues.length&&_.value===void 0&&_.issues.push({code:"invalid_type",expected:"nonoptional",input:_.value,inst:T}),_}const $ZodCatch=$constructor("$ZodCatch",(_,T)=>{$ZodType.init(_,T),defineLazy(_._zod,"optin",()=>T.innerType._zod.optin),defineLazy(_._zod,"optout",()=>T.innerType._zod.optout),defineLazy(_._zod,"values",()=>T.innerType._zod.values),_._zod.parse=(R,P)=>{if(P.direction==="backward")return T.innerType._zod.run(R,P);const O=T.innerType._zod.run(R,P);return O instanceof Promise?O.then(I=>(R.value=I.value,I.issues.length&&(R.value=T.catchValue({...R,error:{issues:I.issues.map(z=>finalizeIssue(z,P,config()))},input:R.value}),R.issues=[]),R)):(R.value=O.value,O.issues.length&&(R.value=T.catchValue({...R,error:{issues:O.issues.map(I=>finalizeIssue(I,P,config()))},input:R.value}),R.issues=[]),R)}}),$ZodPipe=$constructor("$ZodPipe",(_,T)=>{$ZodType.init(_,T),defineLazy(_._zod,"values",()=>T.in._zod.values),defineLazy(_._zod,"optin",()=>T.in._zod.optin),defineLazy(_._zod,"optout",()=>T.out._zod.optout),defineLazy(_._zod,"propValues",()=>T.in._zod.propValues),_._zod.parse=(R,P)=>{if(P.direction==="backward"){const I=T.out._zod.run(R,P);return I instanceof Promise?I.then(z=>handlePipeResult(z,T.in,P)):handlePipeResult(I,T.in,P)}const O=T.in._zod.run(R,P);return O instanceof Promise?O.then(I=>handlePipeResult(I,T.out,P)):handlePipeResult(O,T.out,P)}});function handlePipeResult(_,T,R){return _.issues.length?(_.aborted=!0,_):T._zod.run({value:_.value,issues:_.issues},R)}const $ZodReadonly=$constructor("$ZodReadonly",(_,T)=>{$ZodType.init(_,T),defineLazy(_._zod,"propValues",()=>T.innerType._zod.propValues),defineLazy(_._zod,"values",()=>T.innerType._zod.values),defineLazy(_._zod,"optin",()=>T.innerType?._zod?.optin),defineLazy(_._zod,"optout",()=>T.innerType?._zod?.optout),_._zod.parse=(R,P)=>{if(P.direction==="backward")return T.innerType._zod.run(R,P);const O=T.innerType._zod.run(R,P);return O instanceof Promise?O.then(handleReadonlyResult):handleReadonlyResult(O)}});function handleReadonlyResult(_){return _.value=Object.freeze(_.value),_}const $ZodCustom=$constructor("$ZodCustom",(_,T)=>{$ZodCheck.init(_,T),$ZodType.init(_,T),_._zod.parse=(R,P)=>R,_._zod.check=R=>{const P=R.value,O=T.fn(P);if(O instanceof Promise)return O.then(I=>handleRefineResult(I,R,P,_));handleRefineResult(O,R,P,_)}});function handleRefineResult(_,T,R,P){if(!_){const O={code:"custom",input:R,inst:P,path:[...P._zod.def.path??[]],continue:!P._zod.def.abort};P._zod.def.params&&(O.params=P._zod.def.params),T.issues.push(issue(O))}}var _a;class $ZodRegistry{constructor(){this._map=new WeakMap,this._idmap=new Map}add(T,...R){const P=R[0];return this._map.set(T,P),P&&typeof P=="object"&&"id"in P&&this._idmap.set(P.id,T),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(T){const R=this._map.get(T);return R&&typeof R=="object"&&"id"in R&&this._idmap.delete(R.id),this._map.delete(T),this}get(T){const R=T._zod.parent;if(R){const P={...this.get(R)??{}};delete P.id;const O={...P,...this._map.get(T)};return Object.keys(O).length?O:void 0}return this._map.get(T)}has(T){return this._map.has(T)}}function registry$1(){return new $ZodRegistry}(_a=globalThis).__zod_globalRegistry??(_a.__zod_globalRegistry=registry$1());const globalRegistry=globalThis.__zod_globalRegistry;function _string(_,T){return new _({type:"string",...normalizeParams(T)})}function _email(_,T){return new _({type:"string",format:"email",check:"string_format",abort:!1,...normalizeParams(T)})}function _guid(_,T){return new _({type:"string",format:"guid",check:"string_format",abort:!1,...normalizeParams(T)})}function _uuid(_,T){return new _({type:"string",format:"uuid",check:"string_format",abort:!1,...normalizeParams(T)})}function _uuidv4(_,T){return new _({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...normalizeParams(T)})}function _uuidv6(_,T){return new _({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...normalizeParams(T)})}function _uuidv7(_,T){return new _({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...normalizeParams(T)})}function _url(_,T){return new _({type:"string",format:"url",check:"string_format",abort:!1,...normalizeParams(T)})}function _emoji(_,T){return new _({type:"string",format:"emoji",check:"string_format",abort:!1,...normalizeParams(T)})}function _nanoid(_,T){return new _({type:"string",format:"nanoid",check:"string_format",abort:!1,...normalizeParams(T)})}function _cuid(_,T){return new _({type:"string",format:"cuid",check:"string_format",abort:!1,...normalizeParams(T)})}function _cuid2(_,T){return new _({type:"string",format:"cuid2",check:"string_format",abort:!1,...normalizeParams(T)})}function _ulid(_,T){return new _({type:"string",format:"ulid",check:"string_format",abort:!1,...normalizeParams(T)})}function _xid(_,T){return new _({type:"string",format:"xid",check:"string_format",abort:!1,...normalizeParams(T)})}function _ksuid(_,T){return new _({type:"string",format:"ksuid",check:"string_format",abort:!1,...normalizeParams(T)})}function _ipv4(_,T){return new _({type:"string",format:"ipv4",check:"string_format",abort:!1,...normalizeParams(T)})}function _ipv6(_,T){return new _({type:"string",format:"ipv6",check:"string_format",abort:!1,...normalizeParams(T)})}function _cidrv4(_,T){return new _({type:"string",format:"cidrv4",check:"string_format",abort:!1,...normalizeParams(T)})}function _cidrv6(_,T){return new _({type:"string",format:"cidrv6",check:"string_format",abort:!1,...normalizeParams(T)})}function _base64(_,T){return new _({type:"string",format:"base64",check:"string_format",abort:!1,...normalizeParams(T)})}function _base64url(_,T){return new _({type:"string",format:"base64url",check:"string_format",abort:!1,...normalizeParams(T)})}function _e164(_,T){return new _({type:"string",format:"e164",check:"string_format",abort:!1,...normalizeParams(T)})}function _jwt(_,T){return new _({type:"string",format:"jwt",check:"string_format",abort:!1,...normalizeParams(T)})}function _isoDateTime(_,T){return new _({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...normalizeParams(T)})}function _isoDate(_,T){return new _({type:"string",format:"date",check:"string_format",...normalizeParams(T)})}function _isoTime(_,T){return new _({type:"string",format:"time",check:"string_format",precision:null,...normalizeParams(T)})}function _isoDuration(_,T){return new _({type:"string",format:"duration",check:"string_format",...normalizeParams(T)})}function _number(_,T){return new _({type:"number",checks:[],...normalizeParams(T)})}function _int(_,T){return new _({type:"number",check:"number_format",abort:!1,format:"safeint",...normalizeParams(T)})}function _boolean(_,T){return new _({type:"boolean",...normalizeParams(T)})}function _unknown(_){return new _({type:"unknown"})}function _never(_,T){return new _({type:"never",...normalizeParams(T)})}function _lt(_,T){return new $ZodCheckLessThan({check:"less_than",...normalizeParams(T),value:_,inclusive:!1})}function _lte(_,T){return new $ZodCheckLessThan({check:"less_than",...normalizeParams(T),value:_,inclusive:!0})}function _gt(_,T){return new $ZodCheckGreaterThan({check:"greater_than",...normalizeParams(T),value:_,inclusive:!1})}function _gte(_,T){return new $ZodCheckGreaterThan({check:"greater_than",...normalizeParams(T),value:_,inclusive:!0})}function _multipleOf(_,T){return new $ZodCheckMultipleOf({check:"multiple_of",...normalizeParams(T),value:_})}function _maxLength(_,T){return new $ZodCheckMaxLength({check:"max_length",...normalizeParams(T),maximum:_})}function _minLength(_,T){return new $ZodCheckMinLength({check:"min_length",...normalizeParams(T),minimum:_})}function _length(_,T){return new $ZodCheckLengthEquals({check:"length_equals",...normalizeParams(T),length:_})}function _regex(_,T){return new $ZodCheckRegex({check:"string_format",format:"regex",...normalizeParams(T),pattern:_})}function _lowercase(_){return new $ZodCheckLowerCase({check:"string_format",format:"lowercase",...normalizeParams(_)})}function _uppercase(_){return new $ZodCheckUpperCase({check:"string_format",format:"uppercase",...normalizeParams(_)})}function _includes(_,T){return new $ZodCheckIncludes({check:"string_format",format:"includes",...normalizeParams(T),includes:_})}function _startsWith(_,T){return new $ZodCheckStartsWith({check:"string_format",format:"starts_with",...normalizeParams(T),prefix:_})}function _endsWith(_,T){return new $ZodCheckEndsWith({check:"string_format",format:"ends_with",...normalizeParams(T),suffix:_})}function _overwrite(_){return new $ZodCheckOverwrite({check:"overwrite",tx:_})}function _normalize(_){return _overwrite(T=>T.normalize(_))}function _trim(){return _overwrite(_=>_.trim())}function _toLowerCase(){return _overwrite(_=>_.toLowerCase())}function _toUpperCase(){return _overwrite(_=>_.toUpperCase())}function _slugify(){return _overwrite(_=>slugify(_))}function _array(_,T,R){return new _({type:"array",element:T,...normalizeParams(R)})}function _refine(_,T,R){return new _({type:"custom",check:"custom",fn:T,...normalizeParams(R)})}function _superRefine(_){const T=_check(R=>(R.addIssue=P=>{if(typeof P=="string")R.issues.push(issue(P,R.value,T._zod.def));else{const O=P;O.fatal&&(O.continue=!1),O.code??(O.code="custom"),O.input??(O.input=R.value),O.inst??(O.inst=T),O.continue??(O.continue=!T._zod.def.abort),R.issues.push(issue(O))}},_(R.value,R)));return T}function _check(_,T){const R=new $ZodCheck({check:"custom",...normalizeParams(T)});return R._zod.check=_,R}function initializeContext(_){let T=_?.target??"draft-2020-12";return T==="draft-4"&&(T="draft-04"),T==="draft-7"&&(T="draft-07"),{processors:_.processors??{},metadataRegistry:_?.metadata??globalRegistry,target:T,unrepresentable:_?.unrepresentable??"throw",override:_?.override??(()=>{}),io:_?.io??"output",counter:0,seen:new Map,cycles:_?.cycles??"ref",reused:_?.reused??"inline",external:_?.external??void 0}}function process$1(_,T,R={path:[],schemaPath:[]}){var P;const O=_._zod.def,I=T.seen.get(_);if(I)return I.count++,R.schemaPath.includes(_)&&(I.cycle=R.path),I.schema;const z={schema:{},count:1,cycle:void 0,path:R.path};T.seen.set(_,z);const F=_._zod.toJSONSchema?.();if(F)z.schema=F;else{const Z={...R,schemaPath:[...R.schemaPath,_],path:R.path};if(_._zod.processJSONSchema)_._zod.processJSONSchema(T,z.schema,Z);else{const Q=z.schema,J=T.processors[O.type];if(!J)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${O.type}`);J(_,T,Q,Z)}const Y=_._zod.parent;Y&&(z.ref||(z.ref=Y),process$1(Y,T,Z),T.seen.get(Y).isParent=!0)}const G=T.metadataRegistry.get(_);return G&&Object.assign(z.schema,G),T.io==="input"&&isTransforming(_)&&(delete z.schema.examples,delete z.schema.default),T.io==="input"&&z.schema._prefault&&((P=z.schema).default??(P.default=z.schema._prefault)),delete z.schema._prefault,T.seen.get(_).schema}function extractDefs(_,T){const R=_.seen.get(T);if(!R)throw new Error("Unprocessed schema. This is a bug in Zod.");const P=new Map;for(const z of _.seen.entries()){const F=_.metadataRegistry.get(z[0])?.id;if(F){const G=P.get(F);if(G&&G!==z[0])throw new Error(`Duplicate schema id "${F}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);P.set(F,z[0])}}const O=z=>{const F=_.target==="draft-2020-12"?"$defs":"definitions";if(_.external){const Y=_.external.registry.get(z[0])?.id,Q=_.external.uri??(ee=>ee);if(Y)return{ref:Q(Y)};const J=z[1].defId??z[1].schema.id??`schema${_.counter++}`;return z[1].defId=J,{defId:J,ref:`${Q("__shared")}#/${F}/${J}`}}if(z[1]===R)return{ref:"#"};const V=`#/${F}/`,Z=z[1].schema.id??`__schema${_.counter++}`;return{defId:Z,ref:V+Z}},I=z=>{if(z[1].schema.$ref)return;const F=z[1],{ref:G,defId:V}=O(z);F.def={...F.schema},V&&(F.defId=V);const Z=F.schema;for(const Y in Z)delete Z[Y];Z.$ref=G};if(_.cycles==="throw")for(const z of _.seen.entries()){const F=z[1];if(F.cycle)throw new Error(`Cycle detected: #/${F.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const z of _.seen.entries()){const F=z[1];if(T===z[0]){I(z);continue}if(_.external){const V=_.external.registry.get(z[0])?.id;if(T!==z[0]&&V){I(z);continue}}if(_.metadataRegistry.get(z[0])?.id){I(z);continue}if(F.cycle){I(z);continue}if(F.count>1&&_.reused==="ref"){I(z);continue}}}function finalize(_,T){const R=_.seen.get(T);if(!R)throw new Error("Unprocessed schema. This is a bug in Zod.");const P=z=>{const F=_.seen.get(z);if(F.ref===null)return;const G=F.def??F.schema,V={...G},Z=F.ref;if(F.ref=null,Z){P(Z);const Q=_.seen.get(Z),J=Q.schema;if(J.$ref&&(_.target==="draft-07"||_.target==="draft-04"||_.target==="openapi-3.0")?(G.allOf=G.allOf??[],G.allOf.push(J)):Object.assign(G,J),Object.assign(G,V),z._zod.parent===Z)for(const ne in G)ne==="$ref"||ne==="allOf"||ne in V||delete G[ne];if(J.$ref)for(const ne in G)ne==="$ref"||ne==="allOf"||ne in Q.def&&JSON.stringify(G[ne])===JSON.stringify(Q.def[ne])&&delete G[ne]}const Y=z._zod.parent;if(Y&&Y!==Z){P(Y);const Q=_.seen.get(Y);if(Q?.schema.$ref&&(G.$ref=Q.schema.$ref,Q.def))for(const J in G)J==="$ref"||J==="allOf"||J in Q.def&&JSON.stringify(G[J])===JSON.stringify(Q.def[J])&&delete G[J]}_.override({zodSchema:z,jsonSchema:G,path:F.path??[]})};for(const z of[..._.seen.entries()].reverse())P(z[0]);const O={};if(_.target==="draft-2020-12"?O.$schema="https://json-schema.org/draft/2020-12/schema":_.target==="draft-07"?O.$schema="http://json-schema.org/draft-07/schema#":_.target==="draft-04"?O.$schema="http://json-schema.org/draft-04/schema#":_.target,_.external?.uri){const z=_.external.registry.get(T)?.id;if(!z)throw new Error("Schema is missing an `id` property");O.$id=_.external.uri(z)}Object.assign(O,R.def??R.schema);const I=_.external?.defs??{};for(const z of _.seen.entries()){const F=z[1];F.def&&F.defId&&(I[F.defId]=F.def)}_.external||Object.keys(I).length>0&&(_.target==="draft-2020-12"?O.$defs=I:O.definitions=I);try{const z=JSON.parse(JSON.stringify(O));return Object.defineProperty(z,"~standard",{value:{...T["~standard"],jsonSchema:{input:createStandardJSONSchemaMethod(T,"input",_.processors),output:createStandardJSONSchemaMethod(T,"output",_.processors)}},enumerable:!1,writable:!1}),z}catch{throw new Error("Error converting schema to JSON.")}}function isTransforming(_,T){const R=T??{seen:new Set};if(R.seen.has(_))return!1;R.seen.add(_);const P=_._zod.def;if(P.type==="transform")return!0;if(P.type==="array")return isTransforming(P.element,R);if(P.type==="set")return isTransforming(P.valueType,R);if(P.type==="lazy")return isTransforming(P.getter(),R);if(P.type==="promise"||P.type==="optional"||P.type==="nonoptional"||P.type==="nullable"||P.type==="readonly"||P.type==="default"||P.type==="prefault")return isTransforming(P.innerType,R);if(P.type==="intersection")return isTransforming(P.left,R)||isTransforming(P.right,R);if(P.type==="record"||P.type==="map")return isTransforming(P.keyType,R)||isTransforming(P.valueType,R);if(P.type==="pipe")return isTransforming(P.in,R)||isTransforming(P.out,R);if(P.type==="object"){for(const O in P.shape)if(isTransforming(P.shape[O],R))return!0;return!1}if(P.type==="union"){for(const O of P.options)if(isTransforming(O,R))return!0;return!1}if(P.type==="tuple"){for(const O of P.items)if(isTransforming(O,R))return!0;return!!(P.rest&&isTransforming(P.rest,R))}return!1}const createToJSONSchemaMethod=(_,T={})=>R=>{const P=initializeContext({...R,processors:T});return process$1(_,P),extractDefs(P,_),finalize(P,_)},createStandardJSONSchemaMethod=(_,T,R={})=>P=>{const{libraryOptions:O,target:I}=P??{},z=initializeContext({...O??{},target:I,io:T,processors:R});return process$1(_,z),extractDefs(z,_),finalize(z,_)},formatMap={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},stringProcessor=(_,T,R,P)=>{const O=R;O.type="string";const{minimum:I,maximum:z,format:F,patterns:G,contentEncoding:V}=_._zod.bag;if(typeof I=="number"&&(O.minLength=I),typeof z=="number"&&(O.maxLength=z),F&&(O.format=formatMap[F]??F,O.format===""&&delete O.format,F==="time"&&delete O.format),V&&(O.contentEncoding=V),G&&G.size>0){const Z=[...G];Z.length===1?O.pattern=Z[0].source:Z.length>1&&(O.allOf=[...Z.map(Y=>({...T.target==="draft-07"||T.target==="draft-04"||T.target==="openapi-3.0"?{type:"string"}:{},pattern:Y.source}))])}},numberProcessor=(_,T,R,P)=>{const O=R,{minimum:I,maximum:z,format:F,multipleOf:G,exclusiveMaximum:V,exclusiveMinimum:Z}=_._zod.bag;typeof F=="string"&&F.includes("int")?O.type="integer":O.type="number",typeof Z=="number"&&(T.target==="draft-04"||T.target==="openapi-3.0"?(O.minimum=Z,O.exclusiveMinimum=!0):O.exclusiveMinimum=Z),typeof I=="number"&&(O.minimum=I,typeof Z=="number"&&T.target!=="draft-04"&&(Z>=I?delete O.minimum:delete O.exclusiveMinimum)),typeof V=="number"&&(T.target==="draft-04"||T.target==="openapi-3.0"?(O.maximum=V,O.exclusiveMaximum=!0):O.exclusiveMaximum=V),typeof z=="number"&&(O.maximum=z,typeof V=="number"&&T.target!=="draft-04"&&(V<=z?delete O.maximum:delete O.exclusiveMaximum)),typeof G=="number"&&(O.multipleOf=G)},booleanProcessor=(_,T,R,P)=>{R.type="boolean"},neverProcessor=(_,T,R,P)=>{R.not={}},unknownProcessor=(_,T,R,P)=>{},enumProcessor=(_,T,R,P)=>{const O=_._zod.def,I=getEnumValues(O.entries);I.every(z=>typeof z=="number")&&(R.type="number"),I.every(z=>typeof z=="string")&&(R.type="string"),R.enum=I},literalProcessor=(_,T,R,P)=>{const O=_._zod.def,I=[];for(const z of O.values)if(z===void 0){if(T.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof z=="bigint"){if(T.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");I.push(Number(z))}else I.push(z);if(I.length!==0)if(I.length===1){const z=I[0];R.type=z===null?"null":typeof z,T.target==="draft-04"||T.target==="openapi-3.0"?R.enum=[z]:R.const=z}else I.every(z=>typeof z=="number")&&(R.type="number"),I.every(z=>typeof z=="string")&&(R.type="string"),I.every(z=>typeof z=="boolean")&&(R.type="boolean"),I.every(z=>z===null)&&(R.type="null"),R.enum=I},customProcessor=(_,T,R,P)=>{if(T.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},transformProcessor=(_,T,R,P)=>{if(T.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},arrayProcessor=(_,T,R,P)=>{const O=R,I=_._zod.def,{minimum:z,maximum:F}=_._zod.bag;typeof z=="number"&&(O.minItems=z),typeof F=="number"&&(O.maxItems=F),O.type="array",O.items=process$1(I.element,T,{...P,path:[...P.path,"items"]})},objectProcessor=(_,T,R,P)=>{const O=R,I=_._zod.def;O.type="object",O.properties={};const z=I.shape;for(const V in z)O.properties[V]=process$1(z[V],T,{...P,path:[...P.path,"properties",V]});const F=new Set(Object.keys(z)),G=new Set([...F].filter(V=>{const Z=I.shape[V]._zod;return T.io==="input"?Z.optin===void 0:Z.optout===void 0}));G.size>0&&(O.required=Array.from(G)),I.catchall?._zod.def.type==="never"?O.additionalProperties=!1:I.catchall?I.catchall&&(O.additionalProperties=process$1(I.catchall,T,{...P,path:[...P.path,"additionalProperties"]})):T.io==="output"&&(O.additionalProperties=!1)},unionProcessor=(_,T,R,P)=>{const O=_._zod.def,I=O.inclusive===!1,z=O.options.map((F,G)=>process$1(F,T,{...P,path:[...P.path,I?"oneOf":"anyOf",G]}));I?R.oneOf=z:R.anyOf=z},intersectionProcessor=(_,T,R,P)=>{const O=_._zod.def,I=process$1(O.left,T,{...P,path:[...P.path,"allOf",0]}),z=process$1(O.right,T,{...P,path:[...P.path,"allOf",1]}),F=V=>"allOf"in V&&Object.keys(V).length===1,G=[...F(I)?I.allOf:[I],...F(z)?z.allOf:[z]];R.allOf=G},tupleProcessor=(_,T,R,P)=>{const O=R,I=_._zod.def;O.type="array";const z=T.target==="draft-2020-12"?"prefixItems":"items",F=T.target==="draft-2020-12"||T.target==="openapi-3.0"?"items":"additionalItems",G=I.items.map((Q,J)=>process$1(Q,T,{...P,path:[...P.path,z,J]})),V=I.rest?process$1(I.rest,T,{...P,path:[...P.path,F,...T.target==="openapi-3.0"?[I.items.length]:[]]}):null;T.target==="draft-2020-12"?(O.prefixItems=G,V&&(O.items=V)):T.target==="openapi-3.0"?(O.items={anyOf:G},V&&O.items.anyOf.push(V),O.minItems=G.length,V||(O.maxItems=G.length)):(O.items=G,V&&(O.additionalItems=V));const{minimum:Z,maximum:Y}=_._zod.bag;typeof Z=="number"&&(O.minItems=Z),typeof Y=="number"&&(O.maxItems=Y)},recordProcessor=(_,T,R,P)=>{const O=R,I=_._zod.def;O.type="object";const z=I.keyType,G=z._zod.bag?.patterns;if(I.mode==="loose"&&G&&G.size>0){const Z=process$1(I.valueType,T,{...P,path:[...P.path,"patternProperties","*"]});O.patternProperties={};for(const Y of G)O.patternProperties[Y.source]=Z}else(T.target==="draft-07"||T.target==="draft-2020-12")&&(O.propertyNames=process$1(I.keyType,T,{...P,path:[...P.path,"propertyNames"]})),O.additionalProperties=process$1(I.valueType,T,{...P,path:[...P.path,"additionalProperties"]});const V=z._zod.values;if(V){const Z=[...V].filter(Y=>typeof Y=="string"||typeof Y=="number");Z.length>0&&(O.required=Z)}},nullableProcessor=(_,T,R,P)=>{const O=_._zod.def,I=process$1(O.innerType,T,P),z=T.seen.get(_);T.target==="openapi-3.0"?(z.ref=O.innerType,R.nullable=!0):R.anyOf=[I,{type:"null"}]},nonoptionalProcessor=(_,T,R,P)=>{const O=_._zod.def;process$1(O.innerType,T,P);const I=T.seen.get(_);I.ref=O.innerType},defaultProcessor=(_,T,R,P)=>{const O=_._zod.def;process$1(O.innerType,T,P);const I=T.seen.get(_);I.ref=O.innerType,R.default=JSON.parse(JSON.stringify(O.defaultValue))},prefaultProcessor=(_,T,R,P)=>{const O=_._zod.def;process$1(O.innerType,T,P);const I=T.seen.get(_);I.ref=O.innerType,T.io==="input"&&(R._prefault=JSON.parse(JSON.stringify(O.defaultValue)))},catchProcessor=(_,T,R,P)=>{const O=_._zod.def;process$1(O.innerType,T,P);const I=T.seen.get(_);I.ref=O.innerType;let z;try{z=O.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}R.default=z},pipeProcessor=(_,T,R,P)=>{const O=_._zod.def,I=T.io==="input"?O.in._zod.def.type==="transform"?O.out:O.in:O.out;process$1(I,T,P);const z=T.seen.get(_);z.ref=I},readonlyProcessor=(_,T,R,P)=>{const O=_._zod.def;process$1(O.innerType,T,P);const I=T.seen.get(_);I.ref=O.innerType,R.readOnly=!0},optionalProcessor=(_,T,R,P)=>{const O=_._zod.def;process$1(O.innerType,T,P);const I=T.seen.get(_);I.ref=O.innerType},ZodISODateTime=$constructor("ZodISODateTime",(_,T)=>{$ZodISODateTime.init(_,T),ZodStringFormat.init(_,T)});function datetime(_){return _isoDateTime(ZodISODateTime,_)}const ZodISODate=$constructor("ZodISODate",(_,T)=>{$ZodISODate.init(_,T),ZodStringFormat.init(_,T)});function date$2(_){return _isoDate(ZodISODate,_)}const ZodISOTime=$constructor("ZodISOTime",(_,T)=>{$ZodISOTime.init(_,T),ZodStringFormat.init(_,T)});function time$1(_){return _isoTime(ZodISOTime,_)}const ZodISODuration=$constructor("ZodISODuration",(_,T)=>{$ZodISODuration.init(_,T),ZodStringFormat.init(_,T)});function duration(_){return _isoDuration(ZodISODuration,_)}const initializer$1=(_,T)=>{$ZodError.init(_,T),_.name="ZodError",Object.defineProperties(_,{format:{value:R=>formatError(_,R)},flatten:{value:R=>flattenError(_,R)},addIssue:{value:R=>{_.issues.push(R),_.message=JSON.stringify(_.issues,jsonStringifyReplacer,2)}},addIssues:{value:R=>{_.issues.push(...R),_.message=JSON.stringify(_.issues,jsonStringifyReplacer,2)}},isEmpty:{get(){return _.issues.length===0}}})},ZodRealError=$constructor("ZodError",initializer$1,{Parent:Error}),parse$4=_parse(ZodRealError),parseAsync=_parseAsync(ZodRealError),safeParse=_safeParse(ZodRealError),safeParseAsync=_safeParseAsync(ZodRealError),encode=_encode(ZodRealError),decode=_decode(ZodRealError),encodeAsync=_encodeAsync(ZodRealError),decodeAsync=_decodeAsync(ZodRealError),safeEncode=_safeEncode(ZodRealError),safeDecode=_safeDecode(ZodRealError),safeEncodeAsync=_safeEncodeAsync(ZodRealError),safeDecodeAsync=_safeDecodeAsync(ZodRealError),ZodType=$constructor("ZodType",(_,T)=>($ZodType.init(_,T),Object.assign(_["~standard"],{jsonSchema:{input:createStandardJSONSchemaMethod(_,"input"),output:createStandardJSONSchemaMethod(_,"output")}}),_.toJSONSchema=createToJSONSchemaMethod(_,{}),_.def=T,_.type=T.type,Object.defineProperty(_,"_def",{value:T}),_.check=(...R)=>_.clone(mergeDefs(T,{checks:[...T.checks??[],...R.map(P=>typeof P=="function"?{_zod:{check:P,def:{check:"custom"},onattach:[]}}:P)]}),{parent:!0}),_.with=_.check,_.clone=(R,P)=>clone(_,R,P),_.brand=()=>_,_.register=((R,P)=>(R.add(_,P),_)),_.parse=(R,P)=>parse$4(_,R,P,{callee:_.parse}),_.safeParse=(R,P)=>safeParse(_,R,P),_.parseAsync=async(R,P)=>parseAsync(_,R,P,{callee:_.parseAsync}),_.safeParseAsync=async(R,P)=>safeParseAsync(_,R,P),_.spa=_.safeParseAsync,_.encode=(R,P)=>encode(_,R,P),_.decode=(R,P)=>decode(_,R,P),_.encodeAsync=async(R,P)=>encodeAsync(_,R,P),_.decodeAsync=async(R,P)=>decodeAsync(_,R,P),_.safeEncode=(R,P)=>safeEncode(_,R,P),_.safeDecode=(R,P)=>safeDecode(_,R,P),_.safeEncodeAsync=async(R,P)=>safeEncodeAsync(_,R,P),_.safeDecodeAsync=async(R,P)=>safeDecodeAsync(_,R,P),_.refine=(R,P)=>_.check(refine(R,P)),_.superRefine=R=>_.check(superRefine(R)),_.overwrite=R=>_.check(_overwrite(R)),_.optional=()=>optional(_),_.exactOptional=()=>exactOptional(_),_.nullable=()=>nullable(_),_.nullish=()=>optional(nullable(_)),_.nonoptional=R=>nonoptional(_,R),_.array=()=>array$2(_),_.or=R=>union([_,R]),_.and=R=>intersection(_,R),_.transform=R=>pipe(_,transform(R)),_.default=R=>_default(_,R),_.prefault=R=>prefault(_,R),_.catch=R=>_catch(_,R),_.pipe=R=>pipe(_,R),_.readonly=()=>readonly(_),_.describe=R=>{const P=_.clone();return globalRegistry.add(P,{description:R}),P},Object.defineProperty(_,"description",{get(){return globalRegistry.get(_)?.description},configurable:!0}),_.meta=(...R)=>{if(R.length===0)return globalRegistry.get(_);const P=_.clone();return globalRegistry.add(P,R[0]),P},_.isOptional=()=>_.safeParse(void 0).success,_.isNullable=()=>_.safeParse(null).success,_.apply=R=>R(_),_)),_ZodString=$constructor("_ZodString",(_,T)=>{$ZodString.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(P,O,I)=>stringProcessor(_,P,O);const R=_._zod.bag;_.format=R.format??null,_.minLength=R.minimum??null,_.maxLength=R.maximum??null,_.regex=(...P)=>_.check(_regex(...P)),_.includes=(...P)=>_.check(_includes(...P)),_.startsWith=(...P)=>_.check(_startsWith(...P)),_.endsWith=(...P)=>_.check(_endsWith(...P)),_.min=(...P)=>_.check(_minLength(...P)),_.max=(...P)=>_.check(_maxLength(...P)),_.length=(...P)=>_.check(_length(...P)),_.nonempty=(...P)=>_.check(_minLength(1,...P)),_.lowercase=P=>_.check(_lowercase(P)),_.uppercase=P=>_.check(_uppercase(P)),_.trim=()=>_.check(_trim()),_.normalize=(...P)=>_.check(_normalize(...P)),_.toLowerCase=()=>_.check(_toLowerCase()),_.toUpperCase=()=>_.check(_toUpperCase()),_.slugify=()=>_.check(_slugify())}),ZodString=$constructor("ZodString",(_,T)=>{$ZodString.init(_,T),_ZodString.init(_,T),_.email=R=>_.check(_email(ZodEmail,R)),_.url=R=>_.check(_url(ZodURL,R)),_.jwt=R=>_.check(_jwt(ZodJWT,R)),_.emoji=R=>_.check(_emoji(ZodEmoji,R)),_.guid=R=>_.check(_guid(ZodGUID,R)),_.uuid=R=>_.check(_uuid(ZodUUID,R)),_.uuidv4=R=>_.check(_uuidv4(ZodUUID,R)),_.uuidv6=R=>_.check(_uuidv6(ZodUUID,R)),_.uuidv7=R=>_.check(_uuidv7(ZodUUID,R)),_.nanoid=R=>_.check(_nanoid(ZodNanoID,R)),_.guid=R=>_.check(_guid(ZodGUID,R)),_.cuid=R=>_.check(_cuid(ZodCUID,R)),_.cuid2=R=>_.check(_cuid2(ZodCUID2,R)),_.ulid=R=>_.check(_ulid(ZodULID,R)),_.base64=R=>_.check(_base64(ZodBase64,R)),_.base64url=R=>_.check(_base64url(ZodBase64URL,R)),_.xid=R=>_.check(_xid(ZodXID,R)),_.ksuid=R=>_.check(_ksuid(ZodKSUID,R)),_.ipv4=R=>_.check(_ipv4(ZodIPv4,R)),_.ipv6=R=>_.check(_ipv6(ZodIPv6,R)),_.cidrv4=R=>_.check(_cidrv4(ZodCIDRv4,R)),_.cidrv6=R=>_.check(_cidrv6(ZodCIDRv6,R)),_.e164=R=>_.check(_e164(ZodE164,R)),_.datetime=R=>_.check(datetime(R)),_.date=R=>_.check(date$2(R)),_.time=R=>_.check(time$1(R)),_.duration=R=>_.check(duration(R))});function string$1(_){return _string(ZodString,_)}const ZodStringFormat=$constructor("ZodStringFormat",(_,T)=>{$ZodStringFormat.init(_,T),_ZodString.init(_,T)}),ZodEmail=$constructor("ZodEmail",(_,T)=>{$ZodEmail.init(_,T),ZodStringFormat.init(_,T)}),ZodGUID=$constructor("ZodGUID",(_,T)=>{$ZodGUID.init(_,T),ZodStringFormat.init(_,T)}),ZodUUID=$constructor("ZodUUID",(_,T)=>{$ZodUUID.init(_,T),ZodStringFormat.init(_,T)}),ZodURL=$constructor("ZodURL",(_,T)=>{$ZodURL.init(_,T),ZodStringFormat.init(_,T)}),ZodEmoji=$constructor("ZodEmoji",(_,T)=>{$ZodEmoji.init(_,T),ZodStringFormat.init(_,T)}),ZodNanoID=$constructor("ZodNanoID",(_,T)=>{$ZodNanoID.init(_,T),ZodStringFormat.init(_,T)}),ZodCUID=$constructor("ZodCUID",(_,T)=>{$ZodCUID.init(_,T),ZodStringFormat.init(_,T)}),ZodCUID2=$constructor("ZodCUID2",(_,T)=>{$ZodCUID2.init(_,T),ZodStringFormat.init(_,T)}),ZodULID=$constructor("ZodULID",(_,T)=>{$ZodULID.init(_,T),ZodStringFormat.init(_,T)}),ZodXID=$constructor("ZodXID",(_,T)=>{$ZodXID.init(_,T),ZodStringFormat.init(_,T)}),ZodKSUID=$constructor("ZodKSUID",(_,T)=>{$ZodKSUID.init(_,T),ZodStringFormat.init(_,T)}),ZodIPv4=$constructor("ZodIPv4",(_,T)=>{$ZodIPv4.init(_,T),ZodStringFormat.init(_,T)}),ZodIPv6=$constructor("ZodIPv6",(_,T)=>{$ZodIPv6.init(_,T),ZodStringFormat.init(_,T)}),ZodCIDRv4=$constructor("ZodCIDRv4",(_,T)=>{$ZodCIDRv4.init(_,T),ZodStringFormat.init(_,T)}),ZodCIDRv6=$constructor("ZodCIDRv6",(_,T)=>{$ZodCIDRv6.init(_,T),ZodStringFormat.init(_,T)}),ZodBase64=$constructor("ZodBase64",(_,T)=>{$ZodBase64.init(_,T),ZodStringFormat.init(_,T)}),ZodBase64URL=$constructor("ZodBase64URL",(_,T)=>{$ZodBase64URL.init(_,T),ZodStringFormat.init(_,T)}),ZodE164=$constructor("ZodE164",(_,T)=>{$ZodE164.init(_,T),ZodStringFormat.init(_,T)}),ZodJWT=$constructor("ZodJWT",(_,T)=>{$ZodJWT.init(_,T),ZodStringFormat.init(_,T)}),ZodNumber=$constructor("ZodNumber",(_,T)=>{$ZodNumber.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(P,O,I)=>numberProcessor(_,P,O),_.gt=(P,O)=>_.check(_gt(P,O)),_.gte=(P,O)=>_.check(_gte(P,O)),_.min=(P,O)=>_.check(_gte(P,O)),_.lt=(P,O)=>_.check(_lt(P,O)),_.lte=(P,O)=>_.check(_lte(P,O)),_.max=(P,O)=>_.check(_lte(P,O)),_.int=P=>_.check(int(P)),_.safe=P=>_.check(int(P)),_.positive=P=>_.check(_gt(0,P)),_.nonnegative=P=>_.check(_gte(0,P)),_.negative=P=>_.check(_lt(0,P)),_.nonpositive=P=>_.check(_lte(0,P)),_.multipleOf=(P,O)=>_.check(_multipleOf(P,O)),_.step=(P,O)=>_.check(_multipleOf(P,O)),_.finite=()=>_;const R=_._zod.bag;_.minValue=Math.max(R.minimum??Number.NEGATIVE_INFINITY,R.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,_.maxValue=Math.min(R.maximum??Number.POSITIVE_INFINITY,R.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,_.isInt=(R.format??"").includes("int")||Number.isSafeInteger(R.multipleOf??.5),_.isFinite=!0,_.format=R.format??null});function number$5(_){return _number(ZodNumber,_)}const ZodNumberFormat=$constructor("ZodNumberFormat",(_,T)=>{$ZodNumberFormat.init(_,T),ZodNumber.init(_,T)});function int(_){return _int(ZodNumberFormat,_)}const ZodBoolean=$constructor("ZodBoolean",(_,T)=>{$ZodBoolean.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>booleanProcessor(_,R,P)});function boolean(_){return _boolean(ZodBoolean,_)}const ZodUnknown=$constructor("ZodUnknown",(_,T)=>{$ZodUnknown.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>unknownProcessor()});function unknown(){return _unknown(ZodUnknown)}const ZodNever=$constructor("ZodNever",(_,T)=>{$ZodNever.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>neverProcessor(_,R,P)});function never(_){return _never(ZodNever,_)}const ZodArray=$constructor("ZodArray",(_,T)=>{$ZodArray.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>arrayProcessor(_,R,P,O),_.element=T.element,_.min=(R,P)=>_.check(_minLength(R,P)),_.nonempty=R=>_.check(_minLength(1,R)),_.max=(R,P)=>_.check(_maxLength(R,P)),_.length=(R,P)=>_.check(_length(R,P)),_.unwrap=()=>_.element});function array$2(_,T){return _array(ZodArray,_,T)}const ZodObject=$constructor("ZodObject",(_,T)=>{$ZodObjectJIT.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>objectProcessor(_,R,P,O),defineLazy(_,"shape",()=>T.shape),_.keyof=()=>_enum(Object.keys(_._zod.def.shape)),_.catchall=R=>_.clone({..._._zod.def,catchall:R}),_.passthrough=()=>_.clone({..._._zod.def,catchall:unknown()}),_.loose=()=>_.clone({..._._zod.def,catchall:unknown()}),_.strict=()=>_.clone({..._._zod.def,catchall:never()}),_.strip=()=>_.clone({..._._zod.def,catchall:void 0}),_.extend=R=>extend$1(_,R),_.safeExtend=R=>safeExtend(_,R),_.merge=R=>merge$2(_,R),_.pick=R=>pick(_,R),_.omit=R=>omit(_,R),_.partial=(...R)=>partial(ZodOptional,_,R[0]),_.required=(...R)=>required(ZodNonOptional,_,R[0])});function object$1(_,T){const R={type:"object",shape:_??{},...normalizeParams(T)};return new ZodObject(R)}const ZodUnion=$constructor("ZodUnion",(_,T)=>{$ZodUnion.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>unionProcessor(_,R,P,O),_.options=T.options});function union(_,T){return new ZodUnion({type:"union",options:_,...normalizeParams(T)})}const ZodIntersection=$constructor("ZodIntersection",(_,T)=>{$ZodIntersection.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>intersectionProcessor(_,R,P,O)});function intersection(_,T){return new ZodIntersection({type:"intersection",left:_,right:T})}const ZodTuple=$constructor("ZodTuple",(_,T)=>{$ZodTuple.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>tupleProcessor(_,R,P,O),_.rest=R=>_.clone({..._._zod.def,rest:R})});function tuple(_,T,R){const P=T instanceof $ZodType,O=P?R:T,I=P?T:null;return new ZodTuple({type:"tuple",items:_,rest:I,...normalizeParams(O)})}const ZodRecord=$constructor("ZodRecord",(_,T)=>{$ZodRecord.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>recordProcessor(_,R,P,O),_.keyType=T.keyType,_.valueType=T.valueType});function record(_,T,R){return new ZodRecord({type:"record",keyType:_,valueType:T,...normalizeParams(R)})}const ZodEnum=$constructor("ZodEnum",(_,T)=>{$ZodEnum.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(P,O,I)=>enumProcessor(_,P,O),_.enum=T.entries,_.options=Object.values(T.entries);const R=new Set(Object.keys(T.entries));_.extract=(P,O)=>{const I={};for(const z of P)if(R.has(z))I[z]=T.entries[z];else throw new Error(`Key ${z} not found in enum`);return new ZodEnum({...T,checks:[],...normalizeParams(O),entries:I})},_.exclude=(P,O)=>{const I={...T.entries};for(const z of P)if(R.has(z))delete I[z];else throw new Error(`Key ${z} not found in enum`);return new ZodEnum({...T,checks:[],...normalizeParams(O),entries:I})}});function _enum(_,T){const R=Array.isArray(_)?Object.fromEntries(_.map(P=>[P,P])):_;return new ZodEnum({type:"enum",entries:R,...normalizeParams(T)})}const ZodLiteral=$constructor("ZodLiteral",(_,T)=>{$ZodLiteral.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>literalProcessor(_,R,P),_.values=new Set(T.values),Object.defineProperty(_,"value",{get(){if(T.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return T.values[0]}})});function literal(_,T){return new ZodLiteral({type:"literal",values:Array.isArray(_)?_:[_],...normalizeParams(T)})}const ZodTransform=$constructor("ZodTransform",(_,T)=>{$ZodTransform.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>transformProcessor(_,R),_._zod.parse=(R,P)=>{if(P.direction==="backward")throw new $ZodEncodeError(_.constructor.name);R.addIssue=I=>{if(typeof I=="string")R.issues.push(issue(I,R.value,T));else{const z=I;z.fatal&&(z.continue=!1),z.code??(z.code="custom"),z.input??(z.input=R.value),z.inst??(z.inst=_),R.issues.push(issue(z))}};const O=T.transform(R.value,R);return O instanceof Promise?O.then(I=>(R.value=I,R)):(R.value=O,R)}});function transform(_){return new ZodTransform({type:"transform",transform:_})}const ZodOptional=$constructor("ZodOptional",(_,T)=>{$ZodOptional.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>optionalProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType});function optional(_){return new ZodOptional({type:"optional",innerType:_})}const ZodExactOptional=$constructor("ZodExactOptional",(_,T)=>{$ZodExactOptional.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>optionalProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType});function exactOptional(_){return new ZodExactOptional({type:"optional",innerType:_})}const ZodNullable=$constructor("ZodNullable",(_,T)=>{$ZodNullable.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>nullableProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType});function nullable(_){return new ZodNullable({type:"nullable",innerType:_})}const ZodDefault=$constructor("ZodDefault",(_,T)=>{$ZodDefault.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>defaultProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType,_.removeDefault=_.unwrap});function _default(_,T){return new ZodDefault({type:"default",innerType:_,get defaultValue(){return typeof T=="function"?T():shallowClone(T)}})}const ZodPrefault=$constructor("ZodPrefault",(_,T)=>{$ZodPrefault.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>prefaultProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType});function prefault(_,T){return new ZodPrefault({type:"prefault",innerType:_,get defaultValue(){return typeof T=="function"?T():shallowClone(T)}})}const ZodNonOptional=$constructor("ZodNonOptional",(_,T)=>{$ZodNonOptional.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>nonoptionalProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType});function nonoptional(_,T){return new ZodNonOptional({type:"nonoptional",innerType:_,...normalizeParams(T)})}const ZodCatch=$constructor("ZodCatch",(_,T)=>{$ZodCatch.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>catchProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType,_.removeCatch=_.unwrap});function _catch(_,T){return new ZodCatch({type:"catch",innerType:_,catchValue:typeof T=="function"?T:()=>T})}const ZodPipe=$constructor("ZodPipe",(_,T)=>{$ZodPipe.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>pipeProcessor(_,R,P,O),_.in=T.in,_.out=T.out});function pipe(_,T){return new ZodPipe({type:"pipe",in:_,out:T})}const ZodReadonly=$constructor("ZodReadonly",(_,T)=>{$ZodReadonly.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>readonlyProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType});function readonly(_){return new ZodReadonly({type:"readonly",innerType:_})}const ZodCustom=$constructor("ZodCustom",(_,T)=>{$ZodCustom.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>customProcessor(_,R)});function refine(_,T={}){return _refine(ZodCustom,_,T)}function superRefine(_){return _superRefine(_)}const metadataSchema$1=object$1({model:string$1(),version:string$1()}),rgbColorSchema=object$1({r:number$5().min(0).max(255),g:number$5().min(0).max(255),b:number$5().min(0).max(255)});object$1({min:number$5(),max:number$5()});const emtEventTimesSchema=object$1({time_A_start:number$5(),time_A_end:number$5(),time_B_start:number$5(),time_B_end:number$5(),time_S_start:number$5(),time_S_end:number$5(),time_P_start:number$5(),time_P_end:number$5()}),ehtCellTypeSchema=object$1({N_init:number$5().int().nonnegative(),location:string$1(),R_hard:number$5().positive(),R_hard_div:number$5().positive(),R_soft:number$5().positive(),color:rgbColorSchema,dur_G2:number$5().nonnegative(),dur_mitosis:number$5().nonnegative(),k_apical_junction:number$5().nonnegative(),k_cytos:number$5().nonnegative(),max_cytoskeleton_length:number$5().nonnegative(),run:number$5().min(0).max(1),running_speed:number$5().nonnegative(),running_mode:number$5().int().min(0).max(3),stiffness_apical_apical:number$5().nonnegative(),stiffness_apical_apical_div:number$5().nonnegative(),stiffness_nuclei_apical:number$5().nonnegative(),stiffness_nuclei_basal:number$5().nonnegative(),stiffness_repulsion:number$5().nonnegative(),stiffness_straightness:number$5().nonnegative(),lifespan_start:number$5(),lifespan_end:number$5(),INM:number$5().min(0).max(1),hetero:boolean(),events:emtEventTimesSchema,diffusion:number$5().nonnegative(),basal_damping_ratio:number$5().nonnegative(),max_basal_junction_dist:number$5().positive(),cytos_init:number$5().nonnegative(),basal_membrane_repulsion:number$5().nonnegative(),apical_junction_init:number$5().nonnegative()}),ehtGeneralParamsSchema=object$1({t_end:number$5().positive(),dt:number$5().positive(),random_seed:number$5().int(),full_circle:boolean(),w_init:number$5().positive(),h_init:number$5().positive(),mu:number$5().positive(),n_substeps:number$5().int().positive(),alg_dt:number$5().positive(),w_screen:number$5().positive(),h_screen:number$5().positive(),p_div_out:number$5().min(0).max(1),perimeter:number$5().positive(),aspect_ratio:number$5(),hard_sphere_nuclei:boolean()}),ehtCellPropertyParamsSchema=object$1({}),ehtCellTypesMapSchema=record(string$1(),ehtCellTypeSchema),ehtParamsSchema=object$1({metadata:metadataSchema$1,general:ehtGeneralParamsSchema,cell_prop:ehtCellPropertyParamsSchema,cell_types:ehtCellTypesMapSchema}),partialMetadataSchema=metadataSchema$1.partial(),partialEhtGeneralParamsSchema=ehtGeneralParamsSchema.partial(),partialEhtCellPropertyParamsSchema=ehtCellPropertyParamsSchema.partial(),partialEhtCellTypeSchema=ehtCellTypeSchema.partial();object$1({metadata:partialMetadataSchema.optional(),general:partialEhtGeneralParamsSchema.optional(),cell_prop:partialEhtCellPropertyParamsSchema.optional(),cell_types:record(string$1(),partialEhtCellTypeSchema).optional()});const __vite_glob_0_0=`cell_prop = { }
parameter_ranges = [ ]
seeds_per_config = 1

[metadata]
model = "EHT"
version = "1.0.0"

[general]
t_end = 54
dt = 0.1
random_seed = 0
full_circle = false
w_init = 10
h_init = 8
mu = 0.2
n_substeps = 40
alg_dt = 0.05
w_screen = 15
h_screen = 0
p_div_out = 0.8
perimeter = 20
aspect_ratio = 0
hard_sphere_nuclei = false

[cell_types.control]
N_init = 45
location = ""
R_hard = 0.3
R_hard_div = 0.7
R_soft = 1
dur_G2 = 0.5
dur_mitosis = 0.5
k_apical_junction = 1
k_cytos = 5
max_cytoskeleton_length = 0
run = 0
running_speed = 1
running_mode = 0
stiffness_apical_apical = 5
stiffness_apical_apical_div = 10
stiffness_nuclei_apical = 2
stiffness_nuclei_basal = 2
stiffness_repulsion = 1
stiffness_straightness = 15
lifespan_start = 10
lifespan_end = 21
INM = 1
hetero = false
diffusion = 0.1
basal_damping_ratio = 1
max_basal_junction_dist = 0.666666666666666
cytos_init = 1.5
basal_membrane_repulsion = 0
apical_junction_init = 0.333333333333333

  [cell_types.control.color]
  r = 0
  g = 128
  b = 0

  [cell_types.control.events]
  time_A_start = 1e+308
  time_A_end = 1e+308
  time_B_start = 1e+308
  time_B_end = 1e+308
  time_S_start = 1e+308
  time_S_end = 1e+308
  time_P_start = 1e+308
  time_P_end = 1e+308

[cell_types.emt]
N_init = 0
location = "bottom"
R_hard = 0.3
R_hard_div = 0.7
R_soft = 1
dur_G2 = 0.5
dur_mitosis = 0.5
k_apical_junction = 1
k_cytos = 5
max_cytoskeleton_length = 0
run = 0
running_speed = 1
running_mode = 0
stiffness_apical_apical = 5
stiffness_apical_apical_div = 10
stiffness_nuclei_apical = 2
stiffness_nuclei_basal = 2
stiffness_repulsion = 1
stiffness_straightness = 15
lifespan_start = 10
lifespan_end = 21
INM = 0.5
hetero = false
diffusion = 0.1
basal_damping_ratio = 1
max_basal_junction_dist = 0.666666666666666
cytos_init = 1.5
basal_membrane_repulsion = 0
apical_junction_init = 0.333333333333333

  [cell_types.emt.color]
  r = 255
  g = 0
  b = 255

  [cell_types.emt.events]
  time_A_start = 1e+308
  time_A_end = 1e+308
  time_B_start = 1e+308
  time_B_end = 1e+308
  time_S_start = 1e+308
  time_S_end = 1e+308
  time_P_start = 1e+308
  time_P_end = 1e+308

[time_samples]
start = 0
end = 48
step = 12
`,__vite_glob_0_1=`cell_prop = { }
parameter_ranges = [ ]
seeds_per_config = 1

[metadata]
model = "EHT"
version = "1.0.0"

[general]
t_end = 54
dt = 0.1
random_seed = 0
full_circle = false
w_init = 10
h_init = 8
mu = 0.2
n_substeps = 40
alg_dt = 0.05
w_screen = 15
h_screen = 0
p_div_out = 0.8
perimeter = 20
aspect_ratio = 0
hard_sphere_nuclei = false

[cell_types.control]
N_init = 50
location = ""
R_hard = 0.3
R_hard_div = 0.7
R_soft = 1
dur_G2 = 0.5
dur_mitosis = 0.5
k_apical_junction = 1
k_cytos = 5
max_cytoskeleton_length = 0
run = 0
running_speed = 1
running_mode = 0
stiffness_apical_apical = 5
stiffness_apical_apical_div = 10
stiffness_nuclei_apical = 2
stiffness_nuclei_basal = 2
stiffness_repulsion = 1
stiffness_straightness = 15
lifespan_start = 10
lifespan_end = 21
INM = 1
hetero = false
diffusion = 0.1
basal_damping_ratio = 1
max_basal_junction_dist = 0.666666666666666
cytos_init = 1.5
basal_membrane_repulsion = 0
apical_junction_init = 0.333333333333333

  [cell_types.control.color]
  r = 0
  g = 128
  b = 0

  [cell_types.control.events]
  time_A_start = 1e+308
  time_A_end = 1e+308
  time_B_start = 1e+308
  time_B_end = 1e+308
  time_S_start = 1e+308
  time_S_end = 1e+308
  time_P_start = 1e+308
  time_P_end = 1e+308

[cell_types.emt]
N_init = 1
location = "bottom"
R_hard = 0.3
R_hard_div = 0.7
R_soft = 1
dur_G2 = 0.5
dur_mitosis = 0.5
k_apical_junction = 1
k_cytos = 5
max_cytoskeleton_length = 0
run = 0
running_speed = 1
running_mode = 0
stiffness_apical_apical = 5
stiffness_apical_apical_div = 10
stiffness_nuclei_apical = 2
stiffness_nuclei_basal = 2
stiffness_repulsion = 1
stiffness_straightness = 15
lifespan_start = 10
lifespan_end = 21
INM = 1
hetero = false
diffusion = 0.1
basal_damping_ratio = 1
max_basal_junction_dist = 0.666666666666666
cytos_init = 1.5
basal_membrane_repulsion = 0
apical_junction_init = 0.333333333333333

  [cell_types.emt.color]
  r = 255
  g = 0
  b = 255

  [cell_types.emt.events]
  time_A_start = 1e+308
  time_A_end = 1e+308
  time_B_start = 1e+308
  time_B_end = 1e+308
  time_S_start = 1e+308
  time_S_end = 1e+308
  time_P_start = 1e+308
  time_P_end = 1e+308

[time_samples]
start = 0
end = 48
step = 12
`,__vite_glob_0_2=`cell_prop = { }
parameter_ranges = [ ]
seeds_per_config = 1

[metadata]
model = "EHT"
version = "1.0.0"

[general]
t_end = 80
dt = 0.05
random_seed = 0
full_circle = false
w_init = 20
h_init = 2
mu = 0.1
n_substeps = 40
alg_dt = 0.01
w_screen = 30
h_screen = 0
p_div_out = 0.9
perimeter = 40
aspect_ratio = 0
hard_sphere_nuclei = false

[cell_types.control]
N_init = 29
location = ""
R_hard = 0.3
R_hard_div = 0.7
R_soft = 1
dur_G2 = 0.5
dur_mitosis = 0.5
k_apical_junction = 5
k_cytos = 5
max_cytoskeleton_length = 0
run = 0
running_speed = 1
running_mode = 0
stiffness_apical_apical = 5
stiffness_apical_apical_div = 10
stiffness_nuclei_apical = 2
stiffness_nuclei_basal = 2
stiffness_repulsion = 4
stiffness_straightness = 15
lifespan_start = 10
lifespan_end = 21
INM = 1
hetero = false
diffusion = 0.1
basal_damping_ratio = 1
max_basal_junction_dist = 4
cytos_init = 1.5
basal_membrane_repulsion = 0.1
apical_junction_init = 0.333333333333333

  [cell_types.control.color]
  r = 0
  g = 128
  b = 0

  [cell_types.control.events]
  time_A_start = 1e+308
  time_A_end = 1e+308
  time_B_start = 1e+308
  time_B_end = 1e+308
  time_S_start = 1e+308
  time_S_end = 1e+308
  time_P_start = 1e+308
  time_P_end = 1e+308

[cell_types.emt]
N_init = 1
location = "bottom"
R_hard = 0.3
R_hard_div = 0.7
R_soft = 1
dur_G2 = 0.5
dur_mitosis = 0.5
k_apical_junction = 5
k_cytos = 5
max_cytoskeleton_length = 0
run = 0
running_speed = 1
running_mode = 0
stiffness_apical_apical = 5
stiffness_apical_apical_div = 10
stiffness_nuclei_apical = 2
stiffness_nuclei_basal = 2
stiffness_repulsion = 4
stiffness_straightness = 15
lifespan_start = 10
lifespan_end = 21
INM = 1
hetero = false
diffusion = 0.1
basal_damping_ratio = 1
max_basal_junction_dist = 4
cytos_init = 1.5
basal_membrane_repulsion = 0.1
apical_junction_init = 0.333333333333333

  [cell_types.emt.color]
  r = 255
  g = 0
  b = 255

  [cell_types.emt.events]
  time_A_start = 1e+308
  time_A_end = 1e+308
  time_B_start = 1e+308
  time_B_end = 1e+308
  time_S_start = 1e+308
  time_S_end = 1e+308
  time_P_start = 1e+308
  time_P_end = 1e+308

[time_samples]
start = 0
end = 48
step = 12
`,__vite_glob_0_3=`cell_prop = { }
parameter_ranges = [ ]
seeds_per_config = 1

[metadata]
model = "EHT"
version = "1.0.0"

[general]
t_end = 60
dt = 0.05
random_seed = 0
full_circle = false
w_init = 10
h_init = 5
mu = 0.2
n_substeps = 40
alg_dt = 0.01
w_screen = 15
h_screen = 0
p_div_out = 0.95
perimeter = 20
aspect_ratio = 0
hard_sphere_nuclei = false

[cell_types.control]
N_init = 29
location = ""
R_hard = 0.4
R_hard_div = 0.9333333333333332
R_soft = 1.2
dur_G2 = 0.5
dur_mitosis = 0.5
k_apical_junction = 1
k_cytos = 5
max_cytoskeleton_length = 0
run = 0
running_speed = 1
running_mode = 0
stiffness_apical_apical = 2
stiffness_apical_apical_div = 4
stiffness_nuclei_apical = 2
stiffness_nuclei_basal = 2
stiffness_repulsion = 4
stiffness_straightness = 15
lifespan_start = 5.5
lifespan_end = 6.5
INM = 1
hetero = false
diffusion = 0.1
basal_damping_ratio = 1
max_basal_junction_dist = 2
cytos_init = 1.5
basal_membrane_repulsion = 0.1
apical_junction_init = 0.333333333333333

  [cell_types.control.color]
  r = 0
  g = 128
  b = 0

  [cell_types.control.events]
  time_A_start = 1e+308
  time_A_end = 1e+308
  time_B_start = 1e+308
  time_B_end = 1e+308
  time_S_start = 1e+308
  time_S_end = 1e+308
  time_P_start = 1e+308
  time_P_end = 1e+308

[cell_types.emt]
N_init = 1
location = "bottom"
R_hard = 0.4
R_hard_div = 0.9333333333333332
R_soft = 1.2
dur_G2 = 0.5
dur_mitosis = 0.5
k_apical_junction = 1
k_cytos = 5
max_cytoskeleton_length = 0
run = 0
running_speed = 1
running_mode = 0
stiffness_apical_apical = 2
stiffness_apical_apical_div = 4
stiffness_nuclei_apical = 2
stiffness_nuclei_basal = 2
stiffness_repulsion = 4
stiffness_straightness = 15
lifespan_start = 5.5
lifespan_end = 6.5
INM = 0
hetero = true
diffusion = 0.1
basal_damping_ratio = 1
max_basal_junction_dist = 2
cytos_init = 1.5
basal_membrane_repulsion = 0.1
apical_junction_init = 0.333333333333333

  [cell_types.emt.color]
  r = 255
  g = 0
  b = 255

  [cell_types.emt.events]
  time_A_start = 1e+308
  time_A_end = 1e+308
  time_B_start = 6
  time_B_end = 1e+308
  time_S_start = 1e+308
  time_S_end = 1e+308
  time_P_start = 1e+308
  time_P_end = 1e+308

[time_samples]
start = 0
end = 48
step = 12
`,__vite_glob_0_4=`cell_prop = { }
parameter_ranges = [ ]
seeds_per_config = 1

[metadata]
model = "EHT"
version = "1.0.0"

[general]
t_end = 80
dt = 0.05
random_seed = 0
full_circle = false
w_init = 20
h_init = 2
mu = 0.5
n_substeps = 40
alg_dt = 0.01
w_screen = 30
h_screen = 0
p_div_out = 0.9
perimeter = 40
aspect_ratio = 0
hard_sphere_nuclei = false

[cell_types.control]
N_init = 29
location = ""
R_hard = 0.3
R_hard_div = 0.7
R_soft = 1
dur_G2 = 0.5
dur_mitosis = 0.5
k_apical_junction = 0.01
k_cytos = 5
max_cytoskeleton_length = 0
run = 0
running_speed = 1
running_mode = 0
stiffness_apical_apical = 8
stiffness_apical_apical_div = 16
stiffness_nuclei_apical = 2
stiffness_nuclei_basal = 2
stiffness_repulsion = 4
stiffness_straightness = 15
lifespan_start = 10
lifespan_end = 21
INM = 1
hetero = false
diffusion = 0.1
basal_damping_ratio = 1
max_basal_junction_dist = 1.2
cytos_init = 1.5
basal_membrane_repulsion = 0.1
apical_junction_init = 0.333333333333333

  [cell_types.control.color]
  r = 0
  g = 128
  b = 0

  [cell_types.control.events]
  time_A_start = 1e+308
  time_A_end = 1e+308
  time_B_start = 1e+308
  time_B_end = 1e+308
  time_S_start = 1e+308
  time_S_end = 1e+308
  time_P_start = 1e+308
  time_P_end = 1e+308

[cell_types.emt]
N_init = 1
location = "bottom"
R_hard = 0.3
R_hard_div = 0.7
R_soft = 1
dur_G2 = 0.5
dur_mitosis = 0.5
k_apical_junction = 0.01
k_cytos = 5
max_cytoskeleton_length = 0
run = 0
running_speed = 1
running_mode = 0
stiffness_apical_apical = 8
stiffness_apical_apical_div = 16
stiffness_nuclei_apical = 2
stiffness_nuclei_basal = 2
stiffness_repulsion = 4
stiffness_straightness = 15
lifespan_start = 10
lifespan_end = 21
INM = 1
hetero = false
diffusion = 0.1
basal_damping_ratio = 1
max_basal_junction_dist = 1.2
cytos_init = 1.5
basal_membrane_repulsion = 0.1
apical_junction_init = 0.333333333333333

  [cell_types.emt.color]
  r = 255
  g = 0
  b = 255

  [cell_types.emt.events]
  time_A_start = 1e+308
  time_A_end = 1e+308
  time_B_start = 1e+308
  time_B_end = 1e+308
  time_S_start = 1e+308
  time_S_end = 1e+308
  time_P_start = 1e+308
  time_P_end = 1e+308

[time_samples]
start = 0
end = 48
step = 12
`;var freeGlobal=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root$1.Symbol,objectProto$d=Object.prototype,hasOwnProperty$a=objectProto$d.hasOwnProperty,nativeObjectToString$1=objectProto$d.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(_){var T=hasOwnProperty$a.call(_,symToStringTag$1),R=_[symToStringTag$1];try{_[symToStringTag$1]=void 0;var P=!0}catch{}var O=nativeObjectToString$1.call(_);return P&&(T?_[symToStringTag$1]=R:delete _[symToStringTag$1]),O}var objectProto$c=Object.prototype,nativeObjectToString=objectProto$c.toString;function objectToString$1(_){return nativeObjectToString.call(_)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(_){return _==null?_===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(_)?getRawTag(_):objectToString$1(_)}function isObjectLike(_){return _!=null&&typeof _=="object"}var isArray$1=Array.isArray;function isObject$1(_){var T=typeof _;return _!=null&&(T=="object"||T=="function")}function identity$9(_){return _}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(_){if(!isObject$1(_))return!1;var T=baseGetTag(_);return T==funcTag$2||T==genTag$1||T==asyncTag||T==proxyTag}var coreJsData=root$1["__core-js_shared__"],maskSrcKey=(function(){var _=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""})();function isMasked(_){return!!maskSrcKey&&maskSrcKey in _}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(_){if(_!=null){try{return funcToString$2.call(_)}catch{}try{return _+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$b=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$9=objectProto$b.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$9).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(_){if(!isObject$1(_)||isMasked(_))return!1;var T=isFunction$2(_)?reIsNative:reIsHostCtor;return T.test(toSource(_))}function getValue(_,T){return _?.[T]}function getNative(_,T){var R=getValue(_,T);return baseIsNative(R)?R:void 0}var WeakMap$1=getNative(root$1,"WeakMap"),objectCreate=Object.create,baseCreate=(function(){function _(){}return function(T){if(!isObject$1(T))return{};if(objectCreate)return objectCreate(T);_.prototype=T;var R=new _;return _.prototype=void 0,R}})();function apply$1(_,T,R){switch(R.length){case 0:return _.call(T);case 1:return _.call(T,R[0]);case 2:return _.call(T,R[0],R[1]);case 3:return _.call(T,R[0],R[1],R[2])}return _.apply(T,R)}function copyArray(_,T){var R=-1,P=_.length;for(T||(T=Array(P));++R<P;)T[R]=_[R];return T}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(_){var T=0,R=0;return function(){var P=nativeNow(),O=HOT_SPAN-(P-R);if(R=P,O>0){if(++T>=HOT_COUNT)return arguments[0]}else T=0;return _.apply(void 0,arguments)}}function constant$4(_){return function(){return _}}var defineProperty=(function(){try{var _=getNative(Object,"defineProperty");return _({},"",{}),_}catch{}})(),baseSetToString=defineProperty?function(_,T){return defineProperty(_,"toString",{configurable:!0,enumerable:!1,value:constant$4(T),writable:!0})}:identity$9,setToString=shortOut(baseSetToString);function arrayEach(_,T){for(var R=-1,P=_==null?0:_.length;++R<P&&T(_[R],R,_)!==!1;);return _}var MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(_,T){var R=typeof _;return T=T??MAX_SAFE_INTEGER$1,!!T&&(R=="number"||R!="symbol"&&reIsUint.test(_))&&_>-1&&_%1==0&&_<T}function baseAssignValue(_,T,R){T=="__proto__"&&defineProperty?defineProperty(_,T,{configurable:!0,enumerable:!0,value:R,writable:!0}):_[T]=R}function eq(_,T){return _===T||_!==_&&T!==T}var objectProto$a=Object.prototype,hasOwnProperty$8=objectProto$a.hasOwnProperty;function assignValue(_,T,R){var P=_[T];(!(hasOwnProperty$8.call(_,T)&&eq(P,R))||R===void 0&&!(T in _))&&baseAssignValue(_,T,R)}function copyObject(_,T,R,P){var O=!R;R||(R={});for(var I=-1,z=T.length;++I<z;){var F=T[I],G=void 0;G===void 0&&(G=_[F]),O?baseAssignValue(R,F,G):assignValue(R,F,G)}return R}var nativeMax=Math.max;function overRest(_,T,R){return T=nativeMax(T===void 0?_.length-1:T,0),function(){for(var P=arguments,O=-1,I=nativeMax(P.length-T,0),z=Array(I);++O<I;)z[O]=P[T+O];O=-1;for(var F=Array(T+1);++O<T;)F[O]=P[O];return F[T]=R(z),apply$1(_,this,F)}}function baseRest(_,T){return setToString(overRest(_,T,identity$9),_+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=MAX_SAFE_INTEGER}function isArrayLike(_){return _!=null&&isLength(_.length)&&!isFunction$2(_)}function isIterateeCall(_,T,R){if(!isObject$1(R))return!1;var P=typeof T;return(P=="number"?isArrayLike(R)&&isIndex(T,R.length):P=="string"&&T in R)?eq(R[T],_):!1}function createAssigner(_){return baseRest(function(T,R){var P=-1,O=R.length,I=O>1?R[O-1]:void 0,z=O>2?R[2]:void 0;for(I=_.length>3&&typeof I=="function"?(O--,I):void 0,z&&isIterateeCall(R[0],R[1],z)&&(I=O<3?void 0:I,O=1),T=Object(T);++P<O;){var F=R[P];F&&_(T,F,P,I)}return T})}var objectProto$9=Object.prototype;function isPrototype(_){var T=_&&_.constructor,R=typeof T=="function"&&T.prototype||objectProto$9;return _===R}function baseTimes(_,T){for(var R=-1,P=Array(_);++R<_;)P[R]=T(R);return P}var argsTag$2="[object Arguments]";function baseIsArguments(_){return isObjectLike(_)&&baseGetTag(_)==argsTag$2}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty,propertyIsEnumerable$1=objectProto$8.propertyIsEnumerable,isArguments=baseIsArguments((function(){return arguments})())?baseIsArguments:function(_){return isObjectLike(_)&&hasOwnProperty$7.call(_,"callee")&&!propertyIsEnumerable$1.call(_,"callee")};function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$1="[object Error]",funcTag$1="[object Function]",mapTag$4="[object Map]",numberTag$2="[object Number]",objectTag$3="[object Object]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$2]=typedArrayTags[boolTag$2]=typedArrayTags[dataViewTag$3]=typedArrayTags[dateTag$2]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$4]=typedArrayTags[numberTag$2]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag$2]=typedArrayTags[setTag$4]=typedArrayTags[stringTag$2]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(_){return isObjectLike(_)&&isLength(_.length)&&!!typedArrayTags[baseGetTag(_)]}function baseUnary(_){return function(T){return _(T)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=(function(){try{var _=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return _||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}})(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function arrayLikeKeys(_,T){var R=isArray$1(_),P=!R&&isArguments(_),O=!R&&!P&&isBuffer(_),I=!R&&!P&&!O&&isTypedArray(_),z=R||P||O||I,F=z?baseTimes(_.length,String):[],G=F.length;for(var V in _)(T||hasOwnProperty$6.call(_,V))&&!(z&&(V=="length"||O&&(V=="offset"||V=="parent")||I&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||isIndex(V,G)))&&F.push(V);return F}function overArg(_,T){return function(R){return _(T(R))}}var nativeKeys=overArg(Object.keys,Object),objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function baseKeys(_){if(!isPrototype(_))return nativeKeys(_);var T=[];for(var R in Object(_))hasOwnProperty$5.call(_,R)&&R!="constructor"&&T.push(R);return T}function keys(_){return isArrayLike(_)?arrayLikeKeys(_):baseKeys(_)}function nativeKeysIn(_){var T=[];if(_!=null)for(var R in Object(_))T.push(R);return T}var objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function baseKeysIn(_){if(!isObject$1(_))return nativeKeysIn(_);var T=isPrototype(_),R=[];for(var P in _)P=="constructor"&&(T||!hasOwnProperty$4.call(_,P))||R.push(P);return R}function keysIn(_){return isArrayLike(_)?arrayLikeKeys(_,!0):baseKeysIn(_)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(_){var T=this.has(_)&&delete this.__data__[_];return this.size-=T?1:0,T}var HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function hashGet(_){var T=this.__data__;if(nativeCreate){var R=T[_];return R===HASH_UNDEFINED$1?void 0:R}return hasOwnProperty$3.call(T,_)?T[_]:void 0}var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function hashHas(_){var T=this.__data__;return nativeCreate?T[_]!==void 0:hasOwnProperty$2.call(T,_)}var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(_,T){var R=this.__data__;return this.size+=this.has(_)?0:1,R[_]=nativeCreate&&T===void 0?HASH_UNDEFINED:T,this}function Hash(_){var T=-1,R=_==null?0:_.length;for(this.clear();++T<R;){var P=_[T];this.set(P[0],P[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(_,T){for(var R=_.length;R--;)if(eq(_[R][0],T))return R;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(_){var T=this.__data__,R=assocIndexOf(T,_);if(R<0)return!1;var P=T.length-1;return R==P?T.pop():splice.call(T,R,1),--this.size,!0}function listCacheGet(_){var T=this.__data__,R=assocIndexOf(T,_);return R<0?void 0:T[R][1]}function listCacheHas(_){return assocIndexOf(this.__data__,_)>-1}function listCacheSet(_,T){var R=this.__data__,P=assocIndexOf(R,_);return P<0?(++this.size,R.push([_,T])):R[P][1]=T,this}function ListCache(_){var T=-1,R=_==null?0:_.length;for(this.clear();++T<R;){var P=_[T];this.set(P[0],P[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$1,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(_){var T=typeof _;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?_!=="__proto__":_===null}function getMapData(_,T){var R=_.__data__;return isKeyable(T)?R[typeof T=="string"?"string":"hash"]:R.map}function mapCacheDelete(_){var T=getMapData(this,_).delete(_);return this.size-=T?1:0,T}function mapCacheGet(_){return getMapData(this,_).get(_)}function mapCacheHas(_){return getMapData(this,_).has(_)}function mapCacheSet(_,T){var R=getMapData(this,_),P=R.size;return R.set(_,T),this.size+=R.size==P?0:1,this}function MapCache(_){var T=-1,R=_==null?0:_.length;for(this.clear();++T<R;){var P=_[T];this.set(P[0],P[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function arrayPush(_,T){for(var R=-1,P=T.length,O=_.length;++R<P;)_[O+R]=T[R];return _}var getPrototype=overArg(Object.getPrototypeOf,Object),objectTag$2="[object Object]",funcProto=Function.prototype,objectProto$2=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$1=objectProto$2.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(_){if(!isObjectLike(_)||baseGetTag(_)!=objectTag$2)return!1;var T=getPrototype(_);if(T===null)return!0;var R=hasOwnProperty$1.call(T,"constructor")&&T.constructor;return typeof R=="function"&&R instanceof R&&funcToString.call(R)==objectCtorString}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(_){var T=this.__data__,R=T.delete(_);return this.size=T.size,R}function stackGet(_){return this.__data__.get(_)}function stackHas(_){return this.__data__.has(_)}var LARGE_ARRAY_SIZE=200;function stackSet(_,T){var R=this.__data__;if(R instanceof ListCache){var P=R.__data__;if(!Map$1||P.length<LARGE_ARRAY_SIZE-1)return P.push([_,T]),this.size=++R.size,this;R=this.__data__=new MapCache(P)}return R.set(_,T),this.size=R.size,this}function Stack(_){var T=this.__data__=new ListCache(_);this.size=T.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(_,T){if(T)return _.slice();var R=_.length,P=allocUnsafe?allocUnsafe(R):new _.constructor(R);return _.copy(P),P}function arrayFilter(_,T){for(var R=-1,P=_==null?0:_.length,O=0,I=[];++R<P;){var z=_[R];T(z,R,_)&&(I[O++]=z)}return I}function stubArray(){return[]}var objectProto$1=Object.prototype,propertyIsEnumerable=objectProto$1.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(_){return _==null?[]:(_=Object(_),arrayFilter(nativeGetSymbols(_),function(T){return propertyIsEnumerable.call(_,T)}))}:stubArray;function baseGetAllKeys(_,T,R){var P=T(_);return isArray$1(_)?P:arrayPush(P,R(_))}function getAllKeys(_){return baseGetAllKeys(_,keys,getSymbols)}var DataView$1=getNative(root$1,"DataView"),Promise$1=getNative(root$1,"Promise"),Set$1=getNative(root$1,"Set"),mapTag$3="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$3="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$2="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$2||Map$1&&getTag(new Map$1)!=mapTag$3||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$3||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag$1)&&(getTag=function(_){var T=baseGetTag(_),R=T==objectTag$1?_.constructor:void 0,P=R?toSource(R):"";if(P)switch(P){case dataViewCtorString:return dataViewTag$2;case mapCtorString:return mapTag$3;case promiseCtorString:return promiseTag;case setCtorString:return setTag$3;case weakMapCtorString:return weakMapTag$1}return T});var objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function initCloneArray(_){var T=_.length,R=new _.constructor(T);return T&&typeof _[0]=="string"&&hasOwnProperty.call(_,"index")&&(R.index=_.index,R.input=_.input),R}var Uint8Array$1=root$1.Uint8Array;function cloneArrayBuffer(_){var T=new _.constructor(_.byteLength);return new Uint8Array$1(T).set(new Uint8Array$1(_)),T}function cloneDataView(_,T){var R=cloneArrayBuffer(_.buffer);return new _.constructor(R,_.byteOffset,_.byteLength)}var reFlags=/\w*$/;function cloneRegExp(_){var T=new _.constructor(_.source,reFlags.exec(_));return T.lastIndex=_.lastIndex,T}var symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function cloneSymbol(_){return symbolValueOf?Object(symbolValueOf.call(_)):{}}function cloneTypedArray(_,T){var R=T?cloneArrayBuffer(_.buffer):_.buffer;return new _.constructor(R,_.byteOffset,_.length)}var boolTag$1="[object Boolean]",dateTag$1="[object Date]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(_,T,R){var P=_.constructor;switch(T){case arrayBufferTag$1:return cloneArrayBuffer(_);case boolTag$1:case dateTag$1:return new P(+_);case dataViewTag$1:return cloneDataView(_);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(_,R);case mapTag$2:return new P;case numberTag$1:case stringTag$1:return new P(_);case regexpTag$1:return cloneRegExp(_);case setTag$2:return new P;case symbolTag$1:return cloneSymbol(_)}}function initCloneObject(_){return typeof _.constructor=="function"&&!isPrototype(_)?baseCreate(getPrototype(_)):{}}var mapTag$1="[object Map]";function baseIsMap(_){return isObjectLike(_)&&getTag(_)==mapTag$1}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$1="[object Set]";function baseIsSet(_){return isObjectLike(_)&&getTag(_)==setTag$1}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG$1=1,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(_,T,R,P,O,I){var z,F=T&CLONE_DEEP_FLAG$1;if(z!==void 0)return z;if(!isObject$1(_))return _;var G=isArray$1(_);if(G)z=initCloneArray(_);else{var V=getTag(_),Z=V==funcTag||V==genTag;if(isBuffer(_))return cloneBuffer(_,F);if(V==objectTag||V==argsTag||Z&&!O)z=Z?{}:initCloneObject(_);else{if(!cloneableTags[V])return O?_:{};z=initCloneByTag(_,V,F)}}I||(I=new Stack);var Y=I.get(_);if(Y)return Y;I.set(_,z),isSet(_)?_.forEach(function(ee){z.add(baseClone(ee,T,R,ee,_,I))}):isMap(_)&&_.forEach(function(ee,ne){z.set(ne,baseClone(ee,T,R,ne,_,I))});var Q=getAllKeys,J=G?void 0:Q(_);return arrayEach(J||_,function(ee,ne){J&&(ne=ee,ee=_[ne]),assignValue(z,ne,baseClone(ee,T,R,ne,_,I))}),z}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(_){return baseClone(_,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}function createBaseFor(_){return function(T,R,P){for(var O=-1,I=Object(T),z=P(T),F=z.length;F--;){var G=z[++O];if(R(I[G],G,I)===!1)break}return T}}var baseFor=createBaseFor();function assignMergeValue(_,T,R){(R!==void 0&&!eq(_[T],R)||R===void 0&&!(T in _))&&baseAssignValue(_,T,R)}function isArrayLikeObject(_){return isObjectLike(_)&&isArrayLike(_)}function safeGet(_,T){if(!(T==="constructor"&&typeof _[T]=="function")&&T!="__proto__")return _[T]}function toPlainObject(_){return copyObject(_,keysIn(_))}function baseMergeDeep(_,T,R,P,O,I,z){var F=safeGet(_,R),G=safeGet(T,R),V=z.get(G);if(V){assignMergeValue(_,R,V);return}var Z=I?I(F,G,R+"",_,T,z):void 0,Y=Z===void 0;if(Y){var Q=isArray$1(G),J=!Q&&isBuffer(G),ee=!Q&&!J&&isTypedArray(G);Z=G,Q||J||ee?isArray$1(F)?Z=F:isArrayLikeObject(F)?Z=copyArray(F):J?(Y=!1,Z=cloneBuffer(G,!0)):ee?(Y=!1,Z=cloneTypedArray(G,!0)):Z=[]:isPlainObject(G)||isArguments(G)?(Z=F,isArguments(F)?Z=toPlainObject(F):(!isObject$1(F)||isFunction$2(F))&&(Z=initCloneObject(G))):Y=!1}Y&&(z.set(G,Z),O(Z,G,P,I,z),z.delete(G)),assignMergeValue(_,R,Z)}function baseMerge(_,T,R,P,O){_!==T&&baseFor(T,function(I,z){if(O||(O=new Stack),isObject$1(I))baseMergeDeep(_,T,z,R,baseMerge,P,O);else{var F=P?P(safeGet(_,z),I,z+"",_,T,O):void 0;F===void 0&&(F=I),assignMergeValue(_,z,F)}},keysIn)}var mergeWith=createAssigner(function(_,T,R,P){baseMerge(_,T,R,P)}),merge$1=createAssigner(function(_,T,R){baseMerge(_,T,R)}),toml={},parse$3={exports:{}},tomlParser={exports:{}},parser,hasRequiredParser;function requireParser(){if(hasRequiredParser)return parser;hasRequiredParser=1;const _=1114112;class T extends Error{constructor(I,z,F){super("[ParserError] "+I,z,F),this.name="ParserError",this.code="ParserError",Error.captureStackTrace&&Error.captureStackTrace(this,T)}}class R{constructor(I){this.parser=I,this.buf="",this.returned=null,this.result=null,this.resultTable=null,this.resultArr=null}}class P{constructor(){this.pos=0,this.col=0,this.line=0,this.obj={},this.ctx=this.obj,this.stack=[],this._buf="",this.char=null,this.ii=0,this.state=new R(this.parseStart)}parse(I){if(I.length===0||I.length==null)return;this._buf=String(I),this.ii=-1,this.char=-1;let z;for(;z===!1||this.nextChar();)z=this.runOne();this._buf=null}nextChar(){return this.char===10&&(++this.line,this.col=-1),++this.ii,this.char=this._buf.codePointAt(this.ii),++this.pos,++this.col,this.haveBuffer()}haveBuffer(){return this.ii<this._buf.length}runOne(){return this.state.parser.call(this,this.state.returned)}finish(){this.char=_;let I;do I=this.state.parser,this.runOne();while(this.state.parser!==I);return this.ctx=null,this.state=null,this._buf=null,this.obj}next(I){if(typeof I!="function")throw new T("Tried to set state to non-existent state: "+JSON.stringify(I));this.state.parser=I}goto(I){return this.next(I),this.runOne()}call(I,z){z&&this.next(z),this.stack.push(this.state),this.state=new R(I)}callNow(I,z){return this.call(I,z),this.runOne()}return(I){if(this.stack.length===0)throw this.error(new T("Stack underflow"));I===void 0&&(I=this.state.buf),this.state=this.stack.pop(),this.state.returned=I}returnNow(I){return this.return(I),this.runOne()}consume(){if(this.char===_)throw this.error(new T("Unexpected end-of-buffer"));this.state.buf+=this._buf[this.ii]}error(I){return I.line=this.line,I.col=this.col,I.pos=this.pos,I}parseStart(){throw new T("Must declare a parseStart method")}}return P.END=_,P.Error=T,parser=P,parser}var createDatetime,hasRequiredCreateDatetime;function requireCreateDatetime(){return hasRequiredCreateDatetime||(hasRequiredCreateDatetime=1,createDatetime=_=>{const T=new Date(_);if(isNaN(T))throw new TypeError("Invalid Datetime");return T}),createDatetime}var formatNum,hasRequiredFormatNum;function requireFormatNum(){return hasRequiredFormatNum||(hasRequiredFormatNum=1,formatNum=(_,T)=>{for(T=String(T);T.length<_;)T="0"+T;return T}),formatNum}var createDatetimeFloat,hasRequiredCreateDatetimeFloat;function requireCreateDatetimeFloat(){if(hasRequiredCreateDatetimeFloat)return createDatetimeFloat;hasRequiredCreateDatetimeFloat=1;const _=requireFormatNum();class T extends Date{constructor(P){super(P+"Z"),this.isFloating=!0}toISOString(){const P=`${this.getUTCFullYear()}-${_(2,this.getUTCMonth()+1)}-${_(2,this.getUTCDate())}`,O=`${_(2,this.getUTCHours())}:${_(2,this.getUTCMinutes())}:${_(2,this.getUTCSeconds())}.${_(3,this.getUTCMilliseconds())}`;return`${P}T${O}`}}return createDatetimeFloat=R=>{const P=new T(R);if(isNaN(P))throw new TypeError("Invalid Datetime");return P},createDatetimeFloat}var createDate,hasRequiredCreateDate;function requireCreateDate(){if(hasRequiredCreateDate)return createDate;hasRequiredCreateDate=1;const _=requireFormatNum(),T=globalThis.Date;class R extends T{constructor(O){super(O),this.isDate=!0}toISOString(){return`${this.getUTCFullYear()}-${_(2,this.getUTCMonth()+1)}-${_(2,this.getUTCDate())}`}}return createDate=P=>{const O=new R(P);if(isNaN(O))throw new TypeError("Invalid Datetime");return O},createDate}var createTime,hasRequiredCreateTime;function requireCreateTime(){if(hasRequiredCreateTime)return createTime;hasRequiredCreateTime=1;const _=requireFormatNum();class T extends Date{constructor(P){super(`0000-01-01T${P}Z`),this.isTime=!0}toISOString(){return`${_(2,this.getUTCHours())}:${_(2,this.getUTCMinutes())}:${_(2,this.getUTCSeconds())}.${_(3,this.getUTCMilliseconds())}`}}return createTime=R=>{const P=new T(R);if(isNaN(P))throw new TypeError("Invalid Datetime");return P},createTime}var hasRequiredTomlParser;function requireTomlParser(){if(hasRequiredTomlParser)return tomlParser.exports;hasRequiredTomlParser=1,tomlParser.exports=makeParserClass(requireParser()),tomlParser.exports.makeParserClass=makeParserClass;class TomlError extends Error{constructor(T){super(T),this.name="TomlError",Error.captureStackTrace&&Error.captureStackTrace(this,TomlError),this.fromTOML=!0,this.wrapped=null}}TomlError.wrap=_=>{const T=new TomlError(_.message);return T.code=_.code,T.wrapped=_,T},tomlParser.exports.TomlError=TomlError;const createDateTime=requireCreateDatetime(),createDateTimeFloat=requireCreateDatetimeFloat(),createDate=requireCreateDate(),createTime=requireCreateTime(),CTRL_I=9,CTRL_J=10,CTRL_M=13,CTRL_CHAR_BOUNDARY=31,CHAR_SP=32,CHAR_QUOT=34,CHAR_NUM=35,CHAR_APOS=39,CHAR_PLUS=43,CHAR_COMMA=44,CHAR_HYPHEN=45,CHAR_PERIOD=46,CHAR_0=48,CHAR_1=49,CHAR_7=55,CHAR_9=57,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_A=65,CHAR_E=69,CHAR_F=70,CHAR_T=84,CHAR_U=85,CHAR_Z=90,CHAR_LOWBAR=95,CHAR_a=97,CHAR_b=98,CHAR_e=101,CHAR_f=102,CHAR_i=105,CHAR_l=108,CHAR_n=110,CHAR_o=111,CHAR_r=114,CHAR_s=115,CHAR_t=116,CHAR_u=117,CHAR_x=120,CHAR_z=122,CHAR_LCUB=123,CHAR_RCUB=125,CHAR_LSQB=91,CHAR_BSOL=92,CHAR_RSQB=93,CHAR_DEL=127,SURROGATE_FIRST=55296,SURROGATE_LAST=57343,escapes={[CHAR_b]:"\b",[CHAR_t]:"	",[CHAR_n]:`
`,[CHAR_f]:"\f",[CHAR_r]:"\r",[CHAR_QUOT]:'"',[CHAR_BSOL]:"\\"};function isDigit(_){return _>=CHAR_0&&_<=CHAR_9}function isHexit(_){return _>=CHAR_A&&_<=CHAR_F||_>=CHAR_a&&_<=CHAR_f||_>=CHAR_0&&_<=CHAR_9}function isBit(_){return _===CHAR_1||_===CHAR_0}function isOctit(_){return _>=CHAR_0&&_<=CHAR_7}function isAlphaNumQuoteHyphen(_){return _>=CHAR_A&&_<=CHAR_Z||_>=CHAR_a&&_<=CHAR_z||_>=CHAR_0&&_<=CHAR_9||_===CHAR_APOS||_===CHAR_QUOT||_===CHAR_LOWBAR||_===CHAR_HYPHEN}function isAlphaNumHyphen(_){return _>=CHAR_A&&_<=CHAR_Z||_>=CHAR_a&&_<=CHAR_z||_>=CHAR_0&&_<=CHAR_9||_===CHAR_LOWBAR||_===CHAR_HYPHEN}const _type=Symbol("type"),_declared=Symbol("declared"),hasOwnProperty=Object.prototype.hasOwnProperty,defineProperty=Object.defineProperty,descriptor={configurable:!0,enumerable:!0,writable:!0,value:void 0};function hasKey(_,T){return hasOwnProperty.call(_,T)?!0:(T==="__proto__"&&defineProperty(_,"__proto__",descriptor),!1)}const INLINE_TABLE=Symbol("inline-table");function InlineTable(){return Object.defineProperties({},{[_type]:{value:INLINE_TABLE}})}function isInlineTable(_){return _===null||typeof _!="object"?!1:_[_type]===INLINE_TABLE}const TABLE=Symbol("table");function Table(){return Object.defineProperties({},{[_type]:{value:TABLE},[_declared]:{value:!1,writable:!0}})}function isTable(_){return _===null||typeof _!="object"?!1:_[_type]===TABLE}const _contentType=Symbol("content-type"),INLINE_LIST=Symbol("inline-list");function InlineList(_){return Object.defineProperties([],{[_type]:{value:INLINE_LIST},[_contentType]:{value:_}})}function isInlineList(_){return _===null||typeof _!="object"?!1:_[_type]===INLINE_LIST}const LIST=Symbol("list");function List(){return Object.defineProperties([],{[_type]:{value:LIST}})}function isList(_){return _===null||typeof _!="object"?!1:_[_type]===LIST}let _custom;try{const utilInspect=eval("require('util').inspect");_custom=utilInspect.custom}catch(_){}const _inspect=_custom||"inspect";class BoxedBigInt{constructor(T){try{this.value=globalThis.BigInt.asIntN(64,T)}catch{this.value=null}Object.defineProperty(this,_type,{value:INTEGER})}isNaN(){return this.value===null}toString(){return String(this.value)}[_inspect](){return`[BigInt: ${this.toString()}]}`}valueOf(){return this.value}}const INTEGER=Symbol("integer");function Integer(_){let T=Number(_);return Object.is(T,-0)&&(T=0),globalThis.BigInt&&!Number.isSafeInteger(T)?new BoxedBigInt(_):Object.defineProperties(new Number(T),{isNaN:{value:function(){return isNaN(this)}},[_type]:{value:INTEGER},[_inspect]:{value:()=>`[Integer: ${_}]`}})}function isInteger(_){return _===null||typeof _!="object"?!1:_[_type]===INTEGER}const FLOAT=Symbol("float");function Float(_){return Object.defineProperties(new Number(_),{[_type]:{value:FLOAT},[_inspect]:{value:()=>`[Float: ${_}]`}})}function isFloat(_){return _===null||typeof _!="object"?!1:_[_type]===FLOAT}function tomlType(_){const T=typeof _;if(T==="object"){if(_===null)return"null";if(_ instanceof Date)return"datetime";if(_type in _)switch(_[_type]){case INLINE_TABLE:return"inline-table";case INLINE_LIST:return"inline-list";case TABLE:return"table";case LIST:return"list";case FLOAT:return"float";case INTEGER:return"integer"}}return T}function makeParserClass(_){class T extends _{constructor(){super(),this.ctx=this.obj=Table()}atEndOfWord(){return this.char===CHAR_NUM||this.char===CTRL_I||this.char===CHAR_SP||this.atEndOfLine()}atEndOfLine(){return this.char===_.END||this.char===CTRL_J||this.char===CTRL_M}parseStart(){if(this.char===_.END)return null;if(this.char===CHAR_LSQB)return this.call(this.parseTableOrList);if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(isAlphaNumQuoteHyphen(this.char))return this.callNow(this.parseAssignStatement);throw this.error(new TomlError(`Unknown character "${this.char}"`))}parseWhitespaceToEOL(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(this.char===CHAR_NUM)return this.goto(this.parseComment);if(this.char===_.END||this.char===CTRL_J)return this.return();throw this.error(new TomlError("Unexpected character, expected only whitespace or comments till end of line"))}parseAssignStatement(){return this.callNow(this.parseAssign,this.recordAssignStatement)}recordAssignStatement(P){let O=this.ctx,I=P.key.pop();for(let z of P.key){if(hasKey(O,z)&&(!isTable(O[z])||O[z][_declared]))throw this.error(new TomlError("Can't redefine existing key"));O=O[z]=O[z]||Table()}if(hasKey(O,I))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(P.value)||isFloat(P.value)?O[I]=P.value.valueOf():O[I]=P.value,this.goto(this.parseWhitespaceToEOL)}parseAssign(){return this.callNow(this.parseKeyword,this.recordAssignKeyword)}recordAssignKeyword(P){return this.state.resultTable?this.state.resultTable.push(P):this.state.resultTable=[P],this.goto(this.parseAssignKeywordPreDot)}parseAssignKeywordPreDot(){if(this.char===CHAR_PERIOD)return this.next(this.parseAssignKeywordPostDot);if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.goto(this.parseAssignEqual)}parseAssignKeywordPostDot(){if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.callNow(this.parseKeyword,this.recordAssignKeyword)}parseAssignEqual(){if(this.char===CHAR_EQUALS)return this.next(this.parseAssignPreValue);throw this.error(new TomlError('Invalid character, expected "="'))}parseAssignPreValue(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseValue,this.recordAssignValue)}recordAssignValue(P){return this.returnNow({key:this.state.resultTable,value:P})}parseComment(){do if(this.char===_.END||this.char===CTRL_J)return this.return();while(this.nextChar())}parseTableOrList(){if(this.char===CHAR_LSQB)this.next(this.parseList);else return this.goto(this.parseTable)}parseTable(){return this.ctx=this.obj,this.goto(this.parseTableNext)}parseTableNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseTableMore)}parseTableMore(P){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,P)&&(!isTable(this.ctx[P])||this.ctx[P][_declared]))throw this.error(new TomlError("Can't redefine existing key"));return this.ctx=this.ctx[P]=this.ctx[P]||Table(),this.ctx[_declared]=!0,this.next(this.parseWhitespaceToEOL)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,P))this.ctx=this.ctx[P]=Table();else if(isTable(this.ctx[P]))this.ctx=this.ctx[P];else if(isList(this.ctx[P]))this.ctx=this.ctx[P][this.ctx[P].length-1];else throw this.error(new TomlError("Can't redefine existing key"));return this.next(this.parseTableNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseList(){return this.ctx=this.obj,this.goto(this.parseListNext)}parseListNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseListMore)}parseListMore(P){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,P)||(this.ctx[P]=List()),isInlineList(this.ctx[P]))throw this.error(new TomlError("Can't extend an inline array"));if(isList(this.ctx[P])){const O=Table();this.ctx[P].push(O),this.ctx=O}else throw this.error(new TomlError("Can't redefine an existing key"));return this.next(this.parseListEnd)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,P))this.ctx=this.ctx[P]=Table();else{if(isInlineList(this.ctx[P]))throw this.error(new TomlError("Can't extend an inline array"));if(isInlineTable(this.ctx[P]))throw this.error(new TomlError("Can't extend an inline table"));if(isList(this.ctx[P]))this.ctx=this.ctx[P][this.ctx[P].length-1];else if(isTable(this.ctx[P]))this.ctx=this.ctx[P];else throw this.error(new TomlError("Can't redefine an existing key"))}return this.next(this.parseListNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseListEnd(P){if(this.char===CHAR_RSQB)return this.next(this.parseWhitespaceToEOL);throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseValue(){if(this.char===_.END)throw this.error(new TomlError("Key without value"));if(this.char===CHAR_QUOT)return this.next(this.parseDoubleString);if(this.char===CHAR_APOS)return this.next(this.parseSingleString);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)return this.goto(this.parseNumberSign);if(this.char===CHAR_i)return this.next(this.parseInf);if(this.char===CHAR_n)return this.next(this.parseNan);if(isDigit(this.char))return this.goto(this.parseNumberOrDateTime);if(this.char===CHAR_t||this.char===CHAR_f)return this.goto(this.parseBoolean);if(this.char===CHAR_LSQB)return this.call(this.parseInlineList,this.recordValue);if(this.char===CHAR_LCUB)return this.call(this.parseInlineTable,this.recordValue);throw this.error(new TomlError("Unexpected character, expecting string, number, datetime, boolean, inline array or inline table"))}recordValue(P){return this.returnNow(P)}parseInf(){if(this.char===CHAR_n)return this.next(this.parseInf2);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseInf2(){if(this.char===CHAR_f)return this.state.buf==="-"?this.return(-1/0):this.return(1/0);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseNan(){if(this.char===CHAR_a)return this.next(this.parseNan2);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseNan2(){if(this.char===CHAR_n)return this.return(NaN);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseKeyword(){return this.char===CHAR_QUOT?this.next(this.parseBasicString):this.char===CHAR_APOS?this.next(this.parseLiteralString):this.goto(this.parseBareKey)}parseBareKey(){do{if(this.char===_.END)throw this.error(new TomlError("Key ended without value"));if(isAlphaNumHyphen(this.char))this.consume();else{if(this.state.buf.length===0)throw this.error(new TomlError("Empty bare keys are not allowed"));return this.returnNow()}}while(this.nextChar())}parseSingleString(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiStringMaybe):this.goto(this.parseLiteralString)}parseLiteralString(){do{if(this.char===CHAR_APOS)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}parseLiteralMultiStringMaybe(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiString):this.returnNow()}parseLiteralMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseLiteralMultiStringContent):this.goto(this.parseLiteralMultiStringContent)}parseLiteralMultiStringContent(){do{if(this.char===CHAR_APOS)return this.next(this.parseLiteralMultiEnd);if(this.char===_.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}parseLiteralMultiEnd(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd2):(this.state.buf+="'",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd2(){return this.char===CHAR_APOS?this.return():(this.state.buf+="''",this.goto(this.parseLiteralMultiStringContent))}parseDoubleString(){return this.char===CHAR_QUOT?this.next(this.parseMultiStringMaybe):this.goto(this.parseBasicString)}parseBasicString(){do{if(this.char===CHAR_BSOL)return this.call(this.parseEscape,this.recordEscapeReplacement);if(this.char===CHAR_QUOT)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}recordEscapeReplacement(P){return this.state.buf+=P,this.goto(this.parseBasicString)}parseMultiStringMaybe(){return this.char===CHAR_QUOT?this.next(this.parseMultiString):this.returnNow()}parseMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseMultiStringContent):this.goto(this.parseMultiStringContent)}parseMultiStringContent(){do{if(this.char===CHAR_BSOL)return this.call(this.parseMultiEscape,this.recordMultiEscapeReplacement);if(this.char===CHAR_QUOT)return this.next(this.parseMultiEnd);if(this.char===_.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}errorControlCharInString(){let P="\\u00";return this.char<16&&(P+="0"),P+=this.char.toString(16),this.error(new TomlError(`Control characters (codes < 0x1f and 0x7f) are not allowed in strings, use ${P} instead`))}recordMultiEscapeReplacement(P){return this.state.buf+=P,this.goto(this.parseMultiStringContent)}parseMultiEnd(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd2):(this.state.buf+='"',this.goto(this.parseMultiStringContent))}parseMultiEnd2(){return this.char===CHAR_QUOT?this.return():(this.state.buf+='""',this.goto(this.parseMultiStringContent))}parseMultiEscape(){return this.char===CTRL_M||this.char===CTRL_J?this.next(this.parseMultiTrim):this.char===CHAR_SP||this.char===CTRL_I?this.next(this.parsePreMultiTrim):this.goto(this.parseEscape)}parsePreMultiTrim(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CTRL_M||this.char===CTRL_J)return this.next(this.parseMultiTrim);throw this.error(new TomlError("Can't escape whitespace"))}parseMultiTrim(){return this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M?null:this.returnNow()}parseEscape(){if(this.char in escapes)return this.return(escapes[this.char]);if(this.char===CHAR_u)return this.call(this.parseSmallUnicode,this.parseUnicodeReturn);if(this.char===CHAR_U)return this.call(this.parseLargeUnicode,this.parseUnicodeReturn);throw this.error(new TomlError("Unknown escape character: "+this.char))}parseUnicodeReturn(P){try{const O=parseInt(P,16);if(O>=SURROGATE_FIRST&&O<=SURROGATE_LAST)throw this.error(new TomlError("Invalid unicode, character in range 0xD800 - 0xDFFF is reserved"));return this.returnNow(String.fromCodePoint(O))}catch(O){throw this.error(TomlError.wrap(O))}}parseSmallUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=4)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseLargeUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=8)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseNumberSign(){return this.consume(),this.next(this.parseMaybeSignedInfOrNan)}parseMaybeSignedInfOrNan(){return this.char===CHAR_i?this.next(this.parseInf):this.char===CHAR_n?this.next(this.parseNan):this.callNow(this.parseNoUnder,this.parseNumberIntegerStart)}parseNumberIntegerStart(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberIntegerExponentOrDecimal)):this.goto(this.parseNumberInteger)}parseNumberIntegerExponentOrDecimal(){return this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Integer(this.state.buf))}parseNumberInteger(){if(isDigit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder);if(this.char===CHAR_E||this.char===CHAR_e)return this.consume(),this.next(this.parseNumberExponentSign);if(this.char===CHAR_PERIOD)return this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat);{const P=Integer(this.state.buf);if(P.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(P)}}}parseNoUnder(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD||this.char===CHAR_E||this.char===CHAR_e)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNoUnderHexOctBinLiteral(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNumberFloat(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberFloat);if(isDigit(this.char))this.consume();else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Float(this.state.buf))}parseNumberExponentSign(){if(isDigit(this.char))return this.goto(this.parseNumberExponent);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.call(this.parseNoUnder,this.parseNumberExponent);else throw this.error(new TomlError("Unexpected character, expected -, + or digit"))}parseNumberExponent(){if(isDigit(this.char))this.consume();else return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder):this.returnNow(Float(this.state.buf))}parseNumberOrDateTime(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberBaseOrDateTime)):this.goto(this.parseNumberOrDateTimeOnly)}parseNumberOrDateTimeOnly(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberInteger);if(isDigit(this.char))this.consume(),this.state.buf.length>4&&this.next(this.parseNumberInteger);else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_HYPHEN?this.goto(this.parseDateTime):this.char===CHAR_COLON?this.goto(this.parseOnlyTimeHour):this.returnNow(Integer(this.state.buf))}parseDateTimeOnly(){if(this.state.buf.length<4){if(isDigit(this.char))return this.consume();if(this.char===CHAR_COLON)return this.goto(this.parseOnlyTimeHour);throw this.error(new TomlError("Expected digit while parsing year part of a date"))}else{if(this.char===CHAR_HYPHEN)return this.goto(this.parseDateTime);throw this.error(new TomlError("Expected hyphen (-) while parsing year part of date"))}}parseNumberBaseOrDateTime(){return this.char===CHAR_b?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerBin)):this.char===CHAR_o?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerOct)):this.char===CHAR_x?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerHex)):this.char===CHAR_PERIOD?this.goto(this.parseNumberInteger):isDigit(this.char)?this.goto(this.parseDateTimeOnly):this.returnNow(Integer(this.state.buf))}parseIntegerHex(){if(isHexit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const P=Integer(this.state.buf);if(P.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(P)}}}parseIntegerOct(){if(isOctit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const P=Integer(this.state.buf);if(P.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(P)}}}parseIntegerBin(){if(isBit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const P=Integer(this.state.buf);if(P.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(P)}}}parseDateTime(){if(this.state.buf.length<4)throw this.error(new TomlError("Years less than 1000 must be zero padded to four characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseDateMonth)}parseDateMonth(){if(this.char===CHAR_HYPHEN){if(this.state.buf.length<2)throw this.error(new TomlError("Months less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseDateDay)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseDateDay(){if(this.char===CHAR_T||this.char===CHAR_SP){if(this.state.buf.length<2)throw this.error(new TomlError("Days less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseStartTimeHour)}else{if(this.atEndOfWord())return this.returnNow(createDate(this.state.result+"-"+this.state.buf));if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}}parseStartTimeHour(){return this.atEndOfWord()?this.returnNow(createDate(this.state.result)):this.goto(this.parseTimeHour)}parseTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result+="T"+this.state.buf,this.state.buf="",this.next(this.parseTimeMin)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeSec);throw this.error(new TomlError("Incomplete datetime"))}}parseTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeZoneOrFraction)}else throw this.error(new TomlError("Incomplete datetime"))}parseOnlyTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeMin)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeSec);throw this.error(new TomlError("Incomplete time"))}}parseOnlyTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.next(this.parseOnlyTimeFractionMaybe)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeFractionMaybe(){if(this.state.result+=":"+this.state.buf,this.char===CHAR_PERIOD)this.state.buf="",this.next(this.parseOnlyTimeFraction);else return this.return(createTime(this.state.result))}parseOnlyTimeFraction(){if(isDigit(this.char))this.consume();else if(this.atEndOfWord()){if(this.state.buf.length===0)throw this.error(new TomlError("Expected digit in milliseconds"));return this.returnNow(createTime(this.state.result+"."+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}parseTimeZoneOrFraction(){if(this.char===CHAR_PERIOD)this.consume(),this.next(this.parseDateTimeFraction);else if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}parseDateTimeFraction(){if(isDigit(this.char))this.consume();else{if(this.state.buf.length===1)throw this.error(new TomlError("Expected digit in milliseconds"));if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}}parseTimeZoneHour(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.next(this.parseTimeZoneSep)}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseTimeZoneSep(){if(this.char===CHAR_COLON)this.consume(),this.next(this.parseTimeZoneMin);else throw this.error(new TomlError("Unexpected character in datetime, expected colon"))}parseTimeZoneMin(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.return(createDateTime(this.state.result+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseBoolean(){if(this.char===CHAR_t)return this.consume(),this.next(this.parseTrue_r);if(this.char===CHAR_f)return this.consume(),this.next(this.parseFalse_a)}parseTrue_r(){if(this.char===CHAR_r)return this.consume(),this.next(this.parseTrue_u);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_u(){if(this.char===CHAR_u)return this.consume(),this.next(this.parseTrue_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_e(){if(this.char===CHAR_e)return this.return(!0);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_a(){if(this.char===CHAR_a)return this.consume(),this.next(this.parseFalse_l);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_l(){if(this.char===CHAR_l)return this.consume(),this.next(this.parseFalse_s);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_s(){if(this.char===CHAR_s)return this.consume(),this.next(this.parseFalse_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_e(){if(this.char===CHAR_e)return this.return(!1);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseInlineList(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===_.END)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_NUM?this.call(this.parseComment):this.char===CHAR_RSQB?this.return(this.state.resultArr||InlineList()):this.callNow(this.parseValue,this.recordInlineListValue)}recordInlineListValue(P){if(this.state.resultArr){const O=this.state.resultArr[_contentType],I=tomlType(P);if(O!==I)throw this.error(new TomlError(`Inline lists must be a single type, not a mix of ${O} and ${I}`))}else this.state.resultArr=InlineList(tomlType(P));return isFloat(P)||isInteger(P)?this.state.resultArr.push(P.valueOf()):this.state.resultArr.push(P),this.goto(this.parseInlineListNext)}parseInlineListNext(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CHAR_COMMA)return this.next(this.parseInlineList);if(this.char===CHAR_RSQB)return this.goto(this.parseInlineList);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTable(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===_.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_RCUB?this.return(this.state.resultTable||InlineTable()):(this.state.resultTable||(this.state.resultTable=InlineTable()),this.callNow(this.parseAssign,this.recordInlineTableValue))}recordInlineTableValue(P){let O=this.state.resultTable,I=P.key.pop();for(let z of P.key){if(hasKey(O,z)&&(!isTable(O[z])||O[z][_declared]))throw this.error(new TomlError("Can't redefine existing key"));O=O[z]=O[z]||Table()}if(hasKey(O,I))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(P.value)||isFloat(P.value)?O[I]=P.value.valueOf():O[I]=P.value,this.goto(this.parseInlineTableNext)}parseInlineTableNext(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===_.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)return this.next(this.parseInlineTable);if(this.char===CHAR_RCUB)return this.goto(this.parseInlineTable);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}}return T}return tomlParser.exports}var parsePrettyError,hasRequiredParsePrettyError;function requireParsePrettyError(){if(hasRequiredParsePrettyError)return parsePrettyError;hasRequiredParsePrettyError=1,parsePrettyError=_;function _(T,R){if(T.pos==null||T.line==null)return T;let P=T.message;if(P+=` at row ${T.line+1}, col ${T.col+1}, pos ${T.pos}:
`,R&&R.split){const O=R.split(/\n/),I=String(Math.min(O.length,T.line+3)).length;let z=" ";for(;z.length<I;)z+=" ";for(let F=Math.max(0,T.line-1);F<Math.min(O.length,T.line+2);++F){let G=String(F+1);if(G.length<I&&(G=" "+G),T.line===F){P+=G+"> "+O[F]+`
`,P+=z+"  ";for(let V=0;V<T.col;++V)P+=" ";P+=`^
`}else P+=G+": "+O[F]+`
`}}return T.message=P+`
`,T}return parsePrettyError}var parseString_1,hasRequiredParseString;function requireParseString(){if(hasRequiredParseString)return parseString_1;hasRequiredParseString=1,parseString_1=R;const _=requireTomlParser(),T=requireParsePrettyError();function R(P){globalThis.Buffer&&globalThis.Buffer.isBuffer(P)&&(P=P.toString("utf8"));const O=new _;try{return O.parse(P),O.finish()}catch(I){throw T(I,P)}}return parseString_1}var parseAsync_1,hasRequiredParseAsync;function requireParseAsync(){if(hasRequiredParseAsync)return parseAsync_1;hasRequiredParseAsync=1,parseAsync_1=R;const _=requireTomlParser(),T=requireParsePrettyError();function R(P,O){O||(O={});const I=0,z=O.blocksize||40960,F=new _;return new Promise((V,Z)=>{setImmediate(G,I,z,V,Z)});function G(V,Z,Y,Q){if(V>=P.length)try{return Y(F.finish())}catch(J){return Q(T(J,P))}try{F.parse(P.slice(V,V+Z)),setImmediate(G,V+Z,Z,Y,Q)}catch(J){Q(T(J,P))}}}return parseAsync_1}var parseStream_1,hasRequiredParseStream;function requireParseStream(){if(hasRequiredParseStream)return parseStream_1;hasRequiredParseStream=1,parseStream_1=R;const _=require$$0,T=requireTomlParser();function R(I){return I?P(I):O()}function P(I){const z=new T;return I.setEncoding("utf8"),new Promise((F,G)=>{let V,Z=!1,Y=!1;function Q(){if(Z=!0,!V)try{F(z.finish())}catch(ne){G(ne)}}function J(ne){Y=!0,G(ne)}I.once("end",Q),I.once("error",J),ee();function ee(){V=!0;let ne;for(;(ne=I.read())!==null;)try{z.parse(ne)}catch(se){return J(se)}if(V=!1,Z)return Q();Y||I.once("readable",ee)}})}function O(){const I=new T;return new _.Transform({objectMode:!0,transform(z,F,G){try{I.parse(z.toString(F))}catch(V){this.emit("error",V)}G()},flush(z){try{this.push(I.finish())}catch(F){this.emit("error",F)}z()}})}return parseStream_1}var hasRequiredParse;function requireParse(){return hasRequiredParse||(hasRequiredParse=1,parse$3.exports=requireParseString(),parse$3.exports.async=requireParseAsync(),parse$3.exports.stream=requireParseStream(),parse$3.exports.prettyError=requireParsePrettyError()),parse$3.exports}var stringify={exports:{}},hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify.exports;hasRequiredStringify=1,stringify.exports=_,stringify.exports.value=se;function _(ve){if(ve===null)throw T("null");if(ve===void 0)throw T("undefined");if(typeof ve!="object")throw T(typeof ve);if(typeof ve.toJSON=="function"&&(ve=ve.toJSON()),ve==null)return null;const Ee=G(ve);if(Ee!=="table")throw T(Ee);return z("","",ve)}function T(ve){return new Error("Can only stringify objects, not "+ve)}function R(){return new Error("Array values can't have mixed types")}function P(ve){return Object.keys(ve).filter(Ee=>F(ve[Ee]))}function O(ve){return Object.keys(ve).filter(Ee=>!F(ve[Ee]))}function I(ve){let Ee=Array.isArray(ve)?[]:Object.prototype.hasOwnProperty.call(ve,"__proto__")?{["__proto__"]:void 0}:{};for(let we of Object.keys(ve))ve[we]&&typeof ve[we].toJSON=="function"&&!("toISOString"in ve[we])?Ee[we]=ve[we].toJSON():Ee[we]=ve[we];return Ee}function z(ve,Ee,we){we=I(we);var ge,Se;ge=P(we),Se=O(we);var Te=[],Ae=Ee||"";ge.forEach(_e=>{var $e=G(we[_e]);$e!=="undefined"&&$e!=="null"&&Te.push(Ae+V(_e)+" = "+ne(we[_e],!0))}),Te.length>0&&Te.push("");var Ue=ve&&ge.length>0?Ee+"  ":"";return Se.forEach(_e=>{Te.push(be(ve,Ue,_e,we[_e]))}),Te.join(`
`)}function F(ve){switch(G(ve)){case"undefined":case"null":case"integer":case"nan":case"float":case"boolean":case"string":case"datetime":return!0;case"array":return ve.length===0||G(ve[0])!=="table";case"table":return Object.keys(ve).length===0;default:return!1}}function G(ve){return ve===void 0?"undefined":ve===null?"null":typeof ve=="bigint"||Number.isInteger(ve)&&!Object.is(ve,-0)?"integer":typeof ve=="number"?"float":typeof ve=="boolean"?"boolean":typeof ve=="string"?"string":"toISOString"in ve?isNaN(ve)?"undefined":"datetime":Array.isArray(ve)?"array":"table"}function V(ve){var Ee=String(ve);return/^[-A-Za-z0-9_]+$/.test(Ee)?Ee:Z(Ee)}function Z(ve){return'"'+J(ve).replace(/"/g,'\\"')+'"'}function Y(ve){return"'"+ve+"'"}function Q(ve,Ee){for(;Ee.length<ve;)Ee="0"+Ee;return Ee}function J(ve){return ve.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/([\u0000-\u001f\u007f])/,Ee=>"\\u"+Q(4,Ee.codePointAt(0).toString(16)))}function ee(ve){let Ee=ve.split(/\n/).map(we=>J(we).replace(/"(?="")/g,'\\"')).join(`
`);return Ee.slice(-1)==='"'&&(Ee+=`\\
`),`"""
`+Ee+'"""'}function ne(ve,Ee){let we=G(ve);return we==="string"&&(Ee&&/\n/.test(ve)?we="string-multiline":!/[\b\t\n\f\r']/.test(ve)&&/"/.test(ve)&&(we="string-literal")),se(ve,we)}function se(ve,Ee){switch(Ee||(Ee=G(ve)),Ee){case"string-multiline":return ee(ve);case"string":return Z(ve);case"string-literal":return Y(ve);case"integer":return oe(ve);case"float":return ae(ve);case"boolean":return ce(ve);case"datetime":return le(ve);case"array":return fe(ve.filter(we=>G(we)!=="null"&&G(we)!=="undefined"&&G(we)!=="nan"));case"table":return de(ve);default:throw T(Ee)}}function oe(ve){return String(ve).replace(/\B(?=(\d{3})+(?!\d))/g,"_")}function ae(ve){if(ve===1/0)return"inf";if(ve===-1/0)return"-inf";if(Object.is(ve,NaN))return"nan";if(Object.is(ve,-0))return"-0.0";var Ee=String(ve).split("."),we=Ee[0],ge=Ee[1]||0;return oe(we)+"."+ge}function ce(ve){return String(ve)}function le(ve){return ve.toISOString()}function pe(ve){return ve==="float"||ve==="integer"}function me(ve){var Ee=G(ve[0]);return ve.every(we=>G(we)===Ee)?Ee:ve.every(we=>pe(G(we)))?"float":"mixed"}function he(ve){const Ee=me(ve);if(Ee==="mixed")throw R();return Ee}function fe(ve){ve=I(ve);const Ee=he(ve);var we="[",ge=ve.map(Se=>se(Se,Ee));return ge.join(", ").length>60||/\n/.test(ge)?we+=`
  `+ge.join(`,
  `)+`
`:we+=" "+ge.join(", ")+(ge.length>0?" ":""),we+"]"}function de(ve){ve=I(ve);var Ee=[];return Object.keys(ve).forEach(we=>{Ee.push(V(we)+" = "+ne(ve[we],!1))}),"{ "+Ee.join(", ")+(Ee.length>0?" ":"")+"}"}function be(ve,Ee,we,ge){var Se=G(ge);if(Se==="array")return ye(ve,Ee,we,ge);if(Se==="table")return Ce(ve,Ee,we,ge);throw T(Se)}function ye(ve,Ee,we,ge){ge=I(ge),he(ge);var Se=G(ge[0]);if(Se!=="table")throw T(Se);var Te=ve+V(we),Ae="";return ge.forEach(Ue=>{Ae.length>0&&(Ae+=`
`),Ae+=Ee+"[["+Te+`]]
`,Ae+=z(Te+".",Ee,Ue)}),Ae}function Ce(ve,Ee,we,ge){var Se=ve+V(we),Te="";return P(ge).length>0&&(Te+=Ee+"["+Se+`]
`),Te+z(Se+".",Ee,ge)}return stringify.exports}var hasRequiredToml;function requireToml(){return hasRequiredToml||(hasRequiredToml=1,toml.parse=requireParse(),toml.stringify=requireStringify()),toml}var tomlExports=requireToml();const TOML=getDefaultExportFromCjs(tomlExports),DEFAULT_CONTROL_CELL={N_init:25,location:"",R_hard:.4,R_hard_div:.7,R_soft:1.2,color:{r:30,g:100,b:20},dur_G2:.5,dur_mitosis:.5,k_apical_junction:5,k_cytos:5,max_cytoskeleton_length:.5,run:0,running_speed:1,running_mode:0,stiffness_apical_apical:2,stiffness_apical_apical_div:4,stiffness_nuclei_apical:3,stiffness_nuclei_basal:2,stiffness_repulsion:2,stiffness_straightness:5,lifespan_start:5.5,lifespan_end:6.5,INM:0,hetero:!1,events:{time_A_start:1/0,time_A_end:1/0,time_B_start:1/0,time_B_end:1/0,time_S_start:1/0,time_S_end:1/0,time_P_start:1/0,time_P_end:1/0},diffusion:.2,basal_damping_ratio:1,max_basal_junction_dist:4,cytos_init:0,basal_membrane_repulsion:0,apical_junction_init:0},DEFAULT_EMT_CELL={N_init:5,location:"bottom",R_hard:.4,R_hard_div:.7,R_soft:1.2,color:{r:128,g:0,b:128},dur_G2:.5,dur_mitosis:.5,k_apical_junction:1,k_cytos:5,max_cytoskeleton_length:.5,run:0,running_speed:1,running_mode:0,stiffness_apical_apical:2,stiffness_apical_apical_div:4,stiffness_nuclei_apical:3,stiffness_nuclei_basal:2,stiffness_repulsion:4,stiffness_straightness:2,lifespan_start:5.5,lifespan_end:6.5,INM:0,hetero:!0,events:{time_A_start:3,time_A_end:12,time_B_start:3,time_B_end:12,time_S_start:1/0,time_S_end:1/0,time_P_start:1/0,time_P_end:1/0},diffusion:.2,basal_damping_ratio:1,max_basal_junction_dist:4,cytos_init:0,basal_membrane_repulsion:0,apical_junction_init:0},DEFAULT_EHT_PARAMS={metadata:{model:"EHT",version:"1.0.0"},general:{t_end:48,dt:.1,random_seed:0,full_circle:!0,w_init:80,h_init:5,mu:.2,n_substeps:30,alg_dt:.01,w_screen:50,h_screen:25,p_div_out:1,perimeter:105,aspect_ratio:1,hard_sphere_nuclei:!1},cell_prop:{},cell_types:{control:DEFAULT_CONTROL_CELL,emt:DEFAULT_EMT_CELL}};function mergePresetWithDefaults(_){const T=cloneDeep(DEFAULT_EHT_PARAMS);if(_.general&&(T.general={...T.general,..._.general}),_.metadata&&(T.metadata={...T.metadata,..._.metadata}),_.cell_types){for(const[R,P]of Object.entries(_.cell_types))if(P){const O=T.cell_types[R]??cloneDeep(DEFAULT_CONTROL_CELL);T.cell_types[R]=merge$1(O,P)}}return T}let presetModules={};try{presetModules=Object.assign({"./presets/chick-embryo-control.toml":__vite_glob_0_0,"./presets/chick-embryo-single-emt.toml":__vite_glob_0_1,"./presets/cuboidal.toml":__vite_glob_0_2,"./presets/gastrulation-control.toml":__vite_glob_0_3,"./presets/pseudo-stratified.toml":__vite_glob_0_4})}catch{presetModules={}}function parsePresets(){const _=[];for(const[T,R]of Object.entries(presetModules)){const P=T.split("/").pop()?.replace(".toml","")??"",O=P.replace(/-/g,"_");try{const I=TOML.parse(R),z=I.label??P;delete I.label,_.push({key:O,label:z,params:I})}catch(I){console.error(`Failed to parse preset ${T}:`,I)}}return _.sort((T,R)=>T.label.localeCompare(R.label))}const loadedPresets=parsePresets(),EHT_PRESETS=[{key:"default",label:"Default",create:()=>cloneDeep(DEFAULT_EHT_PARAMS)},...loadedPresets.map(_=>({key:_.key,label:_.label,create:()=>mergePresetWithDefaults(_.params)}))];function projectOntoSegment(_,T,R){const P=R.sub(T),O=_.sub(T),I=P.magSq();if(I<1e-10)return T;const z=Math.max(0,Math.min(1,O.dot(P)/I));return T.add(P.scale(z))}function projectOntoApicalStrip(_,T){const R=T.cells;if(R.length===0)return _;if(R.length===1)return Vector2.from(R[0].A);let P=Vector2.from(R[0].A),O=_.distSq(P);for(let I=0;I<R.length-1;I++){const z=Vector2.from(R[I].A),F=Vector2.from(R[I+1].A),G=projectOntoSegment(_,z,F),V=_.distSq(G);V<O&&(O=V,P=G)}if(R.length>2){const I=Vector2.from(R[R.length-1].A),z=Vector2.from(R[0].A),F=projectOntoSegment(_,I,z);_.distSq(F)<O&&(P=F)}return P}function projectOntoBasalCurve(_,T){return T.basalGeometry.projectPoint(_)}function computeCellMetrics(_,T){const R=_.cells,P=[],I=10*Math.min(...Object.values(T.cell_types).map(z=>z.R_soft));for(const z of R){const F=Vector2.from(z.pos),G=Vector2.from(z.A),V=Vector2.from(z.B),Z=projectOntoApicalStrip(F,_),Y=projectOntoBasalCurve(F,_),Q=G.dist(F),J=V.dist(F),ee=F.dist(Z),ne=F.dist(Y),se=Z.sub(Y),oe=se.magSq();let ae=.5;oe>1e-10&&(ae=F.sub(Y).dot(se)/oe);const ce=ae<0,le=ae>1;P.push({cell:z,X:F,A:G,B:V,a:Z,b:Y,AX:Q,BX:J,ax:ee,bx:ne,x:ae,below_basal:ce,above_apical:le,below_neighbours:!1})}for(let z=0;z<P.length;z++){const F=P[z];let G=!0;for(let V=0;V<P.length;V++){if(z===V)continue;const Z=P[V];if(F.X.dist(Z.X)<=I&&Z.bx<=F.bx){G=!1;break}}F.below_neighbours=G&&P.length>1}return P}function generateCellGroups(_){const T=Object.keys(_.cell_types),R=[];R.push("all");for(const P of T)R.push(P);for(let P=0;P<T.length;P++)for(let O=P+1;O<T.length;O++)R.push(`${T[P]}+${T[O]}`);return R}function filterByGroup(_,T){if(T==="all")return _;if(T.includes("+")){const R=T.split("+");return _.filter(P=>R.includes(P.cell.typeIndex))}return _.filter(R=>R.cell.typeIndex===T)}function aggregateMetrics(_){if(_.length===0)return{ab_distance:0,AX:0,BX:0,ax:0,bx:0,x:0,below_basal:0,above_apical:0,below_neighbours:0};const T=P=>P.reduce((O,I)=>O+I,0)/P.length,R=P=>P.filter(O=>O).length/P.length;return{ab_distance:T(_.map(P=>P.A.dist(P.B))),AX:T(_.map(P=>P.AX)),BX:T(_.map(P=>P.BX)),ax:T(_.map(P=>P.ax)),bx:T(_.map(P=>P.bx)),x:T(_.map(P=>P.x)),below_basal:R(_.map(P=>P.below_basal)),above_apical:R(_.map(P=>P.above_apical)),below_neighbours:R(_.map(P=>P.below_neighbours))}}function computeEHTStatistics(_,T){const R={};if(!T){const P=_.cells.length>0?_.cells.reduce((O,I)=>O+Vector2.from(I.A).dist(Vector2.from(I.B)),0)/_.cells.length:0;return R.ab_distance_all=P,R}try{const P=computeCellMetrics(_,T),O=generateCellGroups(T);for(const I of O){const z=filterByGroup(P,I),F=aggregateMetrics(z);for(const[G,V]of Object.entries(F))R[`${G}_${I}`]=V}}catch(P){console.error("Failed to compute EHT statistics",P)}return R}function generateEHTStatistics(_){const T=[],R=generateCellGroups(_),P=[{id:"ab_distance",label:"AB Distance",description:"Apical-basal distance"},{id:"AX",label:"AX Distance",description:"Distance from A to X"},{id:"BX",label:"BX Distance",description:"Distance from B to X"},{id:"ax",label:"ax Distance",description:"Distance from X to apical projection"},{id:"bx",label:"bx Distance",description:"Distance from X to basal projection"},{id:"x",label:"x Position",description:"Position on basal-apical scale (0-1)"},{id:"below_basal",label:"Below Basal",description:"Fraction of cells below basal layer"},{id:"above_apical",label:"Above Apical",description:"Fraction of cells above apical layer"},{id:"below_neighbours",label:"Below Neighbours",description:"Fraction of cells below all neighbours"}];for(const O of R)for(const I of P)T.push({id:`${I.id}_${O}`,label:`${I.label} (${O})`,description:`${I.description} for ${O} cells`,compute:z=>computeEHTStatistics(z,_)[`${I.id}_${O}`]||0});return T}generateEHTStatistics({metadata:{},general:{},cell_prop:{},cell_types:{control:{}}});function generateEHTBatchParameters(_){const T=[];T.push({path:"general.t_end",label:"t_end (End time)"},{path:"general.dt",label:"dt (Time step)"},{path:"general.random_seed",label:"Random seed",isInteger:!0},{path:"general.w_init",label:"w_init (Initial width)"},{path:"general.h_init",label:"h_init (Initial height)"},{path:"general.mu",label:"mu (Friction)"},{path:"general.n_substeps",label:"n_substeps",isInteger:!0},{path:"general.alg_dt",label:"alg_dt (Algorithm dt)"},{path:"general.p_div_out",label:"p_div_out (Division probability)"},{path:"general.perimeter",label:"Perimeter"},{path:"general.aspect_ratio",label:"Aspect ratio"});for(const[R,P]of Object.entries(_.cell_types)){const O=`cell_types.${R}`,I=R;T.push({path:`${O}.N_init`,label:`${I}: N_init`,isInteger:!0},{path:`${O}.location`,label:`${I}: location`},{path:`${O}.R_hard`,label:`${I}: R_hard`},{path:`${O}.R_hard_div`,label:`${I}: R_hard_div`},{path:`${O}.R_soft`,label:`${I}: R_soft`},{path:`${O}.dur_G2`,label:`${I}: dur_G2`},{path:`${O}.dur_mitosis`,label:`${I}: dur_mitosis`},{path:`${O}.k_apical_junction`,label:`${I}: k_apical_junction`},{path:`${O}.k_cytos`,label:`${I}: k_cytos`},{path:`${O}.max_cytoskeleton_length`,label:`${I}: max_cytos_length`},{path:`${O}.run`,label:`${I}: run probability`},{path:`${O}.running_speed`,label:`${I}: running_speed`},{path:`${O}.running_mode`,label:`${I}: running_mode`,isInteger:!0},{path:`${O}.stiffness_apical_apical`,label:`${I}: stiff_apical_apical`},{path:`${O}.stiffness_apical_apical_div`,label:`${I}: stiff_apical_apical_div`},{path:`${O}.stiffness_nuclei_apical`,label:`${I}: stiff_nuclei_apical`},{path:`${O}.stiffness_nuclei_basal`,label:`${I}: stiff_nuclei_basal`},{path:`${O}.stiffness_repulsion`,label:`${I}: stiff_repulsion`},{path:`${O}.stiffness_straightness`,label:`${I}: stiff_straightness`},{path:`${O}.lifespan_start`,label:`${I}: lifespan start`},{path:`${O}.lifespan_end`,label:`${I}: lifespan end`},{path:`${O}.INM`,label:`${I}: INM probability`},{path:`${O}.diffusion`,label:`${I}: diffusion`},{path:`${O}.basal_damping_ratio`,label:`${I}: basal_damping_ratio`},{path:`${O}.max_basal_junction_dist`,label:`${I}: max_basal_junction_dist`},{path:`${O}.cytos_init`,label:`${I}: cytos_init`},{path:`${O}.basal_membrane_repulsion`,label:`${I}: basal_membrane_repulsion`},{path:`${O}.apical_junction_init`,label:`${I}: apical_junction_init`},{path:`${O}.events.time_A_start`,label:`${I}: time_A start`},{path:`${O}.events.time_A_end`,label:`${I}: time_A end`},{path:`${O}.events.time_B_start`,label:`${I}: time_B start`},{path:`${O}.events.time_B_end`,label:`${I}: time_B end`},{path:`${O}.events.time_S_start`,label:`${I}: time_S start`},{path:`${O}.events.time_S_end`,label:`${I}: time_S end`},{path:`${O}.events.time_P_start`,label:`${I}: time_P start`},{path:`${O}.events.time_P_end`,label:`${I}: time_P end`})}return T}const EHT_BATCH_PARAMETERS=[{path:"general.perimeter",label:"Perimeter"},{path:"general.aspect_ratio",label:"Aspect ratio"},{path:"general.random_seed",label:"Random seed",isInteger:!0},{path:"general.t_end",label:"t_end (End time)"},{path:"cell_types.control.diffusion",label:"control: diffusion"},{path:"cell_types.control.max_basal_junction_dist",label:"control: max_basal_junction_dist"},{path:"cell_types.control.apical_junction_init",label:"control: apical_junction_init"}];function r$1(_){var T,R,P="";if(typeof _=="string"||typeof _=="number")P+=_;else if(typeof _=="object")if(Array.isArray(_)){var O=_.length;for(T=0;T<O;T++)_[T]&&(R=r$1(_[T]))&&(P&&(P+=" "),P+=R)}else for(R in _)_[R]&&(P&&(P+=" "),P+=R);return P}function clsx(){for(var _,T,R=0,P="",O=arguments.length;R<O;R++)(_=arguments[R])&&(T=r$1(_))&&(P&&(P+=" "),P+=T);return P}const concatArrays=(_,T)=>{const R=new Array(_.length+T.length);for(let P=0;P<_.length;P++)R[P]=_[P];for(let P=0;P<T.length;P++)R[_.length+P]=T[P];return R},createClassValidatorObject=(_,T)=>({classGroupId:_,validator:T}),createClassPartObject=(_=new Map,T=null,R)=>({nextPart:_,validators:T,classGroupId:R}),CLASS_PART_SEPARATOR="-",EMPTY_CONFLICTS=[],ARBITRARY_PROPERTY_PREFIX="arbitrary..",createClassGroupUtils=_=>{const T=createClassMap(_),{conflictingClassGroups:R,conflictingClassGroupModifiers:P}=_;return{getClassGroupId:z=>{if(z.startsWith("[")&&z.endsWith("]"))return getGroupIdForArbitraryProperty(z);const F=z.split(CLASS_PART_SEPARATOR),G=F[0]===""&&F.length>1?1:0;return getGroupRecursive(F,G,T)},getConflictingClassGroupIds:(z,F)=>{if(F){const G=P[z],V=R[z];return G?V?concatArrays(V,G):G:V||EMPTY_CONFLICTS}return R[z]||EMPTY_CONFLICTS}}},getGroupRecursive=(_,T,R)=>{if(_.length-T===0)return R.classGroupId;const O=_[T],I=R.nextPart.get(O);if(I){const V=getGroupRecursive(_,T+1,I);if(V)return V}const z=R.validators;if(z===null)return;const F=T===0?_.join(CLASS_PART_SEPARATOR):_.slice(T).join(CLASS_PART_SEPARATOR),G=z.length;for(let V=0;V<G;V++){const Z=z[V];if(Z.validator(F))return Z.classGroupId}},getGroupIdForArbitraryProperty=_=>_.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const T=_.slice(1,-1),R=T.indexOf(":"),P=T.slice(0,R);return P?ARBITRARY_PROPERTY_PREFIX+P:void 0})(),createClassMap=_=>{const{theme:T,classGroups:R}=_;return processClassGroups(R,T)},processClassGroups=(_,T)=>{const R=createClassPartObject();for(const P in _){const O=_[P];processClassesRecursively(O,R,P,T)}return R},processClassesRecursively=(_,T,R,P)=>{const O=_.length;for(let I=0;I<O;I++){const z=_[I];processClassDefinition(z,T,R,P)}},processClassDefinition=(_,T,R,P)=>{if(typeof _=="string"){processStringDefinition(_,T,R);return}if(typeof _=="function"){processFunctionDefinition(_,T,R,P);return}processObjectDefinition(_,T,R,P)},processStringDefinition=(_,T,R)=>{const P=_===""?T:getPart(T,_);P.classGroupId=R},processFunctionDefinition=(_,T,R,P)=>{if(isThemeGetter(_)){processClassesRecursively(_(P),T,R,P);return}T.validators===null&&(T.validators=[]),T.validators.push(createClassValidatorObject(R,_))},processObjectDefinition=(_,T,R,P)=>{const O=Object.entries(_),I=O.length;for(let z=0;z<I;z++){const[F,G]=O[z];processClassesRecursively(G,getPart(T,F),R,P)}},getPart=(_,T)=>{let R=_;const P=T.split(CLASS_PART_SEPARATOR),O=P.length;for(let I=0;I<O;I++){const z=P[I];let F=R.nextPart.get(z);F||(F=createClassPartObject(),R.nextPart.set(z,F)),R=F}return R},isThemeGetter=_=>"isThemeGetter"in _&&_.isThemeGetter===!0,createLruCache=_=>{if(_<1)return{get:()=>{},set:()=>{}};let T=0,R=Object.create(null),P=Object.create(null);const O=(I,z)=>{R[I]=z,T++,T>_&&(T=0,P=R,R=Object.create(null))};return{get(I){let z=R[I];if(z!==void 0)return z;if((z=P[I])!==void 0)return O(I,z),z},set(I,z){I in R?R[I]=z:O(I,z)}}},IMPORTANT_MODIFIER="!",MODIFIER_SEPARATOR=":",EMPTY_MODIFIERS=[],createResultObject=(_,T,R,P,O)=>({modifiers:_,hasImportantModifier:T,baseClassName:R,maybePostfixModifierPosition:P,isExternal:O}),createParseClassName=_=>{const{prefix:T,experimentalParseClassName:R}=_;let P=O=>{const I=[];let z=0,F=0,G=0,V;const Z=O.length;for(let ne=0;ne<Z;ne++){const se=O[ne];if(z===0&&F===0){if(se===MODIFIER_SEPARATOR){I.push(O.slice(G,ne)),G=ne+1;continue}if(se==="/"){V=ne;continue}}se==="["?z++:se==="]"?z--:se==="("?F++:se===")"&&F--}const Y=I.length===0?O:O.slice(G);let Q=Y,J=!1;Y.endsWith(IMPORTANT_MODIFIER)?(Q=Y.slice(0,-1),J=!0):Y.startsWith(IMPORTANT_MODIFIER)&&(Q=Y.slice(1),J=!0);const ee=V&&V>G?V-G:void 0;return createResultObject(I,J,Q,ee)};if(T){const O=T+MODIFIER_SEPARATOR,I=P;P=z=>z.startsWith(O)?I(z.slice(O.length)):createResultObject(EMPTY_MODIFIERS,!1,z,void 0,!0)}if(R){const O=P;P=I=>R({className:I,parseClassName:O})}return P},createSortModifiers=_=>{const T=new Map;return _.orderSensitiveModifiers.forEach((R,P)=>{T.set(R,1e6+P)}),R=>{const P=[];let O=[];for(let I=0;I<R.length;I++){const z=R[I],F=z[0]==="[",G=T.has(z);F||G?(O.length>0&&(O.sort(),P.push(...O),O=[]),P.push(z)):O.push(z)}return O.length>0&&(O.sort(),P.push(...O)),P}},createConfigUtils=_=>({cache:createLruCache(_.cacheSize),parseClassName:createParseClassName(_),sortModifiers:createSortModifiers(_),...createClassGroupUtils(_)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(_,T)=>{const{parseClassName:R,getClassGroupId:P,getConflictingClassGroupIds:O,sortModifiers:I}=T,z=[],F=_.trim().split(SPLIT_CLASSES_REGEX);let G="";for(let V=F.length-1;V>=0;V-=1){const Z=F[V],{isExternal:Y,modifiers:Q,hasImportantModifier:J,baseClassName:ee,maybePostfixModifierPosition:ne}=R(Z);if(Y){G=Z+(G.length>0?" "+G:G);continue}let se=!!ne,oe=P(se?ee.substring(0,ne):ee);if(!oe){if(!se){G=Z+(G.length>0?" "+G:G);continue}if(oe=P(ee),!oe){G=Z+(G.length>0?" "+G:G);continue}se=!1}const ae=Q.length===0?"":Q.length===1?Q[0]:I(Q).join(":"),ce=J?ae+IMPORTANT_MODIFIER:ae,le=ce+oe;if(z.indexOf(le)>-1)continue;z.push(le);const pe=O(oe,se);for(let me=0;me<pe.length;++me){const he=pe[me];z.push(ce+he)}G=Z+(G.length>0?" "+G:G)}return G},twJoin=(..._)=>{let T=0,R,P,O="";for(;T<_.length;)(R=_[T++])&&(P=toValue(R))&&(O&&(O+=" "),O+=P);return O},toValue=_=>{if(typeof _=="string")return _;let T,R="";for(let P=0;P<_.length;P++)_[P]&&(T=toValue(_[P]))&&(R&&(R+=" "),R+=T);return R},createTailwindMerge=(_,...T)=>{let R,P,O,I;const z=G=>{const V=T.reduce((Z,Y)=>Y(Z),_());return R=createConfigUtils(V),P=R.cache.get,O=R.cache.set,I=F,F(G)},F=G=>{const V=P(G);if(V)return V;const Z=mergeClassList(G,R);return O(G,Z),Z};return I=z,(...G)=>I(twJoin(...G))},fallbackThemeArr=[],fromTheme=_=>{const T=R=>R[_]||fallbackThemeArr;return T.isThemeGetter=!0,T},arbitraryValueRegex=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,arbitraryVariableRegex=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fractionRegex=/^\d+\/\d+$/,tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isFraction=_=>fractionRegex.test(_),isNumber$1=_=>!!_&&!Number.isNaN(Number(_)),isInteger=_=>!!_&&Number.isInteger(Number(_)),isPercent=_=>_.endsWith("%")&&isNumber$1(_.slice(0,-1)),isTshirtSize=_=>tshirtUnitRegex.test(_),isAny=()=>!0,isLengthOnly=_=>lengthUnitRegex.test(_)&&!colorFunctionRegex.test(_),isNever=()=>!1,isShadow=_=>shadowRegex.test(_),isImage=_=>imageRegex.test(_),isAnyNonArbitrary=_=>!isArbitraryValue(_)&&!isArbitraryVariable(_),isArbitrarySize=_=>getIsArbitraryValue(_,isLabelSize,isNever),isArbitraryValue=_=>arbitraryValueRegex.test(_),isArbitraryLength=_=>getIsArbitraryValue(_,isLabelLength,isLengthOnly),isArbitraryNumber=_=>getIsArbitraryValue(_,isLabelNumber,isNumber$1),isArbitraryPosition=_=>getIsArbitraryValue(_,isLabelPosition,isNever),isArbitraryImage=_=>getIsArbitraryValue(_,isLabelImage,isImage),isArbitraryShadow=_=>getIsArbitraryValue(_,isLabelShadow,isShadow),isArbitraryVariable=_=>arbitraryVariableRegex.test(_),isArbitraryVariableLength=_=>getIsArbitraryVariable(_,isLabelLength),isArbitraryVariableFamilyName=_=>getIsArbitraryVariable(_,isLabelFamilyName),isArbitraryVariablePosition=_=>getIsArbitraryVariable(_,isLabelPosition),isArbitraryVariableSize=_=>getIsArbitraryVariable(_,isLabelSize),isArbitraryVariableImage=_=>getIsArbitraryVariable(_,isLabelImage),isArbitraryVariableShadow=_=>getIsArbitraryVariable(_,isLabelShadow,!0),getIsArbitraryValue=(_,T,R)=>{const P=arbitraryValueRegex.exec(_);return P?P[1]?T(P[1]):R(P[2]):!1},getIsArbitraryVariable=(_,T,R=!1)=>{const P=arbitraryVariableRegex.exec(_);return P?P[1]?T(P[1]):R:!1},isLabelPosition=_=>_==="position"||_==="percentage",isLabelImage=_=>_==="image"||_==="url",isLabelSize=_=>_==="length"||_==="size"||_==="bg-size",isLabelLength=_=>_==="length",isLabelNumber=_=>_==="number",isLabelFamilyName=_=>_==="family-name",isLabelShadow=_=>_==="shadow",getDefaultConfig=()=>{const _=fromTheme("color"),T=fromTheme("font"),R=fromTheme("text"),P=fromTheme("font-weight"),O=fromTheme("tracking"),I=fromTheme("leading"),z=fromTheme("breakpoint"),F=fromTheme("container"),G=fromTheme("spacing"),V=fromTheme("radius"),Z=fromTheme("shadow"),Y=fromTheme("inset-shadow"),Q=fromTheme("text-shadow"),J=fromTheme("drop-shadow"),ee=fromTheme("blur"),ne=fromTheme("perspective"),se=fromTheme("aspect"),oe=fromTheme("ease"),ae=fromTheme("animate"),ce=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],pe=()=>[...le(),isArbitraryVariable,isArbitraryValue],me=()=>["auto","hidden","clip","visible","scroll"],he=()=>["auto","contain","none"],fe=()=>[isArbitraryVariable,isArbitraryValue,G],de=()=>[isFraction,"full","auto",...fe()],be=()=>[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue],ye=()=>["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue],Ce=()=>[isInteger,"auto",isArbitraryVariable,isArbitraryValue],ve=()=>["auto","min","max","fr",isArbitraryVariable,isArbitraryValue],Ee=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],we=()=>["start","end","center","stretch","center-safe","end-safe"],ge=()=>["auto",...fe()],Se=()=>[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...fe()],Te=()=>[_,isArbitraryVariable,isArbitraryValue],Ae=()=>[...le(),isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}],Ue=()=>["no-repeat",{repeat:["","x","y","space","round"]}],_e=()=>["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}],$e=()=>[isPercent,isArbitraryVariableLength,isArbitraryLength],Ne=()=>["","none","full",V,isArbitraryVariable,isArbitraryValue],Be=()=>["",isNumber$1,isArbitraryVariableLength,isArbitraryLength],Ze=()=>["solid","dashed","dotted","double"],We=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Oe=()=>[isNumber$1,isPercent,isArbitraryVariablePosition,isArbitraryPosition],Ge=()=>["","none",ee,isArbitraryVariable,isArbitraryValue],je=()=>["none",isNumber$1,isArbitraryVariable,isArbitraryValue],Fe=()=>["none",isNumber$1,isArbitraryVariable,isArbitraryValue],ze=()=>[isNumber$1,isArbitraryVariable,isArbitraryValue],Me=()=>[isFraction,"full",...fe()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber$1],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,se]}],container:["container"],columns:[{columns:[isNumber$1,isArbitraryValue,isArbitraryVariable,F]}],"break-after":[{"break-after":ce()}],"break-before":[{"break-before":ce()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:pe()}],overflow:[{overflow:me()}],"overflow-x":[{"overflow-x":me()}],"overflow-y":[{"overflow-y":me()}],overscroll:[{overscroll:he()}],"overscroll-x":[{"overscroll-x":he()}],"overscroll-y":[{"overscroll-y":he()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:de()}],"inset-x":[{"inset-x":de()}],"inset-y":[{"inset-y":de()}],start:[{start:de()}],end:[{end:de()}],top:[{top:de()}],right:[{right:de()}],bottom:[{bottom:de()}],left:[{left:de()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",F,...fe()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber$1,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":be()}],"col-start-end":[{col:ye()}],"col-start":[{"col-start":Ce()}],"col-end":[{"col-end":Ce()}],"grid-rows":[{"grid-rows":be()}],"row-start-end":[{row:ye()}],"row-start":[{"row-start":Ce()}],"row-end":[{"row-end":Ce()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ve()}],"auto-rows":[{"auto-rows":ve()}],gap:[{gap:fe()}],"gap-x":[{"gap-x":fe()}],"gap-y":[{"gap-y":fe()}],"justify-content":[{justify:[...Ee(),"normal"]}],"justify-items":[{"justify-items":[...we(),"normal"]}],"justify-self":[{"justify-self":["auto",...we()]}],"align-content":[{content:["normal",...Ee()]}],"align-items":[{items:[...we(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...we(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ee()}],"place-items":[{"place-items":[...we(),"baseline"]}],"place-self":[{"place-self":["auto",...we()]}],p:[{p:fe()}],px:[{px:fe()}],py:[{py:fe()}],ps:[{ps:fe()}],pe:[{pe:fe()}],pt:[{pt:fe()}],pr:[{pr:fe()}],pb:[{pb:fe()}],pl:[{pl:fe()}],m:[{m:ge()}],mx:[{mx:ge()}],my:[{my:ge()}],ms:[{ms:ge()}],me:[{me:ge()}],mt:[{mt:ge()}],mr:[{mr:ge()}],mb:[{mb:ge()}],ml:[{ml:ge()}],"space-x":[{"space-x":fe()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":fe()}],"space-y-reverse":["space-y-reverse"],size:[{size:Se()}],w:[{w:[F,"screen",...Se()]}],"min-w":[{"min-w":[F,"screen","none",...Se()]}],"max-w":[{"max-w":[F,"screen","none","prose",{screen:[z]},...Se()]}],h:[{h:["screen","lh",...Se()]}],"min-h":[{"min-h":["screen","lh","none",...Se()]}],"max-h":[{"max-h":["screen","lh",...Se()]}],"font-size":[{text:["base",R,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[P,isArbitraryVariable,isArbitraryNumber]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryValue,T]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[O,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber$1,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[I,...fe()]}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Te()}],"text-color":[{text:Te()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ze(),"wavy"]}],"text-decoration-thickness":[{decoration:[isNumber$1,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:Te()}],"underline-offset":[{"underline-offset":[isNumber$1,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:fe()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ae()}],"bg-repeat":[{bg:Ue()}],"bg-size":[{bg:_e()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:Te()}],"gradient-from-pos":[{from:$e()}],"gradient-via-pos":[{via:$e()}],"gradient-to-pos":[{to:$e()}],"gradient-from":[{from:Te()}],"gradient-via":[{via:Te()}],"gradient-to":[{to:Te()}],rounded:[{rounded:Ne()}],"rounded-s":[{"rounded-s":Ne()}],"rounded-e":[{"rounded-e":Ne()}],"rounded-t":[{"rounded-t":Ne()}],"rounded-r":[{"rounded-r":Ne()}],"rounded-b":[{"rounded-b":Ne()}],"rounded-l":[{"rounded-l":Ne()}],"rounded-ss":[{"rounded-ss":Ne()}],"rounded-se":[{"rounded-se":Ne()}],"rounded-ee":[{"rounded-ee":Ne()}],"rounded-es":[{"rounded-es":Ne()}],"rounded-tl":[{"rounded-tl":Ne()}],"rounded-tr":[{"rounded-tr":Ne()}],"rounded-br":[{"rounded-br":Ne()}],"rounded-bl":[{"rounded-bl":Ne()}],"border-w":[{border:Be()}],"border-w-x":[{"border-x":Be()}],"border-w-y":[{"border-y":Be()}],"border-w-s":[{"border-s":Be()}],"border-w-e":[{"border-e":Be()}],"border-w-t":[{"border-t":Be()}],"border-w-r":[{"border-r":Be()}],"border-w-b":[{"border-b":Be()}],"border-w-l":[{"border-l":Be()}],"divide-x":[{"divide-x":Be()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Be()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Ze(),"hidden","none"]}],"divide-style":[{divide:[...Ze(),"hidden","none"]}],"border-color":[{border:Te()}],"border-color-x":[{"border-x":Te()}],"border-color-y":[{"border-y":Te()}],"border-color-s":[{"border-s":Te()}],"border-color-e":[{"border-e":Te()}],"border-color-t":[{"border-t":Te()}],"border-color-r":[{"border-r":Te()}],"border-color-b":[{"border-b":Te()}],"border-color-l":[{"border-l":Te()}],"divide-color":[{divide:Te()}],"outline-style":[{outline:[...Ze(),"none","hidden"]}],"outline-offset":[{"outline-offset":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber$1,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:Te()}],shadow:[{shadow:["","none",Z,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:Te()}],"inset-shadow":[{"inset-shadow":["none",Y,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":Te()}],"ring-w":[{ring:Be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Te()}],"ring-offset-w":[{"ring-offset":[isNumber$1,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":Te()}],"inset-ring-w":[{"inset-ring":Be()}],"inset-ring-color":[{"inset-ring":Te()}],"text-shadow":[{"text-shadow":["none",Q,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":Te()}],opacity:[{opacity:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[...We(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":We()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber$1]}],"mask-image-linear-from-pos":[{"mask-linear-from":Oe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Oe()}],"mask-image-linear-from-color":[{"mask-linear-from":Te()}],"mask-image-linear-to-color":[{"mask-linear-to":Te()}],"mask-image-t-from-pos":[{"mask-t-from":Oe()}],"mask-image-t-to-pos":[{"mask-t-to":Oe()}],"mask-image-t-from-color":[{"mask-t-from":Te()}],"mask-image-t-to-color":[{"mask-t-to":Te()}],"mask-image-r-from-pos":[{"mask-r-from":Oe()}],"mask-image-r-to-pos":[{"mask-r-to":Oe()}],"mask-image-r-from-color":[{"mask-r-from":Te()}],"mask-image-r-to-color":[{"mask-r-to":Te()}],"mask-image-b-from-pos":[{"mask-b-from":Oe()}],"mask-image-b-to-pos":[{"mask-b-to":Oe()}],"mask-image-b-from-color":[{"mask-b-from":Te()}],"mask-image-b-to-color":[{"mask-b-to":Te()}],"mask-image-l-from-pos":[{"mask-l-from":Oe()}],"mask-image-l-to-pos":[{"mask-l-to":Oe()}],"mask-image-l-from-color":[{"mask-l-from":Te()}],"mask-image-l-to-color":[{"mask-l-to":Te()}],"mask-image-x-from-pos":[{"mask-x-from":Oe()}],"mask-image-x-to-pos":[{"mask-x-to":Oe()}],"mask-image-x-from-color":[{"mask-x-from":Te()}],"mask-image-x-to-color":[{"mask-x-to":Te()}],"mask-image-y-from-pos":[{"mask-y-from":Oe()}],"mask-image-y-to-pos":[{"mask-y-to":Oe()}],"mask-image-y-from-color":[{"mask-y-from":Te()}],"mask-image-y-to-color":[{"mask-y-to":Te()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":Oe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Oe()}],"mask-image-radial-from-color":[{"mask-radial-from":Te()}],"mask-image-radial-to-color":[{"mask-radial-to":Te()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":le()}],"mask-image-conic-pos":[{"mask-conic":[isNumber$1]}],"mask-image-conic-from-pos":[{"mask-conic-from":Oe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Oe()}],"mask-image-conic-from-color":[{"mask-conic-from":Te()}],"mask-image-conic-to-color":[{"mask-conic-to":Te()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ae()}],"mask-repeat":[{mask:Ue()}],"mask-size":[{mask:_e()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:Ge()}],brightness:[{brightness:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",J,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":Te()}],grayscale:[{grayscale:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":Ge()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":fe()}],"border-spacing-x":[{"border-spacing-x":fe()}],"border-spacing-y":[{"border-spacing-y":fe()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber$1,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",oe,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",ae,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[ne,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":pe()}],rotate:[{rotate:je()}],"rotate-x":[{"rotate-x":je()}],"rotate-y":[{"rotate-y":je()}],"rotate-z":[{"rotate-z":je()}],scale:[{scale:Fe()}],"scale-x":[{"scale-x":Fe()}],"scale-y":[{"scale-y":Fe()}],"scale-z":[{"scale-z":Fe()}],"scale-3d":["scale-3d"],skew:[{skew:ze()}],"skew-x":[{"skew-x":ze()}],"skew-y":[{"skew-y":ze()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:pe()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Me()}],"translate-x":[{"translate-x":Me()}],"translate-y":[{"translate-y":Me()}],"translate-z":[{"translate-z":Me()}],"translate-none":["translate-none"],accent:[{accent:Te()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Te()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":fe()}],"scroll-mx":[{"scroll-mx":fe()}],"scroll-my":[{"scroll-my":fe()}],"scroll-ms":[{"scroll-ms":fe()}],"scroll-me":[{"scroll-me":fe()}],"scroll-mt":[{"scroll-mt":fe()}],"scroll-mr":[{"scroll-mr":fe()}],"scroll-mb":[{"scroll-mb":fe()}],"scroll-ml":[{"scroll-ml":fe()}],"scroll-p":[{"scroll-p":fe()}],"scroll-px":[{"scroll-px":fe()}],"scroll-py":[{"scroll-py":fe()}],"scroll-ps":[{"scroll-ps":fe()}],"scroll-pe":[{"scroll-pe":fe()}],"scroll-pt":[{"scroll-pt":fe()}],"scroll-pr":[{"scroll-pr":fe()}],"scroll-pb":[{"scroll-pb":fe()}],"scroll-pl":[{"scroll-pl":fe()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none",...Te()]}],"stroke-w":[{stroke:[isNumber$1,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none",...Te()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},twMerge=createTailwindMerge(getDefaultConfig);function cn(..._){return twMerge(clsx(_))}const Input=reactExports.forwardRef(({className:_,type:T,...R},P)=>jsxRuntimeExports.jsx("input",{type:T,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",_),ref:P,...R}));Input.displayName="Input";var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);function setRef(_,T){if(typeof _=="function")return _(T);_!=null&&(_.current=T)}function composeRefs(..._){return T=>{let R=!1;const P=_.map(O=>{const I=setRef(O,T);return!R&&typeof I=="function"&&(R=!0),I});if(R)return()=>{for(let O=0;O<P.length;O++){const I=P[O];typeof I=="function"?I():setRef(_[O],null)}}}}function useComposedRefs(..._){return reactExports.useCallback(composeRefs(..._),_)}var REACT_LAZY_TYPE=Symbol.for("react.lazy"),use=React$1[" use ".trim().toString()];function isPromiseLike(_){return typeof _=="object"&&_!==null&&"then"in _}function isLazyComponent(_){return _!=null&&typeof _=="object"&&"$$typeof"in _&&_.$$typeof===REACT_LAZY_TYPE&&"_payload"in _&&isPromiseLike(_._payload)}function createSlot$3(_){const T=createSlotClone$3(_),R=reactExports.forwardRef((P,O)=>{let{children:I,...z}=P;isLazyComponent(I)&&typeof use=="function"&&(I=use(I._payload));const F=reactExports.Children.toArray(I),G=F.find(isSlottable$3);if(G){const V=G.props.children,Z=F.map(Y=>Y===G?reactExports.Children.count(V)>1?reactExports.Children.only(null):reactExports.isValidElement(V)?V.props.children:null:Y);return jsxRuntimeExports.jsx(T,{...z,ref:O,children:reactExports.isValidElement(V)?reactExports.cloneElement(V,void 0,Z):null})}return jsxRuntimeExports.jsx(T,{...z,ref:O,children:I})});return R.displayName=`${_}.Slot`,R}var Slot$1=createSlot$3("Slot");function createSlotClone$3(_){const T=reactExports.forwardRef((R,P)=>{let{children:O,...I}=R;if(isLazyComponent(O)&&typeof use=="function"&&(O=use(O._payload)),reactExports.isValidElement(O)){const z=getElementRef$4(O),F=mergeProps$3(I,O.props);return O.type!==reactExports.Fragment&&(F.ref=P?composeRefs(P,z):z),reactExports.cloneElement(O,F)}return reactExports.Children.count(O)>1?reactExports.Children.only(null):null});return T.displayName=`${_}.SlotClone`,T}var SLOTTABLE_IDENTIFIER$3=Symbol("radix.slottable");function isSlottable$3(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$3}function mergeProps$3(_,T){const R={...T};for(const P in T){const O=_[P],I=T[P];/^on[A-Z]/.test(P)?O&&I?R[P]=(...F)=>{const G=I(...F);return O(...F),G}:O&&(R[P]=O):P==="style"?R[P]={...O,...I}:P==="className"&&(R[P]=[O,I].filter(Boolean).join(" "))}return{..._,...R}}function getElementRef$4(_){let T=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning;return R?_.ref:(T=Object.getOwnPropertyDescriptor(_,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning,R?_.props.ref:_.props.ref||_.ref)}var NODES$3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive$3=NODES$3.reduce((_,T)=>{const R=createSlot$3(`Primitive.${T}`),P=reactExports.forwardRef((O,I)=>{const{asChild:z,...F}=O,G=z?R:T;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(G,{...F,ref:I})});return P.displayName=`Primitive.${T}`,{..._,[T]:P}},{}),NAME$3="Label",Label$2=reactExports.forwardRef((_,T)=>jsxRuntimeExports.jsx(Primitive$3.label,{..._,ref:T,onMouseDown:R=>{R.target.closest("button, input, select, textarea")||(_.onMouseDown?.(R),!R.defaultPrevented&&R.detail>1&&R.preventDefault())}}));Label$2.displayName=NAME$3;var Root$6=Label$2;const falsyToString=_=>typeof _=="boolean"?`${_}`:_===0?"0":_,cx=clsx,cva=(_,T)=>R=>{var P;if(T?.variants==null)return cx(_,R?.class,R?.className);const{variants:O,defaultVariants:I}=T,z=Object.keys(O).map(V=>{const Z=R?.[V],Y=I?.[V];if(Z===null)return null;const Q=falsyToString(Z)||falsyToString(Y);return O[V][Q]}),F=R&&Object.entries(R).reduce((V,Z)=>{let[Y,Q]=Z;return Q===void 0||(V[Y]=Q),V},{}),G=T==null||(P=T.compoundVariants)===null||P===void 0?void 0:P.reduce((V,Z)=>{let{class:Y,className:Q,...J}=Z;return Object.entries(J).every(ee=>{let[ne,se]=ee;return Array.isArray(se)?se.includes({...I,...F}[ne]):{...I,...F}[ne]===se})?[...V,Y,Q]:V},[]);return cx(_,z,G,R?.class,R?.className)},labelVariants=cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label$1=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(Root$6,{ref:R,className:cn(labelVariants(),_),...T}));Label$1.displayName=Root$6.displayName;function NumberInput({label:_,value:T,onChange:R,disabled:P,min:O,max:I,step:z=.1}){const F=G=>{const V=parseFloat(G.target.value);if(!isNaN(V)){let Z=V;O!==void 0&&(Z=Math.max(O,Z)),I!==void 0&&(Z=Math.min(I,Z)),R(Z)}};return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs w-32 shrink-0",children:_}),jsxRuntimeExports.jsx(Input,{type:"number",value:T,onChange:F,disabled:P,min:O,max:I,step:z,className:"h-7 text-xs w-24"})]})}function IntegerInput({label:_,value:T,onChange:R,disabled:P,min:O,max:I}){const z=F=>{const G=parseInt(F.target.value,10);if(!isNaN(G)){let V=G;O!==void 0&&(V=Math.max(O,V)),I!==void 0&&(V=Math.min(I,V)),R(V)}};return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs w-32 shrink-0",children:_}),jsxRuntimeExports.jsx(Input,{type:"number",value:T,onChange:z,disabled:P,min:O,max:I,step:1,className:"h-7 text-xs w-24"})]})}function createContextScope$1(_,T=[]){let R=[];function P(I,z){const F=reactExports.createContext(z),G=R.length;R=[...R,z];const V=Y=>{const{scope:Q,children:J,...ee}=Y,ne=Q?.[_]?.[G]||F,se=reactExports.useMemo(()=>ee,Object.values(ee));return jsxRuntimeExports.jsx(ne.Provider,{value:se,children:J})};V.displayName=I+"Provider";function Z(Y,Q){const J=Q?.[_]?.[G]||F,ee=reactExports.useContext(J);if(ee)return ee;if(z!==void 0)return z;throw new Error(`\`${Y}\` must be used within \`${I}\``)}return[V,Z]}const O=()=>{const I=R.map(z=>reactExports.createContext(z));return function(F){const G=F?.[_]||I;return reactExports.useMemo(()=>({[`__scope${_}`]:{...F,[_]:G}}),[F,G])}};return O.scopeName=_,[P,composeContextScopes$1(O,...T)]}function composeContextScopes$1(..._){const T=_[0];if(_.length===1)return T;const R=()=>{const P=_.map(O=>({useScope:O(),scopeName:O.scopeName}));return function(I){const z=P.reduce((F,{useScope:G,scopeName:V})=>{const Y=G(I)[`__scope${V}`];return{...F,...Y}},{});return reactExports.useMemo(()=>({[`__scope${T.scopeName}`]:z}),[z])}};return R.scopeName=T.scopeName,R}function composeEventHandlers(_,T,{checkForDefaultPrevented:R=!0}={}){return function(O){if(_?.(O),R===!1||!O.defaultPrevented)return T?.(O)}}var useLayoutEffect2=globalThis?.document?reactExports.useLayoutEffect:()=>{},useInsertionEffect=React$1[" useInsertionEffect ".trim().toString()]||useLayoutEffect2;function useControllableState({prop:_,defaultProp:T,onChange:R=()=>{},caller:P}){const[O,I,z]=useUncontrolledState({defaultProp:T,onChange:R}),F=_!==void 0,G=F?_:O;{const Z=reactExports.useRef(_!==void 0);reactExports.useEffect(()=>{const Y=Z.current;Y!==F&&console.warn(`${P} is changing from ${Y?"controlled":"uncontrolled"} to ${F?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),Z.current=F},[F,P])}const V=reactExports.useCallback(Z=>{if(F){const Y=isFunction$1(Z)?Z(_):Z;Y!==_&&z.current?.(Y)}else I(Z)},[F,_,I,z]);return[G,V]}function useUncontrolledState({defaultProp:_,onChange:T}){const[R,P]=reactExports.useState(_),O=reactExports.useRef(R),I=reactExports.useRef(T);return useInsertionEffect(()=>{I.current=T},[T]),reactExports.useEffect(()=>{O.current!==R&&(I.current?.(R),O.current=R)},[R,O]),[R,P,I]}function isFunction$1(_){return typeof _=="function"}function usePrevious(_){const T=reactExports.useRef({value:_,previous:_});return reactExports.useMemo(()=>(T.current.value!==_&&(T.current.previous=T.current.value,T.current.value=_),T.current.previous),[_])}function useSize(_){const[T,R]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(_){R({width:_.offsetWidth,height:_.offsetHeight});const P=new ResizeObserver(O=>{if(!Array.isArray(O)||!O.length)return;const I=O[0];let z,F;if("borderBoxSize"in I){const G=I.borderBoxSize,V=Array.isArray(G)?G[0]:G;z=V.inlineSize,F=V.blockSize}else z=_.offsetWidth,F=_.offsetHeight;R({width:z,height:F})});return P.observe(_,{box:"border-box"}),()=>P.unobserve(_)}else R(void 0)},[_]),T}function useStateMachine$1(_,T){return reactExports.useReducer((R,P)=>T[R][P]??R,_)}var Presence=_=>{const{present:T,children:R}=_,P=usePresence(T),O=typeof R=="function"?R({present:P.isPresent}):reactExports.Children.only(R),I=useComposedRefs(P.ref,getElementRef$3(O));return typeof R=="function"||P.isPresent?reactExports.cloneElement(O,{ref:I}):null};Presence.displayName="Presence";function usePresence(_){const[T,R]=reactExports.useState(),P=reactExports.useRef(null),O=reactExports.useRef(_),I=reactExports.useRef("none"),z=_?"mounted":"unmounted",[F,G]=useStateMachine$1(z,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const V=getAnimationName(P.current);I.current=F==="mounted"?V:"none"},[F]),useLayoutEffect2(()=>{const V=P.current,Z=O.current;if(Z!==_){const Q=I.current,J=getAnimationName(V);_?G("MOUNT"):J==="none"||V?.display==="none"?G("UNMOUNT"):G(Z&&Q!==J?"ANIMATION_OUT":"UNMOUNT"),O.current=_}},[_,G]),useLayoutEffect2(()=>{if(T){let V;const Z=T.ownerDocument.defaultView??window,Y=J=>{const ne=getAnimationName(P.current).includes(CSS.escape(J.animationName));if(J.target===T&&ne&&(G("ANIMATION_END"),!O.current)){const se=T.style.animationFillMode;T.style.animationFillMode="forwards",V=Z.setTimeout(()=>{T.style.animationFillMode==="forwards"&&(T.style.animationFillMode=se)})}},Q=J=>{J.target===T&&(I.current=getAnimationName(P.current))};return T.addEventListener("animationstart",Q),T.addEventListener("animationcancel",Y),T.addEventListener("animationend",Y),()=>{Z.clearTimeout(V),T.removeEventListener("animationstart",Q),T.removeEventListener("animationcancel",Y),T.removeEventListener("animationend",Y)}}else G("ANIMATION_END")},[T,G]),{isPresent:["mounted","unmountSuspended"].includes(F),ref:reactExports.useCallback(V=>{P.current=V?getComputedStyle(V):null,R(V)},[])}}function getAnimationName(_){return _?.animationName||"none"}function getElementRef$3(_){let T=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning;return R?_.ref:(T=Object.getOwnPropertyDescriptor(_,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning,R?_.props.ref:_.props.ref||_.ref)}function createSlot$2(_){const T=createSlotClone$2(_),R=reactExports.forwardRef((P,O)=>{const{children:I,...z}=P,F=reactExports.Children.toArray(I),G=F.find(isSlottable$2);if(G){const V=G.props.children,Z=F.map(Y=>Y===G?reactExports.Children.count(V)>1?reactExports.Children.only(null):reactExports.isValidElement(V)?V.props.children:null:Y);return jsxRuntimeExports.jsx(T,{...z,ref:O,children:reactExports.isValidElement(V)?reactExports.cloneElement(V,void 0,Z):null})}return jsxRuntimeExports.jsx(T,{...z,ref:O,children:I})});return R.displayName=`${_}.Slot`,R}function createSlotClone$2(_){const T=reactExports.forwardRef((R,P)=>{const{children:O,...I}=R;if(reactExports.isValidElement(O)){const z=getElementRef$2(O),F=mergeProps$2(I,O.props);return O.type!==reactExports.Fragment&&(F.ref=P?composeRefs(P,z):z),reactExports.cloneElement(O,F)}return reactExports.Children.count(O)>1?reactExports.Children.only(null):null});return T.displayName=`${_}.SlotClone`,T}var SLOTTABLE_IDENTIFIER$2=Symbol("radix.slottable");function isSlottable$2(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$2}function mergeProps$2(_,T){const R={...T};for(const P in T){const O=_[P],I=T[P];/^on[A-Z]/.test(P)?O&&I?R[P]=(...F)=>{const G=I(...F);return O(...F),G}:O&&(R[P]=O):P==="style"?R[P]={...O,...I}:P==="className"&&(R[P]=[O,I].filter(Boolean).join(" "))}return{..._,...R}}function getElementRef$2(_){let T=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning;return R?_.ref:(T=Object.getOwnPropertyDescriptor(_,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning,R?_.props.ref:_.props.ref||_.ref)}var NODES$2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive$2=NODES$2.reduce((_,T)=>{const R=createSlot$2(`Primitive.${T}`),P=reactExports.forwardRef((O,I)=>{const{asChild:z,...F}=O,G=z?R:T;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(G,{...F,ref:I})});return P.displayName=`Primitive.${T}`,{..._,[T]:P}},{});function dispatchDiscreteCustomEvent(_,T){_&&reactDomExports.flushSync(()=>_.dispatchEvent(T))}var CHECKBOX_NAME="Checkbox",[createCheckboxContext]=createContextScope$1(CHECKBOX_NAME),[CheckboxProviderImpl,useCheckboxContext]=createCheckboxContext(CHECKBOX_NAME);function CheckboxProvider(_){const{__scopeCheckbox:T,checked:R,children:P,defaultChecked:O,disabled:I,form:z,name:F,onCheckedChange:G,required:V,value:Z="on",internal_do_not_use_render:Y}=_,[Q,J]=useControllableState({prop:R,defaultProp:O??!1,onChange:G,caller:CHECKBOX_NAME}),[ee,ne]=reactExports.useState(null),[se,oe]=reactExports.useState(null),ae=reactExports.useRef(!1),ce=ee?!!z||!!ee.closest("form"):!0,le={checked:Q,disabled:I,setChecked:J,control:ee,setControl:ne,name:F,form:z,value:Z,hasConsumerStoppedPropagationRef:ae,required:V,defaultChecked:isIndeterminate(O)?!1:O,isFormControl:ce,bubbleInput:se,setBubbleInput:oe};return jsxRuntimeExports.jsx(CheckboxProviderImpl,{scope:T,...le,children:isFunction(Y)?Y(le):P})}var TRIGGER_NAME$4="CheckboxTrigger",CheckboxTrigger=reactExports.forwardRef(({__scopeCheckbox:_,onKeyDown:T,onClick:R,...P},O)=>{const{control:I,value:z,disabled:F,checked:G,required:V,setControl:Z,setChecked:Y,hasConsumerStoppedPropagationRef:Q,isFormControl:J,bubbleInput:ee}=useCheckboxContext(TRIGGER_NAME$4,_),ne=useComposedRefs(O,Z),se=reactExports.useRef(G);return reactExports.useEffect(()=>{const oe=I?.form;if(oe){const ae=()=>Y(se.current);return oe.addEventListener("reset",ae),()=>oe.removeEventListener("reset",ae)}},[I,Y]),jsxRuntimeExports.jsx(Primitive$2.button,{type:"button",role:"checkbox","aria-checked":isIndeterminate(G)?"mixed":G,"aria-required":V,"data-state":getState$2(G),"data-disabled":F?"":void 0,disabled:F,value:z,...P,ref:ne,onKeyDown:composeEventHandlers(T,oe=>{oe.key==="Enter"&&oe.preventDefault()}),onClick:composeEventHandlers(R,oe=>{Y(ae=>isIndeterminate(ae)?!0:!ae),ee&&J&&(Q.current=oe.isPropagationStopped(),Q.current||oe.stopPropagation())})})});CheckboxTrigger.displayName=TRIGGER_NAME$4;var Checkbox$1=reactExports.forwardRef((_,T)=>{const{__scopeCheckbox:R,name:P,checked:O,defaultChecked:I,required:z,disabled:F,value:G,onCheckedChange:V,form:Z,...Y}=_;return jsxRuntimeExports.jsx(CheckboxProvider,{__scopeCheckbox:R,checked:O,defaultChecked:I,disabled:F,required:z,onCheckedChange:V,name:P,form:Z,value:G,internal_do_not_use_render:({isFormControl:Q})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CheckboxTrigger,{...Y,ref:T,__scopeCheckbox:R}),Q&&jsxRuntimeExports.jsx(CheckboxBubbleInput,{__scopeCheckbox:R})]})})});Checkbox$1.displayName=CHECKBOX_NAME;var INDICATOR_NAME$1="CheckboxIndicator",CheckboxIndicator=reactExports.forwardRef((_,T)=>{const{__scopeCheckbox:R,forceMount:P,...O}=_,I=useCheckboxContext(INDICATOR_NAME$1,R);return jsxRuntimeExports.jsx(Presence,{present:P||isIndeterminate(I.checked)||I.checked===!0,children:jsxRuntimeExports.jsx(Primitive$2.span,{"data-state":getState$2(I.checked),"data-disabled":I.disabled?"":void 0,...O,ref:T,style:{pointerEvents:"none",..._.style}})})});CheckboxIndicator.displayName=INDICATOR_NAME$1;var BUBBLE_INPUT_NAME$1="CheckboxBubbleInput",CheckboxBubbleInput=reactExports.forwardRef(({__scopeCheckbox:_,...T},R)=>{const{control:P,hasConsumerStoppedPropagationRef:O,checked:I,defaultChecked:z,required:F,disabled:G,name:V,value:Z,form:Y,bubbleInput:Q,setBubbleInput:J}=useCheckboxContext(BUBBLE_INPUT_NAME$1,_),ee=useComposedRefs(R,J),ne=usePrevious(I),se=useSize(P);reactExports.useEffect(()=>{const ae=Q;if(!ae)return;const ce=window.HTMLInputElement.prototype,pe=Object.getOwnPropertyDescriptor(ce,"checked").set,me=!O.current;if(ne!==I&&pe){const he=new Event("click",{bubbles:me});ae.indeterminate=isIndeterminate(I),pe.call(ae,isIndeterminate(I)?!1:I),ae.dispatchEvent(he)}},[Q,ne,I,O]);const oe=reactExports.useRef(isIndeterminate(I)?!1:I);return jsxRuntimeExports.jsx(Primitive$2.input,{type:"checkbox","aria-hidden":!0,defaultChecked:z??oe.current,required:F,disabled:G,name:V,value:Z,form:Y,...T,tabIndex:-1,ref:ee,style:{...T.style,...se,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});CheckboxBubbleInput.displayName=BUBBLE_INPUT_NAME$1;function isFunction(_){return typeof _=="function"}function isIndeterminate(_){return _==="indeterminate"}function getState$2(_){return isIndeterminate(_)?"indeterminate":_?"checked":"unchecked"}const toKebabCase=_=>_.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=_=>_.replace(/^([A-Z])|[\s-_]+(\w)/g,(T,R,P)=>P?P.toUpperCase():R.toLowerCase()),toPascalCase=_=>{const T=toCamelCase(_);return T.charAt(0).toUpperCase()+T.slice(1)},mergeClasses=(..._)=>_.filter((T,R,P)=>!!T&&T.trim()!==""&&P.indexOf(T)===R).join(" ").trim(),hasA11yProp=_=>{for(const T in _)if(T.startsWith("aria-")||T==="role"||T==="title")return!0};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Icon$1=reactExports.forwardRef(({color:_="currentColor",size:T=24,strokeWidth:R=2,absoluteStrokeWidth:P,className:O="",children:I,iconNode:z,...F},G)=>reactExports.createElement("svg",{ref:G,...defaultAttributes,width:T,height:T,stroke:_,strokeWidth:P?Number(R)*24/Number(T):R,className:mergeClasses("lucide",O),...!I&&!hasA11yProp(F)&&{"aria-hidden":"true"},...F},[...z.map(([V,Z])=>reactExports.createElement(V,Z)),...Array.isArray(I)?I:[I]]));const createLucideIcon=(_,T)=>{const R=reactExports.forwardRef(({className:P,...O},I)=>reactExports.createElement(Icon$1,{ref:I,iconNode:T,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(_))}`,`lucide-${_}`,P),...O}));return R.displayName=toPascalCase(_),R};const __iconNode$k=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Camera=createLucideIcon("camera",__iconNode$k);const __iconNode$j=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$j);const __iconNode$i=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$i);const __iconNode$h=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ChevronUp=createLucideIcon("chevron-up",__iconNode$h);const __iconNode$g=[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],ClipboardPaste=createLucideIcon("clipboard-paste",__iconNode$g);const __iconNode$f=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$f);const __iconNode$e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$e);const __iconNode$d=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],FileDown=createLucideIcon("file-down",__iconNode$d);const __iconNode$c=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],FileSpreadsheet=createLucideIcon("file-spreadsheet",__iconNode$c);const __iconNode$b=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Moon=createLucideIcon("moon",__iconNode$b);const __iconNode$a=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Pause=createLucideIcon("pause",__iconNode$a);const __iconNode$9=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Play=createLucideIcon("play",__iconNode$9);const __iconNode$8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$8);const __iconNode$7=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RotateCcw=createLucideIcon("rotate-ccw",__iconNode$7);const __iconNode$6=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],SkipForward=createLucideIcon("skip-forward",__iconNode$6);const __iconNode$5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Square=createLucideIcon("square",__iconNode$5);const __iconNode$4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sun=createLucideIcon("sun",__iconNode$4);const __iconNode$3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$3);const __iconNode$2=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Upload=createLucideIcon("upload",__iconNode$2);const __iconNode$1=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Video=createLucideIcon("video",__iconNode$1);const __iconNode=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode),Checkbox=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(Checkbox$1,{ref:R,className:cn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",_),...T,children:jsxRuntimeExports.jsx(CheckboxIndicator,{className:cn("flex items-center justify-center text-current"),children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}));Checkbox.displayName=Checkbox$1.displayName;function BoolInput({label:_,value:T,onChange:R,disabled:P}){return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs w-32 shrink-0",children:_}),jsxRuntimeExports.jsx(Checkbox,{checked:T,onCheckedChange:O=>R(O===!0),disabled:P})]})}function clamp$1(_,[T,R]){return Math.min(R,Math.max(T,_))}function createSlot$1(_){const T=createSlotClone$1(_),R=reactExports.forwardRef((P,O)=>{const{children:I,...z}=P,F=reactExports.Children.toArray(I),G=F.find(isSlottable$1);if(G){const V=G.props.children,Z=F.map(Y=>Y===G?reactExports.Children.count(V)>1?reactExports.Children.only(null):reactExports.isValidElement(V)?V.props.children:null:Y);return jsxRuntimeExports.jsx(T,{...z,ref:O,children:reactExports.isValidElement(V)?reactExports.cloneElement(V,void 0,Z):null})}return jsxRuntimeExports.jsx(T,{...z,ref:O,children:I})});return R.displayName=`${_}.Slot`,R}function createSlotClone$1(_){const T=reactExports.forwardRef((R,P)=>{const{children:O,...I}=R;if(reactExports.isValidElement(O)){const z=getElementRef$1(O),F=mergeProps$1(I,O.props);return O.type!==reactExports.Fragment&&(F.ref=P?composeRefs(P,z):z),reactExports.cloneElement(O,F)}return reactExports.Children.count(O)>1?reactExports.Children.only(null):null});return T.displayName=`${_}.SlotClone`,T}var SLOTTABLE_IDENTIFIER$1=Symbol("radix.slottable");function isSlottable$1(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$1}function mergeProps$1(_,T){const R={...T};for(const P in T){const O=_[P],I=T[P];/^on[A-Z]/.test(P)?O&&I?R[P]=(...F)=>{const G=I(...F);return O(...F),G}:O&&(R[P]=O):P==="style"?R[P]={...O,...I}:P==="className"&&(R[P]=[O,I].filter(Boolean).join(" "))}return{..._,...R}}function getElementRef$1(_){let T=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning;return R?_.ref:(T=Object.getOwnPropertyDescriptor(_,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning,R?_.props.ref:_.props.ref||_.ref)}function createCollection(_){const T=_+"CollectionProvider",[R,P]=createContextScope$1(T),[O,I]=R(T,{collectionRef:{current:null},itemMap:new Map}),z=ne=>{const{scope:se,children:oe}=ne,ae=React.useRef(null),ce=React.useRef(new Map).current;return jsxRuntimeExports.jsx(O,{scope:se,itemMap:ce,collectionRef:ae,children:oe})};z.displayName=T;const F=_+"CollectionSlot",G=createSlot$1(F),V=React.forwardRef((ne,se)=>{const{scope:oe,children:ae}=ne,ce=I(F,oe),le=useComposedRefs(se,ce.collectionRef);return jsxRuntimeExports.jsx(G,{ref:le,children:ae})});V.displayName=F;const Z=_+"CollectionItemSlot",Y="data-radix-collection-item",Q=createSlot$1(Z),J=React.forwardRef((ne,se)=>{const{scope:oe,children:ae,...ce}=ne,le=React.useRef(null),pe=useComposedRefs(se,le),me=I(Z,oe);return React.useEffect(()=>(me.itemMap.set(le,{ref:le,...ce}),()=>{me.itemMap.delete(le)})),jsxRuntimeExports.jsx(Q,{[Y]:"",ref:pe,children:ae})});J.displayName=Z;function ee(ne){const se=I(_+"CollectionConsumer",ne);return React.useCallback(()=>{const ae=se.collectionRef.current;if(!ae)return[];const ce=Array.from(ae.querySelectorAll(`[${Y}]`));return Array.from(se.itemMap.values()).sort((me,he)=>ce.indexOf(me.ref.current)-ce.indexOf(he.ref.current))},[se.collectionRef,se.itemMap])}return[{Provider:z,Slot:V,ItemSlot:J},ee,P]}var DirectionContext=reactExports.createContext(void 0);function useDirection(_){const T=reactExports.useContext(DirectionContext);return _||T||"ltr"}function useCallbackRef$1(_){const T=reactExports.useRef(_);return reactExports.useEffect(()=>{T.current=_}),reactExports.useMemo(()=>(...R)=>T.current?.(...R),[])}function useEscapeKeydown(_,T=globalThis?.document){const R=useCallbackRef$1(_);reactExports.useEffect(()=>{const P=O=>{O.key==="Escape"&&R(O)};return T.addEventListener("keydown",P,{capture:!0}),()=>T.removeEventListener("keydown",P,{capture:!0})},[R,T])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((_,T)=>{const{disableOutsidePointerEvents:R=!1,onEscapeKeyDown:P,onPointerDownOutside:O,onFocusOutside:I,onInteractOutside:z,onDismiss:F,...G}=_,V=reactExports.useContext(DismissableLayerContext),[Z,Y]=reactExports.useState(null),Q=Z?.ownerDocument??globalThis?.document,[,J]=reactExports.useState({}),ee=useComposedRefs(T,he=>Y(he)),ne=Array.from(V.layers),[se]=[...V.layersWithOutsidePointerEventsDisabled].slice(-1),oe=ne.indexOf(se),ae=Z?ne.indexOf(Z):-1,ce=V.layersWithOutsidePointerEventsDisabled.size>0,le=ae>=oe,pe=usePointerDownOutside(he=>{const fe=he.target,de=[...V.branches].some(be=>be.contains(fe));!le||de||(O?.(he),z?.(he),he.defaultPrevented||F?.())},Q),me=useFocusOutside(he=>{const fe=he.target;[...V.branches].some(be=>be.contains(fe))||(I?.(he),z?.(he),he.defaultPrevented||F?.())},Q);return useEscapeKeydown(he=>{ae===V.layers.size-1&&(P?.(he),!he.defaultPrevented&&F&&(he.preventDefault(),F()))},Q),reactExports.useEffect(()=>{if(Z)return R&&(V.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=Q.body.style.pointerEvents,Q.body.style.pointerEvents="none"),V.layersWithOutsidePointerEventsDisabled.add(Z)),V.layers.add(Z),dispatchUpdate(),()=>{R&&V.layersWithOutsidePointerEventsDisabled.size===1&&(Q.body.style.pointerEvents=originalBodyPointerEvents)}},[Z,Q,R,V]),reactExports.useEffect(()=>()=>{Z&&(V.layers.delete(Z),V.layersWithOutsidePointerEventsDisabled.delete(Z),dispatchUpdate())},[Z,V]),reactExports.useEffect(()=>{const he=()=>J({});return document.addEventListener(CONTEXT_UPDATE,he),()=>document.removeEventListener(CONTEXT_UPDATE,he)},[]),jsxRuntimeExports.jsx(Primitive$2.div,{...G,ref:ee,style:{pointerEvents:ce?le?"auto":"none":void 0,..._.style},onFocusCapture:composeEventHandlers(_.onFocusCapture,me.onFocusCapture),onBlurCapture:composeEventHandlers(_.onBlurCapture,me.onBlurCapture),onPointerDownCapture:composeEventHandlers(_.onPointerDownCapture,pe.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((_,T)=>{const R=reactExports.useContext(DismissableLayerContext),P=reactExports.useRef(null),O=useComposedRefs(T,P);return reactExports.useEffect(()=>{const I=P.current;if(I)return R.branches.add(I),()=>{R.branches.delete(I)}},[R.branches]),jsxRuntimeExports.jsx(Primitive$2.div,{..._,ref:O})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(_,T=globalThis?.document){const R=useCallbackRef$1(_),P=reactExports.useRef(!1),O=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const I=F=>{if(F.target&&!P.current){let G=function(){handleAndDispatchCustomEvent(POINTER_DOWN_OUTSIDE,R,V,{discrete:!0})};const V={originalEvent:F};F.pointerType==="touch"?(T.removeEventListener("click",O.current),O.current=G,T.addEventListener("click",O.current,{once:!0})):G()}else T.removeEventListener("click",O.current);P.current=!1},z=window.setTimeout(()=>{T.addEventListener("pointerdown",I)},0);return()=>{window.clearTimeout(z),T.removeEventListener("pointerdown",I),T.removeEventListener("click",O.current)}},[T,R]),{onPointerDownCapture:()=>P.current=!0}}function useFocusOutside(_,T=globalThis?.document){const R=useCallbackRef$1(_),P=reactExports.useRef(!1);return reactExports.useEffect(()=>{const O=I=>{I.target&&!P.current&&handleAndDispatchCustomEvent(FOCUS_OUTSIDE,R,{originalEvent:I},{discrete:!1})};return T.addEventListener("focusin",O),()=>T.removeEventListener("focusin",O)},[T,R]),{onFocusCapture:()=>P.current=!0,onBlurCapture:()=>P.current=!1}}function dispatchUpdate(){const _=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(_)}function handleAndDispatchCustomEvent(_,T,R,{discrete:P}){const O=R.originalEvent.target,I=new CustomEvent(_,{bubbles:!1,cancelable:!0,detail:R});T&&O.addEventListener(_,T,{once:!0}),P?dispatchDiscreteCustomEvent(O,I):O.dispatchEvent(I)}var count$3=0;function useFocusGuards(){reactExports.useEffect(()=>{const _=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",_[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",_[1]??createFocusGuard()),count$3++,()=>{count$3===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(T=>T.remove()),count$3--}},[])}function createFocusGuard(){const _=document.createElement("span");return _.setAttribute("data-radix-focus-guard",""),_.tabIndex=0,_.style.outline="none",_.style.opacity="0",_.style.position="fixed",_.style.pointerEvents="none",_}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((_,T)=>{const{loop:R=!1,trapped:P=!1,onMountAutoFocus:O,onUnmountAutoFocus:I,...z}=_,[F,G]=reactExports.useState(null),V=useCallbackRef$1(O),Z=useCallbackRef$1(I),Y=reactExports.useRef(null),Q=useComposedRefs(T,ne=>G(ne)),J=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(P){let ne=function(ce){if(J.paused||!F)return;const le=ce.target;F.contains(le)?Y.current=le:focus(Y.current,{select:!0})},se=function(ce){if(J.paused||!F)return;const le=ce.relatedTarget;le!==null&&(F.contains(le)||focus(Y.current,{select:!0}))},oe=function(ce){if(document.activeElement===document.body)for(const pe of ce)pe.removedNodes.length>0&&focus(F)};document.addEventListener("focusin",ne),document.addEventListener("focusout",se);const ae=new MutationObserver(oe);return F&&ae.observe(F,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",ne),document.removeEventListener("focusout",se),ae.disconnect()}}},[P,F,J.paused]),reactExports.useEffect(()=>{if(F){focusScopesStack.add(J);const ne=document.activeElement;if(!F.contains(ne)){const oe=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);F.addEventListener(AUTOFOCUS_ON_MOUNT,V),F.dispatchEvent(oe),oe.defaultPrevented||(focusFirst$1(removeLinks(getTabbableCandidates(F)),{select:!0}),document.activeElement===ne&&focus(F))}return()=>{F.removeEventListener(AUTOFOCUS_ON_MOUNT,V),setTimeout(()=>{const oe=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);F.addEventListener(AUTOFOCUS_ON_UNMOUNT,Z),F.dispatchEvent(oe),oe.defaultPrevented||focus(ne??document.body,{select:!0}),F.removeEventListener(AUTOFOCUS_ON_UNMOUNT,Z),focusScopesStack.remove(J)},0)}}},[F,V,Z,J]);const ee=reactExports.useCallback(ne=>{if(!R&&!P||J.paused)return;const se=ne.key==="Tab"&&!ne.altKey&&!ne.ctrlKey&&!ne.metaKey,oe=document.activeElement;if(se&&oe){const ae=ne.currentTarget,[ce,le]=getTabbableEdges(ae);ce&&le?!ne.shiftKey&&oe===le?(ne.preventDefault(),R&&focus(ce,{select:!0})):ne.shiftKey&&oe===ce&&(ne.preventDefault(),R&&focus(le,{select:!0})):oe===ae&&ne.preventDefault()}},[R,P,J.paused]);return jsxRuntimeExports.jsx(Primitive$2.div,{tabIndex:-1,...z,ref:Q,onKeyDown:ee})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$1(_,{select:T=!1}={}){const R=document.activeElement;for(const P of _)if(focus(P,{select:T}),document.activeElement!==R)return}function getTabbableEdges(_){const T=getTabbableCandidates(_),R=findVisible(T,_),P=findVisible(T.reverse(),_);return[R,P]}function getTabbableCandidates(_){const T=[],R=document.createTreeWalker(_,NodeFilter.SHOW_ELEMENT,{acceptNode:P=>{const O=P.tagName==="INPUT"&&P.type==="hidden";return P.disabled||P.hidden||O?NodeFilter.FILTER_SKIP:P.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;R.nextNode();)T.push(R.currentNode);return T}function findVisible(_,T){for(const R of _)if(!isHidden(R,{upTo:T}))return R}function isHidden(_,{upTo:T}){if(getComputedStyle(_).visibility==="hidden")return!0;for(;_;){if(T!==void 0&&_===T)return!1;if(getComputedStyle(_).display==="none")return!0;_=_.parentElement}return!1}function isSelectableInput(_){return _ instanceof HTMLInputElement&&"select"in _}function focus(_,{select:T=!1}={}){if(_&&_.focus){const R=document.activeElement;_.focus({preventScroll:!0}),_!==R&&isSelectableInput(_)&&T&&_.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let _=[];return{add(T){const R=_[0];T!==R&&R?.pause(),_=arrayRemove(_,T),_.unshift(T)},remove(T){_=arrayRemove(_,T),_[0]?.resume()}}}function arrayRemove(_,T){const R=[..._],P=R.indexOf(T);return P!==-1&&R.splice(P,1),R}function removeLinks(_){return _.filter(T=>T.tagName!=="A")}var useReactId=React$1[" useId ".trim().toString()]||(()=>{}),count$2=0;function useId(_){const[T,R]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{R(P=>P??String(count$2++))},[_]),T?`radix-${T}`:""}const sides=["top","right","bottom","left"],min$2=Math.min,max$1=Math.max,round$1=Math.round,floor=Math.floor,createCoords=_=>({x:_,y:_}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(_,T,R){return max$1(_,min$2(T,R))}function evaluate(_,T){return typeof _=="function"?_(T):_}function getSide(_){return _.split("-")[0]}function getAlignment(_){return _.split("-")[1]}function getOppositeAxis(_){return _==="x"?"y":"x"}function getAxisLength(_){return _==="y"?"height":"width"}const yAxisSides=new Set(["top","bottom"]);function getSideAxis(_){return yAxisSides.has(getSide(_))?"y":"x"}function getAlignmentAxis(_){return getOppositeAxis(getSideAxis(_))}function getAlignmentSides(_,T,R){R===void 0&&(R=!1);const P=getAlignment(_),O=getAlignmentAxis(_),I=getAxisLength(O);let z=O==="x"?P===(R?"end":"start")?"right":"left":P==="start"?"bottom":"top";return T.reference[I]>T.floating[I]&&(z=getOppositePlacement(z)),[z,getOppositePlacement(z)]}function getExpandedPlacements(_){const T=getOppositePlacement(_);return[getOppositeAlignmentPlacement(_),T,getOppositeAlignmentPlacement(T)]}function getOppositeAlignmentPlacement(_){return _.replace(/start|end/g,T=>oppositeAlignmentMap[T])}const lrPlacement=["left","right"],rlPlacement=["right","left"],tbPlacement=["top","bottom"],btPlacement=["bottom","top"];function getSideList(_,T,R){switch(_){case"top":case"bottom":return R?T?rlPlacement:lrPlacement:T?lrPlacement:rlPlacement;case"left":case"right":return T?tbPlacement:btPlacement;default:return[]}}function getOppositeAxisPlacements(_,T,R,P){const O=getAlignment(_);let I=getSideList(getSide(_),R==="start",P);return O&&(I=I.map(z=>z+"-"+O),T&&(I=I.concat(I.map(getOppositeAlignmentPlacement)))),I}function getOppositePlacement(_){return _.replace(/left|right|bottom|top/g,T=>oppositeSideMap[T])}function expandPaddingObject(_){return{top:0,right:0,bottom:0,left:0,..._}}function getPaddingObject(_){return typeof _!="number"?expandPaddingObject(_):{top:_,right:_,bottom:_,left:_}}function rectToClientRect(_){const{x:T,y:R,width:P,height:O}=_;return{width:P,height:O,top:R,left:T,right:T+P,bottom:R+O,x:T,y:R}}function computeCoordsFromPlacement(_,T,R){let{reference:P,floating:O}=_;const I=getSideAxis(T),z=getAlignmentAxis(T),F=getAxisLength(z),G=getSide(T),V=I==="y",Z=P.x+P.width/2-O.width/2,Y=P.y+P.height/2-O.height/2,Q=P[F]/2-O[F]/2;let J;switch(G){case"top":J={x:Z,y:P.y-O.height};break;case"bottom":J={x:Z,y:P.y+P.height};break;case"right":J={x:P.x+P.width,y:Y};break;case"left":J={x:P.x-O.width,y:Y};break;default:J={x:P.x,y:P.y}}switch(getAlignment(T)){case"start":J[z]-=Q*(R&&V?-1:1);break;case"end":J[z]+=Q*(R&&V?-1:1);break}return J}const computePosition$1=async(_,T,R)=>{const{placement:P="bottom",strategy:O="absolute",middleware:I=[],platform:z}=R,F=I.filter(Boolean),G=await(z.isRTL==null?void 0:z.isRTL(T));let V=await z.getElementRects({reference:_,floating:T,strategy:O}),{x:Z,y:Y}=computeCoordsFromPlacement(V,P,G),Q=P,J={},ee=0;for(let ne=0;ne<F.length;ne++){const{name:se,fn:oe}=F[ne],{x:ae,y:ce,data:le,reset:pe}=await oe({x:Z,y:Y,initialPlacement:P,placement:Q,strategy:O,middlewareData:J,rects:V,platform:z,elements:{reference:_,floating:T}});Z=ae??Z,Y=ce??Y,J={...J,[se]:{...J[se],...le}},pe&&ee<=50&&(ee++,typeof pe=="object"&&(pe.placement&&(Q=pe.placement),pe.rects&&(V=pe.rects===!0?await z.getElementRects({reference:_,floating:T,strategy:O}):pe.rects),{x:Z,y:Y}=computeCoordsFromPlacement(V,Q,G)),ne=-1)}return{x:Z,y:Y,placement:Q,strategy:O,middlewareData:J}};async function detectOverflow(_,T){var R;T===void 0&&(T={});const{x:P,y:O,platform:I,rects:z,elements:F,strategy:G}=_,{boundary:V="clippingAncestors",rootBoundary:Z="viewport",elementContext:Y="floating",altBoundary:Q=!1,padding:J=0}=evaluate(T,_),ee=getPaddingObject(J),se=F[Q?Y==="floating"?"reference":"floating":Y],oe=rectToClientRect(await I.getClippingRect({element:(R=await(I.isElement==null?void 0:I.isElement(se)))==null||R?se:se.contextElement||await(I.getDocumentElement==null?void 0:I.getDocumentElement(F.floating)),boundary:V,rootBoundary:Z,strategy:G})),ae=Y==="floating"?{x:P,y:O,width:z.floating.width,height:z.floating.height}:z.reference,ce=await(I.getOffsetParent==null?void 0:I.getOffsetParent(F.floating)),le=await(I.isElement==null?void 0:I.isElement(ce))?await(I.getScale==null?void 0:I.getScale(ce))||{x:1,y:1}:{x:1,y:1},pe=rectToClientRect(I.convertOffsetParentRelativeRectToViewportRelativeRect?await I.convertOffsetParentRelativeRectToViewportRelativeRect({elements:F,rect:ae,offsetParent:ce,strategy:G}):ae);return{top:(oe.top-pe.top+ee.top)/le.y,bottom:(pe.bottom-oe.bottom+ee.bottom)/le.y,left:(oe.left-pe.left+ee.left)/le.x,right:(pe.right-oe.right+ee.right)/le.x}}const arrow$3=_=>({name:"arrow",options:_,async fn(T){const{x:R,y:P,placement:O,rects:I,platform:z,elements:F,middlewareData:G}=T,{element:V,padding:Z=0}=evaluate(_,T)||{};if(V==null)return{};const Y=getPaddingObject(Z),Q={x:R,y:P},J=getAlignmentAxis(O),ee=getAxisLength(J),ne=await z.getDimensions(V),se=J==="y",oe=se?"top":"left",ae=se?"bottom":"right",ce=se?"clientHeight":"clientWidth",le=I.reference[ee]+I.reference[J]-Q[J]-I.floating[ee],pe=Q[J]-I.reference[J],me=await(z.getOffsetParent==null?void 0:z.getOffsetParent(V));let he=me?me[ce]:0;(!he||!await(z.isElement==null?void 0:z.isElement(me)))&&(he=F.floating[ce]||I.floating[ee]);const fe=le/2-pe/2,de=he/2-ne[ee]/2-1,be=min$2(Y[oe],de),ye=min$2(Y[ae],de),Ce=be,ve=he-ne[ee]-ye,Ee=he/2-ne[ee]/2+fe,we=clamp(Ce,Ee,ve),ge=!G.arrow&&getAlignment(O)!=null&&Ee!==we&&I.reference[ee]/2-(Ee<Ce?be:ye)-ne[ee]/2<0,Se=ge?Ee<Ce?Ee-Ce:Ee-ve:0;return{[J]:Q[J]+Se,data:{[J]:we,centerOffset:Ee-we-Se,...ge&&{alignmentOffset:Se}},reset:ge}}}),flip$3=function(_){return _===void 0&&(_={}),{name:"flip",options:_,async fn(T){var R,P;const{placement:O,middlewareData:I,rects:z,initialPlacement:F,platform:G,elements:V}=T,{mainAxis:Z=!0,crossAxis:Y=!0,fallbackPlacements:Q,fallbackStrategy:J="bestFit",fallbackAxisSideDirection:ee="none",flipAlignment:ne=!0,...se}=evaluate(_,T);if((R=I.arrow)!=null&&R.alignmentOffset)return{};const oe=getSide(O),ae=getSideAxis(F),ce=getSide(F)===F,le=await(G.isRTL==null?void 0:G.isRTL(V.floating)),pe=Q||(ce||!ne?[getOppositePlacement(F)]:getExpandedPlacements(F)),me=ee!=="none";!Q&&me&&pe.push(...getOppositeAxisPlacements(F,ne,ee,le));const he=[F,...pe],fe=await detectOverflow(T,se),de=[];let be=((P=I.flip)==null?void 0:P.overflows)||[];if(Z&&de.push(fe[oe]),Y){const Ee=getAlignmentSides(O,z,le);de.push(fe[Ee[0]],fe[Ee[1]])}if(be=[...be,{placement:O,overflows:de}],!de.every(Ee=>Ee<=0)){var ye,Ce;const Ee=(((ye=I.flip)==null?void 0:ye.index)||0)+1,we=he[Ee];if(we&&(!(Y==="alignment"?ae!==getSideAxis(we):!1)||be.every(Te=>getSideAxis(Te.placement)===ae?Te.overflows[0]>0:!0)))return{data:{index:Ee,overflows:be},reset:{placement:we}};let ge=(Ce=be.filter(Se=>Se.overflows[0]<=0).sort((Se,Te)=>Se.overflows[1]-Te.overflows[1])[0])==null?void 0:Ce.placement;if(!ge)switch(J){case"bestFit":{var ve;const Se=(ve=be.filter(Te=>{if(me){const Ae=getSideAxis(Te.placement);return Ae===ae||Ae==="y"}return!0}).map(Te=>[Te.placement,Te.overflows.filter(Ae=>Ae>0).reduce((Ae,Ue)=>Ae+Ue,0)]).sort((Te,Ae)=>Te[1]-Ae[1])[0])==null?void 0:ve[0];Se&&(ge=Se);break}case"initialPlacement":ge=F;break}if(O!==ge)return{reset:{placement:ge}}}return{}}}};function getSideOffsets(_,T){return{top:_.top-T.height,right:_.right-T.width,bottom:_.bottom-T.height,left:_.left-T.width}}function isAnySideFullyClipped(_){return sides.some(T=>_[T]>=0)}const hide$2=function(_){return _===void 0&&(_={}),{name:"hide",options:_,async fn(T){const{rects:R}=T,{strategy:P="referenceHidden",...O}=evaluate(_,T);switch(P){case"referenceHidden":{const I=await detectOverflow(T,{...O,elementContext:"reference"}),z=getSideOffsets(I,R.reference);return{data:{referenceHiddenOffsets:z,referenceHidden:isAnySideFullyClipped(z)}}}case"escaped":{const I=await detectOverflow(T,{...O,altBoundary:!0}),z=getSideOffsets(I,R.floating);return{data:{escapedOffsets:z,escaped:isAnySideFullyClipped(z)}}}default:return{}}}}},originSides=new Set(["left","top"]);async function convertValueToCoords(_,T){const{placement:R,platform:P,elements:O}=_,I=await(P.isRTL==null?void 0:P.isRTL(O.floating)),z=getSide(R),F=getAlignment(R),G=getSideAxis(R)==="y",V=originSides.has(z)?-1:1,Z=I&&G?-1:1,Y=evaluate(T,_);let{mainAxis:Q,crossAxis:J,alignmentAxis:ee}=typeof Y=="number"?{mainAxis:Y,crossAxis:0,alignmentAxis:null}:{mainAxis:Y.mainAxis||0,crossAxis:Y.crossAxis||0,alignmentAxis:Y.alignmentAxis};return F&&typeof ee=="number"&&(J=F==="end"?ee*-1:ee),G?{x:J*Z,y:Q*V}:{x:Q*V,y:J*Z}}const offset$3=function(_){return _===void 0&&(_=0),{name:"offset",options:_,async fn(T){var R,P;const{x:O,y:I,placement:z,middlewareData:F}=T,G=await convertValueToCoords(T,_);return z===((R=F.offset)==null?void 0:R.placement)&&(P=F.arrow)!=null&&P.alignmentOffset?{}:{x:O+G.x,y:I+G.y,data:{...G,placement:z}}}}},shift$2=function(_){return _===void 0&&(_={}),{name:"shift",options:_,async fn(T){const{x:R,y:P,placement:O}=T,{mainAxis:I=!0,crossAxis:z=!1,limiter:F={fn:se=>{let{x:oe,y:ae}=se;return{x:oe,y:ae}}},...G}=evaluate(_,T),V={x:R,y:P},Z=await detectOverflow(T,G),Y=getSideAxis(getSide(O)),Q=getOppositeAxis(Y);let J=V[Q],ee=V[Y];if(I){const se=Q==="y"?"top":"left",oe=Q==="y"?"bottom":"right",ae=J+Z[se],ce=J-Z[oe];J=clamp(ae,J,ce)}if(z){const se=Y==="y"?"top":"left",oe=Y==="y"?"bottom":"right",ae=ee+Z[se],ce=ee-Z[oe];ee=clamp(ae,ee,ce)}const ne=F.fn({...T,[Q]:J,[Y]:ee});return{...ne,data:{x:ne.x-R,y:ne.y-P,enabled:{[Q]:I,[Y]:z}}}}}},limitShift$2=function(_){return _===void 0&&(_={}),{options:_,fn(T){const{x:R,y:P,placement:O,rects:I,middlewareData:z}=T,{offset:F=0,mainAxis:G=!0,crossAxis:V=!0}=evaluate(_,T),Z={x:R,y:P},Y=getSideAxis(O),Q=getOppositeAxis(Y);let J=Z[Q],ee=Z[Y];const ne=evaluate(F,T),se=typeof ne=="number"?{mainAxis:ne,crossAxis:0}:{mainAxis:0,crossAxis:0,...ne};if(G){const ce=Q==="y"?"height":"width",le=I.reference[Q]-I.floating[ce]+se.mainAxis,pe=I.reference[Q]+I.reference[ce]-se.mainAxis;J<le?J=le:J>pe&&(J=pe)}if(V){var oe,ae;const ce=Q==="y"?"width":"height",le=originSides.has(getSide(O)),pe=I.reference[Y]-I.floating[ce]+(le&&((oe=z.offset)==null?void 0:oe[Y])||0)+(le?0:se.crossAxis),me=I.reference[Y]+I.reference[ce]+(le?0:((ae=z.offset)==null?void 0:ae[Y])||0)-(le?se.crossAxis:0);ee<pe?ee=pe:ee>me&&(ee=me)}return{[Q]:J,[Y]:ee}}}},size$2=function(_){return _===void 0&&(_={}),{name:"size",options:_,async fn(T){var R,P;const{placement:O,rects:I,platform:z,elements:F}=T,{apply:G=()=>{},...V}=evaluate(_,T),Z=await detectOverflow(T,V),Y=getSide(O),Q=getAlignment(O),J=getSideAxis(O)==="y",{width:ee,height:ne}=I.floating;let se,oe;Y==="top"||Y==="bottom"?(se=Y,oe=Q===(await(z.isRTL==null?void 0:z.isRTL(F.floating))?"start":"end")?"left":"right"):(oe=Y,se=Q==="end"?"top":"bottom");const ae=ne-Z.top-Z.bottom,ce=ee-Z.left-Z.right,le=min$2(ne-Z[se],ae),pe=min$2(ee-Z[oe],ce),me=!T.middlewareData.shift;let he=le,fe=pe;if((R=T.middlewareData.shift)!=null&&R.enabled.x&&(fe=ce),(P=T.middlewareData.shift)!=null&&P.enabled.y&&(he=ae),me&&!Q){const be=max$1(Z.left,0),ye=max$1(Z.right,0),Ce=max$1(Z.top,0),ve=max$1(Z.bottom,0);J?fe=ee-2*(be!==0||ye!==0?be+ye:max$1(Z.left,Z.right)):he=ne-2*(Ce!==0||ve!==0?Ce+ve:max$1(Z.top,Z.bottom))}await G({...T,availableWidth:fe,availableHeight:he});const de=await z.getDimensions(F.floating);return ee!==de.width||ne!==de.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(_){return isNode(_)?(_.nodeName||"").toLowerCase():"#document"}function getWindow(_){var T;return(_==null||(T=_.ownerDocument)==null?void 0:T.defaultView)||window}function getDocumentElement(_){var T;return(T=(isNode(_)?_.ownerDocument:_.document)||window.document)==null?void 0:T.documentElement}function isNode(_){return hasWindow()?_ instanceof Node||_ instanceof getWindow(_).Node:!1}function isElement(_){return hasWindow()?_ instanceof Element||_ instanceof getWindow(_).Element:!1}function isHTMLElement(_){return hasWindow()?_ instanceof HTMLElement||_ instanceof getWindow(_).HTMLElement:!1}function isShadowRoot(_){return!hasWindow()||typeof ShadowRoot>"u"?!1:_ instanceof ShadowRoot||_ instanceof getWindow(_).ShadowRoot}const invalidOverflowDisplayValues=new Set(["inline","contents"]);function isOverflowElement(_){const{overflow:T,overflowX:R,overflowY:P,display:O}=getComputedStyle$1(_);return/auto|scroll|overlay|hidden|clip/.test(T+P+R)&&!invalidOverflowDisplayValues.has(O)}const tableElements=new Set(["table","td","th"]);function isTableElement(_){return tableElements.has(getNodeName(_))}const topLayerSelectors=[":popover-open",":modal"];function isTopLayer(_){return topLayerSelectors.some(T=>{try{return _.matches(T)}catch{return!1}})}const transformProperties=["transform","translate","scale","rotate","perspective"],willChangeValues=["transform","translate","scale","rotate","perspective","filter"],containValues=["paint","layout","strict","content"];function isContainingBlock(_){const T=isWebKit(),R=isElement(_)?getComputedStyle$1(_):_;return transformProperties.some(P=>R[P]?R[P]!=="none":!1)||(R.containerType?R.containerType!=="normal":!1)||!T&&(R.backdropFilter?R.backdropFilter!=="none":!1)||!T&&(R.filter?R.filter!=="none":!1)||willChangeValues.some(P=>(R.willChange||"").includes(P))||containValues.some(P=>(R.contain||"").includes(P))}function getContainingBlock(_){let T=getParentNode(_);for(;isHTMLElement(T)&&!isLastTraversableNode(T);){if(isContainingBlock(T))return T;if(isTopLayer(T))return null;T=getParentNode(T)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lastTraversableNodeNames=new Set(["html","body","#document"]);function isLastTraversableNode(_){return lastTraversableNodeNames.has(getNodeName(_))}function getComputedStyle$1(_){return getWindow(_).getComputedStyle(_)}function getNodeScroll(_){return isElement(_)?{scrollLeft:_.scrollLeft,scrollTop:_.scrollTop}:{scrollLeft:_.scrollX,scrollTop:_.scrollY}}function getParentNode(_){if(getNodeName(_)==="html")return _;const T=_.assignedSlot||_.parentNode||isShadowRoot(_)&&_.host||getDocumentElement(_);return isShadowRoot(T)?T.host:T}function getNearestOverflowAncestor(_){const T=getParentNode(_);return isLastTraversableNode(T)?_.ownerDocument?_.ownerDocument.body:_.body:isHTMLElement(T)&&isOverflowElement(T)?T:getNearestOverflowAncestor(T)}function getOverflowAncestors(_,T,R){var P;T===void 0&&(T=[]),R===void 0&&(R=!0);const O=getNearestOverflowAncestor(_),I=O===((P=_.ownerDocument)==null?void 0:P.body),z=getWindow(O);if(I){const F=getFrameElement(z);return T.concat(z,z.visualViewport||[],isOverflowElement(O)?O:[],F&&R?getOverflowAncestors(F):[])}return T.concat(O,getOverflowAncestors(O,[],R))}function getFrameElement(_){return _.parent&&Object.getPrototypeOf(_.parent)?_.frameElement:null}function getCssDimensions(_){const T=getComputedStyle$1(_);let R=parseFloat(T.width)||0,P=parseFloat(T.height)||0;const O=isHTMLElement(_),I=O?_.offsetWidth:R,z=O?_.offsetHeight:P,F=round$1(R)!==I||round$1(P)!==z;return F&&(R=I,P=z),{width:R,height:P,$:F}}function unwrapElement(_){return isElement(_)?_:_.contextElement}function getScale(_){const T=unwrapElement(_);if(!isHTMLElement(T))return createCoords(1);const R=T.getBoundingClientRect(),{width:P,height:O,$:I}=getCssDimensions(T);let z=(I?round$1(R.width):R.width)/P,F=(I?round$1(R.height):R.height)/O;return(!z||!Number.isFinite(z))&&(z=1),(!F||!Number.isFinite(F))&&(F=1),{x:z,y:F}}const noOffsets=createCoords(0);function getVisualOffsets(_){const T=getWindow(_);return!isWebKit()||!T.visualViewport?noOffsets:{x:T.visualViewport.offsetLeft,y:T.visualViewport.offsetTop}}function shouldAddVisualOffsets(_,T,R){return T===void 0&&(T=!1),!R||T&&R!==getWindow(_)?!1:T}function getBoundingClientRect(_,T,R,P){T===void 0&&(T=!1),R===void 0&&(R=!1);const O=_.getBoundingClientRect(),I=unwrapElement(_);let z=createCoords(1);T&&(P?isElement(P)&&(z=getScale(P)):z=getScale(_));const F=shouldAddVisualOffsets(I,R,P)?getVisualOffsets(I):createCoords(0);let G=(O.left+F.x)/z.x,V=(O.top+F.y)/z.y,Z=O.width/z.x,Y=O.height/z.y;if(I){const Q=getWindow(I),J=P&&isElement(P)?getWindow(P):P;let ee=Q,ne=getFrameElement(ee);for(;ne&&P&&J!==ee;){const se=getScale(ne),oe=ne.getBoundingClientRect(),ae=getComputedStyle$1(ne),ce=oe.left+(ne.clientLeft+parseFloat(ae.paddingLeft))*se.x,le=oe.top+(ne.clientTop+parseFloat(ae.paddingTop))*se.y;G*=se.x,V*=se.y,Z*=se.x,Y*=se.y,G+=ce,V+=le,ee=getWindow(ne),ne=getFrameElement(ee)}}return rectToClientRect({width:Z,height:Y,x:G,y:V})}function getWindowScrollBarX(_,T){const R=getNodeScroll(_).scrollLeft;return T?T.left+R:getBoundingClientRect(getDocumentElement(_)).left+R}function getHTMLOffset(_,T){const R=_.getBoundingClientRect(),P=R.left+T.scrollLeft-getWindowScrollBarX(_,R),O=R.top+T.scrollTop;return{x:P,y:O}}function convertOffsetParentRelativeRectToViewportRelativeRect(_){let{elements:T,rect:R,offsetParent:P,strategy:O}=_;const I=O==="fixed",z=getDocumentElement(P),F=T?isTopLayer(T.floating):!1;if(P===z||F&&I)return R;let G={scrollLeft:0,scrollTop:0},V=createCoords(1);const Z=createCoords(0),Y=isHTMLElement(P);if((Y||!Y&&!I)&&((getNodeName(P)!=="body"||isOverflowElement(z))&&(G=getNodeScroll(P)),isHTMLElement(P))){const J=getBoundingClientRect(P);V=getScale(P),Z.x=J.x+P.clientLeft,Z.y=J.y+P.clientTop}const Q=z&&!Y&&!I?getHTMLOffset(z,G):createCoords(0);return{width:R.width*V.x,height:R.height*V.y,x:R.x*V.x-G.scrollLeft*V.x+Z.x+Q.x,y:R.y*V.y-G.scrollTop*V.y+Z.y+Q.y}}function getClientRects(_){return Array.from(_.getClientRects())}function getDocumentRect(_){const T=getDocumentElement(_),R=getNodeScroll(_),P=_.ownerDocument.body,O=max$1(T.scrollWidth,T.clientWidth,P.scrollWidth,P.clientWidth),I=max$1(T.scrollHeight,T.clientHeight,P.scrollHeight,P.clientHeight);let z=-R.scrollLeft+getWindowScrollBarX(_);const F=-R.scrollTop;return getComputedStyle$1(P).direction==="rtl"&&(z+=max$1(T.clientWidth,P.clientWidth)-O),{width:O,height:I,x:z,y:F}}const SCROLLBAR_MAX=25;function getViewportRect(_,T){const R=getWindow(_),P=getDocumentElement(_),O=R.visualViewport;let I=P.clientWidth,z=P.clientHeight,F=0,G=0;if(O){I=O.width,z=O.height;const Z=isWebKit();(!Z||Z&&T==="fixed")&&(F=O.offsetLeft,G=O.offsetTop)}const V=getWindowScrollBarX(P);if(V<=0){const Z=P.ownerDocument,Y=Z.body,Q=getComputedStyle(Y),J=Z.compatMode==="CSS1Compat"&&parseFloat(Q.marginLeft)+parseFloat(Q.marginRight)||0,ee=Math.abs(P.clientWidth-Y.clientWidth-J);ee<=SCROLLBAR_MAX&&(I-=ee)}else V<=SCROLLBAR_MAX&&(I+=V);return{width:I,height:z,x:F,y:G}}const absoluteOrFixed=new Set(["absolute","fixed"]);function getInnerBoundingClientRect(_,T){const R=getBoundingClientRect(_,!0,T==="fixed"),P=R.top+_.clientTop,O=R.left+_.clientLeft,I=isHTMLElement(_)?getScale(_):createCoords(1),z=_.clientWidth*I.x,F=_.clientHeight*I.y,G=O*I.x,V=P*I.y;return{width:z,height:F,x:G,y:V}}function getClientRectFromClippingAncestor(_,T,R){let P;if(T==="viewport")P=getViewportRect(_,R);else if(T==="document")P=getDocumentRect(getDocumentElement(_));else if(isElement(T))P=getInnerBoundingClientRect(T,R);else{const O=getVisualOffsets(_);P={x:T.x-O.x,y:T.y-O.y,width:T.width,height:T.height}}return rectToClientRect(P)}function hasFixedPositionAncestor(_,T){const R=getParentNode(_);return R===T||!isElement(R)||isLastTraversableNode(R)?!1:getComputedStyle$1(R).position==="fixed"||hasFixedPositionAncestor(R,T)}function getClippingElementAncestors(_,T){const R=T.get(_);if(R)return R;let P=getOverflowAncestors(_,[],!1).filter(F=>isElement(F)&&getNodeName(F)!=="body"),O=null;const I=getComputedStyle$1(_).position==="fixed";let z=I?getParentNode(_):_;for(;isElement(z)&&!isLastTraversableNode(z);){const F=getComputedStyle$1(z),G=isContainingBlock(z);!G&&F.position==="fixed"&&(O=null),(I?!G&&!O:!G&&F.position==="static"&&!!O&&absoluteOrFixed.has(O.position)||isOverflowElement(z)&&!G&&hasFixedPositionAncestor(_,z))?P=P.filter(Z=>Z!==z):O=F,z=getParentNode(z)}return T.set(_,P),P}function getClippingRect(_){let{element:T,boundary:R,rootBoundary:P,strategy:O}=_;const z=[...R==="clippingAncestors"?isTopLayer(T)?[]:getClippingElementAncestors(T,this._c):[].concat(R),P],F=z[0],G=z.reduce((V,Z)=>{const Y=getClientRectFromClippingAncestor(T,Z,O);return V.top=max$1(Y.top,V.top),V.right=min$2(Y.right,V.right),V.bottom=min$2(Y.bottom,V.bottom),V.left=max$1(Y.left,V.left),V},getClientRectFromClippingAncestor(T,F,O));return{width:G.right-G.left,height:G.bottom-G.top,x:G.left,y:G.top}}function getDimensions(_){const{width:T,height:R}=getCssDimensions(_);return{width:T,height:R}}function getRectRelativeToOffsetParent(_,T,R){const P=isHTMLElement(T),O=getDocumentElement(T),I=R==="fixed",z=getBoundingClientRect(_,!0,I,T);let F={scrollLeft:0,scrollTop:0};const G=createCoords(0);function V(){G.x=getWindowScrollBarX(O)}if(P||!P&&!I)if((getNodeName(T)!=="body"||isOverflowElement(O))&&(F=getNodeScroll(T)),P){const J=getBoundingClientRect(T,!0,I,T);G.x=J.x+T.clientLeft,G.y=J.y+T.clientTop}else O&&V();I&&!P&&O&&V();const Z=O&&!P&&!I?getHTMLOffset(O,F):createCoords(0),Y=z.left+F.scrollLeft-G.x-Z.x,Q=z.top+F.scrollTop-G.y-Z.y;return{x:Y,y:Q,width:z.width,height:z.height}}function isStaticPositioned(_){return getComputedStyle$1(_).position==="static"}function getTrueOffsetParent(_,T){if(!isHTMLElement(_)||getComputedStyle$1(_).position==="fixed")return null;if(T)return T(_);let R=_.offsetParent;return getDocumentElement(_)===R&&(R=R.ownerDocument.body),R}function getOffsetParent(_,T){const R=getWindow(_);if(isTopLayer(_))return R;if(!isHTMLElement(_)){let O=getParentNode(_);for(;O&&!isLastTraversableNode(O);){if(isElement(O)&&!isStaticPositioned(O))return O;O=getParentNode(O)}return R}let P=getTrueOffsetParent(_,T);for(;P&&isTableElement(P)&&isStaticPositioned(P);)P=getTrueOffsetParent(P,T);return P&&isLastTraversableNode(P)&&isStaticPositioned(P)&&!isContainingBlock(P)?R:P||getContainingBlock(_)||R}const getElementRects=async function(_){const T=this.getOffsetParent||getOffsetParent,R=this.getDimensions,P=await R(_.floating);return{reference:getRectRelativeToOffsetParent(_.reference,await T(_.floating),_.strategy),floating:{x:0,y:0,width:P.width,height:P.height}}};function isRTL(_){return getComputedStyle$1(_).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function rectsAreEqual(_,T){return _.x===T.x&&_.y===T.y&&_.width===T.width&&_.height===T.height}function observeMove(_,T){let R=null,P;const O=getDocumentElement(_);function I(){var F;clearTimeout(P),(F=R)==null||F.disconnect(),R=null}function z(F,G){F===void 0&&(F=!1),G===void 0&&(G=1),I();const V=_.getBoundingClientRect(),{left:Z,top:Y,width:Q,height:J}=V;if(F||T(),!Q||!J)return;const ee=floor(Y),ne=floor(O.clientWidth-(Z+Q)),se=floor(O.clientHeight-(Y+J)),oe=floor(Z),ce={rootMargin:-ee+"px "+-ne+"px "+-se+"px "+-oe+"px",threshold:max$1(0,min$2(1,G))||1};let le=!0;function pe(me){const he=me[0].intersectionRatio;if(he!==G){if(!le)return z();he?z(!1,he):P=setTimeout(()=>{z(!1,1e-7)},1e3)}he===1&&!rectsAreEqual(V,_.getBoundingClientRect())&&z(),le=!1}try{R=new IntersectionObserver(pe,{...ce,root:O.ownerDocument})}catch{R=new IntersectionObserver(pe,ce)}R.observe(_)}return z(!0),I}function autoUpdate(_,T,R,P){P===void 0&&(P={});const{ancestorScroll:O=!0,ancestorResize:I=!0,elementResize:z=typeof ResizeObserver=="function",layoutShift:F=typeof IntersectionObserver=="function",animationFrame:G=!1}=P,V=unwrapElement(_),Z=O||I?[...V?getOverflowAncestors(V):[],...getOverflowAncestors(T)]:[];Z.forEach(oe=>{O&&oe.addEventListener("scroll",R,{passive:!0}),I&&oe.addEventListener("resize",R)});const Y=V&&F?observeMove(V,R):null;let Q=-1,J=null;z&&(J=new ResizeObserver(oe=>{let[ae]=oe;ae&&ae.target===V&&J&&(J.unobserve(T),cancelAnimationFrame(Q),Q=requestAnimationFrame(()=>{var ce;(ce=J)==null||ce.observe(T)})),R()}),V&&!G&&J.observe(V),J.observe(T));let ee,ne=G?getBoundingClientRect(_):null;G&&se();function se(){const oe=getBoundingClientRect(_);ne&&!rectsAreEqual(ne,oe)&&R(),ne=oe,ee=requestAnimationFrame(se)}return R(),()=>{var oe;Z.forEach(ae=>{O&&ae.removeEventListener("scroll",R),I&&ae.removeEventListener("resize",R)}),Y?.(),(oe=J)==null||oe.disconnect(),J=null,G&&cancelAnimationFrame(ee)}}const offset$2=offset$3,shift$1=shift$2,flip$2=flip$3,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(_,T,R)=>{const P=new Map,O={platform,...R},I={...O.platform,_c:P};return computePosition$1(_,T,{...O,platform:I})};var isClient=typeof document<"u",noop$3=function _(){},index=isClient?reactExports.useLayoutEffect:noop$3;function deepEqual(_,T){if(_===T)return!0;if(typeof _!=typeof T)return!1;if(typeof _=="function"&&_.toString()===T.toString())return!0;let R,P,O;if(_&&T&&typeof _=="object"){if(Array.isArray(_)){if(R=_.length,R!==T.length)return!1;for(P=R;P--!==0;)if(!deepEqual(_[P],T[P]))return!1;return!0}if(O=Object.keys(_),R=O.length,R!==Object.keys(T).length)return!1;for(P=R;P--!==0;)if(!{}.hasOwnProperty.call(T,O[P]))return!1;for(P=R;P--!==0;){const I=O[P];if(!(I==="_owner"&&_.$$typeof)&&!deepEqual(_[I],T[I]))return!1}return!0}return _!==_&&T!==T}function getDPR(_){return typeof window>"u"?1:(_.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(_,T){const R=getDPR(_);return Math.round(T*R)/R}function useLatestRef(_){const T=reactExports.useRef(_);return index(()=>{T.current=_}),T}function useFloating(_){_===void 0&&(_={});const{placement:T="bottom",strategy:R="absolute",middleware:P=[],platform:O,elements:{reference:I,floating:z}={},transform:F=!0,whileElementsMounted:G,open:V}=_,[Z,Y]=reactExports.useState({x:0,y:0,strategy:R,placement:T,middlewareData:{},isPositioned:!1}),[Q,J]=reactExports.useState(P);deepEqual(Q,P)||J(P);const[ee,ne]=reactExports.useState(null),[se,oe]=reactExports.useState(null),ae=reactExports.useCallback(Te=>{Te!==me.current&&(me.current=Te,ne(Te))},[]),ce=reactExports.useCallback(Te=>{Te!==he.current&&(he.current=Te,oe(Te))},[]),le=I||ee,pe=z||se,me=reactExports.useRef(null),he=reactExports.useRef(null),fe=reactExports.useRef(Z),de=G!=null,be=useLatestRef(G),ye=useLatestRef(O),Ce=useLatestRef(V),ve=reactExports.useCallback(()=>{if(!me.current||!he.current)return;const Te={placement:T,strategy:R,middleware:Q};ye.current&&(Te.platform=ye.current),computePosition(me.current,he.current,Te).then(Ae=>{const Ue={...Ae,isPositioned:Ce.current!==!1};Ee.current&&!deepEqual(fe.current,Ue)&&(fe.current=Ue,reactDomExports.flushSync(()=>{Y(Ue)}))})},[Q,T,R,ye,Ce]);index(()=>{V===!1&&fe.current.isPositioned&&(fe.current.isPositioned=!1,Y(Te=>({...Te,isPositioned:!1})))},[V]);const Ee=reactExports.useRef(!1);index(()=>(Ee.current=!0,()=>{Ee.current=!1}),[]),index(()=>{if(le&&(me.current=le),pe&&(he.current=pe),le&&pe){if(be.current)return be.current(le,pe,ve);ve()}},[le,pe,ve,be,de]);const we=reactExports.useMemo(()=>({reference:me,floating:he,setReference:ae,setFloating:ce}),[ae,ce]),ge=reactExports.useMemo(()=>({reference:le,floating:pe}),[le,pe]),Se=reactExports.useMemo(()=>{const Te={position:R,left:0,top:0};if(!ge.floating)return Te;const Ae=roundByDPR(ge.floating,Z.x),Ue=roundByDPR(ge.floating,Z.y);return F?{...Te,transform:"translate("+Ae+"px, "+Ue+"px)",...getDPR(ge.floating)>=1.5&&{willChange:"transform"}}:{position:R,left:Ae,top:Ue}},[R,F,ge.floating,Z.x,Z.y]);return reactExports.useMemo(()=>({...Z,update:ve,refs:we,elements:ge,floatingStyles:Se}),[Z,ve,we,ge,Se])}const arrow$1=_=>{function T(R){return{}.hasOwnProperty.call(R,"current")}return{name:"arrow",options:_,fn(R){const{element:P,padding:O}=typeof _=="function"?_(R):_;return P&&T(P)?P.current!=null?arrow$2({element:P.current,padding:O}).fn(R):{}:P?arrow$2({element:P,padding:O}).fn(R):{}}}},offset$1=(_,T)=>({...offset$2(_),options:[_,T]}),shift=(_,T)=>({...shift$1(_),options:[_,T]}),limitShift=(_,T)=>({...limitShift$1(_),options:[_,T]}),flip$1=(_,T)=>({...flip$2(_),options:[_,T]}),size=(_,T)=>({...size$1(_),options:[_,T]}),hide=(_,T)=>({...hide$1(_),options:[_,T]}),arrow=(_,T)=>({...arrow$1(_),options:[_,T]});var NAME$2="Arrow",Arrow$1=reactExports.forwardRef((_,T)=>{const{children:R,width:P=10,height:O=5,...I}=_;return jsxRuntimeExports.jsx(Primitive$2.svg,{...I,ref:T,width:P,height:O,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:_.asChild?R:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$2;var Root$5=Arrow$1,POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope$1(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=_=>{const{__scopePopper:T,children:R}=_,[P,O]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:T,anchor:P,onAnchorChange:O,children:R})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME="PopperAnchor",PopperAnchor=reactExports.forwardRef((_,T)=>{const{__scopePopper:R,virtualRef:P,...O}=_,I=usePopperContext(ANCHOR_NAME,R),z=reactExports.useRef(null),F=useComposedRefs(T,z),G=reactExports.useRef(null);return reactExports.useEffect(()=>{const V=G.current;G.current=P?.current||z.current,V!==G.current&&I.onAnchorChange(G.current)}),P?null:jsxRuntimeExports.jsx(Primitive$2.div,{...O,ref:F})});PopperAnchor.displayName=ANCHOR_NAME;var CONTENT_NAME$4="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$4),PopperContent=reactExports.forwardRef((_,T)=>{const{__scopePopper:R,side:P="bottom",sideOffset:O=0,align:I="center",alignOffset:z=0,arrowPadding:F=0,avoidCollisions:G=!0,collisionBoundary:V=[],collisionPadding:Z=0,sticky:Y="partial",hideWhenDetached:Q=!1,updatePositionStrategy:J="optimized",onPlaced:ee,...ne}=_,se=usePopperContext(CONTENT_NAME$4,R),[oe,ae]=reactExports.useState(null),ce=useComposedRefs(T,Oe=>ae(Oe)),[le,pe]=reactExports.useState(null),me=useSize(le),he=me?.width??0,fe=me?.height??0,de=P+(I!=="center"?"-"+I:""),be=typeof Z=="number"?Z:{top:0,right:0,bottom:0,left:0,...Z},ye=Array.isArray(V)?V:[V],Ce=ye.length>0,ve={padding:be,boundary:ye.filter(isNotNull),altBoundary:Ce},{refs:Ee,floatingStyles:we,placement:ge,isPositioned:Se,middlewareData:Te}=useFloating({strategy:"fixed",placement:de,whileElementsMounted:(...Oe)=>autoUpdate(...Oe,{animationFrame:J==="always"}),elements:{reference:se.anchor},middleware:[offset$1({mainAxis:O+fe,alignmentAxis:z}),G&&shift({mainAxis:!0,crossAxis:!1,limiter:Y==="partial"?limitShift():void 0,...ve}),G&&flip$1({...ve}),size({...ve,apply:({elements:Oe,rects:Ge,availableWidth:je,availableHeight:Fe})=>{const{width:ze,height:Me}=Ge.reference,Ke=Oe.floating.style;Ke.setProperty("--radix-popper-available-width",`${je}px`),Ke.setProperty("--radix-popper-available-height",`${Fe}px`),Ke.setProperty("--radix-popper-anchor-width",`${ze}px`),Ke.setProperty("--radix-popper-anchor-height",`${Me}px`)}}),le&&arrow({element:le,padding:F}),transformOrigin({arrowWidth:he,arrowHeight:fe}),Q&&hide({strategy:"referenceHidden",...ve})]}),[Ae,Ue]=getSideAndAlignFromPlacement(ge),_e=useCallbackRef$1(ee);useLayoutEffect2(()=>{Se&&_e?.()},[Se,_e]);const $e=Te.arrow?.x,Ne=Te.arrow?.y,Be=Te.arrow?.centerOffset!==0,[Ze,We]=reactExports.useState();return useLayoutEffect2(()=>{oe&&We(window.getComputedStyle(oe).zIndex)},[oe]),jsxRuntimeExports.jsx("div",{ref:Ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...we,transform:Se?we.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ze,"--radix-popper-transform-origin":[Te.transformOrigin?.x,Te.transformOrigin?.y].join(" "),...Te.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:_.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:R,placedSide:Ae,onArrowChange:pe,arrowX:$e,arrowY:Ne,shouldHideArrow:Be,children:jsxRuntimeExports.jsx(Primitive$2.div,{"data-side":Ae,"data-align":Ue,...ne,ref:ce,style:{...ne.style,animation:Se?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$4;var ARROW_NAME$1="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function _(T,R){const{__scopePopper:P,...O}=T,I=useContentContext(ARROW_NAME$1,P),z=OPPOSITE_SIDE[I.placedSide];return jsxRuntimeExports.jsx("span",{ref:I.onArrowChange,style:{position:"absolute",left:I.arrowX,top:I.arrowY,[z]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[I.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[I.placedSide],visibility:I.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$5,{...O,ref:R,style:{...O.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$1;function isNotNull(_){return _!==null}var transformOrigin=_=>({name:"transformOrigin",options:_,fn(T){const{placement:R,rects:P,middlewareData:O}=T,z=O.arrow?.centerOffset!==0,F=z?0:_.arrowWidth,G=z?0:_.arrowHeight,[V,Z]=getSideAndAlignFromPlacement(R),Y={start:"0%",center:"50%",end:"100%"}[Z],Q=(O.arrow?.x??0)+F/2,J=(O.arrow?.y??0)+G/2;let ee="",ne="";return V==="bottom"?(ee=z?Y:`${Q}px`,ne=`${-G}px`):V==="top"?(ee=z?Y:`${Q}px`,ne=`${P.floating.height+G}px`):V==="right"?(ee=`${-G}px`,ne=z?Y:`${J}px`):V==="left"&&(ee=`${P.floating.width+G}px`,ne=z?Y:`${J}px`),{data:{x:ee,y:ne}}}});function getSideAndAlignFromPlacement(_){const[T,R="center"]=_.split("-");return[T,R]}var Root2$2=Popper,Anchor=PopperAnchor,Content$2=PopperContent,Arrow=PopperArrow,PORTAL_NAME$1="Portal",Portal$1=reactExports.forwardRef((_,T)=>{const{container:R,...P}=_,[O,I]=reactExports.useState(!1);useLayoutEffect2(()=>I(!0),[]);const z=R||O&&globalThis?.document?.body;return z?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive$2.div,{...P,ref:T}),z):null});Portal$1.displayName=PORTAL_NAME$1;function createSlot(_){const T=createSlotClone(_),R=reactExports.forwardRef((P,O)=>{const{children:I,...z}=P,F=reactExports.Children.toArray(I),G=F.find(isSlottable);if(G){const V=G.props.children,Z=F.map(Y=>Y===G?reactExports.Children.count(V)>1?reactExports.Children.only(null):reactExports.isValidElement(V)?V.props.children:null:Y);return jsxRuntimeExports.jsx(T,{...z,ref:O,children:reactExports.isValidElement(V)?reactExports.cloneElement(V,void 0,Z):null})}return jsxRuntimeExports.jsx(T,{...z,ref:O,children:I})});return R.displayName=`${_}.Slot`,R}function createSlotClone(_){const T=reactExports.forwardRef((R,P)=>{const{children:O,...I}=R;if(reactExports.isValidElement(O)){const z=getElementRef(O),F=mergeProps(I,O.props);return O.type!==reactExports.Fragment&&(F.ref=P?composeRefs(P,z):z),reactExports.cloneElement(O,F)}return reactExports.Children.count(O)>1?reactExports.Children.only(null):null});return T.displayName=`${_}.SlotClone`,T}var SLOTTABLE_IDENTIFIER=Symbol("radix.slottable");function isSlottable(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER}function mergeProps(_,T){const R={...T};for(const P in T){const O=_[P],I=T[P];/^on[A-Z]/.test(P)?O&&I?R[P]=(...F)=>{const G=I(...F);return O(...F),G}:O&&(R[P]=O):P==="style"?R[P]={...O,...I}:P==="className"&&(R[P]=[O,I].filter(Boolean).join(" "))}return{..._,...R}}function getElementRef(_){let T=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning;return R?_.ref:(T=Object.getOwnPropertyDescriptor(_,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning,R?_.props.ref:_.props.ref||_.ref)}var VISUALLY_HIDDEN_STYLES=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),NAME$1="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((_,T)=>jsxRuntimeExports.jsx(Primitive$2.span,{..._,ref:T,style:{...VISUALLY_HIDDEN_STYLES,..._.style}}));VisuallyHidden.displayName=NAME$1;var getDefaultParent=function(_){if(typeof document>"u")return null;var T=Array.isArray(_)?_[0]:_;return T.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(_){return _&&(_.host||unwrapHost(_.parentNode))},correctTargets=function(_,T){return T.map(function(R){if(_.contains(R))return R;var P=unwrapHost(R);return P&&_.contains(P)?P:(console.error("aria-hidden",R,"in not contained inside",_,". Doing nothing"),null)}).filter(function(R){return!!R})},applyAttributeToOthers=function(_,T,R,P){var O=correctTargets(T,Array.isArray(_)?_:[_]);markerMap[R]||(markerMap[R]=new WeakMap);var I=markerMap[R],z=[],F=new Set,G=new Set(O),V=function(Y){!Y||F.has(Y)||(F.add(Y),V(Y.parentNode))};O.forEach(V);var Z=function(Y){!Y||G.has(Y)||Array.prototype.forEach.call(Y.children,function(Q){if(F.has(Q))Z(Q);else try{var J=Q.getAttribute(P),ee=J!==null&&J!=="false",ne=(counterMap.get(Q)||0)+1,se=(I.get(Q)||0)+1;counterMap.set(Q,ne),I.set(Q,se),z.push(Q),ne===1&&ee&&uncontrolledNodes.set(Q,!0),se===1&&Q.setAttribute(R,"true"),ee||Q.setAttribute(P,"true")}catch(oe){console.error("aria-hidden: cannot operate on ",Q,oe)}})};return Z(T),F.clear(),lockCount++,function(){z.forEach(function(Y){var Q=counterMap.get(Y)-1,J=I.get(Y)-1;counterMap.set(Y,Q),I.set(Y,J),Q||(uncontrolledNodes.has(Y)||Y.removeAttribute(P),uncontrolledNodes.delete(Y)),J||Y.removeAttribute(R)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(_,T,R){R===void 0&&(R="data-aria-hidden");var P=Array.from(Array.isArray(_)?_:[_]),O=getDefaultParent(_);return O?(P.push.apply(P,Array.from(O.querySelectorAll("[aria-live], script"))),applyAttributeToOthers(P,O,R,"aria-hidden")):function(){return null}},__assign=function(){return __assign=Object.assign||function(T){for(var R,P=1,O=arguments.length;P<O;P++){R=arguments[P];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(T[I]=R[I])}return T},__assign.apply(this,arguments)};function __rest(_,T){var R={};for(var P in _)Object.prototype.hasOwnProperty.call(_,P)&&T.indexOf(P)<0&&(R[P]=_[P]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var O=0,P=Object.getOwnPropertySymbols(_);O<P.length;O++)T.indexOf(P[O])<0&&Object.prototype.propertyIsEnumerable.call(_,P[O])&&(R[P[O]]=_[P[O]]);return R}function __spreadArray(_,T,R){if(R||arguments.length===2)for(var P=0,O=T.length,I;P<O;P++)(I||!(P in T))&&(I||(I=Array.prototype.slice.call(T,0,P)),I[P]=T[P]);return _.concat(I||Array.prototype.slice.call(T))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(_,T){return typeof _=="function"?_(T):_&&(_.current=T),_}function useCallbackRef(_,T){var R=reactExports.useState(function(){return{value:_,callback:T,facade:{get current(){return R.value},set current(P){var O=R.value;O!==P&&(R.value=P,R.callback(P,O))}}}})[0];return R.callback=T,R.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(_,T){var R=useCallbackRef(null,function(P){return _.forEach(function(O){return assignRef(O,P)})});return useIsomorphicLayoutEffect(function(){var P=currentValues.get(R);if(P){var O=new Set(P),I=new Set(_),z=R.current;O.forEach(function(F){I.has(F)||assignRef(F,null)}),I.forEach(function(F){O.has(F)||assignRef(F,z)})}currentValues.set(R,_)},[_]),R}function ItoI(_){return _}function innerCreateMedium(_,T){T===void 0&&(T=ItoI);var R=[],P=!1,O={read:function(){if(P)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return R.length?R[R.length-1]:_},useMedium:function(I){var z=T(I,P);return R.push(z),function(){R=R.filter(function(F){return F!==z})}},assignSyncMedium:function(I){for(P=!0;R.length;){var z=R;R=[],z.forEach(I)}R={push:function(F){return I(F)},filter:function(){return R}}},assignMedium:function(I){P=!0;var z=[];if(R.length){var F=R;R=[],F.forEach(I),z=R}var G=function(){var Z=z;z=[],Z.forEach(I)},V=function(){return Promise.resolve().then(G)};V(),R={push:function(Z){z.push(Z),V()},filter:function(Z){return z=z.filter(Z),R}}}};return O}function createSidecarMedium(_){_===void 0&&(_={});var T=innerCreateMedium(null);return T.options=__assign({async:!0,ssr:!1},_),T}var SideCar$1=function(_){var T=_.sideCar,R=__rest(_,["sideCar"]);if(!T)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var P=T.read();if(!P)throw new Error("Sidecar medium not found");return reactExports.createElement(P,__assign({},R))};SideCar$1.isSideCarExport=!0;function exportSidecar(_,T){return _.useMedium(T),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(_,T){var R=reactExports.useRef(null),P=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),O=P[0],I=P[1],z=_.forwardProps,F=_.children,G=_.className,V=_.removeScrollBar,Z=_.enabled,Y=_.shards,Q=_.sideCar,J=_.noRelative,ee=_.noIsolation,ne=_.inert,se=_.allowPinchZoom,oe=_.as,ae=oe===void 0?"div":oe,ce=_.gapMode,le=__rest(_,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),pe=Q,me=useMergeRefs([R,T]),he=__assign(__assign({},le),O);return reactExports.createElement(reactExports.Fragment,null,Z&&reactExports.createElement(pe,{sideCar:effectCar,removeScrollBar:V,shards:Y,noRelative:J,noIsolation:ee,inert:ne,setCallbacks:I,allowPinchZoom:!!se,lockRef:R,gapMode:ce}),z?reactExports.cloneElement(reactExports.Children.only(F),__assign(__assign({},he),{ref:me})):reactExports.createElement(ae,__assign({},he,{className:G,ref:me}),F))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var _=document.createElement("style");_.type="text/css";var T=getNonce();return T&&_.setAttribute("nonce",T),_}function injectStyles(_,T){_.styleSheet?_.styleSheet.cssText=T:_.appendChild(document.createTextNode(T))}function insertStyleTag(_){var T=document.head||document.getElementsByTagName("head")[0];T.appendChild(_)}var stylesheetSingleton=function(){var _=0,T=null;return{add:function(R){_==0&&(T=makeStyleTag())&&(injectStyles(T,R),insertStyleTag(T)),_++},remove:function(){_--,!_&&T&&(T.parentNode&&T.parentNode.removeChild(T),T=null)}}},styleHookSingleton=function(){var _=stylesheetSingleton();return function(T,R){reactExports.useEffect(function(){return _.add(T),function(){_.remove()}},[T&&R])}},styleSingleton=function(){var _=styleHookSingleton(),T=function(R){var P=R.styles,O=R.dynamic;return _(P,O),null};return T},zeroGap={left:0,top:0,right:0,gap:0},parse$2=function(_){return parseInt(_||"",10)||0},getOffset=function(_){var T=window.getComputedStyle(document.body),R=T[_==="padding"?"paddingLeft":"marginLeft"],P=T[_==="padding"?"paddingTop":"marginTop"],O=T[_==="padding"?"paddingRight":"marginRight"];return[parse$2(R),parse$2(P),parse$2(O)]},getGapWidth=function(_){if(_===void 0&&(_="margin"),typeof window>"u")return zeroGap;var T=getOffset(_),R=document.documentElement.clientWidth,P=window.innerWidth;return{left:T[0],top:T[1],right:T[2],gap:Math.max(0,P-R+T[2]-T[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(_,T,R,P){var O=_.left,I=_.top,z=_.right,F=_.gap;return R===void 0&&(R="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(P,`;
   padding-right: `).concat(F,"px ").concat(P,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(P,`;
    overscroll-behavior: contain;
    `).concat([T&&"position: relative ".concat(P,";"),R==="margin"&&`
    padding-left: `.concat(O,`px;
    padding-top: `).concat(I,`px;
    padding-right: `).concat(z,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(F,"px ").concat(P,`;
    `),R==="padding"&&"padding-right: ".concat(F,"px ").concat(P,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(F,"px ").concat(P,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(F,"px ").concat(P,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(P,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(P,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(F,`px;
  }
`)},getCurrentUseCounter=function(){var _=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(_)?_:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var _=getCurrentUseCounter()-1;_<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,_.toString())}},[])},RemoveScrollBar=function(_){var T=_.noRelative,R=_.noImportant,P=_.gapMode,O=P===void 0?"margin":P;useLockAttribute();var I=reactExports.useMemo(function(){return getGapWidth(O)},[O]);return reactExports.createElement(Style,{styles:getStyles(I,!T,O,R?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(_){return _.tagName==="TEXTAREA"},elementCanBeScrolled=function(_,T){if(!(_ instanceof Element))return!1;var R=window.getComputedStyle(_);return R[T]!=="hidden"&&!(R.overflowY===R.overflowX&&!alwaysContainsScroll(_)&&R[T]==="visible")},elementCouldBeVScrolled=function(_){return elementCanBeScrolled(_,"overflowY")},elementCouldBeHScrolled=function(_){return elementCanBeScrolled(_,"overflowX")},locationCouldBeScrolled=function(_,T){var R=T.ownerDocument,P=T;do{typeof ShadowRoot<"u"&&P instanceof ShadowRoot&&(P=P.host);var O=elementCouldBeScrolled(_,P);if(O){var I=getScrollVariables(_,P),z=I[1],F=I[2];if(z>F)return!0}P=P.parentNode}while(P&&P!==R.body);return!1},getVScrollVariables=function(_){var T=_.scrollTop,R=_.scrollHeight,P=_.clientHeight;return[T,R,P]},getHScrollVariables=function(_){var T=_.scrollLeft,R=_.scrollWidth,P=_.clientWidth;return[T,R,P]},elementCouldBeScrolled=function(_,T){return _==="v"?elementCouldBeVScrolled(T):elementCouldBeHScrolled(T)},getScrollVariables=function(_,T){return _==="v"?getVScrollVariables(T):getHScrollVariables(T)},getDirectionFactor=function(_,T){return _==="h"&&T==="rtl"?-1:1},handleScroll=function(_,T,R,P,O){var I=getDirectionFactor(_,window.getComputedStyle(T).direction),z=I*P,F=R.target,G=T.contains(F),V=!1,Z=z>0,Y=0,Q=0;do{if(!F)break;var J=getScrollVariables(_,F),ee=J[0],ne=J[1],se=J[2],oe=ne-se-I*ee;(ee||oe)&&elementCouldBeScrolled(_,F)&&(Y+=oe,Q+=ee);var ae=F.parentNode;F=ae&&ae.nodeType===Node.DOCUMENT_FRAGMENT_NODE?ae.host:ae}while(!G&&F!==document.body||G&&(T.contains(F)||T===F));return(Z&&Math.abs(Y)<1||!Z&&Math.abs(Q)<1)&&(V=!0),V},getTouchXY=function(_){return"changedTouches"in _?[_.changedTouches[0].clientX,_.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(_){return[_.deltaX,_.deltaY]},extractRef=function(_){return _&&"current"in _?_.current:_},deltaCompare=function(_,T){return _[0]===T[0]&&_[1]===T[1]},generateStyle=function(_){return`
  .block-interactivity-`.concat(_,` {pointer-events: none;}
  .allow-interactivity-`).concat(_,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(_){var T=reactExports.useRef([]),R=reactExports.useRef([0,0]),P=reactExports.useRef(),O=reactExports.useState(idCounter++)[0],I=reactExports.useState(styleSingleton)[0],z=reactExports.useRef(_);reactExports.useEffect(function(){z.current=_},[_]),reactExports.useEffect(function(){if(_.inert){document.body.classList.add("block-interactivity-".concat(O));var ne=__spreadArray([_.lockRef.current],(_.shards||[]).map(extractRef),!0).filter(Boolean);return ne.forEach(function(se){return se.classList.add("allow-interactivity-".concat(O))}),function(){document.body.classList.remove("block-interactivity-".concat(O)),ne.forEach(function(se){return se.classList.remove("allow-interactivity-".concat(O))})}}},[_.inert,_.lockRef.current,_.shards]);var F=reactExports.useCallback(function(ne,se){if("touches"in ne&&ne.touches.length===2||ne.type==="wheel"&&ne.ctrlKey)return!z.current.allowPinchZoom;var oe=getTouchXY(ne),ae=R.current,ce="deltaX"in ne?ne.deltaX:ae[0]-oe[0],le="deltaY"in ne?ne.deltaY:ae[1]-oe[1],pe,me=ne.target,he=Math.abs(ce)>Math.abs(le)?"h":"v";if("touches"in ne&&he==="h"&&me.type==="range")return!1;var fe=window.getSelection(),de=fe&&fe.anchorNode,be=de?de===me||de.contains(me):!1;if(be)return!1;var ye=locationCouldBeScrolled(he,me);if(!ye)return!0;if(ye?pe=he:(pe=he==="v"?"h":"v",ye=locationCouldBeScrolled(he,me)),!ye)return!1;if(!P.current&&"changedTouches"in ne&&(ce||le)&&(P.current=pe),!pe)return!0;var Ce=P.current||pe;return handleScroll(Ce,se,ne,Ce==="h"?ce:le)},[]),G=reactExports.useCallback(function(ne){var se=ne;if(!(!lockStack.length||lockStack[lockStack.length-1]!==I)){var oe="deltaY"in se?getDeltaXY(se):getTouchXY(se),ae=T.current.filter(function(pe){return pe.name===se.type&&(pe.target===se.target||se.target===pe.shadowParent)&&deltaCompare(pe.delta,oe)})[0];if(ae&&ae.should){se.cancelable&&se.preventDefault();return}if(!ae){var ce=(z.current.shards||[]).map(extractRef).filter(Boolean).filter(function(pe){return pe.contains(se.target)}),le=ce.length>0?F(se,ce[0]):!z.current.noIsolation;le&&se.cancelable&&se.preventDefault()}}},[]),V=reactExports.useCallback(function(ne,se,oe,ae){var ce={name:ne,delta:se,target:oe,should:ae,shadowParent:getOutermostShadowParent(oe)};T.current.push(ce),setTimeout(function(){T.current=T.current.filter(function(le){return le!==ce})},1)},[]),Z=reactExports.useCallback(function(ne){R.current=getTouchXY(ne),P.current=void 0},[]),Y=reactExports.useCallback(function(ne){V(ne.type,getDeltaXY(ne),ne.target,F(ne,_.lockRef.current))},[]),Q=reactExports.useCallback(function(ne){V(ne.type,getTouchXY(ne),ne.target,F(ne,_.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(I),_.setCallbacks({onScrollCapture:Y,onWheelCapture:Y,onTouchMoveCapture:Q}),document.addEventListener("wheel",G,nonPassive),document.addEventListener("touchmove",G,nonPassive),document.addEventListener("touchstart",Z,nonPassive),function(){lockStack=lockStack.filter(function(ne){return ne!==I}),document.removeEventListener("wheel",G,nonPassive),document.removeEventListener("touchmove",G,nonPassive),document.removeEventListener("touchstart",Z,nonPassive)}},[]);var J=_.removeScrollBar,ee=_.inert;return reactExports.createElement(reactExports.Fragment,null,ee?reactExports.createElement(I,{styles:generateStyle(O)}):null,J?reactExports.createElement(RemoveScrollBar,{noRelative:_.noRelative,gapMode:_.gapMode}):null)}function getOutermostShadowParent(_){for(var T=null;_!==null;)_ instanceof ShadowRoot&&(T=_.host,_=_.host),_=_.parentNode;return T}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(_,T){return reactExports.createElement(RemoveScroll,__assign({},_,{ref:T,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection$2,useCollection$2,createCollectionScope$2]=createCollection(SELECT_NAME),[createSelectContext]=createContextScope$1(SELECT_NAME,[createCollectionScope$2,createPopperScope]),usePopperScope=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$1=_=>{const{__scopeSelect:T,children:R,open:P,defaultOpen:O,onOpenChange:I,value:z,defaultValue:F,onValueChange:G,dir:V,name:Z,autoComplete:Y,disabled:Q,required:J,form:ee}=_,ne=usePopperScope(T),[se,oe]=reactExports.useState(null),[ae,ce]=reactExports.useState(null),[le,pe]=reactExports.useState(!1),me=useDirection(V),[he,fe]=useControllableState({prop:P,defaultProp:O??!1,onChange:I,caller:SELECT_NAME}),[de,be]=useControllableState({prop:z,defaultProp:F,onChange:G,caller:SELECT_NAME}),ye=reactExports.useRef(null),Ce=se?ee||!!se.closest("form"):!0,[ve,Ee]=reactExports.useState(new Set),we=Array.from(ve).map(ge=>ge.props.value).join(";");return jsxRuntimeExports.jsx(Root2$2,{...ne,children:jsxRuntimeExports.jsxs(SelectProvider,{required:J,scope:T,trigger:se,onTriggerChange:oe,valueNode:ae,onValueNodeChange:ce,valueNodeHasChildren:le,onValueNodeHasChildrenChange:pe,contentId:useId(),value:de,onValueChange:be,open:he,onOpenChange:fe,dir:me,triggerPointerDownPosRef:ye,disabled:Q,children:[jsxRuntimeExports.jsx(Collection$2.Provider,{scope:T,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:_.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(ge=>{Ee(Se=>new Set(Se).add(ge))},[]),onNativeOptionRemove:reactExports.useCallback(ge=>{Ee(Se=>{const Te=new Set(Se);return Te.delete(ge),Te})},[]),children:R})}),Ce?jsxRuntimeExports.jsxs(SelectBubbleInput,{"aria-hidden":!0,required:J,tabIndex:-1,name:Z,autoComplete:Y,value:de,onChange:ge=>be(ge.target.value),disabled:Q,form:ee,children:[de===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(ve)]},we):null]})})};Select$1.displayName=SELECT_NAME;var TRIGGER_NAME$3="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,disabled:P=!1,...O}=_,I=usePopperScope(R),z=useSelectContext(TRIGGER_NAME$3,R),F=z.disabled||P,G=useComposedRefs(T,z.onTriggerChange),V=useCollection$2(R),Z=reactExports.useRef("touch"),[Y,Q,J]=useTypeaheadSearch(ne=>{const se=V().filter(ce=>!ce.disabled),oe=se.find(ce=>ce.value===z.value),ae=findNextItem(se,ne,oe);ae!==void 0&&z.onValueChange(ae.value)}),ee=ne=>{F||(z.onOpenChange(!0),J()),ne&&(z.triggerPointerDownPosRef.current={x:Math.round(ne.pageX),y:Math.round(ne.pageY)})};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...I,children:jsxRuntimeExports.jsx(Primitive$2.button,{type:"button",role:"combobox","aria-controls":z.contentId,"aria-expanded":z.open,"aria-required":z.required,"aria-autocomplete":"none",dir:z.dir,"data-state":z.open?"open":"closed",disabled:F,"data-disabled":F?"":void 0,"data-placeholder":shouldShowPlaceholder(z.value)?"":void 0,...O,ref:G,onClick:composeEventHandlers(O.onClick,ne=>{ne.currentTarget.focus(),Z.current!=="mouse"&&ee(ne)}),onPointerDown:composeEventHandlers(O.onPointerDown,ne=>{Z.current=ne.pointerType;const se=ne.target;se.hasPointerCapture(ne.pointerId)&&se.releasePointerCapture(ne.pointerId),ne.button===0&&ne.ctrlKey===!1&&ne.pointerType==="mouse"&&(ee(ne),ne.preventDefault())}),onKeyDown:composeEventHandlers(O.onKeyDown,ne=>{const se=Y.current!=="";!(ne.ctrlKey||ne.altKey||ne.metaKey)&&ne.key.length===1&&Q(ne.key),!(se&&ne.key===" ")&&OPEN_KEYS.includes(ne.key)&&(ee(),ne.preventDefault())})})})});SelectTrigger$1.displayName=TRIGGER_NAME$3;var VALUE_NAME="SelectValue",SelectValue$1=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,className:P,style:O,children:I,placeholder:z="",...F}=_,G=useSelectContext(VALUE_NAME,R),{onValueNodeHasChildrenChange:V}=G,Z=I!==void 0,Y=useComposedRefs(T,G.onValueNodeChange);return useLayoutEffect2(()=>{V(Z)},[V,Z]),jsxRuntimeExports.jsx(Primitive$2.span,{...F,ref:Y,style:{pointerEvents:"none"},children:shouldShowPlaceholder(G.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:z}):I})});SelectValue$1.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,children:P,...O}=_;return jsxRuntimeExports.jsx(Primitive$2.span,{"aria-hidden":!0,...O,ref:T,children:P||""})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME="SelectPortal",SelectPortal=_=>jsxRuntimeExports.jsx(Portal$1,{asChild:!0,..._});SelectPortal.displayName=PORTAL_NAME;var CONTENT_NAME$3="SelectContent",SelectContent$1=reactExports.forwardRef((_,T)=>{const R=useSelectContext(CONTENT_NAME$3,_.__scopeSelect),[P,O]=reactExports.useState();if(useLayoutEffect2(()=>{O(new DocumentFragment)},[]),!R.open){const I=P;return I?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:_.__scopeSelect,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:_.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:_.children})})}),I):null}return jsxRuntimeExports.jsx(SelectContentImpl,{..._,ref:T})});SelectContent$1.displayName=CONTENT_NAME$3;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME$3),CONTENT_IMPL_NAME="SelectContentImpl",Slot=createSlot("SelectContent.RemoveScroll"),SelectContentImpl=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,position:P="item-aligned",onCloseAutoFocus:O,onEscapeKeyDown:I,onPointerDownOutside:z,side:F,sideOffset:G,align:V,alignOffset:Z,arrowPadding:Y,collisionBoundary:Q,collisionPadding:J,sticky:ee,hideWhenDetached:ne,avoidCollisions:se,...oe}=_,ae=useSelectContext(CONTENT_NAME$3,R),[ce,le]=reactExports.useState(null),[pe,me]=reactExports.useState(null),he=useComposedRefs(T,Oe=>le(Oe)),[fe,de]=reactExports.useState(null),[be,ye]=reactExports.useState(null),Ce=useCollection$2(R),[ve,Ee]=reactExports.useState(!1),we=reactExports.useRef(!1);reactExports.useEffect(()=>{if(ce)return hideOthers(ce)},[ce]),useFocusGuards();const ge=reactExports.useCallback(Oe=>{const[Ge,...je]=Ce().map(Me=>Me.ref.current),[Fe]=je.slice(-1),ze=document.activeElement;for(const Me of Oe)if(Me===ze||(Me?.scrollIntoView({block:"nearest"}),Me===Ge&&pe&&(pe.scrollTop=0),Me===Fe&&pe&&(pe.scrollTop=pe.scrollHeight),Me?.focus(),document.activeElement!==ze))return},[Ce,pe]),Se=reactExports.useCallback(()=>ge([fe,ce]),[ge,fe,ce]);reactExports.useEffect(()=>{ve&&Se()},[ve,Se]);const{onOpenChange:Te,triggerPointerDownPosRef:Ae}=ae;reactExports.useEffect(()=>{if(ce){let Oe={x:0,y:0};const Ge=Fe=>{Oe={x:Math.abs(Math.round(Fe.pageX)-(Ae.current?.x??0)),y:Math.abs(Math.round(Fe.pageY)-(Ae.current?.y??0))}},je=Fe=>{Oe.x<=10&&Oe.y<=10?Fe.preventDefault():ce.contains(Fe.target)||Te(!1),document.removeEventListener("pointermove",Ge),Ae.current=null};return Ae.current!==null&&(document.addEventListener("pointermove",Ge),document.addEventListener("pointerup",je,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ge),document.removeEventListener("pointerup",je,{capture:!0})}}},[ce,Te,Ae]),reactExports.useEffect(()=>{const Oe=()=>Te(!1);return window.addEventListener("blur",Oe),window.addEventListener("resize",Oe),()=>{window.removeEventListener("blur",Oe),window.removeEventListener("resize",Oe)}},[Te]);const[Ue,_e]=useTypeaheadSearch(Oe=>{const Ge=Ce().filter(ze=>!ze.disabled),je=Ge.find(ze=>ze.ref.current===document.activeElement),Fe=findNextItem(Ge,Oe,je);Fe&&setTimeout(()=>Fe.ref.current.focus())}),$e=reactExports.useCallback((Oe,Ge,je)=>{const Fe=!we.current&&!je;(ae.value!==void 0&&ae.value===Ge||Fe)&&(de(Oe),Fe&&(we.current=!0))},[ae.value]),Ne=reactExports.useCallback(()=>ce?.focus(),[ce]),Be=reactExports.useCallback((Oe,Ge,je)=>{const Fe=!we.current&&!je;(ae.value!==void 0&&ae.value===Ge||Fe)&&ye(Oe)},[ae.value]),Ze=P==="popper"?SelectPopperPosition:SelectItemAlignedPosition,We=Ze===SelectPopperPosition?{side:F,sideOffset:G,align:V,alignOffset:Z,arrowPadding:Y,collisionBoundary:Q,collisionPadding:J,sticky:ee,hideWhenDetached:ne,avoidCollisions:se}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:R,content:ce,viewport:pe,onViewportChange:me,itemRefCallback:$e,selectedItem:fe,onItemLeave:Ne,itemTextRefCallback:Be,focusSelectedItem:Se,selectedItemText:be,position:P,isPositioned:ve,searchRef:Ue,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:ae.open,onMountAutoFocus:Oe=>{Oe.preventDefault()},onUnmountAutoFocus:composeEventHandlers(O,Oe=>{ae.trigger?.focus({preventScroll:!0}),Oe.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:I,onPointerDownOutside:z,onFocusOutside:Oe=>Oe.preventDefault(),onDismiss:()=>ae.onOpenChange(!1),children:jsxRuntimeExports.jsx(Ze,{role:"listbox",id:ae.contentId,"data-state":ae.open?"open":"closed",dir:ae.dir,onContextMenu:Oe=>Oe.preventDefault(),...oe,...We,onPlaced:()=>Ee(!0),ref:he,style:{display:"flex",flexDirection:"column",outline:"none",...oe.style},onKeyDown:composeEventHandlers(oe.onKeyDown,Oe=>{const Ge=Oe.ctrlKey||Oe.altKey||Oe.metaKey;if(Oe.key==="Tab"&&Oe.preventDefault(),!Ge&&Oe.key.length===1&&_e(Oe.key),["ArrowUp","ArrowDown","Home","End"].includes(Oe.key)){let Fe=Ce().filter(ze=>!ze.disabled).map(ze=>ze.ref.current);if(["ArrowUp","End"].includes(Oe.key)&&(Fe=Fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Oe.key)){const ze=Oe.target,Me=Fe.indexOf(ze);Fe=Fe.slice(Me+1)}setTimeout(()=>ge(Fe)),Oe.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,onPlaced:P,...O}=_,I=useSelectContext(CONTENT_NAME$3,R),z=useSelectContentContext(CONTENT_NAME$3,R),[F,G]=reactExports.useState(null),[V,Z]=reactExports.useState(null),Y=useComposedRefs(T,he=>Z(he)),Q=useCollection$2(R),J=reactExports.useRef(!1),ee=reactExports.useRef(!0),{viewport:ne,selectedItem:se,selectedItemText:oe,focusSelectedItem:ae}=z,ce=reactExports.useCallback(()=>{if(I.trigger&&I.valueNode&&F&&V&&ne&&se&&oe){const he=I.trigger.getBoundingClientRect(),fe=V.getBoundingClientRect(),de=I.valueNode.getBoundingClientRect(),be=oe.getBoundingClientRect();if(I.dir!=="rtl"){const ze=be.left-fe.left,Me=de.left-ze,Ke=he.left-Me,Ye=he.width+Ke,Qe=Math.max(Ye,fe.width),Je=window.innerWidth-CONTENT_MARGIN,lt=clamp$1(Me,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,Je-Qe)]);F.style.minWidth=Ye+"px",F.style.left=lt+"px"}else{const ze=fe.right-be.right,Me=window.innerWidth-de.right-ze,Ke=window.innerWidth-he.right-Me,Ye=he.width+Ke,Qe=Math.max(Ye,fe.width),Je=window.innerWidth-CONTENT_MARGIN,lt=clamp$1(Me,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,Je-Qe)]);F.style.minWidth=Ye+"px",F.style.right=lt+"px"}const ye=Q(),Ce=window.innerHeight-CONTENT_MARGIN*2,ve=ne.scrollHeight,Ee=window.getComputedStyle(V),we=parseInt(Ee.borderTopWidth,10),ge=parseInt(Ee.paddingTop,10),Se=parseInt(Ee.borderBottomWidth,10),Te=parseInt(Ee.paddingBottom,10),Ae=we+ge+ve+Te+Se,Ue=Math.min(se.offsetHeight*5,Ae),_e=window.getComputedStyle(ne),$e=parseInt(_e.paddingTop,10),Ne=parseInt(_e.paddingBottom,10),Be=he.top+he.height/2-CONTENT_MARGIN,Ze=Ce-Be,We=se.offsetHeight/2,Oe=se.offsetTop+We,Ge=we+ge+Oe,je=Ae-Ge;if(Ge<=Be){const ze=ye.length>0&&se===ye[ye.length-1].ref.current;F.style.bottom="0px";const Me=V.clientHeight-ne.offsetTop-ne.offsetHeight,Ke=Math.max(Ze,We+(ze?Ne:0)+Me+Se),Ye=Ge+Ke;F.style.height=Ye+"px"}else{const ze=ye.length>0&&se===ye[0].ref.current;F.style.top="0px";const Ke=Math.max(Be,we+ne.offsetTop+(ze?$e:0)+We)+je;F.style.height=Ke+"px",ne.scrollTop=Ge-Be+ne.offsetTop}F.style.margin=`${CONTENT_MARGIN}px 0`,F.style.minHeight=Ue+"px",F.style.maxHeight=Ce+"px",P?.(),requestAnimationFrame(()=>J.current=!0)}},[Q,I.trigger,I.valueNode,F,V,ne,se,oe,I.dir,P]);useLayoutEffect2(()=>ce(),[ce]);const[le,pe]=reactExports.useState();useLayoutEffect2(()=>{V&&pe(window.getComputedStyle(V).zIndex)},[V]);const me=reactExports.useCallback(he=>{he&&ee.current===!0&&(ce(),ae?.(),ee.current=!1)},[ce,ae]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:R,contentWrapper:F,shouldExpandOnScrollRef:J,onScrollButtonChange:me,children:jsxRuntimeExports.jsx("div",{ref:G,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:le},children:jsxRuntimeExports.jsx(Primitive$2.div,{...O,ref:Y,style:{boxSizing:"border-box",maxHeight:"100%",...O.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,align:P="start",collisionPadding:O=CONTENT_MARGIN,...I}=_,z=usePopperScope(R);return jsxRuntimeExports.jsx(Content$2,{...z,...I,ref:T,align:P,collisionPadding:O,style:{boxSizing:"border-box",...I.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME$3,{}),VIEWPORT_NAME$1="SelectViewport",SelectViewport=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,nonce:P,...O}=_,I=useSelectContentContext(VIEWPORT_NAME$1,R),z=useSelectViewportContext(VIEWPORT_NAME$1,R),F=useComposedRefs(T,I.onViewportChange),G=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:P}),jsxRuntimeExports.jsx(Collection$2.Slot,{scope:R,children:jsxRuntimeExports.jsx(Primitive$2.div,{"data-radix-select-viewport":"",role:"presentation",...O,ref:F,style:{position:"relative",flex:1,overflow:"hidden auto",...O.style},onScroll:composeEventHandlers(O.onScroll,V=>{const Z=V.currentTarget,{contentWrapper:Y,shouldExpandOnScrollRef:Q}=z;if(Q?.current&&Y){const J=Math.abs(G.current-Z.scrollTop);if(J>0){const ee=window.innerHeight-CONTENT_MARGIN*2,ne=parseFloat(Y.style.minHeight),se=parseFloat(Y.style.height),oe=Math.max(ne,se);if(oe<ee){const ae=oe+J,ce=Math.min(ee,ae),le=ae-ce;Y.style.height=ce+"px",Y.style.bottom==="0px"&&(Z.scrollTop=le>0?le:0,Y.style.justifyContent="flex-end")}}}G.current=Z.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME$1;var GROUP_NAME$1="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME$1),SelectGroup=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,...P}=_,O=useId();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:R,id:O,children:jsxRuntimeExports.jsx(Primitive$2.div,{role:"group","aria-labelledby":O,...P,ref:T})})});SelectGroup.displayName=GROUP_NAME$1;var LABEL_NAME="SelectLabel",SelectLabel$1=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,...P}=_,O=useSelectGroupContext(LABEL_NAME,R);return jsxRuntimeExports.jsx(Primitive$2.div,{id:O.id,...P,ref:T})});SelectLabel$1.displayName=LABEL_NAME;var ITEM_NAME$2="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME$2),SelectItem$1=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,value:P,disabled:O=!1,textValue:I,...z}=_,F=useSelectContext(ITEM_NAME$2,R),G=useSelectContentContext(ITEM_NAME$2,R),V=F.value===P,[Z,Y]=reactExports.useState(I??""),[Q,J]=reactExports.useState(!1),ee=useComposedRefs(T,ae=>G.itemRefCallback?.(ae,P,O)),ne=useId(),se=reactExports.useRef("touch"),oe=()=>{O||(F.onValueChange(P),F.onOpenChange(!1))};if(P==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:R,value:P,disabled:O,textId:ne,isSelected:V,onItemTextChange:reactExports.useCallback(ae=>{Y(ce=>ce||(ae?.textContent??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection$2.ItemSlot,{scope:R,value:P,disabled:O,textValue:Z,children:jsxRuntimeExports.jsx(Primitive$2.div,{role:"option","aria-labelledby":ne,"data-highlighted":Q?"":void 0,"aria-selected":V&&Q,"data-state":V?"checked":"unchecked","aria-disabled":O||void 0,"data-disabled":O?"":void 0,tabIndex:O?void 0:-1,...z,ref:ee,onFocus:composeEventHandlers(z.onFocus,()=>J(!0)),onBlur:composeEventHandlers(z.onBlur,()=>J(!1)),onClick:composeEventHandlers(z.onClick,()=>{se.current!=="mouse"&&oe()}),onPointerUp:composeEventHandlers(z.onPointerUp,()=>{se.current==="mouse"&&oe()}),onPointerDown:composeEventHandlers(z.onPointerDown,ae=>{se.current=ae.pointerType}),onPointerMove:composeEventHandlers(z.onPointerMove,ae=>{se.current=ae.pointerType,O?G.onItemLeave?.():se.current==="mouse"&&ae.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers(z.onPointerLeave,ae=>{ae.currentTarget===document.activeElement&&G.onItemLeave?.()}),onKeyDown:composeEventHandlers(z.onKeyDown,ae=>{G.searchRef?.current!==""&&ae.key===" "||(SELECTION_KEYS.includes(ae.key)&&oe(),ae.key===" "&&ae.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME$2;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,className:P,style:O,...I}=_,z=useSelectContext(ITEM_TEXT_NAME,R),F=useSelectContentContext(ITEM_TEXT_NAME,R),G=useSelectItemContext(ITEM_TEXT_NAME,R),V=useSelectNativeOptionsContext(ITEM_TEXT_NAME,R),[Z,Y]=reactExports.useState(null),Q=useComposedRefs(T,oe=>Y(oe),G.onItemTextChange,oe=>F.itemTextRefCallback?.(oe,G.value,G.disabled)),J=Z?.textContent,ee=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:G.value,disabled:G.disabled,children:J},G.value),[G.disabled,G.value,J]),{onNativeOptionAdd:ne,onNativeOptionRemove:se}=V;return useLayoutEffect2(()=>(ne(ee),()=>se(ee)),[ne,se,ee]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive$2.span,{id:G.textId,...I,ref:Q}),G.isSelected&&z.valueNode&&!z.valueNodeHasChildren?reactDomExports.createPortal(I.children,z.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,...P}=_;return useSelectItemContext(ITEM_INDICATOR_NAME,R).isSelected?jsxRuntimeExports.jsx(Primitive$2.span,{"aria-hidden":!0,...P,ref:T}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton$1=reactExports.forwardRef((_,T)=>{const R=useSelectContentContext(SCROLL_UP_BUTTON_NAME,_.__scopeSelect),P=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,_.__scopeSelect),[O,I]=reactExports.useState(!1),z=useComposedRefs(T,P.onScrollButtonChange);return useLayoutEffect2(()=>{if(R.viewport&&R.isPositioned){let F=function(){const V=G.scrollTop>0;I(V)};const G=R.viewport;return F(),G.addEventListener("scroll",F),()=>G.removeEventListener("scroll",F)}},[R.viewport,R.isPositioned]),O?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._,ref:z,onAutoScroll:()=>{const{viewport:F,selectedItem:G}=R;F&&G&&(F.scrollTop=F.scrollTop-G.offsetHeight)}}):null});SelectScrollUpButton$1.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton$1=reactExports.forwardRef((_,T)=>{const R=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,_.__scopeSelect),P=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,_.__scopeSelect),[O,I]=reactExports.useState(!1),z=useComposedRefs(T,P.onScrollButtonChange);return useLayoutEffect2(()=>{if(R.viewport&&R.isPositioned){let F=function(){const V=G.scrollHeight-G.clientHeight,Z=Math.ceil(G.scrollTop)<V;I(Z)};const G=R.viewport;return F(),G.addEventListener("scroll",F),()=>G.removeEventListener("scroll",F)}},[R.viewport,R.isPositioned]),O?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._,ref:z,onAutoScroll:()=>{const{viewport:F,selectedItem:G}=R;F&&G&&(F.scrollTop=F.scrollTop+G.offsetHeight)}}):null});SelectScrollDownButton$1.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,onAutoScroll:P,...O}=_,I=useSelectContentContext("SelectScrollButton",R),z=reactExports.useRef(null),F=useCollection$2(R),G=reactExports.useCallback(()=>{z.current!==null&&(window.clearInterval(z.current),z.current=null)},[]);return reactExports.useEffect(()=>()=>G(),[G]),useLayoutEffect2(()=>{F().find(Z=>Z.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[F]),jsxRuntimeExports.jsx(Primitive$2.div,{"aria-hidden":!0,...O,ref:T,style:{flexShrink:0,...O.style},onPointerDown:composeEventHandlers(O.onPointerDown,()=>{z.current===null&&(z.current=window.setInterval(P,50))}),onPointerMove:composeEventHandlers(O.onPointerMove,()=>{I.onItemLeave?.(),z.current===null&&(z.current=window.setInterval(P,50))}),onPointerLeave:composeEventHandlers(O.onPointerLeave,()=>{G()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator$1=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,...P}=_;return jsxRuntimeExports.jsx(Primitive$2.div,{"aria-hidden":!0,...P,ref:T})});SelectSeparator$1.displayName=SEPARATOR_NAME;var ARROW_NAME="SelectArrow",SelectArrow=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,...P}=_,O=usePopperScope(R),I=useSelectContext(ARROW_NAME,R),z=useSelectContentContext(ARROW_NAME,R);return I.open&&z.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...O,...P,ref:T}):null});SelectArrow.displayName=ARROW_NAME;var BUBBLE_INPUT_NAME="SelectBubbleInput",SelectBubbleInput=reactExports.forwardRef(({__scopeSelect:_,value:T,...R},P)=>{const O=reactExports.useRef(null),I=useComposedRefs(P,O),z=usePrevious(T);return reactExports.useEffect(()=>{const F=O.current;if(!F)return;const G=window.HTMLSelectElement.prototype,Z=Object.getOwnPropertyDescriptor(G,"value").set;if(z!==T&&Z){const Y=new Event("change",{bubbles:!0});Z.call(F,T),F.dispatchEvent(Y)}},[z,T]),jsxRuntimeExports.jsx(Primitive$2.select,{...R,style:{...VISUALLY_HIDDEN_STYLES,...R.style},ref:I,defaultValue:T})});SelectBubbleInput.displayName=BUBBLE_INPUT_NAME;function shouldShowPlaceholder(_){return _===""||_===void 0}function useTypeaheadSearch(_){const T=useCallbackRef$1(_),R=reactExports.useRef(""),P=reactExports.useRef(0),O=reactExports.useCallback(z=>{const F=R.current+z;T(F),(function G(V){R.current=V,window.clearTimeout(P.current),V!==""&&(P.current=window.setTimeout(()=>G(""),1e3))})(F)},[T]),I=reactExports.useCallback(()=>{R.current="",window.clearTimeout(P.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(P.current),[]),[R,O,I]}function findNextItem(_,T,R){const O=T.length>1&&Array.from(T).every(V=>V===T[0])?T[0]:T,I=R?_.indexOf(R):-1;let z=wrapArray$1(_,Math.max(I,0));O.length===1&&(z=z.filter(V=>V!==R));const G=z.find(V=>V.textValue.toLowerCase().startsWith(O.toLowerCase()));return G!==R?G:void 0}function wrapArray$1(_,T){return _.map((R,P)=>_[(T+P)%_.length])}var Root2$1=Select$1,Trigger$2=SelectTrigger$1,Value=SelectValue$1,Icon=SelectIcon,Portal=SelectPortal,Content2$1=SelectContent$1,Viewport$1=SelectViewport,Label=SelectLabel$1,Item$2=SelectItem$1,ItemText=SelectItemText,ItemIndicator=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton$1,ScrollDownButton=SelectScrollDownButton$1,Separator$2=SelectSeparator$1;const Select=Root2$1,SelectValue=Value,SelectTrigger=reactExports.forwardRef(({className:_,children:T,...R},P)=>jsxRuntimeExports.jsxs(Trigger$2,{ref:P,className:cn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",_),...R,children:[T,jsxRuntimeExports.jsx(Icon,{asChild:!0,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 opacity-50"})})]}));SelectTrigger.displayName=Trigger$2.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(ScrollUpButton,{ref:R,className:cn("flex cursor-default items-center justify-center py-1",_),...T,children:jsxRuntimeExports.jsx(ChevronUp,{className:"h-4 w-4"})}));SelectScrollUpButton.displayName=ScrollUpButton.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(ScrollDownButton,{ref:R,className:cn("flex cursor-default items-center justify-center py-1",_),...T,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})}));SelectScrollDownButton.displayName=ScrollDownButton.displayName;const SelectContent=reactExports.forwardRef(({className:_,children:T,position:R="popper",...P},O)=>jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs(Content2$1,{ref:O,className:cn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden bg-secondary rounded-md border text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",R==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",_),position:R,...P,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx(Viewport$1,{className:cn("p-1",R==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:T}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})}));SelectContent.displayName=Content2$1.displayName;const SelectLabel=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(Label,{ref:R,className:cn("py-1.5 pl-8 pr-2 text-sm font-semibold",_),...T}));SelectLabel.displayName=Label.displayName;const SelectItem=reactExports.forwardRef(({className:_,children:T,...R},P)=>jsxRuntimeExports.jsxs(Item$2,{ref:P,className:cn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_),...R,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(ItemText,{children:T})]}));SelectItem.displayName=Item$2.displayName;const SelectSeparator=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(Separator$2,{ref:R,className:cn("-mx-1 my-1 h-px bg-muted",_),...T}));SelectSeparator.displayName=Separator$2.displayName;function ComboBox({label:_,value:T,options:R,onChange:P,disabled:O,placeholder:I}){return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs w-32 shrink-0",children:_}),jsxRuntimeExports.jsxs(Select,{value:T,onValueChange:P,disabled:O,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"h-7 text-xs w-32",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:I??"Select..."})}),jsxRuntimeExports.jsx(SelectContent,{children:R.map(z=>jsxRuntimeExports.jsx(SelectItem,{value:z.value,className:"text-xs",children:z.label},z.value))})]})]})}function EHTParametersTab({params:_,onChange:T,disabled:R}){const P=(I,z)=>{const F=cloneDeep(_);F.general[I]=z,T(F)},O=_.general;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"General"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(NumberInput,{label:"End Time (h)",value:O.t_end,onChange:I=>P("t_end",I),disabled:R,min:0}),jsxRuntimeExports.jsx(IntegerInput,{label:"Random Seed",value:O.random_seed,onChange:I=>P("random_seed",I),disabled:R}),jsxRuntimeExports.jsx(NumberInput,{label:"Out-of-plane Division Prob.",value:O.p_div_out,onChange:I=>P("p_div_out",I),disabled:R,min:0,max:1})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Geometry"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(BoolInput,{label:"Full Circle",value:O.full_circle,onChange:I=>P("full_circle",I),disabled:R}),jsxRuntimeExports.jsx(NumberInput,{label:"Initial Width",value:O.w_init,onChange:I=>P("w_init",I),disabled:R,min:0}),jsxRuntimeExports.jsx(NumberInput,{label:"Initial Height",value:O.h_init,onChange:I=>P("h_init",I),disabled:R,min:0}),jsxRuntimeExports.jsx(NumberInput,{label:"Perimeter",value:O.perimeter,onChange:I=>P("perimeter",I),disabled:R,min:1}),jsxRuntimeExports.jsx(NumberInput,{label:"Aspect (0=line, b/a)",value:O.aspect_ratio,onChange:I=>P("aspect_ratio",I),disabled:R})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Model Parameters"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(BoolInput,{label:"Hard Sphere Nuclei",value:O.hard_sphere_nuclei,onChange:I=>P("hard_sphere_nuclei",I),disabled:R}),jsxRuntimeExports.jsx(NumberInput,{label:"Friction (mu)",value:O.mu,onChange:I=>P("mu",I),disabled:R,min:0})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Display"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(IntegerInput,{label:"Screen Width",value:O.w_screen,onChange:I=>P("w_screen",I),disabled:R,min:10}),jsxRuntimeExports.jsx(IntegerInput,{label:"Screen Height",value:O.h_screen,onChange:I=>P("h_screen",I),disabled:R,min:10})]})]})]})}const buttonVariants=cva("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-play text-play-foreground hover:bg-play/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Button=reactExports.forwardRef(({className:_,variant:T,size:R,asChild:P=!1,...O},I)=>{const z=P?Slot$1:"button";return jsxRuntimeExports.jsx(z,{className:cn(buttonVariants({variant:T,size:R,className:_})),ref:I,...O})});Button.displayName="Button";const SECTIONS=[{key:"initial",label:"Initial Setup",fields:["N_init","location"]},{key:"geometry",label:"Geometry",fields:["R_hard","R_hard_div","R_soft"]},{key:"appearance",label:"Appearance",fields:["color"]},{key:"stiffness",label:"Stiffness",fields:["k_apical_junction","k_cytos","stiffness_apical_apical","stiffness_apical_apical_div","stiffness_nuclei_apical","stiffness_nuclei_basal","stiffness_repulsion","stiffness_straightness"]},{key:"division",label:"Division & Lifecycle",fields:["lifespan_start","lifespan_end","dur_G2","dur_mitosis","INM"]},{key:"cellTypeProps",label:"Cell-Type Properties",fields:["diffusion","basal_damping_ratio","max_basal_junction_dist","cytos_init","basal_membrane_repulsion","apical_junction_init","max_cytoskeleton_length"]},{key:"events",label:"EMT Events (time ranges)",fields:["hetero","events"]},{key:"running",label:"Running Behavior",fields:["run","running_speed","running_mode"]}];function CellTypeRow({label:_,tooltip:T,children:R}){return jsxRuntimeExports.jsxs("tr",{className:"border-b border-border/50 hover:bg-muted/30",children:[jsxRuntimeExports.jsx("td",{className:"py-1.5 px-2 text-xs font-medium w-36",title:T,children:_}),R]})}function NumberCell({value:_,onChange:T,disabled:R,step:P,min:O,max:I}){const z=F=>{const G=parseFloat(F.target.value);if(!isNaN(G)){let V=G;O!==void 0&&(V=Math.max(O,V)),I!==void 0&&(V=Math.min(I,V)),T(V)}};return jsxRuntimeExports.jsx("td",{className:"py-1 px-1",children:jsxRuntimeExports.jsx(Input,{type:"number",value:_,onChange:z,disabled:R,step:P,min:O,max:I,className:"h-6 text-xs w-20"})})}function StringCell({value:_,onChange:T,disabled:R}){const P=O=>{T(O.target.value)};return jsxRuntimeExports.jsx("td",{className:"py-1 px-1",children:jsxRuntimeExports.jsx(Input,{type:"text",value:_,onChange:P,disabled:R,className:"h-6 text-xs w-24"})})}function SplitRangeCell({valueStart:_,valueEnd:T,onChangeStart:R,onChangeEnd:P,disabled:O,label:I}){const z=isFinite(_),F=isFinite(T),G=J=>{I==="start"?R(J?0:1/0):P(J?1:1/0)},V=J=>{const ee=parseFloat(J.target.value);J.target.value===""?I==="start"?R(1/0):P(1/0):isNaN(ee)||(I==="start"?R(ee):P(ee))},Z=I==="start"?z:F,Y=I==="start"?_:T,Q=isFinite(Y)?Y:"";return jsxRuntimeExports.jsx("td",{className:"py-1 px-1",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Checkbox,{checked:Z,onCheckedChange:G,disabled:O,title:"Active (enabled when checked)"}),Z?jsxRuntimeExports.jsx(Input,{type:"number",value:Q,onChange:V,disabled:O,className:"h-6 text-xs w-20"}):jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground w-20",children:"-"})]})})}function BoolCell({value:_,onChange:T,disabled:R}){return jsxRuntimeExports.jsx("td",{className:"py-1 px-1",children:jsxRuntimeExports.jsx(Checkbox,{checked:_,onCheckedChange:P=>T(P===!0),disabled:R})})}function rgbToHex$1(_){const T=_.r>1?_.r:Math.round(_.r*255),R=_.g>1?_.g:Math.round(_.g*255),P=_.b>1?_.b:Math.round(_.b*255);return`#${T.toString(16).padStart(2,"0")}${R.toString(16).padStart(2,"0")}${P.toString(16).padStart(2,"0")}`}function hexToRgb(_){const T=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(_);return T?{r:parseInt(T[1],16),g:parseInt(T[2],16),b:parseInt(T[3],16)}:{r:0,g:0,b:0}}function ColorCell({value:_,onChange:T,disabled:R}){const P=rgbToHex$1(_),O=I=>{const z=hexToRgb(I.target.value);T(z)};return jsxRuntimeExports.jsx("td",{className:"py-1 px-1",children:jsxRuntimeExports.jsx(Input,{type:"color",value:P,onChange:O,disabled:R,className:"h-6 w-10 p-0.5 cursor-pointer"})})}function SectionHeader({section:_,cellTypeKeys:T,disabled:R,params:P,onChange:O}){const[I,z]=reactExports.useState({}),F=reactExports.useCallback(Y=>{if(Y===1/0)return"Infinity";if(Y===-1/0)return"-Infinity";if(typeof Y=="object"&&Y!==null){if(Array.isArray(Y))return Y.map(F);const Q={};for(const[J,ee]of Object.entries(Y))Q[J]=F(ee);return Q}return Y},[]),G=reactExports.useCallback(Y=>{if(Y==="Infinity")return 1/0;if(Y==="-Infinity")return-1/0;if(typeof Y=="object"&&Y!==null){if(Array.isArray(Y))return Y.map(G);const Q={};for(const[J,ee]of Object.entries(Y))Q[J]=G(ee);return Q}return Y},[]),V=reactExports.useCallback(async Y=>{const Q=P.cell_types[Y],J={};for(const ne of _.fields)J[ne]=F(cloneDeep(Q[ne]));const ee=JSON.stringify({section:_.key,cellType:Y,data:J},null,2);await navigator.clipboard.writeText(ee)},[P.cell_types,_,F]),Z=reactExports.useCallback(async Y=>{try{const Q=await navigator.clipboard.readText(),J=JSON.parse(Q);if(J.section!==_.key||!J.data){z(se=>({...se,[Y]:"error"})),setTimeout(()=>z(se=>({...se,[Y]:"idle"})),2e3);return}const ee=cloneDeep(P),ne=ee.cell_types[Y];for(const se of _.fields)se in J.data&&(ne[se]=G(cloneDeep(J.data[se])));O(ee),z(se=>({...se,[Y]:"success"})),setTimeout(()=>z(se=>({...se,[Y]:"idle"})),2e3)}catch{z(Q=>({...Q,[Y]:"error"})),setTimeout(()=>z(Q=>({...Q,[Y]:"idle"})),2e3)}},[P,_,O,G]);return jsxRuntimeExports.jsxs("tr",{className:"bg-muted/50",children:[jsxRuntimeExports.jsx("td",{className:"py-1 px-2",children:jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold text-muted-foreground",children:_.label})}),T.map(Y=>jsxRuntimeExports.jsx("td",{className:"py-1 px-1",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-0.5",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:()=>V(Y),disabled:R,className:"h-5 w-5",title:`Copy ${_.label} from ${Y}`,children:jsxRuntimeExports.jsx(Copy,{className:"h-3 w-3"})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:()=>Z(Y),disabled:R,className:`h-5 w-5 ${I[Y]==="success"?"text-green-500":I[Y]==="error"?"text-red-500":""}`,title:`Paste ${_.label} to ${Y}`,children:jsxRuntimeExports.jsx(ClipboardPaste,{className:"h-3 w-3"})})]})},Y))]})}function EHTCellTypesTab({params:_,onChange:T,disabled:R}){const[P,O]=reactExports.useState(""),I=Object.keys(_.cell_types),z=(ee,ne,se)=>{const oe=cloneDeep(_);oe.cell_types[ee][ne]=se,T(oe)},F=(ee,ne,se)=>{const oe=cloneDeep(_);oe.cell_types[ee].events[`${ne}_start`]=se,T(oe)},G=(ee,ne,se)=>{const oe=cloneDeep(_);oe.cell_types[ee].events[`${ne}_end`]=se,T(oe)},V=reactExports.useCallback(ee=>{const ne=cloneDeep(_);let se=1,oe=`type_${se}`;for(;ne.cell_types[oe];)se++,oe=`type_${se}`;if(ee&&_.cell_types[ee]){const ae=_.cell_types[ee],ce={...cloneDeep(ae),N_init:0,color:{r:Math.floor(Math.random()*200)+50,g:Math.floor(Math.random()*200)+50,b:Math.floor(Math.random()*200)+50}};ne.cell_types[oe]=ce}else{const ae={...cloneDeep(DEFAULT_CONTROL_CELL),N_init:0,location:"",color:{r:Math.floor(Math.random()*200)+50,g:Math.floor(Math.random()*200)+50,b:Math.floor(Math.random()*200)+50}};ne.cell_types[oe]=ae}T(ne)},[_,T]),Z=ee=>{if(I.length<=1)return;const ne=cloneDeep(_);delete ne.cell_types[ee],T(ne)},Y=(ee,ne)=>{if(!ne.trim()||ne===ee||_.cell_types[ne])return;const se=cloneDeep(_);se.cell_types[ne]=se.cell_types[ee],delete se.cell_types[ee],T(se)},Q=ee=>_.cell_types[ee],J=reactExports.useCallback(()=>{V(P==="__new__"?void 0:P),O("__new__")},[V,P]);return jsxRuntimeExports.jsxs("div",{className:"overflow-x-auto overflow-y-auto max-h-[600px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-end items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground",children:"Copy from:"}),jsxRuntimeExports.jsxs(Select,{value:P||"__new__",onValueChange:O,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"h-7 w-28 text-xs",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"(new)"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"__new__",children:"(new)"}),I.map(ee=>jsxRuntimeExports.jsx(SelectItem,{value:ee,children:ee},ee))]})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:J,disabled:R,className:"gap-1",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4"}),"Add Cell Type"]})]}),jsxRuntimeExports.jsxs("table",{className:"min-w-full text-xs",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"border-b-2 border-border",children:[jsxRuntimeExports.jsx("th",{className:"py-2 px-2 text-left font-semibold",children:"Parameter"}),I.map(ee=>jsxRuntimeExports.jsx("th",{className:"py-2 px-1 text-left",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Input,{defaultValue:ee,onBlur:ne=>Y(ee,ne.target.value),onKeyDown:ne=>{ne.key==="Enter"&&(Y(ee,ne.currentTarget.value),ne.currentTarget.blur())},disabled:R,className:"h-6 text-xs font-semibold w-24"}),I.length>1&&jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:()=>Z(ee),disabled:R,className:"h-6 w-6 text-muted-foreground hover:text-destructive",children:jsxRuntimeExports.jsx(Trash2,{className:"h-3 w-3"})})]})},ee))]})}),jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[0],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"N Init",tooltip:"Initial number of cells of this type",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).N_init,onChange:ne=>z(ee,"N_init",Math.round(ne)),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Location",tooltip:'Predefined location along basal membrane: "top", "bottom", "rest" or numeric value in [-1, 1]',children:I.map(ee=>jsxRuntimeExports.jsx(StringCell,{value:Q(ee).location,onChange:ne=>z(ee,"location",ne),disabled:R},ee))}),jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[1],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"R Hard",tooltip:"Hard sphere radius",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).R_hard,onChange:ne=>z(ee,"R_hard",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"R Hard (div)",tooltip:"Hard sphere radius during division",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).R_hard_div,onChange:ne=>z(ee,"R_hard_div",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"R Soft",tooltip:"Soft interaction radius",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).R_soft,onChange:ne=>z(ee,"R_soft",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[2],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Color",children:I.map(ee=>jsxRuntimeExports.jsx(ColorCell,{value:Q(ee).color,onChange:ne=>z(ee,"color",ne),disabled:R},ee))}),jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[3],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"k Apical Junction",tooltip:"Apical junction spring constant",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).k_apical_junction,onChange:ne=>z(ee,"k_apical_junction",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"k Cytos",tooltip:"Cytoskeleton relaxation rate",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).k_cytos,onChange:ne=>z(ee,"k_cytos",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Stiff Apical-Apical",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).stiffness_apical_apical,onChange:ne=>z(ee,"stiffness_apical_apical",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Stiff A-A (div)",tooltip:"Apical-Apical stiffness during division",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).stiffness_apical_apical_div,onChange:ne=>z(ee,"stiffness_apical_apical_div",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Stiff Nuclei-Apical",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).stiffness_nuclei_apical,onChange:ne=>z(ee,"stiffness_nuclei_apical",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Stiff Nuclei-Basal",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).stiffness_nuclei_basal,onChange:ne=>z(ee,"stiffness_nuclei_basal",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Stiff Repulsion",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).stiffness_repulsion,onChange:ne=>z(ee,"stiffness_repulsion",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Stiff Straightness",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).stiffness_straightness,onChange:ne=>z(ee,"stiffness_straightness",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[4],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Lifespan (start)",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:Q(ee).lifespan_start,valueEnd:Q(ee).lifespan_end,onChangeStart:ne=>z(ee,"lifespan_start",ne),onChangeEnd:ne=>z(ee,"lifespan_end",ne),disabled:R,label:"start"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Lifespan (end)",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:Q(ee).lifespan_start,valueEnd:Q(ee).lifespan_end,onChangeStart:ne=>z(ee,"lifespan_start",ne),onChangeEnd:ne=>z(ee,"lifespan_end",ne),disabled:R,label:"end"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"G2 Duration",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).dur_G2,onChange:ne=>z(ee,"dur_G2",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Mitosis Duration",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).dur_mitosis,onChange:ne=>z(ee,"dur_mitosis",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"INM",tooltip:"Interkinetic nuclear migration probability",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).INM,onChange:ne=>z(ee,"INM",ne),disabled:R,min:0,max:1},ee))}),jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[5],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Diffusion",tooltip:"Diffusion coefficient",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).diffusion,onChange:ne=>z(ee,"diffusion",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Basal Damping",tooltip:"Basal damping ratio",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).basal_damping_ratio,onChange:ne=>z(ee,"basal_damping_ratio",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Max Basal Junc Dist",tooltip:"Maximum basal junction distance",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).max_basal_junction_dist,onChange:ne=>z(ee,"max_basal_junction_dist",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Cytos Init",tooltip:"Initial cytoskeleton length",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).cytos_init,onChange:ne=>z(ee,"cytos_init",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Basal Repulsion",tooltip:"Basal membrane repulsion strength",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).basal_membrane_repulsion,onChange:ne=>z(ee,"basal_membrane_repulsion",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Apical Junc Init",tooltip:"Initial apical junction distance",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).apical_junction_init,onChange:ne=>z(ee,"apical_junction_init",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Max Cytos Length",tooltip:"Maximum cytoskeleton length",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).max_cytoskeleton_length,onChange:ne=>z(ee,"max_cytoskeleton_length",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[6],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Heterogeneous",children:I.map(ee=>jsxRuntimeExports.jsx(BoolCell,{value:Q(ee).hetero,onChange:ne=>z(ee,"hetero",ne),disabled:R},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time A start",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:Q(ee).events.time_A_start,valueEnd:Q(ee).events.time_A_end,onChangeStart:ne=>F(ee,"time_A",ne),onChangeEnd:ne=>G(ee,"time_A",ne),disabled:R,label:"start"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time A end",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:Q(ee).events.time_A_start,valueEnd:Q(ee).events.time_A_end,onChangeStart:ne=>F(ee,"time_A",ne),onChangeEnd:ne=>G(ee,"time_A",ne),disabled:R,label:"end"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time B start",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:Q(ee).events.time_B_start,valueEnd:Q(ee).events.time_B_end,onChangeStart:ne=>F(ee,"time_B",ne),onChangeEnd:ne=>G(ee,"time_B",ne),disabled:R,label:"start"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time B end",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:Q(ee).events.time_B_start,valueEnd:Q(ee).events.time_B_end,onChangeStart:ne=>F(ee,"time_B",ne),onChangeEnd:ne=>G(ee,"time_B",ne),disabled:R,label:"end"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time S start",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:Q(ee).events.time_S_start,valueEnd:Q(ee).events.time_S_end,onChangeStart:ne=>F(ee,"time_S",ne),onChangeEnd:ne=>G(ee,"time_S",ne),disabled:R,label:"start"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time S end",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:Q(ee).events.time_S_start,valueEnd:Q(ee).events.time_S_end,onChangeStart:ne=>F(ee,"time_S",ne),onChangeEnd:ne=>G(ee,"time_S",ne),disabled:R,label:"end"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time P start",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:Q(ee).events.time_P_start,valueEnd:Q(ee).events.time_P_end,onChangeStart:ne=>F(ee,"time_P",ne),onChangeEnd:ne=>G(ee,"time_P",ne),disabled:R,label:"start"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time P end",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:Q(ee).events.time_P_start,valueEnd:Q(ee).events.time_P_end,onChangeStart:ne=>F(ee,"time_P",ne),onChangeEnd:ne=>G(ee,"time_P",ne),disabled:R,label:"end"},ee))}),jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[7],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Run Probability",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).run,onChange:ne=>z(ee,"run",ne),disabled:R,min:0,max:1},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Running Speed",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).running_speed,onChange:ne=>z(ee,"running_speed",ne),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Running Mode",tooltip:"0: none, 1: after extrusion, 2: retain length, 3: immediate",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:Q(ee).running_mode,onChange:ne=>z(ee,"running_mode",Math.round(ne)),disabled:R,min:0,max:3},ee))})]})]})]})}function EHTSimulationTab({params:_,onChange:T,disabled:R}){const P=(I,z)=>{const F=cloneDeep(_);F.general[I]=z,T(F)},O=_.general;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Time Stepping"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(NumberInput,{label:"Time Step (dt)",value:O.dt,onChange:I=>P("dt",I),disabled:R,step:.01,min:.001}),jsxRuntimeExports.jsx(NumberInput,{label:"Algo Time Step",value:O.alg_dt,onChange:I=>P("alg_dt",I),disabled:R,step:.001,min:1e-4}),jsxRuntimeExports.jsx(IntegerInput,{label:"Substeps",value:O.n_substeps,onChange:I=>P("n_substeps",I),disabled:R,min:1})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-muted/50 rounded-md text-xs text-muted-foreground",children:[jsxRuntimeExports.jsx("p",{className:"font-medium mb-1",children:"Notes:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-0.5",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"dt"}),": Output time step (visualization/export interval)"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"alg_dt"}),": Internal algorithm time step for physics"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"n_substeps"}),": Number of physics steps per output step"]}),jsxRuntimeExports.jsx("li",{children:"Effective physics dt = alg_dt, run n_substeps times per dt"})]})]})]})}function EHTWarningBanner({params:_,onChange:T,disabled:R}){const P=_.general,{totalNInit:O,avgMaxBasalJunctionDist:I}=reactExports.useMemo(()=>{const G=Object.values(_.cell_types),V=G.reduce((Q,J)=>Q+J.N_init,0),Z=G.reduce((Q,J)=>Q+J.N_init*J.max_basal_junction_dist,0),Y=V>0?Z/V:G.length>0?G.reduce((Q,J)=>Q+J.max_basal_junction_dist,0)/G.length:4;return{totalNInit:V,avgMaxBasalJunctionDist:Y}},[_.cell_types]),z=reactExports.useMemo(()=>{if(P.perimeter>0&&P.full_circle){const G=O*I;if(G<=P.perimeter)return{message:`Perimeter constraint violated: total cells (${O})  avg max_basal_junction_dist (${I.toFixed(1)}) = ${G.toFixed(1)}  perimeter (${P.perimeter.toFixed(1)}). Cells may not cover the membrane.`,maxCoverage:G}}return null},[O,P.perimeter,P.full_circle,I]),F=reactExports.useCallback(()=>{if(!T||!z)return;const G=P.perimeter+5,V=z.maxCoverage;if(V<=0)return;const Z=G/V,Y=cloneDeep(_);for(const Q of Object.keys(Y.cell_types))Y.cell_types[Q].max_basal_junction_dist*=Z;T(Y)},[T,z,_,P.perimeter]);return z?jsxRuntimeExports.jsxs("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-md text-xs text-yellow-600 dark:text-yellow-400 flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"flex-1",children:z.message}),T&&jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:F,disabled:R,className:"shrink-0 text-xs h-6 px-2",children:"Fix"})]}):null}const ehtUI={WarningBanner:EHTWarningBanner,ParametersTab:EHTParametersTab,CellTypesTab:EHTCellTypesTab,SimulationTab:EHTSimulationTab};function ramanujanPerimeter(_,T){if(_===0&&T===0)return 0;if(_===T)return 2*Math.PI*_;const R=_+T,P=_-T,O=P*P/(R*R);return Math.PI*R*(1+3*O/(10+Math.sqrt(4-3*O)))}function computeEllipseFromPerimeter(_,T){if(T===0)return{a:1/0,b:1/0,curvature_1:0,curvature_2:0};const R=Math.sign(T),P=Math.abs(T),O=1,I=P,z=ramanujanPerimeter(O,I),F=_/z,G=F*O,V=F*I,Z=G>0?R/G:0,Y=V>0?R/V:0;return{a:G,b:V,curvature_1:Z,curvature_2:Y}}function createCell(_,T,R,P,O,I,z){const{basalPoint:F,apicalPoint:G,nucleusPosition:V}=P,Z=_.general.h_init,Y=R.random(O.lifespan_start,O.lifespan_end),Q=T.cells.length>0?Math.max(...T.cells.map(J=>J.id))+1:0;if(z===void 0){const J=T.t-R.random(0,Y);let ee=R.random(O.events.time_A_start,O.events.time_A_end),ne=R.random(O.events.time_B_start,O.events.time_B_end),se=R.random(O.events.time_S_start,O.events.time_S_end);const oe=R.random()<=O.run?ne:1/0;return O.hetero&&(R.random()>.7&&(ee=1/0),R.random()>.7&&(ne=1/0),R.random()>.7&&(se=1/0)),{id:Q,typeIndex:I,pos:V.toObject(),A:G.toObject(),B:F.toObject(),R_soft:O.R_soft,R_hard:O.R_hard,eta_A:Z/2,eta_B:Z/2,has_A:!0,has_B:!0,phase:CellPhase.G1,birth_time:J,division_time:J+Y,is_running:!1,running_mode:O.running_mode,has_inm:R.random()<=O.INM,time_A:ee,time_B:ne,time_S:se,time_P:oe,stiffness_apical_apical:O.stiffness_apical_apical,stiffness_straightness:O.stiffness_straightness,stiffness_nuclei_apical:O.stiffness_nuclei_apical,stiffness_nuclei_basal:O.stiffness_nuclei_basal}}else return{id:Q,typeIndex:I,pos:V.toObject(),A:G.toObject(),B:F.toObject(),R_soft:O.R_soft,R_hard:O.R_hard,eta_A:z.eta_A,eta_B:z.eta_B,has_A:z.has_A,has_B:z.has_B,phase:CellPhase.G1,birth_time:T.t,division_time:T.t+Y,is_running:z.is_running,running_mode:z.running_mode,has_inm:z.has_inm,time_A:z.time_A,time_B:z.time_B,time_S:z.time_S,time_P:z.time_P,stiffness_apical_apical:O.stiffness_apical_apical,stiffness_straightness:z.stiffness_straightness,stiffness_nuclei_apical:z.stiffness_nuclei_apical,stiffness_nuclei_basal:z.stiffness_nuclei_basal}}function getCellType(_,T){return _.cell_types[T.typeIndex]||_.cell_types.control}function updateCellPhase(_,T,R){const P=_.division_time,O=P-T.dur_G2-T.dur_mitosis,I=P-T.dur_mitosis;R<O?_.phase=CellPhase.G1:R<I?_.phase=CellPhase.G2:R<P?_.phase=CellPhase.Mitosis:_.phase=CellPhase.Division}function initializeEHTSimulation(_,T,R){const P=_.general,O=computeEllipseFromPerimeter(P.perimeter,P.aspect_ratio);T.geometry={curvature_1:O.curvature_1,curvature_2:O.curvature_2};const{curvature_1:I,curvature_2:z}=T.geometry;T.basalGeometry=createBasalGeometry(I,z,360);const F=Object.entries(_.cell_types),G=F.reduce((ae,[,ce])=>ae+ce.N_init,0),V=[];for(let ae=0;ae<G;ae++)V.push([-1+2*ae/G,""]);F.sort((ae,ce)=>{const le=ae[1].location!==""?1:0;return(ce[1].location!==""?1:0)-le});for(const[ae,ce]of F)if(ce.location!==""){let le;ce.location==="top"?le=1:ce.location==="bottom"?le=0:(le=parseFloat(ce.location),(isNaN(le)||le<-1||le>1)&&(le=0)),V.sort((me,he)=>Math.min(Math.abs(me[0]-le),Math.abs(me[0]+2-le))-Math.min(Math.abs(he[0]-le),Math.abs(he[0]+2-le)));let pe=0;for(let me=0;me<V.length&&pe<ce.N_init;me++)V[me][1]===""&&(V[me]=[V[me][0],ae],pe++)}V.sort((ae,ce)=>ae[0]-ce[0]);let Z=0;for(let ae=0;ae<V.length;ae++)if(V[ae][1]==="")for(;Z<F.length;){const[ce,le]=F[Z];if(V.filter(me=>me[1]===ce).length<le.N_init){V[ae]=[V[ae][0],ce];break}else Z++}V.sort((ae,ce)=>ae[0]-ce[0]);const Y=I===0&&z===0,Q=Y?P.w_init*4:ramanujanPerimeter(Math.abs(1/I),Math.abs(1/z)),J=P.full_circle?Q:P.w_init,ee=P.h_init,ne=P.aspect_ratio<0?-1:1,se=[],oe=[];for(let ae=0;ae<G;ae++){const ce=Y?V[ae][0]*(J/2):V[ae][0]*(J/2)+Q/4,le=T.basalGeometry.getPointAtArcLength(ce),pe=T.basalGeometry.getNormal(le).scale(ne),me=le.add(pe.scale(ee)),he=R.random(ee/3,2*ee/3),fe=le.add(pe.scale(he));se.push({basalPoint:le,apicalPoint:me,nucleusPosition:fe}),oe.push(V[ae][1])}T.cells=[];for(let ae=0;ae<se.length;ae++){const ce=oe[ae],le=_.cell_types[ce];if(!le){console.warn("No cell type found for key",ce);continue}const pe=createCell(_,T,R,se[ae],le,ce);T.cells.push(pe)}for(let ae=0;ae<T.cells.length-1;ae++){const ce=_.cell_types[T.cells[ae].typeIndex],le=_.cell_types[T.cells[ae+1].typeIndex],pe=(ce.apical_junction_init+le.apical_junction_init)/2;T.ap_links.push({l:ae,r:ae+1,rl:pe}),T.ba_links.push({l:ae,r:ae+1})}if(P.full_circle&&T.cells.length>2){const ae=T.cells.length-1,ce=_.cell_types[T.cells[ae].typeIndex],le=_.cell_types[T.cells[0].typeIndex],pe=(ce.apical_junction_init+le.apical_junction_init)/2;T.ap_links.push({l:ae,r:0,rl:pe}),T.ba_links.push({l:ae,r:0})}}function zeroForces(){return{f:Vector2.zero(),fA:Vector2.zero(),fB:Vector2.zero()}}function calcRepulsionForces(_,T,R){const P=_.cells,O=P.length;for(let I=0;I<O;I++){const z=P[I],F=getCellType(T,z),G=Vector2.from(z.pos);for(let V=0;V<I;V++){const Z=P[V];if(Math.abs(z.pos.x-Z.pos.x)>=2)continue;const Y=getCellType(T,Z),J=Vector2.from(Z.pos).sub(G),ee=J.mag(),ne=z.R_soft+Z.R_soft,se=F.stiffness_repulsion+Y.stiffness_repulsion;if(ee<ne&&ee>ne/20){const oe=-se*(ne-ee)/(ee*ne*ne),ae=J.scale(oe);R[I].f=R[I].f.add(ae),R[V].f=R[V].f.sub(ae)}}}}function calcApicalNucleiForces(_,T,R){const P=_.cells,O=T.general.hard_sphere_nuclei;for(let I=0;I<P.length;I++){const z=P[I],F=Vector2.from(z.pos),G=Vector2.from(z.A),V=F.sub(G),Z=V.mag();if(Z>0){const Y=O?z.R_hard:z.R_soft,Q=z.eta_A+Y,ee=2*z.stiffness_nuclei_apical*(Z-Q)/(Z*Q*Q),ne=V.scale(ee);R[I].f=R[I].f.sub(ne),R[I].fA=R[I].fA.add(ne)}}}function calcBasalNucleiForces(_,T,R){const P=_.cells,O=T.general.hard_sphere_nuclei;for(let I=0;I<P.length;I++){const z=P[I],F=Vector2.from(z.pos),G=Vector2.from(z.B),V=F.sub(G),Z=V.mag();if(Z>0){const Y=O?z.R_hard:z.R_soft,Q=z.eta_B+Y,ee=2*z.stiffness_nuclei_basal*(Z-Q)/(Z*Q*Q),ne=V.scale(ee);R[I].f=R[I].f.sub(ne),R[I].fB=R[I].fB.add(ne)}}}function calcStraightnessForces(_,T,R){const P=_.cells;for(let O=0;O<P.length;O++){const I=P[O],z=Vector2.from(I.pos),F=Vector2.from(I.A),G=Vector2.from(I.B),V=z.sub(F),Z=z.sub(G),Y=V.mag(),Q=Z.mag(),J=V.dot(Z);if(J!==0&&Y>0&&Q>0){const ee=I.stiffness_straightness/(Y*Q),ne=Z.scale(-1).add(V.scale(J/(Y*Y))).scale(ee),se=V.scale(-1).add(Z.scale(J/(Q*Q))).scale(ee);R[O].fA=R[O].fA.sub(ne),R[O].f=R[O].f.add(ne),R[O].f=R[O].f.add(se),R[O].fB=R[O].fB.sub(se)}}}function calcApicalJunctionForces(_,T,R){const P=_.cells,O=_.ap_links;for(const I of O){const z=P[I.l],F=P[I.r],G=Vector2.from(z.A),V=Vector2.from(F.A),Z=G.sub(V),Y=Z.mag();if(Y>1e-6){const Q=.5*(z.stiffness_apical_apical+F.stiffness_apical_apical),J=Z.scale(.25*Q*(Y-I.rl)/Y);R[I.l].fA=R[I.l].fA.sub(J),R[I.r].fA=R[I.r].fA.add(J)}}}function calcAllForces(_,T){const R=_.cells.map(()=>zeroForces());return calcRepulsionForces(_,T,R),calcApicalNucleiForces(_,T,R),calcBasalNucleiForces(_,T,R),calcStraightnessForces(_,T,R),calcApicalJunctionForces(_,T,R),R}function projectHardSphereConstraints(_,T){const R=_.cells,P=R.length;for(let O=0;O<P;O++){const I=R[O];for(let z=0;z<O;z++){const F=R[z];if(Math.abs(I.pos.x-F.pos.x)>=1.5)continue;const G=I.R_hard+F.R_hard,V=Vector2.from(I.pos),Z=Vector2.from(F.pos),Y=V.dist(Z)-G;if(Y<0&&Y!==-G){const J=V.sub(Z).scale(.5*Y/(Y+G));I.pos.x-=J.x,I.pos.y-=J.y,F.pos.x+=J.x,F.pos.y+=J.y}}}}function projectBasalOrderingConstraints(_,T){const R=_.cells,P=_.ba_links;for(const O of P){const I=R[O.l],z=R[O.r];if(!I.has_B||!z.has_B)continue;const F=Vector2.from(I.B),G=Vector2.from(z.B),V=F.add(G).scale(.5),Z=_.basalGeometry.projectPoint(V),Y=_.basalGeometry.getNormal(Z),Q=new Vector2(Y.y,-Y.x),J=F.sub(V).dot(Q),ee=G.sub(V).dot(Q);if(J>=ee){const se=(J-ee)/2+1e-6;I.B.x-=se*Q.x,I.B.y-=se*Q.y,z.B.x+=se*Q.x,z.B.y+=se*Q.y}}}function projectMaxBasalDistanceConstraints(_,T){const R=_.cells,P=_.ba_links;for(const O of P){const I=R[O.l],z=R[O.r],F=getCellType(T,I),G=getCellType(T,z),V=(F.max_basal_junction_dist+G.max_basal_junction_dist)/2,Z=Vector2.from(I.B),Y=Vector2.from(z.B),Q=Z.dist(Y);if(Q>V){const J=Q-V,ne=Y.sub(Z).normalize().scale(J/2);I.B.x+=ne.x,I.B.y+=ne.y,z.B.x-=ne.x,z.B.y-=ne.y}}}function projectBasalCurveConstraints(_,T){const R=_.cells;for(const P of R){if(!P.has_B)continue;const O=Vector2.from(P.B),I=_.basalGeometry.projectPoint(O);P.B.x=I.x,P.B.y=I.y}}function applyAllConstraints(_,T){projectHardSphereConstraints(_),projectBasalOrderingConstraints(_),projectMaxBasalDistanceConstraints(_,T),projectBasalCurveConstraints(_)}function processLoseApicalAdhesion(_,T){const R=_.cells[T];R.has_A=!1,R.stiffness_nuclei_apical*=.1;const P=[];let O={l:0,r:0,rl:0};for(let I=0;I<_.ap_links.length;I++){const z=_.ap_links[I];z.l===T&&(P.push(I),O.r=z.r),z.r===T&&(P.push(I),O.l=z.l)}if(P.length===1)_.ap_links.splice(P[0],1);else if(P.length===2){P.sort((F,G)=>G-F),_.ap_links.splice(P[0],1),_.ap_links.splice(P[1],1);const I=_.cells[O.l],z=_.cells[O.r];O.rl=Vector2.from(I.A).dist(Vector2.from(z.A)),_.ap_links.push(O)}}function processLoseBasalAdhesion(_,T){const R=_.cells[T];R.has_B=!1,R.stiffness_nuclei_basal*=.1;const P=[];let O={l:0,r:0};for(let I=0;I<_.ba_links.length;I++){const z=_.ba_links[I];z.l===T&&(P.push(I),O.r=z.r),z.r===T&&(P.push(I),O.l=z.l)}P.length===1?_.ba_links.splice(P[0],1):P.length===2&&(P.sort((I,z)=>z-I),_.ba_links.splice(P[0],1),_.ba_links.splice(P[1],1),_.ba_links.push(O))}function processLoseStraightness(_,T){const R=_.cells[T];R.stiffness_straightness=1}function processStartRunning(_,T){const R=_.cells[T];R.running_mode=3}function updateRunningState(_){_.is_running=!_.has_B&&_.B.y>-2&&(_.running_mode>=3||_.B.y<0&&_.running_mode>=1)}function processEMTEvents(_,T,R){const P=_.t;for(let O=0;O<_.cells.length;O++){const I=_.cells[O];P<=I.time_A&&P+R>I.time_A&&processLoseApicalAdhesion(_,O),P<=I.time_B&&P+R>I.time_B&&(console.log("Event B"),processLoseBasalAdhesion(_,O)),P<=I.time_S&&P+R>I.time_S&&processLoseStraightness(_,O),(I.time_P>I.time_B&&P<=I.time_P&&P+R>I.time_P||I.time_P<=I.time_B&&P<=I.time_B&&P+R>I.time_B)&&processStartRunning(_,O),updateRunningState(I)}}function processCellDivisions(_,T,R){let P=0;for(let O=0;O<_.cells.length;O++){const I=_.cells[O];if(I.phase!==CellPhase.Division)continue;const z=getCellType(T,I),F={basalPoint:Vector2.from(I.B),apicalPoint:Vector2.from(I.A),nucleusPosition:Vector2.from(I.pos)};if(I.typeIndex==="emt"){const G=createCell(T,_,R,F,z,I.typeIndex,I);G.id=I.id,_.cells[O]=G}else if(R.random()<T.general.p_div_out){const V=createCell(T,_,R,F,z,I.typeIndex,I);V.id=I.id,_.cells[O]=V}else{P++;const V=createCell(T,_,R,F,z,I.typeIndex,I);V.id=I.id,_.cells[O]=V;const Z=createCell(T,_,R,F,z,I.typeIndex,V),Y=.005*V.R_soft;V.pos.x-=Y,Z.pos.x+=Y,V.A.x-=Y,Z.A.x+=Y,V.B.x-=Y,Z.B.x+=Y;const Q=_.cells.length;_.cells.push(Z),updateApicalLinksAfterDivision(_,T,O,Q),updateBasalLinksAfterDivision(_,T,O,Q)}}return P}function updateApicalLinksAfterDivision(_,T,R,P){for(const I of _.ap_links)I.l===R&&(I.l=P);const O=getCellType(T,_.cells[R]);_.ap_links.push({l:R,r:P,rl:O.apical_junction_init})}function updateBasalLinksAfterDivision(_,T,R,P){for(const O of _.ba_links)O.l===R&&(O.l=P);_.ba_links.push({l:R,r:P})}function updateCytoskeleton(_,T,R){for(const P of _.cells){const O=getCellType(T,P),I=Vector2.from(P.pos),z=Vector2.from(P.A),F=Vector2.from(P.B),G=I.dist(z),V=I.dist(F);let Z=0,Y=0;switch(P.phase+(P.has_inm?0:10)){case CellPhase.G2:case CellPhase.Mitosis:const ee=z.dist(F);Z=0,Y=Math.max(0,ee-2*P.R_soft);break;default:Z=Math.max(0,G-P.R_soft),Y=Math.max(0,V-P.R_soft)}P.phase===CellPhase.G2&&(P.stiffness_apical_apical=O.stiffness_apical_apical_div),P.phase===CellPhase.Mitosis&&(P.R_hard=O.R_hard_div),P.has_A||(Z=0),P.has_B||(Y=0);const J=Math.exp(-R*O.k_cytos);if(P.eta_A=J*(P.eta_A-Z)+Z,P.has_B?P.eta_B=J*(P.eta_B-Y)+Y:P.running_mode>=2&&P.B.y>0?P.eta_B=Vector2.from(P.B).dist(I)-P.R_soft:P.eta_B=J*(P.eta_B-Y)+Y,!P.is_running||P.has_B){const ee=O.max_cytoskeleton_length,ne=P.eta_A+P.eta_B-ee;if(ee>0&&ne>1){const se=P.eta_A+P.eta_B,oe=P.eta_A*ee/se,ae=P.eta_B*ee/se;P.eta_A=J*(P.eta_A-oe)+oe,P.eta_B=J*(P.eta_B-ae)+ae}}}}function updateApicalJunctions(_,T,R){for(const P of _.ap_links){const O=_.cells[P.l],I=_.cells[P.r],z=getCellType(T,O),F=getCellType(T,I),G=.5*z.k_apical_junction+.5*F.k_apical_junction;P.rl=P.rl*Math.exp(-R*G)}}function integrateForces(_,T,R,P,O){const I=T.general.mu,z=Math.sqrt(O);for(let F=0;F<_.cells.length;F++){const G=_.cells[F],V=getCellType(T,G),Z=R[F],Y=V.diffusion;if(G.pos.x+=z*Y*P.gaussian(),G.pos.y+=z*Y*P.gaussian(),G.pos.x+=O*Z.f.x/I,G.pos.y+=O*Z.f.y/I,G.A.x+=O*Z.fA.x/I,G.A.y+=O*Z.fA.y/I,G.is_running){const Q=Vector2.from(G.B),J=Vector2.from(G.pos);if(Q.dist(J)<5){const ee=Q.sub(J).normalize();G.B.x+=O*ee.x*V.running_speed,G.B.y+=O*ee.y*V.running_speed}}else G.B.x+=O*Z.fB.x/I,G.has_B||(G.B.y+=O*Z.fB.y/I)}}function performTimestep(_,T,R){const P=T.general,O=P.dt;for(const F of _.cells){const G=getCellType(T,F);updateCellPhase(F,G,_.t)}const I=processCellDivisions(_,T,R);processEMTEvents(_,T,O),updateCytoskeleton(_,T,O),updateApicalJunctions(_,T,O);const z=O/P.n_substeps;for(let F=0;F<P.n_substeps;F++){_.t+=z;const G=calcAllForces(_,T);integrateForces(_,T,G,R,z),applyAllConstraints(_,T)}return _.step_count++,I}function getCurvatures(_,T){if(_?.geometry)return _.geometry;const R=computeEllipseFromPerimeter(T.general.perimeter,T.general.aspect_ratio);return{curvature_1:R.curvature_1,curvature_2:R.curvature_2}}const LIGHT_THEME$1={apicalPoint:9835540,basalPoint:0,apicalLink:6553600,basalLink:0,cytoskeleton:6566400,membrane:13421772},DARK_THEME$1={apicalPoint:16748431,basalPoint:16777215,apicalLink:16739179,basalLink:15658734,cytoskeleton:13935988,membrane:6710886};function rgbToHex(_,T,R){return _<<16|T<<8|R}function drawBasalCurve(_,T,R,P,O){if(T===0&&R===0){const I=P/2+5;_.moveTo(-I,0),_.lineTo(I,0),_.stroke({color:O.membrane,alpha:.5,width:.05})}else{const I=shapeCenter(T,R),z=T!==0?Math.abs(1/T):20,F=R!==0?Math.abs(1/R):20;_.ellipse(I.x,I.y,z,F),_.stroke({color:O.membrane,alpha:.5,width:.05})}}function drawCells$1(_,T,R,P){for(const O of T.cells){const z=(R.cell_types[O.typeIndex]??R.cell_types.control).color;_.circle(O.pos.x,O.pos.y,O.R_soft),_.fill({color:rgbToHex(z.r,z.g,z.b),alpha:.4}),_.circle(O.pos.x,O.pos.y,O.R_hard),_.fill({color:rgbToHex(z.r,z.g,z.b),alpha:1}),_.circle(O.A.x,O.A.y,.1),_.fill({color:P.apicalPoint,alpha:1}),_.circle(O.B.x,O.B.y,.1),_.fill({color:P.basalPoint,alpha:1}),_.moveTo(O.A.x,O.A.y),_.lineTo(O.pos.x,O.pos.y),_.lineTo(O.B.x,O.B.y),_.stroke({color:P.cytoskeleton,alpha:.5,width:.05})}}function drawApicalLinks(_,T,R){for(const P of T.ap_links){const O=T.cells[P.l],I=T.cells[P.r];O&&I&&(_.moveTo(O.A.x,O.A.y),_.lineTo(I.A.x,I.A.y))}_.stroke({color:R.apicalLink,alpha:1,width:.05})}function drawBasalLinks(_,T,R){for(const P of T.ba_links){const O=T.cells[P.l],I=T.cells[P.r];O&&I&&(_.moveTo(O.B.x,O.B.y),_.lineTo(I.B.x,I.B.y))}_.stroke({color:R.basalLink,alpha:1,width:.05})}const ehtRenderer={getBoundingBox(_,T){const{curvature_1:R,curvature_2:P}=getCurvatures(T,_),O=_.general.h_init,I=_.general.w_init,z=_.general.w_screen,F=_.general.h_screen;let G,V,Z,Y;if(R===0&&P===0){const ae=I/2+2;G=-ae,V=ae,Z=-2,Y=O+2}else{const ae=shapeCenter(R,P),ce=R!==0?Math.abs(1/R):20,le=P!==0?Math.abs(1/P):20;G=ae.x-ce,V=ae.x+ce;const pe=ae.y-le,me=ae.y+le;Z=Math.min(pe,0)-2,Y=Math.max(me,O)+2}const Q=V-G,J=Y-Z,ee=(G+V)/2,ne=(Z+Y)/2,se=Math.max(Q,z),oe=Math.max(J,F);return{minX:ee-se/2,maxX:ee+se/2,minY:ne-oe/2,maxY:ne+oe/2}},render(_,T,R){const P=_.isDark?DARK_THEME$1:LIGHT_THEME$1,O=_.graphics.cells,I=_.graphics.links,{curvature_1:z,curvature_2:F}=getCurvatures(T,R);drawBasalCurve(I,z,F,R.general.w_init,P),drawBasalLinks(I,T,P),drawApicalLinks(I,T,P),drawCells$1(O,T,R,P)},getBackgroundColor(_){return _?1120295:16777215}};function getNeighborIds(_,T,R){const P=[];for(const O of T)O.l===_?P.push(O.r):O.r===_&&P.push(O.l);return P.map(O=>R[O]?.id??O).join(";")}function getSnapshot(_){const T=[];for(let R=0;R<_.cells.length;R++){const P=_.cells[R];T.push({id:P.id,typeIndex:P.typeIndex,t:_.t,step_count:_.step_count,pos_x:P.pos.x,pos_y:P.pos.y,A_x:P.A.x,A_y:P.A.y,B_x:P.B.x,B_y:P.B.y,has_A:P.has_A,has_B:P.has_B,phase:P.phase,age:_.t-P.birth_time,is_running:P.is_running,running_mode:P.running_mode,has_inm:P.has_inm,eta_A:P.eta_A,eta_B:P.eta_B,R_soft:P.R_soft,R_hard:P.R_hard,time_A:P.time_A,time_B:P.time_B,time_S:P.time_S,time_P:P.time_P,apical_neighbors:getNeighborIds(R,_.ap_links,_.cells),basal_neighbors:getNeighborIds(R,_.ba_links,_.cells),curvature_1:_.geometry?.curvature_1??0,curvature_2:_.geometry?.curvature_2??0})}return T}function loadSnapshot(_,T){if(_.length===0)return{cells:[],ap_links:[],ba_links:[],t:0,step_count:0,basalGeometry:createBasalGeometry(0,0,360),rngSeed:String(T.general.random_seed)};const R=_[0],P=Number(R.t),O=Number(R.step_count),I=Number(R.curvature_1),z=Number(R.curvature_2),F={cells:[],ap_links:[],ba_links:[],t:P,step_count:O,geometry:{curvature_1:I,curvature_2:z},basalGeometry:createBasalGeometry(I,z,360),rngSeed:String(T.general.random_seed)},G=new Map;for(let V=0;V<_.length;V++){const Z=_[V],Y=Number(Z.id);G.set(Y,V);const Q={id:Y,typeIndex:String(Z.typeIndex),pos:{x:Number(Z.pos_x),y:Number(Z.pos_y)},A:{x:Number(Z.A_x),y:Number(Z.A_y)},B:{x:Number(Z.B_x),y:Number(Z.B_y)},has_A:!!Z.has_A,has_B:!!Z.has_B,phase:Number(Z.phase),birth_time:P-Number(Z.age),division_time:0,is_running:!!Z.is_running,running_mode:Number(Z.running_mode),has_inm:!!Z.has_inm,eta_A:Number(Z.eta_A),eta_B:Number(Z.eta_B),R_soft:Number(Z.R_soft),R_hard:Number(Z.R_hard),time_A:Number(Z.time_A),time_B:Number(Z.time_B),time_S:Number(Z.time_S),time_P:Number(Z.time_P),stiffness_apical_apical:1,stiffness_straightness:Number(Z.time_S)<P?1:100,stiffness_nuclei_apical:Z.has_A?1:.1,stiffness_nuclei_basal:Z.has_B?1:.1},J=T.cell_types[Q.typeIndex]||T.cell_types.control;Q.stiffness_apical_apical=J.stiffness_apical_apical,Z.has_A?Q.stiffness_nuclei_apical=J.stiffness_nuclei_apical:Q.stiffness_nuclei_apical=J.stiffness_nuclei_apical*.1,Z.has_B?Q.stiffness_nuclei_basal=J.stiffness_nuclei_basal:Q.stiffness_nuclei_basal=J.stiffness_nuclei_basal*.1,Q.time_S&&P>Q.time_S?Q.stiffness_straightness=1:Q.stiffness_straightness=J.stiffness_straightness,Q.division_time=Q.birth_time+(J.lifespan_end+J.lifespan_start)/2,F.cells.push(Q)}for(let V=0;V<_.length;V++){const Z=_[V],Y=V,Q=String(Z.apical_neighbors||"").split(";").filter(ee=>ee!=="");for(const ee of Q){const ne=Number(ee),se=G.get(ne);if(se!==void 0&&se>Y){const oe=F.cells[Y],ae=F.cells[se],ce=Math.sqrt(Math.pow(oe.A.x-ae.A.x,2)+Math.pow(oe.A.y-ae.A.y,2));F.ap_links.push({l:Y,r:se,rl:ce})}}const J=String(Z.basal_neighbors||"").split(";").filter(ee=>ee!=="");for(const ee of J){const ne=Number(ee),se=G.get(ne);se!==void 0&&se>Y&&F.ba_links.push({l:Y,r:se})}}return F}const EHTModel={id:"EHT",name:"Epithelial-to-Hematopoietic Transition",version:"1.0.0",description:"Simulates cell mechanics, division, and EMT events in curved epithelial tissue.",defaultParams:DEFAULT_EHT_PARAMS,validateParams(_){return ehtParamsSchema.parse(_)},init:(_,T)=>{const R=T??String(_.general.random_seed),P=new SeededRandom(R),O=createInitialEHTState(R);return initializeEHTSimulation(_,O,P),O},step:(_,T,R)=>{const P=new SeededRandom(`${_.rngSeed}_step_${_.step_count}`);return performTimestep(_,R,P),_},getSnapshot:_=>getSnapshot(_),loadSnapshot:(_,T)=>loadSnapshot(_,T),computeStats:(_,T)=>computeEHTStatistics(_,T),statistics:generateEHTStatistics(DEFAULT_EHT_PARAMS),generateStatistics:_=>generateEHTStatistics(_),generateBatchParameters:_=>generateEHTBatchParameters(_),batchParameters:EHT_BATCH_PARAMETERS,renderer:ehtRenderer,ui:ehtUI},boundaryTypeSchema=_enum(["periodic","box","none"]),toyGeneralSchema=object$1({N:number$5().int().positive(),soft_radius:number$5().positive(),repulsion_strength:number$5().nonnegative(),running_speed:number$5().nonnegative(),tumble_speed:number$5().nonnegative(),running_duration:number$5().positive(),tumbling_duration:number$5().positive(),tumbling_period:number$5().positive(),boundary_type:boundaryTypeSchema,domain_size:tuple([number$5().positive(),number$5().positive()]),t_end:number$5().positive(),dt:number$5().positive(),random_seed:number$5().int(),mu:number$5().positive(),n_substeps:number$5().int().positive(),N_max:number$5().int().positive(),w_screen:number$5().positive(),h_screen:number$5().positive()}),metadataSchema=object$1({model:literal("Toy"),version:string$1()}),toyParamsSchema=object$1({metadata:metadataSchema,general:toyGeneralSchema}),DEFAULT_TOY_GENERAL={N:20,soft_radius:5,repulsion_strength:10,running_speed:2,tumble_speed:.5,running_duration:5,tumbling_duration:2,tumbling_period:.5,boundary_type:"box",domain_size:[100,100],t_end:60,dt:.1,random_seed:42,mu:1,n_substeps:1,w_screen:100,h_screen:100},DEFAULT_TOY_PARAMS={metadata:{model:"Toy",version:"1.0.0"},general:DEFAULT_TOY_GENERAL};function mean$1(_){return _.length===0?0:_.reduce((T,R)=>T+R,0)/_.length}const TOY_STATISTICS=[{id:"n_cells",label:"Cell Count",description:"Total number of cells",compute:_=>_.cells.length},{id:"mean_speed",label:"Mean Speed",description:"Average speed of all cells (microns/min) estimated from polarity",compute:_=>_.cells.filter(T=>T.phase==="running").length/(_.cells.length||1)},{id:"avg_x",label:"Avg X Position",description:"Average X position of all cells",compute:_=>mean$1(_.cells.map(T=>T.position.x))},{id:"avg_y",label:"Avg Y Position",description:"Average Y position of all cells",compute:_=>mean$1(_.cells.map(T=>T.position.y))}];function computeToyStatistics(_){const T={};for(const R of TOY_STATISTICS)T[R.id]=R.compute(_);return T}const BOUNDARY_OPTIONS=[{value:"periodic",label:"Periodic"},{value:"box",label:"Box"},{value:"none",label:"None"}];function ToyParametersTab({params:_,onChange:T,disabled:R}){const P=(z,F)=>{const G=cloneDeep(_);G.general[z]=F,T(G)},O=(z,F)=>{const G=cloneDeep(_);G.general.domain_size[z]=F,T(G)},I=_.general;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Cell Population"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(IntegerInput,{label:"Number of Cells",value:I.N,onChange:z=>P("N",z),disabled:R,min:1}),jsxRuntimeExports.jsx(NumberInput,{label:"Soft Radius",value:I.soft_radius,onChange:z=>P("soft_radius",z),disabled:R,step:.5,min:0}),jsxRuntimeExports.jsx(NumberInput,{label:"Repulsion",value:I.repulsion_strength,onChange:z=>P("repulsion_strength",z),disabled:R,step:1,min:0})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Movement"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(NumberInput,{label:"Running Speed",value:I.running_speed,onChange:z=>P("running_speed",z),disabled:R,step:.1,min:0}),jsxRuntimeExports.jsx(NumberInput,{label:"Tumble Speed",value:I.tumble_speed,onChange:z=>P("tumble_speed",z),disabled:R,step:.1,min:0}),jsxRuntimeExports.jsx(NumberInput,{label:"Run Duration",value:I.running_duration,onChange:z=>P("running_duration",z),disabled:R,step:.5,min:0}),jsxRuntimeExports.jsx(NumberInput,{label:"Tumble Duration",value:I.tumbling_duration,onChange:z=>P("tumbling_duration",z),disabled:R,step:.5,min:0}),jsxRuntimeExports.jsx(NumberInput,{label:"Tumble Period",value:I.tumbling_period,onChange:z=>P("tumbling_period",z),disabled:R,step:.1,min:0})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Domain"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(ComboBox,{label:"Boundary Type",value:I.boundary_type,options:BOUNDARY_OPTIONS,onChange:z=>P("boundary_type",z),disabled:R}),jsxRuntimeExports.jsx(NumberInput,{label:"Domain Width",value:I.domain_size[0],onChange:z=>O(0,z),disabled:R,step:10,min:1}),jsxRuntimeExports.jsx(NumberInput,{label:"Domain Height",value:I.domain_size[1],onChange:z=>O(1,z),disabled:R,step:10,min:1})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Physics"}),jsxRuntimeExports.jsx("div",{className:"space-y-2 pl-2",children:jsxRuntimeExports.jsx(NumberInput,{label:"Friction (mu)",value:I.mu,onChange:z=>P("mu",z),disabled:R,step:.1,min:0})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"General"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(NumberInput,{label:"End Time",value:I.t_end,onChange:z=>P("t_end",z),disabled:R,step:1,min:0}),jsxRuntimeExports.jsx(IntegerInput,{label:"Random Seed",value:I.random_seed,onChange:z=>P("random_seed",z),disabled:R})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Display"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(IntegerInput,{label:"Screen Width",value:I.w_screen,onChange:z=>P("w_screen",z),disabled:R,min:10}),jsxRuntimeExports.jsx(IntegerInput,{label:"Screen Height",value:I.h_screen,onChange:z=>P("h_screen",z),disabled:R,min:10})]})]})]})}function ToySimulationTab({params:_,onChange:T,disabled:R}){const P=(I,z)=>{const F=cloneDeep(_);F.general[I]=z,T(F)},O=_.general;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Time Stepping"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(NumberInput,{label:"Time Step (dt)",value:O.dt,onChange:I=>P("dt",I),disabled:R,step:.01,min:.001}),jsxRuntimeExports.jsx(IntegerInput,{label:"Substeps",value:O.n_substeps,onChange:I=>P("n_substeps",I),disabled:R,min:1})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-muted/50 rounded-md text-xs text-muted-foreground",children:[jsxRuntimeExports.jsx("p",{className:"font-medium mb-1",children:"Notes:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-0.5",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"dt"}),": Time step for physics integration"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"n_substeps"}),": Number of physics steps per output step"]})]})]})]})}const toyUI={ParametersTab:ToyParametersTab,SimulationTab:ToySimulationTab},LIGHT_THEME={cellFill:4886745,cellStroke:2904706,polarityRunning:4766584,polarityTumbling:15567158,boundary:13421772},DARK_THEME={cellFill:6534125,cellStroke:9489908,polarityRunning:6869905,polarityTumbling:16503693,boundary:6710886};function drawBoundary(_,T,R){const{boundary_type:P,domain_size:O}=T.general,[I,z]=O;P!=="none"&&(_.rect(0,0,I,z),P==="periodic"?_.stroke({color:R.boundary,alpha:.5,width:.1}):_.stroke({color:R.boundary,alpha:.8,width:.15}))}function drawCells(_,T,R,P){const{soft_radius:O}=R.general;for(const I of T.cells){const F=I.phase==="running"?P.polarityRunning:P.polarityTumbling;_.circle(I.position.x,I.position.y,O),_.fill({color:P.cellFill,alpha:.6}),_.stroke({color:P.cellStroke,alpha:1,width:.05});const G=O*.8,V=I.position.x+I.polarity.x*G,Z=I.position.y+I.polarity.y*G;_.moveTo(I.position.x,I.position.y),_.lineTo(V,Z),_.stroke({color:F,alpha:1,width:.1});const Y=O*.3,Q=Math.atan2(I.polarity.y,I.polarity.x),J=Math.PI/6;_.moveTo(V,Z),_.lineTo(V-Y*Math.cos(Q-J),Z-Y*Math.sin(Q-J)),_.moveTo(V,Z),_.lineTo(V-Y*Math.cos(Q+J),Z-Y*Math.sin(Q+J)),_.stroke({color:F,alpha:1,width:.1})}}const toyRenderer={getBoundingBox(_,T){const[R,P]=_.general.domain_size,O=_.general.soft_radius*2;return{minX:-O,maxX:R+O,minY:-O,maxY:P+O}},render(_,T,R){const P=_.isDark?DARK_THEME:LIGHT_THEME,O=_.graphics.cells,I=_.graphics.links;drawBoundary(I,R,P),drawCells(O,T,R,P)},getBackgroundColor(_){return _?1120295:16777215}},ToyModel={id:"Toy",name:"Run & Tumble (Toy)",version:"1.0.0",description:"Simple run-and-tumble model for demonstration purposes.",defaultParams:DEFAULT_TOY_PARAMS,validateParams(_){return toyParamsSchema.parse(_)},init:(_,T)=>{const R=T??String(_.general.random_seed),P=new SeededRandom(R),{N:O,domain_size:I}=_.general,[z,F]=I,G=[];for(let V=0;V<O;V++){const Z=P.random(z),Y=P.random(F),Q=P.random(2*Math.PI),J=P.random()>.5?"running":"tumbling";G.push({id:V,position:new Vector2(Z,Y),prevPosition:new Vector2(Z,Y),polarity:new Vector2(Math.cos(Q),Math.sin(Q)),phase:J,phaseTime:0,timeSinceLastTumble:0})}return{time:0,cells:G,stepCount:0,rngSeed:R}},step:(_,T,R)=>{const P=new SeededRandom(`${_.rngSeed}_step_${_.stepCount}`),{soft_radius:O,repulsion_strength:I,running_speed:z,tumble_speed:F,mu:G,boundary_type:V,domain_size:Z,running_duration:Y,tumbling_duration:Q,tumbling_period:J}=R.general,[ee,ne]=Z,se=_.cells;for(const ae of se)if(ae.phaseTime+=T,ae.phase==="running"){if(ae.phaseTime>=Y){ae.phase="tumbling",ae.phaseTime=0,ae.timeSinceLastTumble=0;const ce=P.random(2*Math.PI);ae.polarity=new Vector2(Math.cos(ce),Math.sin(ce))}}else{if(ae.timeSinceLastTumble+=T,ae.timeSinceLastTumble>=J){const ce=P.random(2*Math.PI);ae.polarity=new Vector2(Math.cos(ce),Math.sin(ce)),ae.timeSinceLastTumble=0}ae.phaseTime>=Q&&(ae.phase="running",ae.phaseTime=0)}const oe=se.map(()=>Vector2.zero());for(let ae=0;ae<se.length;ae++)for(let ce=ae+1;ce<se.length;ce++){const le=se[ae],pe=se[ce],me=le.position.x-pe.position.x,he=le.position.y-pe.position.y,fe=me*me+he*he,de=O;if(fe<de*de&&fe>0){const be=Math.sqrt(fe),ye=de-be,Ce=I*ye*me/be,ve=I*ye*he/be,Ee=new Vector2(Ce,ve);oe[ae]=oe[ae].add(Ee),oe[ce]=oe[ce].sub(Ee)}}for(let ae=0;ae<se.length;ae++){const ce=se[ae],le=ce.phase==="running"?z:F,pe=ce.polarity.mult(le*G);oe[ae]=oe[ae].add(pe)}for(let ae=0;ae<se.length;ae++){const ce=se[ae],le=oe[ae];ce.prevPosition=ce.position;const pe=le.x*T/G,me=le.y*T/G;ce.position=new Vector2(ce.position.x+pe,ce.position.y+me),V==="periodic"?ce.position=new Vector2((ce.position.x%ee+ee)%ee,(ce.position.y%ne+ne)%ne):V==="box"&&(ce.position=new Vector2(Math.max(0,Math.min(ee,ce.position.x)),Math.max(0,Math.min(ne,ce.position.y))))}return _.time+=T,_.stepCount+=1,_},getSnapshot:_=>_.cells.map(T=>({id:T.id,t:_.time,pos_x:T.position.x,pos_y:T.position.y,phase:T.phase,pol_x:T.polarity.x,pol_y:T.polarity.y})),loadSnapshot:(_,T)=>{if(_.length===0)return{time:0,cells:[],stepCount:0,rngSeed:String(T.general.random_seed)};const R=Number(_[0].t),P=_.map(I=>({id:Number(I.id),position:new Vector2(Number(I.pos_x),Number(I.pos_y)),prevPosition:new Vector2(Number(I.pos_x),Number(I.pos_y)),polarity:new Vector2(Number(I.pol_x),Number(I.pol_y)),phase:I.phase,phaseTime:0,timeSinceLastTumble:0})),O=Math.round(R/T.general.dt);return{time:R,cells:P,stepCount:O,rngSeed:String(T.general.random_seed)}},computeStats:(_,T)=>computeToyStatistics(_),statistics:TOY_STATISTICS,generateStatistics:_=>TOY_STATISTICS,renderer:toyRenderer,ui:toyUI};console.log("[Models] Loading index");modelRegistry.register(EHTModel);modelRegistry.register(ToyModel);modelRegistry.setDefault(EHTModel.id);const ModelContext=reactExports.createContext(void 0);function ModelProvider({children:_}){const T=modelRegistry.getModelNames(),R=modelRegistry.getDefault()||(T.length>0?modelRegistry.get(T[0]):void 0);if(!R)throw new Error("No models registered. Import @/models to register models.");const[P,O]=reactExports.useState(R),[I,z]=reactExports.useState(R.defaultParams),F=reactExports.useCallback(V=>{const Z=modelRegistry.get(V);Z?(O(Z),z(Z.defaultParams)):console.warn(`Model "${V}" not found in registry`)},[]),G=reactExports.useCallback(V=>{z(V)},[]);return jsxRuntimeExports.jsx(ModelContext.Provider,{value:{currentModel:P,currentParams:I,setModel:F,setParams:G,availableModels:T},children:_})}function useModel(){const _=reactExports.useContext(ModelContext);if(!_)throw new Error("useModel must be used within a ModelProvider");return _}function ModelSelector(){const{currentModel:_,setModel:T,availableModels:R}=useModel();return R.length<=1?null:jsxRuntimeExports.jsxs(Select,{value:_.id,onValueChange:T,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[180px]",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select model"})}),jsxRuntimeExports.jsx(SelectContent,{children:R.map(P=>{const O=modelRegistry.get(P),I=O?O.version:"",z=O?.name||P;return jsxRuntimeExports.jsxs(SelectItem,{value:P,children:[z," ",I&&`v${I}`]},P)})})]})}function Header$1({isDark:_,onToggleTheme:T}){return jsxRuntimeExports.jsx("header",{className:"border-b bg-card",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold",children:"EHT Simulator"}),jsxRuntimeExports.jsx(ModelSelector,{})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:T,"aria-label":"Toggle theme",children:_?jsxRuntimeExports.jsx(Sun,{className:"h-5 w-5"}):jsxRuntimeExports.jsx(Moon,{className:"h-5 w-5"})})]})})}const ThemeContext=reactExports.createContext(void 0);function ThemeProvider({children:_}){const[T,R]=reactExports.useState(()=>typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1);reactExports.useEffect(()=>{document.documentElement.classList.toggle("dark",T)},[T]);const P=()=>R(O=>!O);return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:{isDark:T,toggleTheme:P},children:_})}function useTheme(){const _=reactExports.useContext(ThemeContext);if(!_)throw new Error("useTheme must be used within a ThemeProvider");return _}const MessagesContext=reactExports.createContext(null);let messageIdCounter=0;function MessagesProvider({children:_}){const[T,R]=reactExports.useState([]),P=reactExports.useCallback((I,z="info")=>{const F={id:messageIdCounter++,type:z,text:I,timestamp:new Date};R(G=>[...G,F])},[]),O=reactExports.useCallback(()=>{R([])},[]);return jsxRuntimeExports.jsx(MessagesContext.Provider,{value:{messages:T,addMessage:P,clearMessages:O},children:_})}function useMessages(){const _=reactExports.useContext(MessagesContext);if(!_)throw new Error("useMessages must be used within a MessagesProvider");return _}function AppLayoutInner({children:_}){const{isDark:T,toggleTheme:R}=useTheme();return jsxRuntimeExports.jsxs("div",{className:"min-h-screen flex flex-col bg-background text-foreground",children:[jsxRuntimeExports.jsx(Header$1,{isDark:T,onToggleTheme:R}),jsxRuntimeExports.jsx("main",{className:"flex-1 container mx-auto px-4 py-4",children:_})]})}function AppLayout({children:_}){return jsxRuntimeExports.jsx(ThemeProvider,{children:jsxRuntimeExports.jsx(AppLayoutInner,{children:_})})}const scriptRel="modulepreload",assetsURL=function(_){return"/"+_},seen={},__vitePreload=function _(T,R,P){let O=Promise.resolve();if(R&&R.length>0){let G=function(V){return Promise.all(V.map(Z=>Promise.resolve(Z).then(Y=>({status:"fulfilled",value:Y}),Y=>({status:"rejected",reason:Y}))))};document.getElementsByTagName("link");const z=document.querySelector("meta[property=csp-nonce]"),F=z?.nonce||z?.getAttribute("nonce");O=G(R.map(V=>{if(V=assetsURL(V),V in seen)return;seen[V]=!0;const Z=V.endsWith(".css"),Y=Z?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${V}"]${Y}`))return;const Q=document.createElement("link");if(Q.rel=Z?"stylesheet":scriptRel,Z||(Q.as="script"),Q.crossOrigin="",Q.href=V,F&&Q.setAttribute("nonce",F),document.head.appendChild(Q),Z)return new Promise((J,ee)=>{Q.addEventListener("load",J),Q.addEventListener("error",()=>ee(new Error(`Unable to preload CSS for ${V}`)))})}))}function I(z){const F=new Event("vite:preloadError",{cancelable:!0});if(F.payload=z,window.dispatchEvent(F),!F.defaultPrevented)throw z}return O.then(z=>{for(const F of z||[])F.status==="rejected"&&I(F.reason);return T().catch(I)})};var ExtensionType=(_=>(_.Application="application",_.WebGLPipes="webgl-pipes",_.WebGLPipesAdaptor="webgl-pipes-adaptor",_.WebGLSystem="webgl-system",_.WebGPUPipes="webgpu-pipes",_.WebGPUPipesAdaptor="webgpu-pipes-adaptor",_.WebGPUSystem="webgpu-system",_.CanvasSystem="canvas-system",_.CanvasPipesAdaptor="canvas-pipes-adaptor",_.CanvasPipes="canvas-pipes",_.Asset="asset",_.LoadParser="load-parser",_.ResolveParser="resolve-parser",_.CacheParser="cache-parser",_.DetectionParser="detection-parser",_.MaskEffect="mask-effect",_.BlendMode="blend-mode",_.TextureSource="texture-source",_.Environment="environment",_.ShapeBuilder="shape-builder",_.Batcher="batcher",_))(ExtensionType||{});const normalizeExtension=_=>{if(typeof _=="function"||typeof _=="object"&&_.extension){if(!_.extension)throw new Error("Extension class must have an extension object");_={...typeof _.extension!="object"?{type:_.extension}:_.extension,ref:_}}if(typeof _=="object")_={..._};else throw new Error("Invalid extension type");return typeof _.type=="string"&&(_.type=[_.type]),_},normalizeExtensionPriority=(_,T)=>normalizeExtension(_).priority??T,extensions={_addHandlers:{},_removeHandlers:{},_queue:{},remove(..._){return _.map(normalizeExtension).forEach(T=>{T.type.forEach(R=>this._removeHandlers[R]?.(T))}),this},add(..._){return _.map(normalizeExtension).forEach(T=>{T.type.forEach(R=>{const P=this._addHandlers,O=this._queue;P[R]?P[R]?.(T):(O[R]=O[R]||[],O[R]?.push(T))})}),this},handle(_,T,R){const P=this._addHandlers,O=this._removeHandlers;if(P[_]||O[_])throw new Error(`Extension type ${_} already has a handler`);P[_]=T,O[_]=R;const I=this._queue;return I[_]&&(I[_]?.forEach(z=>T(z)),delete I[_]),this},handleByMap(_,T){return this.handle(_,R=>{R.name&&(T[R.name]=R.ref)},R=>{R.name&&delete T[R.name]})},handleByNamedList(_,T,R=-1){return this.handle(_,P=>{T.findIndex(I=>I.name===P.name)>=0||(T.push({name:P.name,value:P.ref}),T.sort((I,z)=>normalizeExtensionPriority(z.value,R)-normalizeExtensionPriority(I.value,R)))},P=>{const O=T.findIndex(I=>I.name===P.name);O!==-1&&T.splice(O,1)})},handleByList(_,T,R=-1){return this.handle(_,P=>{T.includes(P.ref)||(T.push(P.ref),T.sort((O,I)=>normalizeExtensionPriority(I,R)-normalizeExtensionPriority(O,R)))},P=>{const O=T.indexOf(P.ref);O!==-1&&T.splice(O,1)})},mixin(_,...T){for(const R of T)Object.defineProperties(_.prototype,Object.getOwnPropertyDescriptors(R))}},browserExt={extension:{type:ExtensionType.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await __vitePreload(()=>import("./browserAll-DfuxXGsT.js"),__vite__mapDeps([0,1,2]))}},webworkerExt={extension:{type:ExtensionType.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await __vitePreload(()=>import("./webworkerAll-DBQFWgGl.js"),__vite__mapDeps([1,2]))}};class ObservablePoint{constructor(T,R,P){this._x=R||0,this._y=P||0,this._observer=T}clone(T){return new ObservablePoint(T??this._observer,this._x,this._y)}set(T=0,R=T){return(this._x!==T||this._y!==R)&&(this._x=T,this._y=R,this._observer._onUpdate(this)),this}copyFrom(T){return(this._x!==T.x||this._y!==T.y)&&(this._x=T.x,this._y=T.y,this._observer._onUpdate(this)),this}copyTo(T){return T.set(this._x,this._y),T}equals(T){return T.x===this._x&&T.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(T){this._x!==T&&(this._x=T,this._observer._onUpdate(this))}get y(){return this._y}set y(T){this._y!==T&&(this._y=T,this._observer._onUpdate(this))}}var eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,(function(_){var T=Object.prototype.hasOwnProperty,R="~";function P(){}Object.create&&(P.prototype=Object.create(null),new P().__proto__||(R=!1));function O(G,V,Z){this.fn=G,this.context=V,this.once=Z||!1}function I(G,V,Z,Y,Q){if(typeof Z!="function")throw new TypeError("The listener must be a function");var J=new O(Z,Y||G,Q),ee=R?R+V:V;return G._events[ee]?G._events[ee].fn?G._events[ee]=[G._events[ee],J]:G._events[ee].push(J):(G._events[ee]=J,G._eventsCount++),G}function z(G,V){--G._eventsCount===0?G._events=new P:delete G._events[V]}function F(){this._events=new P,this._eventsCount=0}F.prototype.eventNames=function(){var V=[],Z,Y;if(this._eventsCount===0)return V;for(Y in Z=this._events)T.call(Z,Y)&&V.push(R?Y.slice(1):Y);return Object.getOwnPropertySymbols?V.concat(Object.getOwnPropertySymbols(Z)):V},F.prototype.listeners=function(V){var Z=R?R+V:V,Y=this._events[Z];if(!Y)return[];if(Y.fn)return[Y.fn];for(var Q=0,J=Y.length,ee=new Array(J);Q<J;Q++)ee[Q]=Y[Q].fn;return ee},F.prototype.listenerCount=function(V){var Z=R?R+V:V,Y=this._events[Z];return Y?Y.fn?1:Y.length:0},F.prototype.emit=function(V,Z,Y,Q,J,ee){var ne=R?R+V:V;if(!this._events[ne])return!1;var se=this._events[ne],oe=arguments.length,ae,ce;if(se.fn){switch(se.once&&this.removeListener(V,se.fn,void 0,!0),oe){case 1:return se.fn.call(se.context),!0;case 2:return se.fn.call(se.context,Z),!0;case 3:return se.fn.call(se.context,Z,Y),!0;case 4:return se.fn.call(se.context,Z,Y,Q),!0;case 5:return se.fn.call(se.context,Z,Y,Q,J),!0;case 6:return se.fn.call(se.context,Z,Y,Q,J,ee),!0}for(ce=1,ae=new Array(oe-1);ce<oe;ce++)ae[ce-1]=arguments[ce];se.fn.apply(se.context,ae)}else{var le=se.length,pe;for(ce=0;ce<le;ce++)switch(se[ce].once&&this.removeListener(V,se[ce].fn,void 0,!0),oe){case 1:se[ce].fn.call(se[ce].context);break;case 2:se[ce].fn.call(se[ce].context,Z);break;case 3:se[ce].fn.call(se[ce].context,Z,Y);break;case 4:se[ce].fn.call(se[ce].context,Z,Y,Q);break;default:if(!ae)for(pe=1,ae=new Array(oe-1);pe<oe;pe++)ae[pe-1]=arguments[pe];se[ce].fn.apply(se[ce].context,ae)}}return!0},F.prototype.on=function(V,Z,Y){return I(this,V,Z,Y,!1)},F.prototype.once=function(V,Z,Y){return I(this,V,Z,Y,!0)},F.prototype.removeListener=function(V,Z,Y,Q){var J=R?R+V:V;if(!this._events[J])return this;if(!Z)return z(this,J),this;var ee=this._events[J];if(ee.fn)ee.fn===Z&&(!Q||ee.once)&&(!Y||ee.context===Y)&&z(this,J);else{for(var ne=0,se=[],oe=ee.length;ne<oe;ne++)(ee[ne].fn!==Z||Q&&!ee[ne].once||Y&&ee[ne].context!==Y)&&se.push(ee[ne]);se.length?this._events[J]=se.length===1?se[0]:se:z(this,J)}return this},F.prototype.removeAllListeners=function(V){var Z;return V?(Z=R?R+V:V,this._events[Z]&&z(this,Z)):(this._events=new P,this._eventsCount=0),this},F.prototype.off=F.prototype.removeListener,F.prototype.addListener=F.prototype.on,F.prefixed=R,F.EventEmitter=F,_.exports=F})(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports),PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180;class Point{constructor(T=0,R=0){this.x=0,this.y=0,this.x=T,this.y=R}clone(){return new Point(this.x,this.y)}copyFrom(T){return this.set(T.x,T.y),this}copyTo(T){return T.set(this.x,this.y),T}equals(T){return T.x===this.x&&T.y===this.y}set(T=0,R=T){return this.x=T,this.y=R,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return tempPoint.x=0,tempPoint.y=0,tempPoint}}const tempPoint=new Point;class Matrix{constructor(T=1,R=0,P=0,O=1,I=0,z=0){this.array=null,this.a=T,this.b=R,this.c=P,this.d=O,this.tx=I,this.ty=z}fromArray(T){this.a=T[0],this.b=T[1],this.c=T[3],this.d=T[4],this.tx=T[2],this.ty=T[5]}set(T,R,P,O,I,z){return this.a=T,this.b=R,this.c=P,this.d=O,this.tx=I,this.ty=z,this}toArray(T,R){this.array||(this.array=new Float32Array(9));const P=R||this.array;return T?(P[0]=this.a,P[1]=this.b,P[2]=0,P[3]=this.c,P[4]=this.d,P[5]=0,P[6]=this.tx,P[7]=this.ty,P[8]=1):(P[0]=this.a,P[1]=this.c,P[2]=this.tx,P[3]=this.b,P[4]=this.d,P[5]=this.ty,P[6]=0,P[7]=0,P[8]=1),P}apply(T,R){R=R||new Point;const P=T.x,O=T.y;return R.x=this.a*P+this.c*O+this.tx,R.y=this.b*P+this.d*O+this.ty,R}applyInverse(T,R){R=R||new Point;const P=this.a,O=this.b,I=this.c,z=this.d,F=this.tx,G=this.ty,V=1/(P*z+I*-O),Z=T.x,Y=T.y;return R.x=z*V*Z+-I*V*Y+(G*I-F*z)*V,R.y=P*V*Y+-O*V*Z+(-G*P+F*O)*V,R}translate(T,R){return this.tx+=T,this.ty+=R,this}scale(T,R){return this.a*=T,this.d*=R,this.c*=T,this.b*=R,this.tx*=T,this.ty*=R,this}rotate(T){const R=Math.cos(T),P=Math.sin(T),O=this.a,I=this.c,z=this.tx;return this.a=O*R-this.b*P,this.b=O*P+this.b*R,this.c=I*R-this.d*P,this.d=I*P+this.d*R,this.tx=z*R-this.ty*P,this.ty=z*P+this.ty*R,this}append(T){const R=this.a,P=this.b,O=this.c,I=this.d;return this.a=T.a*R+T.b*O,this.b=T.a*P+T.b*I,this.c=T.c*R+T.d*O,this.d=T.c*P+T.d*I,this.tx=T.tx*R+T.ty*O+this.tx,this.ty=T.tx*P+T.ty*I+this.ty,this}appendFrom(T,R){const P=T.a,O=T.b,I=T.c,z=T.d,F=T.tx,G=T.ty,V=R.a,Z=R.b,Y=R.c,Q=R.d;return this.a=P*V+O*Y,this.b=P*Z+O*Q,this.c=I*V+z*Y,this.d=I*Z+z*Q,this.tx=F*V+G*Y+R.tx,this.ty=F*Z+G*Q+R.ty,this}setTransform(T,R,P,O,I,z,F,G,V){return this.a=Math.cos(F+V)*I,this.b=Math.sin(F+V)*I,this.c=-Math.sin(F-G)*z,this.d=Math.cos(F-G)*z,this.tx=T-(P*this.a+O*this.c),this.ty=R-(P*this.b+O*this.d),this}prepend(T){const R=this.tx;if(T.a!==1||T.b!==0||T.c!==0||T.d!==1){const P=this.a,O=this.c;this.a=P*T.a+this.b*T.c,this.b=P*T.b+this.b*T.d,this.c=O*T.a+this.d*T.c,this.d=O*T.b+this.d*T.d}return this.tx=R*T.a+this.ty*T.c+T.tx,this.ty=R*T.b+this.ty*T.d+T.ty,this}decompose(T){const R=this.a,P=this.b,O=this.c,I=this.d,z=T.pivot,F=-Math.atan2(-O,I),G=Math.atan2(P,R),V=Math.abs(F+G);return V<1e-5||Math.abs(PI_2-V)<1e-5?(T.rotation=G,T.skew.x=T.skew.y=0):(T.rotation=0,T.skew.x=F,T.skew.y=G),T.scale.x=Math.sqrt(R*R+P*P),T.scale.y=Math.sqrt(O*O+I*I),T.position.x=this.tx+(z.x*R+z.y*O),T.position.y=this.ty+(z.x*P+z.y*I),T}invert(){const T=this.a,R=this.b,P=this.c,O=this.d,I=this.tx,z=T*O-R*P;return this.a=O/z,this.b=-R/z,this.c=-P/z,this.d=T/z,this.tx=(P*this.ty-O*I)/z,this.ty=-(T*this.ty-R*I)/z,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const T=new Matrix;return T.a=this.a,T.b=this.b,T.c=this.c,T.d=this.d,T.tx=this.tx,T.ty=this.ty,T}copyTo(T){return T.a=this.a,T.b=this.b,T.c=this.c,T.d=this.d,T.tx=this.tx,T.ty=this.ty,T}copyFrom(T){return this.a=T.a,this.b=T.b,this.c=T.c,this.d=T.d,this.tx=T.tx,this.ty=T.ty,this}equals(T){return T.a===this.a&&T.b===this.b&&T.c===this.c&&T.d===this.d&&T.tx===this.tx&&T.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return identityMatrix$1.identity()}static get shared(){return tempMatrix$3.identity()}}const tempMatrix$3=new Matrix,identityMatrix$1=new Matrix,ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init$1(){for(let _=0;_<16;_++){const T=[];rotationCayley.push(T);for(let R=0;R<16;R++){const P=signum(ux[_]*ux[R]+vx[_]*uy[R]),O=signum(uy[_]*ux[R]+vy[_]*uy[R]),I=signum(ux[_]*vx[R]+vx[_]*vy[R]),z=signum(uy[_]*vx[R]+vy[_]*vy[R]);for(let F=0;F<16;F++)if(ux[F]===P&&uy[F]===O&&vx[F]===I&&vy[F]===z){T.push(F);break}}}for(let _=0;_<16;_++){const T=new Matrix;T.set(ux[_],uy[_],vx[_],vy[_],0,0),rotationMatrices.push(T)}}init$1();const groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:_=>ux[_],uY:_=>uy[_],vX:_=>vx[_],vY:_=>vy[_],inv:_=>_&8?_&15:-_&7,add:(_,T)=>rotationCayley[_][T],sub:(_,T)=>rotationCayley[_][groupD8.inv(T)],rotate180:_=>_^4,isVertical:_=>(_&3)===2,byDirection:(_,T)=>Math.abs(_)*2<=Math.abs(T)?T>=0?groupD8.S:groupD8.N:Math.abs(T)*2<=Math.abs(_)?_>0?groupD8.E:groupD8.W:T>0?_>0?groupD8.SE:groupD8.SW:_>0?groupD8.NE:groupD8.NW,matrixAppendRotationInv:(_,T,R=0,P=0)=>{const O=rotationMatrices[groupD8.inv(T)];O.tx=R,O.ty=P,_.append(O)},transformRectCoords:(_,T,R,P)=>{const{x:O,y:I,width:z,height:F}=_,{x:G,y:V,width:Z,height:Y}=T;return R===groupD8.E?(P.set(O+G,I+V,z,F),P):R===groupD8.S?P.set(Z-I-F+G,O+V,F,z):R===groupD8.W?P.set(Z-O-z+G,Y-I-F+V,z,F):R===groupD8.N?P.set(I+G,Y-O-z+V,F,z):P.set(O+G,I+V,z,F)}},tempPoints=[new Point,new Point,new Point,new Point];class Rectangle{constructor(T=0,R=0,P=0,O=0){this.type="rectangle",this.x=Number(T),this.y=Number(R),this.width=Number(P),this.height=Number(O)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Rectangle(0,0,0,0)}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}copyFromBounds(T){return this.x=T.minX,this.y=T.minY,this.width=T.maxX-T.minX,this.height=T.maxY-T.minY,this}copyFrom(T){return this.x=T.x,this.y=T.y,this.width=T.width,this.height=T.height,this}copyTo(T){return T.copyFrom(this),T}contains(T,R){return this.width<=0||this.height<=0?!1:T>=this.x&&T<this.x+this.width&&R>=this.y&&R<this.y+this.height}strokeContains(T,R,P,O=.5){const{width:I,height:z}=this;if(I<=0||z<=0)return!1;const F=this.x,G=this.y,V=P*(1-O),Z=P-V,Y=F-V,Q=F+I+V,J=G-V,ee=G+z+V,ne=F+Z,se=F+I-Z,oe=G+Z,ae=G+z-Z;return T>=Y&&T<=Q&&R>=J&&R<=ee&&!(T>ne&&T<se&&R>oe&&R<ae)}intersects(T,R){if(!R){const fe=this.x<T.x?T.x:this.x;if((this.right>T.right?T.right:this.right)<=fe)return!1;const be=this.y<T.y?T.y:this.y;return(this.bottom>T.bottom?T.bottom:this.bottom)>be}const P=this.left,O=this.right,I=this.top,z=this.bottom;if(O<=P||z<=I)return!1;const F=tempPoints[0].set(T.left,T.top),G=tempPoints[1].set(T.left,T.bottom),V=tempPoints[2].set(T.right,T.top),Z=tempPoints[3].set(T.right,T.bottom);if(V.x<=F.x||G.y<=F.y)return!1;const Y=Math.sign(R.a*R.d-R.b*R.c);if(Y===0||(R.apply(F,F),R.apply(G,G),R.apply(V,V),R.apply(Z,Z),Math.max(F.x,G.x,V.x,Z.x)<=P||Math.min(F.x,G.x,V.x,Z.x)>=O||Math.max(F.y,G.y,V.y,Z.y)<=I||Math.min(F.y,G.y,V.y,Z.y)>=z))return!1;const Q=Y*(G.y-F.y),J=Y*(F.x-G.x),ee=Q*P+J*I,ne=Q*O+J*I,se=Q*P+J*z,oe=Q*O+J*z;if(Math.max(ee,ne,se,oe)<=Q*F.x+J*F.y||Math.min(ee,ne,se,oe)>=Q*Z.x+J*Z.y)return!1;const ae=Y*(F.y-V.y),ce=Y*(V.x-F.x),le=ae*P+ce*I,pe=ae*O+ce*I,me=ae*P+ce*z,he=ae*O+ce*z;return!(Math.max(le,pe,me,he)<=ae*F.x+ce*F.y||Math.min(le,pe,me,he)>=ae*Z.x+ce*Z.y)}pad(T=0,R=T){return this.x-=T,this.y-=R,this.width+=T*2,this.height+=R*2,this}fit(T){const R=Math.max(this.x,T.x),P=Math.min(this.x+this.width,T.x+T.width),O=Math.max(this.y,T.y),I=Math.min(this.y+this.height,T.y+T.height);return this.x=R,this.width=Math.max(P-R,0),this.y=O,this.height=Math.max(I-O,0),this}ceil(T=1,R=.001){const P=Math.ceil((this.x+this.width-R)*T)/T,O=Math.ceil((this.y+this.height-R)*T)/T;return this.x=Math.floor((this.x+R)*T)/T,this.y=Math.floor((this.y+R)*T)/T,this.width=P-this.x,this.height=O-this.y,this}scale(T,R=T){return this.x*=T,this.y*=R,this.width*=T,this.height*=R,this}enlarge(T){const R=Math.min(this.x,T.x),P=Math.max(this.x+this.width,T.x+T.width),O=Math.min(this.y,T.y),I=Math.max(this.y+this.height,T.y+T.height);return this.x=R,this.width=P-R,this.y=O,this.height=I-O,this}getBounds(T){return T||(T=new Rectangle),T.copyFrom(this),T}containsRect(T){if(this.width<=0||this.height<=0)return!1;const R=T.x,P=T.y,O=T.x+T.width,I=T.y+T.height;return R>=this.x&&R<this.x+this.width&&P>=this.y&&P<this.y+this.height&&O>=this.x&&O<this.x+this.width&&I>=this.y&&I<this.y+this.height}set(T,R,P,O){return this.x=T,this.y=R,this.width=P,this.height=O,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const uidCache={default:-1};function uid(_="default"){return uidCache[_]===void 0&&(uidCache[_]=-1),++uidCache[_]}const warnings$1=new Set,v8_0_0="8.0.0",v8_3_4="8.3.4",deprecationState={quiet:!1,noColor:!1},deprecation=(_,T,R=3)=>{if(deprecationState.quiet||warnings$1.has(T))return;let P=new Error().stack;const O=`${T}
Deprecated since v${_}`,I=typeof console.groupCollapsed=="function"&&!deprecationState.noColor;typeof P>"u"?console.warn("PixiJS Deprecation Warning: ",O):(P=P.split(`
`).splice(R).join(`
`),I?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",O),console.warn(P),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",O),console.warn(P))),warnings$1.add(T)};Object.defineProperties(deprecation,{quiet:{get:()=>deprecationState.quiet,set:_=>{deprecationState.quiet=_},enumerable:!0,configurable:!1},noColor:{get:()=>deprecationState.noColor,set:_=>{deprecationState.noColor=_},enumerable:!0,configurable:!1}});const NOOP=()=>{};function nextPow2(_){return _+=_===0?1:0,--_,_|=_>>>1,_|=_>>>2,_|=_>>>4,_|=_>>>8,_|=_>>>16,_+1}function isPow2(_){return!(_&_-1)&&!!_}function definedProps(_){const T={};for(const R in _)_[R]!==void 0&&(T[R]=_[R]);return T}const idHash$1=Object.create(null);function createResourceIdFromString(_){const T=idHash$1[_];return T===void 0&&(idHash$1[_]=uid("resource")),T}const _TextureStyle=class fd extends EventEmitter{constructor(T={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,T={...fd.defaultOptions,...T},this.addressMode=T.addressMode,this.addressModeU=T.addressModeU??this.addressModeU,this.addressModeV=T.addressModeV??this.addressModeV,this.addressModeW=T.addressModeW??this.addressModeW,this.scaleMode=T.scaleMode,this.magFilter=T.magFilter??this.magFilter,this.minFilter=T.minFilter??this.minFilter,this.mipmapFilter=T.mipmapFilter??this.mipmapFilter,this.lodMinClamp=T.lodMinClamp,this.lodMaxClamp=T.lodMaxClamp,this.compare=T.compare,this.maxAnisotropy=T.maxAnisotropy??1}set addressMode(T){this.addressModeU=T,this.addressModeV=T,this.addressModeW=T}get addressMode(){return this.addressModeU}set wrapMode(T){deprecation(v8_0_0,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=T}get wrapMode(){return this.addressMode}set scaleMode(T){this.magFilter=T,this.minFilter=T,this.mipmapFilter=T}get scaleMode(){return this.magFilter}set maxAnisotropy(T){this._maxAnisotropy=Math.min(T,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const T=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=createResourceIdFromString(T),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};_TextureStyle.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let TextureStyle=_TextureStyle;const _TextureSource=class hd extends EventEmitter{constructor(T={}){super(),this.options=T,this.uid=uid("textureSource"),this._resourceType="textureSource",this._resourceId=uid("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,T={...hd.defaultOptions,...T},this.label=T.label??"",this.resource=T.resource,this.autoGarbageCollect=T.autoGarbageCollect,this._resolution=T.resolution,T.width?this.pixelWidth=T.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,T.height?this.pixelHeight=T.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=T.format,this.dimension=T.dimensions,this.mipLevelCount=T.mipLevelCount,this.autoGenerateMipmaps=T.autoGenerateMipmaps,this.sampleCount=T.sampleCount,this.antialias=T.antialias,this.alphaMode=T.alphaMode,this.style=new TextureStyle(definedProps(T)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(T){this.style!==T&&(this._style?.off("change",this._onStyleChange,this),this._style=T,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(T){this._style.maxAnisotropy=T}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(T){this._style.addressMode=T}get repeatMode(){return this._style.addressMode}set repeatMode(T){this._style.addressMode=T}get magFilter(){return this._style.magFilter}set magFilter(T){this._style.magFilter=T}get minFilter(){return this._style.minFilter}set minFilter(T){this._style.minFilter=T}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(T){this._style.mipmapFilter=T}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(T){this._style.lodMinClamp=T}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(T){this._style.lodMaxClamp=T}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const T=this._resolution;if(this.resize(this.resourceWidth/T,this.resourceHeight/T))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=uid("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:T}=this;return T.naturalWidth||T.videoWidth||T.displayWidth||T.width}get resourceHeight(){const{resource:T}=this;return T.naturalHeight||T.videoHeight||T.displayHeight||T.height}get resolution(){return this._resolution}set resolution(T){this._resolution!==T&&(this._resolution=T,this.width=this.pixelWidth/T,this.height=this.pixelHeight/T)}resize(T,R,P){P||(P=this._resolution),T||(T=this.width),R||(R=this.height);const O=Math.round(T*P),I=Math.round(R*P);return this.width=O/P,this.height=I/P,this._resolution=P,this.pixelWidth===O&&this.pixelHeight===I?!1:(this._refreshPOT(),this.pixelWidth=O,this.pixelHeight=I,this.emit("resize",this),this._resourceId=uid("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(T){this._style.wrapMode=T}get wrapMode(){return this._style.wrapMode}set scaleMode(T){this._style.scaleMode=T}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=isPow2(this.pixelWidth)&&isPow2(this.pixelHeight)}static test(T){throw new Error("Unimplemented")}};_TextureSource.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let TextureSource=_TextureSource;class BufferImageSource extends TextureSource{constructor(T){const R=T.resource||new Float32Array(T.width*T.height*4);let P=T.format;P||(R instanceof Float32Array?P="rgba32float":R instanceof Int32Array||R instanceof Uint32Array?P="rgba32uint":R instanceof Int16Array||R instanceof Uint16Array?P="rgba16uint":(R instanceof Int8Array,P="bgra8unorm")),super({...T,resource:R,format:P}),this.uploadMethodId="buffer"}static test(T){return T instanceof Int8Array||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array}}BufferImageSource.extension=ExtensionType.TextureSource;const tempMat=new Matrix;class TextureMatrix{constructor(T,R){this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof R>"u"?this.clampMargin=T.width<10?0:.5:this.clampMargin=R,this.isSimple=!1,this.texture=T}get texture(){return this._texture}set texture(T){this.texture!==T&&(this._texture?.removeListener("update",this.update,this),this._texture=T,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(T,R){R===void 0&&(R=T);const P=this.mapCoord;for(let O=0;O<T.length;O+=2){const I=T[O],z=T[O+1];R[O]=I*P.a+z*P.c+P.tx,R[O+1]=I*P.b+z*P.d+P.ty}return R}update(){const T=this._texture;this._updateID++;const R=T.uvs;this.mapCoord.set(R.x1-R.x0,R.y1-R.y0,R.x3-R.x0,R.y3-R.y0,R.x0,R.y0);const P=T.orig,O=T.trim;O&&(tempMat.set(P.width/O.width,0,0,P.height/O.height,-O.x/O.width,-O.y/O.height),this.mapCoord.append(tempMat));const I=T.source,z=this.uClampFrame,F=this.clampMargin/I._resolution,G=this.clampOffset/I._resolution;return z[0]=(T.frame.x+F+G)/I.width,z[1]=(T.frame.y+F+G)/I.height,z[2]=(T.frame.x+T.frame.width-F+G)/I.width,z[3]=(T.frame.y+T.frame.height-F+G)/I.height,this.uClampOffset[0]=this.clampOffset/I.pixelWidth,this.uClampOffset[1]=this.clampOffset/I.pixelHeight,this.isSimple=T.frame.width===I.width&&T.frame.height===I.height&&T.rotate===0,!0}}class Texture extends EventEmitter{constructor({source:T,label:R,frame:P,orig:O,trim:I,defaultAnchor:z,defaultBorders:F,rotate:G,dynamic:V}={}){if(super(),this.uid=uid("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Rectangle,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=R,this.source=T?.source??new TextureSource,this.noFrame=!P,P)this.frame.copyFrom(P);else{const{width:Z,height:Y}=this._source;this.frame.width=Z,this.frame.height=Y}this.orig=O||this.frame,this.trim=I,this.rotate=G??0,this.defaultAnchor=z,this.defaultBorders=F,this.destroyed=!1,this.dynamic=V||!1,this.updateUvs()}set source(T){this._source&&this._source.off("resize",this.update,this),this._source=T,T.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new TextureMatrix(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:T,frame:R}=this,{width:P,height:O}=this._source,I=R.x/P,z=R.y/O,F=R.width/P,G=R.height/O;let V=this.rotate;if(V){const Z=F/2,Y=G/2,Q=I+Z,J=z+Y;V=groupD8.add(V,groupD8.NW),T.x0=Q+Z*groupD8.uX(V),T.y0=J+Y*groupD8.uY(V),V=groupD8.add(V,2),T.x1=Q+Z*groupD8.uX(V),T.y1=J+Y*groupD8.uY(V),V=groupD8.add(V,2),T.x2=Q+Z*groupD8.uX(V),T.y2=J+Y*groupD8.uY(V),V=groupD8.add(V,2),T.x3=Q+Z*groupD8.uX(V),T.y3=J+Y*groupD8.uY(V)}else T.x0=I,T.y0=z,T.x1=I+F,T.y1=z,T.x2=I+F,T.y2=z+G,T.x3=I,T.y3=z+G}destroy(T=!1){this._source&&(this._source.off("resize",this.update,this),T&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return deprecation(v8_0_0,"Texture.baseTexture is now Texture.source"),this._source}}Texture.EMPTY=new Texture({label:"EMPTY",source:new TextureSource({label:"EMPTY"})});Texture.EMPTY.destroy=NOOP;Texture.WHITE=new Texture({source:new BufferImageSource({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Texture.WHITE.destroy=NOOP;function updateQuadBounds(_,T,R){const{width:P,height:O}=R.orig,I=R.trim;if(I){const z=I.width,F=I.height;_.minX=I.x-T._x*P,_.maxX=_.minX+z,_.minY=I.y-T._y*O,_.maxY=_.minY+F}else _.minX=-T._x*P,_.maxX=_.minX+P,_.minY=-T._y*O,_.maxY=_.minY+O}const defaultMatrix=new Matrix;class Bounds{constructor(T=1/0,R=1/0,P=-1/0,O=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=defaultMatrix,this.minX=T,this.minY=R,this.maxX=P,this.maxY=O}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Rectangle);const T=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(T.x=0,T.y=0,T.width=0,T.height=0):T.copyFromBounds(this),T}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=defaultMatrix,this}set(T,R,P,O){this.minX=T,this.minY=R,this.maxX=P,this.maxY=O}addFrame(T,R,P,O,I){I||(I=this.matrix);const z=I.a,F=I.b,G=I.c,V=I.d,Z=I.tx,Y=I.ty;let Q=this.minX,J=this.minY,ee=this.maxX,ne=this.maxY,se=z*T+G*R+Z,oe=F*T+V*R+Y;se<Q&&(Q=se),oe<J&&(J=oe),se>ee&&(ee=se),oe>ne&&(ne=oe),se=z*P+G*R+Z,oe=F*P+V*R+Y,se<Q&&(Q=se),oe<J&&(J=oe),se>ee&&(ee=se),oe>ne&&(ne=oe),se=z*T+G*O+Z,oe=F*T+V*O+Y,se<Q&&(Q=se),oe<J&&(J=oe),se>ee&&(ee=se),oe>ne&&(ne=oe),se=z*P+G*O+Z,oe=F*P+V*O+Y,se<Q&&(Q=se),oe<J&&(J=oe),se>ee&&(ee=se),oe>ne&&(ne=oe),this.minX=Q,this.minY=J,this.maxX=ee,this.maxY=ne}addRect(T,R){this.addFrame(T.x,T.y,T.x+T.width,T.y+T.height,R)}addBounds(T,R){this.addFrame(T.minX,T.minY,T.maxX,T.maxY,R)}addBoundsMask(T){this.minX=this.minX>T.minX?this.minX:T.minX,this.minY=this.minY>T.minY?this.minY:T.minY,this.maxX=this.maxX<T.maxX?this.maxX:T.maxX,this.maxY=this.maxY<T.maxY?this.maxY:T.maxY}applyMatrix(T){const R=this.minX,P=this.minY,O=this.maxX,I=this.maxY,{a:z,b:F,c:G,d:V,tx:Z,ty:Y}=T;let Q=z*R+G*P+Z,J=F*R+V*P+Y;this.minX=Q,this.minY=J,this.maxX=Q,this.maxY=J,Q=z*O+G*P+Z,J=F*O+V*P+Y,this.minX=Q<this.minX?Q:this.minX,this.minY=J<this.minY?J:this.minY,this.maxX=Q>this.maxX?Q:this.maxX,this.maxY=J>this.maxY?J:this.maxY,Q=z*R+G*I+Z,J=F*R+V*I+Y,this.minX=Q<this.minX?Q:this.minX,this.minY=J<this.minY?J:this.minY,this.maxX=Q>this.maxX?Q:this.maxX,this.maxY=J>this.maxY?J:this.maxY,Q=z*O+G*I+Z,J=F*O+V*I+Y,this.minX=Q<this.minX?Q:this.minX,this.minY=J<this.minY?J:this.minY,this.maxX=Q>this.maxX?Q:this.maxX,this.maxY=J>this.maxY?J:this.maxY}fit(T){return this.minX<T.left&&(this.minX=T.left),this.maxX>T.right&&(this.maxX=T.right),this.minY<T.top&&(this.minY=T.top),this.maxY>T.bottom&&(this.maxY=T.bottom),this}fitBounds(T,R,P,O){return this.minX<T&&(this.minX=T),this.maxX>R&&(this.maxX=R),this.minY<P&&(this.minY=P),this.maxY>O&&(this.maxY=O),this}pad(T,R=T){return this.minX-=T,this.maxX+=T,this.minY-=R,this.maxY+=R,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Bounds(this.minX,this.minY,this.maxX,this.maxY)}scale(T,R=T){return this.minX*=T,this.minY*=R,this.maxX*=T,this.maxY*=R,this}get x(){return this.minX}set x(T){const R=this.maxX-this.minX;this.minX=T,this.maxX=T+R}get y(){return this.minY}set y(T){const R=this.maxY-this.minY;this.minY=T,this.maxY=T+R}get width(){return this.maxX-this.minX}set width(T){this.maxX=this.minX+T}get height(){return this.maxY-this.minY}set height(T){this.maxY=this.minY+T}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(T,R,P,O){let I=this.minX,z=this.minY,F=this.maxX,G=this.maxY;O||(O=this.matrix);const V=O.a,Z=O.b,Y=O.c,Q=O.d,J=O.tx,ee=O.ty;for(let ne=R;ne<P;ne+=2){const se=T[ne],oe=T[ne+1],ae=V*se+Y*oe+J,ce=Z*se+Q*oe+ee;I=ae<I?ae:I,z=ce<z?ce:z,F=ae>F?ae:F,G=ce>G?ce:G}this.minX=I,this.minY=z,this.maxX=F,this.maxY=G}containsPoint(T,R){return this.minX<=T&&this.minY<=R&&this.maxX>=T&&this.maxY>=R}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(T){return this.minX=T.minX,this.minY=T.minY,this.maxX=T.maxX,this.maxY=T.maxY,this}}var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(_){return typeof _=="string"?_.length>0:typeof _=="number"},n=function(_,T,R){return T===void 0&&(T=0),R===void 0&&(R=Math.pow(10,T)),Math.round(R*_)/R+0},e=function(_,T,R){return T===void 0&&(T=0),R===void 0&&(R=1),_>R?R:_>T?_:T},u=function(_){return(_=isFinite(_)?_%360:0)>0?_:_+360},a$1=function(_){return{r:e(_.r,0,255),g:e(_.g,0,255),b:e(_.b,0,255),a:e(_.a)}},o=function(_){return{r:n(_.r),g:n(_.g),b:n(_.b),a:n(_.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s$1=function(_){var T=_.toString(16);return T.length<2?"0"+T:T},h=function(_){var T=_.r,R=_.g,P=_.b,O=_.a,I=Math.max(T,R,P),z=I-Math.min(T,R,P),F=z?I===T?(R-P)/z:I===R?2+(P-T)/z:4+(T-R)/z:0;return{h:60*(F<0?F+6:F),s:I?z/I*100:0,v:I/255*100,a:O}},b=function(_){var T=_.h,R=_.s,P=_.v,O=_.a;T=T/360*6,R/=100,P/=100;var I=Math.floor(T),z=P*(1-R),F=P*(1-(T-I)*R),G=P*(1-(1-T+I)*R),V=I%6;return{r:255*[P,F,z,z,G,P][V],g:255*[G,P,P,F,z,z][V],b:255*[z,z,G,P,P,F][V],a:O}},g=function(_){return{h:u(_.h),s:e(_.s,0,100),l:e(_.l,0,100),a:e(_.a)}},d=function(_){return{h:n(_.h),s:n(_.s),l:n(_.l),a:n(_.a,3)}},f=function(_){return b((R=(T=_).s,{h:T.h,s:(R*=((P=T.l)<50?P:100-P)/100)>0?2*R/(P+R)*100:0,v:P+R,a:T.a}));var T,R,P},c$3=function(_){return{h:(T=h(_)).h,s:(O=(200-(R=T.s))*(P=T.v)/100)>0&&O<200?R*P/100/(O<=100?O:200-O)*100:0,l:O/2,a:T.a};var T,R,P,O},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y$1={string:[[function(_){var T=i.exec(_);return T?(_=T[1]).length<=4?{r:parseInt(_[0]+_[0],16),g:parseInt(_[1]+_[1],16),b:parseInt(_[2]+_[2],16),a:_.length===4?n(parseInt(_[3]+_[3],16)/255,2):1}:_.length===6||_.length===8?{r:parseInt(_.substr(0,2),16),g:parseInt(_.substr(2,2),16),b:parseInt(_.substr(4,2),16),a:_.length===8?n(parseInt(_.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(_){var T=v.exec(_)||m.exec(_);return T?T[2]!==T[4]||T[4]!==T[6]?null:a$1({r:Number(T[1])/(T[2]?100/255:1),g:Number(T[3])/(T[4]?100/255:1),b:Number(T[5])/(T[6]?100/255:1),a:T[7]===void 0?1:Number(T[7])/(T[8]?100:1)}):null},"rgb"],[function(_){var T=l.exec(_)||p.exec(_);if(!T)return null;var R,P,O=g({h:(R=T[1],P=T[2],P===void 0&&(P="deg"),Number(R)*(r[P]||1)),s:Number(T[3]),l:Number(T[4]),a:T[5]===void 0?1:Number(T[5])/(T[6]?100:1)});return f(O)},"hsl"]],object:[[function(_){var T=_.r,R=_.g,P=_.b,O=_.a,I=O===void 0?1:O;return t(T)&&t(R)&&t(P)?a$1({r:Number(T),g:Number(R),b:Number(P),a:Number(I)}):null},"rgb"],[function(_){var T=_.h,R=_.s,P=_.l,O=_.a,I=O===void 0?1:O;if(!t(T)||!t(R)||!t(P))return null;var z=g({h:Number(T),s:Number(R),l:Number(P),a:Number(I)});return f(z)},"hsl"],[function(_){var T=_.h,R=_.s,P=_.v,O=_.a,I=O===void 0?1:O;if(!t(T)||!t(R)||!t(P))return null;var z=(function(F){return{h:u(F.h),s:e(F.s,0,100),v:e(F.v,0,100),a:e(F.a)}})({h:Number(T),s:Number(R),v:Number(P),a:Number(I)});return b(z)},"hsv"]]},N=function(_,T){for(var R=0;R<T.length;R++){var P=T[R][0](_);if(P)return[P,T[R][1]]}return[null,void 0]},x$1=function(_){return typeof _=="string"?N(_.trim(),y$1.string):typeof _=="object"&&_!==null?N(_,y$1.object):[null,void 0]},M$1=function(_,T){var R=c$3(_);return{h:R.h,s:e(R.s+100*T,0,100),l:R.l,a:R.a}},H=function(_){return(299*_.r+587*_.g+114*_.b)/1e3/255},$=function(_,T){var R=c$3(_);return{h:R.h,s:R.s,l:e(R.l+100*T,0,100),a:R.a}},j=(function(){function _(T){this.parsed=x$1(T)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return _.prototype.isValid=function(){return this.parsed!==null},_.prototype.brightness=function(){return n(H(this.rgba),2)},_.prototype.isDark=function(){return H(this.rgba)<.5},_.prototype.isLight=function(){return H(this.rgba)>=.5},_.prototype.toHex=function(){return T=o(this.rgba),R=T.r,P=T.g,O=T.b,z=(I=T.a)<1?s$1(n(255*I)):"","#"+s$1(R)+s$1(P)+s$1(O)+z;var T,R,P,O,I,z},_.prototype.toRgb=function(){return o(this.rgba)},_.prototype.toRgbString=function(){return T=o(this.rgba),R=T.r,P=T.g,O=T.b,(I=T.a)<1?"rgba("+R+", "+P+", "+O+", "+I+")":"rgb("+R+", "+P+", "+O+")";var T,R,P,O,I},_.prototype.toHsl=function(){return d(c$3(this.rgba))},_.prototype.toHslString=function(){return T=d(c$3(this.rgba)),R=T.h,P=T.s,O=T.l,(I=T.a)<1?"hsla("+R+", "+P+"%, "+O+"%, "+I+")":"hsl("+R+", "+P+"%, "+O+"%)";var T,R,P,O,I},_.prototype.toHsv=function(){return T=h(this.rgba),{h:n(T.h),s:n(T.s),v:n(T.v),a:n(T.a,3)};var T},_.prototype.invert=function(){return w({r:255-(T=this.rgba).r,g:255-T.g,b:255-T.b,a:T.a});var T},_.prototype.saturate=function(T){return T===void 0&&(T=.1),w(M$1(this.rgba,T))},_.prototype.desaturate=function(T){return T===void 0&&(T=.1),w(M$1(this.rgba,-T))},_.prototype.grayscale=function(){return w(M$1(this.rgba,-1))},_.prototype.lighten=function(T){return T===void 0&&(T=.1),w($(this.rgba,T))},_.prototype.darken=function(T){return T===void 0&&(T=.1),w($(this.rgba,-T))},_.prototype.rotate=function(T){return T===void 0&&(T=15),this.hue(this.hue()+T)},_.prototype.alpha=function(T){return typeof T=="number"?w({r:(R=this.rgba).r,g:R.g,b:R.b,a:T}):n(this.rgba.a,3);var R},_.prototype.hue=function(T){var R=c$3(this.rgba);return typeof T=="number"?w({h:T,s:R.s,l:R.l,a:R.a}):n(R.h)},_.prototype.isEqual=function(T){return this.toHex()===w(T).toHex()},_})(),w=function(_){return _ instanceof j?_:new j(_)},S=[],k$1=function(_){_.forEach(function(T){S.indexOf(T)<0&&(T(j,y$1),S.push(T))})};function namesPlugin(_,T){var R={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},P={};for(var O in R)P[R[O]]=O;var I={};_.prototype.toName=function(z){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var F,G,V=P[this.toHex()];if(V)return V;if(z?.closest){var Z=this.toRgb(),Y=1/0,Q="black";if(!I.length)for(var J in R)I[J]=new _(R[J]).toRgb();for(var ee in R){var ne=(F=Z,G=I[ee],Math.pow(F.r-G.r,2)+Math.pow(F.g-G.g,2)+Math.pow(F.b-G.b,2));ne<Y&&(Y=ne,Q=ee)}return Q}},T.string.push([function(z){var F=z.toLowerCase(),G=F==="transparent"?"#0000":R[F];return G?new _(G).toRgb():null},"name"])}k$1([namesPlugin]);const _Color=class Ms{constructor(T=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=T}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(T){return this.value=T,this}set value(T){if(T instanceof Ms)this._value=this._cloneSource(T._value),this._int=T._int,this._components.set(T._components);else{if(T===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,T))&&(this._value=this._cloneSource(T),this._normalize(this._value))}}get value(){return this._value}_cloneSource(T){return typeof T=="string"||typeof T=="number"||T instanceof Number||T===null?T:Array.isArray(T)||ArrayBuffer.isView(T)?T.slice(0):typeof T=="object"&&T!==null?{...T}:T}_isSourceEqual(T,R){const P=typeof T;if(P!==typeof R)return!1;if(P==="number"||P==="string"||T instanceof Number)return T===R;if(Array.isArray(T)&&Array.isArray(R)||ArrayBuffer.isView(T)&&ArrayBuffer.isView(R))return T.length!==R.length?!1:T.every((I,z)=>I===R[z]);if(T!==null&&R!==null){const I=Object.keys(T),z=Object.keys(R);return I.length!==z.length?!1:I.every(F=>T[F]===R[F])}return T===R}toRgba(){const[T,R,P,O]=this._components;return{r:T,g:R,b:P,a:O}}toRgb(){const[T,R,P]=this._components;return{r:T,g:R,b:P}}toRgbaString(){const[T,R,P]=this.toUint8RgbArray();return`rgba(${T},${R},${P},${this.alpha})`}toUint8RgbArray(T){const[R,P,O]=this._components;return this._arrayRgb||(this._arrayRgb=[]),T||(T=this._arrayRgb),T[0]=Math.round(R*255),T[1]=Math.round(P*255),T[2]=Math.round(O*255),T}toArray(T){this._arrayRgba||(this._arrayRgba=[]),T||(T=this._arrayRgba);const[R,P,O,I]=this._components;return T[0]=R,T[1]=P,T[2]=O,T[3]=I,T}toRgbArray(T){this._arrayRgb||(this._arrayRgb=[]),T||(T=this._arrayRgb);const[R,P,O]=this._components;return T[0]=R,T[1]=P,T[2]=O,T}toNumber(){return this._int}toBgrNumber(){const[T,R,P]=this.toUint8RgbArray();return(P<<16)+(R<<8)+T}toLittleEndianNumber(){const T=this._int;return(T>>16)+(T&65280)+((T&255)<<16)}multiply(T){const[R,P,O,I]=Ms._temp.setValue(T)._components;return this._components[0]*=R,this._components[1]*=P,this._components[2]*=O,this._components[3]*=I,this._refreshInt(),this._value=null,this}premultiply(T,R=!0){return R&&(this._components[0]*=T,this._components[1]*=T,this._components[2]*=T),this._components[3]=T,this._refreshInt(),this._value=null,this}toPremultiplied(T,R=!0){if(T===1)return(255<<24)+this._int;if(T===0)return R?0:this._int;let P=this._int>>16&255,O=this._int>>8&255,I=this._int&255;return R&&(P=P*T+.5|0,O=O*T+.5|0,I=I*T+.5|0),(T*255<<24)+(P<<16)+(O<<8)+I}toHex(){const T=this._int.toString(16);return`#${"000000".substring(0,6-T.length)+T}`}toHexa(){const R=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-R.length)+R}setAlpha(T){return this._components[3]=this._clamp(T),this}_normalize(T){let R,P,O,I;if((typeof T=="number"||T instanceof Number)&&T>=0&&T<=16777215){const z=T;R=(z>>16&255)/255,P=(z>>8&255)/255,O=(z&255)/255,I=1}else if((Array.isArray(T)||T instanceof Float32Array)&&T.length>=3&&T.length<=4)T=this._clamp(T),[R,P,O,I=1]=T;else if((T instanceof Uint8Array||T instanceof Uint8ClampedArray)&&T.length>=3&&T.length<=4)T=this._clamp(T,0,255),[R,P,O,I=255]=T,R/=255,P/=255,O/=255,I/=255;else if(typeof T=="string"||typeof T=="object"){if(typeof T=="string"){const F=Ms.HEX_PATTERN.exec(T);F&&(T=`#${F[2]}`)}const z=w(T);z.isValid()&&({r:R,g:P,b:O,a:I}=z.rgba,R/=255,P/=255,O/=255)}if(R!==void 0)this._components[0]=R,this._components[1]=P,this._components[2]=O,this._components[3]=I,this._refreshInt();else throw new Error(`Unable to convert color ${T}`)}_refreshInt(){this._clamp(this._components);const[T,R,P]=this._components;this._int=(T*255<<16)+(R*255<<8)+(P*255|0)}_clamp(T,R=0,P=1){return typeof T=="number"?Math.min(Math.max(T,R),P):(T.forEach((O,I)=>{T[I]=Math.min(Math.max(O,R),P)}),T)}static isColorLike(T){return typeof T=="number"||typeof T=="string"||T instanceof Number||T instanceof Ms||Array.isArray(T)||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Float32Array||T.r!==void 0&&T.g!==void 0&&T.b!==void 0||T.r!==void 0&&T.g!==void 0&&T.b!==void 0&&T.a!==void 0||T.h!==void 0&&T.s!==void 0&&T.l!==void 0||T.h!==void 0&&T.s!==void 0&&T.l!==void 0&&T.a!==void 0||T.h!==void 0&&T.s!==void 0&&T.v!==void 0||T.h!==void 0&&T.s!==void 0&&T.v!==void 0&&T.a!==void 0}};_Color.shared=new _Color;_Color._temp=new _Color;_Color.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Color$1=_Color;const cullingMixin={cullArea:null,cullable:!1,cullableChildren:!0};let warnCount=0;const maxWarnings=500;function warn$1(..._){warnCount!==maxWarnings&&(warnCount++,warnCount===maxWarnings?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",..._))}const GlobalResourceRegistry={_registeredResources:new Set,register(_){this._registeredResources.add(_)},unregister(_){this._registeredResources.delete(_)},release(){this._registeredResources.forEach(_=>_.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(_){return this._registeredResources.has(_)},reset(){this._registeredResources.clear()}};class Pool{constructor(T,R){this._pool=[],this._count=0,this._index=0,this._classType=T,R&&this.prepopulate(R)}prepopulate(T){for(let R=0;R<T;R++)this._pool[this._index++]=new this._classType;this._count+=T}get(T){let R;return this._index>0?R=this._pool[--this._index]:(R=new this._classType,this._count++),R.init?.(T),R}return(T){T.reset?.(),this._pool[this._index++]=T}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let T=0;T<this._index;T++)this._pool[T].destroy();this._pool.length=0,this._count=0,this._index=0}}class PoolGroupClass{constructor(){this._poolsByClass=new Map}prepopulate(T,R){this.getPool(T).prepopulate(R)}get(T,R){return this.getPool(T).get(R)}return(T){this.getPool(T.constructor).return(T)}getPool(T){return this._poolsByClass.has(T)||this._poolsByClass.set(T,new Pool(T)),this._poolsByClass.get(T)}stats(){const T={};return this._poolsByClass.forEach(R=>{const P=T[R._classType.name]?R._classType.name+R._classType.ID:R._classType.name;T[P]={free:R.totalFree,used:R.totalUsed,size:R.totalSize}}),T}clear(){this._poolsByClass.forEach(T=>T.clear()),this._poolsByClass.clear()}}const BigPool=new PoolGroupClass;GlobalResourceRegistry.register(BigPool);const cacheAsTextureMixin={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(_){typeof _=="boolean"&&_===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(_===!0?{}:_))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(_){deprecation("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(_)}};function removeItems(_,T,R){const P=_.length;let O;if(T>=P||R===0)return;R=T+R>P?P-T:R;const I=P-R;for(O=T;O<I;++O)_[O]=_[O+R];_.length=I}const childrenHelperMixin={allowChildren:!0,removeChildren(_=0,T){const R=T??this.children.length,P=R-_,O=[];if(P>0&&P<=R){for(let z=R-1;z>=_;z--){const F=this.children[z];F&&(O.push(F),F.parent=null)}removeItems(this.children,_,R);const I=this.renderGroup||this.parentRenderGroup;I&&I.removeChildren(O);for(let z=0;z<O.length;++z){const F=O[z];F.parentRenderLayer?.detach(F),this.emit("childRemoved",F,this,z),O[z].emit("removed",this)}return O.length>0&&this._didViewChangeTick++,O}else if(P===0&&this.children.length===0)return O;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(_){const T=this.getChildAt(_);return this.removeChild(T)},getChildAt(_){if(_<0||_>=this.children.length)throw new Error(`getChildAt: Index (${_}) does not exist.`);return this.children[_]},setChildIndex(_,T){if(T<0||T>=this.children.length)throw new Error(`The index ${T} supplied is out of bounds ${this.children.length}`);this.getChildIndex(_),this.addChildAt(_,T)},getChildIndex(_){const T=this.children.indexOf(_);if(T===-1)throw new Error("The supplied Container must be a child of the caller");return T},addChildAt(_,T){this.allowChildren||deprecation(v8_0_0,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:R}=this;if(T<0||T>R.length)throw new Error(`${_}addChildAt: The index ${T} supplied is out of bounds ${R.length}`);if(_.parent){const O=_.parent.children.indexOf(_);if(_.parent===this&&O===T)return _;O!==-1&&_.parent.children.splice(O,1)}T===R.length?R.push(_):R.splice(T,0,_),_.parent=this,_.didChange=!0,_._updateFlags=15;const P=this.renderGroup||this.parentRenderGroup;return P&&P.addChild(_),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",_,this,T),_.emit("added",this),_},swapChildren(_,T){if(_===T)return;const R=this.getChildIndex(_),P=this.getChildIndex(T);this.children[R]=T,this.children[P]=_;const O=this.renderGroup||this.parentRenderGroup;O&&(O.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(..._){return _.length===1?this.reparentChildAt(_[0],this.children.length):(_.forEach(T=>this.reparentChildAt(T,this.children.length)),_[0])},reparentChildAt(_,T){if(_.parent===this)return this.setChildIndex(_,T),_;const R=_.worldTransform.clone();_.removeFromParent(),this.addChildAt(_,T);const P=this.worldTransform.clone();return P.invert(),R.prepend(P),_.setFromMatrix(R),_},replaceChild(_,T){_.updateLocalTransform(),this.addChildAt(T,this.getChildIndex(_)),T.setFromMatrix(_.localTransform),T.updateLocalTransform(),this.removeChild(_)}},collectRenderablesMixin={collectRenderables(_,T,R){this.parentRenderLayer&&this.parentRenderLayer!==R||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(_,T,R):this.renderGroup?T.renderPipes.renderGroup.addRenderGroup(this.renderGroup,_):this.collectRenderablesWithEffects(_,T,R))},collectRenderablesSimple(_,T,R){const P=this.children,O=P.length;for(let I=0;I<O;I++)P[I].collectRenderables(_,T,R)},collectRenderablesWithEffects(_,T,R){const{renderPipes:P}=T;for(let O=0;O<this.effects.length;O++){const I=this.effects[O];P[I.pipe].push(I,this,_)}this.collectRenderablesSimple(_,T,R);for(let O=this.effects.length-1;O>=0;O--){const I=this.effects[O];P[I.pipe].pop(I,this,_)}}};class FilterEffect{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let T=0;T<this.filters.length;T++)this.filters[T].destroy();this.filters=null,this.filterArea=null}}class MaskEffectManagerClass{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(T=>{this.add({test:T.test,maskClass:T})}))}add(T){this._tests.push(T)}getMaskEffect(T){this._initialized||this.init();for(let R=0;R<this._tests.length;R++){const P=this._tests[R];if(P.test(T))return BigPool.get(P.maskClass,T)}return T}returnMaskEffect(T){BigPool.return(T)}}const MaskEffectManager=new MaskEffectManagerClass;extensions.handleByList(ExtensionType.MaskEffect,MaskEffectManager._effectClasses);const effectsMixin={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const _=this.renderGroup||this.parentRenderGroup;_&&(_.structureDidChange=!0)},addEffect(_){this.effects.indexOf(_)===-1&&(this.effects.push(_),this.effects.sort((R,P)=>R.priority-P.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(_){const T=this.effects.indexOf(_);T!==-1&&(this.effects.splice(T,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(_){const T=this._maskEffect;T?.mask!==_&&(T&&(this.removeEffect(T),MaskEffectManager.returnMaskEffect(T),this._maskEffect=null),_!=null&&(this._maskEffect=MaskEffectManager.getMaskEffect(_),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(_){this._maskOptions={...this._maskOptions,..._},_.mask&&(this.mask=_.mask),this._markStructureAsChanged()},set filters(_){!Array.isArray(_)&&_&&(_=[_]);const T=this._filterEffect||(this._filterEffect=new FilterEffect);_=_;const R=_?.length>0,P=T.filters?.length>0,O=R!==P;_=Array.isArray(_)?_.slice(0):_,T.filters=Object.freeze(_),O&&(R?this.addEffect(T):(this.removeEffect(T),T.filters=_??null))},get filters(){return this._filterEffect?.filters},set filterArea(_){this._filterEffect||(this._filterEffect=new FilterEffect),this._filterEffect.filterArea=_},get filterArea(){return this._filterEffect?.filterArea}},findMixin={label:null,get name(){return deprecation(v8_0_0,"Container.name property has been removed, use Container.label instead"),this.label},set name(_){deprecation(v8_0_0,"Container.name property has been removed, use Container.label instead"),this.label=_},getChildByName(_,T=!1){return this.getChildByLabel(_,T)},getChildByLabel(_,T=!1){const R=this.children;for(let P=0;P<R.length;P++){const O=R[P];if(O.label===_||_ instanceof RegExp&&_.test(O.label))return O}if(T)for(let P=0;P<R.length;P++){const I=R[P].getChildByLabel(_,!0);if(I)return I}return null},getChildrenByLabel(_,T=!1,R=[]){const P=this.children;for(let O=0;O<P.length;O++){const I=P[O];(I.label===_||_ instanceof RegExp&&_.test(I.label))&&R.push(I)}if(T)for(let O=0;O<P.length;O++)P[O].getChildrenByLabel(_,!0,R);return R}},matrixPool=BigPool.getPool(Matrix),boundsPool=BigPool.getPool(Bounds),tempMatrix$2=new Matrix,getFastGlobalBoundsMixin={getFastGlobalBounds(_,T){T||(T=new Bounds),T.clear(),this._getGlobalBoundsRecursive(!!_,T,this.parentRenderLayer),T.isValid||T.set(0,0,0,0);const R=this.renderGroup||this.parentRenderGroup;return T.applyMatrix(R.worldTransform),T},_getGlobalBoundsRecursive(_,T,R){let P=T;if(_&&this.parentRenderLayer&&this.parentRenderLayer!==R||this.localDisplayStatus!==7||!this.measurable)return;const O=!!this.effects.length;if((this.renderGroup||O)&&(P=boundsPool.get().clear()),this.boundsArea)T.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const z=this.bounds;P.addFrame(z.minX,z.minY,z.maxX,z.maxY,this.groupTransform)}const I=this.children;for(let z=0;z<I.length;z++)I[z]._getGlobalBoundsRecursive(_,P,R)}if(O){let I=!1;const z=this.renderGroup||this.parentRenderGroup;for(let F=0;F<this.effects.length;F++)this.effects[F].addBounds&&(I||(I=!0,P.applyMatrix(z.worldTransform)),this.effects[F].addBounds(P,!0));I&&P.applyMatrix(z.worldTransform.copyTo(tempMatrix$2).invert()),T.addBounds(P),boundsPool.return(P)}else this.renderGroup&&(T.addBounds(P,this.relativeGroupTransform),boundsPool.return(P))}};function getGlobalBounds(_,T,R){R.clear();let P,O;return _.parent?T?P=_.parent.worldTransform:(O=matrixPool.get().identity(),P=updateTransformBackwards(_,O)):P=Matrix.IDENTITY,_getGlobalBounds(_,R,P,T),O&&matrixPool.return(O),R.isValid||R.set(0,0,0,0),R}function _getGlobalBounds(_,T,R,P){if(!_.visible||!_.measurable)return;let O;P?O=_.worldTransform:(_.updateLocalTransform(),O=matrixPool.get(),O.appendFrom(_.localTransform,R));const I=T,z=!!_.effects.length;if(z&&(T=boundsPool.get().clear()),_.boundsArea)T.addRect(_.boundsArea,O);else{const F=_.bounds;F&&!F.isEmpty()&&(T.matrix=O,T.addBounds(F));for(let G=0;G<_.children.length;G++)_getGlobalBounds(_.children[G],T,O,P)}if(z){for(let F=0;F<_.effects.length;F++)_.effects[F].addBounds?.(T);I.addBounds(T,Matrix.IDENTITY),boundsPool.return(T)}P||matrixPool.return(O)}function updateTransformBackwards(_,T){const R=_.parent;return R&&(updateTransformBackwards(R,T),R.updateLocalTransform(),T.append(R.localTransform)),T}function multiplyHexColors(_,T){if(_===16777215||!T)return T;if(T===16777215||!_)return _;const R=_>>16&255,P=_>>8&255,O=_&255,I=T>>16&255,z=T>>8&255,F=T&255,G=R*I/255|0,V=P*z/255|0,Z=O*F/255|0;return(G<<16)+(V<<8)+Z}const WHITE_BGR=16777215;function multiplyColors(_,T){return _===WHITE_BGR?T:T===WHITE_BGR?_:multiplyHexColors(_,T)}function bgr2rgb(_){return((_&255)<<16)+(_&65280)+(_>>16&255)}const getGlobalMixin={getGlobalAlpha(_){if(_)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let T=this.alpha,R=this.parent;for(;R;)T*=R.alpha,R=R.parent;return T},getGlobalTransform(_=new Matrix,T){if(T)return _.copyFrom(this.worldTransform);this.updateLocalTransform();const R=updateTransformBackwards(this,matrixPool.get().identity());return _.appendFrom(this.localTransform,R),matrixPool.return(R),_},getGlobalTint(_){if(_)return this.renderGroup?bgr2rgb(this.renderGroup.worldColor):this.parentRenderGroup?bgr2rgb(multiplyColors(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let T=this.localColor,R=this.parent;for(;R;)T=multiplyColors(T,R.localColor),R=R.parent;return bgr2rgb(T)}};function getLocalBounds(_,T,R){return T.clear(),R||(R=Matrix.IDENTITY),_getLocalBounds(_,T,R,_,!0),T.isValid||T.set(0,0,0,0),T}function _getLocalBounds(_,T,R,P,O){let I;if(O)I=matrixPool.get(),I=R.copyTo(I);else{if(!_.visible||!_.measurable)return;_.updateLocalTransform();const G=_.localTransform;I=matrixPool.get(),I.appendFrom(G,R)}const z=T,F=!!_.effects.length;if(F&&(T=boundsPool.get().clear()),_.boundsArea)T.addRect(_.boundsArea,I);else{_.renderPipeId&&(T.matrix=I,T.addBounds(_.bounds));const G=_.children;for(let V=0;V<G.length;V++)_getLocalBounds(G[V],T,I,P,!1)}if(F){for(let G=0;G<_.effects.length;G++)_.effects[G].addLocalBounds?.(T,P);z.addBounds(T,Matrix.IDENTITY),boundsPool.return(T)}matrixPool.return(I)}function checkChildrenDidChange(_,T){const R=_.children;for(let P=0;P<R.length;P++){const O=R[P],I=O.uid,z=(O._didViewChangeTick&65535)<<16|O._didContainerChangeTick&65535,F=T.index;(T.data[F]!==I||T.data[F+1]!==z)&&(T.data[T.index]=I,T.data[T.index+1]=z,T.didChange=!0),T.index=F+2,O.children.length&&checkChildrenDidChange(O,T)}return T.didChange}const tempMatrix$1=new Matrix,measureMixin={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(_,T){const R=Math.sign(this.scale.x)||1;T!==0?this.scale.x=_/T*R:this.scale.x=R},_setHeight(_,T){const R=Math.sign(this.scale.y)||1;T!==0?this.scale.y=_/T*R:this.scale.y=R},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Bounds});const _=this._localBoundsCacheData;return _.index=1,_.didChange=!1,_.data[0]!==this._didViewChangeTick&&(_.didChange=!0,_.data[0]=this._didViewChangeTick),checkChildrenDidChange(this,_),_.didChange&&getLocalBounds(this,_.localBounds,tempMatrix$1),_.localBounds},getBounds(_,T){return getGlobalBounds(this,_,T||new Bounds)}},onRenderMixin={_onRender:null,set onRender(_){const T=this.renderGroup||this.parentRenderGroup;if(!_){this._onRender&&T?.removeOnRender(this),this._onRender=null;return}this._onRender||T?.addOnRender(this),this._onRender=_},get onRender(){return this._onRender}},sortMixin={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(_){this._zIndex!==_&&(this._zIndex=_,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(sortChildren))}};function sortChildren(_,T){return _._zIndex-T._zIndex}const toLocalGlobalMixin={getGlobalPosition(_=new Point,T=!1){return this.parent?this.parent.toGlobal(this._position,_,T):(_.x=this._position.x,_.y=this._position.y),_},toGlobal(_,T,R=!1){const P=this.getGlobalTransform(matrixPool.get(),R);return T=P.apply(_,T),matrixPool.return(P),T},toLocal(_,T,R,P){T&&(_=T.toGlobal(_,R,P));const O=this.getGlobalTransform(matrixPool.get(),P);return R=O.applyInverse(_,R),matrixPool.return(O),R}};class InstructionSet{constructor(){this.uid=uid("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(T){this.instructions[this.instructionSize++]=T}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let count$1=0;class TexturePoolClass{constructor(T){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=T||{},this.enableFullScreen=!1,this.textureStyle=new TextureStyle(this.textureOptions)}createTexture(T,R,P){const O=new TextureSource({...this.textureOptions,width:T,height:R,resolution:1,antialias:P,autoGarbageCollect:!1});return new Texture({source:O,label:`texturePool_${count$1++}`})}getOptimalTexture(T,R,P=1,O){let I=Math.ceil(T*P-1e-6),z=Math.ceil(R*P-1e-6);I=nextPow2(I),z=nextPow2(z);const F=(I<<17)+(z<<1)+(O?1:0);this._texturePool[F]||(this._texturePool[F]=[]);let G=this._texturePool[F].pop();return G||(G=this.createTexture(I,z,O)),G.source._resolution=P,G.source.width=I/P,G.source.height=z/P,G.source.pixelWidth=I,G.source.pixelHeight=z,G.frame.x=0,G.frame.y=0,G.frame.width=T,G.frame.height=R,G.updateUvs(),this._poolKeyHash[G.uid]=F,G}getSameSizeTexture(T,R=!1){const P=T.source;return this.getOptimalTexture(T.width,T.height,P._resolution,R)}returnTexture(T,R=!1){const P=this._poolKeyHash[T.uid];R&&(T.source.style=this.textureStyle),this._texturePool[P].push(T)}clear(T){if(T=T!==!1,T)for(const R in this._texturePool){const P=this._texturePool[R];if(P)for(let O=0;O<P.length;O++)P[O].destroy(!0)}this._texturePool={}}}const TexturePool=new TexturePoolClass;GlobalResourceRegistry.register(TexturePool);class RenderGroup{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Matrix,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new InstructionSet,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(T){this.root=T,T._onRender&&this.addOnRender(T),T.didChange=!0;const R=T.children;for(let P=0;P<R.length;P++){const O=R[P];O._updateFlags=15,this.addChild(O)}}enableCacheAsTexture(T={}){this.textureOptions=T,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(TexturePool.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const T=this._parentCacheAsTextureRenderGroup;T&&!T.textureNeedsUpdate&&T.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const T in this.childrenToUpdate){const R=this.childrenToUpdate[T];R.list.fill(null),R.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(T){T.renderGroupParent&&T.renderGroupParent._removeRenderGroupChild(T),T.renderGroupParent=this,this.renderGroupChildren.push(T)}_removeRenderGroupChild(T){const R=this.renderGroupChildren.indexOf(T);R>-1&&this.renderGroupChildren.splice(R,1),T.renderGroupParent=null}addChild(T){if(this.structureDidChange=!0,T.parentRenderGroup=this,T.updateTick=-1,T.parent===this.root?T.relativeRenderGroupDepth=1:T.relativeRenderGroupDepth=T.parent.relativeRenderGroupDepth+1,T.didChange=!0,this.onChildUpdate(T),T.renderGroup){this.addRenderGroupChild(T.renderGroup);return}T._onRender&&this.addOnRender(T);const R=T.children;for(let P=0;P<R.length;P++)this.addChild(R[P])}removeChild(T){if(this.structureDidChange=!0,T._onRender&&(T.renderGroup||this.removeOnRender(T)),T.parentRenderGroup=null,T.renderGroup){this._removeRenderGroupChild(T.renderGroup);return}const R=T.children;for(let P=0;P<R.length;P++)this.removeChild(R[P])}removeChildren(T){for(let R=0;R<T.length;R++)this.removeChild(T[R])}onChildUpdate(T){let R=this.childrenToUpdate[T.relativeRenderGroupDepth];R||(R=this.childrenToUpdate[T.relativeRenderGroupDepth]={index:0,list:[]}),R.list[R.index++]=T}updateRenderable(T){T.globalDisplayStatus<7||(this.instructionSet.renderPipes[T.renderPipeId].updateRenderable(T),T.didViewUpdate=!1)}onChildViewUpdate(T){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=T}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(T){this._onRenderContainers.push(T)}removeOnRender(T){this._onRenderContainers.splice(this._onRenderContainers.indexOf(T),1)}runOnRender(T){for(let R=0;R<this._onRenderContainers.length;R++)this._onRenderContainers[R]._onRender(T)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(T=[]){const R=this.root.children;for(let P=0;P<R.length;P++)this._getChildren(R[P],T);return T}_getChildren(T,R=[]){if(R.push(T),T.renderGroup)return R;const P=T.children;for(let O=0;O<P.length;O++)this._getChildren(P[O],R);return R}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Matrix),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Matrix),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const T=this._parentCacheAsTextureRenderGroup;return T?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Matrix),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(T.inverseWorldTransform).translate(-T._textureBounds.x,-T._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function assignWithIgnore(_,T,R={}){for(const P in T)!R[P]&&T[P]!==void 0&&(_[P]=T[P])}const defaultSkew=new ObservablePoint(null),defaultPivot=new ObservablePoint(null),defaultScale=new ObservablePoint(null,1,1),defaultOrigin=new ObservablePoint(null),UPDATE_COLOR=1,UPDATE_BLEND=2,UPDATE_VISIBLE=4;class Container extends EventEmitter{constructor(T={}){super(),this.uid=uid("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Matrix,this.relativeGroupTransform=new Matrix,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new ObservablePoint(this,0,0),this._scale=defaultScale,this._pivot=defaultPivot,this._origin=defaultOrigin,this._skew=defaultSkew,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],assignWithIgnore(this,T,{children:!0,parent:!0,effects:!0}),T.children?.forEach(R=>this.addChild(R)),T.parent?.addChild(this)}static mixin(T){deprecation("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),extensions.mixin(Container,T)}set _didChangeId(T){this._didViewChangeTick=T>>12&4095,this._didContainerChangeTick=T&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...T){if(this.allowChildren||deprecation(v8_0_0,"addChild: Only Containers will be allowed to add children in v8.0.0"),T.length>1){for(let O=0;O<T.length;O++)this.addChild(T[O]);return T[0]}const R=T[0],P=this.renderGroup||this.parentRenderGroup;return R.parent===this?(this.children.splice(this.children.indexOf(R),1),this.children.push(R),P&&(P.structureDidChange=!0),R):(R.parent&&R.parent.removeChild(R),this.children.push(R),this.sortableChildren&&(this.sortDirty=!0),R.parent=this,R.didChange=!0,R._updateFlags=15,P&&P.addChild(R),this.emit("childAdded",R,this,this.children.length-1),R.emit("added",this),this._didViewChangeTick++,R._zIndex!==0&&R.depthOfChildModified(),R)}removeChild(...T){if(T.length>1){for(let O=0;O<T.length;O++)this.removeChild(T[O]);return T[0]}const R=T[0],P=this.children.indexOf(R);return P>-1&&(this._didViewChangeTick++,this.children.splice(P,1),this.renderGroup?this.renderGroup.removeChild(R):this.parentRenderGroup&&this.parentRenderGroup.removeChild(R),R.parentRenderLayer&&R.parentRenderLayer.detach(R),R.parent=null,this.emit("childRemoved",R,this,P),R.emit("removed",this)),R}_onUpdate(T){T&&T===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(T){!!this.renderGroup!==T&&(T?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const T=this.parentRenderGroup;T?.removeChild(this),this.renderGroup=BigPool.get(RenderGroup,this),this.groupTransform=Matrix.IDENTITY,T?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const T=this.parentRenderGroup;T?.removeChild(this),BigPool.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,T?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Matrix),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(T){this._position.x=T}get y(){return this._position.y}set y(T){this._position.y=T}get position(){return this._position}set position(T){this._position.copyFrom(T)}get rotation(){return this._rotation}set rotation(T){this._rotation!==T&&(this._rotation=T,this._onUpdate(this._skew))}get angle(){return this.rotation*RAD_TO_DEG}set angle(T){this.rotation=T*DEG_TO_RAD}get pivot(){return this._pivot===defaultPivot&&(this._pivot=new ObservablePoint(this,0,0)),this._pivot}set pivot(T){this._pivot===defaultPivot&&(this._pivot=new ObservablePoint(this,0,0),this._origin!==defaultOrigin&&warn$1("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof T=="number"?this._pivot.set(T):this._pivot.copyFrom(T)}get skew(){return this._skew===defaultSkew&&(this._skew=new ObservablePoint(this,0,0)),this._skew}set skew(T){this._skew===defaultSkew&&(this._skew=new ObservablePoint(this,0,0)),this._skew.copyFrom(T)}get scale(){return this._scale===defaultScale&&(this._scale=new ObservablePoint(this,1,1)),this._scale}set scale(T){this._scale===defaultScale&&(this._scale=new ObservablePoint(this,0,0)),typeof T=="string"&&(T=parseFloat(T)),typeof T=="number"?this._scale.set(T):this._scale.copyFrom(T)}get origin(){return this._origin===defaultOrigin&&(this._origin=new ObservablePoint(this,0,0)),this._origin}set origin(T){this._origin===defaultOrigin&&(this._origin=new ObservablePoint(this,0,0),this._pivot!==defaultPivot&&warn$1("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof T=="number"?this._origin.set(T):this._origin.copyFrom(T)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(T){const R=this.getLocalBounds().width;this._setWidth(T,R)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(T){const R=this.getLocalBounds().height;this._setHeight(T,R)}getSize(T){T||(T={});const R=this.getLocalBounds();return T.width=Math.abs(this.scale.x*R.width),T.height=Math.abs(this.scale.y*R.height),T}setSize(T,R){const P=this.getLocalBounds();typeof T=="object"?(R=T.height??T.width,T=T.width):R??(R=T),T!==void 0&&this._setWidth(T,P.width),R!==void 0&&this._setHeight(R,P.height)}_updateSkew(){const T=this._rotation,R=this._skew;this._cx=Math.cos(T+R._y),this._sx=Math.sin(T+R._y),this._cy=-Math.sin(T-R._x),this._sy=Math.cos(T-R._x)}updateTransform(T){return this.position.set(typeof T.x=="number"?T.x:this.position.x,typeof T.y=="number"?T.y:this.position.y),this.scale.set(typeof T.scaleX=="number"?T.scaleX||1:this.scale.x,typeof T.scaleY=="number"?T.scaleY||1:this.scale.y),this.rotation=typeof T.rotation=="number"?T.rotation:this.rotation,this.skew.set(typeof T.skewX=="number"?T.skewX:this.skew.x,typeof T.skewY=="number"?T.skewY:this.skew.y),this.pivot.set(typeof T.pivotX=="number"?T.pivotX:this.pivot.x,typeof T.pivotY=="number"?T.pivotY:this.pivot.y),this.origin.set(typeof T.originX=="number"?T.originX:this.origin.x,typeof T.originY=="number"?T.originY:this.origin.y),this}setFromMatrix(T){T.decompose(this)}updateLocalTransform(){const T=this._didContainerChangeTick;if(this._didLocalTransformChangeId===T)return;this._didLocalTransformChangeId=T;const R=this.localTransform,P=this._scale,O=this._pivot,I=this._origin,z=this._position,F=P._x,G=P._y,V=O._x,Z=O._y,Y=-I._x,Q=-I._y;R.a=this._cx*F,R.b=this._sx*F,R.c=this._cy*G,R.d=this._sy*G,R.tx=z._x-(V*R.a+Z*R.c)+(Y*R.a+Q*R.c)-Y,R.ty=z._y-(V*R.b+Z*R.d)+(Y*R.b+Q*R.d)-Q}set alpha(T){T!==this.localAlpha&&(this.localAlpha=T,this._updateFlags|=UPDATE_COLOR,this._onUpdate())}get alpha(){return this.localAlpha}set tint(T){const P=Color$1.shared.setValue(T??16777215).toBgrNumber();P!==this.localColor&&(this.localColor=P,this._updateFlags|=UPDATE_COLOR,this._onUpdate())}get tint(){return bgr2rgb(this.localColor)}set blendMode(T){this.localBlendMode!==T&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=UPDATE_BLEND,this.localBlendMode=T,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(T){const R=T?2:0;(this.localDisplayStatus&2)!==R&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=UPDATE_VISIBLE,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(T){const R=T?0:4;(this.localDisplayStatus&4)!==R&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=UPDATE_VISIBLE,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(T){const R=T?1:0;(this.localDisplayStatus&1)!==R&&(this._updateFlags|=UPDATE_VISIBLE,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(T=!1){if(this.destroyed)return;this.destroyed=!0;let R;if(this.children.length&&(R=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof T=="boolean"?T:T?.children)&&R)for(let O=0;O<R.length;++O)R[O].destroy(T);this.renderGroup?.destroy(),this.renderGroup=null}}extensions.mixin(Container,childrenHelperMixin,getFastGlobalBoundsMixin,toLocalGlobalMixin,onRenderMixin,measureMixin,effectsMixin,findMixin,sortMixin,cullingMixin,cacheAsTextureMixin,getGlobalMixin,collectRenderablesMixin);class ViewContainer extends Container{constructor(T){super(T),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new Bounds(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(T){this._roundPixels=T?1:0}containsPoint(T){const R=this.bounds,{x:P,y:O}=T;return P>=R.minX&&P<=R.maxX&&O>=R.minY&&O<=R.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const T=this.renderGroup||this.parentRenderGroup;T&&T.onChildViewUpdate(this)}destroy(T){super.destroy(T),this._bounds=null;for(const R in this._gpuData)this._gpuData[R].destroy?.();this._gpuData=null}collectRenderablesSimple(T,R,P){const{renderPipes:O}=R;O.blendMode.pushBlendMode(this,this.groupBlendMode,T),O[this.renderPipeId].addRenderable(this,T),this.didViewUpdate=!1;const z=this.children,F=z.length;for(let G=0;G<F;G++)z[G].collectRenderables(T,R,P);O.blendMode.popBlendMode(T)}}class Sprite extends ViewContainer{constructor(T=Texture.EMPTY){T instanceof Texture&&(T={texture:T});const{texture:R=Texture.EMPTY,anchor:P,roundPixels:O,width:I,height:z,...F}=T;super({label:"Sprite",...F}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new ObservablePoint({_onUpdate:()=>{this.onViewUpdate()}}),P?this.anchor=P:R.defaultAnchor&&(this.anchor=R.defaultAnchor),this.texture=R,this.allowChildren=!1,this.roundPixels=O??!1,I!==void 0&&(this.width=I),z!==void 0&&(this.height=z)}static from(T,R=!1){return T instanceof Texture?new Sprite(T):new Sprite(Texture.from(T,R))}set texture(T){T||(T=Texture.EMPTY);const R=this._texture;R!==T&&(R&&R.dynamic&&R.off("update",this.onViewUpdate,this),T.dynamic&&T.on("update",this.onViewUpdate,this),this._texture=T,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return updateQuadBounds(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return deprecation("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const T=this._anchor,R=this._texture,P=this._bounds,{width:O,height:I}=R.orig;P.minX=-T._x*O,P.maxX=P.minX+O,P.minY=-T._y*I,P.maxY=P.minY+I}destroy(T=!1){if(super.destroy(T),typeof T=="boolean"?T:T?.texture){const P=typeof T=="boolean"?T:T?.textureSource;this._texture.destroy(P)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(T){typeof T=="number"?this._anchor.set(T):this._anchor.copyFrom(T)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(T){this._setWidth(T,this._texture.orig.width),this._width=T}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(T){this._setHeight(T,this._texture.orig.height),this._height=T}getSize(T){return T||(T={}),T.width=Math.abs(this.scale.x)*this._texture.orig.width,T.height=Math.abs(this.scale.y)*this._texture.orig.height,T}setSize(T,R){typeof T=="object"?(R=T.height??T.width,T=T.width):R??(R=T),T!==void 0&&this._setWidth(T,this._texture.orig.width),R!==void 0&&this._setHeight(R,this._texture.orig.height)}}const tempBounds=new Bounds;function addMaskBounds(_,T,R){const P=tempBounds;_.measurable=!0,getGlobalBounds(_,R,P),T.addBoundsMask(P),_.measurable=!1}function addMaskLocalBounds(_,T,R){const P=boundsPool.get();_.measurable=!0;const O=matrixPool.get().identity(),I=getMatrixRelativeToParent(_,R,O);getLocalBounds(_,P,I),_.measurable=!1,T.addBoundsMask(P),matrixPool.return(O),boundsPool.return(P)}function getMatrixRelativeToParent(_,T,R){return _?(_!==T&&(getMatrixRelativeToParent(_.parent,T,R),_.updateLocalTransform(),R.append(_.localTransform)),R):(warn$1("Mask bounds, renderable is not inside the root container"),R)}class AlphaMask{constructor(T){this.priority=0,this.inverse=!1,this.pipe="alphaMask",T?.mask&&this.init(T.mask)}init(T){this.mask=T,this.renderMaskToTexture=!(T instanceof Sprite),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(T,R){this.inverse||addMaskBounds(this.mask,T,R)}addLocalBounds(T,R){addMaskLocalBounds(this.mask,T,R)}containsPoint(T,R){const P=this.mask;return R(P,T)}destroy(){this.reset()}static test(T){return T instanceof Sprite}}AlphaMask.extension=ExtensionType.MaskEffect;class ColorMask{constructor(T){this.priority=0,this.pipe="colorMask",T?.mask&&this.init(T.mask)}init(T){this.mask=T}destroy(){}static test(T){return typeof T=="number"}}ColorMask.extension=ExtensionType.MaskEffect;class StencilMask{constructor(T){this.priority=0,this.pipe="stencilMask",T?.mask&&this.init(T.mask)}init(T){this.mask=T,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(T,R){addMaskBounds(this.mask,T,R)}addLocalBounds(T,R){addMaskLocalBounds(this.mask,T,R)}containsPoint(T,R){const P=this.mask;return R(P,T)}destroy(){this.reset()}static test(T){return T instanceof Container}}StencilMask.extension=ExtensionType.MaskEffect;const BrowserAdapter={createCanvas:(_,T)=>{const R=document.createElement("canvas");return R.width=_,R.height=T,R},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(_,T)=>fetch(_,T),parseXML:_=>new DOMParser().parseFromString(_,"text/xml")};let currentAdapter=BrowserAdapter;const DOMAdapter={get(){return currentAdapter},set(_){currentAdapter=_}};class CanvasSource extends TextureSource{constructor(T){T.resource||(T.resource=DOMAdapter.get().createCanvas()),T.width||(T.width=T.resource.width,T.autoDensity||(T.width/=T.resolution)),T.height||(T.height=T.resource.height,T.autoDensity||(T.height/=T.resolution)),super(T),this.uploadMethodId="image",this.autoDensity=T.autoDensity,this.resizeCanvas(),this.transparent=!!T.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(T=this.width,R=this.height,P=this._resolution){const O=super.resize(T,R,P);return O&&this.resizeCanvas(),O}static test(T){return globalThis.HTMLCanvasElement&&T instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&T instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}CanvasSource.extension=ExtensionType.TextureSource;class ImageSource extends TextureSource{constructor(T){super(T),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(T){return globalThis.HTMLImageElement&&T instanceof HTMLImageElement||typeof ImageBitmap<"u"&&T instanceof ImageBitmap||globalThis.VideoFrame&&T instanceof VideoFrame}}ImageSource.extension=ExtensionType.TextureSource;var UPDATE_PRIORITY=(_=>(_[_.INTERACTION=50]="INTERACTION",_[_.HIGH=25]="HIGH",_[_.NORMAL=0]="NORMAL",_[_.LOW=-25]="LOW",_[_.UTILITY=-50]="UTILITY",_))(UPDATE_PRIORITY||{});class TickerListener{constructor(T,R=null,P=0,O=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=T,this._context=R,this.priority=P,this._once=O}match(T,R=null){return this._fn===T&&this._context===R}emit(T){this._fn&&(this._context?this._fn.call(this._context,T):this._fn(T));const R=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),R}connect(T){this.previous=T,T.next&&(T.next.previous=this),this.next=T.next,T.next=this}destroy(T=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const R=this.next;return this.next=T?null:R,this.previous=null,R}}const _Ticker=class vn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/vn.targetFPMS,this.elapsedMS=1/vn.targetFPMS,this._tick=T=>{this._requestId=null,this.started&&(this.update(T),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(T,R,P=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(T,R,P))}addOnce(T,R,P=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(T,R,P,!0))}_addListener(T){let R=this._head.next,P=this._head;if(!R)T.connect(P);else{for(;R;){if(T.priority>R.priority){T.connect(P);break}P=R,R=R.next}T.previous||T.connect(P)}return this._startIfPossible(),this}remove(T,R){let P=this._head.next;for(;P;)P.match(T,R)?P=P.destroy():P=P.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let T=0,R=this._head;for(;R=R.next;)T++;return T}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let T=this._head.next;for(;T;)T=T.destroy(!0);this._head.destroy(),this._head=null}}update(T=performance.now()){let R;if(T>this.lastTime){if(R=this.elapsedMS=T-this.lastTime,R>this._maxElapsedMS&&(R=this._maxElapsedMS),R*=this.speed,this._minElapsedMS){const I=T-this._lastFrame|0;if(I<this._minElapsedMS)return;this._lastFrame=T-I%this._minElapsedMS}this.deltaMS=R,this.deltaTime=this.deltaMS*vn.targetFPMS;const P=this._head;let O=P.next;for(;O;)O=O.emit(this);P.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=T}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(T){const R=Math.min(this.maxFPS,T),P=Math.min(Math.max(0,R)/1e3,vn.targetFPMS);this._maxElapsedMS=1/P}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(T){if(T===0)this._minElapsedMS=0;else{const R=Math.max(this.minFPS,T);this._minElapsedMS=1/(R/1e3)}}static get shared(){if(!vn._shared){const T=vn._shared=new vn;T.autoStart=!0,T._protected=!0}return vn._shared}static get system(){if(!vn._system){const T=vn._system=new vn;T.autoStart=!0,T._protected=!0}return vn._system}};_Ticker.targetFPMS=.06;let Ticker=_Ticker,promise;async function detectVideoAlphaMode(){return promise??(promise=(async()=>{const T=DOMAdapter.get().createCanvas(1,1).getContext("webgl");if(!T)return"premultiply-alpha-on-upload";const R=await new Promise(z=>{const F=document.createElement("video");F.onloadeddata=()=>z(F),F.onerror=()=>z(null),F.autoplay=!1,F.crossOrigin="anonymous",F.preload="auto",F.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",F.load()});if(!R)return"premultiply-alpha-on-upload";const P=T.createTexture();T.bindTexture(T.TEXTURE_2D,P);const O=T.createFramebuffer();T.bindFramebuffer(T.FRAMEBUFFER,O),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,P,0),T.pixelStorei(T.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),T.pixelStorei(T.UNPACK_COLORSPACE_CONVERSION_WEBGL,T.NONE),T.texImage2D(T.TEXTURE_2D,0,T.RGBA,T.RGBA,T.UNSIGNED_BYTE,R);const I=new Uint8Array(4);return T.readPixels(0,0,1,1,T.RGBA,T.UNSIGNED_BYTE,I),T.deleteFramebuffer(O),T.deleteTexture(P),T.getExtension("WEBGL_lose_context")?.loseContext(),I[0]<=I[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),promise}const _VideoSource=class dd extends TextureSource{constructor(T){super(T),this.isReady=!1,this.uploadMethodId="video",T={...dd.defaultOptions,...T},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=T.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=T.autoPlay!==!1,this.alphaMode=T.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),T.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const T=Ticker.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-T)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const T=this.resource,R=this.options;return(T.readyState===T.HAVE_ENOUGH_DATA||T.readyState===T.HAVE_FUTURE_DATA)&&T.width&&T.height&&(T.complete=!0),T.addEventListener("play",this._onPlayStart),T.addEventListener("pause",this._onPlayStop),T.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(R.preload||T.addEventListener("canplay",this._onCanPlay),T.addEventListener("canplaythrough",this._onCanPlayThrough),T.addEventListener("error",this._onError,!0)),this.alphaMode=await detectVideoAlphaMode(),this._load=new Promise((P,O)=>{this.isValid?P(this):(this._resolve=P,this._reject=O,R.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${R.preloadTimeoutMs}ms`))})),T.load())}),this._load}_onError(T){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",T),this._reject&&(this._reject(T),this._reject=null,this._resolve=null)}_isSourcePlaying(){const T=this.resource;return!T.paused&&!T.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const T=this.resource;this.isValid&&(this.isReady=!0,this.resize(T.videoWidth,T.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const T=this.resource;T&&(T.removeEventListener("play",this._onPlayStart),T.removeEventListener("pause",this._onPlayStop),T.removeEventListener("seeked",this._onSeeked),T.removeEventListener("canplay",this._onCanPlay),T.removeEventListener("canplaythrough",this._onCanPlayThrough),T.removeEventListener("error",this._onError,!0),T.pause(),T.src="",T.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(T){T!==this._autoUpdate&&(this._autoUpdate=T,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(T){T!==this._updateFPS&&(this._updateFPS=T,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ticker.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ticker.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ticker.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(T){return globalThis.HTMLVideoElement&&T instanceof HTMLVideoElement}};_VideoSource.extension=ExtensionType.TextureSource;_VideoSource.defaultOptions={...TextureSource.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};_VideoSource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let VideoSource=_VideoSource;const convertToList=(_,T,R=!1)=>(Array.isArray(_)||(_=[_]),T?_.map(P=>typeof P=="string"||R?T(P):P):_);class CacheClass{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(T){return this._cache.has(T)}get(T){const R=this._cache.get(T);return R||warn$1(`[Assets] Asset id ${T} was not found in the Cache`),R}set(T,R){const P=convertToList(T);let O;for(let G=0;G<this.parsers.length;G++){const V=this.parsers[G];if(V.test(R)){O=V.getCacheableAssets(P,R);break}}const I=new Map(Object.entries(O||{}));O||P.forEach(G=>{I.set(G,R)});const z=[...I.keys()],F={cacheKeys:z,keys:P};P.forEach(G=>{this._cacheMap.set(G,F)}),z.forEach(G=>{const V=O?O[G]:R;this._cache.has(G)&&this._cache.get(G)!==V&&warn$1("[Cache] already has key:",G),this._cache.set(G,I.get(G))})}remove(T){if(!this._cacheMap.has(T)){warn$1(`[Assets] Asset id ${T} was not found in the Cache`);return}const R=this._cacheMap.get(T);R.cacheKeys.forEach(O=>{this._cache.delete(O)}),R.keys.forEach(O=>{this._cacheMap.delete(O)})}get parsers(){return this._parsers}}const Cache=new CacheClass,sources=[];extensions.handleByList(ExtensionType.TextureSource,sources);function textureSourceFrom(_={}){const T=_&&_.resource,R=T?_.resource:_,P=T?_:{resource:_};for(let O=0;O<sources.length;O++){const I=sources[O];if(I.test(R))return new I(P)}throw new Error(`Could not find a source type for resource: ${P.resource}`)}function resourceToTexture(_={},T=!1){const R=_&&_.resource,P=R?_.resource:_,O=R?_:{resource:_};if(!T&&Cache.has(P))return Cache.get(P);const I=new Texture({source:textureSourceFrom(O)});return I.on("destroy",()=>{Cache.has(P)&&Cache.remove(P)}),T||Cache.set(P,I),I}function textureFrom(_,T=!1){return typeof _=="string"?Cache.get(_):_ instanceof TextureSource?new Texture({source:_}):resourceToTexture(_,T)}Texture.from=textureFrom;TextureSource.from=textureSourceFrom;extensions.add(AlphaMask,ColorMask,StencilMask,VideoSource,ImageSource,CanvasSource,BufferImageSource);var LoaderParserPriority=(_=>(_[_.Low=0]="Low",_[_.Normal=1]="Normal",_[_.High=2]="High",_))(LoaderParserPriority||{});function assertPath(_){if(typeof _!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(_)}`)}function removeUrlParams(_){return _.split("?")[0].split("#")[0]}function escapeRegExp(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(_,T,R){return _.replace(new RegExp(escapeRegExp(T),"g"),R)}function normalizeStringPosix(_,T){let R="",P=0,O=-1,I=0,z=-1;for(let F=0;F<=_.length;++F){if(F<_.length)z=_.charCodeAt(F);else{if(z===47)break;z=47}if(z===47){if(!(O===F-1||I===1))if(O!==F-1&&I===2){if(R.length<2||P!==2||R.charCodeAt(R.length-1)!==46||R.charCodeAt(R.length-2)!==46){if(R.length>2){const G=R.lastIndexOf("/");if(G!==R.length-1){G===-1?(R="",P=0):(R=R.slice(0,G),P=R.length-1-R.lastIndexOf("/")),O=F,I=0;continue}}else if(R.length===2||R.length===1){R="",P=0,O=F,I=0;continue}}}else R.length>0?R+=`/${_.slice(O+1,F)}`:R=_.slice(O+1,F),P=F-O-1;O=F,I=0}else z===46&&I!==-1?++I:I=-1}return R}const path={toPosix(_){return replaceAll(_,"\\","/")},isUrl(_){return/^https?:/.test(this.toPosix(_))},isDataUrl(_){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(_)},isBlobUrl(_){return _.startsWith("blob:")},hasProtocol(_){return/^[^/:]+:/.test(this.toPosix(_))},getProtocol(_){assertPath(_),_=this.toPosix(_);const T=/^file:\/\/\//.exec(_);if(T)return T[0];const R=/^[^/:]+:\/{0,2}/.exec(_);return R?R[0]:""},toAbsolute(_,T,R){if(assertPath(_),this.isDataUrl(_)||this.isBlobUrl(_))return _;const P=removeUrlParams(this.toPosix(T??DOMAdapter.get().getBaseUrl())),O=removeUrlParams(this.toPosix(R??this.rootname(P)));return _=this.toPosix(_),_.startsWith("/")?path.join(O,_.slice(1)):this.isAbsolute(_)?_:this.join(P,_)},normalize(_){if(assertPath(_),_.length===0)return".";if(this.isDataUrl(_)||this.isBlobUrl(_))return _;_=this.toPosix(_);let T="";const R=_.startsWith("/");this.hasProtocol(_)&&(T=this.rootname(_),_=_.slice(T.length));const P=_.endsWith("/");return _=normalizeStringPosix(_),_.length>0&&P&&(_+="/"),R?`/${_}`:T+_},isAbsolute(_){return assertPath(_),_=this.toPosix(_),this.hasProtocol(_)?!0:_.startsWith("/")},join(..._){if(_.length===0)return".";let T;for(let R=0;R<_.length;++R){const P=_[R];if(assertPath(P),P.length>0)if(T===void 0)T=P;else{const O=_[R-1]??"";this.joinExtensions.includes(this.extname(O).toLowerCase())?T+=`/../${P}`:T+=`/${P}`}}return T===void 0?".":this.normalize(T)},dirname(_){if(assertPath(_),_.length===0)return".";_=this.toPosix(_);let T=_.charCodeAt(0);const R=T===47;let P=-1,O=!0;const I=this.getProtocol(_),z=_;_=_.slice(I.length);for(let F=_.length-1;F>=1;--F)if(T=_.charCodeAt(F),T===47){if(!O){P=F;break}}else O=!1;return P===-1?R?"/":this.isUrl(z)?I+_:I:R&&P===1?"//":I+_.slice(0,P)},rootname(_){assertPath(_),_=this.toPosix(_);let T="";if(_.startsWith("/")?T="/":T=this.getProtocol(_),this.isUrl(_)){const R=_.indexOf("/",T.length);R!==-1?T=_.slice(0,R):T=_,T.endsWith("/")||(T+="/")}return T},basename(_,T){assertPath(_),T&&assertPath(T),_=removeUrlParams(this.toPosix(_));let R=0,P=-1,O=!0,I;if(T!==void 0&&T.length>0&&T.length<=_.length){if(T.length===_.length&&T===_)return"";let z=T.length-1,F=-1;for(I=_.length-1;I>=0;--I){const G=_.charCodeAt(I);if(G===47){if(!O){R=I+1;break}}else F===-1&&(O=!1,F=I+1),z>=0&&(G===T.charCodeAt(z)?--z===-1&&(P=I):(z=-1,P=F))}return R===P?P=F:P===-1&&(P=_.length),_.slice(R,P)}for(I=_.length-1;I>=0;--I)if(_.charCodeAt(I)===47){if(!O){R=I+1;break}}else P===-1&&(O=!1,P=I+1);return P===-1?"":_.slice(R,P)},extname(_){assertPath(_),_=removeUrlParams(this.toPosix(_));let T=-1,R=0,P=-1,O=!0,I=0;for(let z=_.length-1;z>=0;--z){const F=_.charCodeAt(z);if(F===47){if(!O){R=z+1;break}continue}P===-1&&(O=!1,P=z+1),F===46?T===-1?T=z:I!==1&&(I=1):T!==-1&&(I=-1)}return T===-1||P===-1||I===0||I===1&&T===P-1&&T===R+1?"":_.slice(T,P)},parse(_){assertPath(_);const T={root:"",dir:"",base:"",ext:"",name:""};if(_.length===0)return T;_=removeUrlParams(this.toPosix(_));let R=_.charCodeAt(0);const P=this.isAbsolute(_);let O;T.root=this.rootname(_),P||this.hasProtocol(_)?O=1:O=0;let I=-1,z=0,F=-1,G=!0,V=_.length-1,Z=0;for(;V>=O;--V){if(R=_.charCodeAt(V),R===47){if(!G){z=V+1;break}continue}F===-1&&(G=!1,F=V+1),R===46?I===-1?I=V:Z!==1&&(Z=1):I!==-1&&(Z=-1)}return I===-1||F===-1||Z===0||Z===1&&I===F-1&&I===z+1?F!==-1&&(z===0&&P?T.base=T.name=_.slice(1,F):T.base=T.name=_.slice(z,F)):(z===0&&P?(T.name=_.slice(1,I),T.base=_.slice(1,F)):(T.name=_.slice(z,I),T.base=_.slice(z,F)),T.ext=_.slice(I,F)),T.dir=this.dirname(_),T},sep:"/",delimiter:":",joinExtensions:[".html"]};function processX(_,T,R,P,O){const I=T[R];for(let z=0;z<I.length;z++){const F=I[z];R<T.length-1?processX(_.replace(P[R],F),T,R+1,P,O):O.push(_.replace(P[R],F))}}function createStringVariations(_){const T=/\{(.*?)\}/g,R=_.match(T),P=[];if(R){const O=[];R.forEach(I=>{const z=I.substring(1,I.length-1).split(",");O.push(z)}),processX(_,O,0,R,P)}else P.push(_);return P}const isSingleItem=_=>!Array.isArray(_);class Resolver{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(T,R)=>`${T}${this._bundleIdConnector}${R}`,extractAssetIdFromBundle:(T,R)=>R.replace(`${T}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(T){if(this._bundleIdConnector=T.connector??this._bundleIdConnector,this._createBundleAssetId=T.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=T.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...T){T.forEach(R=>{this._preferredOrder.push(R),R.priority||(R.priority=Object.keys(R.params))}),this._resolverHash={}}set basePath(T){this._basePath=T}get basePath(){return this._basePath}set rootPath(T){this._rootPath=T}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(T){if(typeof T=="string")this._defaultSearchParams=T;else{const R=T;this._defaultSearchParams=Object.keys(R).map(P=>`${encodeURIComponent(P)}=${encodeURIComponent(R[P])}`).join("&")}}getAlias(T){const{alias:R,src:P}=T;return convertToList(R||P,I=>typeof I=="string"?I:Array.isArray(I)?I.map(z=>z?.src??z):I?.src?I.src:I,!0)}addManifest(T){this._manifest&&warn$1("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=T,T.bundles.forEach(R=>{this.addBundle(R.name,R.assets)})}addBundle(T,R){const P=[];let O=R;Array.isArray(R)||(O=Object.entries(R).map(([I,z])=>typeof z=="string"||Array.isArray(z)?{alias:I,src:z}:{alias:I,...z})),O.forEach(I=>{const z=I.src,F=I.alias;let G;if(typeof F=="string"){const V=this._createBundleAssetId(T,F);P.push(V),G=[F,V]}else{const V=F.map(Z=>this._createBundleAssetId(T,Z));P.push(...V),G=[...F,...V]}this.add({...I,alias:G,src:z})}),this._bundles[T]=P}add(T){const R=[];Array.isArray(T)?R.push(...T):R.push(T);let P;P=I=>{this.hasKey(I)&&warn$1(`[Resolver] already has key: ${I} overwriting`)},convertToList(R).forEach(I=>{const{src:z}=I;let{data:F,format:G,loadParser:V,parser:Z}=I;const Y=convertToList(z).map(ne=>typeof ne=="string"?createStringVariations(ne):Array.isArray(ne)?ne:[ne]),Q=this.getAlias(I);Array.isArray(Q)?Q.forEach(P):P(Q);const J=[],ee=ne=>({...this._parsers.find(oe=>oe.test(ne))?.parse(ne),src:ne});Y.forEach(ne=>{ne.forEach(se=>{let oe={};if(typeof se!="object"?oe=ee(se):(F=se.data??F,G=se.format??G,(se.loadParser||se.parser)&&(V=se.loadParser??V,Z=se.parser??Z),oe={...ee(se.src),...se}),!Q)throw new Error(`[Resolver] alias is undefined for this asset: ${oe.src}`);oe=this._buildResolvedAsset(oe,{aliases:Q,data:F,format:G,loadParser:V,parser:Z,progressSize:I.progressSize}),J.push(oe)})}),Q.forEach(ne=>{this._assetMap[ne]=J})})}resolveBundle(T){const R=isSingleItem(T);T=convertToList(T);const P={};return T.forEach(O=>{const I=this._bundles[O];if(I){const z=this.resolve(I),F={};for(const G in z){const V=z[G];F[this._extractAssetIdFromBundle(O,G)]=V}P[O]=F}}),R?P[T[0]]:P}resolveUrl(T){const R=this.resolve(T);if(typeof T!="string"){const P={};for(const O in R)P[O]=R[O].src;return P}return R.src}resolve(T){const R=isSingleItem(T);T=convertToList(T);const P={};return T.forEach(O=>{if(!this._resolverHash[O])if(this._assetMap[O]){let I=this._assetMap[O];const z=this._getPreferredOrder(I);z?.priority.forEach(F=>{z.params[F].forEach(G=>{const V=I.filter(Z=>Z[F]?Z[F]===G:!1);V.length&&(I=V)})}),this._resolverHash[O]=I[0]}else this._resolverHash[O]=this._buildResolvedAsset({alias:[O],src:O},{});P[O]=this._resolverHash[O]}),R?P[T[0]]:P}hasKey(T){return!!this._assetMap[T]}hasBundle(T){return!!this._bundles[T]}_getPreferredOrder(T){for(let R=0;R<T.length;R++){const P=T[R],O=this._preferredOrder.find(I=>I.params.format.includes(P.format));if(O)return O}return this._preferredOrder[0]}_appendDefaultSearchParams(T){if(!this._defaultSearchParams)return T;const R=/\?/.test(T)?"&":"?";return`${T}${R}${this._defaultSearchParams}`}_buildResolvedAsset(T,R){const{aliases:P,data:O,loadParser:I,parser:z,format:F,progressSize:G}=R;return(this._basePath||this._rootPath)&&(T.src=path.toAbsolute(T.src,this._basePath,this._rootPath)),T.alias=P??T.alias??[T.src],T.src=this._appendDefaultSearchParams(T.src),T.data={...O||{},...T.data},T.loadParser=I??T.loadParser,T.parser=z??T.parser,T.format=F??T.format??getUrlExtension(T.src),G!==void 0&&(T.progressSize=G),T}}Resolver.RETINA_PREFIX=/@([0-9\.]+)x/;function getUrlExtension(_){return _.split(".").pop().split("?").shift().split("#").shift()}const copySearchParams=(_,T)=>{const R=T.split("?")[1];return R&&(_+=`?${R}`),_},_Spritesheet=class Ns{constructor(T,R){this.linkedSheets=[];let P=T;T?.source instanceof TextureSource&&(P={texture:T,data:R});const{texture:O,data:I,cachePrefix:z=""}=P;this.cachePrefix=z,this._texture=O instanceof Texture?O:null,this.textureSource=O.source,this.textures={},this.animations={},this.data=I;const F=parseFloat(I.meta.scale);F?(this.resolution=F,O.source.resolution=this.resolution):this.resolution=O.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(T=>{this._callback=T,this._batchIndex=0,this._frameKeys.length<=Ns.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(T){let R=T;const P=Ns.BATCH_SIZE;for(;R-T<P&&R<this._frameKeys.length;){const O=this._frameKeys[R],I=this._frames[O],z=I.frame;if(z){let F=null,G=null;const V=I.trimmed!==!1&&I.sourceSize?I.sourceSize:I.frame,Z=new Rectangle(0,0,Math.floor(V.w)/this.resolution,Math.floor(V.h)/this.resolution);I.rotated?F=new Rectangle(Math.floor(z.x)/this.resolution,Math.floor(z.y)/this.resolution,Math.floor(z.h)/this.resolution,Math.floor(z.w)/this.resolution):F=new Rectangle(Math.floor(z.x)/this.resolution,Math.floor(z.y)/this.resolution,Math.floor(z.w)/this.resolution,Math.floor(z.h)/this.resolution),I.trimmed!==!1&&I.spriteSourceSize&&(G=new Rectangle(Math.floor(I.spriteSourceSize.x)/this.resolution,Math.floor(I.spriteSourceSize.y)/this.resolution,Math.floor(z.w)/this.resolution,Math.floor(z.h)/this.resolution)),this.textures[O]=new Texture({source:this.textureSource,frame:F,orig:Z,trim:G,rotate:I.rotated?2:0,defaultAnchor:I.anchor,defaultBorders:I.borders,label:O.toString()})}R++}}_processAnimations(){const T=this.data.animations||{};for(const R in T){this.animations[R]=[];for(let P=0;P<T[R].length;P++){const O=T[R][P];this.animations[R].push(this.textures[O])}}}_parseComplete(){const T=this._callback;this._callback=null,this._batchIndex=0,T.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ns.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ns.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(T=!1){for(const R in this.textures)this.textures[R].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,T&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};_Spritesheet.BATCH_SIZE=1e3;let Spritesheet=_Spritesheet;const validImages=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function getCacheableAssets(_,T,R){const P={};if(_.forEach(O=>{P[O]=T}),Object.keys(T.textures).forEach(O=>{P[`${T.cachePrefix}${O}`]=T.textures[O]}),!R){const O=path.dirname(_[0]);T.linkedSheets.forEach((I,z)=>{const F=getCacheableAssets([`${O}/${T.data.meta.related_multi_packs[z]}`],I,!0);Object.assign(P,F)})}return P}const spritesheetAsset={extension:ExtensionType.Asset,cache:{test:_=>_ instanceof Spritesheet,getCacheableAssets:(_,T)=>getCacheableAssets(_,T,!1)},resolver:{extension:{type:ExtensionType.ResolveParser,name:"resolveSpritesheet"},test:_=>{const R=_.split("?")[0].split("."),P=R.pop(),O=R.pop();return P==="json"&&validImages.includes(O)},parse:_=>{const T=_.split(".");return{resolution:parseFloat(Resolver.RETINA_PREFIX.exec(_)?.[1]??"1"),format:T[T.length-2],src:_}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal,name:"spritesheetLoader"},async testParse(_,T){return path.extname(T.src).toLowerCase()===".json"&&!!_.frames},async parse(_,T,R){const{texture:P,imageFilename:O,textureOptions:I,cachePrefix:z}=T?.data??{};let F=path.dirname(T.src);F&&F.lastIndexOf("/")!==F.length-1&&(F+="/");let G;if(P instanceof Texture)G=P;else{const Y=copySearchParams(F+(O??_.meta.image),T.src);G=(await R.load([{src:Y,data:I}]))[Y]}const V=new Spritesheet({texture:G.source,data:_,cachePrefix:z});await V.parse();const Z=_?.meta?.related_multi_packs;if(Array.isArray(Z)){const Y=[];for(const J of Z){if(typeof J!="string")continue;let ee=F+J;T.data?.ignoreMultiPack||(ee=copySearchParams(ee,T.src),Y.push(R.load({src:ee,data:{textureOptions:I,ignoreMultiPack:!0}})))}const Q=await Promise.all(Y);V.linkedSheets=Q,Q.forEach(J=>{J.linkedSheets=[V].concat(V.linkedSheets.filter(ee=>ee!==J))})}return V},async unload(_,T,R){await R.unload(_.textureSource._sourceOrigin),_.destroy(!1)}}};extensions.add(spritesheetAsset);const idCounts=Object.create(null),idHash=Object.create(null);function createIdFromString(_,T){let R=idHash[_];return R===void 0&&(idCounts[T]===void 0&&(idCounts[T]=1),idHash[_]=R=idCounts[T]++),R}let context;function getTestContext(){return(!context||context?.isContextLost())&&(context=DOMAdapter.get().createCanvas().getContext("webgl",{})),context}let maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision="mediump";const _=getTestContext();_&&_.getShaderPrecisionFormat&&(maxFragmentPrecision=_.getShaderPrecisionFormat(_.FRAGMENT_SHADER,_.HIGH_FLOAT).precision?"highp":"mediump")}return maxFragmentPrecision}function addProgramDefines(_,T,R){return T?_:R?(_=_.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${_}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${_}
        `}function ensurePrecision(_,T,R){const P=R?T.maxSupportedFragmentPrecision:T.maxSupportedVertexPrecision;if(_.substring(0,9)!=="precision"){let O=R?T.requestedFragmentPrecision:T.requestedVertexPrecision;return O==="highp"&&P!=="highp"&&(O="mediump"),`precision ${O} float;
${_}`}else if(P!=="highp"&&_.substring(0,15)==="precision highp")return _.replace("precision highp","precision mediump");return _}function insertVersion(_,T){return T?`#version 300 es
${_}`:_}const fragmentNameCache={},VertexNameCache={};function setProgramName(_,{name:T="pixi-program"},R=!0){T=T.replace(/\s+/g,"-"),T+=R?"-fragment":"-vertex";const P=R?fragmentNameCache:VertexNameCache;return P[T]?(P[T]++,T+=`-${P[T]}`):P[T]=1,_.indexOf("#define SHADER_NAME")!==-1?_:`${`#define SHADER_NAME ${T}`}
${_}`}function stripVersion(_,T){return T?_.replace("#version 300 es",""):_}const processes={stripVersion,ensurePrecision,addProgramDefines,setProgramName,insertVersion},programCache$1=Object.create(null),_GlProgram=class cc{constructor(T){T={...cc.defaultOptions,...T};const R=T.fragment.indexOf("#version 300 es")!==-1,P={stripVersion:R,ensurePrecision:{requestedFragmentPrecision:T.preferredFragmentPrecision,requestedVertexPrecision:T.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:getMaxFragmentPrecision()},setProgramName:{name:T.name},addProgramDefines:R,insertVersion:R};let O=T.fragment,I=T.vertex;Object.keys(processes).forEach(z=>{const F=P[z];O=processes[z](O,F,!0),I=processes[z](I,F,!1)}),this.fragment=O,this.vertex=I,this.transformFeedbackVaryings=T.transformFeedbackVaryings,this._key=createIdFromString(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,programCache$1[this._cacheKey]=null}static from(T){const R=`${T.vertex}:${T.fragment}`;return programCache$1[R]||(programCache$1[R]=new cc(T),programCache$1[R]._cacheKey=R),programCache$1[R]}};_GlProgram.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let GlProgram=_GlProgram;const attributeFormatData={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function getAttributeInfoFromFormat(_){return attributeFormatData[_]??attributeFormatData.float32}const WGSL_TO_VERTEX_TYPES={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function extractAttributesFromGpuProgram({source:_,entryPoint:T}){const R={},P=_.indexOf(`fn ${T}`);if(P!==-1){const O=_.indexOf("->",P);if(O!==-1){const I=_.substring(P,O),z=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let F;for(;(F=z.exec(I))!==null;){const G=WGSL_TO_VERTEX_TYPES[F[3]]??"float32";R[F[2]]={location:parseInt(F[1],10),format:G,stride:getAttributeInfoFromFormat(G).stride,offset:0,instance:!1,start:0}}}}return R}function extractStructAndGroups(_){const T=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,R=/@group\((\d+)\)/,P=/@binding\((\d+)\)/,O=/var(<[^>]+>)? (\w+)/,I=/:\s*(\w+)/,z=/struct\s+(\w+)\s*{([^}]+)}/g,F=/(\w+)\s*:\s*([\w\<\>]+)/g,G=/struct\s+(\w+)/,V=_.match(T)?.map(Y=>({group:parseInt(Y.match(R)[1],10),binding:parseInt(Y.match(P)[1],10),name:Y.match(O)[2],isUniform:Y.match(O)[1]==="<uniform>",type:Y.match(I)[1]}));if(!V)return{groups:[],structs:[]};const Z=_.match(z)?.map(Y=>{const Q=Y.match(G)[1],J=Y.match(F).reduce((ee,ne)=>{const[se,oe]=ne.split(":");return ee[se.trim()]=oe.trim(),ee},{});return J?{name:Q,members:J}:null}).filter(({name:Y})=>V.some(Q=>Q.type===Y))??[];return{groups:V,structs:Z}}var ShaderStage=(_=>(_[_.VERTEX=1]="VERTEX",_[_.FRAGMENT=2]="FRAGMENT",_[_.COMPUTE=4]="COMPUTE",_))(ShaderStage||{});function generateGpuLayoutGroups({groups:_}){const T=[];for(let R=0;R<_.length;R++){const P=_[R];T[P.group]||(T[P.group]=[]),P.isUniform?T[P.group].push({binding:P.binding,visibility:ShaderStage.VERTEX|ShaderStage.FRAGMENT,buffer:{type:"uniform"}}):P.type==="sampler"?T[P.group].push({binding:P.binding,visibility:ShaderStage.FRAGMENT,sampler:{type:"filtering"}}):P.type==="texture_2d"&&T[P.group].push({binding:P.binding,visibility:ShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return T}function generateLayoutHash({groups:_}){const T=[];for(let R=0;R<_.length;R++){const P=_[R];T[P.group]||(T[P.group]={}),T[P.group][P.name]=P.binding}return T}function removeStructAndGroupDuplicates(_,T){const R=new Set,P=new Set,O=[..._.structs,...T.structs].filter(z=>R.has(z.name)?!1:(R.add(z.name),!0)),I=[..._.groups,...T.groups].filter(z=>{const F=`${z.name}-${z.binding}`;return P.has(F)?!1:(P.add(F),!0)});return{structs:O,groups:I}}const programCache=Object.create(null);class GpuProgram{constructor(T){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:R,vertex:P,layout:O,gpuLayout:I,name:z}=T;if(this.name=z,this.fragment=R,this.vertex=P,R.source===P.source){const F=extractStructAndGroups(R.source);this.structsAndGroups=F}else{const F=extractStructAndGroups(P.source),G=extractStructAndGroups(R.source);this.structsAndGroups=removeStructAndGroupDuplicates(F,G)}this.layout=O??generateLayoutHash(this.structsAndGroups),this.gpuLayout=I??generateGpuLayoutGroups(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:T,fragment:R}=this,P=T.source+R.source+T.entryPoint+R.entryPoint;this._layoutKey=createIdFromString(P,"program")}get attributeData(){return this._attributeData??(this._attributeData=extractAttributesFromGpuProgram(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,programCache[this._cacheKey]=null}static from(T){const R=`${T.vertex.source}:${T.fragment.source}:${T.fragment.entryPoint}:${T.vertex.entryPoint}`;return programCache[R]||(programCache[R]=new GpuProgram(T),programCache[R]._cacheKey=R),programCache[R]}}const UNIFORM_TYPES_VALUES=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],UNIFORM_TYPES_MAP=UNIFORM_TYPES_VALUES.reduce((_,T)=>(_[T]=!0,_),{});function getDefaultUniformValue(_,T){switch(_){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*T);case"vec3<f32>":return new Float32Array(3*T);case"vec4<f32>":return new Float32Array(4*T);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const _UniformGroup=class pd{constructor(T,R){this._touched=0,this.uid=uid("uniform"),this._resourceType="uniformGroup",this._resourceId=uid("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,R={...pd.defaultOptions,...R},this.uniformStructures=T;const P={};for(const O in T){const I=T[O];if(I.name=O,I.size=I.size??1,!UNIFORM_TYPES_MAP[I.type]){const z=I.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(z){const[,F,G]=z;throw new Error(`Uniform type ${I.type} is not supported. Use type: '${F}', size: ${G} instead.`)}throw new Error(`Uniform type ${I.type} is not supported. Supported uniform types are: ${UNIFORM_TYPES_VALUES.join(", ")}`)}I.value??(I.value=getDefaultUniformValue(I.type,I.size)),P[O]=I.value}this.uniforms=P,this._dirtyId=1,this.ubo=R.ubo,this.isStatic=R.isStatic,this._signature=createIdFromString(Object.keys(P).map(O=>`${O}-${T[O].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};_UniformGroup.defaultOptions={ubo:!1,isStatic:!1};let UniformGroup=_UniformGroup;class BindGroup{constructor(T){this.resources=Object.create(null),this._dirty=!0;let R=0;for(const P in T){const O=T[P];this.setResource(O,R++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const T=[];let R=0;for(const P in this.resources)T[R++]=this.resources[P]._resourceId;this._key=T.join("|")}setResource(T,R){const P=this.resources[R];T!==P&&(P&&T.off?.("change",this.onResourceChange,this),T.on?.("change",this.onResourceChange,this),this.resources[R]=T,this._dirty=!0)}getResource(T){return this.resources[T]}_touch(T){const R=this.resources;for(const P in R)R[P]._touched=T}destroy(){const T=this.resources;for(const R in T)T[R]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(T){if(this._dirty=!0,T.destroyed){const R=this.resources;for(const P in R)R[P]===T&&(R[P]=null)}else this._updateKey()}}var RendererType=(_=>(_[_.WEBGL=1]="WEBGL",_[_.WEBGPU=2]="WEBGPU",_[_.BOTH=3]="BOTH",_))(RendererType||{});class Shader extends EventEmitter{constructor(T){super(),this.uid=uid("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:R,glProgram:P,groups:O,resources:I,compatibleRenderers:z,groupMap:F}=T;this.gpuProgram=R,this.glProgram=P,z===void 0&&(z=0,R&&(z|=RendererType.WEBGPU),P&&(z|=RendererType.WEBGL)),this.compatibleRenderers=z;const G={};if(!I&&!O&&(I={}),I&&O)throw new Error("[Shader] Cannot have both resources and groups");if(!R&&O&&!F)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!R&&O&&F)for(const V in F)for(const Z in F[V]){const Y=F[V][Z];G[Y]={group:V,binding:Z,name:Y}}else if(R&&O&&!F){const V=R.structsAndGroups.groups;F={},V.forEach(Z=>{F[Z.group]=F[Z.group]||{},F[Z.group][Z.binding]=Z.name,G[Z.name]=Z})}else if(I){O={},F={},R&&R.structsAndGroups.groups.forEach(Y=>{F[Y.group]=F[Y.group]||{},F[Y.group][Y.binding]=Y.name,G[Y.name]=Y});let V=0;for(const Z in I)G[Z]||(O[99]||(O[99]=new BindGroup,this._ownedBindGroups.push(O[99])),G[Z]={group:99,binding:V,name:Z},F[99]=F[99]||{},F[99][V]=Z,V++);for(const Z in I){const Y=Z;let Q=I[Z];!Q.source&&!Q._resourceType&&(Q=new UniformGroup(Q));const J=G[Y];J&&(O[J.group]||(O[J.group]=new BindGroup,this._ownedBindGroups.push(O[J.group])),O[J.group].setResource(Q,J.binding))}}this.groups=O,this._uniformBindMap=F,this.resources=this._buildResourceAccessor(O,G)}addResource(T,R,P){var O,I;(O=this._uniformBindMap)[R]||(O[R]={}),(I=this._uniformBindMap[R])[P]||(I[P]=T),this.groups[R]||(this.groups[R]=new BindGroup,this._ownedBindGroups.push(this.groups[R]))}_buildResourceAccessor(T,R){const P={};for(const O in R){const I=R[O];Object.defineProperty(P,I.name,{get(){return T[I.group].getResource(I.binding)},set(z){T[I.group].setResource(z,I.binding)}})}return P}destroy(T=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),T&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(R=>{R.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(T){const{gpu:R,gl:P,...O}=T;let I,z;return R&&(I=GpuProgram.from(R)),P&&(z=GlProgram.from(P)),new Shader({gpuProgram:I,glProgram:z,...O})}}const environments=[];extensions.handleByNamedList(ExtensionType.Environment,environments);async function loadEnvironmentExtensions(_){if(!_)for(let T=0;T<environments.length;T++){const R=environments[T];if(R.value.test()){await R.value.load();return}}}let unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{unsafeEval=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}function earcut$1(_,T,R=2){const P=T&&T.length,O=P?T[0]*R:_.length;let I=linkedList(_,0,O,R,!0);const z=[];if(!I||I.next===I.prev)return z;let F,G,V;if(P&&(I=eliminateHoles(_,T,I,R)),_.length>80*R){F=_[0],G=_[1];let Z=F,Y=G;for(let Q=R;Q<O;Q+=R){const J=_[Q],ee=_[Q+1];J<F&&(F=J),ee<G&&(G=ee),J>Z&&(Z=J),ee>Y&&(Y=ee)}V=Math.max(Z-F,Y-G),V=V!==0?32767/V:0}return earcutLinked(I,z,R,F,G,V,0),z}function linkedList(_,T,R,P,O){let I;if(O===signedArea(_,T,R,P)>0)for(let z=T;z<R;z+=P)I=insertNode(z/P|0,_[z],_[z+1],I);else for(let z=R-P;z>=T;z-=P)I=insertNode(z/P|0,_[z],_[z+1],I);return I&&equals(I,I.next)&&(removeNode(I),I=I.next),I}function filterPoints(_,T){if(!_)return _;T||(T=_);let R=_,P;do if(P=!1,!R.steiner&&(equals(R,R.next)||area(R.prev,R,R.next)===0)){if(removeNode(R),R=T=R.prev,R===R.next)break;P=!0}else R=R.next;while(P||R!==T);return T}function earcutLinked(_,T,R,P,O,I,z){if(!_)return;!z&&I&&indexCurve(_,P,O,I);let F=_;for(;_.prev!==_.next;){const G=_.prev,V=_.next;if(I?isEarHashed(_,P,O,I):isEar(_)){T.push(G.i,_.i,V.i),removeNode(_),_=V.next,F=V.next;continue}if(_=V,_===F){z?z===1?(_=cureLocalIntersections(filterPoints(_),T),earcutLinked(_,T,R,P,O,I,2)):z===2&&splitEarcut(_,T,R,P,O,I):earcutLinked(filterPoints(_),T,R,P,O,I,1);break}}}function isEar(_){const T=_.prev,R=_,P=_.next;if(area(T,R,P)>=0)return!1;const O=T.x,I=R.x,z=P.x,F=T.y,G=R.y,V=P.y,Z=Math.min(O,I,z),Y=Math.min(F,G,V),Q=Math.max(O,I,z),J=Math.max(F,G,V);let ee=P.next;for(;ee!==T;){if(ee.x>=Z&&ee.x<=Q&&ee.y>=Y&&ee.y<=J&&pointInTriangleExceptFirst(O,F,I,G,z,V,ee.x,ee.y)&&area(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function isEarHashed(_,T,R,P){const O=_.prev,I=_,z=_.next;if(area(O,I,z)>=0)return!1;const F=O.x,G=I.x,V=z.x,Z=O.y,Y=I.y,Q=z.y,J=Math.min(F,G,V),ee=Math.min(Z,Y,Q),ne=Math.max(F,G,V),se=Math.max(Z,Y,Q),oe=zOrder(J,ee,T,R,P),ae=zOrder(ne,se,T,R,P);let ce=_.prevZ,le=_.nextZ;for(;ce&&ce.z>=oe&&le&&le.z<=ae;){if(ce.x>=J&&ce.x<=ne&&ce.y>=ee&&ce.y<=se&&ce!==O&&ce!==z&&pointInTriangleExceptFirst(F,Z,G,Y,V,Q,ce.x,ce.y)&&area(ce.prev,ce,ce.next)>=0||(ce=ce.prevZ,le.x>=J&&le.x<=ne&&le.y>=ee&&le.y<=se&&le!==O&&le!==z&&pointInTriangleExceptFirst(F,Z,G,Y,V,Q,le.x,le.y)&&area(le.prev,le,le.next)>=0))return!1;le=le.nextZ}for(;ce&&ce.z>=oe;){if(ce.x>=J&&ce.x<=ne&&ce.y>=ee&&ce.y<=se&&ce!==O&&ce!==z&&pointInTriangleExceptFirst(F,Z,G,Y,V,Q,ce.x,ce.y)&&area(ce.prev,ce,ce.next)>=0)return!1;ce=ce.prevZ}for(;le&&le.z<=ae;){if(le.x>=J&&le.x<=ne&&le.y>=ee&&le.y<=se&&le!==O&&le!==z&&pointInTriangleExceptFirst(F,Z,G,Y,V,Q,le.x,le.y)&&area(le.prev,le,le.next)>=0)return!1;le=le.nextZ}return!0}function cureLocalIntersections(_,T){let R=_;do{const P=R.prev,O=R.next.next;!equals(P,O)&&intersects(P,R,R.next,O)&&locallyInside(P,O)&&locallyInside(O,P)&&(T.push(P.i,R.i,O.i),removeNode(R),removeNode(R.next),R=_=O),R=R.next}while(R!==_);return filterPoints(R)}function splitEarcut(_,T,R,P,O,I){let z=_;do{let F=z.next.next;for(;F!==z.prev;){if(z.i!==F.i&&isValidDiagonal(z,F)){let G=splitPolygon(z,F);z=filterPoints(z,z.next),G=filterPoints(G,G.next),earcutLinked(z,T,R,P,O,I,0),earcutLinked(G,T,R,P,O,I,0);return}F=F.next}z=z.next}while(z!==_)}function eliminateHoles(_,T,R,P){const O=[];for(let I=0,z=T.length;I<z;I++){const F=T[I]*P,G=I<z-1?T[I+1]*P:_.length,V=linkedList(_,F,G,P,!1);V===V.next&&(V.steiner=!0),O.push(getLeftmost(V))}O.sort(compareXYSlope);for(let I=0;I<O.length;I++)R=eliminateHole(O[I],R);return R}function compareXYSlope(_,T){let R=_.x-T.x;if(R===0&&(R=_.y-T.y,R===0)){const P=(_.next.y-_.y)/(_.next.x-_.x),O=(T.next.y-T.y)/(T.next.x-T.x);R=P-O}return R}function eliminateHole(_,T){const R=findHoleBridge(_,T);if(!R)return T;const P=splitPolygon(R,_);return filterPoints(P,P.next),filterPoints(R,R.next)}function findHoleBridge(_,T){let R=T;const P=_.x,O=_.y;let I=-1/0,z;if(equals(_,R))return R;do{if(equals(_,R.next))return R.next;if(O<=R.y&&O>=R.next.y&&R.next.y!==R.y){const Y=R.x+(O-R.y)*(R.next.x-R.x)/(R.next.y-R.y);if(Y<=P&&Y>I&&(I=Y,z=R.x<R.next.x?R:R.next,Y===P))return z}R=R.next}while(R!==T);if(!z)return null;const F=z,G=z.x,V=z.y;let Z=1/0;R=z;do{if(P>=R.x&&R.x>=G&&P!==R.x&&pointInTriangle(O<V?P:I,O,G,V,O<V?I:P,O,R.x,R.y)){const Y=Math.abs(O-R.y)/(P-R.x);locallyInside(R,_)&&(Y<Z||Y===Z&&(R.x>z.x||R.x===z.x&&sectorContainsSector(z,R)))&&(z=R,Z=Y)}R=R.next}while(R!==F);return z}function sectorContainsSector(_,T){return area(_.prev,_,T.prev)<0&&area(T.next,_,_.next)<0}function indexCurve(_,T,R,P){let O=_;do O.z===0&&(O.z=zOrder(O.x,O.y,T,R,P)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next;while(O!==_);O.prevZ.nextZ=null,O.prevZ=null,sortLinked(O)}function sortLinked(_){let T,R=1;do{let P=_,O;_=null;let I=null;for(T=0;P;){T++;let z=P,F=0;for(let V=0;V<R&&(F++,z=z.nextZ,!!z);V++);let G=R;for(;F>0||G>0&&z;)F!==0&&(G===0||!z||P.z<=z.z)?(O=P,P=P.nextZ,F--):(O=z,z=z.nextZ,G--),I?I.nextZ=O:_=O,O.prevZ=I,I=O;P=z}I.nextZ=null,R*=2}while(T>1);return _}function zOrder(_,T,R,P,O){return _=(_-R)*O|0,T=(T-P)*O|0,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,T=(T|T<<8)&16711935,T=(T|T<<4)&252645135,T=(T|T<<2)&858993459,T=(T|T<<1)&1431655765,_|T<<1}function getLeftmost(_){let T=_,R=_;do(T.x<R.x||T.x===R.x&&T.y<R.y)&&(R=T),T=T.next;while(T!==_);return R}function pointInTriangle(_,T,R,P,O,I,z,F){return(O-z)*(T-F)>=(_-z)*(I-F)&&(_-z)*(P-F)>=(R-z)*(T-F)&&(R-z)*(I-F)>=(O-z)*(P-F)}function pointInTriangleExceptFirst(_,T,R,P,O,I,z,F){return!(_===z&&T===F)&&pointInTriangle(_,T,R,P,O,I,z,F)}function isValidDiagonal(_,T){return _.next.i!==T.i&&_.prev.i!==T.i&&!intersectsPolygon(_,T)&&(locallyInside(_,T)&&locallyInside(T,_)&&middleInside(_,T)&&(area(_.prev,_,T.prev)||area(_,T.prev,T))||equals(_,T)&&area(_.prev,_,_.next)>0&&area(T.prev,T,T.next)>0)}function area(_,T,R){return(T.y-_.y)*(R.x-T.x)-(T.x-_.x)*(R.y-T.y)}function equals(_,T){return _.x===T.x&&_.y===T.y}function intersects(_,T,R,P){const O=sign$2(area(_,T,R)),I=sign$2(area(_,T,P)),z=sign$2(area(R,P,_)),F=sign$2(area(R,P,T));return!!(O!==I&&z!==F||O===0&&onSegment(_,R,T)||I===0&&onSegment(_,P,T)||z===0&&onSegment(R,_,P)||F===0&&onSegment(R,T,P))}function onSegment(_,T,R){return T.x<=Math.max(_.x,R.x)&&T.x>=Math.min(_.x,R.x)&&T.y<=Math.max(_.y,R.y)&&T.y>=Math.min(_.y,R.y)}function sign$2(_){return _>0?1:_<0?-1:0}function intersectsPolygon(_,T){let R=_;do{if(R.i!==_.i&&R.next.i!==_.i&&R.i!==T.i&&R.next.i!==T.i&&intersects(R,R.next,_,T))return!0;R=R.next}while(R!==_);return!1}function locallyInside(_,T){return area(_.prev,_,_.next)<0?area(_,T,_.next)>=0&&area(_,_.prev,T)>=0:area(_,T,_.prev)<0||area(_,_.next,T)<0}function middleInside(_,T){let R=_,P=!1;const O=(_.x+T.x)/2,I=(_.y+T.y)/2;do R.y>I!=R.next.y>I&&R.next.y!==R.y&&O<(R.next.x-R.x)*(I-R.y)/(R.next.y-R.y)+R.x&&(P=!P),R=R.next;while(R!==_);return P}function splitPolygon(_,T){const R=createNode(_.i,_.x,_.y),P=createNode(T.i,T.x,T.y),O=_.next,I=T.prev;return _.next=T,T.prev=_,R.next=O,O.prev=R,P.next=R,R.prev=P,I.next=P,P.prev=I,P}function insertNode(_,T,R,P){const O=createNode(_,T,R);return P?(O.next=P.next,O.prev=P,P.next.prev=O,P.next=O):(O.prev=O,O.next=O),O}function removeNode(_){_.next.prev=_.prev,_.prev.next=_.next,_.prevZ&&(_.prevZ.nextZ=_.nextZ),_.nextZ&&(_.nextZ.prevZ=_.prevZ)}function createNode(_,T,R){return{i:_,x:T,y:R,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function signedArea(_,T,R,P){let O=0;for(let I=T,z=R-P;I<R;I+=P)O+=(_[z]-_[I])*(_[I+1]+_[z+1]),z=I;return O}const earcut=earcut$1.default||earcut$1;var CLEAR=(_=>(_[_.NONE=0]="NONE",_[_.COLOR=16384]="COLOR",_[_.STENCIL=1024]="STENCIL",_[_.DEPTH=256]="DEPTH",_[_.COLOR_DEPTH=16640]="COLOR_DEPTH",_[_.COLOR_STENCIL=17408]="COLOR_STENCIL",_[_.DEPTH_STENCIL=1280]="DEPTH_STENCIL",_[_.ALL=17664]="ALL",_))(CLEAR||{});class SystemRunner{constructor(T){this.items=[],this._name=T}emit(T,R,P,O,I,z,F,G){const{name:V,items:Z}=this;for(let Y=0,Q=Z.length;Y<Q;Y++)Z[Y][V](T,R,P,O,I,z,F,G);return this}add(T){return T[this._name]&&(this.remove(T),this.items.push(T)),this}remove(T){const R=this.items.indexOf(T);return R!==-1&&this.items.splice(R,1),this}contains(T){return this.items.indexOf(T)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const defaultRunners=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],_AbstractRenderer=class md extends EventEmitter{constructor(T){super(),this.uid=uid("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=T.type,this.name=T.name,this.config=T;const R=[...defaultRunners,...this.config.runners??[]];this._addRunners(...R),this._unsafeEvalCheck()}async init(T={}){const R=T.skipExtensionImports===!0?!0:T.manageImports===!1;await loadEnvironmentExtensions(R),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const P in this._systemsHash)T={...this._systemsHash[P].constructor.defaultOptions,...T};T={...md.defaultOptions,...T},this._roundPixels=T.roundPixels?1:0;for(let P=0;P<this.runners.init.items.length;P++)await this.runners.init.items[P].init(T);this._initOptions=T}render(T,R){let P=T;if(P instanceof Container&&(P={container:P},R&&(deprecation(v8_0_0,"passing a second argument is deprecated, please use render options instead"),P.target=R.renderTexture)),P.target||(P.target=this.view.renderTarget),P.target===this.view.renderTarget&&(this._lastObjectRendered=P.container,P.clearColor??(P.clearColor=this.background.colorRgba),P.clear??(P.clear=this.background.clearBeforeRender)),P.clearColor){const O=Array.isArray(P.clearColor)&&P.clearColor.length===4;P.clearColor=O?P.clearColor:Color$1.shared.setValue(P.clearColor).toArray()}P.transform||(P.container.updateLocalTransform(),P.transform=P.container.localTransform),P.container.visible&&(P.container.enableRenderGroup(),this.runners.prerender.emit(P),this.runners.renderStart.emit(P),this.runners.render.emit(P),this.runners.renderEnd.emit(P),this.runners.postrender.emit(P))}resize(T,R,P){const O=this.view.resolution;this.view.resize(T,R,P),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),P!==void 0&&P!==O&&this.runners.resolutionChange.emit(P)}clear(T={}){const R=this;T.target||(T.target=R.renderTarget.renderTarget),T.clearColor||(T.clearColor=this.background.colorRgba),T.clear??(T.clear=CLEAR.ALL);const{clear:P,clearColor:O,target:I}=T;Color$1.shared.setValue(O??this.background.colorRgba),R.renderTarget.clear(I,P,Color$1.shared.toArray())}get resolution(){return this.view.resolution}set resolution(T){this.view.resolution=T,this.runners.resolutionChange.emit(T)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...T){T.forEach(R=>{this.runners[R]=new SystemRunner(R)})}_addSystems(T){let R;for(R in T){const P=T[R];this._addSystem(P.value,P.name)}}_addSystem(T,R){const P=new T(this);if(this[R])throw new Error(`Whoops! The name "${R}" is already in use`);this[R]=P,this._systemsHash[R]=P;for(const O in this.runners)this.runners[O].add(P);return this}_addPipes(T,R){const P=R.reduce((O,I)=>(O[I.name]=I.value,O),{});T.forEach(O=>{const I=O.value,z=O.name,F=P[z];this.renderPipes[z]=new I(this,F?new F:null),this.runners.destroy.add(this.renderPipes[z])})}destroy(T=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(T),(T===!0||typeof T=="object"&&T.releaseGlobalResources)&&GlobalResourceRegistry.release(),Object.values(this.runners).forEach(R=>{R.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(T){return this.textureGenerator.generateTexture(T)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};_AbstractRenderer.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let AbstractRenderer=_AbstractRenderer,_isWebGLSupported;function isWebGLSupported(_){return _isWebGLSupported!==void 0||(_isWebGLSupported=(()=>{const T={stencil:!0,failIfMajorPerformanceCaveat:_??AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat};try{if(!DOMAdapter.get().getWebGLRenderingContext())return!1;let P=DOMAdapter.get().createCanvas().getContext("webgl",T);const O=!!P?.getContextAttributes()?.stencil;if(P){const I=P.getExtension("WEBGL_lose_context");I&&I.loseContext()}return P=null,O}catch{return!1}})()),_isWebGLSupported}let _isWebGPUSupported;async function isWebGPUSupported(_={}){return _isWebGPUSupported!==void 0||(_isWebGPUSupported=await(async()=>{const T=DOMAdapter.get().getNavigator().gpu;if(!T)return!1;try{return await(await T.requestAdapter(_)).requestDevice(),!0}catch{return!1}})()),_isWebGPUSupported}const renderPriority=["webgl","webgpu","canvas"];async function autoDetectRenderer(_){let T=[];_.preference?(T.push(_.preference),renderPriority.forEach(I=>{I!==_.preference&&T.push(I)})):T=renderPriority.slice();let R,P={};for(let I=0;I<T.length;I++){const z=T[I];if(z==="webgpu"&&await isWebGPUSupported()){const{WebGPURenderer:F}=await __vitePreload(async()=>{const{WebGPURenderer:G}=await import("./WebGPURenderer-Dh4yxhyd.js");return{WebGPURenderer:G}},__vite__mapDeps([3,2,4]));R=F,P={..._,..._.webgpu};break}else if(z==="webgl"&&isWebGLSupported(_.failIfMajorPerformanceCaveat??AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:F}=await __vitePreload(async()=>{const{WebGLRenderer:G}=await import("./WebGLRenderer-CXMKg58l.js");return{WebGLRenderer:G}},__vite__mapDeps([5,2,4]));R=F,P={..._,..._.webgl};break}else if(z==="canvas")throw P={..._},new Error("CanvasRenderer is not yet implemented")}if(delete P.webgpu,delete P.webgl,!R)throw new Error("No available renderer for the current environment");const O=new R;return await O.init(P),O}const VERSION="8.14.3";class ApplicationInitHook{static init(){globalThis.__PIXI_APP_INIT__?.(this,VERSION)}static destroy(){}}ApplicationInitHook.extension=ExtensionType.Application;class RendererInitHook{constructor(T){this._renderer=T}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,VERSION)}destroy(){this._renderer=null}}RendererInitHook.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem],name:"initHook",priority:-10};const _Application=class uc{constructor(...T){this.stage=new Container,T[0]!==void 0&&deprecation(v8_0_0,"Application constructor options are deprecated, please use Application.init() instead.")}async init(T){T={...T},this.stage||(this.stage=new Container),this.renderer=await autoDetectRenderer(T),uc._plugins.forEach(R=>{R.init.call(this,T)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return deprecation(v8_0_0,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(T=!1,R=!1){const P=uc._plugins.slice(0);P.reverse(),P.forEach(O=>{O.destroy.call(this)}),this.stage.destroy(R),this.stage=null,this.renderer.destroy(T),this.renderer=null}};_Application._plugins=[];let Application=_Application;extensions.handleByList(ExtensionType.Application,Application._plugins);extensions.add(ApplicationInitHook);class LRU{constructor(T=0,R=0,P=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=T,this.resetTtl=P,this.size=0,this.ttl=R}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(T){if(this.has(T)){const R=this.items[T];delete this.items[T],this.size--,R.prev!==null&&(R.prev.next=R.next),R.next!==null&&(R.next.prev=R.prev),this.first===R&&(this.first=R.next),this.last===R&&(this.last=R.prev)}return this}entries(T=this.keys()){return T.map(R=>[R,this.get(R)])}evict(T=!1){if(T||this.size>0){const R=this.first;delete this.items[R.key],--this.size===0?(this.first=null,this.last=null):(this.first=R.next,this.first.prev=null)}return this}expiresAt(T){let R;return this.has(T)&&(R=this.items[T].expiry),R}get(T){const R=this.items[T];if(R!==void 0){if(this.ttl>0&&R.expiry<=Date.now()){this.delete(T);return}return this.moveToEnd(R),R.value}}has(T){return T in this.items}moveToEnd(T){this.last!==T&&(T.prev!==null&&(T.prev.next=T.next),T.next!==null&&(T.next.prev=T.prev),this.first===T&&(this.first=T.next),T.prev=this.last,T.next=null,this.last!==null&&(this.last.next=T),this.last=T,this.first===null&&(this.first=T))}keys(){const T=[];let R=this.first;for(;R!==null;)T.push(R.key),R=R.next;return T}setWithEvicted(T,R,P=this.resetTtl){let O=null;if(this.has(T))this.set(T,R,!0,P);else{this.max>0&&this.size===this.max&&(O={...this.first},this.evict(!0));let I=this.items[T]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:T,prev:this.last,next:null,value:R};++this.size===1?this.first=I:this.last.next=I,this.last=I}return O}set(T,R,P=!1,O=this.resetTtl){let I=this.items[T];return P||I!==void 0?(I.value=R,P===!1&&O&&(I.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(I)):(this.max>0&&this.size===this.max&&this.evict(!0),I=this.items[T]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:T,prev:this.last,next:null,value:R},++this.size===1?this.first=I:this.last.next=I,this.last=I),this}values(T=this.keys()){return T.map(R=>this.get(R))}}function lru(_=1e3,T=0,R=!1){if(isNaN(_)||_<0)throw new TypeError("Invalid max value");if(isNaN(T)||T<0)throw new TypeError("Invalid ttl value");if(typeof R!="boolean")throw new TypeError("Invalid resetTtl value");return new LRU(_,T,R)}const genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function fontStringFromTextStyle(_){const T=typeof _.fontSize=="number"?`${_.fontSize}px`:_.fontSize;let R=_.fontFamily;Array.isArray(_.fontFamily)||(R=_.fontFamily.split(","));for(let P=R.length-1;P>=0;P--){let O=R[P].trim();!/([\"\'])[^\'\"]+\1/.test(O)&&!genericFontFamilies.includes(O)&&(O=`"${O}"`),R[P]=O}return`${_.fontStyle} ${_.fontVariant} ${_.fontWeight} ${T} ${R.join(",")}`}const contextSettings={willReadFrequently:!0},_CanvasTextMetrics=class rt{static get experimentalLetterSpacingSupported(){let T=rt._experimentalLetterSpacingSupported;if(T===void 0){const R=DOMAdapter.get().getCanvasRenderingContext2D().prototype;T=rt._experimentalLetterSpacingSupported="letterSpacing"in R||"textLetterSpacing"in R}return T}constructor(T,R,P,O,I,z,F,G,V){this.text=T,this.style=R,this.width=P,this.height=O,this.lines=I,this.lineWidths=z,this.lineHeight=F,this.maxLineWidth=G,this.fontProperties=V}static measureText(T=" ",R,P=rt._canvas,O=R.wordWrap){const I=`${T}-${R.styleKey}-wordWrap-${O}`;if(rt._measurementCache.has(I))return rt._measurementCache.get(I);const z=fontStringFromTextStyle(R),F=rt.measureFont(z);F.fontSize===0&&(F.fontSize=R.fontSize,F.ascent=R.fontSize);const G=rt.__context;G.font=z;const Z=(O?rt._wordWrap(T,R,P):T).split(/(?:\r\n|\r|\n)/),Y=new Array(Z.length);let Q=0;for(let ae=0;ae<Z.length;ae++){const ce=rt._measureText(Z[ae],R.letterSpacing,G);Y[ae]=ce,Q=Math.max(Q,ce)}const J=R._stroke?.width||0;let ee=Q+J;R.dropShadow&&(ee+=R.dropShadow.distance);const ne=R.lineHeight||F.fontSize;let se=Math.max(ne,F.fontSize+J)+(Z.length-1)*(ne+R.leading);R.dropShadow&&(se+=R.dropShadow.distance);const oe=new rt(T,R,ee,se,Z,Y,ne+R.leading,Q,F);return rt._measurementCache.set(I,oe),oe}static _measureText(T,R,P){let O=!1;rt.experimentalLetterSpacingSupported&&(rt.experimentalLetterSpacing?(P.letterSpacing=`${R}px`,P.textLetterSpacing=`${R}px`,O=!0):(P.letterSpacing="0px",P.textLetterSpacing="0px"));const I=P.measureText(T);let z=I.width;const F=-I.actualBoundingBoxLeft;let V=I.actualBoundingBoxRight-F;if(z>0)if(O)z-=R,V-=R;else{const Z=(rt.graphemeSegmenter(T).length-1)*R;z+=Z,V+=Z}return Math.max(z,V)}static _wordWrap(T,R,P=rt._canvas){const O=P.getContext("2d",contextSettings);let I=0,z="",F="";const G=Object.create(null),{letterSpacing:V,whiteSpace:Z}=R,Y=rt._collapseSpaces(Z),Q=rt._collapseNewlines(Z);let J=!Y;const ee=R.wordWrapWidth+V,ne=rt._tokenize(T);for(let se=0;se<ne.length;se++){let oe=ne[se];if(rt._isNewline(oe)){if(!Q){F+=rt._addLine(z),J=!Y,z="",I=0;continue}oe=" "}if(Y){const ce=rt.isBreakingSpace(oe),le=rt.isBreakingSpace(z[z.length-1]);if(ce&&le)continue}const ae=rt._getFromCache(oe,V,G,O);if(ae>ee)if(z!==""&&(F+=rt._addLine(z),z="",I=0),rt.canBreakWords(oe,R.breakWords)){const ce=rt.wordWrapSplit(oe);for(let le=0;le<ce.length;le++){let pe=ce[le],me=pe,he=1;for(;ce[le+he];){const de=ce[le+he];if(!rt.canBreakChars(me,de,oe,le,R.breakWords))pe+=de;else break;me=de,he++}le+=he-1;const fe=rt._getFromCache(pe,V,G,O);fe+I>ee&&(F+=rt._addLine(z),J=!1,z="",I=0),z+=pe,I+=fe}}else{z.length>0&&(F+=rt._addLine(z),z="",I=0);const ce=se===ne.length-1;F+=rt._addLine(oe,!ce),J=!1,z="",I=0}else ae+I>ee&&(J=!1,F+=rt._addLine(z),z="",I=0),(z.length>0||!rt.isBreakingSpace(oe)||J)&&(z+=oe,I+=ae)}return F+=rt._addLine(z,!1),F}static _addLine(T,R=!0){return T=rt._trimRight(T),T=R?`${T}
`:T,T}static _getFromCache(T,R,P,O){let I=P[T];return typeof I!="number"&&(I=rt._measureText(T,R,O)+R,P[T]=I),I}static _collapseSpaces(T){return T==="normal"||T==="pre-line"}static _collapseNewlines(T){return T==="normal"}static _trimRight(T){if(typeof T!="string")return"";for(let R=T.length-1;R>=0;R--){const P=T[R];if(!rt.isBreakingSpace(P))break;T=T.slice(0,-1)}return T}static _isNewline(T){return typeof T!="string"?!1:rt._newlines.includes(T.charCodeAt(0))}static isBreakingSpace(T,R){return typeof T!="string"?!1:rt._breakingSpaces.includes(T.charCodeAt(0))}static _tokenize(T){const R=[];let P="";if(typeof T!="string")return R;for(let O=0;O<T.length;O++){const I=T[O],z=T[O+1];if(rt.isBreakingSpace(I,z)||rt._isNewline(I)){P!==""&&(R.push(P),P=""),I==="\r"&&z===`
`?(R.push(`\r
`),O++):R.push(I);continue}P+=I}return P!==""&&R.push(P),R}static canBreakWords(T,R){return R}static canBreakChars(T,R,P,O,I){return!0}static wordWrapSplit(T){return rt.graphemeSegmenter(T)}static measureFont(T){if(rt._fonts[T])return rt._fonts[T];const R=rt._context;R.font=T;const P=R.measureText(rt.METRICS_STRING+rt.BASELINE_SYMBOL),O={ascent:P.actualBoundingBoxAscent,descent:P.actualBoundingBoxDescent,fontSize:P.actualBoundingBoxAscent+P.actualBoundingBoxDescent};return rt._fonts[T]=O,O}static clearMetrics(T=""){T?delete rt._fonts[T]:rt._fonts={}}static get _canvas(){if(!rt.__canvas){let T;try{const R=new OffscreenCanvas(0,0);if(R.getContext("2d",contextSettings)?.measureText)return rt.__canvas=R,R;T=DOMAdapter.get().createCanvas()}catch{T=DOMAdapter.get().createCanvas()}T.width=T.height=10,rt.__canvas=T}return rt.__canvas}static get _context(){return rt.__context||(rt.__context=rt._canvas.getContext("2d",contextSettings)),rt.__context}};_CanvasTextMetrics.METRICS_STRING="|q";_CanvasTextMetrics.BASELINE_SYMBOL="M";_CanvasTextMetrics.BASELINE_MULTIPLIER=1.4;_CanvasTextMetrics.HEIGHT_MULTIPLIER=2;_CanvasTextMetrics.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const _=new Intl.Segmenter;return T=>{const R=_.segment(T),P=[];let O=0;for(const I of R)P[O++]=I.segment;return P}}return _=>[..._]})();_CanvasTextMetrics.experimentalLetterSpacing=!1;_CanvasTextMetrics._fonts={};_CanvasTextMetrics._newlines=[10,13];_CanvasTextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];_CanvasTextMetrics._measurementCache=lru(1e3);let CanvasTextMetrics=_CanvasTextMetrics;const emptyColorStops=[{offset:0,color:"white"},{offset:1,color:"black"}],_FillGradient=class fc{constructor(...T){this.uid=uid("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let R=ensureGradientOptions(T);R={...R.type==="radial"?fc.defaultRadialOptions:fc.defaultLinearOptions,...definedProps(R)},this._textureSize=R.textureSize,this._wrapMode=R.wrapMode,R.type==="radial"?(this.center=R.center,this.outerCenter=R.outerCenter??this.center,this.innerRadius=R.innerRadius,this.outerRadius=R.outerRadius,this.scale=R.scale,this.rotation=R.rotation):(this.start=R.start,this.end=R.end),this.textureSpace=R.textureSpace,this.type=R.type,R.colorStops.forEach(O=>{this.addColorStop(O.offset,O.color)})}addColorStop(T,R){return this.colorStops.push({offset:T,color:Color$1.shared.setValue(R).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:T,y:R}=this.start,{x:P,y:O}=this.end,I=P-T,z=O-R;const F=I<0||z<0;if(this._wrapMode==="clamp-to-edge"){if(I<0){const se=T;T=P,P=se,I*=-1}if(z<0){const se=R;R=O,O=se,z*=-1}}const G=this.colorStops.length?this.colorStops:emptyColorStops,V=this._textureSize,{canvas:Z,context:Y}=getCanvas(V,1),Q=F?Y.createLinearGradient(this._textureSize,0,0,0):Y.createLinearGradient(0,0,this._textureSize,0);addColorStops(Q,G),Y.fillStyle=Q,Y.fillRect(0,0,V,1),this.texture=new Texture({source:new ImageSource({resource:Z,addressMode:this._wrapMode})});const J=Math.sqrt(I*I+z*z),ee=Math.atan2(z,I),ne=new Matrix;ne.scale(J/V,1),ne.rotate(ee),ne.translate(T,R),this.textureSpace==="local"&&ne.scale(V,V),this.transform=ne}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const T=this.colorStops.length?this.colorStops:emptyColorStops,R=this._textureSize,{canvas:P,context:O}=getCanvas(R,R),{x:I,y:z}=this.center,{x:F,y:G}=this.outerCenter,V=this.innerRadius,Z=this.outerRadius,Y=F-Z,Q=G-Z,J=R/(Z*2),ee=(I-Y)*J,ne=(z-Q)*J,se=O.createRadialGradient(ee,ne,V*J,(F-Y)*J,(G-Q)*J,Z*J);addColorStops(se,T),O.fillStyle=T[T.length-1].color,O.fillRect(0,0,R,R),O.fillStyle=se,O.translate(ee,ne),O.rotate(this.rotation),O.scale(1,this.scale),O.translate(-ee,-ne),O.fillRect(0,0,R,R),this.texture=new Texture({source:new ImageSource({resource:P,addressMode:this._wrapMode})});const oe=new Matrix;oe.scale(1/J,1/J),oe.translate(Y,Q),this.textureSpace==="local"&&oe.scale(R,R),this.transform=oe}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};_FillGradient.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};_FillGradient.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let FillGradient=_FillGradient;function addColorStops(_,T){for(let R=0;R<T.length;R++){const P=T[R];_.addColorStop(P.offset,P.color)}}function getCanvas(_,T){const R=DOMAdapter.get().createCanvas(_,T),P=R.getContext("2d");return{canvas:R,context:P}}function ensureGradientOptions(_){let T=_[0]??{};return(typeof T=="number"||_[1])&&(deprecation("8.5.2","use options object instead"),T={type:"linear",start:{x:_[0],y:_[1]},end:{x:_[2],y:_[3]},textureSpace:_[4],textureSize:_[5]??FillGradient.defaultLinearOptions.textureSize}),T}const repetitionMap={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class FillPattern{constructor(T,R){this.uid=uid("fillPattern"),this._tick=0,this.transform=new Matrix,this.texture=T,this.transform.scale(1/T.frame.width,1/T.frame.height),R&&(T.source.style.addressModeU=repetitionMap[R].addressModeU,T.source.style.addressModeV=repetitionMap[R].addressModeV)}setTransform(T){const R=this.texture;this.transform.copyFrom(T),this.transform.invert(),this.transform.scale(1/R.frame.width,1/R.frame.height),this._tick++}get texture(){return this._texture}set texture(T){this._texture!==T&&(this._texture=T,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var parseSvgPath,hasRequiredParseSvgPath;function requireParseSvgPath(){if(hasRequiredParseSvgPath)return parseSvgPath;hasRequiredParseSvgPath=1,parseSvgPath=R;var _={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},T=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function R(I){var z=[];return I.replace(T,function(F,G,V){var Z=G.toLowerCase();for(V=O(V),Z=="m"&&V.length>2&&(z.push([G].concat(V.splice(0,2))),Z="l",G=G=="m"?"l":"L");;){if(V.length==_[Z])return V.unshift(G),z.push(V);if(V.length<_[Z])throw new Error("malformed path data");z.push([G].concat(V.splice(0,_[Z])))}}),z}var P=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function O(I){var z=I.match(P);return z?z.map(Number):[]}return parseSvgPath}var parseSvgPathExports=requireParseSvgPath();const parse$1=getDefaultExportFromCjs(parseSvgPathExports);function parseSVGPath(_,T){const R=parse$1(_),P=[];let O=null,I=0,z=0;for(let F=0;F<R.length;F++){const G=R[F],V=G[0],Z=G;switch(V){case"M":I=Z[1],z=Z[2],T.moveTo(I,z);break;case"m":I+=Z[1],z+=Z[2],T.moveTo(I,z);break;case"H":I=Z[1],T.lineTo(I,z);break;case"h":I+=Z[1],T.lineTo(I,z);break;case"V":z=Z[1],T.lineTo(I,z);break;case"v":z+=Z[1],T.lineTo(I,z);break;case"L":I=Z[1],z=Z[2],T.lineTo(I,z);break;case"l":I+=Z[1],z+=Z[2],T.lineTo(I,z);break;case"C":I=Z[5],z=Z[6],T.bezierCurveTo(Z[1],Z[2],Z[3],Z[4],I,z);break;case"c":T.bezierCurveTo(I+Z[1],z+Z[2],I+Z[3],z+Z[4],I+Z[5],z+Z[6]),I+=Z[5],z+=Z[6];break;case"S":I=Z[3],z=Z[4],T.bezierCurveToShort(Z[1],Z[2],I,z);break;case"s":T.bezierCurveToShort(I+Z[1],z+Z[2],I+Z[3],z+Z[4]),I+=Z[3],z+=Z[4];break;case"Q":I=Z[3],z=Z[4],T.quadraticCurveTo(Z[1],Z[2],I,z);break;case"q":T.quadraticCurveTo(I+Z[1],z+Z[2],I+Z[3],z+Z[4]),I+=Z[3],z+=Z[4];break;case"T":I=Z[1],z=Z[2],T.quadraticCurveToShort(I,z);break;case"t":I+=Z[1],z+=Z[2],T.quadraticCurveToShort(I,z);break;case"A":I=Z[6],z=Z[7],T.arcToSvg(Z[1],Z[2],Z[3],Z[4],Z[5],I,z);break;case"a":I+=Z[6],z+=Z[7],T.arcToSvg(Z[1],Z[2],Z[3],Z[4],Z[5],I,z);break;case"Z":case"z":T.closePath(),P.length>0&&(O=P.pop(),O?(I=O.startX,z=O.startY):(I=0,z=0)),O=null;break;default:warn$1(`Unknown SVG path command: ${V}`)}V!=="Z"&&V!=="z"&&O===null&&(O={startX:I,startY:z},P.push(O))}return T}class Circle{constructor(T=0,R=0,P=0){this.type="circle",this.x=T,this.y=R,this.radius=P}clone(){return new Circle(this.x,this.y,this.radius)}contains(T,R){if(this.radius<=0)return!1;const P=this.radius*this.radius;let O=this.x-T,I=this.y-R;return O*=O,I*=I,O+I<=P}strokeContains(T,R,P,O=.5){if(this.radius===0)return!1;const I=this.x-T,z=this.y-R,F=this.radius,G=(1-O)*P,V=Math.sqrt(I*I+z*z);return V<=F+G&&V>F-(P-G)}getBounds(T){return T||(T=new Rectangle),T.x=this.x-this.radius,T.y=this.y-this.radius,T.width=this.radius*2,T.height=this.radius*2,T}copyFrom(T){return this.x=T.x,this.y=T.y,this.radius=T.radius,this}copyTo(T){return T.copyFrom(this),T}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Ellipse{constructor(T=0,R=0,P=0,O=0){this.type="ellipse",this.x=T,this.y=R,this.halfWidth=P,this.halfHeight=O}clone(){return new Ellipse(this.x,this.y,this.halfWidth,this.halfHeight)}contains(T,R){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let P=(T-this.x)/this.halfWidth,O=(R-this.y)/this.halfHeight;return P*=P,O*=O,P+O<=1}strokeContains(T,R,P,O=.5){const{halfWidth:I,halfHeight:z}=this;if(I<=0||z<=0)return!1;const F=P*(1-O),G=P-F,V=I-G,Z=z-G,Y=I+F,Q=z+F,J=T-this.x,ee=R-this.y,ne=J*J/(V*V)+ee*ee/(Z*Z),se=J*J/(Y*Y)+ee*ee/(Q*Q);return ne>1&&se<=1}getBounds(T){return T||(T=new Rectangle),T.x=this.x-this.halfWidth,T.y=this.y-this.halfHeight,T.width=this.halfWidth*2,T.height=this.halfHeight*2,T}copyFrom(T){return this.x=T.x,this.y=T.y,this.halfWidth=T.halfWidth,this.halfHeight=T.halfHeight,this}copyTo(T){return T.copyFrom(this),T}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function squaredDistanceToLineSegment(_,T,R,P,O,I){const z=_-R,F=T-P,G=O-R,V=I-P,Z=z*G+F*V,Y=G*G+V*V;let Q=-1;Y!==0&&(Q=Z/Y);let J,ee;Q<0?(J=R,ee=P):Q>1?(J=O,ee=I):(J=R+Q*G,ee=P+Q*V);const ne=_-J,se=T-ee;return ne*ne+se*se}let tempRect$3,tempRect2;class Polygon{constructor(...T){this.type="polygon";let R=Array.isArray(T[0])?T[0]:T;if(typeof R[0]!="number"){const P=[];for(let O=0,I=R.length;O<I;O++)P.push(R[O].x,R[O].y);R=P}this.points=R,this.closePath=!0}isClockwise(){let T=0;const R=this.points,P=R.length;for(let O=0;O<P;O+=2){const I=R[O],z=R[O+1],F=R[(O+2)%P],G=R[(O+3)%P];T+=(F-I)*(G+z)}return T<0}containsPolygon(T){const R=this.getBounds(tempRect$3),P=T.getBounds(tempRect2);if(!R.containsRect(P))return!1;const O=T.points;for(let I=0;I<O.length;I+=2){const z=O[I],F=O[I+1];if(!this.contains(z,F))return!1}return!0}clone(){const T=this.points.slice(),R=new Polygon(T);return R.closePath=this.closePath,R}contains(T,R){let P=!1;const O=this.points.length/2;for(let I=0,z=O-1;I<O;z=I++){const F=this.points[I*2],G=this.points[I*2+1],V=this.points[z*2],Z=this.points[z*2+1];G>R!=Z>R&&T<(V-F)*((R-G)/(Z-G))+F&&(P=!P)}return P}strokeContains(T,R,P,O=.5){const I=P*P,z=I*(1-O),F=I-z,{points:G}=this,V=G.length-(this.closePath?0:2);for(let Z=0;Z<V;Z+=2){const Y=G[Z],Q=G[Z+1],J=G[(Z+2)%G.length],ee=G[(Z+3)%G.length],ne=squaredDistanceToLineSegment(T,R,Y,Q,J,ee),se=Math.sign((J-Y)*(R-Q)-(ee-Q)*(T-Y));if(ne<=(se<0?F:z))return!0}return!1}getBounds(T){T||(T=new Rectangle);const R=this.points;let P=1/0,O=-1/0,I=1/0,z=-1/0;for(let F=0,G=R.length;F<G;F+=2){const V=R[F],Z=R[F+1];P=V<P?V:P,O=V>O?V:O,I=Z<I?Z:I,z=Z>z?Z:z}return T.x=P,T.width=O-P,T.y=I,T.height=z-I,T}copyFrom(T){return this.points=T.points.slice(),this.closePath=T.closePath,this}copyTo(T){return T.copyFrom(this),T}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((T,R)=>`${T}, ${R}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return deprecation("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return deprecation("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const isCornerWithinStroke=(_,T,R,P,O,I,z)=>{const F=_-R,G=T-P,V=Math.sqrt(F*F+G*G);return V>=O-I&&V<=O+z};class RoundedRectangle{constructor(T=0,R=0,P=0,O=0,I=20){this.type="roundedRectangle",this.x=T,this.y=R,this.width=P,this.height=O,this.radius=I}getBounds(T){return T||(T=new Rectangle),T.x=this.x,T.y=this.y,T.width=this.width,T.height=this.height,T}clone(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)}copyFrom(T){return this.x=T.x,this.y=T.y,this.width=T.width,this.height=T.height,this}copyTo(T){return T.copyFrom(this),T}contains(T,R){if(this.width<=0||this.height<=0)return!1;if(T>=this.x&&T<=this.x+this.width&&R>=this.y&&R<=this.y+this.height){const P=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(R>=this.y+P&&R<=this.y+this.height-P||T>=this.x+P&&T<=this.x+this.width-P)return!0;let O=T-(this.x+P),I=R-(this.y+P);const z=P*P;if(O*O+I*I<=z||(O=T-(this.x+this.width-P),O*O+I*I<=z)||(I=R-(this.y+this.height-P),O*O+I*I<=z)||(O=T-(this.x+P),O*O+I*I<=z))return!0}return!1}strokeContains(T,R,P,O=.5){const{x:I,y:z,width:F,height:G,radius:V}=this,Z=P*(1-O),Y=P-Z,Q=I+V,J=z+V,ee=F-V*2,ne=G-V*2,se=I+F,oe=z+G;return(T>=I-Z&&T<=I+Y||T>=se-Y&&T<=se+Z)&&R>=J&&R<=J+ne||(R>=z-Z&&R<=z+Y||R>=oe-Y&&R<=oe+Z)&&T>=Q&&T<=Q+ee?!0:T<Q&&R<J&&isCornerWithinStroke(T,R,Q,J,V,Y,Z)||T>se-V&&R<J&&isCornerWithinStroke(T,R,se-V,J,V,Y,Z)||T>se-V&&R>oe-V&&isCornerWithinStroke(T,R,se-V,oe-V,V,Y,Z)||T<Q&&R>oe-V&&isCornerWithinStroke(T,R,Q,oe-V,V,Y,Z)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const cachedGroups={};function getTextureBatchBindGroup(_,T,R){let P=2166136261;for(let O=0;O<T;O++)P^=_[O].uid,P=Math.imul(P,16777619),P>>>=0;return cachedGroups[P]||generateTextureBatchBindGroup(_,T,P,R)}function generateTextureBatchBindGroup(_,T,R,P){const O={};let I=0;for(let F=0;F<P;F++){const G=F<T?_[F]:Texture.EMPTY.source;O[I++]=G.source,O[I++]=G.style}const z=new BindGroup(O);return cachedGroups[R]=z,z}class ViewableBuffer{constructor(T){typeof T=="number"?this.rawBinaryData=new ArrayBuffer(T):T instanceof Uint8Array?this.rawBinaryData=T.buffer:this.rawBinaryData=T,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(T){return this[`${T}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(T){switch(T){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${T} isn't a valid view type`)}}}function fastCopy(_,T){const R=_.byteLength/8|0,P=new Float64Array(_,0,R);new Float64Array(T,0,R).set(P);const I=_.byteLength-R*8;if(I>0){const z=new Uint8Array(_,R*8,I);new Uint8Array(T,R*8,I).set(z)}}const BLEND_TO_NPM={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var STENCIL_MODES=(_=>(_[_.DISABLED=0]="DISABLED",_[_.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",_[_.MASK_ACTIVE=2]="MASK_ACTIVE",_[_.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",_[_.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",_[_.NONE=5]="NONE",_))(STENCIL_MODES||{});function getAdjustedBlendModeBlend(_,T){return T.alphaMode==="no-premultiply-alpha"&&BLEND_TO_NPM[_]||_}const fragTemplate=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(_){let T="";for(let R=0;R<_;++R)R>0&&(T+=`
else `),R<_-1&&(T+=`if(test == ${R}.0){}`);return T}function checkMaxIfStatementsInShader(_,T){if(_===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const R=T.createShader(T.FRAGMENT_SHADER);try{for(;;){const P=fragTemplate.replace(/%forloop%/gi,generateIfTestSrc(_));if(T.shaderSource(R,P),T.compileShader(R),!T.getShaderParameter(R,T.COMPILE_STATUS))_=_/2|0;else break}}finally{T.deleteShader(R)}return _}let maxTexturesPerBatchCache=null;function getMaxTexturesPerBatch(){if(maxTexturesPerBatchCache)return maxTexturesPerBatchCache;const _=getTestContext();return maxTexturesPerBatchCache=_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS),maxTexturesPerBatchCache=checkMaxIfStatementsInShader(maxTexturesPerBatchCache,_),_.getExtension("WEBGL_lose_context")?.loseContext(),maxTexturesPerBatchCache}class BatchTextureArray{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let T=0;T<this.count;T++){const R=this.textures[T];this.textures[T]=null,this.ids[R.uid]=null}this.count=0}}class Batch{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new BatchTextureArray,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const batchPool=[];let batchPoolIndex=0;GlobalResourceRegistry.register({clear:()=>{if(batchPool.length>0)for(const _ of batchPool)_&&_.destroy();batchPool.length=0,batchPoolIndex=0}});function getBatchFromPool(){return batchPoolIndex>0?batchPool[--batchPoolIndex]:new Batch}function returnBatchToPool(_){batchPool[batchPoolIndex++]=_}let BATCH_TICK=0;const _Batcher=class gd{constructor(T){this.uid=uid("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],T={...gd.defaultOptions,...T},T.maxTextures||(deprecation("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),T.maxTextures=getMaxTexturesPerBatch());const{maxTextures:R,attributesInitialSize:P,indicesInitialSize:O}=T;this.attributeBuffer=new ViewableBuffer(P*4),this.indexBuffer=new Uint16Array(O),this.maxTextures=R}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let T=0;T<this.batchIndex;T++)returnBatchToPool(this.batches[T]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(T){this._elements[this.elementSize++]=T,T._indexStart=this.indexSize,T._attributeStart=this.attributeSize,T._batcher=this,this.indexSize+=T.indexSize,this.attributeSize+=T.attributeSize*this.vertexSize}checkAndUpdateTexture(T,R){const P=T._batch.textures.ids[R._source.uid];return!P&&P!==0?!1:(T._textureId=P,T.texture=R,!0)}updateElement(T){this.dirty=!0;const R=this.attributeBuffer;T.packAsQuad?this.packQuadAttributes(T,R.float32View,R.uint32View,T._attributeStart,T._textureId):this.packAttributes(T,R.float32View,R.uint32View,T._attributeStart,T._textureId)}break(T){const R=this._elements;if(!R[this.elementStart])return;let P=getBatchFromPool(),O=P.textures;O.clear();const I=R[this.elementStart];let z=getAdjustedBlendModeBlend(I.blendMode,I.texture._source),F=I.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const G=this.attributeBuffer.float32View,V=this.attributeBuffer.uint32View,Z=this.indexBuffer;let Y=this._batchIndexSize,Q=this._batchIndexStart,J="startBatch";const ee=this.maxTextures;for(let ne=this.elementStart;ne<this.elementSize;++ne){const se=R[ne];R[ne]=null;const ae=se.texture._source,ce=getAdjustedBlendModeBlend(se.blendMode,ae),le=z!==ce||F!==se.topology;if(ae._batchTick===BATCH_TICK&&!le){se._textureId=ae._textureBindLocation,Y+=se.indexSize,se.packAsQuad?(this.packQuadAttributes(se,G,V,se._attributeStart,se._textureId),this.packQuadIndex(Z,se._indexStart,se._attributeStart/this.vertexSize)):(this.packAttributes(se,G,V,se._attributeStart,se._textureId),this.packIndex(se,Z,se._indexStart,se._attributeStart/this.vertexSize)),se._batch=P;continue}ae._batchTick=BATCH_TICK,(O.count>=ee||le)&&(this._finishBatch(P,Q,Y-Q,O,z,F,T,J),J="renderBatch",Q=Y,z=ce,F=se.topology,P=getBatchFromPool(),O=P.textures,O.clear(),++BATCH_TICK),se._textureId=ae._textureBindLocation=O.count,O.ids[ae.uid]=O.count,O.textures[O.count++]=ae,se._batch=P,Y+=se.indexSize,se.packAsQuad?(this.packQuadAttributes(se,G,V,se._attributeStart,se._textureId),this.packQuadIndex(Z,se._indexStart,se._attributeStart/this.vertexSize)):(this.packAttributes(se,G,V,se._attributeStart,se._textureId),this.packIndex(se,Z,se._indexStart,se._attributeStart/this.vertexSize))}O.count>0&&(this._finishBatch(P,Q,Y-Q,O,z,F,T,J),Q=Y,++BATCH_TICK),this.elementStart=this.elementSize,this._batchIndexStart=Q,this._batchIndexSize=Y}_finishBatch(T,R,P,O,I,z,F,G){T.gpuBindGroup=null,T.bindGroup=null,T.action=G,T.batcher=this,T.textures=O,T.blendMode=I,T.topology=z,T.start=R,T.size=P,++BATCH_TICK,this.batches[this.batchIndex++]=T,F.add(T)}finish(T){this.break(T)}ensureAttributeBuffer(T){T*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(T*4)}ensureIndexBuffer(T){T<=this.indexBuffer.length||this._resizeIndexBuffer(T)}_resizeAttributeBuffer(T){const R=Math.max(T,this.attributeBuffer.size*2),P=new ViewableBuffer(R);fastCopy(this.attributeBuffer.rawBinaryData,P.rawBinaryData),this.attributeBuffer=P}_resizeIndexBuffer(T){const R=this.indexBuffer;let P=Math.max(T,R.length*1.5);P+=P%2;const O=P>65535?new Uint32Array(P):new Uint16Array(P);if(O.BYTES_PER_ELEMENT!==R.BYTES_PER_ELEMENT)for(let I=0;I<R.length;I++)O[I]=R[I];else fastCopy(R.buffer,O.buffer);this.indexBuffer=O}packQuadIndex(T,R,P){T[R]=P+0,T[R+1]=P+1,T[R+2]=P+2,T[R+3]=P+0,T[R+4]=P+2,T[R+5]=P+3}packIndex(T,R,P,O){const I=T.indices,z=T.indexSize,F=T.indexOffset,G=T.attributeOffset;for(let V=0;V<z;V++)R[P++]=O+I[V+F]-G}destroy(T={}){if(this.batches!==null){for(let R=0;R<this.batches.length;R++)returnBatchToPool(this.batches[R]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,T.shader&&(this.shader?.destroy(),this.shader=null);for(let R=0;R<this._elements.length;R++)this._elements[R]&&(this._elements[R]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};_Batcher.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Batcher=_Batcher;var BufferUsage=(_=>(_[_.MAP_READ=1]="MAP_READ",_[_.MAP_WRITE=2]="MAP_WRITE",_[_.COPY_SRC=4]="COPY_SRC",_[_.COPY_DST=8]="COPY_DST",_[_.INDEX=16]="INDEX",_[_.VERTEX=32]="VERTEX",_[_.UNIFORM=64]="UNIFORM",_[_.STORAGE=128]="STORAGE",_[_.INDIRECT=256]="INDIRECT",_[_.QUERY_RESOLVE=512]="QUERY_RESOLVE",_[_.STATIC=1024]="STATIC",_))(BufferUsage||{});class Buffer extends EventEmitter{constructor(T){let{data:R,size:P}=T;const{usage:O,label:I,shrinkToFit:z}=T;super(),this.uid=uid("buffer"),this._resourceType="buffer",this._resourceId=uid("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,R instanceof Array&&(R=new Float32Array(R)),this._data=R,P??(P=R?.byteLength);const F=!!R;this.descriptor={size:P,usage:O,mappedAtCreation:F,label:I},this.shrinkToFit=z??!0}get data(){return this._data}set data(T){this.setDataWithSize(T,T.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&BufferUsage.STATIC)}set static(T){T?this.descriptor.usage|=BufferUsage.STATIC:this.descriptor.usage&=~BufferUsage.STATIC}setDataWithSize(T,R,P){if(this._updateID++,this._updateSize=R*T.BYTES_PER_ELEMENT,this._data===T){P&&this.emit("update",this);return}const O=this._data;if(this._data=T,this._dataInt32=null,!O||O.length!==T.length){!this.shrinkToFit&&O&&T.byteLength<O.byteLength?P&&this.emit("update",this):(this.descriptor.size=T.byteLength,this._resourceId=uid("resource"),this.emit("change",this));return}P&&this.emit("update",this)}update(T){this._updateSize=T??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function ensureIsBuffer(_,T){if(!(_ instanceof Buffer)){let R=T?BufferUsage.INDEX:BufferUsage.VERTEX;_ instanceof Array&&(T?(_=new Uint32Array(_),R=BufferUsage.INDEX|BufferUsage.COPY_DST):(_=new Float32Array(_),R=BufferUsage.VERTEX|BufferUsage.COPY_DST)),_=new Buffer({data:_,label:T?"index-mesh-buffer":"vertex-mesh-buffer",usage:R})}return _}function getGeometryBounds(_,T,R){const P=_.getAttribute(T);if(!P)return R.minX=0,R.minY=0,R.maxX=0,R.maxY=0,R;const O=P.buffer.data;let I=1/0,z=1/0,F=-1/0,G=-1/0;const V=O.BYTES_PER_ELEMENT,Z=(P.offset||0)/V,Y=(P.stride||8)/V;for(let Q=Z;Q<O.length;Q+=Y){const J=O[Q],ee=O[Q+1];J>F&&(F=J),ee>G&&(G=ee),J<I&&(I=J),ee<z&&(z=ee)}return R.minX=I,R.minY=z,R.maxX=F,R.maxY=G,R}function ensureIsAttribute(_){return(_ instanceof Buffer||Array.isArray(_)||_.BYTES_PER_ELEMENT)&&(_={buffer:_}),_.buffer=ensureIsBuffer(_.buffer,!1),_}class Geometry extends EventEmitter{constructor(T={}){super(),this.uid=uid("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Bounds,this._boundsDirty=!0;const{attributes:R,indexBuffer:P,topology:O}=T;if(this.buffers=[],this.attributes={},R)for(const I in R)this.addAttribute(I,R[I]);this.instanceCount=T.instanceCount??1,P&&this.addIndex(P),this.topology=O||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(T){return this.attributes[T]}getIndex(){return this.indexBuffer}getBuffer(T){return this.getAttribute(T).buffer}getSize(){for(const T in this.attributes){const R=this.attributes[T];return R.buffer.data.length/(R.stride/4||R.size)}return 0}addAttribute(T,R){const P=ensureIsAttribute(R);this.buffers.indexOf(P.buffer)===-1&&(this.buffers.push(P.buffer),P.buffer.on("update",this.onBufferUpdate,this),P.buffer.on("change",this.onBufferUpdate,this)),this.attributes[T]=P}addIndex(T){this.indexBuffer=ensureIsBuffer(T,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,getGeometryBounds(this,"aPosition",this._bounds)):this._bounds}destroy(T=!1){this.emit("destroy",this),this.removeAllListeners(),T&&this.buffers.forEach(R=>R.destroy()),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const placeHolderBufferData=new Float32Array(1),placeHolderIndexData=new Uint32Array(1);class BatchGeometry extends Geometry{constructor(){const R=new Buffer({data:placeHolderBufferData,label:"attribute-batch-buffer",usage:BufferUsage.VERTEX|BufferUsage.COPY_DST,shrinkToFit:!1}),P=new Buffer({data:placeHolderIndexData,label:"index-batch-buffer",usage:BufferUsage.INDEX|BufferUsage.COPY_DST,shrinkToFit:!1}),O=24;super({attributes:{aPosition:{buffer:R,format:"float32x2",stride:O,offset:0},aUV:{buffer:R,format:"float32x2",stride:O,offset:8},aColor:{buffer:R,format:"unorm8x4",stride:O,offset:16},aTextureIdAndRound:{buffer:R,format:"uint16x2",stride:O,offset:20}},indexBuffer:P})}}function addBits(_,T,R){if(_)for(const P in _){const O=P.toLocaleLowerCase(),I=T[O];if(I){let z=_[P];P==="header"&&(z=z.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),R&&I.push(`//----${R}----//`),I.push(z)}else warn$1(`${P} placement hook does not exist in shader`)}}const findHooksRx=/\{\{(.*?)\}\}/g;function compileHooks(_){const T={};return(_.match(findHooksRx)?.map(P=>P.replace(/[{()}]/g,""))??[]).forEach(P=>{T[P]=[]}),T}function extractInputs(_,T){let R;const P=/@in\s+([^;]+);/g;for(;(R=P.exec(_))!==null;)T.push(R[1])}function compileInputs(_,T,R=!1){const P=[];extractInputs(T,P),_.forEach(F=>{F.header&&extractInputs(F.header,P)});const O=P;R&&O.sort();const I=O.map((F,G)=>`       @location(${G}) ${F},`).join(`
`);let z=T.replace(/@in\s+[^;]+;\s*/g,"");return z=z.replace("{{in}}",`
${I}
`),z}function extractOutputs(_,T){let R;const P=/@out\s+([^;]+);/g;for(;(R=P.exec(_))!==null;)T.push(R[1])}function extractVariableName(_){const R=/\b(\w+)\s*:/g.exec(_);return R?R[1]:""}function stripVariable(_){const T=/@.*?\s+/g;return _.replace(T,"")}function compileOutputs(_,T){const R=[];extractOutputs(T,R),_.forEach(G=>{G.header&&extractOutputs(G.header,R)});let P=0;const O=R.sort().map(G=>G.indexOf("builtin")>-1?G:`@location(${P++}) ${G}`).join(`,
`),I=R.sort().map(G=>`       var ${stripVariable(G)};`).join(`
`),z=`return VSOutput(
            ${R.sort().map(G=>` ${extractVariableName(G)}`).join(`,
`)});`;let F=T.replace(/@out\s+[^;]+;\s*/g,"");return F=F.replace("{{struct}}",`
${O}
`),F=F.replace("{{start}}",`
${I}
`),F=F.replace("{{return}}",`
${z}
`),F}function injectBits(_,T){let R=_;for(const P in T){const O=T[P];O.join(`
`).length?R=R.replace(`{{${P}}}`,`//-----${P} START-----//
${O.join(`
`)}
//----${P} FINISH----//`):R=R.replace(`{{${P}}}`,"")}return R}const cacheMap=Object.create(null),bitCacheMap=new Map;let CACHE_UID=0;function compileHighShader({template:_,bits:T}){const R=generateCacheId(_,T);if(cacheMap[R])return cacheMap[R];const{vertex:P,fragment:O}=compileInputsAndOutputs(_,T);return cacheMap[R]=compileBits(P,O,T),cacheMap[R]}function compileHighShaderGl({template:_,bits:T}){const R=generateCacheId(_,T);return cacheMap[R]||(cacheMap[R]=compileBits(_.vertex,_.fragment,T)),cacheMap[R]}function compileInputsAndOutputs(_,T){const R=T.map(z=>z.vertex).filter(z=>!!z),P=T.map(z=>z.fragment).filter(z=>!!z);let O=compileInputs(R,_.vertex,!0);O=compileOutputs(R,O);const I=compileInputs(P,_.fragment,!0);return{vertex:O,fragment:I}}function generateCacheId(_,T){return T.map(R=>(bitCacheMap.has(R)||bitCacheMap.set(R,CACHE_UID++),bitCacheMap.get(R))).sort((R,P)=>R-P).join("-")+_.vertex+_.fragment}function compileBits(_,T,R){const P=compileHooks(_),O=compileHooks(T);return R.forEach(I=>{addBits(I.vertex,P,I.name),addBits(I.fragment,O,I.name)}),{vertex:injectBits(_,P),fragment:injectBits(T,O)}}const vertexGPUTemplate=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,fragmentGPUTemplate=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,vertexGlTemplate=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,fragmentGlTemplate=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,globalUniformsBit={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},globalUniformsBitGl={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function compileHighShaderGpuProgram({bits:_,name:T}){const R=compileHighShader({template:{fragment:fragmentGPUTemplate,vertex:vertexGPUTemplate},bits:[globalUniformsBit,..._]});return GpuProgram.from({name:T,vertex:{source:R.vertex,entryPoint:"main"},fragment:{source:R.fragment,entryPoint:"main"}})}function compileHighShaderGlProgram({bits:_,name:T}){return new GlProgram({name:T,...compileHighShaderGl({template:{vertex:vertexGlTemplate,fragment:fragmentGlTemplate},bits:[globalUniformsBitGl,..._]})})}const colorBit={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},colorBitGl={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},textureBatchBitGpuCache={};function generateBindingSrc(_){const T=[];if(_===1)T.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),T.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let R=0;for(let P=0;P<_;P++)T.push(`@group(1) @binding(${R++}) var textureSource${P+1}: texture_2d<f32>;`),T.push(`@group(1) @binding(${R++}) var textureSampler${P+1}: sampler;`)}return T.join(`
`)}function generateSampleSrc(_){const T=[];if(_===1)T.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{T.push("switch vTextureId {");for(let R=0;R<_;R++)R===_-1?T.push("  default:{"):T.push(`  case ${R}:{`),T.push(`      outColor = textureSampleGrad(textureSource${R+1}, textureSampler${R+1}, vUV, uvDx, uvDy);`),T.push("      break;}");T.push("}")}return T.join(`
`)}function generateTextureBatchBit(_){return textureBatchBitGpuCache[_]||(textureBatchBitGpuCache[_]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${generateBindingSrc(_)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${generateSampleSrc(_)}
            `}}),textureBatchBitGpuCache[_]}const textureBatchBitGlCache={};function generateSampleGlSrc(_){const T=[];for(let R=0;R<_;R++)R>0&&T.push("else"),R<_-1&&T.push(`if(vTextureId < ${R}.5)`),T.push("{"),T.push(`	outColor = texture(uTextures[${R}], vUV);`),T.push("}");return T.join(`
`)}function generateTextureBatchBitGl(_){return textureBatchBitGlCache[_]||(textureBatchBitGlCache[_]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${_}];

            `,main:`

                ${generateSampleGlSrc(_)}
            `}}),textureBatchBitGlCache[_]}const roundPixelsBit={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},roundPixelsBitGl={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},batchSamplersUniformGroupHash={};function getBatchSamplersUniformGroup(_){let T=batchSamplersUniformGroupHash[_];if(T)return T;const R=new Int32Array(_);for(let P=0;P<_;P++)R[P]=P;return T=batchSamplersUniformGroupHash[_]=new UniformGroup({uTextures:{value:R,type:"i32",size:_}},{isStatic:!0}),T}class DefaultShader extends Shader{constructor(T){const R=compileHighShaderGlProgram({name:"batch",bits:[colorBitGl,generateTextureBatchBitGl(T),roundPixelsBitGl]}),P=compileHighShaderGpuProgram({name:"batch",bits:[colorBit,generateTextureBatchBit(T),roundPixelsBit]});super({glProgram:R,gpuProgram:P,resources:{batchSamplers:getBatchSamplersUniformGroup(T)}}),this.maxTextures=T}}let defaultShader=null;const _DefaultBatcher=class yd extends Batcher{constructor(T){super(T),this.geometry=new BatchGeometry,this.name=yd.extension.name,this.vertexSize=6,defaultShader??(defaultShader=new DefaultShader(T.maxTextures)),this.shader=defaultShader}packAttributes(T,R,P,O,I){const z=I<<16|T.roundPixels&65535,F=T.transform,G=F.a,V=F.b,Z=F.c,Y=F.d,Q=F.tx,J=F.ty,{positions:ee,uvs:ne}=T,se=T.color,oe=T.attributeOffset,ae=oe+T.attributeSize;for(let ce=oe;ce<ae;ce++){const le=ce*2,pe=ee[le],me=ee[le+1];R[O++]=G*pe+Z*me+Q,R[O++]=Y*me+V*pe+J,R[O++]=ne[le],R[O++]=ne[le+1],P[O++]=se,P[O++]=z}}packQuadAttributes(T,R,P,O,I){const z=T.texture,F=T.transform,G=F.a,V=F.b,Z=F.c,Y=F.d,Q=F.tx,J=F.ty,ee=T.bounds,ne=ee.maxX,se=ee.minX,oe=ee.maxY,ae=ee.minY,ce=z.uvs,le=T.color,pe=I<<16|T.roundPixels&65535;R[O+0]=G*se+Z*ae+Q,R[O+1]=Y*ae+V*se+J,R[O+2]=ce.x0,R[O+3]=ce.y0,P[O+4]=le,P[O+5]=pe,R[O+6]=G*ne+Z*ae+Q,R[O+7]=Y*ae+V*ne+J,R[O+8]=ce.x1,R[O+9]=ce.y1,P[O+10]=le,P[O+11]=pe,R[O+12]=G*ne+Z*oe+Q,R[O+13]=Y*oe+V*ne+J,R[O+14]=ce.x2,R[O+15]=ce.y2,P[O+16]=le,P[O+17]=pe,R[O+18]=G*se+Z*oe+Q,R[O+19]=Y*oe+V*se+J,R[O+20]=ce.x3,R[O+21]=ce.y3,P[O+22]=le,P[O+23]=pe}_updateMaxTextures(T){this.shader.maxTextures!==T&&(defaultShader=new DefaultShader(T),this.shader=defaultShader)}destroy(){this.shader=null,super.destroy()}};_DefaultBatcher.extension={type:[ExtensionType.Batcher],name:"default"};let DefaultBatcher=_DefaultBatcher;function buildUvs(_,T,R,P,O,I,z,F=null){let G=0;R*=T,O*=I;const V=F.a,Z=F.b,Y=F.c,Q=F.d,J=F.tx,ee=F.ty;for(;G<z;){const ne=_[R],se=_[R+1];P[O]=V*ne+Y*se+J,P[O+1]=Z*ne+Q*se+ee,O+=I,R+=T,G++}}function buildSimpleUvs(_,T,R,P){let O=0;for(T*=R;O<P;)_[T]=0,_[T+1]=0,T+=R,O++}function transformVertices(_,T,R,P,O){const I=T.a,z=T.b,F=T.c,G=T.d,V=T.tx,Z=T.ty;R||(R=0),P||(P=2),O||(O=_.length/P-R);let Y=R*P;for(let Q=0;Q<O;Q++){const J=_[Y],ee=_[Y+1];_[Y]=I*J+F*ee+V,_[Y+1]=z*J+G*ee+Z,Y+=P}}const identityMatrix=new Matrix;class BatchableGraphics{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const T=this.baseColor,R=T>>16|T&65280|(T&255)<<16,P=this.renderable;return P?multiplyHexColors(R,P.groupColor)+(this.alpha*P.groupAlpha*255<<24):R+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||identityMatrix}copyTo(T){T.indexOffset=this.indexOffset,T.indexSize=this.indexSize,T.attributeOffset=this.attributeOffset,T.attributeSize=this.attributeSize,T.baseColor=this.baseColor,T.alpha=this.alpha,T.texture=this.texture,T.geometryData=this.geometryData,T.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const buildCircle={extension:{type:ExtensionType.ShapeBuilder,name:"circle"},build(_,T){let R,P,O,I,z,F;if(_.type==="circle"){const le=_;if(z=F=le.radius,z<=0)return!1;R=le.x,P=le.y,O=I=0}else if(_.type==="ellipse"){const le=_;if(z=le.halfWidth,F=le.halfHeight,z<=0||F<=0)return!1;R=le.x,P=le.y,O=I=0}else{const le=_,pe=le.width/2,me=le.height/2;R=le.x+pe,P=le.y+me,z=F=Math.max(0,Math.min(le.radius,Math.min(pe,me))),O=pe-z,I=me-F}if(O<0||I<0)return!1;const G=Math.ceil(2.3*Math.sqrt(z+F)),V=G*8+(O?4:0)+(I?4:0);if(V===0)return!1;if(G===0)return T[0]=T[6]=R+O,T[1]=T[3]=P+I,T[2]=T[4]=R-O,T[5]=T[7]=P-I,!0;let Z=0,Y=G*4+(O?2:0)+2,Q=Y,J=V,ee=O+z,ne=I,se=R+ee,oe=R-ee,ae=P+ne;if(T[Z++]=se,T[Z++]=ae,T[--Y]=ae,T[--Y]=oe,I){const le=P-ne;T[Q++]=oe,T[Q++]=le,T[--J]=le,T[--J]=se}for(let le=1;le<G;le++){const pe=Math.PI/2*(le/G),me=O+Math.cos(pe)*z,he=I+Math.sin(pe)*F,fe=R+me,de=R-me,be=P+he,ye=P-he;T[Z++]=fe,T[Z++]=be,T[--Y]=be,T[--Y]=de,T[Q++]=de,T[Q++]=ye,T[--J]=ye,T[--J]=fe}ee=O,ne=I+F,se=R+ee,oe=R-ee,ae=P+ne;const ce=P-ne;return T[Z++]=se,T[Z++]=ae,T[--J]=ce,T[--J]=se,O&&(T[Z++]=oe,T[Z++]=ae,T[--J]=ce,T[--J]=oe),!0},triangulate(_,T,R,P,O,I){if(_.length===0)return;let z=0,F=0;for(let Z=0;Z<_.length;Z+=2)z+=_[Z],F+=_[Z+1];z/=_.length/2,F/=_.length/2;let G=P;T[G*R]=z,T[G*R+1]=F;const V=G++;for(let Z=0;Z<_.length;Z+=2)T[G*R]=_[Z],T[G*R+1]=_[Z+1],Z>0&&(O[I++]=G,O[I++]=V,O[I++]=G-1),G++;O[I++]=V+1,O[I++]=V,O[I++]=G-1}},buildEllipse={...buildCircle,extension:{...buildCircle.extension,name:"ellipse"}},buildRoundedRectangle={...buildCircle,extension:{...buildCircle.extension,name:"roundedRectangle"}},closePointEps=1e-4,curveEps=1e-4;function getOrientationOfPoints(_){const T=_.length;if(T<6)return 1;let R=0;for(let P=0,O=_[T-2],I=_[T-1];P<T;P+=2){const z=_[P],F=_[P+1];R+=(z-O)*(F+I),O=z,I=F}return R<0?-1:1}function square(_,T,R,P,O,I,z,F){const G=_-R*O,V=T-P*O,Z=_+R*I,Y=T+P*I;let Q,J;z?(Q=P,J=-R):(Q=-P,J=R);const ee=G+Q,ne=V+J,se=Z+Q,oe=Y+J;return F.push(ee,ne),F.push(se,oe),2}function round(_,T,R,P,O,I,z,F){const G=R-_,V=P-T;let Z=Math.atan2(G,V),Y=Math.atan2(O-_,I-T);F&&Z<Y?Z+=Math.PI*2:!F&&Z>Y&&(Y+=Math.PI*2);let Q=Z;const J=Y-Z,ee=Math.abs(J),ne=Math.sqrt(G*G+V*V),se=(15*ee*Math.sqrt(ne)/Math.PI>>0)+1,oe=J/se;if(Q+=oe,F){z.push(_,T),z.push(R,P);for(let ae=1,ce=Q;ae<se;ae++,ce+=oe)z.push(_,T),z.push(_+Math.sin(ce)*ne,T+Math.cos(ce)*ne);z.push(_,T),z.push(O,I)}else{z.push(R,P),z.push(_,T);for(let ae=1,ce=Q;ae<se;ae++,ce+=oe)z.push(_+Math.sin(ce)*ne,T+Math.cos(ce)*ne),z.push(_,T);z.push(O,I),z.push(_,T)}return se*2}function buildLine(_,T,R,P,O,I){const z=closePointEps;if(_.length===0)return;const F=T;let G=F.alignment;if(T.alignment!==.5){let Ae=getOrientationOfPoints(_);G=(G-.5)*Ae+.5}const V=new Point(_[0],_[1]),Z=new Point(_[_.length-2],_[_.length-1]),Y=P,Q=Math.abs(V.x-Z.x)<z&&Math.abs(V.y-Z.y)<z;if(Y){_=_.slice(),Q&&(_.pop(),_.pop(),Z.set(_[_.length-2],_[_.length-1]));const Ae=(V.x+Z.x)*.5,Ue=(Z.y+V.y)*.5;_.unshift(Ae,Ue),_.push(Ae,Ue)}const J=O,ee=_.length/2;let ne=_.length;const se=J.length/2,oe=F.width/2,ae=oe*oe,ce=F.miterLimit*F.miterLimit;let le=_[0],pe=_[1],me=_[2],he=_[3],fe=0,de=0,be=-(pe-he),ye=le-me,Ce=0,ve=0,Ee=Math.sqrt(be*be+ye*ye);be/=Ee,ye/=Ee,be*=oe,ye*=oe;const we=G,ge=(1-we)*2,Se=we*2;Y||(F.cap==="round"?ne+=round(le-be*(ge-Se)*.5,pe-ye*(ge-Se)*.5,le-be*ge,pe-ye*ge,le+be*Se,pe+ye*Se,J,!0)+2:F.cap==="square"&&(ne+=square(le,pe,be,ye,ge,Se,!0,J))),J.push(le-be*ge,pe-ye*ge),J.push(le+be*Se,pe+ye*Se);for(let Ae=1;Ae<ee-1;++Ae){le=_[(Ae-1)*2],pe=_[(Ae-1)*2+1],me=_[Ae*2],he=_[Ae*2+1],fe=_[(Ae+1)*2],de=_[(Ae+1)*2+1],be=-(pe-he),ye=le-me,Ee=Math.sqrt(be*be+ye*ye),be/=Ee,ye/=Ee,be*=oe,ye*=oe,Ce=-(he-de),ve=me-fe,Ee=Math.sqrt(Ce*Ce+ve*ve),Ce/=Ee,ve/=Ee,Ce*=oe,ve*=oe;const Ue=me-le,_e=pe-he,$e=me-fe,Ne=de-he,Be=Ue*$e+_e*Ne,Ze=_e*$e-Ne*Ue,We=Ze<0;if(Math.abs(Ze)<.001*Math.abs(Be)){J.push(me-be*ge,he-ye*ge),J.push(me+be*Se,he+ye*Se),Be>=0&&(F.join==="round"?ne+=round(me,he,me-be*ge,he-ye*ge,me-Ce*ge,he-ve*ge,J,!1)+4:ne+=2,J.push(me-Ce*Se,he-ve*Se),J.push(me+Ce*ge,he+ve*ge));continue}const Oe=(-be+le)*(-ye+he)-(-be+me)*(-ye+pe),Ge=(-Ce+fe)*(-ve+he)-(-Ce+me)*(-ve+de),je=(Ue*Ge-$e*Oe)/Ze,Fe=(Ne*Oe-_e*Ge)/Ze,ze=(je-me)*(je-me)+(Fe-he)*(Fe-he),Me=me+(je-me)*ge,Ke=he+(Fe-he)*ge,Ye=me-(je-me)*Se,Qe=he-(Fe-he)*Se,Je=Math.min(Ue*Ue+_e*_e,$e*$e+Ne*Ne),lt=We?ge:Se,et=Je+lt*lt*ae;ze<=et?F.join==="bevel"||ze/ae>ce?(We?(J.push(Me,Ke),J.push(me+be*Se,he+ye*Se),J.push(Me,Ke),J.push(me+Ce*Se,he+ve*Se)):(J.push(me-be*ge,he-ye*ge),J.push(Ye,Qe),J.push(me-Ce*ge,he-ve*ge),J.push(Ye,Qe)),ne+=2):F.join==="round"?We?(J.push(Me,Ke),J.push(me+be*Se,he+ye*Se),ne+=round(me,he,me+be*Se,he+ye*Se,me+Ce*Se,he+ve*Se,J,!0)+4,J.push(Me,Ke),J.push(me+Ce*Se,he+ve*Se)):(J.push(me-be*ge,he-ye*ge),J.push(Ye,Qe),ne+=round(me,he,me-be*ge,he-ye*ge,me-Ce*ge,he-ve*ge,J,!1)+4,J.push(me-Ce*ge,he-ve*ge),J.push(Ye,Qe)):(J.push(Me,Ke),J.push(Ye,Qe)):(J.push(me-be*ge,he-ye*ge),J.push(me+be*Se,he+ye*Se),F.join==="round"?We?ne+=round(me,he,me+be*Se,he+ye*Se,me+Ce*Se,he+ve*Se,J,!0)+2:ne+=round(me,he,me-be*ge,he-ye*ge,me-Ce*ge,he-ve*ge,J,!1)+2:F.join==="miter"&&ze/ae<=ce&&(We?(J.push(Ye,Qe),J.push(Ye,Qe)):(J.push(Me,Ke),J.push(Me,Ke)),ne+=2),J.push(me-Ce*ge,he-ve*ge),J.push(me+Ce*Se,he+ve*Se),ne+=2)}le=_[(ee-2)*2],pe=_[(ee-2)*2+1],me=_[(ee-1)*2],he=_[(ee-1)*2+1],be=-(pe-he),ye=le-me,Ee=Math.sqrt(be*be+ye*ye),be/=Ee,ye/=Ee,be*=oe,ye*=oe,J.push(me-be*ge,he-ye*ge),J.push(me+be*Se,he+ye*Se),Y||(F.cap==="round"?ne+=round(me-be*(ge-Se)*.5,he-ye*(ge-Se)*.5,me-be*ge,he-ye*ge,me+be*Se,he+ye*Se,J,!1)+2:F.cap==="square"&&(ne+=square(me,he,be,ye,ge,Se,!1,J)));const Te=curveEps*curveEps;for(let Ae=se;Ae<ne+se-2;++Ae)le=J[Ae*2],pe=J[Ae*2+1],me=J[(Ae+1)*2],he=J[(Ae+1)*2+1],fe=J[(Ae+2)*2],de=J[(Ae+2)*2+1],!(Math.abs(le*(he-de)+me*(de-pe)+fe*(pe-he))<Te)&&I.push(Ae,Ae+1,Ae+2)}function buildPixelLine(_,T,R,P){const O=closePointEps;if(_.length===0)return;const I=_[0],z=_[1],F=_[_.length-2],G=_[_.length-1],V=T||Math.abs(I-F)<O&&Math.abs(z-G)<O,Z=R,Y=_.length/2,Q=Z.length/2;for(let J=0;J<Y;J++)Z.push(_[J*2]),Z.push(_[J*2+1]);for(let J=0;J<Y-1;J++)P.push(Q+J,Q+J+1);V&&P.push(Q+Y-1,Q)}function triangulateWithHoles(_,T,R,P,O,I,z){const F=earcut(_,T,2);if(!F)return;for(let V=0;V<F.length;V+=3)I[z++]=F[V]+O,I[z++]=F[V+1]+O,I[z++]=F[V+2]+O;let G=O*P;for(let V=0;V<_.length;V+=2)R[G]=_[V],R[G+1]=_[V+1],G+=P}const emptyArray=[],buildPolygon={extension:{type:ExtensionType.ShapeBuilder,name:"polygon"},build(_,T){for(let R=0;R<_.points.length;R++)T[R]=_.points[R];return!0},triangulate(_,T,R,P,O,I){triangulateWithHoles(_,emptyArray,T,R,P,O,I)}},buildRectangle={extension:{type:ExtensionType.ShapeBuilder,name:"rectangle"},build(_,T){const R=_,P=R.x,O=R.y,I=R.width,z=R.height;return I>0&&z>0?(T[0]=P,T[1]=O,T[2]=P+I,T[3]=O,T[4]=P+I,T[5]=O+z,T[6]=P,T[7]=O+z,!0):!1},triangulate(_,T,R,P,O,I){let z=0;P*=R,T[P+z]=_[0],T[P+z+1]=_[1],z+=R,T[P+z]=_[2],T[P+z+1]=_[3],z+=R,T[P+z]=_[6],T[P+z+1]=_[7],z+=R,T[P+z]=_[4],T[P+z+1]=_[5],z+=R;const F=P/R;O[I++]=F,O[I++]=F+1,O[I++]=F+2,O[I++]=F+1,O[I++]=F+3,O[I++]=F+2}},buildTriangle={extension:{type:ExtensionType.ShapeBuilder,name:"triangle"},build(_,T){return T[0]=_.x,T[1]=_.y,T[2]=_.x2,T[3]=_.y2,T[4]=_.x3,T[5]=_.y3,!0},triangulate(_,T,R,P,O,I){let z=0;P*=R,T[P+z]=_[0],T[P+z+1]=_[1],z+=R,T[P+z]=_[2],T[P+z+1]=_[3],z+=R,T[P+z]=_[4],T[P+z+1]=_[5];const F=P/R;O[I++]=F,O[I++]=F+1,O[I++]=F+2}},tempTextureMatrix$1=new Matrix,tempRect$2=new Rectangle;function generateTextureMatrix(_,T,R,P){const O=T.matrix?_.copyFrom(T.matrix).invert():_.identity();if(T.textureSpace==="local"){const z=R.getBounds(tempRect$2);T.width&&z.pad(T.width);const{x:F,y:G}=z,V=1/z.width,Z=1/z.height,Y=-F*V,Q=-G*Z,J=O.a,ee=O.b,ne=O.c,se=O.d;O.a*=V,O.b*=V,O.c*=Z,O.d*=Z,O.tx=Y*J+Q*ne+O.tx,O.ty=Y*ee+Q*se+O.ty}else O.translate(T.texture.frame.x,T.texture.frame.y),O.scale(1/T.texture.source.width,1/T.texture.source.height);const I=T.texture.source.style;return!(T.fill instanceof FillGradient)&&I.addressMode==="clamp-to-edge"&&(I.addressMode="repeat",I.update()),P&&O.append(tempTextureMatrix$1.copyFrom(P).invert()),O}const shapeBuilders={};extensions.handleByMap(ExtensionType.ShapeBuilder,shapeBuilders);extensions.add(buildRectangle,buildPolygon,buildTriangle,buildCircle,buildEllipse,buildRoundedRectangle);const tempRect$1=new Rectangle,tempTextureMatrix=new Matrix;function buildContextBatches(_,T){const{geometryData:R,batches:P}=T;P.length=0,R.indices.length=0,R.vertices.length=0,R.uvs.length=0;for(let O=0;O<_.instructions.length;O++){const I=_.instructions[O];if(I.action==="texture")addTextureToGeometryData(I.data,P,R);else if(I.action==="fill"||I.action==="stroke"){const z=I.action==="stroke",F=I.data.path.shapePath,G=I.data.style,V=I.data.hole;z&&V&&addShapePathToGeometryData(V.shapePath,G,!0,P,R),V&&(F.shapePrimitives[F.shapePrimitives.length-1].holes=V.shapePath.shapePrimitives),addShapePathToGeometryData(F,G,z,P,R)}}}function addTextureToGeometryData(_,T,R){const P=[],O=shapeBuilders.rectangle,I=tempRect$1;I.x=_.dx,I.y=_.dy,I.width=_.dw,I.height=_.dh;const z=_.transform;if(!O.build(I,P))return;const{vertices:F,uvs:G,indices:V}=R,Z=V.length,Y=F.length/2;z&&transformVertices(P,z),O.triangulate(P,F,2,Y,V,Z);const Q=_.image,J=Q.uvs;G.push(J.x0,J.y0,J.x1,J.y1,J.x3,J.y3,J.x2,J.y2);const ee=BigPool.get(BatchableGraphics);ee.indexOffset=Z,ee.indexSize=V.length-Z,ee.attributeOffset=Y,ee.attributeSize=F.length/2-Y,ee.baseColor=_.style,ee.alpha=_.alpha,ee.texture=Q,ee.geometryData=R,T.push(ee)}function addShapePathToGeometryData(_,T,R,P,O){const{vertices:I,uvs:z,indices:F}=O;_.shapePrimitives.forEach(({shape:G,transform:V,holes:Z})=>{const Y=[],Q=shapeBuilders[G.type];if(!Q.build(G,Y))return;const J=F.length,ee=I.length/2;let ne="triangle-list";if(V&&transformVertices(Y,V),R){const ce=G.closePath??!0,le=T;le.pixelLine?(buildPixelLine(Y,ce,I,F),ne="line-list"):buildLine(Y,le,!1,ce,I,F)}else if(Z){const ce=[],le=Y.slice();getHoleArrays(Z).forEach(me=>{ce.push(le.length/2),le.push(...me)}),triangulateWithHoles(le,ce,I,2,ee,F,J)}else Q.triangulate(Y,I,2,ee,F,J);const se=z.length/2,oe=T.texture;if(oe!==Texture.WHITE){const ce=generateTextureMatrix(tempTextureMatrix,T,G,V);buildUvs(I,2,ee,z,se,2,I.length/2-ee,ce)}else buildSimpleUvs(z,se,2,I.length/2-ee);const ae=BigPool.get(BatchableGraphics);ae.indexOffset=J,ae.indexSize=F.length-J,ae.attributeOffset=ee,ae.attributeSize=I.length/2-ee,ae.baseColor=T.color,ae.alpha=T.alpha,ae.texture=oe,ae.geometryData=O,ae.topology=ne,P.push(ae)})}function getHoleArrays(_){const T=[];for(let R=0;R<_.length;R++){const P=_[R].shape,O=[];shapeBuilders[P.type].build(P,O)&&T.push(O)}return T}class GpuGraphicsContext{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class GraphicsContextRenderData{constructor(){this.instructions=new InstructionSet}init(T){const R=T.maxTextures;this.batcher?this.batcher._updateMaxTextures(R):this.batcher=new DefaultBatcher({maxTextures:R}),this.instructions.reset()}get geometry(){return deprecation(v8_3_4,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const _GraphicsContextSystem=class hc{constructor(T){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=T,T.renderableGC.addManagedHash(this,"_gpuContextHash"),T.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(T){hc.defaultOptions.bezierSmoothness=T?.bezierSmoothness??hc.defaultOptions.bezierSmoothness}getContextRenderData(T){return this._graphicsDataContextHash[T.uid]||this._initContextRenderData(T)}updateGpuContext(T){let R=this._gpuContextHash[T.uid]||this._initContext(T);if(T.dirty){R?this._cleanGraphicsContextData(T):R=this._initContext(T),buildContextBatches(T,R);const P=T.batchMode;T.customShader||P==="no-batch"?R.isBatchable=!1:P==="auto"?R.isBatchable=R.geometryData.vertices.length<400:R.isBatchable=!0,T.dirty=!1}return R}getGpuContext(T){return this._gpuContextHash[T.uid]||this._initContext(T)}_initContextRenderData(T){const R=BigPool.get(GraphicsContextRenderData,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:P,geometryData:O}=this._gpuContextHash[T.uid],I=O.vertices.length,z=O.indices.length;for(let Z=0;Z<P.length;Z++)P[Z].applyTransform=!1;const F=R.batcher;F.ensureAttributeBuffer(I),F.ensureIndexBuffer(z),F.begin();for(let Z=0;Z<P.length;Z++){const Y=P[Z];F.add(Y)}F.finish(R.instructions);const G=F.geometry;G.indexBuffer.setDataWithSize(F.indexBuffer,F.indexSize,!0),G.buffers[0].setDataWithSize(F.attributeBuffer.float32View,F.attributeSize,!0);const V=F.batches;for(let Z=0;Z<V.length;Z++){const Y=V[Z];Y.bindGroup=getTextureBatchBindGroup(Y.textures.textures,Y.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[T.uid]=R,R}_initContext(T){const R=new GpuGraphicsContext;return R.context=T,this._gpuContextHash[T.uid]=R,T.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[T.uid]}onGraphicsContextDestroy(T){this._cleanGraphicsContextData(T),T.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[T.uid]=null}_cleanGraphicsContextData(T){const R=this._gpuContextHash[T.uid];R.isBatchable||this._graphicsDataContextHash[T.uid]&&(BigPool.return(this.getContextRenderData(T)),this._graphicsDataContextHash[T.uid]=null),R.batches&&R.batches.forEach(P=>{BigPool.return(P)})}destroy(){for(const T in this._gpuContextHash)this._gpuContextHash[T]&&this.onGraphicsContextDestroy(this._gpuContextHash[T].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};_GraphicsContextSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem,ExtensionType.CanvasSystem],name:"graphicsContext"};_GraphicsContextSystem.defaultOptions={bezierSmoothness:.5};let GraphicsContextSystem=_GraphicsContextSystem;const RECURSION_LIMIT$1=8,FLT_EPSILON$1=11920929e-14,PATH_DISTANCE_EPSILON$1=1;function buildAdaptiveBezier(_,T,R,P,O,I,z,F,G,V){const Y=Math.min(.99,Math.max(0,V??GraphicsContextSystem.defaultOptions.bezierSmoothness));let Q=(PATH_DISTANCE_EPSILON$1-Y)/1;return Q*=Q,begin$1(T,R,P,O,I,z,F,G,_,Q),_}function begin$1(_,T,R,P,O,I,z,F,G,V){recursive$1(_,T,R,P,O,I,z,F,G,V,0),G.push(z,F)}function recursive$1(_,T,R,P,O,I,z,F,G,V,Z){if(Z>RECURSION_LIMIT$1)return;const Y=(_+R)/2,Q=(T+P)/2,J=(R+O)/2,ee=(P+I)/2,ne=(O+z)/2,se=(I+F)/2,oe=(Y+J)/2,ae=(Q+ee)/2,ce=(J+ne)/2,le=(ee+se)/2,pe=(oe+ce)/2,me=(ae+le)/2;if(Z>0){let he=z-_,fe=F-T;const de=Math.abs((R-z)*fe-(P-F)*he),be=Math.abs((O-z)*fe-(I-F)*he);if(de>FLT_EPSILON$1&&be>FLT_EPSILON$1){if((de+be)*(de+be)<=V*(he*he+fe*fe)){G.push(pe,me);return}}else if(de>FLT_EPSILON$1){if(de*de<=V*(he*he+fe*fe)){G.push(pe,me);return}}else if(be>FLT_EPSILON$1){if(be*be<=V*(he*he+fe*fe)){G.push(pe,me);return}}else if(he=pe-(_+z)/2,fe=me-(T+F)/2,he*he+fe*fe<=V){G.push(pe,me);return}}recursive$1(_,T,Y,Q,oe,ae,pe,me,G,V,Z+1),recursive$1(pe,me,ce,le,ne,se,z,F,G,V,Z+1)}const RECURSION_LIMIT=8,FLT_EPSILON=11920929e-14,PATH_DISTANCE_EPSILON=1;function buildAdaptiveQuadratic(_,T,R,P,O,I,z,F){const V=Math.min(.99,Math.max(0,F??GraphicsContextSystem.defaultOptions.bezierSmoothness));let Z=(PATH_DISTANCE_EPSILON-V)/1;return Z*=Z,begin(T,R,P,O,I,z,_,Z),_}function begin(_,T,R,P,O,I,z,F){recursive(z,_,T,R,P,O,I,F,0),z.push(O,I)}function recursive(_,T,R,P,O,I,z,F,G){if(G>RECURSION_LIMIT)return;const V=(T+P)/2,Z=(R+O)/2,Y=(P+I)/2,Q=(O+z)/2,J=(V+Y)/2,ee=(Z+Q)/2;let ne=I-T,se=z-R;const oe=Math.abs((P-I)*se-(O-z)*ne);if(oe>FLT_EPSILON){if(oe*oe<=F*(ne*ne+se*se)){_.push(J,ee);return}}else if(ne=J-(T+I)/2,se=ee-(R+z)/2,ne*ne+se*se<=F){_.push(J,ee);return}recursive(_,T,R,V,Z,J,ee,F,G+1),recursive(_,J,ee,Y,Q,I,z,F,G+1)}function buildArc(_,T,R,P,O,I,z,F){let G=Math.abs(O-I);(!z&&O>I||z&&I>O)&&(G=2*Math.PI-G),F||(F=Math.max(6,Math.floor(6*Math.pow(P,1/3)*(G/Math.PI)))),F=Math.max(F,3);let V=G/F,Z=O;V*=z?-1:1;for(let Y=0;Y<F+1;Y++){const Q=Math.cos(Z),J=Math.sin(Z),ee=T+Q*P,ne=R+J*P;_.push(ee,ne),Z+=V}}function buildArcTo(_,T,R,P,O,I){const z=_[_.length-2],G=_[_.length-1]-R,V=z-T,Z=O-R,Y=P-T,Q=Math.abs(G*Y-V*Z);if(Q<1e-8||I===0){(_[_.length-2]!==T||_[_.length-1]!==R)&&_.push(T,R);return}const J=G*G+V*V,ee=Z*Z+Y*Y,ne=G*Z+V*Y,se=I*Math.sqrt(J)/Q,oe=I*Math.sqrt(ee)/Q,ae=se*ne/J,ce=oe*ne/ee,le=se*Y+oe*V,pe=se*Z+oe*G,me=V*(oe+ae),he=G*(oe+ae),fe=Y*(se+ce),de=Z*(se+ce),be=Math.atan2(he-pe,me-le),ye=Math.atan2(de-pe,fe-le);buildArc(_,le+T,pe+R,I,be,ye,V*Z>Y*G)}const TAU=Math.PI*2,out={centerX:0,centerY:0,ang1:0,ang2:0},mapToEllipse=({x:_,y:T},R,P,O,I,z,F,G)=>{_*=R,T*=P;const V=O*_-I*T,Z=I*_+O*T;return G.x=V+z,G.y=Z+F,G};function approxUnitArc(_,T){const R=T===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(T/4),P=T===1.5707963267948966?.551915024494:R,O=Math.cos(_),I=Math.sin(_),z=Math.cos(_+T),F=Math.sin(_+T);return[{x:O-I*P,y:I+O*P},{x:z+F*P,y:F-z*P},{x:z,y:F}]}const vectorAngle=(_,T,R,P)=>{const O=_*P-T*R<0?-1:1;let I=_*R+T*P;return I>1&&(I=1),I<-1&&(I=-1),O*Math.acos(I)},getArcCenter=(_,T,R,P,O,I,z,F,G,V,Z,Y,Q)=>{const J=Math.pow(O,2),ee=Math.pow(I,2),ne=Math.pow(Z,2),se=Math.pow(Y,2);let oe=J*ee-J*se-ee*ne;oe<0&&(oe=0),oe/=J*se+ee*ne,oe=Math.sqrt(oe)*(z===F?-1:1);const ae=oe*O/I*Y,ce=oe*-I/O*Z,le=V*ae-G*ce+(_+R)/2,pe=G*ae+V*ce+(T+P)/2,me=(Z-ae)/O,he=(Y-ce)/I,fe=(-Z-ae)/O,de=(-Y-ce)/I,be=vectorAngle(1,0,me,he);let ye=vectorAngle(me,he,fe,de);F===0&&ye>0&&(ye-=TAU),F===1&&ye<0&&(ye+=TAU),Q.centerX=le,Q.centerY=pe,Q.ang1=be,Q.ang2=ye};function buildArcToSvg(_,T,R,P,O,I,z,F=0,G=0,V=0){if(I===0||z===0)return;const Z=Math.sin(F*TAU/360),Y=Math.cos(F*TAU/360),Q=Y*(T-P)/2+Z*(R-O)/2,J=-Z*(T-P)/2+Y*(R-O)/2;if(Q===0&&J===0)return;I=Math.abs(I),z=Math.abs(z);const ee=Math.pow(Q,2)/Math.pow(I,2)+Math.pow(J,2)/Math.pow(z,2);ee>1&&(I*=Math.sqrt(ee),z*=Math.sqrt(ee)),getArcCenter(T,R,P,O,I,z,G,V,Z,Y,Q,J,out);let{ang1:ne,ang2:se}=out;const{centerX:oe,centerY:ae}=out;let ce=Math.abs(se)/(TAU/4);Math.abs(1-ce)<1e-7&&(ce=1);const le=Math.max(Math.ceil(ce),1);se/=le;let pe=_[_.length-2],me=_[_.length-1];const he={x:0,y:0};for(let fe=0;fe<le;fe++){const de=approxUnitArc(ne,se),{x:be,y:ye}=mapToEllipse(de[0],I,z,Y,Z,oe,ae,he),{x:Ce,y:ve}=mapToEllipse(de[1],I,z,Y,Z,oe,ae,he),{x:Ee,y:we}=mapToEllipse(de[2],I,z,Y,Z,oe,ae,he);buildAdaptiveBezier(_,pe,me,be,ye,Ce,ve,Ee,we),pe=Ee,me=we,ne+=se}}function roundedShapeArc(_,T,R){const P=(z,F)=>{const G=F.x-z.x,V=F.y-z.y,Z=Math.sqrt(G*G+V*V),Y=G/Z,Q=V/Z;return{len:Z,nx:Y,ny:Q}},O=(z,F)=>{z===0?_.moveTo(F.x,F.y):_.lineTo(F.x,F.y)};let I=T[T.length-1];for(let z=0;z<T.length;z++){const F=T[z%T.length],G=F.radius??R;if(G<=0){O(z,F),I=F;continue}const V=T[(z+1)%T.length],Z=P(F,I),Y=P(F,V);if(Z.len<1e-4||Y.len<1e-4){O(z,F),I=F;continue}let Q=Math.asin(Z.nx*Y.ny-Z.ny*Y.nx),J=1,ee=!1;Z.nx*Y.nx-Z.ny*-Y.ny<0?Q<0?Q=Math.PI+Q:(Q=Math.PI-Q,J=-1,ee=!0):Q>0&&(J=-1,ee=!0);const ne=Q/2;let se,oe=Math.abs(Math.cos(ne)*G/Math.sin(ne));oe>Math.min(Z.len/2,Y.len/2)?(oe=Math.min(Z.len/2,Y.len/2),se=Math.abs(oe*Math.sin(ne)/Math.cos(ne))):se=G;const ae=F.x+Y.nx*oe+-Y.ny*se*J,ce=F.y+Y.ny*oe+Y.nx*se*J,le=Math.atan2(Z.ny,Z.nx)+Math.PI/2*J,pe=Math.atan2(Y.ny,Y.nx)-Math.PI/2*J;z===0&&_.moveTo(ae+Math.cos(le)*se,ce+Math.sin(le)*se),_.arc(ae,ce,se,le,pe,ee),I=F}}function roundedShapeQuadraticCurve(_,T,R,P){const O=(F,G)=>Math.sqrt((F.x-G.x)**2+(F.y-G.y)**2),I=(F,G,V)=>({x:F.x+(G.x-F.x)*V,y:F.y+(G.y-F.y)*V}),z=T.length;for(let F=0;F<z;F++){const G=T[(F+1)%z],V=G.radius??R;if(V<=0){F===0?_.moveTo(G.x,G.y):_.lineTo(G.x,G.y);continue}const Z=T[F],Y=T[(F+2)%z],Q=O(Z,G);let J;if(Q<1e-4)J=G;else{const se=Math.min(Q/2,V);J=I(G,Z,se/Q)}const ee=O(Y,G);let ne;if(ee<1e-4)ne=G;else{const se=Math.min(ee/2,V);ne=I(G,Y,se/ee)}F===0?_.moveTo(J.x,J.y):_.lineTo(J.x,J.y),_.quadraticCurveTo(G.x,G.y,ne.x,ne.y,P)}}const tempRectangle=new Rectangle;class ShapePath{constructor(T){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Bounds,this._graphicsPath2D=T,this.signed=T.checkForHoles}moveTo(T,R){return this.startPoly(T,R),this}lineTo(T,R){this._ensurePoly();const P=this._currentPoly.points,O=P[P.length-2],I=P[P.length-1];return(O!==T||I!==R)&&P.push(T,R),this}arc(T,R,P,O,I,z){this._ensurePoly(!1);const F=this._currentPoly.points;return buildArc(F,T,R,P,O,I,z),this}arcTo(T,R,P,O,I){this._ensurePoly();const z=this._currentPoly.points;return buildArcTo(z,T,R,P,O,I),this}arcToSvg(T,R,P,O,I,z,F){const G=this._currentPoly.points;return buildArcToSvg(G,this._currentPoly.lastX,this._currentPoly.lastY,z,F,T,R,P,O,I),this}bezierCurveTo(T,R,P,O,I,z,F){this._ensurePoly();const G=this._currentPoly;return buildAdaptiveBezier(this._currentPoly.points,G.lastX,G.lastY,T,R,P,O,I,z,F),this}quadraticCurveTo(T,R,P,O,I){this._ensurePoly();const z=this._currentPoly;return buildAdaptiveQuadratic(this._currentPoly.points,z.lastX,z.lastY,T,R,P,O,I),this}closePath(){return this.endPoly(!0),this}addPath(T,R){this.endPoly(),R&&!R.isIdentity()&&(T=T.clone(!0),T.transform(R));const P=this.shapePrimitives,O=P.length;for(let I=0;I<T.instructions.length;I++){const z=T.instructions[I];this[z.action](...z.data)}if(T.checkForHoles&&P.length-O>1){let I=null;for(let z=O;z<P.length;z++){const F=P[z];if(F.shape.type==="polygon"){const G=F.shape,V=I?.shape;V&&V.containsPolygon(G)?(I.holes||(I.holes=[]),I.holes.push(F),P.copyWithin(z,z+1),P.length--,z--):I=F}}}return this}finish(T=!1){this.endPoly(T)}rect(T,R,P,O,I){return this.drawShape(new Rectangle(T,R,P,O),I),this}circle(T,R,P,O){return this.drawShape(new Circle(T,R,P),O),this}poly(T,R,P){const O=new Polygon(T);return O.closePath=R,this.drawShape(O,P),this}regularPoly(T,R,P,O,I=0,z){O=Math.max(O|0,3);const F=-1*Math.PI/2+I,G=Math.PI*2/O,V=[];for(let Z=0;Z<O;Z++){const Y=F-Z*G;V.push(T+P*Math.cos(Y),R+P*Math.sin(Y))}return this.poly(V,!0,z),this}roundPoly(T,R,P,O,I,z=0,F){if(O=Math.max(O|0,3),I<=0)return this.regularPoly(T,R,P,O,z);const G=P*Math.sin(Math.PI/O)-.001;I=Math.min(I,G);const V=-1*Math.PI/2+z,Z=Math.PI*2/O,Y=(O-2)*Math.PI/O/2;for(let Q=0;Q<O;Q++){const J=Q*Z+V,ee=T+P*Math.cos(J),ne=R+P*Math.sin(J),se=J+Math.PI+Y,oe=J-Math.PI-Y,ae=ee+I*Math.cos(se),ce=ne+I*Math.sin(se),le=ee+I*Math.cos(oe),pe=ne+I*Math.sin(oe);Q===0?this.moveTo(ae,ce):this.lineTo(ae,ce),this.quadraticCurveTo(ee,ne,le,pe,F)}return this.closePath()}roundShape(T,R,P=!1,O){return T.length<3?this:(P?roundedShapeQuadraticCurve(this,T,R,O):roundedShapeArc(this,T,R),this.closePath())}filletRect(T,R,P,O,I){if(I===0)return this.rect(T,R,P,O);const z=Math.min(P,O)/2,F=Math.min(z,Math.max(-z,I)),G=T+P,V=R+O,Z=F<0?-F:0,Y=Math.abs(F);return this.moveTo(T,R+Y).arcTo(T+Z,R+Z,T+Y,R,Y).lineTo(G-Y,R).arcTo(G-Z,R+Z,G,R+Y,Y).lineTo(G,V-Y).arcTo(G-Z,V-Z,T+P-Y,V,Y).lineTo(T+Y,V).arcTo(T+Z,V-Z,T,V-Y,Y).closePath()}chamferRect(T,R,P,O,I,z){if(I<=0)return this.rect(T,R,P,O);const F=Math.min(I,Math.min(P,O)/2),G=T+P,V=R+O,Z=[T+F,R,G-F,R,G,R+F,G,V-F,G-F,V,T+F,V,T,V-F,T,R+F];for(let Y=Z.length-1;Y>=2;Y-=2)Z[Y]===Z[Y-2]&&Z[Y-1]===Z[Y-3]&&Z.splice(Y-1,2);return this.poly(Z,!0,z)}ellipse(T,R,P,O,I){return this.drawShape(new Ellipse(T,R,P,O),I),this}roundRect(T,R,P,O,I,z){return this.drawShape(new RoundedRectangle(T,R,P,O,I),z),this}drawShape(T,R){return this.endPoly(),this.shapePrimitives.push({shape:T,transform:R}),this}startPoly(T,R){let P=this._currentPoly;return P&&this.endPoly(),P=new Polygon,P.points.push(T,R),this._currentPoly=P,this}endPoly(T=!1){const R=this._currentPoly;return R&&R.points.length>2&&(R.closePath=T,this.shapePrimitives.push({shape:R})),this._currentPoly=null,this}_ensurePoly(T=!0){if(!this._currentPoly&&(this._currentPoly=new Polygon,T)){const R=this.shapePrimitives[this.shapePrimitives.length-1];if(R){let P=R.shape.x,O=R.shape.y;if(R.transform&&!R.transform.isIdentity()){const I=R.transform,z=P;P=I.a*P+I.c*O+I.tx,O=I.b*z+I.d*O+I.ty}this._currentPoly.points.push(P,O)}else this._currentPoly.points.push(0,0)}}buildPath(){const T=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let R=0;R<T.instructions.length;R++){const P=T.instructions[R];this[P.action](...P.data)}this.finish()}get bounds(){const T=this._bounds;T.clear();const R=this.shapePrimitives;for(let P=0;P<R.length;P++){const O=R[P],I=O.shape.getBounds(tempRectangle);O.transform?T.addRect(I,O.transform):T.addRect(I)}return T}}class GraphicsPath{constructor(T,R=!1){this.instructions=[],this.uid=uid("graphicsPath"),this._dirty=!0,this.checkForHoles=R,typeof T=="string"?parseSVGPath(T,this):this.instructions=T?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new ShapePath(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(T,R){return T=T.clone(),this.instructions.push({action:"addPath",data:[T,R]}),this._dirty=!0,this}arc(...T){return this.instructions.push({action:"arc",data:T}),this._dirty=!0,this}arcTo(...T){return this.instructions.push({action:"arcTo",data:T}),this._dirty=!0,this}arcToSvg(...T){return this.instructions.push({action:"arcToSvg",data:T}),this._dirty=!0,this}bezierCurveTo(...T){return this.instructions.push({action:"bezierCurveTo",data:T}),this._dirty=!0,this}bezierCurveToShort(T,R,P,O,I){const z=this.instructions[this.instructions.length-1],F=this.getLastPoint(Point.shared);let G=0,V=0;if(!z||z.action!=="bezierCurveTo")G=F.x,V=F.y;else{G=z.data[2],V=z.data[3];const Z=F.x,Y=F.y;G=Z+(Z-G),V=Y+(Y-V)}return this.instructions.push({action:"bezierCurveTo",data:[G,V,T,R,P,O,I]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...T){return this.instructions.push({action:"ellipse",data:T}),this._dirty=!0,this}lineTo(...T){return this.instructions.push({action:"lineTo",data:T}),this._dirty=!0,this}moveTo(...T){return this.instructions.push({action:"moveTo",data:T}),this}quadraticCurveTo(...T){return this.instructions.push({action:"quadraticCurveTo",data:T}),this._dirty=!0,this}quadraticCurveToShort(T,R,P){const O=this.instructions[this.instructions.length-1],I=this.getLastPoint(Point.shared);let z=0,F=0;if(!O||O.action!=="quadraticCurveTo")z=I.x,F=I.y;else{z=O.data[0],F=O.data[1];const G=I.x,V=I.y;z=G+(G-z),F=V+(V-F)}return this.instructions.push({action:"quadraticCurveTo",data:[z,F,T,R,P]}),this._dirty=!0,this}rect(T,R,P,O,I){return this.instructions.push({action:"rect",data:[T,R,P,O,I]}),this._dirty=!0,this}circle(T,R,P,O){return this.instructions.push({action:"circle",data:[T,R,P,O]}),this._dirty=!0,this}roundRect(...T){return this.instructions.push({action:"roundRect",data:T}),this._dirty=!0,this}poly(...T){return this.instructions.push({action:"poly",data:T}),this._dirty=!0,this}regularPoly(...T){return this.instructions.push({action:"regularPoly",data:T}),this._dirty=!0,this}roundPoly(...T){return this.instructions.push({action:"roundPoly",data:T}),this._dirty=!0,this}roundShape(...T){return this.instructions.push({action:"roundShape",data:T}),this._dirty=!0,this}filletRect(...T){return this.instructions.push({action:"filletRect",data:T}),this._dirty=!0,this}chamferRect(...T){return this.instructions.push({action:"chamferRect",data:T}),this._dirty=!0,this}star(T,R,P,O,I,z,F){I||(I=O/2);const G=-1*Math.PI/2+z,V=P*2,Z=Math.PI*2/V,Y=[];for(let Q=0;Q<V;Q++){const J=Q%2?I:O,ee=Q*Z+G;Y.push(T+J*Math.cos(ee),R+J*Math.sin(ee))}return this.poly(Y,!0,F),this}clone(T=!1){const R=new GraphicsPath;if(R.checkForHoles=this.checkForHoles,!T)R.instructions=this.instructions.slice();else for(let P=0;P<this.instructions.length;P++){const O=this.instructions[P];R.instructions.push({action:O.action,data:O.data.slice()})}return R}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(T){if(T.isIdentity())return this;const R=T.a,P=T.b,O=T.c,I=T.d,z=T.tx,F=T.ty;let G=0,V=0,Z=0,Y=0,Q=0,J=0,ee=0,ne=0;for(let se=0;se<this.instructions.length;se++){const oe=this.instructions[se],ae=oe.data;switch(oe.action){case"moveTo":case"lineTo":G=ae[0],V=ae[1],ae[0]=R*G+O*V+z,ae[1]=P*G+I*V+F;break;case"bezierCurveTo":Z=ae[0],Y=ae[1],Q=ae[2],J=ae[3],G=ae[4],V=ae[5],ae[0]=R*Z+O*Y+z,ae[1]=P*Z+I*Y+F,ae[2]=R*Q+O*J+z,ae[3]=P*Q+I*J+F,ae[4]=R*G+O*V+z,ae[5]=P*G+I*V+F;break;case"quadraticCurveTo":Z=ae[0],Y=ae[1],G=ae[2],V=ae[3],ae[0]=R*Z+O*Y+z,ae[1]=P*Z+I*Y+F,ae[2]=R*G+O*V+z,ae[3]=P*G+I*V+F;break;case"arcToSvg":G=ae[5],V=ae[6],ee=ae[0],ne=ae[1],ae[0]=R*ee+O*ne,ae[1]=P*ee+I*ne,ae[5]=R*G+O*V+z,ae[6]=P*G+I*V+F;break;case"circle":ae[4]=adjustTransform(ae[3],T);break;case"rect":ae[4]=adjustTransform(ae[4],T);break;case"ellipse":ae[8]=adjustTransform(ae[8],T);break;case"roundRect":ae[5]=adjustTransform(ae[5],T);break;case"addPath":ae[0].transform(T);break;case"poly":ae[2]=adjustTransform(ae[2],T);break;default:warn$1("unknown transform action",oe.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(T){let R=this.instructions.length-1,P=this.instructions[R];if(!P)return T.x=0,T.y=0,T;for(;P.action==="closePath";){if(R--,R<0)return T.x=0,T.y=0,T;P=this.instructions[R]}switch(P.action){case"moveTo":case"lineTo":T.x=P.data[0],T.y=P.data[1];break;case"quadraticCurveTo":T.x=P.data[2],T.y=P.data[3];break;case"bezierCurveTo":T.x=P.data[4],T.y=P.data[5];break;case"arc":case"arcToSvg":T.x=P.data[5],T.y=P.data[6];break;case"addPath":P.data[0].getLastPoint(T);break}return T}}function adjustTransform(_,T){return _?_.prepend(T):T.clone()}function parseSVGFloatAttribute(_,T,R){const P=_.getAttribute(T);return P?Number(P):R}function parseSVGDefinitions(_,T){const R=_.querySelectorAll("defs");for(let P=0;P<R.length;P++){const O=R[P];for(let I=0;I<O.children.length;I++){const z=O.children[I];switch(z.nodeName.toLowerCase()){case"lineargradient":T.defs[z.id]=parseLinearGradient(z);break;case"radialgradient":T.defs[z.id]=parseRadialGradient();break}}}}function parseLinearGradient(_){const T=parseSVGFloatAttribute(_,"x1",0),R=parseSVGFloatAttribute(_,"y1",0),P=parseSVGFloatAttribute(_,"x2",1),O=parseSVGFloatAttribute(_,"y2",0),I=_.getAttribute("gradientUnits")||"objectBoundingBox",z=new FillGradient(T,R,P,O,I==="objectBoundingBox"?"local":"global");for(let F=0;F<_.children.length;F++){const G=_.children[F],V=parseSVGFloatAttribute(G,"offset",0),Z=Color$1.shared.setValue(G.getAttribute("stop-color")).toNumber();z.addColorStop(V,Z)}return z}function parseRadialGradient(_){return warn$1("[SVG Parser] Radial gradients are not yet supported"),new FillGradient(0,0,1,0)}function extractSvgUrlId(_){const T=_.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return T?T[1]:""}const styleAttributes={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function parseSVGStyle(_,T){const R=_.getAttribute("style"),P={},O={},I={strokeStyle:P,fillStyle:O,useFill:!1,useStroke:!1};for(const z in styleAttributes){const F=_.getAttribute(z);F&&parseAttribute(T,I,z,F.trim())}if(R){const z=R.split(";");for(let F=0;F<z.length;F++){const G=z[F].trim(),[V,Z]=G.split(":");styleAttributes[V]&&parseAttribute(T,I,V,Z.trim())}}return{strokeStyle:I.useStroke?P:null,fillStyle:I.useFill?O:null,useFill:I.useFill,useStroke:I.useStroke}}function parseAttribute(_,T,R,P){switch(R){case"stroke":if(P!=="none"){if(P.startsWith("url(")){const O=extractSvgUrlId(P);T.strokeStyle.fill=_.defs[O]}else T.strokeStyle.color=Color$1.shared.setValue(P).toNumber();T.useStroke=!0}break;case"stroke-width":T.strokeStyle.width=Number(P);break;case"fill":if(P!=="none"){if(P.startsWith("url(")){const O=extractSvgUrlId(P);T.fillStyle.fill=_.defs[O]}else T.fillStyle.color=Color$1.shared.setValue(P).toNumber();T.useFill=!0}break;case"fill-opacity":T.fillStyle.alpha=Number(P);break;case"stroke-opacity":T.strokeStyle.alpha=Number(P);break;case"opacity":T.fillStyle.alpha=Number(P),T.strokeStyle.alpha=Number(P);break}}function checkForNestedPattern(_){if(_.length<=2)return!0;const T=_.map(F=>F.area).sort((F,G)=>G-F),[R,P]=T,O=T[T.length-1],I=R/P,z=P/O;return!(I>3&&z<2)}function extractSubpaths(_){return _.split(/(?=[Mm])/).filter(P=>P.trim().length>0)}function calculatePathArea(_){const T=_.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!T||T.length<4)return 0;const R=T.map(Number),P=[],O=[];for(let Z=0;Z<R.length;Z+=2)Z+1<R.length&&(P.push(R[Z]),O.push(R[Z+1]));if(P.length===0||O.length===0)return 0;const I=Math.min(...P),z=Math.max(...P),F=Math.min(...O),G=Math.max(...O);return(z-I)*(G-F)}function appendSVGPath(_,T){const R=new GraphicsPath(_,!1);for(const P of R.instructions)T.instructions.push(P)}function SVGParser(_,T){if(typeof _=="string"){const z=document.createElement("div");z.innerHTML=_.trim(),_=z.querySelector("svg")}const R={context:T,defs:{},path:new GraphicsPath};parseSVGDefinitions(_,R);const P=_.children,{fillStyle:O,strokeStyle:I}=parseSVGStyle(_,R);for(let z=0;z<P.length;z++){const F=P[z];F.nodeName.toLowerCase()!=="defs"&&renderChildren(F,R,O,I)}return T}function renderChildren(_,T,R,P){const O=_.children,{fillStyle:I,strokeStyle:z}=parseSVGStyle(_,T);I&&R?R={...R,...I}:I&&(R=I),z&&P?P={...P,...z}:z&&(P=z);const F=!R&&!P;F&&(R={color:0});let G,V,Z,Y,Q,J,ee,ne,se,oe,ae,ce,le,pe,me,he,fe;switch(_.nodeName.toLowerCase()){case"path":{pe=_.getAttribute("d");const de=_.getAttribute("fill-rule"),be=extractSubpaths(pe),ye=de==="evenodd",Ce=be.length>1;if(ye&&Ce){const Ee=be.map(ge=>({path:ge,area:calculatePathArea(ge)}));if(Ee.sort((ge,Se)=>Se.area-ge.area),be.length>3||!checkForNestedPattern(Ee))for(let ge=0;ge<Ee.length;ge++){const Se=Ee[ge],Te=ge===0;T.context.beginPath();const Ae=new GraphicsPath(void 0,!0);appendSVGPath(Se.path,Ae),T.context.path(Ae),Te?(R&&T.context.fill(R),P&&T.context.stroke(P)):T.context.cut()}else for(let ge=0;ge<Ee.length;ge++){const Se=Ee[ge],Te=ge%2===1;T.context.beginPath();const Ae=new GraphicsPath(void 0,!0);appendSVGPath(Se.path,Ae),T.context.path(Ae),Te?T.context.cut():(R&&T.context.fill(R),P&&T.context.stroke(P))}}else{const Ee=de?de==="evenodd":!0;me=new GraphicsPath(pe,Ee),T.context.path(me),R&&T.context.fill(R),P&&T.context.stroke(P)}break}case"circle":ee=parseSVGFloatAttribute(_,"cx",0),ne=parseSVGFloatAttribute(_,"cy",0),se=parseSVGFloatAttribute(_,"r",0),T.context.ellipse(ee,ne,se,se),R&&T.context.fill(R),P&&T.context.stroke(P);break;case"rect":G=parseSVGFloatAttribute(_,"x",0),V=parseSVGFloatAttribute(_,"y",0),he=parseSVGFloatAttribute(_,"width",0),fe=parseSVGFloatAttribute(_,"height",0),oe=parseSVGFloatAttribute(_,"rx",0),ae=parseSVGFloatAttribute(_,"ry",0),oe||ae?T.context.roundRect(G,V,he,fe,oe||ae):T.context.rect(G,V,he,fe),R&&T.context.fill(R),P&&T.context.stroke(P);break;case"ellipse":ee=parseSVGFloatAttribute(_,"cx",0),ne=parseSVGFloatAttribute(_,"cy",0),oe=parseSVGFloatAttribute(_,"rx",0),ae=parseSVGFloatAttribute(_,"ry",0),T.context.beginPath(),T.context.ellipse(ee,ne,oe,ae),R&&T.context.fill(R),P&&T.context.stroke(P);break;case"line":Z=parseSVGFloatAttribute(_,"x1",0),Y=parseSVGFloatAttribute(_,"y1",0),Q=parseSVGFloatAttribute(_,"x2",0),J=parseSVGFloatAttribute(_,"y2",0),T.context.beginPath(),T.context.moveTo(Z,Y),T.context.lineTo(Q,J),P&&T.context.stroke(P);break;case"polygon":le=_.getAttribute("points"),ce=le.match(/\d+/g).map(de=>parseInt(de,10)),T.context.poly(ce,!0),R&&T.context.fill(R),P&&T.context.stroke(P);break;case"polyline":le=_.getAttribute("points"),ce=le.match(/\d+/g).map(de=>parseInt(de,10)),T.context.poly(ce,!1),P&&T.context.stroke(P);break;case"g":case"svg":break;default:{warn$1(`[SVG parser] <${_.nodeName}> elements unsupported`);break}}F&&(R=null);for(let de=0;de<O.length;de++)renderChildren(O[de],T,R,P)}function isColorLike(_){return Color$1.isColorLike(_)}function isFillPattern(_){return _ instanceof FillPattern}function isFillGradient(_){return _ instanceof FillGradient}function isTexture(_){return _ instanceof Texture}function handleColorLike(_,T,R){const P=Color$1.shared.setValue(T??0);return _.color=P.toNumber(),_.alpha=P.alpha===1?R.alpha:P.alpha,_.texture=Texture.WHITE,{...R,..._}}function handleTexture(_,T,R){return _.texture=T,{...R,..._}}function handleFillPattern(_,T,R){return _.fill=T,_.color=16777215,_.texture=T.texture,_.matrix=T.transform,{...R,..._}}function handleFillGradient(_,T,R){return T.buildGradient(),_.fill=T,_.color=16777215,_.texture=T.texture,_.matrix=T.transform,_.textureSpace=T.textureSpace,{...R,..._}}function handleFillObject(_,T){const R={...T,..._},P=Color$1.shared.setValue(R.color);return R.alpha*=P.alpha,R.color=P.toNumber(),R}function toFillStyle(_,T){if(_==null)return null;const R={},P=_;return isColorLike(_)?handleColorLike(R,_,T):isTexture(_)?handleTexture(R,_,T):isFillPattern(_)?handleFillPattern(R,_,T):isFillGradient(_)?handleFillGradient(R,_,T):P.fill&&isFillPattern(P.fill)?handleFillPattern(P,P.fill,T):P.fill&&isFillGradient(P.fill)?handleFillGradient(P,P.fill,T):handleFillObject(P,T)}function toStrokeStyle(_,T){const{width:R,alignment:P,miterLimit:O,cap:I,join:z,pixelLine:F,...G}=T,V=toFillStyle(_,G);return V?{width:R,alignment:P,miterLimit:O,cap:I,join:z,pixelLine:F,...V}:null}const tmpPoint=new Point,tempMatrix=new Matrix,_GraphicsContext=class Hn extends EventEmitter{constructor(){super(...arguments),this.uid=uid("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new GraphicsPath,this._transform=new Matrix,this._fillStyle={...Hn.defaultFillStyle},this._strokeStyle={...Hn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Bounds,this._boundsDirty=!0}clone(){const T=new Hn;return T.batchMode=this.batchMode,T.instructions=this.instructions.slice(),T._activePath=this._activePath.clone(),T._transform=this._transform.clone(),T._fillStyle={...this._fillStyle},T._strokeStyle={...this._strokeStyle},T._stateStack=this._stateStack.slice(),T._bounds=this._bounds.clone(),T._boundsDirty=!0,T}get fillStyle(){return this._fillStyle}set fillStyle(T){this._fillStyle=toFillStyle(T,Hn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(T){this._strokeStyle=toStrokeStyle(T,Hn.defaultStrokeStyle)}setFillStyle(T){return this._fillStyle=toFillStyle(T,Hn.defaultFillStyle),this}setStrokeStyle(T){return this._strokeStyle=toFillStyle(T,Hn.defaultStrokeStyle),this}texture(T,R,P,O,I,z){return this.instructions.push({action:"texture",data:{image:T,dx:P||0,dy:O||0,dw:I||T.frame.width,dh:z||T.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:R?Color$1.shared.setValue(R).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new GraphicsPath,this}fill(T,R){let P;const O=this.instructions[this.instructions.length-1];return this._tick===0&&O?.action==="stroke"?P=O.data.path:P=this._activePath.clone(),P?(T!=null&&(R!==void 0&&typeof T=="number"&&(deprecation(v8_0_0,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),T={color:T,alpha:R}),this._fillStyle=toFillStyle(T,Hn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:P}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:T,y:R}=this._activePath.getLastPoint(Point.shared);this._activePath.clear(),this._activePath.moveTo(T,R)}stroke(T){let R;const P=this.instructions[this.instructions.length-1];return this._tick===0&&P?.action==="fill"?R=P.data.path:R=this._activePath.clone(),R?(T!=null&&(this._strokeStyle=toStrokeStyle(T,Hn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:R}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let T=0;T<2;T++){const R=this.instructions[this.instructions.length-1-T],P=this._activePath.clone();if(R&&(R.action==="stroke"||R.action==="fill"))if(R.data.hole)R.data.hole.addPath(P);else{R.data.hole=P;break}}return this._initNextPathLocation(),this}arc(T,R,P,O,I,z){this._tick++;const F=this._transform;return this._activePath.arc(F.a*T+F.c*R+F.tx,F.b*T+F.d*R+F.ty,P,O,I,z),this}arcTo(T,R,P,O,I){this._tick++;const z=this._transform;return this._activePath.arcTo(z.a*T+z.c*R+z.tx,z.b*T+z.d*R+z.ty,z.a*P+z.c*O+z.tx,z.b*P+z.d*O+z.ty,I),this}arcToSvg(T,R,P,O,I,z,F){this._tick++;const G=this._transform;return this._activePath.arcToSvg(T,R,P,O,I,G.a*z+G.c*F+G.tx,G.b*z+G.d*F+G.ty),this}bezierCurveTo(T,R,P,O,I,z,F){this._tick++;const G=this._transform;return this._activePath.bezierCurveTo(G.a*T+G.c*R+G.tx,G.b*T+G.d*R+G.ty,G.a*P+G.c*O+G.tx,G.b*P+G.d*O+G.ty,G.a*I+G.c*z+G.tx,G.b*I+G.d*z+G.ty,F),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(T,R,P,O){return this._tick++,this._activePath.ellipse(T,R,P,O,this._transform.clone()),this}circle(T,R,P){return this._tick++,this._activePath.circle(T,R,P,this._transform.clone()),this}path(T){return this._tick++,this._activePath.addPath(T,this._transform.clone()),this}lineTo(T,R){this._tick++;const P=this._transform;return this._activePath.lineTo(P.a*T+P.c*R+P.tx,P.b*T+P.d*R+P.ty),this}moveTo(T,R){this._tick++;const P=this._transform,O=this._activePath.instructions,I=P.a*T+P.c*R+P.tx,z=P.b*T+P.d*R+P.ty;return O.length===1&&O[0].action==="moveTo"?(O[0].data[0]=I,O[0].data[1]=z,this):(this._activePath.moveTo(I,z),this)}quadraticCurveTo(T,R,P,O,I){this._tick++;const z=this._transform;return this._activePath.quadraticCurveTo(z.a*T+z.c*R+z.tx,z.b*T+z.d*R+z.ty,z.a*P+z.c*O+z.tx,z.b*P+z.d*O+z.ty,I),this}rect(T,R,P,O){return this._tick++,this._activePath.rect(T,R,P,O,this._transform.clone()),this}roundRect(T,R,P,O,I){return this._tick++,this._activePath.roundRect(T,R,P,O,I,this._transform.clone()),this}poly(T,R){return this._tick++,this._activePath.poly(T,R,this._transform.clone()),this}regularPoly(T,R,P,O,I=0,z){return this._tick++,this._activePath.regularPoly(T,R,P,O,I,z),this}roundPoly(T,R,P,O,I,z){return this._tick++,this._activePath.roundPoly(T,R,P,O,I,z),this}roundShape(T,R,P,O){return this._tick++,this._activePath.roundShape(T,R,P,O),this}filletRect(T,R,P,O,I){return this._tick++,this._activePath.filletRect(T,R,P,O,I),this}chamferRect(T,R,P,O,I,z){return this._tick++,this._activePath.chamferRect(T,R,P,O,I,z),this}star(T,R,P,O,I=0,z=0){return this._tick++,this._activePath.star(T,R,P,O,I,z,this._transform.clone()),this}svg(T){return this._tick++,SVGParser(T,this),this}restore(){const T=this._stateStack.pop();return T&&(this._transform=T.transform,this._fillStyle=T.fillStyle,this._strokeStyle=T.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(T){return this._transform.rotate(T),this}scale(T,R=T){return this._transform.scale(T,R),this}setTransform(T,R,P,O,I,z){return T instanceof Matrix?(this._transform.set(T.a,T.b,T.c,T.d,T.tx,T.ty),this):(this._transform.set(T,R,P,O,I,z),this)}transform(T,R,P,O,I,z){return T instanceof Matrix?(this._transform.append(T),this):(tempMatrix.set(T,R,P,O,I,z),this._transform.append(tempMatrix),this)}translate(T,R=T){return this._transform.translate(T,R),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const T=this._bounds;T.clear();for(let R=0;R<this.instructions.length;R++){const P=this.instructions[R],O=P.action;if(O==="fill"){const I=P.data;T.addBounds(I.path.bounds)}else if(O==="texture"){const I=P.data;T.addFrame(I.dx,I.dy,I.dx+I.dw,I.dy+I.dh,I.transform)}if(O==="stroke"){const I=P.data,z=I.style.alignment,F=I.style.width*(1-z),G=I.path.bounds;T.addFrame(G.minX-F,G.minY-F,G.maxX+F,G.maxY+F)}}return T}containsPoint(T){if(!this.bounds.containsPoint(T.x,T.y))return!1;const R=this.instructions;let P=!1;for(let O=0;O<R.length;O++){const I=R[O],z=I.data,F=z.path;if(!I.action||!F)continue;const G=z.style,V=F.shapePath.shapePrimitives;for(let Z=0;Z<V.length;Z++){const Y=V[Z].shape;if(!G||!Y)continue;const Q=V[Z].transform,J=Q?Q.applyInverse(T,tmpPoint):T;if(I.action==="fill")P=Y.contains(J.x,J.y);else{const ne=G;P=Y.strokeContains(J.x,J.y,ne.width,ne.alignment)}const ee=z.hole;if(ee){const ne=ee.shapePath?.shapePrimitives;if(ne)for(let se=0;se<ne.length;se++)ne[se].shape.contains(J.x,J.y)&&(P=!1)}if(P)return!0}}return P}destroy(T=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof T=="boolean"?T:T?.texture){const P=typeof T=="boolean"?T:T?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(P)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(P))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};_GraphicsContext.defaultFillStyle={color:16777215,alpha:1,texture:Texture.WHITE,matrix:null,fill:null,textureSpace:"local"};_GraphicsContext.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Texture.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let GraphicsContext=_GraphicsContext;const _TextStyle=class Li extends EventEmitter{constructor(T={}){super(),this.uid=uid("textStyle"),this._tick=0,convertV7Tov8Style(T);const R={...Li.defaultTextStyle,...T};for(const P in R){const O=P;this[O]=R[P]}this.update(),this._tick=0}get align(){return this._align}set align(T){this._align!==T&&(this._align=T,this.update())}get breakWords(){return this._breakWords}set breakWords(T){this._breakWords!==T&&(this._breakWords=T,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(T){this._dropShadow!==T&&(T!==null&&typeof T=="object"?this._dropShadow=this._createProxy({...Li.defaultDropShadow,...T}):this._dropShadow=T?this._createProxy({...Li.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(T){this._fontFamily!==T&&(this._fontFamily=T,this.update())}get fontSize(){return this._fontSize}set fontSize(T){this._fontSize!==T&&(typeof T=="string"?this._fontSize=parseInt(T,10):this._fontSize=T,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(T){this._fontStyle!==T&&(this._fontStyle=T.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(T){this._fontVariant!==T&&(this._fontVariant=T,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(T){this._fontWeight!==T&&(this._fontWeight=T,this.update())}get leading(){return this._leading}set leading(T){this._leading!==T&&(this._leading=T,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(T){this._letterSpacing!==T&&(this._letterSpacing=T,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(T){this._lineHeight!==T&&(this._lineHeight=T,this.update())}get padding(){return this._padding}set padding(T){this._padding!==T&&(this._padding=T,this.update())}get filters(){return this._filters}set filters(T){this._filters!==T&&(this._filters=Object.freeze(T),this.update())}get trim(){return this._trim}set trim(T){this._trim!==T&&(this._trim=T,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(T){this._textBaseline!==T&&(this._textBaseline=T,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(T){this._whiteSpace!==T&&(this._whiteSpace=T,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(T){this._wordWrap!==T&&(this._wordWrap=T,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(T){this._wordWrapWidth!==T&&(this._wordWrapWidth=T,this.update())}get fill(){return this._originalFill}set fill(T){T!==this._originalFill&&(this._originalFill=T,this._isFillStyle(T)&&(this._originalFill=this._createProxy({...GraphicsContext.defaultFillStyle,...T},()=>{this._fill=toFillStyle({...this._originalFill},GraphicsContext.defaultFillStyle)})),this._fill=toFillStyle(T===0?"black":T,GraphicsContext.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(T){T!==this._originalStroke&&(this._originalStroke=T,this._isFillStyle(T)&&(this._originalStroke=this._createProxy({...GraphicsContext.defaultStrokeStyle,...T},()=>{this._stroke=toStrokeStyle({...this._originalStroke},GraphicsContext.defaultStrokeStyle)})),this._stroke=toStrokeStyle(T,GraphicsContext.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const T=Li.defaultTextStyle;for(const R in T)this[R]=T[R]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new Li({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let T=0;if(this._filters)for(let R=0;R<this._filters.length;R++)T+=this._filters[R].padding;return Math.max(this._padding,T)}destroy(T=!1){if(this.removeAllListeners(),typeof T=="boolean"?T:T?.texture){const P=typeof T=="boolean"?T:T?.textureSource;this._fill?.texture&&this._fill.texture.destroy(P),this._originalFill?.texture&&this._originalFill.texture.destroy(P),this._stroke?.texture&&this._stroke.texture.destroy(P),this._originalStroke?.texture&&this._originalStroke.texture.destroy(P)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(T,R){return new Proxy(T,{set:(P,O,I)=>(P[O]===I||(P[O]=I,R?.(O,I),this.update()),!0)})}_isFillStyle(T){return(T??null)!==null&&!(Color$1.isColorLike(T)||T instanceof FillGradient||T instanceof FillPattern)}};_TextStyle.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};_TextStyle.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let TextStyle=_TextStyle;function convertV7Tov8Style(_){const T=_;if(typeof T.dropShadow=="boolean"&&T.dropShadow){const R=TextStyle.defaultDropShadow;_.dropShadow={alpha:T.dropShadowAlpha??R.alpha,angle:T.dropShadowAngle??R.angle,blur:T.dropShadowBlur??R.blur,color:T.dropShadowColor??R.color,distance:T.dropShadowDistance??R.distance}}if(T.strokeThickness!==void 0){deprecation(v8_0_0,"strokeThickness is now a part of stroke");const R=T.stroke;let P={};if(Color$1.isColorLike(R))P.color=R;else if(R instanceof FillGradient||R instanceof FillPattern)P.fill=R;else if(Object.hasOwnProperty.call(R,"color")||Object.hasOwnProperty.call(R,"fill"))P=R;else throw new Error("Invalid stroke value.");_.stroke={...P,width:T.strokeThickness}}if(Array.isArray(T.fillGradientStops)){if(deprecation(v8_0_0,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(T.fill)||T.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");T.fill.length!==T.fillGradientStops.length&&warn$1("The number of fill colors must match the number of fill gradient stops.");const R=new FillGradient({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),P=T.fillGradientStops.slice(),O=T.fill.map(I=>Color$1.shared.setValue(I).toNumber());P.forEach((I,z)=>{R.addColorStop(I,O[z])}),_.fill={fill:R}}}class CanvasPoolClass{constructor(T){this._canvasPool=Object.create(null),this.canvasOptions=T||{},this.enableFullScreen=!1}_createCanvasAndContext(T,R){const P=DOMAdapter.get().createCanvas();P.width=T,P.height=R;const O=P.getContext("2d");return{canvas:P,context:O}}getOptimalCanvasAndContext(T,R,P=1){T=Math.ceil(T*P-1e-6),R=Math.ceil(R*P-1e-6),T=nextPow2(T),R=nextPow2(R);const O=(T<<17)+(R<<1);this._canvasPool[O]||(this._canvasPool[O]=[]);let I=this._canvasPool[O].pop();return I||(I=this._createCanvasAndContext(T,R)),I}returnCanvasAndContext(T){const R=T.canvas,{width:P,height:O}=R,I=(P<<17)+(O<<1);T.context.resetTransform(),T.context.clearRect(0,0,P,O),this._canvasPool[I].push(T)}clear(){this._canvasPool={}}}const CanvasPool=new CanvasPoolClass;GlobalResourceRegistry.register(CanvasPool);const PRECISION=1e5;function getCanvasFillStyle(_,T,R,P=0){if(_.texture===Texture.WHITE&&!_.fill)return Color$1.shared.setValue(_.color).setAlpha(_.alpha??1).toHexa();if(_.fill){if(_.fill instanceof FillPattern){const O=_.fill,I=T.createPattern(O.texture.source.resource,"repeat"),z=O.transform.copyTo(Matrix.shared);return z.scale(O.texture.frame.width,O.texture.frame.height),I.setTransform(z),I}else if(_.fill instanceof FillGradient){const O=_.fill,I=O.type==="linear",z=O.textureSpace==="local";let F=1,G=1;z&&R&&(F=R.width+P,G=R.height+P);let V,Z=!1;if(I){const{start:Y,end:Q}=O;V=T.createLinearGradient(Y.x*F,Y.y*G,Q.x*F,Q.y*G),Z=Math.abs(Q.x-Y.x)<Math.abs((Q.y-Y.y)*.1)}else{const{center:Y,innerRadius:Q,outerCenter:J,outerRadius:ee}=O;V=T.createRadialGradient(Y.x*F,Y.y*G,Q*F,J.x*F,J.y*G,ee*F)}if(Z&&z&&R){const Y=R.lineHeight/G;for(let Q=0;Q<R.lines.length;Q++){const J=(Q*R.lineHeight+P/2)/G;O.colorStops.forEach(ee=>{const ne=J+ee.offset*Y;V.addColorStop(Math.floor(ne*PRECISION)/PRECISION,Color$1.shared.setValue(ee.color).toHex())})}}else O.colorStops.forEach(Y=>{V.addColorStop(Y.offset,Color$1.shared.setValue(Y.color).toHex())});return V}}else{const O=T.createPattern(_.texture.source.resource,"repeat"),I=_.matrix.copyTo(Matrix.shared);return I.scale(_.texture.frame.width,_.texture.frame.height),O.setTransform(I),O}return warn$1("FillStyle not recognised",_),"red"}class Graphics extends ViewContainer{constructor(T){T instanceof GraphicsContext&&(T={context:T});const{context:R,roundPixels:P,...O}=T||{};super({label:"Graphics",...O}),this.renderPipeId="graphics",R?this._context=R:this._context=this._ownedContext=new GraphicsContext,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=P??!1}set context(T){T!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=T,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(T){return this._context.containsPoint(T)}destroy(T){this._ownedContext&&!T?this._ownedContext.destroy(T):(T===!0||T?.context===!0)&&this._context.destroy(T),this._ownedContext=null,this._context=null,super.destroy(T)}_callContextMethod(T,R){return this.context[T](...R),this}setFillStyle(...T){return this._callContextMethod("setFillStyle",T)}setStrokeStyle(...T){return this._callContextMethod("setStrokeStyle",T)}fill(...T){return this._callContextMethod("fill",T)}stroke(...T){return this._callContextMethod("stroke",T)}texture(...T){return this._callContextMethod("texture",T)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...T){return this._callContextMethod("arc",T)}arcTo(...T){return this._callContextMethod("arcTo",T)}arcToSvg(...T){return this._callContextMethod("arcToSvg",T)}bezierCurveTo(...T){return this._callContextMethod("bezierCurveTo",T)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...T){return this._callContextMethod("ellipse",T)}circle(...T){return this._callContextMethod("circle",T)}path(...T){return this._callContextMethod("path",T)}lineTo(...T){return this._callContextMethod("lineTo",T)}moveTo(...T){return this._callContextMethod("moveTo",T)}quadraticCurveTo(...T){return this._callContextMethod("quadraticCurveTo",T)}rect(...T){return this._callContextMethod("rect",T)}roundRect(...T){return this._callContextMethod("roundRect",T)}poly(...T){return this._callContextMethod("poly",T)}regularPoly(...T){return this._callContextMethod("regularPoly",T)}roundPoly(...T){return this._callContextMethod("roundPoly",T)}roundShape(...T){return this._callContextMethod("roundShape",T)}filletRect(...T){return this._callContextMethod("filletRect",T)}chamferRect(...T){return this._callContextMethod("chamferRect",T)}star(...T){return this._callContextMethod("star",T)}svg(...T){return this._callContextMethod("svg",T)}restore(...T){return this._callContextMethod("restore",T)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...T){return this._callContextMethod("rotate",T)}scaleTransform(...T){return this._callContextMethod("scale",T)}setTransform(...T){return this._callContextMethod("setTransform",T)}transform(...T){return this._callContextMethod("transform",T)}translateTransform(...T){return this._callContextMethod("translate",T)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(T){this._context.fillStyle=T}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(T){this._context.strokeStyle=T}clone(T=!1){return T?new Graphics(this._context.clone()):(this._ownedContext=null,new Graphics(this._context))}lineStyle(T,R,P){deprecation(v8_0_0,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const O={};return T&&(O.width=T),R&&(O.color=R),P&&(O.alpha=P),this.context.strokeStyle=O,this}beginFill(T,R){deprecation(v8_0_0,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const P={};return T!==void 0&&(P.color=T),R!==void 0&&(P.alpha=R),this.context.fillStyle=P,this}endFill(){deprecation(v8_0_0,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const T=this.context.strokeStyle;return(T.width!==GraphicsContext.defaultStrokeStyle.width||T.color!==GraphicsContext.defaultStrokeStyle.color||T.alpha!==GraphicsContext.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...T){return deprecation(v8_0_0,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",T)}drawEllipse(...T){return deprecation(v8_0_0,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",T)}drawPolygon(...T){return deprecation(v8_0_0,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",T)}drawRect(...T){return deprecation(v8_0_0,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",T)}drawRoundedRect(...T){return deprecation(v8_0_0,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",T)}drawStar(...T){return deprecation(v8_0_0,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",T)}}class AbstractText extends ViewContainer{constructor(T,R){const{text:P,resolution:O,style:I,anchor:z,width:F,height:G,roundPixels:V,...Z}=T;super({...Z}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=R,this.text=P??"",this.style=I,this.resolution=O??null,this.allowChildren=!1,this._anchor=new ObservablePoint({_onUpdate:()=>{this.onViewUpdate()}}),z&&(this.anchor=z),this.roundPixels=V??!1,F!==void 0&&(this.width=F),G!==void 0&&(this.height=G)}get anchor(){return this._anchor}set anchor(T){typeof T=="number"?this._anchor.set(T):this._anchor.copyFrom(T)}set text(T){T=T.toString(),this._text!==T&&(this._text=T,this.onViewUpdate())}get text(){return this._text}set resolution(T){this._autoResolution=T===null,this._resolution=T,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(T){T||(T={}),this._style?.off("update",this.onViewUpdate,this),T instanceof this._styleClass?this._style=T:this._style=new this._styleClass(T),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(T){this._setWidth(T,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(T){this._setHeight(T,this.bounds.height)}getSize(T){return T||(T={}),T.width=Math.abs(this.scale.x)*this.bounds.width,T.height=Math.abs(this.scale.y)*this.bounds.height,T}setSize(T,R){typeof T=="object"?(R=T.height??T.width,T=T.width):R??(R=T),T!==void 0&&this._setWidth(T,this.bounds.width),R!==void 0&&this._setHeight(R,this.bounds.height)}containsPoint(T){const R=this.bounds.width,P=this.bounds.height,O=-R*this.anchor.x;let I=0;return T.x>=O&&T.x<=O+R&&(I=-P*this.anchor.y,T.y>=I&&T.y<=I+P)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(T=!1){super.destroy(T),this.owner=null,this._bounds=null,this._anchor=null,(typeof T=="boolean"?T:T?.style)&&this._style.destroy(T),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function ensureTextOptions(_,T){let R=_[0]??{};return(typeof R=="string"||_[1])&&(deprecation(v8_0_0,`use new ${T}({ text: "hi!", style }) instead`),R={text:R,style:_[1]}),R}let _internalCanvas=null,_internalContext=null;function ensureInternalCanvas(_,T){_internalCanvas||(_internalCanvas=DOMAdapter.get().createCanvas(256,128),_internalContext=_internalCanvas.getContext("2d",{willReadFrequently:!0}),_internalContext.globalCompositeOperation="copy",_internalContext.globalAlpha=1),(_internalCanvas.width<_||_internalCanvas.height<T)&&(_internalCanvas.width=nextPow2(_),_internalCanvas.height=nextPow2(T))}function checkRow(_,T,R){for(let P=0,O=4*R*T;P<T;++P,O+=4)if(_[O+3]!==0)return!1;return!0}function checkColumn(_,T,R,P,O){const I=4*T;for(let z=P,F=P*I+4*R;z<=O;++z,F+=I)if(_[F+3]!==0)return!1;return!0}function getCanvasBoundingBox(..._){let T=_[0];T.canvas||(T={canvas:_[0],resolution:_[1]});const{canvas:R}=T,P=Math.min(T.resolution??1,1),O=T.width??R.width,I=T.height??R.height;let z=T.output;if(ensureInternalCanvas(O,I),!_internalContext)throw new TypeError("Failed to get canvas 2D context");_internalContext.drawImage(R,0,0,O,I,0,0,O*P,I*P);const G=_internalContext.getImageData(0,0,O,I).data;let V=0,Z=0,Y=O-1,Q=I-1;for(;Z<I&&checkRow(G,O,Z);)++Z;if(Z===I)return Rectangle.EMPTY;for(;checkRow(G,O,Q);)--Q;for(;checkColumn(G,O,V,Z,Q);)++V;for(;checkColumn(G,O,Y,Z,Q);)--Y;return++Y,++Q,_internalContext.globalCompositeOperation="source-over",_internalContext.strokeRect(V,Z,Y-V,Q-Z),_internalContext.globalCompositeOperation="copy",z??(z=new Rectangle),z.set(V/P,Z/P,(Y-V)/P,(Q-Z)/P),z}const tempRect=new Rectangle;class CanvasTextGeneratorClass{getCanvasAndContext(T){const{text:R,style:P,resolution:O=1}=T,I=P._getFinalPadding(),z=CanvasTextMetrics.measureText(R||" ",P),F=Math.ceil(Math.ceil(Math.max(1,z.width)+I*2)*O),G=Math.ceil(Math.ceil(Math.max(1,z.height)+I*2)*O),V=CanvasPool.getOptimalCanvasAndContext(F,G);this._renderTextToCanvas(R,P,I,O,V);const Z=P.trim?getCanvasBoundingBox({canvas:V.canvas,width:F,height:G,resolution:1,output:tempRect}):tempRect.set(0,0,F,G);return{canvasAndContext:V,frame:Z}}returnCanvasAndContext(T){CanvasPool.returnCanvasAndContext(T)}_renderTextToCanvas(T,R,P,O,I){const{canvas:z,context:F}=I,G=fontStringFromTextStyle(R),V=CanvasTextMetrics.measureText(T||" ",R),Z=V.lines,Y=V.lineHeight,Q=V.lineWidths,J=V.maxLineWidth,ee=V.fontProperties,ne=z.height;if(F.resetTransform(),F.scale(O,O),F.textBaseline=R.textBaseline,R._stroke?.width){const ce=R._stroke;F.lineWidth=ce.width,F.miterLimit=ce.miterLimit,F.lineJoin=ce.join,F.lineCap=ce.cap}F.font=G;let se,oe;const ae=R.dropShadow?2:1;for(let ce=0;ce<ae;++ce){const le=R.dropShadow&&ce===0,pe=le?Math.ceil(Math.max(1,ne)+P*2):0,me=pe*O;if(le){F.fillStyle="black",F.strokeStyle="black";const de=R.dropShadow,be=de.color,ye=de.alpha;F.shadowColor=Color$1.shared.setValue(be).setAlpha(ye).toRgbaString();const Ce=de.blur*O,ve=de.distance*O;F.shadowBlur=Ce,F.shadowOffsetX=Math.cos(de.angle)*ve,F.shadowOffsetY=Math.sin(de.angle)*ve+me}else{if(F.fillStyle=R._fill?getCanvasFillStyle(R._fill,F,V,P*2):null,R._stroke?.width){const de=R._stroke.width*.5+P*2;F.strokeStyle=getCanvasFillStyle(R._stroke,F,V,de)}F.shadowColor="black"}let he=(Y-ee.fontSize)/2;Y-ee.fontSize<0&&(he=0);const fe=R._stroke?.width??0;for(let de=0;de<Z.length;de++)se=fe/2,oe=fe/2+de*Y+ee.ascent+he,R.align==="right"?se+=J-Q[de]:R.align==="center"&&(se+=(J-Q[de])/2),R._stroke?.width&&this._drawLetterSpacing(Z[de],R,I,se+P,oe+P-pe,!0),R._fill!==void 0&&this._drawLetterSpacing(Z[de],R,I,se+P,oe+P-pe)}}_drawLetterSpacing(T,R,P,O,I,z=!1){const{context:F}=P,G=R.letterSpacing;let V=!1;if(CanvasTextMetrics.experimentalLetterSpacingSupported&&(CanvasTextMetrics.experimentalLetterSpacing?(F.letterSpacing=`${G}px`,F.textLetterSpacing=`${G}px`,V=!0):(F.letterSpacing="0px",F.textLetterSpacing="0px")),G===0||V){z?F.strokeText(T,O,I):F.fillText(T,O,I);return}let Z=O;const Y=CanvasTextMetrics.graphemeSegmenter(T);let Q=F.measureText(T).width,J=0;for(let ee=0;ee<Y.length;++ee){const ne=Y[ee];z?F.strokeText(ne,Z,I):F.fillText(ne,Z,I);let se="";for(let oe=ee+1;oe<Y.length;++oe)se+=Y[oe];J=F.measureText(se).width,Z+=Q-J+G,Q=J}}}const CanvasTextGenerator=new CanvasTextGeneratorClass;let Text$1=class extends AbstractText{constructor(...T){const R=ensureTextOptions(T,"Text");super(R,TextStyle),this.renderPipeId="text",R.textureStyle&&(this.textureStyle=R.textureStyle instanceof TextureStyle?R.textureStyle:new TextureStyle(R.textureStyle))}updateBounds(){const T=this._bounds,R=this._anchor;let P=0,O=0;if(this._style.trim){const{frame:I,canvasAndContext:z}=CanvasTextGenerator.getCanvasAndContext({text:this.text,style:this._style,resolution:1});CanvasTextGenerator.returnCanvasAndContext(z),P=I.width,O=I.height}else{const I=CanvasTextMetrics.measureText(this._text,this._style);P=I.width,O=I.height}T.minX=-R._x*P,T.maxX=T.minX+P,T.minY=-R._y*O,T.maxY=T.minY+O}};extensions.add(browserExt,webworkerExt);class SimulationRenderer{app;mainContainer;cellsContainer;linksContainer;overlayContainer;uiContainer;isDark;showScaleBar;model=null;params=null;scale=1;centerX=0;centerY=0;constructor(T){this.isDark=T.isDark??!1,this.showScaleBar=T.showScaleBar??!0,this.app=new Application,this.linksContainer=new Container,this.cellsContainer=new Container,this.overlayContainer=new Container,this.mainContainer=new Container,this.uiContainer=new Container,this.mainContainer.addChild(this.linksContainer),this.mainContainer.addChild(this.cellsContainer),this.mainContainer.addChild(this.overlayContainer)}async init(T){const R=this.model?.renderer.getBackgroundColor(this.isDark)??16777215;await this.app.init({canvas:T,width:T.width,height:T.height,backgroundColor:R,antialias:!0,resolution:window.devicePixelRatio||1,autoDensity:!0,preserveDrawingBuffer:!0}),this.app.stage.addChild(this.mainContainer),this.app.stage.addChild(this.uiContainer)}setModel(T){this.model=T;const R=T.renderer.getBackgroundColor(this.isDark);this.app.renderer&&(this.app.renderer.background.color=R)}setParams(T){this.params=T,this.updateViewport()}setDarkMode(T){if(this.isDark=T,this.model&&this.app.renderer){const R=this.model.renderer.getBackgroundColor(T);this.app.renderer.background.color=R}}resize(T,R){this.app.renderer&&(this.app.renderer.resize(T,R),this.updateViewport())}updateViewport(){if(!this.model||!this.params||!this.app.renderer)return;const T=this.app.renderer.width,R=this.app.renderer.height,P=this.model.renderer.getBoundingBox(this.params,void 0),O=.1,I=(P.maxX-P.minX)*(1+2*O),z=(P.maxY-P.minY)*(1+2*O);this.centerX=(P.minX+P.maxX)/2,this.centerY=(P.minY+P.maxY)/2;const F=T/I,G=R/z;this.scale=Math.min(F,G),this.mainContainer.scale.set(this.scale,-this.scale),this.mainContainer.position.set(T/2-this.centerX*this.scale,R/2+this.centerY*this.scale)}render(T){if(!this.model||!this.params)return;this.cellsContainer.removeChildren(),this.linksContainer.removeChildren(),this.overlayContainer.removeChildren(),this.uiContainer.removeChildren();const R=new Graphics,P=new Graphics,O=new Graphics;this.cellsContainer.addChild(R),this.linksContainer.addChild(P),this.overlayContainer.addChild(O);const I={graphics:{cells:R,links:P,overlay:O},isDark:this.isDark,scale:this.scale};this.model.renderer.render(I,T,this.params),this.showScaleBar&&this.drawScaleBar()}drawScaleBar(){if(!this.app.renderer)return;const T=this.app.renderer.width,R=this.app.renderer.height,O=2*this.scale,I=20,z=T-I-O,F=R-I-10,G=this.isDark?11579600:6579300,V=this.isDark?11581695:5263520,Z=new Graphics;Z.moveTo(z,F),Z.lineTo(z+O,F),Z.stroke({color:G,alpha:1,width:2}),Z.moveTo(z,F-5),Z.lineTo(z,F+5),Z.moveTo(z+O,F-5),Z.lineTo(z+O,F+5),Z.stroke({color:G,alpha:1,width:2}),this.uiContainer.addChild(Z);const Y=new TextStyle({fontFamily:"monospace",fontSize:12,fill:V}),Q=new Text$1({text:"10 m",style:Y});Q.anchor.set(.5,0),Q.position.set(z+O/2,F+8),this.uiContainer.addChild(Q)}getApp(){return this.app}destroy(){this.app.destroy(!0)}}const SimulationCanvas=reactExports.forwardRef(({state:_,params:T,minHeight:R=350,aspectRatio:P=1,className:O,style:I},z)=>{const F=reactExports.useRef(null),G=reactExports.useRef(null),V=reactExports.useRef(null),Z=reactExports.useRef(null),Y=reactExports.useRef([]),[Q,J]=reactExports.useState(!1),[ee,ne]=reactExports.useState({width:800,height:R}),{isDark:se}=useTheme(),{currentModel:oe}=useModel();reactExports.useImperativeHandle(z,()=>({getScreenshot:()=>G.current?G.current.toDataURL("image/png"):null,startRecording:()=>{if(!G.current||Z.current)return;const ce=G.current.captureStream(30),le=MediaRecorder.isTypeSupported("video/webm;codecs=vp9")?"video/webm;codecs=vp9":"video/webm",pe=new MediaRecorder(ce,{mimeType:le});Y.current=[],pe.ondataavailable=me=>{me.data.size>0&&Y.current.push(me.data)},Z.current=pe,pe.start(100)},stopRecording:()=>new Promise(ce=>{const le=Z.current;if(!le){ce(null);return}le.onstop=()=>{const pe=new Blob(Y.current,{type:"video/webm"});Y.current=[],Z.current=null,ce(pe)},le.stop()}),isRecording:()=>Z.current?.state==="recording"}),[]);const ae=reactExports.useCallback(()=>{if(F.current){const ce=F.current.getBoundingClientRect(),le=Math.floor(ce.width),pe=Math.floor(le/P),me=Math.max(R,pe);le>0&&me>0&&ne({width:le,height:me})}},[R,P]);return reactExports.useEffect(()=>{const ce=F.current;if(!ce)return;ae();const le=new ResizeObserver(()=>{ae()});return le.observe(ce),window.addEventListener("resize",ae),()=>{le.disconnect(),window.removeEventListener("resize",ae)}},[ae]),reactExports.useEffect(()=>{const ce=G.current;if(!ce)return;let le=!0;return(async()=>{const me=new SimulationRenderer({width:ee.width,height:ee.height,isDark:se});await me.init(ce),le&&(V.current=me,me.setModel(oe),me.setParams(T),J(!0))})(),()=>{le=!1,V.current&&(V.current.destroy(),V.current=null),J(!1)}},[]),reactExports.useEffect(()=>{V.current&&Q&&(V.current.setParams(T),_&&V.current.render(_))},[T,Q,_]),reactExports.useEffect(()=>{V.current&&Q&&ee.width>0&&ee.height>0&&(V.current.resize(ee.width,ee.height),_&&V.current.render(_))},[ee.width,ee.height,Q,_]),reactExports.useEffect(()=>{V.current&&_&&Q&&V.current.render(_)},[_,Q]),reactExports.useEffect(()=>{V.current&&Q&&(V.current.setDarkMode(se),_&&V.current.render(_))},[se,Q,_]),reactExports.useEffect(()=>{V.current&&Q&&(V.current.setModel(oe),V.current.setParams(T),_&&V.current.render(_))},[oe,Q,_,T]),jsxRuntimeExports.jsx("div",{ref:F,className:O,style:{width:"100%",minHeight:`${R}px`,...I},children:jsxRuntimeExports.jsx("canvas",{ref:G,width:ee.width,height:ee.height,style:{display:"block",width:"100%",height:"100%"}})})});SimulationCanvas.displayName="SimulationCanvas";function createContextScope(_,T=[]){let R=[];function P(I,z){const F=reactExports.createContext(z);F.displayName=I+"Context";const G=R.length;R=[...R,z];const V=Y=>{const{scope:Q,children:J,...ee}=Y,ne=Q?.[_]?.[G]||F,se=reactExports.useMemo(()=>ee,Object.values(ee));return jsxRuntimeExports.jsx(ne.Provider,{value:se,children:J})};V.displayName=I+"Provider";function Z(Y,Q){const J=Q?.[_]?.[G]||F,ee=reactExports.useContext(J);if(ee)return ee;if(z!==void 0)return z;throw new Error(`\`${Y}\` must be used within \`${I}\``)}return[V,Z]}const O=()=>{const I=R.map(z=>reactExports.createContext(z));return function(F){const G=F?.[_]||I;return reactExports.useMemo(()=>({[`__scope${_}`]:{...F,[_]:G}}),[F,G])}};return O.scopeName=_,[P,composeContextScopes(O,...T)]}function composeContextScopes(..._){const T=_[0];if(_.length===1)return T;const R=()=>{const P=_.map(O=>({useScope:O(),scopeName:O.scopeName}));return function(I){const z=P.reduce((F,{useScope:G,scopeName:V})=>{const Y=G(I)[`__scope${V}`];return{...F,...Y}},{});return reactExports.useMemo(()=>({[`__scope${T.scopeName}`]:z}),[z])}};return R.scopeName=T.scopeName,R}var NODES$1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive$1=NODES$1.reduce((_,T)=>{const R=createSlot$3(`Primitive.${T}`),P=reactExports.forwardRef((O,I)=>{const{asChild:z,...F}=O,G=z?R:T;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(G,{...F,ref:I})});return P.displayName=`Primitive.${T}`,{..._,[T]:P}},{}),PROGRESS_NAME="Progress",DEFAULT_MAX=100,[createProgressContext]=createContextScope(PROGRESS_NAME),[ProgressProvider,useProgressContext]=createProgressContext(PROGRESS_NAME),Progress$1=reactExports.forwardRef((_,T)=>{const{__scopeProgress:R,value:P=null,max:O,getValueLabel:I=defaultGetValueLabel,...z}=_;(O||O===0)&&!isValidMaxNumber(O)&&console.error(getInvalidMaxError(`${O}`,"Progress"));const F=isValidMaxNumber(O)?O:DEFAULT_MAX;P!==null&&!isValidValueNumber(P,F)&&console.error(getInvalidValueError(`${P}`,"Progress"));const G=isValidValueNumber(P,F)?P:null,V=isNumber(G)?I(G,F):void 0;return jsxRuntimeExports.jsx(ProgressProvider,{scope:R,value:G,max:F,children:jsxRuntimeExports.jsx(Primitive$1.div,{"aria-valuemax":F,"aria-valuemin":0,"aria-valuenow":isNumber(G)?G:void 0,"aria-valuetext":V,role:"progressbar","data-state":getProgressState(G,F),"data-value":G??void 0,"data-max":F,...z,ref:T})})});Progress$1.displayName=PROGRESS_NAME;var INDICATOR_NAME="ProgressIndicator",ProgressIndicator=reactExports.forwardRef((_,T)=>{const{__scopeProgress:R,...P}=_,O=useProgressContext(INDICATOR_NAME,R);return jsxRuntimeExports.jsx(Primitive$1.div,{"data-state":getProgressState(O.value,O.max),"data-value":O.value??void 0,"data-max":O.max,...P,ref:T})});ProgressIndicator.displayName=INDICATOR_NAME;function defaultGetValueLabel(_,T){return`${Math.round(_/T*100)}%`}function getProgressState(_,T){return _==null?"indeterminate":_===T?"complete":"loading"}function isNumber(_){return typeof _=="number"}function isValidMaxNumber(_){return isNumber(_)&&!isNaN(_)&&_>0}function isValidValueNumber(_,T){return isNumber(_)&&!isNaN(_)&&_<=T&&_>=0}function getInvalidMaxError(_,T){return`Invalid prop \`max\` of value \`${_}\` supplied to \`${T}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${DEFAULT_MAX}\`.`}function getInvalidValueError(_,T){return`Invalid prop \`value\` of value \`${_}\` supplied to \`${T}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${DEFAULT_MAX} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Root$4=Progress$1,Indicator=ProgressIndicator;const Progress=reactExports.forwardRef(({className:_,value:T,...R},P)=>jsxRuntimeExports.jsx(Root$4,{ref:P,className:cn("relative h-4 w-full overflow-hidden rounded-full bg-secondary",_),...R,children:jsxRuntimeExports.jsx(Indicator,{className:"h-full w-full flex-1 bg-play transition-all",style:{transform:`translateX(-${100-(T||0)}%)`}})}));Progress.displayName=Root$4.displayName;function SimulationControls({isRunning:_,isComplete:T,time:R,endTime:P,onStart:O,onPause:I,onReset:z,onStep:F,paramChangeBehavior:G,onParamChangeBehaviorChange:V,onSaveScreenshot:Z,onSaveMovie:Y,onExportCSV:Q,isRecording:J=!1}){const ee=P>0?R/P*100:0;return jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[_?jsxRuntimeExports.jsxs(Button,{onClick:I,variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(Pause,{className:"h-4 w-4 mr-1"}),"Pause"]}):jsxRuntimeExports.jsxs(Button,{onClick:O,disabled:T,size:"sm",children:[jsxRuntimeExports.jsx(Play,{className:"h-4 w-4 mr-1"}),"Start"]}),jsxRuntimeExports.jsxs(Button,{onClick:F,disabled:_||T,variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(SkipForward,{className:"h-4 w-4 mr-1"}),"Step"]}),jsxRuntimeExports.jsxs(Button,{onClick:z,variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(RotateCcw,{className:"h-4 w-4 mr-1"}),"Reset"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:"On param change:"}),jsxRuntimeExports.jsxs(Select,{value:G,onValueChange:ne=>V(ne),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"h-7 w-28 text-xs",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"run",children:"Run"}),jsxRuntimeExports.jsx(SelectItem,{value:"init",children:"Init"}),jsxRuntimeExports.jsx(SelectItem,{value:"step",children:"One step"})]})]})]}),jsxRuntimeExports.jsxs("span",{className:"ml-auto text-sm text-muted-foreground self-center",children:[R.toFixed(2),"h / ",P,"h"]})]}),jsxRuntimeExports.jsx(Progress,{value:ee,className:"h-2"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap items-center pt-1 border-t border-border/40",children:[Z&&jsxRuntimeExports.jsxs(Button,{onClick:Z,variant:"outline",size:"sm",className:"text-xs",children:[jsxRuntimeExports.jsx(Camera,{className:"h-3.5 w-3.5 mr-1"}),"Screenshot"]}),Y&&jsxRuntimeExports.jsxs(Button,{onClick:Y,variant:J?"destructive":"outline",size:"sm",className:"text-xs",children:[jsxRuntimeExports.jsx(Video,{className:"h-3.5 w-3.5 mr-1"}),J?"Stop Recording":"Record"]}),Q&&jsxRuntimeExports.jsxs(Button,{onClick:Q,variant:"outline",size:"sm",className:"text-xs",children:[jsxRuntimeExports.jsx(FileDown,{className:"h-3.5 w-3.5 mr-1"}),"Export CSV"]})]})]})}const Card=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx("div",{ref:R,className:cn("rounded-lg border bg-card text-card-foreground shadow-sm",_),...T}));Card.displayName="Card";const CardHeader=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx("div",{ref:R,className:cn("flex flex-col space-y-1.5 p-6",_),...T}));CardHeader.displayName="CardHeader";const CardTitle=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx("h3",{ref:R,className:cn("text-2xl font-semibold leading-none tracking-tight",_),...T}));CardTitle.displayName="CardTitle";const CardDescription=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx("p",{ref:R,className:cn("text-sm text-muted-foreground",_),...T}));CardDescription.displayName="CardDescription";const CardContent=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx("div",{ref:R,className:cn("p-6 pt-0",_),...T}));CardContent.displayName="CardContent";const CardFooter=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx("div",{ref:R,className:cn("flex items-center p-6 pt-0",_),...T}));CardFooter.displayName="CardFooter";var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive=NODES.reduce((_,T)=>{const R=createSlot$3(`Primitive.${T}`),P=reactExports.forwardRef((O,I)=>{const{asChild:z,...F}=O,G=z?R:T;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(G,{...F,ref:I})});return P.displayName=`Primitive.${T}`,{..._,[T]:P}},{}),NAME="Separator",DEFAULT_ORIENTATION="horizontal",ORIENTATIONS=["horizontal","vertical"],Separator$1=reactExports.forwardRef((_,T)=>{const{decorative:R,orientation:P=DEFAULT_ORIENTATION,...O}=_,I=isValidOrientation(P)?P:DEFAULT_ORIENTATION,F=R?{role:"none"}:{"aria-orientation":I==="vertical"?I:void 0,role:"separator"};return jsxRuntimeExports.jsx(Primitive.div,{"data-orientation":I,...F,...O,ref:T})});Separator$1.displayName=NAME;function isValidOrientation(_){return ORIENTATIONS.includes(_)}var Root$3=Separator$1;const Separator=reactExports.forwardRef(({className:_,orientation:T="horizontal",decorative:R=!0,...P},O)=>jsxRuntimeExports.jsx(Root$3,{ref:O,decorative:R,orientation:T,className:cn("shrink-0 bg-border",T==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",_),...P}));Separator.displayName=Root$3.displayName;class SimulationEngine{model;state;params;snapshots=[];onSnapshot;snapshotInterval;constructor(T){this.model=T.model,this.params=T.params,this.onSnapshot=T.onSnapshot,this.snapshotInterval=T.snapshotInterval??1,this.init()}init(){this.state=this.model.init(this.params),this.snapshots=[],this.recordSnapshot()}step(){let T=1;const R=this.params;R.general&&typeof R.general.dt=="number"&&(T=R.general.dt),this.state=this.model.step(this.state,T,this.params);const P=this.state;(typeof P.step_count=="number"?P.step_count:this.snapshots.length)%this.snapshotInterval===0&&this.recordSnapshot()}isComplete(){const T=this.params,R=this.state;return T.general&&typeof T.general.t_end=="number"&&typeof R.t=="number"?R.t>=T.general.t_end:!1}getState(){return this.state}getParams(){return this.params}resetWithParams(T){this.params=T,this.init()}recordSnapshot(){const T=this.model.getSnapshot(this.state);this.snapshots.push(T),this.onSnapshot&&this.onSnapshot(T)}getStats(){return this.model.computeStats(this.state,this.params)}}function useSimulation(_){const{model:T,params:R,autoInit:P=!0,paramChangeBehavior:O="init"}=_,[I,z]=reactExports.useState(R),[F,G]=reactExports.useState(null),[V,Z]=reactExports.useState(!1),Y=reactExports.useRef(null),Q=reactExports.useRef(null),J=reactExports.useRef(!0),[,ee]=reactExports.useState({});reactExports.useEffect(()=>(Y.current=new SimulationEngine({model:T,params:R}),P&&(Y.current.init(),G(Y.current.getState())),()=>{Q.current&&cancelAnimationFrame(Q.current)}),[]),reactExports.useEffect(()=>{if(J.current){J.current=!1;return}z(R),Z(!1),Y.current=new SimulationEngine({model:T,params:R}),G(Y.current.getState()),O==="step"?(Y.current.step(),G(Y.current.getState()),ee({})):O==="run"&&Z(!0)},[T,R,O]),reactExports.useEffect(()=>{if(!V||!Y.current)return;let le=performance.now();const pe=40,me=he=>{if(!Y.current||!V)return;if(he-le>=pe){if(le=he,Y.current.isComplete()){Z(!1);return}Y.current.step();const de=Y.current.getState();G(typeof de=="object"&&de!==null?Array.isArray(de)?[...de]:{...de}:de)}Q.current=requestAnimationFrame(me)};return Q.current=requestAnimationFrame(me),()=>{Q.current&&cancelAnimationFrame(Q.current)}},[V]);const ne=reactExports.useCallback(()=>{Z(!0)},[]),se=reactExports.useCallback(()=>{Z(!1)},[]),oe=reactExports.useCallback(()=>{if(Z(!1),Y.current){Y.current.init();const le=Y.current.getState();G(typeof le=="object"&&le!==null?{...le}:le)}},[]),ae=reactExports.useCallback(()=>{if(Y.current&&!Y.current.isComplete()){Y.current.step();const le=Y.current.getState();G(typeof le=="object"&&le!==null?{...le}:le)}},[]),ce=reactExports.useCallback(le=>{if(Z(!1),z(le),Y.current){Y.current.resetWithParams(le);const pe=Y.current.getState();G(typeof pe=="object"&&pe!==null?{...pe}:pe)}},[]);return{state:F,params:I,isRunning:V,isComplete:Y.current?.isComplete()??!1,time:F?.t??0,stepCount:F?.step_count??0,start:ne,pause:se,reset:oe,step:ae,setParams:ce,engine:Y.current}}function formatTime(_){return _.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}function MessageLine({message:_}){const T={info:"text-muted-foreground",warning:"text-amber-600 dark:text-amber-400",error:"text-red-600 dark:text-red-400"}[_.type],R={info:"",warning:"[WARN] ",error:"[ERROR] "}[_.type];return jsxRuntimeExports.jsxs("div",{className:cn("font-mono text-xs leading-relaxed",T),children:[jsxRuntimeExports.jsxs("span",{className:"text-muted-foreground/60",children:["[",formatTime(_.timestamp),"]"]})," ",R,_.text]})}function SimulationTerminal(){const{messages:_}=useMessages(),T=reactExports.useRef(null);return reactExports.useEffect(()=>{T.current&&(T.current.scrollTop=T.current.scrollHeight)},[_]),jsxRuntimeExports.jsx("div",{ref:T,className:cn("h-[5lh] overflow-y-auto","bg-muted/30 rounded-md border","px-2 py-1","font-mono text-xs"),children:_.length===0?jsxRuntimeExports.jsx("div",{className:"text-muted-foreground/50 italic",children:"No messages"}):_.map(R=>jsxRuntimeExports.jsx(MessageLine,{message:R},R.id))})}function SingleSimulationTab(){const{currentModel:_}=useModel();return jsxRuntimeExports.jsx(SingleSimulationTabInner,{},_.name)}function SingleSimulationTabInner(){const[_,T]=reactExports.useState("run"),[R,P]=reactExports.useState(!1),{currentModel:O,currentParams:I}=useModel(),z=reactExports.useRef(null),{state:F,isRunning:G,isComplete:V,time:Z,start:Y,pause:Q,reset:J,step:ee}=useSimulation({model:O,params:I,paramChangeBehavior:_}),ne=reactExports.useCallback(()=>{const ae=z.current?.getScreenshot();if(ae){const ce=document.createElement("a");ce.download=`simulation_${Z.toFixed(2)}h.png`,ce.href=ae,ce.click()}},[Z]),se=reactExports.useCallback(async()=>{if(R){P(!1);const ae=await z.current?.stopRecording();if(ae){const ce=document.createElement("a");ce.download=`simulation_${Z.toFixed(2)}h.webm`,ce.href=URL.createObjectURL(ae),ce.click(),URL.revokeObjectURL(ce.href)}}else z.current?.startRecording(),P(!0)},[R,Z]),oe=reactExports.useCallback(()=>{if(!F)return;const ae=O.getSnapshot(F);if(ae.length===0)return;const ce=Object.keys(ae[0]),pe=[ce.join("	"),...ae.map(fe=>ce.map(de=>fe[de]??"").join("	"))].join(`
`),me=new Blob([pe],{type:"text/tab-separated-values"}),he=document.createElement("a");he.download=`simulation_state_${Z.toFixed(2)}h.tsv`,he.href=URL.createObjectURL(me),he.click(),URL.revokeObjectURL(he.href)},[F,O,Z]);return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(Card,{className:"overflow-hidden",children:jsxRuntimeExports.jsx(SimulationCanvas,{ref:z,state:F,params:I,minHeight:350})}),jsxRuntimeExports.jsx(SimulationControls,{isRunning:G,isComplete:V,time:Z,endTime:I.general.t_end,onStart:Y,onPause:Q,onReset:J,onStep:ee,paramChangeBehavior:_,onParamChangeBehaviorChange:T,onSaveScreenshot:ne,onSaveMovie:se,onExportCSV:oe,isRecording:R}),jsxRuntimeExports.jsx(SimulationTerminal,{})]})}function getNestedValue(_,T){const R=T.split(".");let P=_;for(const O of R){if(P==null||typeof P!="object")return;P=P[O]}return typeof P=="number"?P:void 0}function ParameterRangeList({ranges:_,onChange:T,baseParams:R,disabled:P}){const{currentModel:O}=useModel(),I=React.useMemo(()=>O.generateBatchParameters&&R?O.generateBatchParameters(R):O.batchParameters||[],[O,R]),z=new Set(_.map(Y=>Y.path)),F=I.filter(Y=>!z.has(Y.path)),G=Y=>{const Q=getNestedValue(R,Y)??0;T([..._,{path:Y,min:Q,max:Q,steps:3}])},V=Y=>{T(_.filter((Q,J)=>J!==Y))},Z=(Y,Q,J)=>{const ee=[..._];Q==="path"?ee[Y]={...ee[Y],[Q]:J}:ee[Y]={...ee[Y],[Q]:Number(J)},T(ee)};return jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Parameter Ranges"}),jsxRuntimeExports.jsxs(Select,{onValueChange:G,disabled:P||F.length===0,children:[jsxRuntimeExports.jsxs(SelectTrigger,{className:"w-[200px] h-8",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-1"}),jsxRuntimeExports.jsx(SelectValue,{placeholder:"Add parameter"})]}),jsxRuntimeExports.jsx(SelectContent,{children:F.map(Y=>jsxRuntimeExports.jsx(SelectItem,{value:Y.path,children:Y.label},Y.path))})]})]}),_.length===0?jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"No parameter ranges defined. Add parameters to sweep."}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:_.map((Y,Q)=>{const J=I.find(oe=>oe.path===Y.path),ee=getNestedValue(R,Y.path),se=J?.isInteger??!1?1:.01;return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md bg-muted/50",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium flex-1 truncate",title:Y.path,children:J?.label??Y.path}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs text-muted-foreground",children:"Base:"}),jsxRuntimeExports.jsx("span",{className:"w-16 h-7 text-xs flex items-center justify-center bg-muted rounded border text-muted-foreground",children:ee??""})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs text-muted-foreground",children:"Min:"}),jsxRuntimeExports.jsx(Input,{type:"number",value:Y.min,onChange:oe=>Z(Q,"min",oe.target.value),disabled:P,className:"w-16 h-7 text-xs",step:se})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs text-muted-foreground",children:"Max:"}),jsxRuntimeExports.jsx(Input,{type:"number",value:Y.max,onChange:oe=>Z(Q,"max",oe.target.value),disabled:P,className:"w-16 h-7 text-xs",step:se})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs text-muted-foreground",children:"Steps:"}),jsxRuntimeExports.jsx(Input,{type:"number",value:Y.steps,onChange:oe=>Z(Q,"steps",oe.target.value),disabled:P,className:"w-14 h-7 text-xs",min:1,step:1})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>V(Q),disabled:P,children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})})]},Y.path)})})]})}function TimeSampleConfig({config:_,onChange:T,disabled:R}){const P=(I,z)=>{T({..._,[I]:parseFloat(z)||0})},O=Math.max(0,Math.floor((_.end-_.start)/_.step)+1);return jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Time Samples"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"time-start",className:"text-xs text-muted-foreground",children:"Start (h)"}),jsxRuntimeExports.jsx(Input,{id:"time-start",type:"number",value:_.start,onChange:I=>P("start",I.target.value),disabled:R,className:"h-8",min:0,step:.01})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"time-end",className:"text-xs text-muted-foreground",children:"End (h)"}),jsxRuntimeExports.jsx(Input,{id:"time-end",type:"number",value:_.end,onChange:I=>P("end",I.target.value),disabled:R,className:"h-8",min:0,step:.01})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"time-step",className:"text-xs text-muted-foreground",children:"Step (h)"}),jsxRuntimeExports.jsx(Input,{id:"time-step",type:"number",value:_.step,onChange:I=>P("step",I.target.value),disabled:R,className:"h-8",min:.01,step:.01})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:[O," time point",O!==1?"s":"",": ",_.start,"h",O>1&&`  ${_.end}h`]})]})}function useStateMachine(_,T){return reactExports.useReducer((R,P)=>T[R][P]??R,_)}var SCROLL_AREA_NAME="ScrollArea",[createScrollAreaContext]=createContextScope$1(SCROLL_AREA_NAME),[ScrollAreaProvider,useScrollAreaContext]=createScrollAreaContext(SCROLL_AREA_NAME),ScrollArea$1=reactExports.forwardRef((_,T)=>{const{__scopeScrollArea:R,type:P="hover",dir:O,scrollHideDelay:I=600,...z}=_,[F,G]=reactExports.useState(null),[V,Z]=reactExports.useState(null),[Y,Q]=reactExports.useState(null),[J,ee]=reactExports.useState(null),[ne,se]=reactExports.useState(null),[oe,ae]=reactExports.useState(0),[ce,le]=reactExports.useState(0),[pe,me]=reactExports.useState(!1),[he,fe]=reactExports.useState(!1),de=useComposedRefs(T,ye=>G(ye)),be=useDirection(O);return jsxRuntimeExports.jsx(ScrollAreaProvider,{scope:R,type:P,dir:be,scrollHideDelay:I,scrollArea:F,viewport:V,onViewportChange:Z,content:Y,onContentChange:Q,scrollbarX:J,onScrollbarXChange:ee,scrollbarXEnabled:pe,onScrollbarXEnabledChange:me,scrollbarY:ne,onScrollbarYChange:se,scrollbarYEnabled:he,onScrollbarYEnabledChange:fe,onCornerWidthChange:ae,onCornerHeightChange:le,children:jsxRuntimeExports.jsx(Primitive$2.div,{dir:be,...z,ref:de,style:{position:"relative","--radix-scroll-area-corner-width":oe+"px","--radix-scroll-area-corner-height":ce+"px",..._.style}})})});ScrollArea$1.displayName=SCROLL_AREA_NAME;var VIEWPORT_NAME="ScrollAreaViewport",ScrollAreaViewport=reactExports.forwardRef((_,T)=>{const{__scopeScrollArea:R,children:P,nonce:O,...I}=_,z=useScrollAreaContext(VIEWPORT_NAME,R),F=reactExports.useRef(null),G=useComposedRefs(T,F,z.onViewportChange);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:O}),jsxRuntimeExports.jsx(Primitive$2.div,{"data-radix-scroll-area-viewport":"",...I,ref:G,style:{overflowX:z.scrollbarXEnabled?"scroll":"hidden",overflowY:z.scrollbarYEnabled?"scroll":"hidden",..._.style},children:jsxRuntimeExports.jsx("div",{ref:z.onContentChange,style:{minWidth:"100%",display:"table"},children:P})})]})});ScrollAreaViewport.displayName=VIEWPORT_NAME;var SCROLLBAR_NAME="ScrollAreaScrollbar",ScrollAreaScrollbar=reactExports.forwardRef((_,T)=>{const{forceMount:R,...P}=_,O=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),{onScrollbarXEnabledChange:I,onScrollbarYEnabledChange:z}=O,F=_.orientation==="horizontal";return reactExports.useEffect(()=>(F?I(!0):z(!0),()=>{F?I(!1):z(!1)}),[F,I,z]),O.type==="hover"?jsxRuntimeExports.jsx(ScrollAreaScrollbarHover,{...P,ref:T,forceMount:R}):O.type==="scroll"?jsxRuntimeExports.jsx(ScrollAreaScrollbarScroll,{...P,ref:T,forceMount:R}):O.type==="auto"?jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{...P,ref:T,forceMount:R}):O.type==="always"?jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{...P,ref:T}):null});ScrollAreaScrollbar.displayName=SCROLLBAR_NAME;var ScrollAreaScrollbarHover=reactExports.forwardRef((_,T)=>{const{forceMount:R,...P}=_,O=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),[I,z]=reactExports.useState(!1);return reactExports.useEffect(()=>{const F=O.scrollArea;let G=0;if(F){const V=()=>{window.clearTimeout(G),z(!0)},Z=()=>{G=window.setTimeout(()=>z(!1),O.scrollHideDelay)};return F.addEventListener("pointerenter",V),F.addEventListener("pointerleave",Z),()=>{window.clearTimeout(G),F.removeEventListener("pointerenter",V),F.removeEventListener("pointerleave",Z)}}},[O.scrollArea,O.scrollHideDelay]),jsxRuntimeExports.jsx(Presence,{present:R||I,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{"data-state":I?"visible":"hidden",...P,ref:T})})}),ScrollAreaScrollbarScroll=reactExports.forwardRef((_,T)=>{const{forceMount:R,...P}=_,O=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),I=_.orientation==="horizontal",z=useDebounceCallback(()=>G("SCROLL_END"),100),[F,G]=useStateMachine("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return reactExports.useEffect(()=>{if(F==="idle"){const V=window.setTimeout(()=>G("HIDE"),O.scrollHideDelay);return()=>window.clearTimeout(V)}},[F,O.scrollHideDelay,G]),reactExports.useEffect(()=>{const V=O.viewport,Z=I?"scrollLeft":"scrollTop";if(V){let Y=V[Z];const Q=()=>{const J=V[Z];Y!==J&&(G("SCROLL"),z()),Y=J};return V.addEventListener("scroll",Q),()=>V.removeEventListener("scroll",Q)}},[O.viewport,I,G,z]),jsxRuntimeExports.jsx(Presence,{present:R||F!=="hidden",children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":F==="hidden"?"hidden":"visible",...P,ref:T,onPointerEnter:composeEventHandlers(_.onPointerEnter,()=>G("POINTER_ENTER")),onPointerLeave:composeEventHandlers(_.onPointerLeave,()=>G("POINTER_LEAVE"))})})}),ScrollAreaScrollbarAuto=reactExports.forwardRef((_,T)=>{const R=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),{forceMount:P,...O}=_,[I,z]=reactExports.useState(!1),F=_.orientation==="horizontal",G=useDebounceCallback(()=>{if(R.viewport){const V=R.viewport.offsetWidth<R.viewport.scrollWidth,Z=R.viewport.offsetHeight<R.viewport.scrollHeight;z(F?V:Z)}},10);return useResizeObserver(R.viewport,G),useResizeObserver(R.content,G),jsxRuntimeExports.jsx(Presence,{present:P||I,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":I?"visible":"hidden",...O,ref:T})})}),ScrollAreaScrollbarVisible=reactExports.forwardRef((_,T)=>{const{orientation:R="vertical",...P}=_,O=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),I=reactExports.useRef(null),z=reactExports.useRef(0),[F,G]=reactExports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),V=getThumbRatio(F.viewport,F.content),Z={...P,sizes:F,onSizesChange:G,hasThumb:V>0&&V<1,onThumbChange:Q=>I.current=Q,onThumbPointerUp:()=>z.current=0,onThumbPointerDown:Q=>z.current=Q};function Y(Q,J){return getScrollPositionFromPointer(Q,z.current,F,J)}return R==="horizontal"?jsxRuntimeExports.jsx(ScrollAreaScrollbarX,{...Z,ref:T,onThumbPositionChange:()=>{if(O.viewport&&I.current){const Q=O.viewport.scrollLeft,J=getThumbOffsetFromScroll(Q,F,O.dir);I.current.style.transform=`translate3d(${J}px, 0, 0)`}},onWheelScroll:Q=>{O.viewport&&(O.viewport.scrollLeft=Q)},onDragScroll:Q=>{O.viewport&&(O.viewport.scrollLeft=Y(Q,O.dir))}}):R==="vertical"?jsxRuntimeExports.jsx(ScrollAreaScrollbarY,{...Z,ref:T,onThumbPositionChange:()=>{if(O.viewport&&I.current){const Q=O.viewport.scrollTop,J=getThumbOffsetFromScroll(Q,F);I.current.style.transform=`translate3d(0, ${J}px, 0)`}},onWheelScroll:Q=>{O.viewport&&(O.viewport.scrollTop=Q)},onDragScroll:Q=>{O.viewport&&(O.viewport.scrollTop=Y(Q))}}):null}),ScrollAreaScrollbarX=reactExports.forwardRef((_,T)=>{const{sizes:R,onSizesChange:P,...O}=_,I=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),[z,F]=reactExports.useState(),G=reactExports.useRef(null),V=useComposedRefs(T,G,I.onScrollbarXChange);return reactExports.useEffect(()=>{G.current&&F(getComputedStyle(G.current))},[G]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"horizontal",...O,ref:V,sizes:R,style:{bottom:0,left:I.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:I.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":getThumbSize(R)+"px",..._.style},onThumbPointerDown:Z=>_.onThumbPointerDown(Z.x),onDragScroll:Z=>_.onDragScroll(Z.x),onWheelScroll:(Z,Y)=>{if(I.viewport){const Q=I.viewport.scrollLeft+Z.deltaX;_.onWheelScroll(Q),isScrollingWithinScrollbarBounds(Q,Y)&&Z.preventDefault()}},onResize:()=>{G.current&&I.viewport&&z&&P({content:I.viewport.scrollWidth,viewport:I.viewport.offsetWidth,scrollbar:{size:G.current.clientWidth,paddingStart:toInt(z.paddingLeft),paddingEnd:toInt(z.paddingRight)}})}})}),ScrollAreaScrollbarY=reactExports.forwardRef((_,T)=>{const{sizes:R,onSizesChange:P,...O}=_,I=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),[z,F]=reactExports.useState(),G=reactExports.useRef(null),V=useComposedRefs(T,G,I.onScrollbarYChange);return reactExports.useEffect(()=>{G.current&&F(getComputedStyle(G.current))},[G]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"vertical",...O,ref:V,sizes:R,style:{top:0,right:I.dir==="ltr"?0:void 0,left:I.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":getThumbSize(R)+"px",..._.style},onThumbPointerDown:Z=>_.onThumbPointerDown(Z.y),onDragScroll:Z=>_.onDragScroll(Z.y),onWheelScroll:(Z,Y)=>{if(I.viewport){const Q=I.viewport.scrollTop+Z.deltaY;_.onWheelScroll(Q),isScrollingWithinScrollbarBounds(Q,Y)&&Z.preventDefault()}},onResize:()=>{G.current&&I.viewport&&z&&P({content:I.viewport.scrollHeight,viewport:I.viewport.offsetHeight,scrollbar:{size:G.current.clientHeight,paddingStart:toInt(z.paddingTop),paddingEnd:toInt(z.paddingBottom)}})}})}),[ScrollbarProvider,useScrollbarContext]=createScrollAreaContext(SCROLLBAR_NAME),ScrollAreaScrollbarImpl=reactExports.forwardRef((_,T)=>{const{__scopeScrollArea:R,sizes:P,hasThumb:O,onThumbChange:I,onThumbPointerUp:z,onThumbPointerDown:F,onThumbPositionChange:G,onDragScroll:V,onWheelScroll:Z,onResize:Y,...Q}=_,J=useScrollAreaContext(SCROLLBAR_NAME,R),[ee,ne]=reactExports.useState(null),se=useComposedRefs(T,de=>ne(de)),oe=reactExports.useRef(null),ae=reactExports.useRef(""),ce=J.viewport,le=P.content-P.viewport,pe=useCallbackRef$1(Z),me=useCallbackRef$1(G),he=useDebounceCallback(Y,10);function fe(de){if(oe.current){const be=de.clientX-oe.current.left,ye=de.clientY-oe.current.top;V({x:be,y:ye})}}return reactExports.useEffect(()=>{const de=be=>{const ye=be.target;ee?.contains(ye)&&pe(be,le)};return document.addEventListener("wheel",de,{passive:!1}),()=>document.removeEventListener("wheel",de,{passive:!1})},[ce,ee,le,pe]),reactExports.useEffect(me,[P,me]),useResizeObserver(ee,he),useResizeObserver(J.content,he),jsxRuntimeExports.jsx(ScrollbarProvider,{scope:R,scrollbar:ee,hasThumb:O,onThumbChange:useCallbackRef$1(I),onThumbPointerUp:useCallbackRef$1(z),onThumbPositionChange:me,onThumbPointerDown:useCallbackRef$1(F),children:jsxRuntimeExports.jsx(Primitive$2.div,{...Q,ref:se,style:{position:"absolute",...Q.style},onPointerDown:composeEventHandlers(_.onPointerDown,de=>{de.button===0&&(de.target.setPointerCapture(de.pointerId),oe.current=ee.getBoundingClientRect(),ae.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",J.viewport&&(J.viewport.style.scrollBehavior="auto"),fe(de))}),onPointerMove:composeEventHandlers(_.onPointerMove,fe),onPointerUp:composeEventHandlers(_.onPointerUp,de=>{const be=de.target;be.hasPointerCapture(de.pointerId)&&be.releasePointerCapture(de.pointerId),document.body.style.webkitUserSelect=ae.current,J.viewport&&(J.viewport.style.scrollBehavior=""),oe.current=null})})})}),THUMB_NAME="ScrollAreaThumb",ScrollAreaThumb=reactExports.forwardRef((_,T)=>{const{forceMount:R,...P}=_,O=useScrollbarContext(THUMB_NAME,_.__scopeScrollArea);return jsxRuntimeExports.jsx(Presence,{present:R||O.hasThumb,children:jsxRuntimeExports.jsx(ScrollAreaThumbImpl,{ref:T,...P})})}),ScrollAreaThumbImpl=reactExports.forwardRef((_,T)=>{const{__scopeScrollArea:R,style:P,...O}=_,I=useScrollAreaContext(THUMB_NAME,R),z=useScrollbarContext(THUMB_NAME,R),{onThumbPositionChange:F}=z,G=useComposedRefs(T,Y=>z.onThumbChange(Y)),V=reactExports.useRef(void 0),Z=useDebounceCallback(()=>{V.current&&(V.current(),V.current=void 0)},100);return reactExports.useEffect(()=>{const Y=I.viewport;if(Y){const Q=()=>{if(Z(),!V.current){const J=addUnlinkedScrollListener(Y,F);V.current=J,F()}};return F(),Y.addEventListener("scroll",Q),()=>Y.removeEventListener("scroll",Q)}},[I.viewport,Z,F]),jsxRuntimeExports.jsx(Primitive$2.div,{"data-state":z.hasThumb?"visible":"hidden",...O,ref:G,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...P},onPointerDownCapture:composeEventHandlers(_.onPointerDownCapture,Y=>{const J=Y.target.getBoundingClientRect(),ee=Y.clientX-J.left,ne=Y.clientY-J.top;z.onThumbPointerDown({x:ee,y:ne})}),onPointerUp:composeEventHandlers(_.onPointerUp,z.onThumbPointerUp)})});ScrollAreaThumb.displayName=THUMB_NAME;var CORNER_NAME="ScrollAreaCorner",ScrollAreaCorner=reactExports.forwardRef((_,T)=>{const R=useScrollAreaContext(CORNER_NAME,_.__scopeScrollArea),P=!!(R.scrollbarX&&R.scrollbarY);return R.type!=="scroll"&&P?jsxRuntimeExports.jsx(ScrollAreaCornerImpl,{..._,ref:T}):null});ScrollAreaCorner.displayName=CORNER_NAME;var ScrollAreaCornerImpl=reactExports.forwardRef((_,T)=>{const{__scopeScrollArea:R,...P}=_,O=useScrollAreaContext(CORNER_NAME,R),[I,z]=reactExports.useState(0),[F,G]=reactExports.useState(0),V=!!(I&&F);return useResizeObserver(O.scrollbarX,()=>{const Z=O.scrollbarX?.offsetHeight||0;O.onCornerHeightChange(Z),G(Z)}),useResizeObserver(O.scrollbarY,()=>{const Z=O.scrollbarY?.offsetWidth||0;O.onCornerWidthChange(Z),z(Z)}),V?jsxRuntimeExports.jsx(Primitive$2.div,{...P,ref:T,style:{width:I,height:F,position:"absolute",right:O.dir==="ltr"?0:void 0,left:O.dir==="rtl"?0:void 0,bottom:0,..._.style}}):null});function toInt(_){return _?parseInt(_,10):0}function getThumbRatio(_,T){const R=_/T;return isNaN(R)?0:R}function getThumbSize(_){const T=getThumbRatio(_.viewport,_.content),R=_.scrollbar.paddingStart+_.scrollbar.paddingEnd,P=(_.scrollbar.size-R)*T;return Math.max(P,18)}function getScrollPositionFromPointer(_,T,R,P="ltr"){const O=getThumbSize(R),I=O/2,z=T||I,F=O-z,G=R.scrollbar.paddingStart+z,V=R.scrollbar.size-R.scrollbar.paddingEnd-F,Z=R.content-R.viewport,Y=P==="ltr"?[0,Z]:[Z*-1,0];return linearScale([G,V],Y)(_)}function getThumbOffsetFromScroll(_,T,R="ltr"){const P=getThumbSize(T),O=T.scrollbar.paddingStart+T.scrollbar.paddingEnd,I=T.scrollbar.size-O,z=T.content-T.viewport,F=I-P,G=R==="ltr"?[0,z]:[z*-1,0],V=clamp$1(_,G);return linearScale([0,z],[0,F])(V)}function linearScale(_,T){return R=>{if(_[0]===_[1]||T[0]===T[1])return T[0];const P=(T[1]-T[0])/(_[1]-_[0]);return T[0]+P*(R-_[0])}}function isScrollingWithinScrollbarBounds(_,T){return _>0&&_<T}var addUnlinkedScrollListener=(_,T=()=>{})=>{let R={left:_.scrollLeft,top:_.scrollTop},P=0;return(function O(){const I={left:_.scrollLeft,top:_.scrollTop},z=R.left!==I.left,F=R.top!==I.top;(z||F)&&T(),R=I,P=window.requestAnimationFrame(O)})(),()=>window.cancelAnimationFrame(P)};function useDebounceCallback(_,T){const R=useCallbackRef$1(_),P=reactExports.useRef(0);return reactExports.useEffect(()=>()=>window.clearTimeout(P.current),[]),reactExports.useCallback(()=>{window.clearTimeout(P.current),P.current=window.setTimeout(R,T)},[R,T])}function useResizeObserver(_,T){const R=useCallbackRef$1(T);useLayoutEffect2(()=>{let P=0;if(_){const O=new ResizeObserver(()=>{cancelAnimationFrame(P),P=window.requestAnimationFrame(R)});return O.observe(_),()=>{window.cancelAnimationFrame(P),O.unobserve(_)}}},[_,R])}var Root$2=ScrollArea$1,Viewport=ScrollAreaViewport,Corner=ScrollAreaCorner;const ScrollArea=reactExports.forwardRef(({className:_,children:T,...R},P)=>jsxRuntimeExports.jsxs(Root$2,{ref:P,className:cn("relative overflow-hidden",_),...R,children:[jsxRuntimeExports.jsx(Viewport,{className:"h-full w-full rounded-[inherit]",children:T}),jsxRuntimeExports.jsx(ScrollBar,{}),jsxRuntimeExports.jsx(Corner,{})]}));ScrollArea.displayName=Root$2.displayName;const ScrollBar=reactExports.forwardRef(({className:_,orientation:T="vertical",...R},P)=>jsxRuntimeExports.jsx(ScrollAreaScrollbar,{ref:P,orientation:T,className:cn("flex touch-none select-none transition-colors",T==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",T==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",_),...R,children:jsxRuntimeExports.jsx(ScrollAreaThumb,{className:"relative flex-1 rounded-full bg-border"})}));ScrollBar.displayName=ScrollAreaScrollbar.displayName;function ResultsTable({columns:_,rows:T}){return _.length===0||T.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No results to display. Run batch or compute statistics."}):jsxRuntimeExports.jsx(ScrollArea,{className:"h-[300px] border rounded-md",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-sm",children:[jsxRuntimeExports.jsx("thead",{className:"sticky top-0 bg-muted",children:jsxRuntimeExports.jsx("tr",{children:_.map((R,P)=>jsxRuntimeExports.jsx("th",{className:"text-left px-3 py-2 font-medium border-b whitespace-nowrap",children:R},P))})}),jsxRuntimeExports.jsx("tbody",{children:T.map((R,P)=>jsxRuntimeExports.jsx("tr",{className:"border-b last:border-0 hover:bg-muted/50",children:R.map((O,I)=>jsxRuntimeExports.jsx("td",{className:"px-3 py-1.5 whitespace-nowrap font-mono text-xs",children:typeof O=="number"?O.toFixed(4):O},I))},P))})]})})}function ascending$1(_,T){return _==null||T==null?NaN:_<T?-1:_>T?1:_>=T?0:NaN}function descending(_,T){return _==null||T==null?NaN:T<_?-1:T>_?1:T>=_?0:NaN}function bisector(_){let T,R,P;_.length!==2?(T=ascending$1,R=(F,G)=>ascending$1(_(F),G),P=(F,G)=>_(F)-G):(T=_===ascending$1||_===descending?_:zero$1,R=_,P=_);function O(F,G,V=0,Z=F.length){if(V<Z){if(T(G,G)!==0)return Z;do{const Y=V+Z>>>1;R(F[Y],G)<0?V=Y+1:Z=Y}while(V<Z)}return V}function I(F,G,V=0,Z=F.length){if(V<Z){if(T(G,G)!==0)return Z;do{const Y=V+Z>>>1;R(F[Y],G)<=0?V=Y+1:Z=Y}while(V<Z)}return V}function z(F,G,V=0,Z=F.length){const Y=O(F,G,V,Z-1);return Y>V&&P(F[Y-1],G)>-P(F[Y],G)?Y-1:Y}return{left:O,center:z,right:I}}function zero$1(){return 0}function number$4(_){return _===null?NaN:+_}function*numbers(_,T){if(T===void 0)for(let R of _)R!=null&&(R=+R)>=R&&(yield R);else{let R=-1;for(let P of _)(P=T(P,++R,_))!=null&&(P=+P)>=P&&(yield P)}}const ascendingBisect=bisector(ascending$1),bisectRight=ascendingBisect.right;bisector(number$4).center;function count(_,T){let R=0;for(let P of _)P!=null&&(P=+P)>=P&&++R;return R}function length$1(_){return _.length|0}function empty$1(_){return!(_>0)}function arrayify$1(_){return typeof _!="object"||"length"in _?_:Array.from(_)}function reducer(_){return T=>_(...T)}function cross(..._){const T=typeof _[_.length-1]=="function"&&reducer(_.pop());_=_.map(arrayify$1);const R=_.map(length$1),P=_.length-1,O=new Array(P+1).fill(0),I=[];if(P<0||R.some(empty$1))return I;for(;;){I.push(O.map((F,G)=>_[G][F]));let z=P;for(;++O[z]===R[z];){if(z===0)return T?I.map(T):I;O[z--]=0}}}function cumsum(_,T){var R=0;return Float64Array.from(_,P=>R+=+P||0)}function variance(_,T){let R=0,P,O=0,I=0;if(T===void 0)for(let z of _)z!=null&&(z=+z)>=z&&(P=z-O,O+=P/++R,I+=P*(z-O));else{let z=-1;for(let F of _)(F=T(F,++z,_))!=null&&(F=+F)>=F&&(P=F-O,O+=P/++R,I+=P*(F-O))}if(R>1)return I/(R-1)}function deviation(_,T){const R=variance(_,T);return R&&Math.sqrt(R)}function extent$1(_,T){let R,P;if(T===void 0)for(const O of _)O!=null&&(R===void 0?O>=O&&(R=P=O):(R>O&&(R=O),P<O&&(P=O)));else{let O=-1;for(let I of _)(I=T(I,++O,_))!=null&&(R===void 0?I>=I&&(R=P=I):(R>I&&(R=I),P<I&&(P=I)))}return[R,P]}class Adder{constructor(){this._partials=new Float64Array(32),this._n=0}add(T){const R=this._partials;let P=0;for(let O=0;O<this._n&&O<32;O++){const I=R[O],z=T+I,F=Math.abs(T)<Math.abs(I)?T-(z-I):I-(z-T);F&&(R[P++]=F),T=z}return R[P]=T,this._n=P+1,this}valueOf(){const T=this._partials;let R=this._n,P,O,I,z=0;if(R>0){for(z=T[--R];R>0&&(P=z,O=T[--R],z=P+O,I=O-(z-P),!I););R>0&&(I<0&&T[R-1]<0||I>0&&T[R-1]>0)&&(O=I*2,P=z+O,O==P-z&&(z=P))}return z}}class InternMap extends Map{constructor(T,R=keyof$1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:R}}),T!=null)for(const[P,O]of T)this.set(P,O)}get(T){return super.get(intern_get(this,T))}has(T){return super.has(intern_get(this,T))}set(T,R){return super.set(intern_set(this,T),R)}delete(T){return super.delete(intern_delete(this,T))}}class InternSet extends Set{constructor(T,R=keyof$1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:R}}),T!=null)for(const P of T)this.add(P)}has(T){return super.has(intern_get(this,T))}add(T){return super.add(intern_set(this,T))}delete(T){return super.delete(intern_delete(this,T))}}function intern_get({_intern:_,_key:T},R){const P=T(R);return _.has(P)?_.get(P):R}function intern_set({_intern:_,_key:T},R){const P=T(R);return _.has(P)?_.get(P):(_.set(P,R),R)}function intern_delete({_intern:_,_key:T},R){const P=T(R);return _.has(P)&&(R=_.get(P),_.delete(P)),R}function keyof$1(_){return _!==null&&typeof _=="object"?_.valueOf():_}function identity$8(_){return _}function group(_,...T){return nest(_,identity$8,identity$8,T)}function rollup(_,T,...R){return nest(_,identity$8,T,R)}function rollups(_,T,...R){return nest(_,Array.from,T,R)}function nest(_,T,R,P){return(function O(I,z){if(z>=P.length)return R(I);const F=new InternMap,G=P[z++];let V=-1;for(const Z of I){const Y=G(Z,++V,I),Q=F.get(Y);Q?Q.push(Z):F.set(Y,[Z])}for(const[Z,Y]of F)F.set(Z,O(Y,z));return T(F)})(_,0)}function permute(_,T){return Array.from(T,R=>_[R])}function sort$1(_,...T){if(typeof _[Symbol.iterator]!="function")throw new TypeError("values is not iterable");_=Array.from(_);let[R]=T;if(R&&R.length!==2||T.length>1){const P=Uint32Array.from(_,(O,I)=>I);return T.length>1?(T=T.map(O=>_.map(O)),P.sort((O,I)=>{for(const z of T){const F=ascendingDefined$1(z[O],z[I]);if(F)return F}})):(R=_.map(R),P.sort((O,I)=>ascendingDefined$1(R[O],R[I]))),permute(_,P)}return _.sort(compareDefined(R))}function compareDefined(_=ascending$1){if(_===ascending$1)return ascendingDefined$1;if(typeof _!="function")throw new TypeError("compare is not a function");return(T,R)=>{const P=_(T,R);return P||P===0?P:(_(R,R)===0)-(_(T,T)===0)}}function ascendingDefined$1(_,T){return(_==null||!(_>=_))-(T==null||!(T>=T))||(_<T?-1:_>T?1:0)}function groupSort(_,T,R){return(T.length!==2?sort$1(rollup(_,T,R),(([P,O],[I,z])=>ascending$1(O,z)||ascending$1(P,I))):sort$1(group(_,R),(([P,O],[I,z])=>T(O,z)||ascending$1(P,I)))).map(([P])=>P)}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(_,T,R){const P=(T-_)/Math.max(0,R),O=Math.floor(Math.log10(P)),I=P/Math.pow(10,O),z=I>=e10?10:I>=e5?5:I>=e2?2:1;let F,G,V;return O<0?(V=Math.pow(10,-O)/z,F=Math.round(_*V),G=Math.round(T*V),F/V<_&&++F,G/V>T&&--G,V=-V):(V=Math.pow(10,O)*z,F=Math.round(_/V),G=Math.round(T/V),F*V<_&&++F,G*V>T&&--G),G<F&&.5<=R&&R<2?tickSpec(_,T,R*2):[F,G,V]}function ticks(_,T,R){if(T=+T,_=+_,R=+R,!(R>0))return[];if(_===T)return[_];const P=T<_,[O,I,z]=P?tickSpec(T,_,R):tickSpec(_,T,R);if(!(I>=O))return[];const F=I-O+1,G=new Array(F);if(P)if(z<0)for(let V=0;V<F;++V)G[V]=(I-V)/-z;else for(let V=0;V<F;++V)G[V]=(I-V)*z;else if(z<0)for(let V=0;V<F;++V)G[V]=(O+V)/-z;else for(let V=0;V<F;++V)G[V]=(O+V)*z;return G}function tickIncrement(_,T,R){return T=+T,_=+_,R=+R,tickSpec(_,T,R)[2]}function tickStep(_,T,R){T=+T,_=+_,R=+R;const P=T<_,O=P?tickIncrement(T,_,R):tickIncrement(_,T,R);return(P?-1:1)*(O<0?1/-O:O)}function thresholdSturges(_){return Math.max(1,Math.ceil(Math.log(count(_))/Math.LN2)+1)}function max(_,T){let R;if(T===void 0)for(const P of _)P!=null&&(R<P||R===void 0&&P>=P)&&(R=P);else{let P=-1;for(let O of _)(O=T(O,++P,_))!=null&&(R<O||R===void 0&&O>=O)&&(R=O)}return R}function maxIndex(_,T){let R,P=-1,O=-1;if(T===void 0)for(const I of _)++O,I!=null&&(R<I||R===void 0&&I>=I)&&(R=I,P=O);else for(let I of _)(I=T(I,++O,_))!=null&&(R<I||R===void 0&&I>=I)&&(R=I,P=O);return P}function min$1(_,T){let R;if(T===void 0)for(const P of _)P!=null&&(R>P||R===void 0&&P>=P)&&(R=P);else{let P=-1;for(let O of _)(O=T(O,++P,_))!=null&&(R>O||R===void 0&&O>=O)&&(R=O)}return R}function minIndex(_,T){let R,P=-1,O=-1;if(T===void 0)for(const I of _)++O,I!=null&&(R>I||R===void 0&&I>=I)&&(R=I,P=O);else for(let I of _)(I=T(I,++O,_))!=null&&(R>I||R===void 0&&I>=I)&&(R=I,P=O);return P}function quickselect(_,T,R=0,P=1/0,O){if(T=Math.floor(T),R=Math.floor(Math.max(0,R)),P=Math.floor(Math.min(_.length-1,P)),!(R<=T&&T<=P))return _;for(O=O===void 0?ascendingDefined$1:compareDefined(O);P>R;){if(P-R>600){const G=P-R+1,V=T-R+1,Z=Math.log(G),Y=.5*Math.exp(2*Z/3),Q=.5*Math.sqrt(Z*Y*(G-Y)/G)*(V-G/2<0?-1:1),J=Math.max(R,Math.floor(T-V*Y/G+Q)),ee=Math.min(P,Math.floor(T+(G-V)*Y/G+Q));quickselect(_,T,J,ee,O)}const I=_[T];let z=R,F=P;for(swap(_,R,T),O(_[P],I)>0&&swap(_,R,P);z<F;){for(swap(_,z,F),++z,--F;O(_[z],I)<0;)++z;for(;O(_[F],I)>0;)--F}O(_[R],I)===0?swap(_,R,F):(++F,swap(_,F,P)),F<=T&&(R=F+1),T<=F&&(P=F-1)}return _}function swap(_,T,R){const P=_[T];_[T]=_[R],_[R]=P}function greatest(_,T=ascending$1){let R,P=!1;if(T.length===1){let O;for(const I of _){const z=T(I);(P?ascending$1(z,O)>0:ascending$1(z,z)===0)&&(R=I,O=z,P=!0)}}else for(const O of _)(P?T(O,R)>0:T(O,O)===0)&&(R=O,P=!0);return R}function quantile$1(_,T,R){if(_=Float64Array.from(numbers(_,R)),!(!(P=_.length)||isNaN(T=+T))){if(T<=0||P<2)return min$1(_);if(T>=1)return max(_);var P,O=(P-1)*T,I=Math.floor(O),z=max(quickselect(_,I).subarray(0,I+1)),F=min$1(_.subarray(I+1));return z+(F-z)*(O-I)}}function quantileSorted(_,T,R=number$4){if(!(!(P=_.length)||isNaN(T=+T))){if(T<=0||P<2)return+R(_[0],0,_);if(T>=1)return+R(_[P-1],P-1,_);var P,O=(P-1)*T,I=Math.floor(O),z=+R(_[I],I,_),F=+R(_[I+1],I+1,_);return z+(F-z)*(O-I)}}function thresholdFreedmanDiaconis(_,T,R){const P=count(_),O=quantile$1(_,.75)-quantile$1(_,.25);return P&&O?Math.ceil((R-T)/(2*O*Math.pow(P,-1/3))):1}function thresholdScott(_,T,R){const P=count(_),O=deviation(_);return P&&O?Math.ceil((R-T)*Math.cbrt(P)/(3.49*O)):1}function mean(_,T){let R=0,P=0;if(T===void 0)for(let O of _)O!=null&&(O=+O)>=O&&(++R,P+=O);else{let O=-1;for(let I of _)(I=T(I,++O,_))!=null&&(I=+I)>=I&&(++R,P+=I)}if(R)return P/R}function median(_,T){return quantile$1(_,.5,T)}function*flatten(_){for(const T of _)yield*T}function merge(_){return Array.from(flatten(_))}function mode(_,T){const R=new InternMap;if(T===void 0)for(let I of _)I!=null&&I>=I&&R.set(I,(R.get(I)||0)+1);else{let I=-1;for(let z of _)(z=T(z,++I,_))!=null&&z>=z&&R.set(z,(R.get(z)||0)+1)}let P,O=0;for(const[I,z]of R)z>O&&(O=z,P=I);return P}function pairs(_,T=pair){const R=[];let P,O=!1;for(const I of _)O&&R.push(T(P,I)),P=I,O=!0;return R}function pair(_,T){return[_,T]}function range$1(_,T,R){_=+_,T=+T,R=(O=arguments.length)<2?(T=_,_=0,1):O<3?1:+R;for(var P=-1,O=Math.max(0,Math.ceil((T-_)/R))|0,I=new Array(O);++P<O;)I[P]=_+P*R;return I}function sum(_,T){let R=0;if(T===void 0)for(let P of _)(P=+P)&&(R+=P);else{let P=-1;for(let O of _)(O=+T(O,++P,_))&&(R+=O)}return R}function reverse(_){if(typeof _[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(_).reverse()}function identity$7(_){return _}var bottom=3,epsilon$3=1e-6;function translateX(_){return"translate("+_+",0)"}function number$3(_){return T=>+_(T)}function center(_,T){return T=Math.max(0,_.bandwidth()-T*2)/2,_.round()&&(T=Math.round(T)),R=>+_(R)+T}function entering(){return!this.__axis}function axis(_,T){var R=[],P=null,O=null,I=6,z=6,F=3,G=typeof window<"u"&&window.devicePixelRatio>1?0:.5,V=1,Z="y",Y=translateX;function Q(J){var ee=P??(T.ticks?T.ticks.apply(T,R):T.domain()),ne=O??(T.tickFormat?T.tickFormat.apply(T,R):identity$7),se=Math.max(I,0)+F,oe=T.range(),ae=+oe[0]+G,ce=+oe[oe.length-1]+G,le=(T.bandwidth?center:number$3)(T.copy(),G),pe=J.selection?J.selection():J,me=pe.selectAll(".domain").data([null]),he=pe.selectAll(".tick").data(ee,T).order(),fe=he.exit(),de=he.enter().append("g").attr("class","tick"),be=he.select("line"),ye=he.select("text");me=me.merge(me.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),he=he.merge(de),be=be.merge(de.append("line").attr("stroke","currentColor").attr(Z+"2",V*I)),ye=ye.merge(de.append("text").attr("fill","currentColor").attr(Z,V*se).attr("dy","0.71em")),J!==pe&&(me=me.transition(J),he=he.transition(J),be=be.transition(J),ye=ye.transition(J),fe=fe.transition(J).attr("opacity",epsilon$3).attr("transform",function(Ce){return isFinite(Ce=le(Ce))?Y(Ce+G):this.getAttribute("transform")}),de.attr("opacity",epsilon$3).attr("transform",function(Ce){var ve=this.parentNode.__axis;return Y((ve&&isFinite(ve=ve(Ce))?ve:le(Ce))+G)})),fe.remove(),me.attr("d",z?"M"+ae+","+V*z+"V"+G+"H"+ce+"V"+V*z:"M"+ae+","+G+"H"+ce),he.attr("opacity",1).attr("transform",function(Ce){return Y(le(Ce)+G)}),be.attr(Z+"2",V*I),ye.attr(Z,V*se).text(ne),pe.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),pe.each(function(){this.__axis=le})}return Q.scale=function(J){return arguments.length?(T=J,Q):T},Q.ticks=function(){return R=Array.from(arguments),Q},Q.tickArguments=function(J){return arguments.length?(R=J==null?[]:Array.from(J),Q):R.slice()},Q.tickValues=function(J){return arguments.length?(P=J==null?null:Array.from(J),Q):P&&P.slice()},Q.tickFormat=function(J){return arguments.length?(O=J,Q):O},Q.tickSize=function(J){return arguments.length?(I=z=+J,Q):I},Q.tickSizeInner=function(J){return arguments.length?(I=+J,Q):I},Q.tickSizeOuter=function(J){return arguments.length?(z=+J,Q):z},Q.tickPadding=function(J){return arguments.length?(F=+J,Q):F},Q.offset=function(J){return arguments.length?(G=+J,Q):G},Q}function axisBottom(_){return axis(bottom,_)}var noop$2={value:()=>{}};function dispatch(){for(var _=0,T=arguments.length,R={},P;_<T;++_){if(!(P=arguments[_]+"")||P in R||/[\s.]/.test(P))throw new Error("illegal type: "+P);R[P]=[]}return new Dispatch(R)}function Dispatch(_){this._=_}function parseTypenames$1(_,T){return _.trim().split(/^|\s+/).map(function(R){var P="",O=R.indexOf(".");if(O>=0&&(P=R.slice(O+1),R=R.slice(0,O)),R&&!T.hasOwnProperty(R))throw new Error("unknown type: "+R);return{type:R,name:P}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(_,T){var R=this._,P=parseTypenames$1(_+"",R),O,I=-1,z=P.length;if(arguments.length<2){for(;++I<z;)if((O=(_=P[I]).type)&&(O=get$1(R[O],_.name)))return O;return}if(T!=null&&typeof T!="function")throw new Error("invalid callback: "+T);for(;++I<z;)if(O=(_=P[I]).type)R[O]=set$1(R[O],_.name,T);else if(T==null)for(O in R)R[O]=set$1(R[O],_.name,null);return this},copy:function(){var _={},T=this._;for(var R in T)_[R]=T[R].slice();return new Dispatch(_)},call:function(_,T){if((O=arguments.length-2)>0)for(var R=new Array(O),P=0,O,I;P<O;++P)R[P]=arguments[P+2];if(!this._.hasOwnProperty(_))throw new Error("unknown type: "+_);for(I=this._[_],P=0,O=I.length;P<O;++P)I[P].value.apply(T,R)},apply:function(_,T,R){if(!this._.hasOwnProperty(_))throw new Error("unknown type: "+_);for(var P=this._[_],O=0,I=P.length;O<I;++O)P[O].value.apply(T,R)}};function get$1(_,T){for(var R=0,P=_.length,O;R<P;++R)if((O=_[R]).name===T)return O.value}function set$1(_,T,R){for(var P=0,O=_.length;P<O;++P)if(_[P].name===T){_[P]=noop$2,_=_.slice(0,P).concat(_.slice(P+1));break}return R!=null&&_.push({name:T,value:R}),_}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(_){var T=_+="",R=T.indexOf(":");return R>=0&&(T=_.slice(0,R))!=="xmlns"&&(_=_.slice(R+1)),namespaces.hasOwnProperty(T)?{space:namespaces[T],local:_}:_}function creatorInherit(_){return function(){var T=this.ownerDocument,R=this.namespaceURI;return R===xhtml&&T.documentElement.namespaceURI===xhtml?T.createElement(_):T.createElementNS(R,_)}}function creatorFixed(_){return function(){return this.ownerDocument.createElementNS(_.space,_.local)}}function creator(_){var T=namespace(_);return(T.local?creatorFixed:creatorInherit)(T)}function none(){}function selector(_){return _==null?none:function(){return this.querySelector(_)}}function selection_select(_){typeof _!="function"&&(_=selector(_));for(var T=this._groups,R=T.length,P=new Array(R),O=0;O<R;++O)for(var I=T[O],z=I.length,F=P[O]=new Array(z),G,V,Z=0;Z<z;++Z)(G=I[Z])&&(V=_.call(G,G.__data__,Z,I))&&("__data__"in G&&(V.__data__=G.__data__),F[Z]=V);return new Selection$1(P,this._parents)}function array$1(_){return _==null?[]:Array.isArray(_)?_:Array.from(_)}function empty(){return[]}function selectorAll(_){return _==null?empty:function(){return this.querySelectorAll(_)}}function arrayAll(_){return function(){return array$1(_.apply(this,arguments))}}function selection_selectAll(_){typeof _=="function"?_=arrayAll(_):_=selectorAll(_);for(var T=this._groups,R=T.length,P=[],O=[],I=0;I<R;++I)for(var z=T[I],F=z.length,G,V=0;V<F;++V)(G=z[V])&&(P.push(_.call(G,G.__data__,V,z)),O.push(G));return new Selection$1(P,O)}function matcher(_){return function(){return this.matches(_)}}function childMatcher(_){return function(T){return T.matches(_)}}var find=Array.prototype.find;function childFind(_){return function(){return find.call(this.children,_)}}function childFirst(){return this.firstElementChild}function selection_selectChild(_){return this.select(_==null?childFirst:childFind(typeof _=="function"?_:childMatcher(_)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(_){return function(){return filter.call(this.children,_)}}function selection_selectChildren(_){return this.selectAll(_==null?children:childrenFilter(typeof _=="function"?_:childMatcher(_)))}function selection_filter(_){typeof _!="function"&&(_=matcher(_));for(var T=this._groups,R=T.length,P=new Array(R),O=0;O<R;++O)for(var I=T[O],z=I.length,F=P[O]=[],G,V=0;V<z;++V)(G=I[V])&&_.call(G,G.__data__,V,I)&&F.push(G);return new Selection$1(P,this._parents)}function sparse(_){return new Array(_.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(_,T){this.ownerDocument=_.ownerDocument,this.namespaceURI=_.namespaceURI,this._next=null,this._parent=_,this.__data__=T}EnterNode.prototype={constructor:EnterNode,appendChild:function(_){return this._parent.insertBefore(_,this._next)},insertBefore:function(_,T){return this._parent.insertBefore(_,T)},querySelector:function(_){return this._parent.querySelector(_)},querySelectorAll:function(_){return this._parent.querySelectorAll(_)}};function constant$3(_){return function(){return _}}function bindIndex(_,T,R,P,O,I){for(var z=0,F,G=T.length,V=I.length;z<V;++z)(F=T[z])?(F.__data__=I[z],P[z]=F):R[z]=new EnterNode(_,I[z]);for(;z<G;++z)(F=T[z])&&(O[z]=F)}function bindKey(_,T,R,P,O,I,z){var F,G,V=new Map,Z=T.length,Y=I.length,Q=new Array(Z),J;for(F=0;F<Z;++F)(G=T[F])&&(Q[F]=J=z.call(G,G.__data__,F,T)+"",V.has(J)?O[F]=G:V.set(J,G));for(F=0;F<Y;++F)J=z.call(_,I[F],F,I)+"",(G=V.get(J))?(P[F]=G,G.__data__=I[F],V.delete(J)):R[F]=new EnterNode(_,I[F]);for(F=0;F<Z;++F)(G=T[F])&&V.get(Q[F])===G&&(O[F]=G)}function datum(_){return _.__data__}function selection_data(_,T){if(!arguments.length)return Array.from(this,datum);var R=T?bindKey:bindIndex,P=this._parents,O=this._groups;typeof _!="function"&&(_=constant$3(_));for(var I=O.length,z=new Array(I),F=new Array(I),G=new Array(I),V=0;V<I;++V){var Z=P[V],Y=O[V],Q=Y.length,J=arraylike(_.call(Z,Z&&Z.__data__,V,P)),ee=J.length,ne=F[V]=new Array(ee),se=z[V]=new Array(ee),oe=G[V]=new Array(Q);R(Z,Y,ne,se,oe,J,T);for(var ae=0,ce=0,le,pe;ae<ee;++ae)if(le=ne[ae]){for(ae>=ce&&(ce=ae+1);!(pe=se[ce])&&++ce<ee;);le._next=pe||null}}return z=new Selection$1(z,P),z._enter=F,z._exit=G,z}function arraylike(_){return typeof _=="object"&&"length"in _?_:Array.from(_)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(_,T,R){var P=this.enter(),O=this,I=this.exit();return typeof _=="function"?(P=_(P),P&&(P=P.selection())):P=P.append(_+""),T!=null&&(O=T(O),O&&(O=O.selection())),R==null?I.remove():R(I),P&&O?P.merge(O).order():O}function selection_merge(_){for(var T=_.selection?_.selection():_,R=this._groups,P=T._groups,O=R.length,I=P.length,z=Math.min(O,I),F=new Array(O),G=0;G<z;++G)for(var V=R[G],Z=P[G],Y=V.length,Q=F[G]=new Array(Y),J,ee=0;ee<Y;++ee)(J=V[ee]||Z[ee])&&(Q[ee]=J);for(;G<O;++G)F[G]=R[G];return new Selection$1(F,this._parents)}function selection_order(){for(var _=this._groups,T=-1,R=_.length;++T<R;)for(var P=_[T],O=P.length-1,I=P[O],z;--O>=0;)(z=P[O])&&(I&&z.compareDocumentPosition(I)^4&&I.parentNode.insertBefore(z,I),I=z);return this}function selection_sort(_){_||(_=ascending);function T(Y,Q){return Y&&Q?_(Y.__data__,Q.__data__):!Y-!Q}for(var R=this._groups,P=R.length,O=new Array(P),I=0;I<P;++I){for(var z=R[I],F=z.length,G=O[I]=new Array(F),V,Z=0;Z<F;++Z)(V=z[Z])&&(G[Z]=V);G.sort(T)}return new Selection$1(O,this._parents).order()}function ascending(_,T){return _<T?-1:_>T?1:_>=T?0:NaN}function selection_call(){var _=arguments[0];return arguments[0]=this,_.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var _=this._groups,T=0,R=_.length;T<R;++T)for(var P=_[T],O=0,I=P.length;O<I;++O){var z=P[O];if(z)return z}return null}function selection_size(){let _=0;for(const T of this)++_;return _}function selection_empty(){return!this.node()}function selection_each(_){for(var T=this._groups,R=0,P=T.length;R<P;++R)for(var O=T[R],I=0,z=O.length,F;I<z;++I)(F=O[I])&&_.call(F,F.__data__,I,O);return this}function attrRemove$1(_){return function(){this.removeAttribute(_)}}function attrRemoveNS$1(_){return function(){this.removeAttributeNS(_.space,_.local)}}function attrConstant$1(_,T){return function(){this.setAttribute(_,T)}}function attrConstantNS$1(_,T){return function(){this.setAttributeNS(_.space,_.local,T)}}function attrFunction$1(_,T){return function(){var R=T.apply(this,arguments);R==null?this.removeAttribute(_):this.setAttribute(_,R)}}function attrFunctionNS$1(_,T){return function(){var R=T.apply(this,arguments);R==null?this.removeAttributeNS(_.space,_.local):this.setAttributeNS(_.space,_.local,R)}}function selection_attr(_,T){var R=namespace(_);if(arguments.length<2){var P=this.node();return R.local?P.getAttributeNS(R.space,R.local):P.getAttribute(R)}return this.each((T==null?R.local?attrRemoveNS$1:attrRemove$1:typeof T=="function"?R.local?attrFunctionNS$1:attrFunction$1:R.local?attrConstantNS$1:attrConstant$1)(R,T))}function defaultView(_){return _.ownerDocument&&_.ownerDocument.defaultView||_.document&&_||_.defaultView}function styleRemove$1(_){return function(){this.style.removeProperty(_)}}function styleConstant$1(_,T,R){return function(){this.style.setProperty(_,T,R)}}function styleFunction$1(_,T,R){return function(){var P=T.apply(this,arguments);P==null?this.style.removeProperty(_):this.style.setProperty(_,P,R)}}function selection_style(_,T,R){return arguments.length>1?this.each((T==null?styleRemove$1:typeof T=="function"?styleFunction$1:styleConstant$1)(_,T,R??"")):styleValue(this.node(),_)}function styleValue(_,T){return _.style.getPropertyValue(T)||defaultView(_).getComputedStyle(_,null).getPropertyValue(T)}function propertyRemove(_){return function(){delete this[_]}}function propertyConstant(_,T){return function(){this[_]=T}}function propertyFunction(_,T){return function(){var R=T.apply(this,arguments);R==null?delete this[_]:this[_]=R}}function selection_property(_,T){return arguments.length>1?this.each((T==null?propertyRemove:typeof T=="function"?propertyFunction:propertyConstant)(_,T)):this.node()[_]}function classArray(_){return _.trim().split(/^|\s+/)}function classList(_){return _.classList||new ClassList(_)}function ClassList(_){this._node=_,this._names=classArray(_.getAttribute("class")||"")}ClassList.prototype={add:function(_){var T=this._names.indexOf(_);T<0&&(this._names.push(_),this._node.setAttribute("class",this._names.join(" ")))},remove:function(_){var T=this._names.indexOf(_);T>=0&&(this._names.splice(T,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(_){return this._names.indexOf(_)>=0}};function classedAdd(_,T){for(var R=classList(_),P=-1,O=T.length;++P<O;)R.add(T[P])}function classedRemove(_,T){for(var R=classList(_),P=-1,O=T.length;++P<O;)R.remove(T[P])}function classedTrue(_){return function(){classedAdd(this,_)}}function classedFalse(_){return function(){classedRemove(this,_)}}function classedFunction(_,T){return function(){(T.apply(this,arguments)?classedAdd:classedRemove)(this,_)}}function selection_classed(_,T){var R=classArray(_+"");if(arguments.length<2){for(var P=classList(this.node()),O=-1,I=R.length;++O<I;)if(!P.contains(R[O]))return!1;return!0}return this.each((typeof T=="function"?classedFunction:T?classedTrue:classedFalse)(R,T))}function textRemove(){this.textContent=""}function textConstant$1(_){return function(){this.textContent=_}}function textFunction$1(_){return function(){var T=_.apply(this,arguments);this.textContent=T??""}}function selection_text(_){return arguments.length?this.each(_==null?textRemove:(typeof _=="function"?textFunction$1:textConstant$1)(_)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(_){return function(){this.innerHTML=_}}function htmlFunction(_){return function(){var T=_.apply(this,arguments);this.innerHTML=T??""}}function selection_html(_){return arguments.length?this.each(_==null?htmlRemove:(typeof _=="function"?htmlFunction:htmlConstant)(_)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(_){var T=typeof _=="function"?_:creator(_);return this.select(function(){return this.appendChild(T.apply(this,arguments))})}function constantNull(){return null}function selection_insert(_,T){var R=typeof _=="function"?_:creator(_),P=T==null?constantNull:typeof T=="function"?T:selector(T);return this.select(function(){return this.insertBefore(R.apply(this,arguments),P.apply(this,arguments)||null)})}function remove(){var _=this.parentNode;_&&_.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var _=this.cloneNode(!1),T=this.parentNode;return T?T.insertBefore(_,this.nextSibling):_}function selection_cloneDeep(){var _=this.cloneNode(!0),T=this.parentNode;return T?T.insertBefore(_,this.nextSibling):_}function selection_clone(_){return this.select(_?selection_cloneDeep:selection_cloneShallow)}function selection_datum(_){return arguments.length?this.property("__data__",_):this.node().__data__}function contextListener(_){return function(T){_.call(this,T,this.__data__)}}function parseTypenames(_){return _.trim().split(/^|\s+/).map(function(T){var R="",P=T.indexOf(".");return P>=0&&(R=T.slice(P+1),T=T.slice(0,P)),{type:T,name:R}})}function onRemove(_){return function(){var T=this.__on;if(T){for(var R=0,P=-1,O=T.length,I;R<O;++R)I=T[R],(!_.type||I.type===_.type)&&I.name===_.name?this.removeEventListener(I.type,I.listener,I.options):T[++P]=I;++P?T.length=P:delete this.__on}}}function onAdd(_,T,R){return function(){var P=this.__on,O,I=contextListener(T);if(P){for(var z=0,F=P.length;z<F;++z)if((O=P[z]).type===_.type&&O.name===_.name){this.removeEventListener(O.type,O.listener,O.options),this.addEventListener(O.type,O.listener=I,O.options=R),O.value=T;return}}this.addEventListener(_.type,I,R),O={type:_.type,name:_.name,value:T,listener:I,options:R},P?P.push(O):this.__on=[O]}}function selection_on(_,T,R){var P=parseTypenames(_+""),O,I=P.length,z;if(arguments.length<2){var F=this.node().__on;if(F){for(var G=0,V=F.length,Z;G<V;++G)for(O=0,Z=F[G];O<I;++O)if((z=P[O]).type===Z.type&&z.name===Z.name)return Z.value}return}for(F=T?onAdd:onRemove,O=0;O<I;++O)this.each(F(P[O],T,R));return this}function dispatchEvent(_,T,R){var P=defaultView(_),O=P.CustomEvent;typeof O=="function"?O=new O(T,R):(O=P.document.createEvent("Event"),R?(O.initEvent(T,R.bubbles,R.cancelable),O.detail=R.detail):O.initEvent(T,!1,!1)),_.dispatchEvent(O)}function dispatchConstant(_,T){return function(){return dispatchEvent(this,_,T)}}function dispatchFunction(_,T){return function(){return dispatchEvent(this,_,T.apply(this,arguments))}}function selection_dispatch(_,T){return this.each((typeof T=="function"?dispatchFunction:dispatchConstant)(_,T))}function*selection_iterator(){for(var _=this._groups,T=0,R=_.length;T<R;++T)for(var P=_[T],O=0,I=P.length,z;O<I;++O)(z=P[O])&&(yield z)}var root=[null];function Selection$1(_,T){this._groups=_,this._parents=T}function selection(){return new Selection$1([[document.documentElement]],root)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(_){return typeof _=="string"?new Selection$1([[document.querySelector(_)]],[document.documentElement]):new Selection$1([[_]],root)}function sourceEvent(_){let T;for(;T=_.sourceEvent;)_=T;return _}function pointof(_,T){if(_=sourceEvent(_),T===void 0&&(T=_.currentTarget),T){var R=T.ownerSVGElement||T;if(R.createSVGPoint){var P=R.createSVGPoint();return P.x=_.clientX,P.y=_.clientY,P=P.matrixTransform(T.getScreenCTM().inverse()),[P.x,P.y]}if(T.getBoundingClientRect){var O=T.getBoundingClientRect();return[_.clientX-O.left-T.clientLeft,_.clientY-O.top-T.clientTop]}}return[_.pageX,_.pageY]}function define(_,T,R){_.prototype=T.prototype=R,R.constructor=_}function extend(_,T){var R=Object.create(_.prototype);for(var P in T)R[P]=T[P];return R}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named$1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color$1,{copy(_){return Object.assign(new this.constructor,this,_)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$1(_){var T,R;return _=(_+"").trim().toLowerCase(),(T=reHex.exec(_))?(R=T[1].length,T=parseInt(T[1],16),R===6?rgbn(T):R===3?new Rgb(T>>8&15|T>>4&240,T>>4&15|T&240,(T&15)<<4|T&15,1):R===8?rgba(T>>24&255,T>>16&255,T>>8&255,(T&255)/255):R===4?rgba(T>>12&15|T>>8&240,T>>8&15|T>>4&240,T>>4&15|T&240,((T&15)<<4|T&15)/255):null):(T=reRgbInteger.exec(_))?new Rgb(T[1],T[2],T[3],1):(T=reRgbPercent.exec(_))?new Rgb(T[1]*255/100,T[2]*255/100,T[3]*255/100,1):(T=reRgbaInteger.exec(_))?rgba(T[1],T[2],T[3],T[4]):(T=reRgbaPercent.exec(_))?rgba(T[1]*255/100,T[2]*255/100,T[3]*255/100,T[4]):(T=reHslPercent.exec(_))?hsla(T[1],T[2]/100,T[3]/100,1):(T=reHslaPercent.exec(_))?hsla(T[1],T[2]/100,T[3]/100,T[4]):named$1.hasOwnProperty(_)?rgbn(named$1[_]):_==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(_){return new Rgb(_>>16&255,_>>8&255,_&255,1)}function rgba(_,T,R,P){return P<=0&&(_=T=R=NaN),new Rgb(_,T,R,P)}function rgbConvert(_){return _ instanceof Color||(_=color$1(_)),_?(_=_.rgb(),new Rgb(_.r,_.g,_.b,_.opacity)):new Rgb}function rgb(_,T,R,P){return arguments.length===1?rgbConvert(_):new Rgb(_,T,R,P??1)}function Rgb(_,T,R,P){this.r=+_,this.g=+T,this.b=+R,this.opacity=+P}define(Rgb,rgb,extend(Color,{brighter(_){return _=_==null?brighter:Math.pow(brighter,_),new Rgb(this.r*_,this.g*_,this.b*_,this.opacity)},darker(_){return _=_==null?darker:Math.pow(darker,_),new Rgb(this.r*_,this.g*_,this.b*_,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const _=clampa(this.opacity);return`${_===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${_===1?")":`, ${_})`}`}function clampa(_){return isNaN(_)?1:Math.max(0,Math.min(1,_))}function clampi(_){return Math.max(0,Math.min(255,Math.round(_)||0))}function hex(_){return _=clampi(_),(_<16?"0":"")+_.toString(16)}function hsla(_,T,R,P){return P<=0?_=T=R=NaN:R<=0||R>=1?_=T=NaN:T<=0&&(_=NaN),new Hsl(_,T,R,P)}function hslConvert(_){if(_ instanceof Hsl)return new Hsl(_.h,_.s,_.l,_.opacity);if(_ instanceof Color||(_=color$1(_)),!_)return new Hsl;if(_ instanceof Hsl)return _;_=_.rgb();var T=_.r/255,R=_.g/255,P=_.b/255,O=Math.min(T,R,P),I=Math.max(T,R,P),z=NaN,F=I-O,G=(I+O)/2;return F?(T===I?z=(R-P)/F+(R<P)*6:R===I?z=(P-T)/F+2:z=(T-R)/F+4,F/=G<.5?I+O:2-I-O,z*=60):F=G>0&&G<1?0:z,new Hsl(z,F,G,_.opacity)}function hsl$1(_,T,R,P){return arguments.length===1?hslConvert(_):new Hsl(_,T,R,P??1)}function Hsl(_,T,R,P){this.h=+_,this.s=+T,this.l=+R,this.opacity=+P}define(Hsl,hsl$1,extend(Color,{brighter(_){return _=_==null?brighter:Math.pow(brighter,_),new Hsl(this.h,this.s,this.l*_,this.opacity)},darker(_){return _=_==null?darker:Math.pow(darker,_),new Hsl(this.h,this.s,this.l*_,this.opacity)},rgb(){var _=this.h%360+(this.h<0)*360,T=isNaN(_)||isNaN(this.s)?0:this.s,R=this.l,P=R+(R<.5?R:1-R)*T,O=2*R-P;return new Rgb(hsl2rgb(_>=240?_-240:_+120,O,P),hsl2rgb(_,O,P),hsl2rgb(_<120?_+240:_-120,O,P),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const _=clampa(this.opacity);return`${_===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${_===1?")":`, ${_})`}`}}));function clamph(_){return _=(_||0)%360,_<0?_+360:_}function clampt(_){return Math.max(0,Math.min(1,_||0))}function hsl2rgb(_,T,R){return(_<60?T+(R-T)*_/60:_<180?R:_<240?T+(R-T)*(240-_)/60:T)*255}const radians$2=Math.PI/180,degrees$2=180/Math.PI,K=18,Xn=.96422,Yn=1,Zn=.82521,t0$1=4/29,t1$1=6/29,t2=3*t1$1*t1$1,t3=t1$1*t1$1*t1$1;function labConvert(_){if(_ instanceof Lab)return new Lab(_.l,_.a,_.b,_.opacity);if(_ instanceof Hcl)return hcl2lab(_);_ instanceof Rgb||(_=rgbConvert(_));var T=rgb2lrgb(_.r),R=rgb2lrgb(_.g),P=rgb2lrgb(_.b),O=xyz2lab((.2225045*T+.7168786*R+.0606169*P)/Yn),I,z;return T===R&&R===P?I=z=O:(I=xyz2lab((.4360747*T+.3850649*R+.1430804*P)/Xn),z=xyz2lab((.0139322*T+.0971045*R+.7141733*P)/Zn)),new Lab(116*O-16,500*(I-O),200*(O-z),_.opacity)}function lab$1(_,T,R,P){return arguments.length===1?labConvert(_):new Lab(_,T,R,P??1)}function Lab(_,T,R,P){this.l=+_,this.a=+T,this.b=+R,this.opacity=+P}define(Lab,lab$1,extend(Color,{brighter(_){return new Lab(this.l+K*(_??1),this.a,this.b,this.opacity)},darker(_){return new Lab(this.l-K*(_??1),this.a,this.b,this.opacity)},rgb(){var _=(this.l+16)/116,T=isNaN(this.a)?_:_+this.a/500,R=isNaN(this.b)?_:_-this.b/200;return T=Xn*lab2xyz(T),_=Yn*lab2xyz(_),R=Zn*lab2xyz(R),new Rgb(lrgb2rgb(3.1338561*T-1.6168667*_-.4906146*R),lrgb2rgb(-.9787684*T+1.9161415*_+.033454*R),lrgb2rgb(.0719453*T-.2289914*_+1.4052427*R),this.opacity)}}));function xyz2lab(_){return _>t3?Math.pow(_,1/3):_/t2+t0$1}function lab2xyz(_){return _>t1$1?_*_*_:t2*(_-t0$1)}function lrgb2rgb(_){return 255*(_<=.0031308?12.92*_:1.055*Math.pow(_,1/2.4)-.055)}function rgb2lrgb(_){return(_/=255)<=.04045?_/12.92:Math.pow((_+.055)/1.055,2.4)}function hclConvert(_){if(_ instanceof Hcl)return new Hcl(_.h,_.c,_.l,_.opacity);if(_ instanceof Lab||(_=labConvert(_)),_.a===0&&_.b===0)return new Hcl(NaN,0<_.l&&_.l<100?0:NaN,_.l,_.opacity);var T=Math.atan2(_.b,_.a)*degrees$2;return new Hcl(T<0?T+360:T,Math.sqrt(_.a*_.a+_.b*_.b),_.l,_.opacity)}function hcl$1(_,T,R,P){return arguments.length===1?hclConvert(_):new Hcl(_,T,R,P??1)}function Hcl(_,T,R,P){this.h=+_,this.c=+T,this.l=+R,this.opacity=+P}function hcl2lab(_){if(isNaN(_.h))return new Lab(_.l,0,0,_.opacity);var T=_.h*radians$2;return new Lab(_.l,Math.cos(T)*_.c,Math.sin(T)*_.c,_.opacity)}define(Hcl,hcl$1,extend(Color,{brighter(_){return new Hcl(this.h,this.c,this.l+K*(_??1),this.opacity)},darker(_){return new Hcl(this.h,this.c,this.l-K*(_??1),this.opacity)},rgb(){return hcl2lab(this).rgb()}}));var A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelixConvert(_){if(_ instanceof Cubehelix)return new Cubehelix(_.h,_.s,_.l,_.opacity);_ instanceof Rgb||(_=rgbConvert(_));var T=_.r/255,R=_.g/255,P=_.b/255,O=(BC_DA*P+ED*T-EB*R)/(BC_DA+ED-EB),I=P-O,z=(E*(R-O)-C*I)/D,F=Math.sqrt(z*z+I*I)/(E*O*(1-O)),G=F?Math.atan2(z,I)*degrees$2-120:NaN;return new Cubehelix(G<0?G+360:G,F,O,_.opacity)}function cubehelix$1(_,T,R,P){return arguments.length===1?cubehelixConvert(_):new Cubehelix(_,T,R,P??1)}function Cubehelix(_,T,R,P){this.h=+_,this.s=+T,this.l=+R,this.opacity=+P}define(Cubehelix,cubehelix$1,extend(Color,{brighter(_){return _=_==null?brighter:Math.pow(brighter,_),new Cubehelix(this.h,this.s,this.l*_,this.opacity)},darker(_){return _=_==null?darker:Math.pow(darker,_),new Cubehelix(this.h,this.s,this.l*_,this.opacity)},rgb(){var _=isNaN(this.h)?0:(this.h+120)*radians$2,T=+this.l,R=isNaN(this.s)?0:this.s*T*(1-T),P=Math.cos(_),O=Math.sin(_);return new Rgb(255*(T+R*(A*P+B*O)),255*(T+R*(C*P+D*O)),255*(T+R*(E*P)),this.opacity)}}));function basis(_,T,R,P,O){var I=_*_,z=I*_;return((1-3*_+3*I-z)*T+(4-6*I+3*z)*R+(1+3*_+3*I-3*z)*P+z*O)/6}function basis$1(_){var T=_.length-1;return function(R){var P=R<=0?R=0:R>=1?(R=1,T-1):Math.floor(R*T),O=_[P],I=_[P+1],z=P>0?_[P-1]:2*O-I,F=P<T-1?_[P+2]:2*I-O;return basis((R-P/T)*T,z,O,I,F)}}const constant$2=_=>()=>_;function linear$1(_,T){return function(R){return _+R*T}}function exponential(_,T,R){return _=Math.pow(_,R),T=Math.pow(T,R)-_,R=1/R,function(P){return Math.pow(_+P*T,R)}}function hue(_,T){var R=T-_;return R?linear$1(_,R>180||R<-180?R-360*Math.round(R/360):R):constant$2(isNaN(_)?T:_)}function gamma(_){return(_=+_)==1?nogamma:function(T,R){return R-T?exponential(T,R,_):constant$2(isNaN(T)?R:T)}}function nogamma(_,T){var R=T-_;return R?linear$1(_,R):constant$2(isNaN(_)?T:_)}const interpolateRgb=(function _(T){var R=gamma(T);function P(O,I){var z=R((O=rgb(O)).r,(I=rgb(I)).r),F=R(O.g,I.g),G=R(O.b,I.b),V=nogamma(O.opacity,I.opacity);return function(Z){return O.r=z(Z),O.g=F(Z),O.b=G(Z),O.opacity=V(Z),O+""}}return P.gamma=_,P})(1);function rgbSpline(_){return function(T){var R=T.length,P=new Array(R),O=new Array(R),I=new Array(R),z,F;for(z=0;z<R;++z)F=rgb(T[z]),P[z]=F.r||0,O[z]=F.g||0,I[z]=F.b||0;return P=_(P),O=_(O),I=_(I),F.opacity=1,function(G){return F.r=P(G),F.g=O(G),F.b=I(G),F+""}}}var rgbBasis=rgbSpline(basis$1);function numberArray(_,T){T||(T=[]);var R=_?Math.min(T.length,_.length):0,P=T.slice(),O;return function(I){for(O=0;O<R;++O)P[O]=_[O]*(1-I)+T[O]*I;return P}}function isNumberArray$1(_){return ArrayBuffer.isView(_)&&!(_ instanceof DataView)}function genericArray(_,T){var R=T?T.length:0,P=_?Math.min(R,_.length):0,O=new Array(P),I=new Array(R),z;for(z=0;z<P;++z)O[z]=interpolate$1(_[z],T[z]);for(;z<R;++z)I[z]=T[z];return function(F){for(z=0;z<P;++z)I[z]=O[z](F);return I}}function date$1(_,T){var R=new Date;return _=+_,T=+T,function(P){return R.setTime(_*(1-P)+T*P),R}}function interpolateNumber(_,T){return _=+_,T=+T,function(R){return _*(1-R)+T*R}}function object(_,T){var R={},P={},O;(_===null||typeof _!="object")&&(_={}),(T===null||typeof T!="object")&&(T={});for(O in T)O in _?R[O]=interpolate$1(_[O],T[O]):P[O]=T[O];return function(I){for(O in R)P[O]=R[O](I);return P}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(_){return function(){return _}}function one$1(_){return function(T){return _(T)+""}}function interpolateString(_,T){var R=reA.lastIndex=reB.lastIndex=0,P,O,I,z=-1,F=[],G=[];for(_=_+"",T=T+"";(P=reA.exec(_))&&(O=reB.exec(T));)(I=O.index)>R&&(I=T.slice(R,I),F[z]?F[z]+=I:F[++z]=I),(P=P[0])===(O=O[0])?F[z]?F[z]+=O:F[++z]=O:(F[++z]=null,G.push({i:z,x:interpolateNumber(P,O)})),R=reB.lastIndex;return R<T.length&&(I=T.slice(R),F[z]?F[z]+=I:F[++z]=I),F.length<2?G[0]?one$1(G[0].x):zero(T):(T=G.length,function(V){for(var Z=0,Y;Z<T;++Z)F[(Y=G[Z]).i]=Y.x(V);return F.join("")})}function interpolate$1(_,T){var R=typeof T,P;return T==null||R==="boolean"?constant$2(T):(R==="number"?interpolateNumber:R==="string"?(P=color$1(T))?(T=P,interpolateRgb):interpolateString:T instanceof color$1?interpolateRgb:T instanceof Date?date$1:isNumberArray$1(T)?numberArray:Array.isArray(T)?genericArray:typeof T.valueOf!="function"&&typeof T.toString!="function"||isNaN(T)?object:interpolateNumber)(_,T)}function interpolateRound(_,T){return _=+_,T=+T,function(R){return Math.round(_*(1-R)+T*R)}}var degrees$1=180/Math.PI,identity$6={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(_,T,R,P,O,I){var z,F,G;return(z=Math.sqrt(_*_+T*T))&&(_/=z,T/=z),(G=_*R+T*P)&&(R-=_*G,P-=T*G),(F=Math.sqrt(R*R+P*P))&&(R/=F,P/=F,G/=F),_*P<T*R&&(_=-_,T=-T,G=-G,z=-z),{translateX:O,translateY:I,rotate:Math.atan2(T,_)*degrees$1,skewX:Math.atan(G)*degrees$1,scaleX:z,scaleY:F}}var svgNode;function parseCss(_){const T=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(_+"");return T.isIdentity?identity$6:decompose(T.a,T.b,T.c,T.d,T.e,T.f)}function parseSvg(_){return _==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",_),!(_=svgNode.transform.baseVal.consolidate()))?identity$6:(_=_.matrix,decompose(_.a,_.b,_.c,_.d,_.e,_.f))}function interpolateTransform(_,T,R,P){function O(V){return V.length?V.pop()+" ":""}function I(V,Z,Y,Q,J,ee){if(V!==Y||Z!==Q){var ne=J.push("translate(",null,T,null,R);ee.push({i:ne-4,x:interpolateNumber(V,Y)},{i:ne-2,x:interpolateNumber(Z,Q)})}else(Y||Q)&&J.push("translate("+Y+T+Q+R)}function z(V,Z,Y,Q){V!==Z?(V-Z>180?Z+=360:Z-V>180&&(V+=360),Q.push({i:Y.push(O(Y)+"rotate(",null,P)-2,x:interpolateNumber(V,Z)})):Z&&Y.push(O(Y)+"rotate("+Z+P)}function F(V,Z,Y,Q){V!==Z?Q.push({i:Y.push(O(Y)+"skewX(",null,P)-2,x:interpolateNumber(V,Z)}):Z&&Y.push(O(Y)+"skewX("+Z+P)}function G(V,Z,Y,Q,J,ee){if(V!==Y||Z!==Q){var ne=J.push(O(J)+"scale(",null,",",null,")");ee.push({i:ne-4,x:interpolateNumber(V,Y)},{i:ne-2,x:interpolateNumber(Z,Q)})}else(Y!==1||Q!==1)&&J.push(O(J)+"scale("+Y+","+Q+")")}return function(V,Z){var Y=[],Q=[];return V=_(V),Z=_(Z),I(V.translateX,V.translateY,Z.translateX,Z.translateY,Y,Q),z(V.rotate,Z.rotate,Y,Q),F(V.skewX,Z.skewX,Y,Q),G(V.scaleX,V.scaleY,Z.scaleX,Z.scaleY,Y,Q),V=Z=null,function(J){for(var ee=-1,ne=Q.length,se;++ee<ne;)Y[(se=Q[ee]).i]=se.x(J);return Y.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")");function hsl(_){return function(T,R){var P=_((T=hsl$1(T)).h,(R=hsl$1(R)).h),O=nogamma(T.s,R.s),I=nogamma(T.l,R.l),z=nogamma(T.opacity,R.opacity);return function(F){return T.h=P(F),T.s=O(F),T.l=I(F),T.opacity=z(F),T+""}}}const interpolateHsl=hsl(hue);function lab(_,T){var R=nogamma((_=lab$1(_)).l,(T=lab$1(T)).l),P=nogamma(_.a,T.a),O=nogamma(_.b,T.b),I=nogamma(_.opacity,T.opacity);return function(z){return _.l=R(z),_.a=P(z),_.b=O(z),_.opacity=I(z),_+""}}function hcl(_){return function(T,R){var P=_((T=hcl$1(T)).h,(R=hcl$1(R)).h),O=nogamma(T.c,R.c),I=nogamma(T.l,R.l),z=nogamma(T.opacity,R.opacity);return function(F){return T.h=P(F),T.c=O(F),T.l=I(F),T.opacity=z(F),T+""}}}const interpolateHcl=hcl(hue);function cubehelix(_){return(function T(R){R=+R;function P(O,I){var z=_((O=cubehelix$1(O)).h,(I=cubehelix$1(I)).h),F=nogamma(O.s,I.s),G=nogamma(O.l,I.l),V=nogamma(O.opacity,I.opacity);return function(Z){return O.h=z(Z),O.s=F(Z),O.l=G(Math.pow(Z,R)),O.opacity=V(Z),O+""}}return P.gamma=T,P})(1)}cubehelix(hue);var cubehelixLong=cubehelix(nogamma);function piecewise(_,T){T===void 0&&(T=_,_=interpolate$1);for(var R=0,P=T.length-1,O=T[0],I=new Array(P<0?0:P);R<P;)I[R]=_(O,O=T[++R]);return function(z){var F=Math.max(0,Math.min(P-1,Math.floor(z*=P)));return I[F](z-F)}}function quantize(_,T){for(var R=new Array(T),P=0;P<T;++P)R[P]=_(P/(T-1));return R}var frame$1=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(_){setTimeout(_,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(_,T,R){if(typeof _!="function")throw new TypeError("callback is not a function");R=(R==null?now():+R)+(T==null?0:+T),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=_,this._time=R,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(_,T,R){var P=new Timer;return P.restart(_,T,R),P}function timerFlush(){now(),++frame$1;for(var _=taskHead,T;_;)(T=clockNow-_._time)>=0&&_._call.call(void 0,T),_=_._next;--frame$1}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame$1=timeout$1=0;try{timerFlush()}finally{frame$1=0,nap(),clockNow=0}}function poke(){var _=clock.now(),T=_-clockLast;T>pokeDelay&&(clockSkew-=T,clockLast=_)}function nap(){for(var _,T=taskHead,R,P=1/0;T;)T._call?(P>T._time&&(P=T._time),_=T,T=T._next):(R=T._next,T._next=null,T=_?_._next=R:taskHead=R);taskTail=_,sleep(P)}function sleep(_){if(!frame$1){timeout$1&&(timeout$1=clearTimeout(timeout$1));var T=_-clockNow;T>24?(_<1/0&&(timeout$1=setTimeout(wake,_-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame$1=1,setFrame(wake))}}function timeout(_,T,R){var P=new Timer;return T=T==null?0:+T,P.restart(O=>{P.stop(),_(O+T)},T,R),P}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(_,T,R,P,O,I){var z=_.__transition;if(!z)_.__transition={};else if(R in z)return;create$1(_,R,{name:T,index:P,group:O,on:emptyOn,tween:emptyTween,time:I.time,delay:I.delay,duration:I.duration,ease:I.ease,timer:null,state:CREATED})}function init(_,T){var R=get(_,T);if(R.state>CREATED)throw new Error("too late; already scheduled");return R}function set(_,T){var R=get(_,T);if(R.state>STARTED)throw new Error("too late; already running");return R}function get(_,T){var R=_.__transition;if(!R||!(R=R[T]))throw new Error("transition not found");return R}function create$1(_,T,R){var P=_.__transition,O;P[T]=R,R.timer=timer(I,0,R.time);function I(V){R.state=SCHEDULED,R.timer.restart(z,R.delay,R.time),R.delay<=V&&z(V-R.delay)}function z(V){var Z,Y,Q,J;if(R.state!==SCHEDULED)return G();for(Z in P)if(J=P[Z],J.name===R.name){if(J.state===STARTED)return timeout(z);J.state===RUNNING?(J.state=ENDED,J.timer.stop(),J.on.call("interrupt",_,_.__data__,J.index,J.group),delete P[Z]):+Z<T&&(J.state=ENDED,J.timer.stop(),J.on.call("cancel",_,_.__data__,J.index,J.group),delete P[Z])}if(timeout(function(){R.state===STARTED&&(R.state=RUNNING,R.timer.restart(F,R.delay,R.time),F(V))}),R.state=STARTING,R.on.call("start",_,_.__data__,R.index,R.group),R.state===STARTING){for(R.state=STARTED,O=new Array(Q=R.tween.length),Z=0,Y=-1;Z<Q;++Z)(J=R.tween[Z].value.call(_,_.__data__,R.index,R.group))&&(O[++Y]=J);O.length=Y+1}}function F(V){for(var Z=V<R.duration?R.ease.call(null,V/R.duration):(R.timer.restart(G),R.state=ENDING,1),Y=-1,Q=O.length;++Y<Q;)O[Y].call(_,Z);R.state===ENDING&&(R.on.call("end",_,_.__data__,R.index,R.group),G())}function G(){R.state=ENDED,R.timer.stop(),delete P[T];for(var V in P)return;delete _.__transition}}function interrupt(_,T){var R=_.__transition,P,O,I=!0,z;if(R){T=T==null?null:T+"";for(z in R){if((P=R[z]).name!==T){I=!1;continue}O=P.state>STARTING&&P.state<ENDING,P.state=ENDED,P.timer.stop(),P.on.call(O?"interrupt":"cancel",_,_.__data__,P.index,P.group),delete R[z]}I&&delete _.__transition}}function selection_interrupt(_){return this.each(function(){interrupt(this,_)})}function tweenRemove(_,T){var R,P;return function(){var O=set(this,_),I=O.tween;if(I!==R){P=R=I;for(var z=0,F=P.length;z<F;++z)if(P[z].name===T){P=P.slice(),P.splice(z,1);break}}O.tween=P}}function tweenFunction(_,T,R){var P,O;if(typeof R!="function")throw new Error;return function(){var I=set(this,_),z=I.tween;if(z!==P){O=(P=z).slice();for(var F={name:T,value:R},G=0,V=O.length;G<V;++G)if(O[G].name===T){O[G]=F;break}G===V&&O.push(F)}I.tween=O}}function transition_tween(_,T){var R=this._id;if(_+="",arguments.length<2){for(var P=get(this.node(),R).tween,O=0,I=P.length,z;O<I;++O)if((z=P[O]).name===_)return z.value;return null}return this.each((T==null?tweenRemove:tweenFunction)(R,_,T))}function tweenValue(_,T,R){var P=_._id;return _.each(function(){var O=set(this,P);(O.value||(O.value={}))[T]=R.apply(this,arguments)}),function(O){return get(O,P).value[T]}}function interpolate(_,T){var R;return(typeof T=="number"?interpolateNumber:T instanceof color$1?interpolateRgb:(R=color$1(T))?(T=R,interpolateRgb):interpolateString)(_,T)}function attrRemove(_){return function(){this.removeAttribute(_)}}function attrRemoveNS(_){return function(){this.removeAttributeNS(_.space,_.local)}}function attrConstant(_,T,R){var P,O=R+"",I;return function(){var z=this.getAttribute(_);return z===O?null:z===P?I:I=T(P=z,R)}}function attrConstantNS(_,T,R){var P,O=R+"",I;return function(){var z=this.getAttributeNS(_.space,_.local);return z===O?null:z===P?I:I=T(P=z,R)}}function attrFunction(_,T,R){var P,O,I;return function(){var z,F=R(this),G;return F==null?void this.removeAttribute(_):(z=this.getAttribute(_),G=F+"",z===G?null:z===P&&G===O?I:(O=G,I=T(P=z,F)))}}function attrFunctionNS(_,T,R){var P,O,I;return function(){var z,F=R(this),G;return F==null?void this.removeAttributeNS(_.space,_.local):(z=this.getAttributeNS(_.space,_.local),G=F+"",z===G?null:z===P&&G===O?I:(O=G,I=T(P=z,F)))}}function transition_attr(_,T){var R=namespace(_),P=R==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(_,typeof T=="function"?(R.local?attrFunctionNS:attrFunction)(R,P,tweenValue(this,"attr."+_,T)):T==null?(R.local?attrRemoveNS:attrRemove)(R):(R.local?attrConstantNS:attrConstant)(R,P,T))}function attrInterpolate(_,T){return function(R){this.setAttribute(_,T.call(this,R))}}function attrInterpolateNS(_,T){return function(R){this.setAttributeNS(_.space,_.local,T.call(this,R))}}function attrTweenNS(_,T){var R,P;function O(){var I=T.apply(this,arguments);return I!==P&&(R=(P=I)&&attrInterpolateNS(_,I)),R}return O._value=T,O}function attrTween(_,T){var R,P;function O(){var I=T.apply(this,arguments);return I!==P&&(R=(P=I)&&attrInterpolate(_,I)),R}return O._value=T,O}function transition_attrTween(_,T){var R="attr."+_;if(arguments.length<2)return(R=this.tween(R))&&R._value;if(T==null)return this.tween(R,null);if(typeof T!="function")throw new Error;var P=namespace(_);return this.tween(R,(P.local?attrTweenNS:attrTween)(P,T))}function delayFunction(_,T){return function(){init(this,_).delay=+T.apply(this,arguments)}}function delayConstant(_,T){return T=+T,function(){init(this,_).delay=T}}function transition_delay(_){var T=this._id;return arguments.length?this.each((typeof _=="function"?delayFunction:delayConstant)(T,_)):get(this.node(),T).delay}function durationFunction(_,T){return function(){set(this,_).duration=+T.apply(this,arguments)}}function durationConstant(_,T){return T=+T,function(){set(this,_).duration=T}}function transition_duration(_){var T=this._id;return arguments.length?this.each((typeof _=="function"?durationFunction:durationConstant)(T,_)):get(this.node(),T).duration}function easeConstant(_,T){if(typeof T!="function")throw new Error;return function(){set(this,_).ease=T}}function transition_ease(_){var T=this._id;return arguments.length?this.each(easeConstant(T,_)):get(this.node(),T).ease}function easeVarying(_,T){return function(){var R=T.apply(this,arguments);if(typeof R!="function")throw new Error;set(this,_).ease=R}}function transition_easeVarying(_){if(typeof _!="function")throw new Error;return this.each(easeVarying(this._id,_))}function transition_filter(_){typeof _!="function"&&(_=matcher(_));for(var T=this._groups,R=T.length,P=new Array(R),O=0;O<R;++O)for(var I=T[O],z=I.length,F=P[O]=[],G,V=0;V<z;++V)(G=I[V])&&_.call(G,G.__data__,V,I)&&F.push(G);return new Transition(P,this._parents,this._name,this._id)}function transition_merge(_){if(_._id!==this._id)throw new Error;for(var T=this._groups,R=_._groups,P=T.length,O=R.length,I=Math.min(P,O),z=new Array(P),F=0;F<I;++F)for(var G=T[F],V=R[F],Z=G.length,Y=z[F]=new Array(Z),Q,J=0;J<Z;++J)(Q=G[J]||V[J])&&(Y[J]=Q);for(;F<P;++F)z[F]=T[F];return new Transition(z,this._parents,this._name,this._id)}function start(_){return(_+"").trim().split(/^|\s+/).every(function(T){var R=T.indexOf(".");return R>=0&&(T=T.slice(0,R)),!T||T==="start"})}function onFunction(_,T,R){var P,O,I=start(T)?init:set;return function(){var z=I(this,_),F=z.on;F!==P&&(O=(P=F).copy()).on(T,R),z.on=O}}function transition_on(_,T){var R=this._id;return arguments.length<2?get(this.node(),R).on.on(_):this.each(onFunction(R,_,T))}function removeFunction(_){return function(){var T=this.parentNode;for(var R in this.__transition)if(+R!==_)return;T&&T.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(_){var T=this._name,R=this._id;typeof _!="function"&&(_=selector(_));for(var P=this._groups,O=P.length,I=new Array(O),z=0;z<O;++z)for(var F=P[z],G=F.length,V=I[z]=new Array(G),Z,Y,Q=0;Q<G;++Q)(Z=F[Q])&&(Y=_.call(Z,Z.__data__,Q,F))&&("__data__"in Z&&(Y.__data__=Z.__data__),V[Q]=Y,schedule(V[Q],T,R,Q,V,get(Z,R)));return new Transition(I,this._parents,T,R)}function transition_selectAll(_){var T=this._name,R=this._id;typeof _!="function"&&(_=selectorAll(_));for(var P=this._groups,O=P.length,I=[],z=[],F=0;F<O;++F)for(var G=P[F],V=G.length,Z,Y=0;Y<V;++Y)if(Z=G[Y]){for(var Q=_.call(Z,Z.__data__,Y,G),J,ee=get(Z,R),ne=0,se=Q.length;ne<se;++ne)(J=Q[ne])&&schedule(J,T,R,ne,Q,ee);I.push(Q),z.push(Z)}return new Transition(I,z,T,R)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(_,T){var R,P,O;return function(){var I=styleValue(this,_),z=(this.style.removeProperty(_),styleValue(this,_));return I===z?null:I===R&&z===P?O:O=T(R=I,P=z)}}function styleRemove(_){return function(){this.style.removeProperty(_)}}function styleConstant(_,T,R){var P,O=R+"",I;return function(){var z=styleValue(this,_);return z===O?null:z===P?I:I=T(P=z,R)}}function styleFunction(_,T,R){var P,O,I;return function(){var z=styleValue(this,_),F=R(this),G=F+"";return F==null&&(G=F=(this.style.removeProperty(_),styleValue(this,_))),z===G?null:z===P&&G===O?I:(O=G,I=T(P=z,F))}}function styleMaybeRemove(_,T){var R,P,O,I="style."+T,z="end."+I,F;return function(){var G=set(this,_),V=G.on,Z=G.value[I]==null?F||(F=styleRemove(T)):void 0;(V!==R||O!==Z)&&(P=(R=V).copy()).on(z,O=Z),G.on=P}}function transition_style(_,T,R){var P=(_+="")=="transform"?interpolateTransformCss:interpolate;return T==null?this.styleTween(_,styleNull(_,P)).on("end.style."+_,styleRemove(_)):typeof T=="function"?this.styleTween(_,styleFunction(_,P,tweenValue(this,"style."+_,T))).each(styleMaybeRemove(this._id,_)):this.styleTween(_,styleConstant(_,P,T),R).on("end.style."+_,null)}function styleInterpolate(_,T,R){return function(P){this.style.setProperty(_,T.call(this,P),R)}}function styleTween(_,T,R){var P,O;function I(){var z=T.apply(this,arguments);return z!==O&&(P=(O=z)&&styleInterpolate(_,z,R)),P}return I._value=T,I}function transition_styleTween(_,T,R){var P="style."+(_+="");if(arguments.length<2)return(P=this.tween(P))&&P._value;if(T==null)return this.tween(P,null);if(typeof T!="function")throw new Error;return this.tween(P,styleTween(_,T,R??""))}function textConstant(_){return function(){this.textContent=_}}function textFunction(_){return function(){var T=_(this);this.textContent=T??""}}function transition_text(_){return this.tween("text",typeof _=="function"?textFunction(tweenValue(this,"text",_)):textConstant(_==null?"":_+""))}function textInterpolate(_){return function(T){this.textContent=_.call(this,T)}}function textTween(_){var T,R;function P(){var O=_.apply(this,arguments);return O!==R&&(T=(R=O)&&textInterpolate(O)),T}return P._value=_,P}function transition_textTween(_){var T="text";if(arguments.length<1)return(T=this.tween(T))&&T._value;if(_==null)return this.tween(T,null);if(typeof _!="function")throw new Error;return this.tween(T,textTween(_))}function transition_transition(){for(var _=this._name,T=this._id,R=newId(),P=this._groups,O=P.length,I=0;I<O;++I)for(var z=P[I],F=z.length,G,V=0;V<F;++V)if(G=z[V]){var Z=get(G,T);schedule(G,_,R,V,z,{time:Z.time+Z.delay+Z.duration,delay:0,duration:Z.duration,ease:Z.ease})}return new Transition(P,this._parents,_,R)}function transition_end(){var _,T,R=this,P=R._id,O=R.size();return new Promise(function(I,z){var F={value:z},G={value:function(){--O===0&&I()}};R.each(function(){var V=set(this,P),Z=V.on;Z!==_&&(T=(_=Z).copy(),T._.cancel.push(F),T._.interrupt.push(F),T._.end.push(G)),V.on=T}),O===0&&I()})}var id=0;function Transition(_,T,R,P){this._groups=_,this._parents=T,this._name=R,this._id=P}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(_){return((_*=2)<=1?_*_*_:(_-=2)*_*_+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit$1(_,T){for(var R;!(R=_.__transition)||!(R=R[T]);)if(!(_=_.parentNode))throw new Error(`transition ${T} not found`);return R}function selection_transition(_){var T,R;_ instanceof Transition?(T=_._id,_=_._name):(T=newId(),(R=defaultTiming).time=now(),_=_==null?null:_+"");for(var P=this._groups,O=P.length,I=0;I<O;++I)for(var z=P[I],F=z.length,G,V=0;V<F;++V)(G=z[V])&&schedule(G,_,T,V,z,R||inherit$1(G,T));return new Transition(P,this._parents,_,T)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const pi$3=Math.PI,tau$3=2*pi$3,epsilon$2=1e-6,tauEpsilon=tau$3-epsilon$2;function append$1(_){this._+=_[0];for(let T=1,R=_.length;T<R;++T)this._+=arguments[T]+_[T]}function appendRound$1(_){let T=Math.floor(_);if(!(T>=0))throw new Error(`invalid digits: ${_}`);if(T>15)return append$1;const R=10**T;return function(P){this._+=P[0];for(let O=1,I=P.length;O<I;++O)this._+=Math.round(arguments[O]*R)/R+P[O]}}class Path{constructor(T){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=T==null?append$1:appendRound$1(T)}moveTo(T,R){this._append`M${this._x0=this._x1=+T},${this._y0=this._y1=+R}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(T,R){this._append`L${this._x1=+T},${this._y1=+R}`}quadraticCurveTo(T,R,P,O){this._append`Q${+T},${+R},${this._x1=+P},${this._y1=+O}`}bezierCurveTo(T,R,P,O,I,z){this._append`C${+T},${+R},${+P},${+O},${this._x1=+I},${this._y1=+z}`}arcTo(T,R,P,O,I){if(T=+T,R=+R,P=+P,O=+O,I=+I,I<0)throw new Error(`negative radius: ${I}`);let z=this._x1,F=this._y1,G=P-T,V=O-R,Z=z-T,Y=F-R,Q=Z*Z+Y*Y;if(this._x1===null)this._append`M${this._x1=T},${this._y1=R}`;else if(Q>epsilon$2)if(!(Math.abs(Y*G-V*Z)>epsilon$2)||!I)this._append`L${this._x1=T},${this._y1=R}`;else{let J=P-z,ee=O-F,ne=G*G+V*V,se=J*J+ee*ee,oe=Math.sqrt(ne),ae=Math.sqrt(Q),ce=I*Math.tan((pi$3-Math.acos((ne+Q-se)/(2*oe*ae)))/2),le=ce/ae,pe=ce/oe;Math.abs(le-1)>epsilon$2&&this._append`L${T+le*Z},${R+le*Y}`,this._append`A${I},${I},0,0,${+(Y*J>Z*ee)},${this._x1=T+pe*G},${this._y1=R+pe*V}`}}arc(T,R,P,O,I,z){if(T=+T,R=+R,P=+P,z=!!z,P<0)throw new Error(`negative radius: ${P}`);let F=P*Math.cos(O),G=P*Math.sin(O),V=T+F,Z=R+G,Y=1^z,Q=z?O-I:I-O;this._x1===null?this._append`M${V},${Z}`:(Math.abs(this._x1-V)>epsilon$2||Math.abs(this._y1-Z)>epsilon$2)&&this._append`L${V},${Z}`,P&&(Q<0&&(Q=Q%tau$3+tau$3),Q>tauEpsilon?this._append`A${P},${P},0,1,${Y},${T-F},${R-G}A${P},${P},0,1,${Y},${this._x1=V},${this._y1=Z}`:Q>epsilon$2&&this._append`A${P},${P},0,${+(Q>=pi$3)},${Y},${this._x1=T+P*Math.cos(I)},${this._y1=R+P*Math.sin(I)}`)}rect(T,R,P,O){this._append`M${this._x0=this._x1=+T},${this._y0=this._y1=+R}h${P=+P}v${+O}h${-P}Z`}toString(){return this._}}function pathRound(_=3){return new Path(+_)}function formatDecimal(_){return Math.abs(_=Math.round(_))>=1e21?_.toLocaleString("en").replace(/,/g,""):_.toString(10)}function formatDecimalParts(_,T){if((R=(_=T?_.toExponential(T-1):_.toExponential()).indexOf("e"))<0)return null;var R,P=_.slice(0,R);return[P.length>1?P[0]+P.slice(2):P,+_.slice(R+1)]}function exponent(_){return _=formatDecimalParts(Math.abs(_)),_?_[1]:NaN}function formatGroup(_,T){return function(R,P){for(var O=R.length,I=[],z=0,F=_[0],G=0;O>0&&F>0&&(G+F+1>P&&(F=Math.max(1,P-G)),I.push(R.substring(O-=F,O+F)),!((G+=F+1)>P));)F=_[z=(z+1)%_.length];return I.reverse().join(T)}}function formatNumerals(_){return function(T){return T.replace(/[0-9]/g,function(R){return _[+R]})}}var re$1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(_){if(!(T=re$1.exec(_)))throw new Error("invalid format: "+_);var T;return new FormatSpecifier({fill:T[1],align:T[2],sign:T[3],symbol:T[4],zero:T[5],width:T[6],comma:T[7],precision:T[8]&&T[8].slice(1),trim:T[9],type:T[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(_){this.fill=_.fill===void 0?" ":_.fill+"",this.align=_.align===void 0?">":_.align+"",this.sign=_.sign===void 0?"-":_.sign+"",this.symbol=_.symbol===void 0?"":_.symbol+"",this.zero=!!_.zero,this.width=_.width===void 0?void 0:+_.width,this.comma=!!_.comma,this.precision=_.precision===void 0?void 0:+_.precision,this.trim=!!_.trim,this.type=_.type===void 0?"":_.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(_){e:for(var T=_.length,R=1,P=-1,O;R<T;++R)switch(_[R]){case".":P=O=R;break;case"0":P===0&&(P=R),O=R;break;default:if(!+_[R])break e;P>0&&(P=0);break}return P>0?_.slice(0,P)+_.slice(O+1):_}var prefixExponent;function formatPrefixAuto(_,T){var R=formatDecimalParts(_,T);if(!R)return _+"";var P=R[0],O=R[1],I=O-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(O/3)))*3)+1,z=P.length;return I===z?P:I>z?P+new Array(I-z+1).join("0"):I>0?P.slice(0,I)+"."+P.slice(I):"0."+new Array(1-I).join("0")+formatDecimalParts(_,Math.max(0,T+I-1))[0]}function formatRounded(_,T){var R=formatDecimalParts(_,T);if(!R)return _+"";var P=R[0],O=R[1];return O<0?"0."+new Array(-O).join("0")+P:P.length>O+1?P.slice(0,O+1)+"."+P.slice(O+1):P+new Array(O-P.length+2).join("0")}const formatTypes={"%":(_,T)=>(_*100).toFixed(T),b:_=>Math.round(_).toString(2),c:_=>_+"",d:formatDecimal,e:(_,T)=>_.toExponential(T),f:(_,T)=>_.toFixed(T),g:(_,T)=>_.toPrecision(T),o:_=>Math.round(_).toString(8),p:(_,T)=>formatRounded(_*100,T),r:formatRounded,s:formatPrefixAuto,X:_=>Math.round(_).toString(16).toUpperCase(),x:_=>Math.round(_).toString(16)};function identity$5(_){return _}var map$1=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(_){var T=_.grouping===void 0||_.thousands===void 0?identity$5:formatGroup(map$1.call(_.grouping,Number),_.thousands+""),R=_.currency===void 0?"":_.currency[0]+"",P=_.currency===void 0?"":_.currency[1]+"",O=_.decimal===void 0?".":_.decimal+"",I=_.numerals===void 0?identity$5:formatNumerals(map$1.call(_.numerals,String)),z=_.percent===void 0?"%":_.percent+"",F=_.minus===void 0?"":_.minus+"",G=_.nan===void 0?"NaN":_.nan+"";function V(Y){Y=formatSpecifier(Y);var Q=Y.fill,J=Y.align,ee=Y.sign,ne=Y.symbol,se=Y.zero,oe=Y.width,ae=Y.comma,ce=Y.precision,le=Y.trim,pe=Y.type;pe==="n"?(ae=!0,pe="g"):formatTypes[pe]||(ce===void 0&&(ce=12),le=!0,pe="g"),(se||Q==="0"&&J==="=")&&(se=!0,Q="0",J="=");var me=ne==="$"?R:ne==="#"&&/[boxX]/.test(pe)?"0"+pe.toLowerCase():"",he=ne==="$"?P:/[%p]/.test(pe)?z:"",fe=formatTypes[pe],de=/[defgprs%]/.test(pe);ce=ce===void 0?6:/[gprs]/.test(pe)?Math.max(1,Math.min(21,ce)):Math.max(0,Math.min(20,ce));function be(ye){var Ce=me,ve=he,Ee,we,ge;if(pe==="c")ve=fe(ye)+ve,ye="";else{ye=+ye;var Se=ye<0||1/ye<0;if(ye=isNaN(ye)?G:fe(Math.abs(ye),ce),le&&(ye=formatTrim(ye)),Se&&+ye==0&&ee!=="+"&&(Se=!1),Ce=(Se?ee==="("?ee:F:ee==="-"||ee==="("?"":ee)+Ce,ve=(pe==="s"?prefixes[8+prefixExponent/3]:"")+ve+(Se&&ee==="("?")":""),de){for(Ee=-1,we=ye.length;++Ee<we;)if(ge=ye.charCodeAt(Ee),48>ge||ge>57){ve=(ge===46?O+ye.slice(Ee+1):ye.slice(Ee))+ve,ye=ye.slice(0,Ee);break}}}ae&&!se&&(ye=T(ye,1/0));var Te=Ce.length+ye.length+ve.length,Ae=Te<oe?new Array(oe-Te+1).join(Q):"";switch(ae&&se&&(ye=T(Ae+ye,Ae.length?oe-ve.length:1/0),Ae=""),J){case"<":ye=Ce+ye+ve+Ae;break;case"=":ye=Ce+Ae+ye+ve;break;case"^":ye=Ae.slice(0,Te=Ae.length>>1)+Ce+ye+ve+Ae.slice(Te);break;default:ye=Ae+Ce+ye+ve;break}return I(ye)}return be.toString=function(){return Y+""},be}function Z(Y,Q){var J=V((Y=formatSpecifier(Y),Y.type="f",Y)),ee=Math.max(-8,Math.min(8,Math.floor(exponent(Q)/3)))*3,ne=Math.pow(10,-ee),se=prefixes[8+ee/3];return function(oe){return J(ne*oe)+se}}return{format:V,formatPrefix:Z}}var locale$1,format$1,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(_){return locale$1=formatLocale$1(_),format$1=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(_){return Math.max(0,-exponent(Math.abs(_)))}function precisionPrefix(_,T){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(T)/3)))*3-exponent(Math.abs(_)))}function precisionRound(_,T){return _=Math.abs(_),T=Math.abs(T)-_,Math.max(0,exponent(T)-exponent(_))+1}var epsilon$1=1e-6,epsilon2=1e-12,pi$2=Math.PI,halfPi=pi$2/2,quarterPi=pi$2/4,tau$2=pi$2*2,degrees=180/pi$2,radians$1=pi$2/180,abs=Math.abs,atan=Math.atan,atan2=Math.atan2,cos$1=Math.cos,exp=Math.exp,log$1=Math.log,pow$1=Math.pow,sin$1=Math.sin,sign$1=Math.sign||function(_){return _>0?1:_<0?-1:0},sqrt$1=Math.sqrt,tan=Math.tan;function acos(_){return _>1?0:_<-1?pi$2:Math.acos(_)}function asin(_){return _>1?halfPi:_<-1?-halfPi:Math.asin(_)}function noop$1(){}function streamGeometry(_,T){_&&streamGeometryType.hasOwnProperty(_.type)&&streamGeometryType[_.type](_,T)}var streamObjectType={Feature:function(_,T){streamGeometry(_.geometry,T)},FeatureCollection:function(_,T){for(var R=_.features,P=-1,O=R.length;++P<O;)streamGeometry(R[P].geometry,T)}},streamGeometryType={Sphere:function(_,T){T.sphere()},Point:function(_,T){_=_.coordinates,T.point(_[0],_[1],_[2])},MultiPoint:function(_,T){for(var R=_.coordinates,P=-1,O=R.length;++P<O;)_=R[P],T.point(_[0],_[1],_[2])},LineString:function(_,T){streamLine(_.coordinates,T,0)},MultiLineString:function(_,T){for(var R=_.coordinates,P=-1,O=R.length;++P<O;)streamLine(R[P],T,0)},Polygon:function(_,T){streamPolygon(_.coordinates,T)},MultiPolygon:function(_,T){for(var R=_.coordinates,P=-1,O=R.length;++P<O;)streamPolygon(R[P],T)},GeometryCollection:function(_,T){for(var R=_.geometries,P=-1,O=R.length;++P<O;)streamGeometry(R[P],T)}};function streamLine(_,T,R){var P=-1,O=_.length-R,I;for(T.lineStart();++P<O;)I=_[P],T.point(I[0],I[1],I[2]);T.lineEnd()}function streamPolygon(_,T){var R=-1,P=_.length;for(T.polygonStart();++R<P;)streamLine(_[R],T,1);T.polygonEnd()}function geoStream(_,T){_&&streamObjectType.hasOwnProperty(_.type)?streamObjectType[_.type](_,T):streamGeometry(_,T)}function spherical(_){return[atan2(_[1],_[0]),asin(_[2])]}function cartesian(_){var T=_[0],R=_[1],P=cos$1(R);return[P*cos$1(T),P*sin$1(T),sin$1(R)]}function cartesianDot(_,T){return _[0]*T[0]+_[1]*T[1]+_[2]*T[2]}function cartesianCross(_,T){return[_[1]*T[2]-_[2]*T[1],_[2]*T[0]-_[0]*T[2],_[0]*T[1]-_[1]*T[0]]}function cartesianAddInPlace(_,T){_[0]+=T[0],_[1]+=T[1],_[2]+=T[2]}function cartesianScale(_,T){return[_[0]*T,_[1]*T,_[2]*T]}function cartesianNormalizeInPlace(_){var T=sqrt$1(_[0]*_[0]+_[1]*_[1]+_[2]*_[2]);_[0]/=T,_[1]/=T,_[2]/=T}function compose(_,T){function R(P,O){return P=_(P,O),T(P[0],P[1])}return _.invert&&T.invert&&(R.invert=function(P,O){return P=T.invert(P,O),P&&_.invert(P[0],P[1])}),R}function rotationIdentity(_,T){return abs(_)>pi$2&&(_-=Math.round(_/tau$2)*tau$2),[_,T]}rotationIdentity.invert=rotationIdentity;function rotateRadians(_,T,R){return(_%=tau$2)?T||R?compose(rotationLambda(_),rotationPhiGamma(T,R)):rotationLambda(_):T||R?rotationPhiGamma(T,R):rotationIdentity}function forwardRotationLambda(_){return function(T,R){return T+=_,abs(T)>pi$2&&(T-=Math.round(T/tau$2)*tau$2),[T,R]}}function rotationLambda(_){var T=forwardRotationLambda(_);return T.invert=forwardRotationLambda(-_),T}function rotationPhiGamma(_,T){var R=cos$1(_),P=sin$1(_),O=cos$1(T),I=sin$1(T);function z(F,G){var V=cos$1(G),Z=cos$1(F)*V,Y=sin$1(F)*V,Q=sin$1(G),J=Q*R+Z*P;return[atan2(Y*O-J*I,Z*R-Q*P),asin(J*O+Y*I)]}return z.invert=function(F,G){var V=cos$1(G),Z=cos$1(F)*V,Y=sin$1(F)*V,Q=sin$1(G),J=Q*O-Y*I;return[atan2(Y*O+Q*I,Z*R+J*P),asin(J*R-Z*P)]},z}function rotation(_){_=rotateRadians(_[0]*radians$1,_[1]*radians$1,_.length>2?_[2]*radians$1:0);function T(R){return R=_(R[0]*radians$1,R[1]*radians$1),R[0]*=degrees,R[1]*=degrees,R}return T.invert=function(R){return R=_.invert(R[0]*radians$1,R[1]*radians$1),R[0]*=degrees,R[1]*=degrees,R},T}function circleStream(_,T,R,P,O,I){if(R){var z=cos$1(T),F=sin$1(T),G=P*R;O==null?(O=T+P*tau$2,I=T-G/2):(O=circleRadius(z,O),I=circleRadius(z,I),(P>0?O<I:O>I)&&(O+=P*tau$2));for(var V,Z=O;P>0?Z>I:Z<I;Z-=G)V=spherical([z,-F*cos$1(Z),-F*sin$1(Z)]),_.point(V[0],V[1])}}function circleRadius(_,T){T=cartesian(T),T[0]-=_,cartesianNormalizeInPlace(T);var R=acos(-T[1]);return((-T[2]<0?-R:R)+tau$2-epsilon$1)%tau$2}function clipBuffer(){var _=[],T;return{point:function(R,P,O){T.push([R,P,O])},lineStart:function(){_.push(T=[])},lineEnd:noop$1,rejoin:function(){_.length>1&&_.push(_.pop().concat(_.shift()))},result:function(){var R=_;return _=[],T=null,R}}}function pointEqual(_,T){return abs(_[0]-T[0])<epsilon$1&&abs(_[1]-T[1])<epsilon$1}function Intersection(_,T,R,P){this.x=_,this.z=T,this.o=R,this.e=P,this.v=!1,this.n=this.p=null}function clipRejoin(_,T,R,P,O){var I=[],z=[],F,G;if(_.forEach(function(ee){if(!((ne=ee.length-1)<=0)){var ne,se=ee[0],oe=ee[ne],ae;if(pointEqual(se,oe)){if(!se[2]&&!oe[2]){for(O.lineStart(),F=0;F<ne;++F)O.point((se=ee[F])[0],se[1]);O.lineEnd();return}oe[0]+=2*epsilon$1}I.push(ae=new Intersection(se,ee,null,!0)),z.push(ae.o=new Intersection(se,null,ae,!1)),I.push(ae=new Intersection(oe,ee,null,!1)),z.push(ae.o=new Intersection(oe,null,ae,!0))}}),!!I.length){for(z.sort(T),link$1(I),link$1(z),F=0,G=z.length;F<G;++F)z[F].e=R=!R;for(var V=I[0],Z,Y;;){for(var Q=V,J=!0;Q.v;)if((Q=Q.n)===V)return;Z=Q.z,O.lineStart();do{if(Q.v=Q.o.v=!0,Q.e){if(J)for(F=0,G=Z.length;F<G;++F)O.point((Y=Z[F])[0],Y[1]);else P(Q.x,Q.n.x,1,O);Q=Q.n}else{if(J)for(Z=Q.p.z,F=Z.length-1;F>=0;--F)O.point((Y=Z[F])[0],Y[1]);else P(Q.x,Q.p.x,-1,O);Q=Q.p}Q=Q.o,Z=Q.z,J=!J}while(!Q.v);O.lineEnd()}}}function link$1(_){if(T=_.length){for(var T,R=0,P=_[0],O;++R<T;)P.n=O=_[R],O.p=P,P=O;P.n=O=_[0],O.p=P}}function longitude(_){return abs(_[0])<=pi$2?_[0]:sign$1(_[0])*((abs(_[0])+pi$2)%tau$2-pi$2)}function polygonContains(_,T){var R=longitude(T),P=T[1],O=sin$1(P),I=[sin$1(R),-cos$1(R),0],z=0,F=0,G=new Adder;O===1?P=halfPi+epsilon$1:O===-1&&(P=-halfPi-epsilon$1);for(var V=0,Z=_.length;V<Z;++V)if(Q=(Y=_[V]).length)for(var Y,Q,J=Y[Q-1],ee=longitude(J),ne=J[1]/2+quarterPi,se=sin$1(ne),oe=cos$1(ne),ae=0;ae<Q;++ae,ee=le,se=me,oe=he,J=ce){var ce=Y[ae],le=longitude(ce),pe=ce[1]/2+quarterPi,me=sin$1(pe),he=cos$1(pe),fe=le-ee,de=fe>=0?1:-1,be=de*fe,ye=be>pi$2,Ce=se*me;if(G.add(atan2(Ce*de*sin$1(be),oe*he+Ce*cos$1(be))),z+=ye?fe+de*tau$2:fe,ye^ee>=R^le>=R){var ve=cartesianCross(cartesian(J),cartesian(ce));cartesianNormalizeInPlace(ve);var Ee=cartesianCross(I,ve);cartesianNormalizeInPlace(Ee);var we=(ye^fe>=0?-1:1)*asin(Ee[2]);(P>we||P===we&&(ve[0]||ve[1]))&&(F+=ye^fe>=0?1:-1)}}return(z<-epsilon$1||z<epsilon$1&&G<-epsilon2)^F&1}function clip(_,T,R,P){return function(O){var I=T(O),z=clipBuffer(),F=T(z),G=!1,V,Z,Y,Q={point:J,lineStart:ne,lineEnd:se,polygonStart:function(){Q.point=oe,Q.lineStart=ae,Q.lineEnd=ce,Z=[],V=[]},polygonEnd:function(){Q.point=J,Q.lineStart=ne,Q.lineEnd=se,Z=merge(Z);var le=polygonContains(V,P);Z.length?(G||(O.polygonStart(),G=!0),clipRejoin(Z,compareIntersection,le,R,O)):le&&(G||(O.polygonStart(),G=!0),O.lineStart(),R(null,null,1,O),O.lineEnd()),G&&(O.polygonEnd(),G=!1),Z=V=null},sphere:function(){O.polygonStart(),O.lineStart(),R(null,null,1,O),O.lineEnd(),O.polygonEnd()}};function J(le,pe){_(le,pe)&&O.point(le,pe)}function ee(le,pe){I.point(le,pe)}function ne(){Q.point=ee,I.lineStart()}function se(){Q.point=J,I.lineEnd()}function oe(le,pe){Y.push([le,pe]),F.point(le,pe)}function ae(){F.lineStart(),Y=[]}function ce(){oe(Y[0][0],Y[0][1]),F.lineEnd();var le=F.clean(),pe=z.result(),me,he=pe.length,fe,de,be;if(Y.pop(),V.push(Y),Y=null,!!he){if(le&1){if(de=pe[0],(fe=de.length-1)>0){for(G||(O.polygonStart(),G=!0),O.lineStart(),me=0;me<fe;++me)O.point((be=de[me])[0],be[1]);O.lineEnd()}return}he>1&&le&2&&pe.push(pe.pop().concat(pe.shift())),Z.push(pe.filter(validSegment))}}return Q}}function validSegment(_){return _.length>1}function compareIntersection(_,T){return((_=_.x)[0]<0?_[1]-halfPi-epsilon$1:halfPi-_[1])-((T=T.x)[0]<0?T[1]-halfPi-epsilon$1:halfPi-T[1])}const clipAntimeridian=clip(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi$2,-halfPi]);function clipAntimeridianLine(_){var T=NaN,R=NaN,P=NaN,O;return{lineStart:function(){_.lineStart(),O=1},point:function(I,z){var F=I>0?pi$2:-pi$2,G=abs(I-T);abs(G-pi$2)<epsilon$1?(_.point(T,R=(R+z)/2>0?halfPi:-halfPi),_.point(P,R),_.lineEnd(),_.lineStart(),_.point(F,R),_.point(I,R),O=0):P!==F&&G>=pi$2&&(abs(T-P)<epsilon$1&&(T-=P*epsilon$1),abs(I-F)<epsilon$1&&(I-=F*epsilon$1),R=clipAntimeridianIntersect(T,R,I,z),_.point(P,R),_.lineEnd(),_.lineStart(),_.point(F,R),O=0),_.point(T=I,R=z),P=F},lineEnd:function(){_.lineEnd(),T=R=NaN},clean:function(){return 2-O}}}function clipAntimeridianIntersect(_,T,R,P){var O,I,z=sin$1(_-R);return abs(z)>epsilon$1?atan((sin$1(T)*(I=cos$1(P))*sin$1(R)-sin$1(P)*(O=cos$1(T))*sin$1(_))/(O*I*z)):(T+P)/2}function clipAntimeridianInterpolate(_,T,R,P){var O;if(_==null)O=R*halfPi,P.point(-pi$2,O),P.point(0,O),P.point(pi$2,O),P.point(pi$2,0),P.point(pi$2,-O),P.point(0,-O),P.point(-pi$2,-O),P.point(-pi$2,0),P.point(-pi$2,O);else if(abs(_[0]-T[0])>epsilon$1){var I=_[0]<T[0]?pi$2:-pi$2;O=R*I/2,P.point(-I,O),P.point(0,O),P.point(I,O)}else P.point(T[0],T[1])}function clipCircle(_){var T=cos$1(_),R=2*radians$1,P=T>0,O=abs(T)>epsilon$1;function I(Z,Y,Q,J){circleStream(J,_,R,Q,Z,Y)}function z(Z,Y){return cos$1(Z)*cos$1(Y)>T}function F(Z){var Y,Q,J,ee,ne;return{lineStart:function(){ee=J=!1,ne=1},point:function(se,oe){var ae=[se,oe],ce,le=z(se,oe),pe=P?le?0:V(se,oe):le?V(se+(se<0?pi$2:-pi$2),oe):0;if(!Y&&(ee=J=le)&&Z.lineStart(),le!==J&&(ce=G(Y,ae),(!ce||pointEqual(Y,ce)||pointEqual(ae,ce))&&(ae[2]=1)),le!==J)ne=0,le?(Z.lineStart(),ce=G(ae,Y),Z.point(ce[0],ce[1])):(ce=G(Y,ae),Z.point(ce[0],ce[1],2),Z.lineEnd()),Y=ce;else if(O&&Y&&P^le){var me;!(pe&Q)&&(me=G(ae,Y,!0))&&(ne=0,P?(Z.lineStart(),Z.point(me[0][0],me[0][1]),Z.point(me[1][0],me[1][1]),Z.lineEnd()):(Z.point(me[1][0],me[1][1]),Z.lineEnd(),Z.lineStart(),Z.point(me[0][0],me[0][1],3)))}le&&(!Y||!pointEqual(Y,ae))&&Z.point(ae[0],ae[1]),Y=ae,J=le,Q=pe},lineEnd:function(){J&&Z.lineEnd(),Y=null},clean:function(){return ne|(ee&&J)<<1}}}function G(Z,Y,Q){var J=cartesian(Z),ee=cartesian(Y),ne=[1,0,0],se=cartesianCross(J,ee),oe=cartesianDot(se,se),ae=se[0],ce=oe-ae*ae;if(!ce)return!Q&&Z;var le=T*oe/ce,pe=-T*ae/ce,me=cartesianCross(ne,se),he=cartesianScale(ne,le),fe=cartesianScale(se,pe);cartesianAddInPlace(he,fe);var de=me,be=cartesianDot(he,de),ye=cartesianDot(de,de),Ce=be*be-ye*(cartesianDot(he,he)-1);if(!(Ce<0)){var ve=sqrt$1(Ce),Ee=cartesianScale(de,(-be-ve)/ye);if(cartesianAddInPlace(Ee,he),Ee=spherical(Ee),!Q)return Ee;var we=Z[0],ge=Y[0],Se=Z[1],Te=Y[1],Ae;ge<we&&(Ae=we,we=ge,ge=Ae);var Ue=ge-we,_e=abs(Ue-pi$2)<epsilon$1,$e=_e||Ue<epsilon$1;if(!_e&&Te<Se&&(Ae=Se,Se=Te,Te=Ae),$e?_e?Se+Te>0^Ee[1]<(abs(Ee[0]-we)<epsilon$1?Se:Te):Se<=Ee[1]&&Ee[1]<=Te:Ue>pi$2^(we<=Ee[0]&&Ee[0]<=ge)){var Ne=cartesianScale(de,(-be+ve)/ye);return cartesianAddInPlace(Ne,he),[Ee,spherical(Ne)]}}}function V(Z,Y){var Q=P?_:pi$2-_,J=0;return Z<-Q?J|=1:Z>Q&&(J|=2),Y<-Q?J|=4:Y>Q&&(J|=8),J}return clip(z,F,I,P?[0,-_]:[-pi$2,_-pi$2])}function clipLine(_,T,R,P,O,I){var z=_[0],F=_[1],G=T[0],V=T[1],Z=0,Y=1,Q=G-z,J=V-F,ee;if(ee=R-z,!(!Q&&ee>0)){if(ee/=Q,Q<0){if(ee<Z)return;ee<Y&&(Y=ee)}else if(Q>0){if(ee>Y)return;ee>Z&&(Z=ee)}if(ee=O-z,!(!Q&&ee<0)){if(ee/=Q,Q<0){if(ee>Y)return;ee>Z&&(Z=ee)}else if(Q>0){if(ee<Z)return;ee<Y&&(Y=ee)}if(ee=P-F,!(!J&&ee>0)){if(ee/=J,J<0){if(ee<Z)return;ee<Y&&(Y=ee)}else if(J>0){if(ee>Y)return;ee>Z&&(Z=ee)}if(ee=I-F,!(!J&&ee<0)){if(ee/=J,J<0){if(ee>Y)return;ee>Z&&(Z=ee)}else if(J>0){if(ee<Z)return;ee<Y&&(Y=ee)}return Z>0&&(_[0]=z+Z*Q,_[1]=F+Z*J),Y<1&&(T[0]=z+Y*Q,T[1]=F+Y*J),!0}}}}}var clipMax=1e9,clipMin=-clipMax;function clipRectangle(_,T,R,P){function O(V,Z){return _<=V&&V<=R&&T<=Z&&Z<=P}function I(V,Z,Y,Q){var J=0,ee=0;if(V==null||(J=z(V,Y))!==(ee=z(Z,Y))||G(V,Z)<0^Y>0)do Q.point(J===0||J===3?_:R,J>1?P:T);while((J=(J+Y+4)%4)!==ee);else Q.point(Z[0],Z[1])}function z(V,Z){return abs(V[0]-_)<epsilon$1?Z>0?0:3:abs(V[0]-R)<epsilon$1?Z>0?2:1:abs(V[1]-T)<epsilon$1?Z>0?1:0:Z>0?3:2}function F(V,Z){return G(V.x,Z.x)}function G(V,Z){var Y=z(V,1),Q=z(Z,1);return Y!==Q?Y-Q:Y===0?Z[1]-V[1]:Y===1?V[0]-Z[0]:Y===2?V[1]-Z[1]:Z[0]-V[0]}return function(V){var Z=V,Y=clipBuffer(),Q,J,ee,ne,se,oe,ae,ce,le,pe,me,he={point:fe,lineStart:Ce,lineEnd:ve,polygonStart:be,polygonEnd:ye};function fe(we,ge){O(we,ge)&&Z.point(we,ge)}function de(){for(var we=0,ge=0,Se=J.length;ge<Se;++ge)for(var Te=J[ge],Ae=1,Ue=Te.length,_e=Te[0],$e,Ne,Be=_e[0],Ze=_e[1];Ae<Ue;++Ae)$e=Be,Ne=Ze,_e=Te[Ae],Be=_e[0],Ze=_e[1],Ne<=P?Ze>P&&(Be-$e)*(P-Ne)>(Ze-Ne)*(_-$e)&&++we:Ze<=P&&(Be-$e)*(P-Ne)<(Ze-Ne)*(_-$e)&&--we;return we}function be(){Z=Y,Q=[],J=[],me=!0}function ye(){var we=de(),ge=me&&we,Se=(Q=merge(Q)).length;(ge||Se)&&(V.polygonStart(),ge&&(V.lineStart(),I(null,null,1,V),V.lineEnd()),Se&&clipRejoin(Q,F,we,I,V),V.polygonEnd()),Z=V,Q=J=ee=null}function Ce(){he.point=Ee,J&&J.push(ee=[]),pe=!0,le=!1,ae=ce=NaN}function ve(){Q&&(Ee(ne,se),oe&&le&&Y.rejoin(),Q.push(Y.result())),he.point=fe,le&&Z.lineEnd()}function Ee(we,ge){var Se=O(we,ge);if(J&&ee.push([we,ge]),pe)ne=we,se=ge,oe=Se,pe=!1,Se&&(Z.lineStart(),Z.point(we,ge));else if(Se&&le)Z.point(we,ge);else{var Te=[ae=Math.max(clipMin,Math.min(clipMax,ae)),ce=Math.max(clipMin,Math.min(clipMax,ce))],Ae=[we=Math.max(clipMin,Math.min(clipMax,we)),ge=Math.max(clipMin,Math.min(clipMax,ge))];clipLine(Te,Ae,_,T,R,P)?(le||(Z.lineStart(),Z.point(Te[0],Te[1])),Z.point(Ae[0],Ae[1]),Se||Z.lineEnd(),me=!1):Se&&(Z.lineStart(),Z.point(we,ge),me=!1)}ae=we,ce=ge,le=Se}return he}}const identity$4=_=>_;var areaSum=new Adder,areaRingSum=new Adder,x00$2,y00$2,x0$3,y0$3,areaStream={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop$1,areaSum.add(abs(areaRingSum)),areaRingSum=new Adder},result:function(){var _=areaSum/2;return areaSum=new Adder,_}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(_,T){areaStream.point=areaPoint,x00$2=x0$3=_,y00$2=y0$3=T}function areaPoint(_,T){areaRingSum.add(y0$3*_-x0$3*T),x0$3=_,y0$3=T}function areaRingEnd(){areaPoint(x00$2,y00$2)}var x0$2=1/0,y0$2=x0$2,x1=-x0$2,y1=x1,boundsStream={point:boundsPoint,lineStart:noop$1,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1,result:function(){var _=[[x0$2,y0$2],[x1,y1]];return x1=y1=-(y0$2=x0$2=1/0),_}};function boundsPoint(_,T){_<x0$2&&(x0$2=_),_>x1&&(x1=_),T<y0$2&&(y0$2=T),T>y1&&(y1=T)}var X0=0,Y0=0,Z0=0,X1=0,Y1=0,Z1=0,X2=0,Y2=0,Z2=0,x00$1,y00$1,x0$1,y0$1,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var _=Z2?[X2/Z2,Y2/Z2]:Z1?[X1/Z1,Y1/Z1]:Z0?[X0/Z0,Y0/Z0]:[NaN,NaN];return X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,_}};function centroidPoint(_,T){X0+=_,Y0+=T,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(_,T){centroidStream.point=centroidPointLine,centroidPoint(x0$1=_,y0$1=T)}function centroidPointLine(_,T){var R=_-x0$1,P=T-y0$1,O=sqrt$1(R*R+P*P);X1+=O*(x0$1+_)/2,Y1+=O*(y0$1+T)/2,Z1+=O,centroidPoint(x0$1=_,y0$1=T)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(_,T){centroidStream.point=centroidPointRing,centroidPoint(x00$1=x0$1=_,y00$1=y0$1=T)}function centroidPointRing(_,T){var R=_-x0$1,P=T-y0$1,O=sqrt$1(R*R+P*P);X1+=O*(x0$1+_)/2,Y1+=O*(y0$1+T)/2,Z1+=O,O=y0$1*_-x0$1*T,X2+=O*(x0$1+_),Y2+=O*(y0$1+T),Z2+=O*3,centroidPoint(x0$1=_,y0$1=T)}function PathContext(_){this._context=_}PathContext.prototype={_radius:4.5,pointRadius:function(_){return this._radius=_,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(_,T){switch(this._point){case 0:{this._context.moveTo(_,T),this._point=1;break}case 1:{this._context.lineTo(_,T);break}default:{this._context.moveTo(_+this._radius,T),this._context.arc(_,T,this._radius,0,tau$2);break}}},result:noop$1};var lengthSum=new Adder,lengthRing,x00,y00,x0,y0,lengthStream={point:noop$1,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(x00,y00),lengthStream.point=noop$1},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var _=+lengthSum;return lengthSum=new Adder,_}};function lengthPointFirst(_,T){lengthStream.point=lengthPoint,x00=x0=_,y00=y0=T}function lengthPoint(_,T){x0-=_,y0-=T,lengthSum.add(sqrt$1(x0*x0+y0*y0)),x0=_,y0=T}let cacheDigits,cacheAppend,cacheRadius,cacheCircle;class PathString{constructor(T){this._append=T==null?append:appendRound(T),this._radius=4.5,this._=""}pointRadius(T){return this._radius=+T,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(T,R){switch(this._point){case 0:{this._append`M${T},${R}`,this._point=1;break}case 1:{this._append`L${T},${R}`;break}default:{if(this._append`M${T},${R}`,this._radius!==cacheRadius||this._append!==cacheAppend){const P=this._radius,O=this._;this._="",this._append`m0,${P}a${P},${P} 0 1,1 0,${-2*P}a${P},${P} 0 1,1 0,${2*P}z`,cacheRadius=P,cacheAppend=this._append,cacheCircle=this._,this._=O}this._+=cacheCircle;break}}}result(){const T=this._;return this._="",T.length?T:null}}function append(_){let T=1;this._+=_[0];for(const R=_.length;T<R;++T)this._+=arguments[T]+_[T]}function appendRound(_){const T=Math.floor(_);if(!(T>=0))throw new RangeError(`invalid digits: ${_}`);if(T>15)return append;if(T!==cacheDigits){const R=10**T;cacheDigits=T,cacheAppend=function(O){let I=1;this._+=O[0];for(const z=O.length;I<z;++I)this._+=Math.round(arguments[I]*R)/R+O[I]}}return cacheAppend}function geoPath(_,T){let R=3,P=4.5,O,I;function z(F){return F&&(typeof P=="function"&&I.pointRadius(+P.apply(this,arguments)),geoStream(F,O(I))),I.result()}return z.area=function(F){return geoStream(F,O(areaStream)),areaStream.result()},z.measure=function(F){return geoStream(F,O(lengthStream)),lengthStream.result()},z.bounds=function(F){return geoStream(F,O(boundsStream)),boundsStream.result()},z.centroid=function(F){return geoStream(F,O(centroidStream)),centroidStream.result()},z.projection=function(F){return arguments.length?(O=F==null?(_=null,identity$4):(_=F).stream,z):_},z.context=function(F){return arguments.length?(I=F==null?(T=null,new PathString(R)):new PathContext(T=F),typeof P!="function"&&I.pointRadius(P),z):T},z.pointRadius=function(F){return arguments.length?(P=typeof F=="function"?F:(I.pointRadius(+F),+F),z):P},z.digits=function(F){if(!arguments.length)return R;if(F==null)R=null;else{const G=Math.floor(F);if(!(G>=0))throw new RangeError(`invalid digits: ${F}`);R=G}return T===null&&(I=new PathString(R)),z},z.projection(_).digits(R).context(T)}function geoTransform(_){return{stream:transformer$2(_)}}function transformer$2(_){return function(T){var R=new TransformStream;for(var P in _)R[P]=_[P];return R.stream=T,R}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(_,T){this.stream.point(_,T)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fit(_,T,R){var P=_.clipExtent&&_.clipExtent();return _.scale(150).translate([0,0]),P!=null&&_.clipExtent(null),geoStream(R,_.stream(boundsStream)),T(boundsStream.result()),P!=null&&_.clipExtent(P),_}function fitExtent(_,T,R){return fit(_,function(P){var O=T[1][0]-T[0][0],I=T[1][1]-T[0][1],z=Math.min(O/(P[1][0]-P[0][0]),I/(P[1][1]-P[0][1])),F=+T[0][0]+(O-z*(P[1][0]+P[0][0]))/2,G=+T[0][1]+(I-z*(P[1][1]+P[0][1]))/2;_.scale(150*z).translate([F,G])},R)}function fitSize(_,T,R){return fitExtent(_,[[0,0],T],R)}function fitWidth(_,T,R){return fit(_,function(P){var O=+T,I=O/(P[1][0]-P[0][0]),z=(O-I*(P[1][0]+P[0][0]))/2,F=-I*P[0][1];_.scale(150*I).translate([z,F])},R)}function fitHeight(_,T,R){return fit(_,function(P){var O=+T,I=O/(P[1][1]-P[0][1]),z=-I*P[0][0],F=(O-I*(P[1][1]+P[0][1]))/2;_.scale(150*I).translate([z,F])},R)}var maxDepth=16,cosMinDistance=cos$1(30*radians$1);function resample(_,T){return+T?resample$1(_,T):resampleNone(_)}function resampleNone(_){return transformer$2({point:function(T,R){T=_(T,R),this.stream.point(T[0],T[1])}})}function resample$1(_,T){function R(P,O,I,z,F,G,V,Z,Y,Q,J,ee,ne,se){var oe=V-P,ae=Z-O,ce=oe*oe+ae*ae;if(ce>4*T&&ne--){var le=z+Q,pe=F+J,me=G+ee,he=sqrt$1(le*le+pe*pe+me*me),fe=asin(me/=he),de=abs(abs(me)-1)<epsilon$1||abs(I-Y)<epsilon$1?(I+Y)/2:atan2(pe,le),be=_(de,fe),ye=be[0],Ce=be[1],ve=ye-P,Ee=Ce-O,we=ae*ve-oe*Ee;(we*we/ce>T||abs((oe*ve+ae*Ee)/ce-.5)>.3||z*Q+F*J+G*ee<cosMinDistance)&&(R(P,O,I,z,F,G,ye,Ce,de,le/=he,pe/=he,me,ne,se),se.point(ye,Ce),R(ye,Ce,de,le,pe,me,V,Z,Y,Q,J,ee,ne,se))}}return function(P){var O,I,z,F,G,V,Z,Y,Q,J,ee,ne,se={point:oe,lineStart:ae,lineEnd:le,polygonStart:function(){P.polygonStart(),se.lineStart=pe},polygonEnd:function(){P.polygonEnd(),se.lineStart=ae}};function oe(fe,de){fe=_(fe,de),P.point(fe[0],fe[1])}function ae(){Y=NaN,se.point=ce,P.lineStart()}function ce(fe,de){var be=cartesian([fe,de]),ye=_(fe,de);R(Y,Q,Z,J,ee,ne,Y=ye[0],Q=ye[1],Z=fe,J=be[0],ee=be[1],ne=be[2],maxDepth,P),P.point(Y,Q)}function le(){se.point=oe,P.lineEnd()}function pe(){ae(),se.point=me,se.lineEnd=he}function me(fe,de){ce(O=fe,de),I=Y,z=Q,F=J,G=ee,V=ne,se.point=ce}function he(){R(Y,Q,Z,J,ee,ne,I,z,O,F,G,V,maxDepth,P),se.lineEnd=le,le()}return se}}var transformRadians=transformer$2({point:function(_,T){this.stream.point(_*radians$1,T*radians$1)}});function transformRotate(_){return transformer$2({point:function(T,R){var P=_(T,R);return this.stream.point(P[0],P[1])}})}function scaleTranslate(_,T,R,P,O){function I(z,F){return z*=P,F*=O,[T+_*z,R-_*F]}return I.invert=function(z,F){return[(z-T)/_*P,(R-F)/_*O]},I}function scaleTranslateRotate(_,T,R,P,O,I){if(!I)return scaleTranslate(_,T,R,P,O);var z=cos$1(I),F=sin$1(I),G=z*_,V=F*_,Z=z/_,Y=F/_,Q=(F*R-z*T)/_,J=(F*T+z*R)/_;function ee(ne,se){return ne*=P,se*=O,[G*ne-V*se+T,R-V*ne-G*se]}return ee.invert=function(ne,se){return[P*(Z*ne-Y*se+Q),O*(J-Y*ne-Z*se)]},ee}function projection$1(_){return projectionMutator(function(){return _})()}function projectionMutator(_){var T,R=150,P=480,O=250,I=0,z=0,F=0,G=0,V=0,Z,Y=0,Q=1,J=1,ee=null,ne=clipAntimeridian,se=null,oe,ae,ce,le=identity$4,pe=.5,me,he,fe,de,be;function ye(we){return fe(we[0]*radians$1,we[1]*radians$1)}function Ce(we){return we=fe.invert(we[0],we[1]),we&&[we[0]*degrees,we[1]*degrees]}ye.stream=function(we){return de&&be===we?de:de=transformRadians(transformRotate(Z)(ne(me(le(be=we)))))},ye.preclip=function(we){return arguments.length?(ne=we,ee=void 0,Ee()):ne},ye.postclip=function(we){return arguments.length?(le=we,se=oe=ae=ce=null,Ee()):le},ye.clipAngle=function(we){return arguments.length?(ne=+we?clipCircle(ee=we*radians$1):(ee=null,clipAntimeridian),Ee()):ee*degrees},ye.clipExtent=function(we){return arguments.length?(le=we==null?(se=oe=ae=ce=null,identity$4):clipRectangle(se=+we[0][0],oe=+we[0][1],ae=+we[1][0],ce=+we[1][1]),Ee()):se==null?null:[[se,oe],[ae,ce]]},ye.scale=function(we){return arguments.length?(R=+we,ve()):R},ye.translate=function(we){return arguments.length?(P=+we[0],O=+we[1],ve()):[P,O]},ye.center=function(we){return arguments.length?(I=we[0]%360*radians$1,z=we[1]%360*radians$1,ve()):[I*degrees,z*degrees]},ye.rotate=function(we){return arguments.length?(F=we[0]%360*radians$1,G=we[1]%360*radians$1,V=we.length>2?we[2]%360*radians$1:0,ve()):[F*degrees,G*degrees,V*degrees]},ye.angle=function(we){return arguments.length?(Y=we%360*radians$1,ve()):Y*degrees},ye.reflectX=function(we){return arguments.length?(Q=we?-1:1,ve()):Q<0},ye.reflectY=function(we){return arguments.length?(J=we?-1:1,ve()):J<0},ye.precision=function(we){return arguments.length?(me=resample(he,pe=we*we),Ee()):sqrt$1(pe)},ye.fitExtent=function(we,ge){return fitExtent(ye,we,ge)},ye.fitSize=function(we,ge){return fitSize(ye,we,ge)},ye.fitWidth=function(we,ge){return fitWidth(ye,we,ge)},ye.fitHeight=function(we,ge){return fitHeight(ye,we,ge)};function ve(){var we=scaleTranslateRotate(R,0,0,Q,J,Y).apply(null,T(I,z)),ge=scaleTranslateRotate(R,P-we[0],O-we[1],Q,J,Y);return Z=rotateRadians(F,G,V),he=compose(T,ge),fe=compose(Z,he),me=resample(he,pe),Ee()}function Ee(){return de=be=null,ye}return function(){return T=_.apply(this,arguments),ye.invert=T.invert&&Ce,ve()}}function conicProjection$1(_){var T=0,R=pi$2/3,P=projectionMutator(_),O=P(T,R);return O.parallels=function(I){return arguments.length?P(T=I[0]*radians$1,R=I[1]*radians$1):[T*degrees,R*degrees]},O}function cylindricalEqualAreaRaw(_){var T=cos$1(_);function R(P,O){return[P*T,sin$1(O)/T]}return R.invert=function(P,O){return[P/T,asin(O*T)]},R}function conicEqualAreaRaw(_,T){var R=sin$1(_),P=(R+sin$1(T))/2;if(abs(P)<epsilon$1)return cylindricalEqualAreaRaw(_);var O=1+R*(2*P-R),I=sqrt$1(O)/P;function z(F,G){var V=sqrt$1(O-2*P*sin$1(G))/P;return[V*sin$1(F*=P),I-V*cos$1(F)]}return z.invert=function(F,G){var V=I-G,Z=atan2(F,abs(V))*sign$1(V);return V*P<0&&(Z-=pi$2*sign$1(F)*sign$1(V)),[Z/P,asin((O-(F*F+V*V)*P*P)/(2*P))]},z}function geoConicEqualArea(){return conicProjection$1(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function geoAlbers(){return geoConicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function multiplex(_){var T=_.length;return{point:function(R,P){for(var O=-1;++O<T;)_[O].point(R,P)},sphere:function(){for(var R=-1;++R<T;)_[R].sphere()},lineStart:function(){for(var R=-1;++R<T;)_[R].lineStart()},lineEnd:function(){for(var R=-1;++R<T;)_[R].lineEnd()},polygonStart:function(){for(var R=-1;++R<T;)_[R].polygonStart()},polygonEnd:function(){for(var R=-1;++R<T;)_[R].polygonEnd()}}}function geoAlbersUsa(){var _,T,R=geoAlbers(),P,O=geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),I,z=geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),F,G,V={point:function(Q,J){G=[Q,J]}};function Z(Q){var J=Q[0],ee=Q[1];return G=null,P.point(J,ee),G||(I.point(J,ee),G)||(F.point(J,ee),G)}Z.invert=function(Q){var J=R.scale(),ee=R.translate(),ne=(Q[0]-ee[0])/J,se=(Q[1]-ee[1])/J;return(se>=.12&&se<.234&&ne>=-.425&&ne<-.214?O:se>=.166&&se<.234&&ne>=-.214&&ne<-.115?z:R).invert(Q)},Z.stream=function(Q){return _&&T===Q?_:_=multiplex([R.stream(T=Q),O.stream(Q),z.stream(Q)])},Z.precision=function(Q){return arguments.length?(R.precision(Q),O.precision(Q),z.precision(Q),Y()):R.precision()},Z.scale=function(Q){return arguments.length?(R.scale(Q),O.scale(Q*.35),z.scale(Q),Z.translate(R.translate())):R.scale()},Z.translate=function(Q){if(!arguments.length)return R.translate();var J=R.scale(),ee=+Q[0],ne=+Q[1];return P=R.translate(Q).clipExtent([[ee-.455*J,ne-.238*J],[ee+.455*J,ne+.238*J]]).stream(V),I=O.translate([ee-.307*J,ne+.201*J]).clipExtent([[ee-.425*J+epsilon$1,ne+.12*J+epsilon$1],[ee-.214*J-epsilon$1,ne+.234*J-epsilon$1]]).stream(V),F=z.translate([ee-.205*J,ne+.212*J]).clipExtent([[ee-.214*J+epsilon$1,ne+.166*J+epsilon$1],[ee-.115*J-epsilon$1,ne+.234*J-epsilon$1]]).stream(V),Y()},Z.fitExtent=function(Q,J){return fitExtent(Z,Q,J)},Z.fitSize=function(Q,J){return fitSize(Z,Q,J)},Z.fitWidth=function(Q,J){return fitWidth(Z,Q,J)},Z.fitHeight=function(Q,J){return fitHeight(Z,Q,J)};function Y(){return _=T=null,Z}return Z.scale(1070)}function azimuthalRaw(_){return function(T,R){var P=cos$1(T),O=cos$1(R),I=_(P*O);return I===1/0?[2,0]:[I*O*sin$1(T),I*sin$1(R)]}}function azimuthalInvert(_){return function(T,R){var P=sqrt$1(T*T+R*R),O=_(P),I=sin$1(O),z=cos$1(O);return[atan2(T*I,P*z),asin(P&&R*I/P)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(_){return sqrt$1(2/(1+_))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(_){return 2*asin(_/2)});function geoAzimuthalEqualArea(){return projection$1(azimuthalEqualAreaRaw).scale(124.75).clipAngle(180-.001)}var azimuthalEquidistantRaw=azimuthalRaw(function(_){return(_=acos(_))&&_/sin$1(_)});azimuthalEquidistantRaw.invert=azimuthalInvert(function(_){return _});function geoAzimuthalEquidistant(){return projection$1(azimuthalEquidistantRaw).scale(79.4188).clipAngle(180-.001)}function mercatorRaw(_,T){return[_,log$1(tan((halfPi+T)/2))]}mercatorRaw.invert=function(_,T){return[_,2*atan(exp(T))-halfPi]};function geoMercator(){return mercatorProjection(mercatorRaw).scale(961/tau$2)}function mercatorProjection(_){var T=projection$1(_),R=T.center,P=T.scale,O=T.translate,I=T.clipExtent,z=null,F,G,V;T.scale=function(Y){return arguments.length?(P(Y),Z()):P()},T.translate=function(Y){return arguments.length?(O(Y),Z()):O()},T.center=function(Y){return arguments.length?(R(Y),Z()):R()},T.clipExtent=function(Y){return arguments.length?(Y==null?z=F=G=V=null:(z=+Y[0][0],F=+Y[0][1],G=+Y[1][0],V=+Y[1][1]),Z()):z==null?null:[[z,F],[G,V]]};function Z(){var Y=pi$2*P(),Q=T(rotation(T.rotate()).invert([0,0]));return I(z==null?[[Q[0]-Y,Q[1]-Y],[Q[0]+Y,Q[1]+Y]]:_===mercatorRaw?[[Math.max(Q[0]-Y,z),F],[Math.min(Q[0]+Y,G),V]]:[[z,Math.max(Q[1]-Y,F)],[G,Math.min(Q[1]+Y,V)]])}return Z()}function tany(_){return tan((halfPi+_)/2)}function conicConformalRaw(_,T){var R=cos$1(_),P=_===T?sin$1(_):log$1(R/cos$1(T))/log$1(tany(T)/tany(_)),O=R*pow$1(tany(_),P)/P;if(!P)return mercatorRaw;function I(z,F){O>0?F<-halfPi+epsilon$1&&(F=-halfPi+epsilon$1):F>halfPi-epsilon$1&&(F=halfPi-epsilon$1);var G=O/pow$1(tany(F),P);return[G*sin$1(P*z),O-G*cos$1(P*z)]}return I.invert=function(z,F){var G=O-F,V=sign$1(P)*sqrt$1(z*z+G*G),Z=atan2(z,abs(G))*sign$1(G);return G*P<0&&(Z-=pi$2*sign$1(z)*sign$1(G)),[Z/P,2*atan(pow$1(O/V,1/P))-halfPi]},I}function geoConicConformal(){return conicProjection$1(conicConformalRaw).scale(109.5).parallels([30,30])}function equirectangularRaw(_,T){return[_,T]}equirectangularRaw.invert=equirectangularRaw;function geoEquirectangular(){return projection$1(equirectangularRaw).scale(152.63)}function conicEquidistantRaw(_,T){var R=cos$1(_),P=_===T?sin$1(_):(R-cos$1(T))/(T-_),O=R/P+_;if(abs(P)<epsilon$1)return equirectangularRaw;function I(z,F){var G=O-F,V=P*z;return[G*sin$1(V),O-G*cos$1(V)]}return I.invert=function(z,F){var G=O-F,V=atan2(z,abs(G))*sign$1(G);return G*P<0&&(V-=pi$2*sign$1(z)*sign$1(G)),[V/P,O-sign$1(P)*sqrt$1(z*z+G*G)]},I}function geoConicEquidistant(){return conicProjection$1(conicEquidistantRaw).scale(131.154).center([0,13.9389])}var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=sqrt$1(3)/2,iterations=12;function equalEarthRaw(_,T){var R=asin(M*sin$1(T)),P=R*R,O=P*P*P;return[_*cos$1(R)/(M*(A1+3*A2*P+O*(7*A3+9*A4*P))),R*(A1+A2*P+O*(A3+A4*P))]}equalEarthRaw.invert=function(_,T){for(var R=T,P=R*R,O=P*P*P,I=0,z,F,G;I<iterations&&(F=R*(A1+A2*P+O*(A3+A4*P))-T,G=A1+3*A2*P+O*(7*A3+9*A4*P),R-=z=F/G,P=R*R,O=P*P*P,!(abs(z)<epsilon2));++I);return[M*_*(A1+3*A2*P+O*(7*A3+9*A4*P))/cos$1(R),asin(sin$1(R)/M)]};function geoEqualEarth(){return projection$1(equalEarthRaw).scale(177.158)}function gnomonicRaw(_,T){var R=cos$1(T),P=cos$1(_)*R;return[R*sin$1(_)/P,sin$1(T)/P]}gnomonicRaw.invert=azimuthalInvert(atan);function geoGnomonic(){return projection$1(gnomonicRaw).scale(144.049).clipAngle(60)}function orthographicRaw(_,T){return[cos$1(T)*sin$1(_),sin$1(T)]}orthographicRaw.invert=azimuthalInvert(asin);function geoOrthographic(){return projection$1(orthographicRaw).scale(249.5).clipAngle(90+epsilon$1)}function stereographicRaw(_,T){var R=cos$1(T),P=1+cos$1(_)*R;return[R*sin$1(_)/P,sin$1(T)/P]}stereographicRaw.invert=azimuthalInvert(function(_){return 2*atan(_)});function geoStereographic(){return projection$1(stereographicRaw).scale(250).clipAngle(142)}function transverseMercatorRaw(_,T){return[log$1(tan((halfPi+T)/2)),-_]}transverseMercatorRaw.invert=function(_,T){return[-T,2*atan(exp(_))-halfPi]};function geoTransverseMercator(){var _=mercatorProjection(transverseMercatorRaw),T=_.center,R=_.rotate;return _.center=function(P){return arguments.length?T([-P[1],P[0]]):(P=T(),[P[1],-P[0]])},_.rotate=function(P){return arguments.length?R([P[0],P[1],P.length>2?P[2]+90:90]):(P=R(),[P[0],P[1],P[2]-90])},R([0,0,90]).scale(159.155)}function initRange(_,T){switch(arguments.length){case 0:break;case 1:this.range(_);break;default:this.range(T).domain(_);break}return this}function initInterpolator(_,T){switch(arguments.length){case 0:break;case 1:{typeof _=="function"?this.interpolator(_):this.range(_);break}default:{this.domain(_),typeof T=="function"?this.interpolator(T):this.range(T);break}}return this}const implicit=Symbol("implicit");function ordinal(){var _=new InternMap,T=[],R=[],P=implicit;function O(I){let z=_.get(I);if(z===void 0){if(P!==implicit)return P;_.set(I,z=T.push(I)-1)}return R[z%R.length]}return O.domain=function(I){if(!arguments.length)return T.slice();T=[],_=new InternMap;for(const z of I)_.has(z)||_.set(z,T.push(z)-1);return O},O.range=function(I){return arguments.length?(R=Array.from(I),O):R.slice()},O.unknown=function(I){return arguments.length?(P=I,O):P},O.copy=function(){return ordinal(T,R).unknown(P)},initRange.apply(O,arguments),O}function band(){var _=ordinal().unknown(void 0),T=_.domain,R=_.range,P=0,O=1,I,z,F=!1,G=0,V=0,Z=.5;delete _.unknown;function Y(){var Q=T().length,J=O<P,ee=J?O:P,ne=J?P:O;I=(ne-ee)/Math.max(1,Q-G+V*2),F&&(I=Math.floor(I)),ee+=(ne-ee-I*(Q-G))*Z,z=I*(1-G),F&&(ee=Math.round(ee),z=Math.round(z));var se=range$1(Q).map(function(oe){return ee+I*oe});return R(J?se.reverse():se)}return _.domain=function(Q){return arguments.length?(T(Q),Y()):T()},_.range=function(Q){return arguments.length?([P,O]=Q,P=+P,O=+O,Y()):[P,O]},_.rangeRound=function(Q){return[P,O]=Q,P=+P,O=+O,F=!0,Y()},_.bandwidth=function(){return z},_.step=function(){return I},_.round=function(Q){return arguments.length?(F=!!Q,Y()):F},_.padding=function(Q){return arguments.length?(G=Math.min(1,V=+Q),Y()):G},_.paddingInner=function(Q){return arguments.length?(G=Math.min(1,Q),Y()):G},_.paddingOuter=function(Q){return arguments.length?(V=+Q,Y()):V},_.align=function(Q){return arguments.length?(Z=Math.max(0,Math.min(1,Q)),Y()):Z},_.copy=function(){return band(T(),[P,O]).round(F).paddingInner(G).paddingOuter(V).align(Z)},initRange.apply(Y(),arguments)}function pointish(_){var T=_.copy;return _.padding=_.paddingOuter,delete _.paddingInner,delete _.paddingOuter,_.copy=function(){return pointish(T())},_}function point$4(){return pointish(band.apply(null,arguments).paddingInner(1))}function constants(_){return function(){return _}}function number$2(_){return+_}var unit$1=[0,1];function identity$3(_){return _}function normalize(_,T){return(T-=_=+_)?function(R){return(R-_)/T}:constants(isNaN(T)?NaN:.5)}function clamper(_,T){var R;return _>T&&(R=_,_=T,T=R),function(P){return Math.max(_,Math.min(T,P))}}function bimap(_,T,R){var P=_[0],O=_[1],I=T[0],z=T[1];return O<P?(P=normalize(O,P),I=R(z,I)):(P=normalize(P,O),I=R(I,z)),function(F){return I(P(F))}}function polymap(_,T,R){var P=Math.min(_.length,T.length)-1,O=new Array(P),I=new Array(P),z=-1;for(_[P]<_[0]&&(_=_.slice().reverse(),T=T.slice().reverse());++z<P;)O[z]=normalize(_[z],_[z+1]),I[z]=R(T[z],T[z+1]);return function(F){var G=bisectRight(_,F,1,P)-1;return I[G](O[G](F))}}function copy$1(_,T){return T.domain(_.domain()).range(_.range()).interpolate(_.interpolate()).clamp(_.clamp()).unknown(_.unknown())}function transformer$1(){var _=unit$1,T=unit$1,R=interpolate$1,P,O,I,z=identity$3,F,G,V;function Z(){var Q=Math.min(_.length,T.length);return z!==identity$3&&(z=clamper(_[0],_[Q-1])),F=Q>2?polymap:bimap,G=V=null,Y}function Y(Q){return Q==null||isNaN(Q=+Q)?I:(G||(G=F(_.map(P),T,R)))(P(z(Q)))}return Y.invert=function(Q){return z(O((V||(V=F(T,_.map(P),interpolateNumber)))(Q)))},Y.domain=function(Q){return arguments.length?(_=Array.from(Q,number$2),Z()):_.slice()},Y.range=function(Q){return arguments.length?(T=Array.from(Q),Z()):T.slice()},Y.rangeRound=function(Q){return T=Array.from(Q),R=interpolateRound,Z()},Y.clamp=function(Q){return arguments.length?(z=Q?!0:identity$3,Z()):z!==identity$3},Y.interpolate=function(Q){return arguments.length?(R=Q,Z()):R},Y.unknown=function(Q){return arguments.length?(I=Q,Y):I},function(Q,J){return P=Q,O=J,Z()}}function continuous(){return transformer$1()(identity$3,identity$3)}function tickFormat(_,T,R,P){var O=tickStep(_,T,R),I;switch(P=formatSpecifier(P??",f"),P.type){case"s":{var z=Math.max(Math.abs(_),Math.abs(T));return P.precision==null&&!isNaN(I=precisionPrefix(O,z))&&(P.precision=I),formatPrefix(P,z)}case"":case"e":case"g":case"p":case"r":{P.precision==null&&!isNaN(I=precisionRound(O,Math.max(Math.abs(_),Math.abs(T))))&&(P.precision=I-(P.type==="e"));break}case"f":case"%":{P.precision==null&&!isNaN(I=precisionFixed(O))&&(P.precision=I-(P.type==="%")*2);break}}return format$1(P)}function linearish(_){var T=_.domain;return _.ticks=function(R){var P=T();return ticks(P[0],P[P.length-1],R??10)},_.tickFormat=function(R,P){var O=T();return tickFormat(O[0],O[O.length-1],R??10,P)},_.nice=function(R){R==null&&(R=10);var P=T(),O=0,I=P.length-1,z=P[O],F=P[I],G,V,Z=10;for(F<z&&(V=z,z=F,F=V,V=O,O=I,I=V);Z-- >0;){if(V=tickIncrement(z,F,R),V===G)return P[O]=z,P[I]=F,T(P);if(V>0)z=Math.floor(z/V)*V,F=Math.ceil(F/V)*V;else if(V<0)z=Math.ceil(z*V)/V,F=Math.floor(F*V)/V;else break;G=V}return _},_}function linear(){var _=continuous();return _.copy=function(){return copy$1(_,linear())},initRange.apply(_,arguments),linearish(_)}function identity$2(_){var T;function R(P){return P==null||isNaN(P=+P)?T:P}return R.invert=R,R.domain=R.range=function(P){return arguments.length?(_=Array.from(P,number$2),R):_.slice()},R.unknown=function(P){return arguments.length?(T=P,R):T},R.copy=function(){return identity$2(_).unknown(T)},_=arguments.length?Array.from(_,number$2):[0,1],linearish(R)}function nice(_,T){_=_.slice();var R=0,P=_.length-1,O=_[R],I=_[P],z;return I<O&&(z=R,R=P,P=z,z=O,O=I,I=z),_[R]=T.floor(O),_[P]=T.ceil(I),_}function transformLog$1(_){return Math.log(_)}function transformExp(_){return Math.exp(_)}function transformLogn(_){return-Math.log(-_)}function transformExpn(_){return-Math.exp(-_)}function pow10(_){return isFinite(_)?+("1e"+_):_<0?0:_}function powp(_){return _===10?pow10:_===Math.E?Math.exp:T=>Math.pow(_,T)}function logp(_){return _===Math.E?Math.log:_===10&&Math.log10||_===2&&Math.log2||(_=Math.log(_),T=>Math.log(T)/_)}function reflect(_){return(T,R)=>-_(-T,R)}function loggish(_){const T=_(transformLog$1,transformExp),R=T.domain;let P=10,O,I;function z(){return O=logp(P),I=powp(P),R()[0]<0?(O=reflect(O),I=reflect(I),_(transformLogn,transformExpn)):_(transformLog$1,transformExp),T}return T.base=function(F){return arguments.length?(P=+F,z()):P},T.domain=function(F){return arguments.length?(R(F),z()):R()},T.ticks=F=>{const G=R();let V=G[0],Z=G[G.length-1];const Y=Z<V;Y&&([V,Z]=[Z,V]);let Q=O(V),J=O(Z),ee,ne;const se=F==null?10:+F;let oe=[];if(!(P%1)&&J-Q<se){if(Q=Math.floor(Q),J=Math.ceil(J),V>0){for(;Q<=J;++Q)for(ee=1;ee<P;++ee)if(ne=Q<0?ee/I(-Q):ee*I(Q),!(ne<V)){if(ne>Z)break;oe.push(ne)}}else for(;Q<=J;++Q)for(ee=P-1;ee>=1;--ee)if(ne=Q>0?ee/I(-Q):ee*I(Q),!(ne<V)){if(ne>Z)break;oe.push(ne)}oe.length*2<se&&(oe=ticks(V,Z,se))}else oe=ticks(Q,J,Math.min(J-Q,se)).map(I);return Y?oe.reverse():oe},T.tickFormat=(F,G)=>{if(F==null&&(F=10),G==null&&(G=P===10?"s":","),typeof G!="function"&&(!(P%1)&&(G=formatSpecifier(G)).precision==null&&(G.trim=!0),G=format$1(G)),F===1/0)return G;const V=Math.max(1,P*F/T.ticks().length);return Z=>{let Y=Z/I(Math.round(O(Z)));return Y*P<P-.5&&(Y*=P),Y<=V?G(Z):""}},T.nice=()=>R(nice(R(),{floor:F=>I(Math.floor(O(F))),ceil:F=>I(Math.ceil(O(F)))})),T}function log(){const _=loggish(transformer$1()).domain([1,10]);return _.copy=()=>copy$1(_,log()).base(_.base()),initRange.apply(_,arguments),_}function transformSymlog$1(_){return function(T){return Math.sign(T)*Math.log1p(Math.abs(T/_))}}function transformSymexp(_){return function(T){return Math.sign(T)*Math.expm1(Math.abs(T))*_}}function symlogish(_){var T=1,R=_(transformSymlog$1(T),transformSymexp(T));return R.constant=function(P){return arguments.length?_(transformSymlog$1(T=+P),transformSymexp(T)):T},linearish(R)}function symlog(){var _=symlogish(transformer$1());return _.copy=function(){return copy$1(_,symlog()).constant(_.constant())},initRange.apply(_,arguments)}function transformPow$1(_){return function(T){return T<0?-Math.pow(-T,_):Math.pow(T,_)}}function transformSqrt$1(_){return _<0?-Math.sqrt(-_):Math.sqrt(_)}function transformSquare(_){return _<0?-_*_:_*_}function powish(_){var T=_(identity$3,identity$3),R=1;function P(){return R===1?_(identity$3,identity$3):R===.5?_(transformSqrt$1,transformSquare):_(transformPow$1(R),transformPow$1(1/R))}return T.exponent=function(O){return arguments.length?(R=+O,P()):R},linearish(T)}function pow(){var _=powish(transformer$1());return _.copy=function(){return copy$1(_,pow()).exponent(_.exponent())},initRange.apply(_,arguments),_}function quantile(){var _=[],T=[],R=[],P;function O(){var z=0,F=Math.max(1,T.length);for(R=new Array(F-1);++z<F;)R[z-1]=quantileSorted(_,z/F);return I}function I(z){return z==null||isNaN(z=+z)?P:T[bisectRight(R,z)]}return I.invertExtent=function(z){var F=T.indexOf(z);return F<0?[NaN,NaN]:[F>0?R[F-1]:_[0],F<R.length?R[F]:_[_.length-1]]},I.domain=function(z){if(!arguments.length)return _.slice();_=[];for(let F of z)F!=null&&!isNaN(F=+F)&&_.push(F);return _.sort(ascending$1),O()},I.range=function(z){return arguments.length?(T=Array.from(z),O()):T.slice()},I.unknown=function(z){return arguments.length?(P=z,I):P},I.quantiles=function(){return R.slice()},I.copy=function(){return quantile().domain(_).range(T).unknown(P)},initRange.apply(I,arguments)}function threshold(){var _=[.5],T=[0,1],R,P=1;function O(I){return I!=null&&I<=I?T[bisectRight(_,I,0,P)]:R}return O.domain=function(I){return arguments.length?(_=Array.from(I),P=Math.min(_.length,T.length-1),O):_.slice()},O.range=function(I){return arguments.length?(T=Array.from(I),P=Math.min(_.length,T.length-1),O):T.slice()},O.invertExtent=function(I){var z=T.indexOf(I);return[_[z-1],_[z]]},O.unknown=function(I){return arguments.length?(R=I,O):R},O.copy=function(){return threshold().domain(_).range(T).unknown(R)},initRange.apply(O,arguments)}const t0=new Date,t1=new Date;function timeInterval$1(_,T,R,P){function O(I){return _(I=arguments.length===0?new Date:new Date(+I)),I}return O.floor=I=>(_(I=new Date(+I)),I),O.ceil=I=>(_(I=new Date(I-1)),T(I,1),_(I),I),O.round=I=>{const z=O(I),F=O.ceil(I);return I-z<F-I?z:F},O.offset=(I,z)=>(T(I=new Date(+I),z==null?1:Math.floor(z)),I),O.range=(I,z,F)=>{const G=[];if(I=O.ceil(I),F=F==null?1:Math.floor(F),!(I<z)||!(F>0))return G;let V;do G.push(V=new Date(+I)),T(I,F),_(I);while(V<I&&I<z);return G},O.filter=I=>timeInterval$1(z=>{if(z>=z)for(;_(z),!I(z);)z.setTime(z-1)},(z,F)=>{if(z>=z)if(F<0)for(;++F<=0;)for(;T(z,-1),!I(z););else for(;--F>=0;)for(;T(z,1),!I(z););}),R&&(O.count=(I,z)=>(t0.setTime(+I),t1.setTime(+z),_(t0),_(t1),Math.floor(R(t0,t1))),O.every=I=>(I=Math.floor(I),!isFinite(I)||!(I>0)?null:I>1?O.filter(P?z=>P(z)%I===0:z=>O.count(0,z)%I===0):O)),O}const millisecond=timeInterval$1(()=>{},(_,T)=>{_.setTime(+_+T)},(_,T)=>T-_);millisecond.every=_=>(_=Math.floor(_),!isFinite(_)||!(_>0)?null:_>1?timeInterval$1(T=>{T.setTime(Math.floor(T/_)*_)},(T,R)=>{T.setTime(+T+R*_)},(T,R)=>(R-T)/_):millisecond);millisecond.range;const durationSecond$1=1e3,durationMinute$1=durationSecond$1*60,durationHour$1=durationMinute$1*60,durationDay$1=durationHour$1*24,durationWeek$1=durationDay$1*7,durationMonth$1=durationDay$1*30,durationYear$1=durationDay$1*365,second$1=timeInterval$1(_=>{_.setTime(_-_.getMilliseconds())},(_,T)=>{_.setTime(+_+T*durationSecond$1)},(_,T)=>(T-_)/durationSecond$1,_=>_.getUTCSeconds());second$1.range;const timeMinute=timeInterval$1(_=>{_.setTime(_-_.getMilliseconds()-_.getSeconds()*durationSecond$1)},(_,T)=>{_.setTime(+_+T*durationMinute$1)},(_,T)=>(T-_)/durationMinute$1,_=>_.getMinutes());timeMinute.range;const utcMinute=timeInterval$1(_=>{_.setUTCSeconds(0,0)},(_,T)=>{_.setTime(+_+T*durationMinute$1)},(_,T)=>(T-_)/durationMinute$1,_=>_.getUTCMinutes());utcMinute.range;const timeHour=timeInterval$1(_=>{_.setTime(_-_.getMilliseconds()-_.getSeconds()*durationSecond$1-_.getMinutes()*durationMinute$1)},(_,T)=>{_.setTime(+_+T*durationHour$1)},(_,T)=>(T-_)/durationHour$1,_=>_.getHours());timeHour.range;const utcHour=timeInterval$1(_=>{_.setUTCMinutes(0,0,0)},(_,T)=>{_.setTime(+_+T*durationHour$1)},(_,T)=>(T-_)/durationHour$1,_=>_.getUTCHours());utcHour.range;const timeDay=timeInterval$1(_=>_.setHours(0,0,0,0),(_,T)=>_.setDate(_.getDate()+T),(_,T)=>(T-_-(T.getTimezoneOffset()-_.getTimezoneOffset())*durationMinute$1)/durationDay$1,_=>_.getDate()-1);timeDay.range;const utcDay=timeInterval$1(_=>{_.setUTCHours(0,0,0,0)},(_,T)=>{_.setUTCDate(_.getUTCDate()+T)},(_,T)=>(T-_)/durationDay$1,_=>_.getUTCDate()-1);utcDay.range;const unixDay=timeInterval$1(_=>{_.setUTCHours(0,0,0,0)},(_,T)=>{_.setUTCDate(_.getUTCDate()+T)},(_,T)=>(T-_)/durationDay$1,_=>Math.floor(_/durationDay$1));unixDay.range;function timeWeekday(_){return timeInterval$1(T=>{T.setDate(T.getDate()-(T.getDay()+7-_)%7),T.setHours(0,0,0,0)},(T,R)=>{T.setDate(T.getDate()+R*7)},(T,R)=>(R-T-(R.getTimezoneOffset()-T.getTimezoneOffset())*durationMinute$1)/durationWeek$1)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(_){return timeInterval$1(T=>{T.setUTCDate(T.getUTCDate()-(T.getUTCDay()+7-_)%7),T.setUTCHours(0,0,0,0)},(T,R)=>{T.setUTCDate(T.getUTCDate()+R*7)},(T,R)=>(R-T)/durationWeek$1)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval$1(_=>{_.setDate(1),_.setHours(0,0,0,0)},(_,T)=>{_.setMonth(_.getMonth()+T)},(_,T)=>T.getMonth()-_.getMonth()+(T.getFullYear()-_.getFullYear())*12,_=>_.getMonth());timeMonth.range;const utcMonth=timeInterval$1(_=>{_.setUTCDate(1),_.setUTCHours(0,0,0,0)},(_,T)=>{_.setUTCMonth(_.getUTCMonth()+T)},(_,T)=>T.getUTCMonth()-_.getUTCMonth()+(T.getUTCFullYear()-_.getUTCFullYear())*12,_=>_.getUTCMonth());utcMonth.range;const timeYear=timeInterval$1(_=>{_.setMonth(0,1),_.setHours(0,0,0,0)},(_,T)=>{_.setFullYear(_.getFullYear()+T)},(_,T)=>T.getFullYear()-_.getFullYear(),_=>_.getFullYear());timeYear.every=_=>!isFinite(_=Math.floor(_))||!(_>0)?null:timeInterval$1(T=>{T.setFullYear(Math.floor(T.getFullYear()/_)*_),T.setMonth(0,1),T.setHours(0,0,0,0)},(T,R)=>{T.setFullYear(T.getFullYear()+R*_)});timeYear.range;const utcYear=timeInterval$1(_=>{_.setUTCMonth(0,1),_.setUTCHours(0,0,0,0)},(_,T)=>{_.setUTCFullYear(_.getUTCFullYear()+T)},(_,T)=>T.getUTCFullYear()-_.getUTCFullYear(),_=>_.getUTCFullYear());utcYear.every=_=>!isFinite(_=Math.floor(_))||!(_>0)?null:timeInterval$1(T=>{T.setUTCFullYear(Math.floor(T.getUTCFullYear()/_)*_),T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},(T,R)=>{T.setUTCFullYear(T.getUTCFullYear()+R*_)});utcYear.range;function ticker(_,T,R,P,O,I){const z=[[second$1,1,durationSecond$1],[second$1,5,5*durationSecond$1],[second$1,15,15*durationSecond$1],[second$1,30,30*durationSecond$1],[I,1,durationMinute$1],[I,5,5*durationMinute$1],[I,15,15*durationMinute$1],[I,30,30*durationMinute$1],[O,1,durationHour$1],[O,3,3*durationHour$1],[O,6,6*durationHour$1],[O,12,12*durationHour$1],[P,1,durationDay$1],[P,2,2*durationDay$1],[R,1,durationWeek$1],[T,1,durationMonth$1],[T,3,3*durationMonth$1],[_,1,durationYear$1]];function F(V,Z,Y){const Q=Z<V;Q&&([V,Z]=[Z,V]);const J=Y&&typeof Y.range=="function"?Y:G(V,Z,Y),ee=J?J.range(V,+Z+1):[];return Q?ee.reverse():ee}function G(V,Z,Y){const Q=Math.abs(Z-V)/Y,J=bisector(([,,se])=>se).right(z,Q);if(J===z.length)return _.every(tickStep(V/durationYear$1,Z/durationYear$1,Y));if(J===0)return millisecond.every(Math.max(tickStep(V,Z,Y),1));const[ee,ne]=z[Q/z[J-1][2]<z[J][2]/Q?J-1:J];return ee.every(ne)}return[F,G]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(_){if(0<=_.y&&_.y<100){var T=new Date(-1,_.m,_.d,_.H,_.M,_.S,_.L);return T.setFullYear(_.y),T}return new Date(_.y,_.m,_.d,_.H,_.M,_.S,_.L)}function utcDate(_){if(0<=_.y&&_.y<100){var T=new Date(Date.UTC(-1,_.m,_.d,_.H,_.M,_.S,_.L));return T.setUTCFullYear(_.y),T}return new Date(Date.UTC(_.y,_.m,_.d,_.H,_.M,_.S,_.L))}function newDate(_,T,R){return{y:_,m:T,d:R,H:0,M:0,S:0,L:0}}function formatLocale(_){var T=_.dateTime,R=_.date,P=_.time,O=_.periods,I=_.days,z=_.shortDays,F=_.months,G=_.shortMonths,V=formatRe(O),Z=formatLookup(O),Y=formatRe(I),Q=formatLookup(I),J=formatRe(z),ee=formatLookup(z),ne=formatRe(F),se=formatLookup(F),oe=formatRe(G),ae=formatLookup(G),ce={a:Se,A:Te,b:Ae,B:Ue,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:_e,q:$e,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear$1,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},le={a:Ne,A:Be,b:Ze,B:We,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:Oe,q:Ge,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},pe={a:be,A:ye,b:Ce,B:ve,c:Ee,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:de,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:we,X:ge,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};ce.x=me(R,ce),ce.X=me(P,ce),ce.c=me(T,ce),le.x=me(R,le),le.X=me(P,le),le.c=me(T,le);function me(je,Fe){return function(ze){var Me=[],Ke=-1,Ye=0,Qe=je.length,Je,lt,et;for(ze instanceof Date||(ze=new Date(+ze));++Ke<Qe;)je.charCodeAt(Ke)===37&&(Me.push(je.slice(Ye,Ke)),(lt=pads[Je=je.charAt(++Ke)])!=null?Je=je.charAt(++Ke):lt=Je==="e"?" ":"0",(et=Fe[Je])&&(Je=et(ze,lt)),Me.push(Je),Ye=Ke+1);return Me.push(je.slice(Ye,Ke)),Me.join("")}}function he(je,Fe){return function(ze){var Me=newDate(1900,void 0,1),Ke=fe(Me,je,ze+="",0),Ye,Qe;if(Ke!=ze.length)return null;if("Q"in Me)return new Date(Me.Q);if("s"in Me)return new Date(Me.s*1e3+("L"in Me?Me.L:0));if(Fe&&!("Z"in Me)&&(Me.Z=0),"p"in Me&&(Me.H=Me.H%12+Me.p*12),Me.m===void 0&&(Me.m="q"in Me?Me.q:0),"V"in Me){if(Me.V<1||Me.V>53)return null;"w"in Me||(Me.w=1),"Z"in Me?(Ye=utcDate(newDate(Me.y,0,1)),Qe=Ye.getUTCDay(),Ye=Qe>4||Qe===0?utcMonday.ceil(Ye):utcMonday(Ye),Ye=utcDay.offset(Ye,(Me.V-1)*7),Me.y=Ye.getUTCFullYear(),Me.m=Ye.getUTCMonth(),Me.d=Ye.getUTCDate()+(Me.w+6)%7):(Ye=localDate(newDate(Me.y,0,1)),Qe=Ye.getDay(),Ye=Qe>4||Qe===0?timeMonday.ceil(Ye):timeMonday(Ye),Ye=timeDay.offset(Ye,(Me.V-1)*7),Me.y=Ye.getFullYear(),Me.m=Ye.getMonth(),Me.d=Ye.getDate()+(Me.w+6)%7)}else("W"in Me||"U"in Me)&&("w"in Me||(Me.w="u"in Me?Me.u%7:"W"in Me?1:0),Qe="Z"in Me?utcDate(newDate(Me.y,0,1)).getUTCDay():localDate(newDate(Me.y,0,1)).getDay(),Me.m=0,Me.d="W"in Me?(Me.w+6)%7+Me.W*7-(Qe+5)%7:Me.w+Me.U*7-(Qe+6)%7);return"Z"in Me?(Me.H+=Me.Z/100|0,Me.M+=Me.Z%100,utcDate(Me)):localDate(Me)}}function fe(je,Fe,ze,Me){for(var Ke=0,Ye=Fe.length,Qe=ze.length,Je,lt;Ke<Ye;){if(Me>=Qe)return-1;if(Je=Fe.charCodeAt(Ke++),Je===37){if(Je=Fe.charAt(Ke++),lt=pe[Je in pads?Fe.charAt(Ke++):Je],!lt||(Me=lt(je,ze,Me))<0)return-1}else if(Je!=ze.charCodeAt(Me++))return-1}return Me}function de(je,Fe,ze){var Me=V.exec(Fe.slice(ze));return Me?(je.p=Z.get(Me[0].toLowerCase()),ze+Me[0].length):-1}function be(je,Fe,ze){var Me=J.exec(Fe.slice(ze));return Me?(je.w=ee.get(Me[0].toLowerCase()),ze+Me[0].length):-1}function ye(je,Fe,ze){var Me=Y.exec(Fe.slice(ze));return Me?(je.w=Q.get(Me[0].toLowerCase()),ze+Me[0].length):-1}function Ce(je,Fe,ze){var Me=oe.exec(Fe.slice(ze));return Me?(je.m=ae.get(Me[0].toLowerCase()),ze+Me[0].length):-1}function ve(je,Fe,ze){var Me=ne.exec(Fe.slice(ze));return Me?(je.m=se.get(Me[0].toLowerCase()),ze+Me[0].length):-1}function Ee(je,Fe,ze){return fe(je,T,Fe,ze)}function we(je,Fe,ze){return fe(je,R,Fe,ze)}function ge(je,Fe,ze){return fe(je,P,Fe,ze)}function Se(je){return z[je.getDay()]}function Te(je){return I[je.getDay()]}function Ae(je){return G[je.getMonth()]}function Ue(je){return F[je.getMonth()]}function _e(je){return O[+(je.getHours()>=12)]}function $e(je){return 1+~~(je.getMonth()/3)}function Ne(je){return z[je.getUTCDay()]}function Be(je){return I[je.getUTCDay()]}function Ze(je){return G[je.getUTCMonth()]}function We(je){return F[je.getUTCMonth()]}function Oe(je){return O[+(je.getUTCHours()>=12)]}function Ge(je){return 1+~~(je.getUTCMonth()/3)}return{format:function(je){var Fe=me(je+="",ce);return Fe.toString=function(){return je},Fe},parse:function(je){var Fe=he(je+="",!1);return Fe.toString=function(){return je},Fe},utcFormat:function(je){var Fe=me(je+="",le);return Fe.toString=function(){return je},Fe},utcParse:function(je){var Fe=he(je+="",!0);return Fe.toString=function(){return je},Fe}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad$1(_,T,R){var P=_<0?"-":"",O=(P?-_:_)+"",I=O.length;return P+(I<R?new Array(R-I+1).join(T)+O:O)}function requote(_){return _.replace(requoteRe,"\\$&")}function formatRe(_){return new RegExp("^(?:"+_.map(requote).join("|")+")","i")}function formatLookup(_){return new Map(_.map((T,R)=>[T.toLowerCase(),R]))}function parseWeekdayNumberSunday(_,T,R){var P=numberRe.exec(T.slice(R,R+1));return P?(_.w=+P[0],R+P[0].length):-1}function parseWeekdayNumberMonday(_,T,R){var P=numberRe.exec(T.slice(R,R+1));return P?(_.u=+P[0],R+P[0].length):-1}function parseWeekNumberSunday(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.U=+P[0],R+P[0].length):-1}function parseWeekNumberISO(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.V=+P[0],R+P[0].length):-1}function parseWeekNumberMonday(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.W=+P[0],R+P[0].length):-1}function parseFullYear(_,T,R){var P=numberRe.exec(T.slice(R,R+4));return P?(_.y=+P[0],R+P[0].length):-1}function parseYear(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.y=+P[0]+(+P[0]>68?1900:2e3),R+P[0].length):-1}function parseZone(_,T,R){var P=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(T.slice(R,R+6));return P?(_.Z=P[1]?0:-(P[2]+(P[3]||"00")),R+P[0].length):-1}function parseQuarter(_,T,R){var P=numberRe.exec(T.slice(R,R+1));return P?(_.q=P[0]*3-3,R+P[0].length):-1}function parseMonthNumber(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.m=P[0]-1,R+P[0].length):-1}function parseDayOfMonth(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.d=+P[0],R+P[0].length):-1}function parseDayOfYear(_,T,R){var P=numberRe.exec(T.slice(R,R+3));return P?(_.m=0,_.d=+P[0],R+P[0].length):-1}function parseHour24(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.H=+P[0],R+P[0].length):-1}function parseMinutes(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.M=+P[0],R+P[0].length):-1}function parseSeconds(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.S=+P[0],R+P[0].length):-1}function parseMilliseconds(_,T,R){var P=numberRe.exec(T.slice(R,R+3));return P?(_.L=+P[0],R+P[0].length):-1}function parseMicroseconds(_,T,R){var P=numberRe.exec(T.slice(R,R+6));return P?(_.L=Math.floor(P[0]/1e3),R+P[0].length):-1}function parseLiteralPercent(_,T,R){var P=percentRe.exec(T.slice(R,R+1));return P?R+P[0].length:-1}function parseUnixTimestamp(_,T,R){var P=numberRe.exec(T.slice(R));return P?(_.Q=+P[0],R+P[0].length):-1}function parseUnixTimestampSeconds(_,T,R){var P=numberRe.exec(T.slice(R));return P?(_.s=+P[0],R+P[0].length):-1}function formatDayOfMonth(_,T){return pad$1(_.getDate(),T,2)}function formatHour24(_,T){return pad$1(_.getHours(),T,2)}function formatHour12(_,T){return pad$1(_.getHours()%12||12,T,2)}function formatDayOfYear(_,T){return pad$1(1+timeDay.count(timeYear(_),_),T,3)}function formatMilliseconds(_,T){return pad$1(_.getMilliseconds(),T,3)}function formatMicroseconds(_,T){return formatMilliseconds(_,T)+"000"}function formatMonthNumber(_,T){return pad$1(_.getMonth()+1,T,2)}function formatMinutes(_,T){return pad$1(_.getMinutes(),T,2)}function formatSeconds(_,T){return pad$1(_.getSeconds(),T,2)}function formatWeekdayNumberMonday(_){var T=_.getDay();return T===0?7:T}function formatWeekNumberSunday(_,T){return pad$1(timeSunday.count(timeYear(_)-1,_),T,2)}function dISO(_){var T=_.getDay();return T>=4||T===0?timeThursday(_):timeThursday.ceil(_)}function formatWeekNumberISO(_,T){return _=dISO(_),pad$1(timeThursday.count(timeYear(_),_)+(timeYear(_).getDay()===4),T,2)}function formatWeekdayNumberSunday(_){return _.getDay()}function formatWeekNumberMonday(_,T){return pad$1(timeMonday.count(timeYear(_)-1,_),T,2)}function formatYear$1(_,T){return pad$1(_.getFullYear()%100,T,2)}function formatYearISO(_,T){return _=dISO(_),pad$1(_.getFullYear()%100,T,2)}function formatFullYear(_,T){return pad$1(_.getFullYear()%1e4,T,4)}function formatFullYearISO(_,T){var R=_.getDay();return _=R>=4||R===0?timeThursday(_):timeThursday.ceil(_),pad$1(_.getFullYear()%1e4,T,4)}function formatZone(_){var T=_.getTimezoneOffset();return(T>0?"-":(T*=-1,"+"))+pad$1(T/60|0,"0",2)+pad$1(T%60,"0",2)}function formatUTCDayOfMonth(_,T){return pad$1(_.getUTCDate(),T,2)}function formatUTCHour24(_,T){return pad$1(_.getUTCHours(),T,2)}function formatUTCHour12(_,T){return pad$1(_.getUTCHours()%12||12,T,2)}function formatUTCDayOfYear(_,T){return pad$1(1+utcDay.count(utcYear(_),_),T,3)}function formatUTCMilliseconds(_,T){return pad$1(_.getUTCMilliseconds(),T,3)}function formatUTCMicroseconds(_,T){return formatUTCMilliseconds(_,T)+"000"}function formatUTCMonthNumber(_,T){return pad$1(_.getUTCMonth()+1,T,2)}function formatUTCMinutes(_,T){return pad$1(_.getUTCMinutes(),T,2)}function formatUTCSeconds(_,T){return pad$1(_.getUTCSeconds(),T,2)}function formatUTCWeekdayNumberMonday(_){var T=_.getUTCDay();return T===0?7:T}function formatUTCWeekNumberSunday(_,T){return pad$1(utcSunday.count(utcYear(_)-1,_),T,2)}function UTCdISO(_){var T=_.getUTCDay();return T>=4||T===0?utcThursday(_):utcThursday.ceil(_)}function formatUTCWeekNumberISO(_,T){return _=UTCdISO(_),pad$1(utcThursday.count(utcYear(_),_)+(utcYear(_).getUTCDay()===4),T,2)}function formatUTCWeekdayNumberSunday(_){return _.getUTCDay()}function formatUTCWeekNumberMonday(_,T){return pad$1(utcMonday.count(utcYear(_)-1,_),T,2)}function formatUTCYear(_,T){return pad$1(_.getUTCFullYear()%100,T,2)}function formatUTCYearISO(_,T){return _=UTCdISO(_),pad$1(_.getUTCFullYear()%100,T,2)}function formatUTCFullYear(_,T){return pad$1(_.getUTCFullYear()%1e4,T,4)}function formatUTCFullYearISO(_,T){var R=_.getUTCDay();return _=R>=4||R===0?utcThursday(_):utcThursday.ceil(_),pad$1(_.getUTCFullYear()%1e4,T,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(_){return+_}function formatUnixTimestampSeconds(_){return Math.floor(+_/1e3)}var locale,timeFormat,utcFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(_){return locale=formatLocale(_),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(_){return new Date(_)}function number$1(_){return _ instanceof Date?+_:+new Date(+_)}function calendar(_,T,R,P,O,I,z,F,G,V){var Z=continuous(),Y=Z.invert,Q=Z.domain,J=V(".%L"),ee=V(":%S"),ne=V("%I:%M"),se=V("%I %p"),oe=V("%a %d"),ae=V("%b %d"),ce=V("%B"),le=V("%Y");function pe(me){return(G(me)<me?J:F(me)<me?ee:z(me)<me?ne:I(me)<me?se:P(me)<me?O(me)<me?oe:ae:R(me)<me?ce:le)(me)}return Z.invert=function(me){return new Date(Y(me))},Z.domain=function(me){return arguments.length?Q(Array.from(me,number$1)):Q().map(date)},Z.ticks=function(me){var he=Q();return _(he[0],he[he.length-1],me??10)},Z.tickFormat=function(me,he){return he==null?pe:V(he)},Z.nice=function(me){var he=Q();return(!me||typeof me.range!="function")&&(me=T(he[0],he[he.length-1],me??10)),me?Q(nice(he,me)):Z},Z.copy=function(){return copy$1(Z,calendar(_,T,R,P,O,I,z,F,G,V))},Z}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second$1,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second$1,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function copy(_,T){return T.domain(_.domain()).interpolator(_.interpolator()).clamp(_.clamp()).unknown(_.unknown())}function transformer(){var _=0,T=.5,R=1,P=1,O,I,z,F,G,V=identity$3,Z,Y=!1,Q;function J(ne){return isNaN(ne=+ne)?Q:(ne=.5+((ne=+Z(ne))-I)*(P*ne<P*I?F:G),V(Y?Math.max(0,Math.min(1,ne)):ne))}J.domain=function(ne){return arguments.length?([_,T,R]=ne,O=Z(_=+_),I=Z(T=+T),z=Z(R=+R),F=O===I?0:.5/(I-O),G=I===z?0:.5/(z-I),P=I<O?-1:1,J):[_,T,R]},J.clamp=function(ne){return arguments.length?(Y=!!ne,J):Y},J.interpolator=function(ne){return arguments.length?(V=ne,J):V};function ee(ne){return function(se){var oe,ae,ce;return arguments.length?([oe,ae,ce]=se,V=piecewise(ne,[oe,ae,ce]),J):[V(0),V(.5),V(1)]}}return J.range=ee(interpolate$1),J.rangeRound=ee(interpolateRound),J.unknown=function(ne){return arguments.length?(Q=ne,J):Q},function(ne){return Z=ne,O=ne(_),I=ne(T),z=ne(R),F=O===I?0:.5/(I-O),G=I===z?0:.5/(z-I),P=I<O?-1:1,J}}function diverging(){var _=linearish(transformer()(identity$3));return _.copy=function(){return copy(_,diverging())},initInterpolator.apply(_,arguments)}function divergingLog(){var _=loggish(transformer()).domain([.1,1,10]);return _.copy=function(){return copy(_,divergingLog()).base(_.base())},initInterpolator.apply(_,arguments)}function divergingSymlog(){var _=symlogish(transformer());return _.copy=function(){return copy(_,divergingSymlog()).constant(_.constant())},initInterpolator.apply(_,arguments)}function divergingPow(){var _=powish(transformer());return _.copy=function(){return copy(_,divergingPow()).exponent(_.exponent())},initInterpolator.apply(_,arguments)}function colors(_){for(var T=_.length/6|0,R=new Array(T),P=0;P<T;)R[P]="#"+_.slice(P*6,++P*6);return R}const schemeCategory10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),schemeAccent=colors("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),schemeDark2=colors("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),schemeObservable10=colors("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),schemePaired=colors("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),schemePastel1=colors("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),schemePastel2=colors("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),schemeSet1=colors("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),schemeSet2=colors("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),schemeSet3=colors("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),schemeTableau10=colors("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ramp$1=_=>rgbBasis(_[_.length-1]);var scheme$q=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors);const interpolateBrBG=ramp$1(scheme$q);var scheme$p=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors);const interpolatePRGn=ramp$1(scheme$p);var scheme$o=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors);const interpolatePiYG=ramp$1(scheme$o);var scheme$n=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors);const interpolatePuOr=ramp$1(scheme$n);var scheme$m=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors);const interpolateRdBu=ramp$1(scheme$m);var scheme$l=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors);const interpolateRdGy=ramp$1(scheme$l);var scheme$k=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors);const interpolateRdYlBu=ramp$1(scheme$k);var scheme$j=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors);const interpolateRdYlGn=ramp$1(scheme$j);var scheme$i=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors);const interpolateSpectral=ramp$1(scheme$i);var scheme$h=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors);const interpolateBuGn=ramp$1(scheme$h);var scheme$g=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors);const interpolateBuPu=ramp$1(scheme$g);var scheme$f=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors);const interpolateGnBu=ramp$1(scheme$f);var scheme$e=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors);const interpolateOrRd=ramp$1(scheme$e);var scheme$d=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors);const interpolatePuBuGn=ramp$1(scheme$d);var scheme$c=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors);const interpolatePuBu=ramp$1(scheme$c);var scheme$b=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors);const interpolatePuRd=ramp$1(scheme$b);var scheme$a=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors);const interpolateRdPu=ramp$1(scheme$a);var scheme$9=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors);const interpolateYlGnBu=ramp$1(scheme$9);var scheme$8=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors);const interpolateYlGn=ramp$1(scheme$8);var scheme$7=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors);const interpolateYlOrBr=ramp$1(scheme$7);var scheme$6=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors);const interpolateYlOrRd=ramp$1(scheme$6);var scheme$5=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors);const interpolateBlues=ramp$1(scheme$5);var scheme$4=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors);const interpolateGreens=ramp$1(scheme$4);var scheme$3=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors);const interpolateGreys=ramp$1(scheme$3);var scheme$2=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors);const interpolatePurples=ramp$1(scheme$2);var scheme$1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors);const interpolateReds=ramp$1(scheme$1);var scheme=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors);const interpolateOranges=ramp$1(scheme);function interpolateCividis(_){return _=Math.max(0,Math.min(1,_)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-_*(35.34-_*(2381.73-_*(6402.7-_*(7024.72-_*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+_*(170.73+_*(52.82-_*(131.46-_*(176.58-_*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+_*(442.36-_*(2482.43-_*(6167.24-_*(6614.94-_*2475.67)))))))+")"}const interpolateCubehelixDefault=cubehelixLong(cubehelix$1(300,.5,0),cubehelix$1(-240,.5,1));var warm=cubehelixLong(cubehelix$1(-100,.75,.35),cubehelix$1(80,1.5,.8)),cool=cubehelixLong(cubehelix$1(260,.75,.35),cubehelix$1(80,1.5,.8)),c$2=cubehelix$1();function interpolateRainbow(_){(_<0||_>1)&&(_-=Math.floor(_));var T=Math.abs(_-.5);return c$2.h=360*_-100,c$2.s=1.5-1.5*T,c$2.l=.8-.9*T,c$2+""}var c$1=rgb(),pi_1_3=Math.PI/3,pi_2_3=Math.PI*2/3;function interpolateSinebow(_){var T;return _=(.5-_)*Math.PI,c$1.r=255*(T=Math.sin(_))*T,c$1.g=255*(T=Math.sin(_+pi_1_3))*T,c$1.b=255*(T=Math.sin(_+pi_2_3))*T,c$1+""}function interpolateTurbo(_){return _=Math.max(0,Math.min(1,_)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+_*(1172.33-_*(10793.56-_*(33300.12-_*(38394.49-_*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+_*(557.33+_*(1225.33-_*(3574.96-_*(1073.77+_*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+_*(3211.1-_*(15327.97-_*(27814-_*(22569.18-_*6838.66)))))))+")"}function ramp(_){var T=_.length;return function(R){return _[Math.max(0,Math.min(T-1,Math.floor(R*T)))]}}const interpolateViridis=ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var magma=ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function constant$1(_){return function(){return _}}const cos=Math.cos,min=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon=1e-12,pi$1=Math.PI,tau$1=2*pi$1;function withPath(_){let T=3;return _.digits=function(R){if(!arguments.length)return T;if(R==null)T=null;else{const P=Math.floor(R);if(!(P>=0))throw new RangeError(`invalid digits: ${R}`);T=P}return _},()=>new Path(T)}function array(_){return typeof _=="object"&&"length"in _?_:Array.from(_)}function Linear(_){this._context=_}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1,this._line?this._context.lineTo(_,T):this._context.moveTo(_,T);break;case 1:this._point=2;default:this._context.lineTo(_,T);break}}};function curveLinear(_){return new Linear(_)}function x(_){return _[0]}function y(_){return _[1]}function shapeLine(_,T){var R=constant$1(!0),P=null,O=curveLinear,I=null,z=withPath(F);_=typeof _=="function"?_:_===void 0?x:constant$1(_),T=typeof T=="function"?T:T===void 0?y:constant$1(T);function F(G){var V,Z=(G=array(G)).length,Y,Q=!1,J;for(P==null&&(I=O(J=z())),V=0;V<=Z;++V)!(V<Z&&R(Y=G[V],V,G))===Q&&((Q=!Q)?I.lineStart():I.lineEnd()),Q&&I.point(+_(Y,V,G),+T(Y,V,G));if(J)return I=null,J+""||null}return F.x=function(G){return arguments.length?(_=typeof G=="function"?G:constant$1(+G),F):_},F.y=function(G){return arguments.length?(T=typeof G=="function"?G:constant$1(+G),F):T},F.defined=function(G){return arguments.length?(R=typeof G=="function"?G:constant$1(!!G),F):R},F.curve=function(G){return arguments.length?(O=G,P!=null&&(I=O(P)),F):O},F.context=function(G){return arguments.length?(G==null?P=I=null:I=O(P=G),F):P},F}function shapeArea(_,T,R){var P=null,O=constant$1(!0),I=null,z=curveLinear,F=null,G=withPath(V);_=typeof _=="function"?_:_===void 0?x:constant$1(+_),T=typeof T=="function"?T:constant$1(T===void 0?0:+T),R=typeof R=="function"?R:R===void 0?y:constant$1(+R);function V(Y){var Q,J,ee,ne=(Y=array(Y)).length,se,oe=!1,ae,ce=new Array(ne),le=new Array(ne);for(I==null&&(F=z(ae=G())),Q=0;Q<=ne;++Q){if(!(Q<ne&&O(se=Y[Q],Q,Y))===oe)if(oe=!oe)J=Q,F.areaStart(),F.lineStart();else{for(F.lineEnd(),F.lineStart(),ee=Q-1;ee>=J;--ee)F.point(ce[ee],le[ee]);F.lineEnd(),F.areaEnd()}oe&&(ce[Q]=+_(se,Q,Y),le[Q]=+T(se,Q,Y),F.point(P?+P(se,Q,Y):ce[Q],R?+R(se,Q,Y):le[Q]))}if(ae)return F=null,ae+""||null}function Z(){return shapeLine().defined(O).curve(z).context(I)}return V.x=function(Y){return arguments.length?(_=typeof Y=="function"?Y:constant$1(+Y),P=null,V):_},V.x0=function(Y){return arguments.length?(_=typeof Y=="function"?Y:constant$1(+Y),V):_},V.x1=function(Y){return arguments.length?(P=Y==null?null:typeof Y=="function"?Y:constant$1(+Y),V):P},V.y=function(Y){return arguments.length?(T=typeof Y=="function"?Y:constant$1(+Y),R=null,V):T},V.y0=function(Y){return arguments.length?(T=typeof Y=="function"?Y:constant$1(+Y),V):T},V.y1=function(Y){return arguments.length?(R=Y==null?null:typeof Y=="function"?Y:constant$1(+Y),V):R},V.lineX0=V.lineY0=function(){return Z().x(_).y(T)},V.lineY1=function(){return Z().x(_).y(R)},V.lineX1=function(){return Z().x(P).y(T)},V.defined=function(Y){return arguments.length?(O=typeof Y=="function"?Y:constant$1(!!Y),V):O},V.curve=function(Y){return arguments.length?(z=Y,I!=null&&(F=z(I)),V):z},V.context=function(Y){return arguments.length?(Y==null?I=F=null:F=z(I=Y),V):I},V}class Bump{constructor(T,R){this._context=T,this._x=R}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(T,R){switch(T=+T,R=+R,this._point){case 0:{this._point=1,this._line?this._context.lineTo(T,R):this._context.moveTo(T,R);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+T)/2,this._y0,this._x0,R,T,R):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+R)/2,T,this._y0,T,R);break}}this._x0=T,this._y0=R}}function bumpX(_){return new Bump(_,!0)}function bumpY(_){return new Bump(_,!1)}const sqrt3$3=sqrt(3),symbolAsterisk={draw(_,T){const R=sqrt(T+min(T/28,.75))*.59436,P=R/2,O=P*sqrt3$3;_.moveTo(0,R),_.lineTo(0,-R),_.moveTo(-O,-P),_.lineTo(O,P),_.moveTo(-O,P),_.lineTo(O,-P)}},symbolCircle={draw(_,T){const R=sqrt(T/pi$1);_.moveTo(R,0),_.arc(0,0,R,0,tau$1)}},symbolCross={draw(_,T){const R=sqrt(T/5)/2;_.moveTo(-3*R,-R),_.lineTo(-R,-R),_.lineTo(-R,-3*R),_.lineTo(R,-3*R),_.lineTo(R,-R),_.lineTo(3*R,-R),_.lineTo(3*R,R),_.lineTo(R,R),_.lineTo(R,3*R),_.lineTo(-R,3*R),_.lineTo(-R,R),_.lineTo(-3*R,R),_.closePath()}},tan30=sqrt(1/3),tan30_2=tan30*2,symbolDiamond={draw(_,T){const R=sqrt(T/tan30_2),P=R*tan30;_.moveTo(0,-R),_.lineTo(P,0),_.lineTo(0,R),_.lineTo(-P,0),_.closePath()}},symbolDiamond2={draw(_,T){const R=sqrt(T)*.62625;_.moveTo(0,-R),_.lineTo(R,0),_.lineTo(0,R),_.lineTo(-R,0),_.closePath()}},symbolPlus={draw(_,T){const R=sqrt(T-min(T/7,2))*.87559;_.moveTo(-R,0),_.lineTo(R,0),_.moveTo(0,R),_.lineTo(0,-R)}},symbolSquare={draw(_,T){const R=sqrt(T),P=-R/2;_.rect(P,P,R,R)}},symbolSquare2={draw(_,T){const R=sqrt(T)*.4431;_.moveTo(R,R),_.lineTo(R,-R),_.lineTo(-R,-R),_.lineTo(-R,R),_.closePath()}},ka=.8908130915292852,kr=sin(pi$1/10)/sin(7*pi$1/10),kx=sin(tau$1/10)*kr,ky=-cos(tau$1/10)*kr,symbolStar={draw(_,T){const R=sqrt(T*ka),P=kx*R,O=ky*R;_.moveTo(0,-R),_.lineTo(P,O);for(let I=1;I<5;++I){const z=tau$1*I/5,F=cos(z),G=sin(z);_.lineTo(G*R,-F*R),_.lineTo(F*P-G*O,G*P+F*O)}_.closePath()}},sqrt3$2=sqrt(3),symbolTriangle={draw(_,T){const R=-sqrt(T/(sqrt3$2*3));_.moveTo(0,R*2),_.lineTo(-sqrt3$2*R,-R),_.lineTo(sqrt3$2*R,-R),_.closePath()}},sqrt3$1=sqrt(3),symbolTriangle2={draw(_,T){const R=sqrt(T)*.6824,P=R/2,O=R*sqrt3$1/2;_.moveTo(0,-R),_.lineTo(O,P),_.lineTo(-O,P),_.closePath()}},c=-.5,s=sqrt(3)/2,k=1/sqrt(12),a=(k/2+1)*3,symbolWye={draw(_,T){const R=sqrt(T/a),P=R/2,O=R*k,I=P,z=R*k+R,F=-I,G=z;_.moveTo(P,O),_.lineTo(I,z),_.lineTo(F,G),_.lineTo(c*P-s*O,s*P+c*O),_.lineTo(c*I-s*z,s*I+c*z),_.lineTo(c*F-s*G,s*F+c*G),_.lineTo(c*P+s*O,c*O-s*P),_.lineTo(c*I+s*z,c*z-s*I),_.lineTo(c*F+s*G,c*G-s*F),_.closePath()}},symbolTimes={draw(_,T){const R=sqrt(T-min(T/6,1.7))*.6189;_.moveTo(-R,-R),_.lineTo(R,R),_.moveTo(-R,R),_.lineTo(R,-R)}},symbolsFill=[symbolCircle,symbolCross,symbolDiamond,symbolSquare,symbolStar,symbolTriangle,symbolWye],symbolsStroke=[symbolCircle,symbolPlus,symbolTimes,symbolTriangle2,symbolAsterisk,symbolSquare2,symbolDiamond2];function noop(){}function point$3(_,T,R){_._context.bezierCurveTo((2*_._x0+_._x1)/3,(2*_._y0+_._y1)/3,(_._x0+2*_._x1)/3,(_._y0+2*_._y1)/3,(_._x0+4*_._x1+T)/6,(_._y0+4*_._y1+R)/6)}function Basis(_){this._context=_}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1,this._line?this._context.lineTo(_,T):this._context.moveTo(_,T);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$3(this,_,T);break}this._x0=this._x1,this._x1=_,this._y0=this._y1,this._y1=T}};function curveBasis(_){return new Basis(_)}function BasisClosed(_){this._context=_}BasisClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1,this._x2=_,this._y2=T;break;case 1:this._point=2,this._x3=_,this._y3=T;break;case 2:this._point=3,this._x4=_,this._y4=T,this._context.moveTo((this._x0+4*this._x1+_)/6,(this._y0+4*this._y1+T)/6);break;default:point$3(this,_,T);break}this._x0=this._x1,this._x1=_,this._y0=this._y1,this._y1=T}};function curveBasisClosed(_){return new BasisClosed(_)}function BasisOpen(_){this._context=_}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var R=(this._x0+4*this._x1+_)/6,P=(this._y0+4*this._y1+T)/6;this._line?this._context.lineTo(R,P):this._context.moveTo(R,P);break;case 3:this._point=4;default:point$3(this,_,T);break}this._x0=this._x1,this._x1=_,this._y0=this._y1,this._y1=T}};function curveBasisOpen(_){return new BasisOpen(_)}function Bundle(_,T){this._basis=new Basis(_),this._beta=T}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var _=this._x,T=this._y,R=_.length-1;if(R>0)for(var P=_[0],O=T[0],I=_[R]-P,z=T[R]-O,F=-1,G;++F<=R;)G=F/R,this._basis.point(this._beta*_[F]+(1-this._beta)*(P+G*I),this._beta*T[F]+(1-this._beta)*(O+G*z));this._x=this._y=null,this._basis.lineEnd()},point:function(_,T){this._x.push(+_),this._y.push(+T)}};const curveBundle=(function _(T){function R(P){return T===1?new Basis(P):new Bundle(P,T)}return R.beta=function(P){return _(+P)},R})(.85);function point$2(_,T,R){_._context.bezierCurveTo(_._x1+_._k*(_._x2-_._x0),_._y1+_._k*(_._y2-_._y0),_._x2+_._k*(_._x1-T),_._y2+_._k*(_._y1-R),_._x2,_._y2)}function Cardinal(_,T){this._context=_,this._k=(1-T)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$2(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1,this._line?this._context.lineTo(_,T):this._context.moveTo(_,T);break;case 1:this._point=2,this._x1=_,this._y1=T;break;case 2:this._point=3;default:point$2(this,_,T);break}this._x0=this._x1,this._x1=this._x2,this._x2=_,this._y0=this._y1,this._y1=this._y2,this._y2=T}};const curveCardinal=(function _(T){function R(P){return new Cardinal(P,T)}return R.tension=function(P){return _(+P)},R})(0);function CardinalClosed(_,T){this._context=_,this._k=(1-T)/6}CardinalClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1,this._x3=_,this._y3=T;break;case 1:this._point=2,this._context.moveTo(this._x4=_,this._y4=T);break;case 2:this._point=3,this._x5=_,this._y5=T;break;default:point$2(this,_,T);break}this._x0=this._x1,this._x1=this._x2,this._x2=_,this._y0=this._y1,this._y1=this._y2,this._y2=T}};const curveCardinalClosed=(function _(T){function R(P){return new CardinalClosed(P,T)}return R.tension=function(P){return _(+P)},R})(0);function CardinalOpen(_,T){this._context=_,this._k=(1-T)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,_,T);break}this._x0=this._x1,this._x1=this._x2,this._x2=_,this._y0=this._y1,this._y1=this._y2,this._y2=T}};const curveCardinalOpen=(function _(T){function R(P){return new CardinalOpen(P,T)}return R.tension=function(P){return _(+P)},R})(0);function point$1(_,T,R){var P=_._x1,O=_._y1,I=_._x2,z=_._y2;if(_._l01_a>epsilon){var F=2*_._l01_2a+3*_._l01_a*_._l12_a+_._l12_2a,G=3*_._l01_a*(_._l01_a+_._l12_a);P=(P*F-_._x0*_._l12_2a+_._x2*_._l01_2a)/G,O=(O*F-_._y0*_._l12_2a+_._y2*_._l01_2a)/G}if(_._l23_a>epsilon){var V=2*_._l23_2a+3*_._l23_a*_._l12_a+_._l12_2a,Z=3*_._l23_a*(_._l23_a+_._l12_a);I=(I*V+_._x1*_._l23_2a-T*_._l12_2a)/Z,z=(z*V+_._y1*_._l23_2a-R*_._l12_2a)/Z}_._context.bezierCurveTo(P,O,I,z,_._x2,_._y2)}function CatmullRom(_,T){this._context=_,this._alpha=T}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){if(_=+_,T=+T,this._point){var R=this._x2-_,P=this._y2-T;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(R*R+P*P,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(_,T):this._context.moveTo(_,T);break;case 1:this._point=2;break;case 2:this._point=3;default:point$1(this,_,T);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=_,this._y0=this._y1,this._y1=this._y2,this._y2=T}};const curveCatmullRom=(function _(T){function R(P){return T?new CatmullRom(P,T):new Cardinal(P,0)}return R.alpha=function(P){return _(+P)},R})(.5);function CatmullRomClosed(_,T){this._context=_,this._alpha=T}CatmullRomClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(_,T){if(_=+_,T=+T,this._point){var R=this._x2-_,P=this._y2-T;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(R*R+P*P,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=_,this._y3=T;break;case 1:this._point=2,this._context.moveTo(this._x4=_,this._y4=T);break;case 2:this._point=3,this._x5=_,this._y5=T;break;default:point$1(this,_,T);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=_,this._y0=this._y1,this._y1=this._y2,this._y2=T}};const curveCatmullRomClosed=(function _(T){function R(P){return T?new CatmullRomClosed(P,T):new CardinalClosed(P,0)}return R.alpha=function(P){return _(+P)},R})(.5);function CatmullRomOpen(_,T){this._context=_,this._alpha=T}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){if(_=+_,T=+T,this._point){var R=this._x2-_,P=this._y2-T;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(R*R+P*P,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$1(this,_,T);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=_,this._y0=this._y1,this._y1=this._y2,this._y2=T}};const curveCatmullRomOpen=(function _(T){function R(P){return T?new CatmullRomOpen(P,T):new CardinalOpen(P,0)}return R.alpha=function(P){return _(+P)},R})(.5);function LinearClosed(_){this._context=_}LinearClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(_,T){_=+_,T=+T,this._point?this._context.lineTo(_,T):(this._point=1,this._context.moveTo(_,T))}};function curveLinearClosed(_){return new LinearClosed(_)}function sign(_){return _<0?-1:1}function slope3(_,T,R){var P=_._x1-_._x0,O=T-_._x1,I=(_._y1-_._y0)/(P||O<0&&-0),z=(R-_._y1)/(O||P<0&&-0),F=(I*O+z*P)/(P+O);return(sign(I)+sign(z))*Math.min(Math.abs(I),Math.abs(z),.5*Math.abs(F))||0}function slope2(_,T){var R=_._x1-_._x0;return R?(3*(_._y1-_._y0)/R-T)/2:T}function point(_,T,R){var P=_._x0,O=_._y0,I=_._x1,z=_._y1,F=(I-P)/3;_._context.bezierCurveTo(P+F,O+F*T,I-F,z-F*R,I,z)}function MonotoneX(_){this._context=_}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){var R=NaN;if(_=+_,T=+T,!(_===this._x1&&T===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(_,T):this._context.moveTo(_,T);break;case 1:this._point=2;break;case 2:this._point=3,point(this,slope2(this,R=slope3(this,_,T)),R);break;default:point(this,this._t0,R=slope3(this,_,T));break}this._x0=this._x1,this._x1=_,this._y0=this._y1,this._y1=T,this._t0=R}}};function MonotoneY(_){this._context=new ReflectContext(_)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(_,T){MonotoneX.prototype.point.call(this,T,_)};function ReflectContext(_){this._context=_}ReflectContext.prototype={moveTo:function(_,T){this._context.moveTo(T,_)},closePath:function(){this._context.closePath()},lineTo:function(_,T){this._context.lineTo(T,_)},bezierCurveTo:function(_,T,R,P,O,I){this._context.bezierCurveTo(T,_,P,R,I,O)}};function monotoneX(_){return new MonotoneX(_)}function monotoneY(_){return new MonotoneY(_)}function Natural(_){this._context=_}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var _=this._x,T=this._y,R=_.length;if(R)if(this._line?this._context.lineTo(_[0],T[0]):this._context.moveTo(_[0],T[0]),R===2)this._context.lineTo(_[1],T[1]);else for(var P=controlPoints(_),O=controlPoints(T),I=0,z=1;z<R;++I,++z)this._context.bezierCurveTo(P[0][I],O[0][I],P[1][I],O[1][I],_[z],T[z]);(this._line||this._line!==0&&R===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(_,T){this._x.push(+_),this._y.push(+T)}};function controlPoints(_){var T,R=_.length-1,P,O=new Array(R),I=new Array(R),z=new Array(R);for(O[0]=0,I[0]=2,z[0]=_[0]+2*_[1],T=1;T<R-1;++T)O[T]=1,I[T]=4,z[T]=4*_[T]+2*_[T+1];for(O[R-1]=2,I[R-1]=7,z[R-1]=8*_[R-1]+_[R],T=1;T<R;++T)P=O[T]/I[T-1],I[T]-=P,z[T]-=P*z[T-1];for(O[R-1]=z[R-1]/I[R-1],T=R-2;T>=0;--T)O[T]=(z[T]-O[T+1])/I[T];for(I[R-1]=(_[R]+O[R-1])/2,T=0;T<R-1;++T)I[T]=2*_[T+1]-O[T+1];return[O,I]}function curveNatural(_){return new Natural(_)}function Step(_,T){this._context=_,this._t=T}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1,this._line?this._context.lineTo(_,T):this._context.moveTo(_,T);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,T),this._context.lineTo(_,T);else{var R=this._x*(1-this._t)+_*this._t;this._context.lineTo(R,this._y),this._context.lineTo(R,T)}break}}this._x=_,this._y=T}};function curveStep(_){return new Step(_,.5)}function stepBefore(_){return new Step(_,0)}function stepAfter(_){return new Step(_,1)}function Transform(_,T,R){this.k=_,this.x=T,this.y=R}Transform.prototype={constructor:Transform,scale:function(_){return _===1?this:new Transform(this.k*_,this.x,this.y)},translate:function(_,T){return _===0&T===0?this:new Transform(this.k,this.x+this.k*_,this.y+this.k*T)},apply:function(_){return[_[0]*this.k+this.x,_[1]*this.k+this.y]},applyX:function(_){return _*this.k+this.x},applyY:function(_){return _*this.k+this.y},invert:function(_){return[(_[0]-this.x)/this.k,(_[1]-this.y)/this.k]},invertX:function(_){return(_-this.x)/this.k},invertY:function(_){return(_-this.y)/this.k},rescaleX:function(_){return _.copy().domain(_.range().map(this.invertX,this).map(_.invert,_))},rescaleY:function(_){return _.copy().domain(_.range().map(this.invertY,this).map(_.invert,_))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Transform.prototype;function defined(_){return _!=null&&!Number.isNaN(_)}function ascendingDefined(_,T){return+defined(T)-+defined(_)||ascending$1(_,T)}function descendingDefined(_,T){return+defined(T)-+defined(_)||descending(_,T)}function nonempty(_){return _!=null&&`${_}`!=""}function finite(_){return isFinite(_)?_:NaN}function positive(_){return _>0&&isFinite(_)?_:NaN}function negative(_){return _<0&&isFinite(_)?_:NaN}function format(_,T){if(_ instanceof Date||(_=new Date(+_)),isNaN(_))return typeof T=="function"?T(_):T;const R=_.getUTCHours(),P=_.getUTCMinutes(),O=_.getUTCSeconds(),I=_.getUTCMilliseconds();return`${formatYear(_.getUTCFullYear())}-${pad(_.getUTCMonth()+1,2)}-${pad(_.getUTCDate(),2)}${R||P||O||I?`T${pad(R,2)}:${pad(P,2)}${O||I?`:${pad(O,2)}${I?`.${pad(I,3)}`:""}`:""}Z`:""}`}function formatYear(_){return _<0?`-${pad(-_,6)}`:_>9999?`+${pad(_,6)}`:pad(_,4)}function pad(_,T){return`${_}`.padStart(T,"0")}const re=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function parse(_,T){return re.test(_+="")?new Date(_):typeof T=="function"?T(_):T}function orderof(_){if(_==null)return;const T=_[0],R=_[_.length-1];return descending(T,R)}const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,tickIntervals=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",durationSecond],["5 seconds",5*durationSecond],["15 seconds",15*durationSecond],["30 seconds",30*durationSecond],["minute",durationMinute],["5 minutes",5*durationMinute],["15 minutes",15*durationMinute],["30 minutes",30*durationMinute],["hour",durationHour],["3 hours",3*durationHour],["6 hours",6*durationHour],["12 hours",12*durationHour],["day",durationDay],["2 days",2*durationDay],["week",durationWeek],["2 weeks",2*durationWeek],["month",durationMonth],["3 months",3*durationMonth],["6 months",6*durationMonth],["year",durationYear],["2 years",2*durationYear],["5 years",5*durationYear],["10 years",10*durationYear],["20 years",20*durationYear],["50 years",50*durationYear],["100 years",100*durationYear]],durations=new Map([["second",durationSecond],["minute",durationMinute],["hour",durationHour],["day",durationDay],["monday",durationWeek],["tuesday",durationWeek],["wednesday",durationWeek],["thursday",durationWeek],["friday",durationWeek],["saturday",durationWeek],["sunday",durationWeek],["week",durationWeek],["month",durationMonth],["year",durationYear]]),timeIntervals=new Map([["second",second$1],["minute",timeMinute],["hour",timeHour],["day",timeDay],["monday",timeMonday],["tuesday",timeTuesday],["wednesday",timeWednesday],["thursday",timeThursday],["friday",timeFriday],["saturday",timeSaturday],["sunday",timeSunday],["week",timeSunday],["month",timeMonth],["year",timeYear]]),utcIntervals=new Map([["second",second$1],["minute",utcMinute],["hour",utcHour],["day",unixDay],["monday",utcMonday],["tuesday",utcTuesday],["wednesday",utcWednesday],["thursday",utcThursday],["friday",utcFriday],["saturday",utcSaturday],["sunday",utcSunday],["week",utcSunday],["month",utcMonth],["year",utcYear]]),intervalDuration=Symbol("intervalDuration"),intervalType=Symbol("intervalType");for(const[_,T]of timeIntervals)T[intervalDuration]=durations.get(_),T[intervalType]="time";for(const[_,T]of utcIntervals)T[intervalDuration]=durations.get(_),T[intervalType]="utc";const utcFormatIntervals=[["year",utcYear,"utc"],["month",utcMonth,"utc"],["day",unixDay,"utc",6*durationMonth],["hour",utcHour,"utc",3*durationDay],["minute",utcMinute,"utc",6*durationHour],["second",second$1,"utc",30*durationMinute]],timeFormatIntervals=[["year",timeYear,"time"],["month",timeMonth,"time"],["day",timeDay,"time",6*durationMonth],["hour",timeHour,"time",3*durationDay],["minute",timeMinute,"time",6*durationHour],["second",second$1,"time",30*durationMinute]],formatIntervals=[utcFormatIntervals[0],timeFormatIntervals[0],utcFormatIntervals[1],timeFormatIntervals[1],utcFormatIntervals[2],timeFormatIntervals[2],...utcFormatIntervals.slice(3)];function parseTimeInterval(_){let T=`${_}`.toLowerCase();T.endsWith("s")&&(T=T.slice(0,-1));let R=1;const P=/^(?:(\d+)\s+)/.exec(T);switch(P&&(T=T.slice(P[0].length),R=+P[1]),T){case"quarter":T="month",R*=3;break;case"half":T="month",R*=6;break}let O=utcIntervals.get(T);if(!O)throw new Error(`unknown interval: ${_}`);if(R>1&&!O.every)throw new Error(`non-periodic interval: ${T}`);return[T,R]}function timeInterval(_){return asInterval(parseTimeInterval(_),"time")}function utcInterval(_){return asInterval(parseTimeInterval(_),"utc")}function asInterval([_,T],R){let P=(R==="time"?timeIntervals:utcIntervals).get(_);return T>1&&(P=P.every(T),P[intervalDuration]=durations.get(_)*T,P[intervalType]=R),P}function generalizeTimeInterval(_,T){if(!(T>1))return;const R=_[intervalDuration];if(!tickIntervals.some(([,O])=>O===R)||R%durationDay===0&&durationDay<R&&R<durationMonth)return;const[P]=tickIntervals[bisector(([,O])=>Math.log(O)).center(tickIntervals,Math.log(R*T))];return(_[intervalType]==="time"?timeInterval:utcInterval)(P)}function formatTimeInterval(_,T,R){const P=T==="time"?timeFormat:utcFormat;if(R==null)return P(_==="year"?"%Y":_==="month"?"%Y-%m":_==="day"?"%Y-%m-%d":_==="hour"||_==="minute"?"%Y-%m-%dT%H:%M":_==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const O=getTimeTemplate(R);switch(_){case"millisecond":return formatConditional(P(".%L"),P(":%M:%S"),O);case"second":return formatConditional(P(":%S"),P("%-I:%M"),O);case"minute":return formatConditional(P("%-I:%M"),P("%p"),O);case"hour":return formatConditional(P("%-I %p"),P("%b %-d"),O);case"day":return formatConditional(P("%-d"),P("%b"),O);case"month":return formatConditional(P("%b"),P("%Y"),O);case"year":return P("%Y")}throw new Error("unable to format time ticks")}function getTimeTemplate(_){return _==="left"||_==="right"?(T,R)=>`
${T}
${R}`:_==="top"?(T,R)=>`${R}
${T}`:(T,R)=>`${T}
${R}`}function getFormatIntervals(_){return _==="time"?timeFormatIntervals:_==="utc"?utcFormatIntervals:formatIntervals}function inferTimeFormat(_,T,R){const P=max(pairs(T,(O,I)=>Math.abs(I-O)));if(P<1e3)return formatTimeInterval("millisecond","utc",R);for(const[O,I,z,F]of getFormatIntervals(_)){if(P>F||O==="hour"&&!P)break;if(T.every(G=>I.floor(G)>=G))return formatTimeInterval(O,z,R)}}function formatConditional(_,T,R){return(P,O,I)=>{const z=_(P,O),F=T(P,O),G=O-orderof(I);return O!==G&&I[G]!==void 0&&F===T(I[G],G)?z:R(z,F)}}const TypedArray=Object.getPrototypeOf(Uint8Array),objectToString=Object.prototype.toString;function isArray(_){return _ instanceof Array||_ instanceof TypedArray}function isNumberArray(_){return _ instanceof TypedArray&&!isBigIntArray(_)}function isNumberType(_){return _?.prototype instanceof TypedArray&&!isBigIntType(_)}function isBigIntArray(_){return _ instanceof BigInt64Array||_ instanceof BigUint64Array}function isBigIntType(_){return _===BigInt64Array||_===BigUint64Array}const reindex=Symbol("reindex");function valueof(_,T,R){const P=typeof T;return P==="string"?isArrowTable(_)?maybeTypedArrowify(_.getChild(T),R):maybeTypedMap(_,field(T),R):P==="function"?maybeTypedMap(_,T,R):P==="number"||T instanceof Date||P==="boolean"?map(_,constant(T),R):typeof T?.transform=="function"?maybeTypedArrayify(T.transform(_),R):maybeTake(maybeTypedArrayify(T,R),_?.[reindex])}function maybeTake(_,T){return _!=null&&T?take(_,T):_}function maybeTypedMap(_,T,R){return map(_,isNumberType(R)?(P,O)=>coerceNumber(T(P,O)):T,R)}function maybeTypedArrayify(_,T){return T===void 0?arrayify(_):isArrowVector(_)?maybeTypedArrowify(_,T):_ instanceof T?_:T.from(_,isNumberType(T)&&!isNumberArray(_)?coerceNumber:void 0)}function maybeTypedArrowify(_,T){return _==null?_:(T===void 0||T===Array)&&isArrowDateType(_.type)?coerceDates(vectorToArray(_)):maybeTypedArrayify(vectorToArray(_),T)}function vectorToArray(_){return _.nullCount?_.toJSON():_.toArray()}const singleton=[null],field=_=>T=>{const R=T[_];return R===void 0&&T.type==="Feature"?T.properties?.[_]:R},indexOf={transform:range},identity$1={transform:_=>_},one=()=>1,yes=()=>!0,string=_=>_==null?_:`${_}`,number=_=>_==null?_:+_,first=_=>_?_[0]:void 0,second=_=>_?_[1]:void 0,constant=_=>()=>_;function percentile(_){const T=+`${_}`.slice(1)/100;return(R,P)=>quantile$1(R,T,P)}function coerceNumbers(_){return isNumberArray(_)?_:map(_,coerceNumber,Float64Array)}function coerceNumber(_){return _==null?NaN:Number(_)}function coerceDates(_){return map(_,coerceDate)}function coerceDate(_){return _ instanceof Date&&!isNaN(_)?_:typeof _=="string"?parse(_):_==null||isNaN(_=Number(_))?void 0:new Date(_)}function maybeColorChannel(_,T){return _===void 0&&(_=T),_===null?[void 0,"none"]:isColor(_)?[void 0,_]:[_,void 0]}function maybeNumberChannel(_,T){return _===void 0&&(_=T),_===null||typeof _=="number"?[void 0,_]:[_,void 0]}function maybeKeyword(_,T,R){if(_!=null)return keyword(_,T,R)}function keyword(_,T,R){const P=`${_}`.toLowerCase();if(!R.includes(P))throw new Error(`invalid ${T}: ${_}`);return P}function dataify(_){return isArrowTable(_)?_:arrayify(_)}function arrayify(_){if(_==null||isArray(_))return _;if(isArrowVector(_))return maybeTypedArrowify(_);if(isGeoJSON(_))switch(_.type){case"FeatureCollection":return _.features;case"GeometryCollection":return _.geometries;default:return[_]}return Array.from(_)}function isGeoJSON(_){switch(_?.type){case"FeatureCollection":case"GeometryCollection":case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":return!0;default:return!1}}function map(_,T,R=Array){return _==null?_:_ instanceof R?_.map(T):R.from(_,T)}function slice(_,T=Array){return _ instanceof T?_.slice():T.from(_)}function hasX({x:_,x1:T,x2:R}){return _!==void 0||T!==void 0||R!==void 0}function hasY({y:_,y1:T,y2:R}){return _!==void 0||T!==void 0||R!==void 0}function hasXY(_){return hasX(_)||hasY(_)||_.interval!==void 0}function isObject(_){return _?.toString===objectToString}function isScaleOptions(_){return isObject(_)&&(_.type!==void 0||_.domain!==void 0)}function isOptions(_){return isObject(_)&&typeof _.transform!="function"}function isDomainSort(_){return isOptions(_)&&_.value===void 0&&_.channel===void 0}function maybeZero(_,T,R,P=identity$1){return T===void 0&&R===void 0?(T=0,R=_===void 0?P:_):T===void 0?T=_===void 0?0:_:R===void 0&&(R=_===void 0?0:_),[T,R]}function maybeTuple(_,T){return _===void 0&&T===void 0?[first,second]:[_,T]}function maybeZ({z:_,fill:T,stroke:R}={}){return _===void 0&&([_]=maybeColorChannel(T)),_===void 0&&([_]=maybeColorChannel(R)),_}function lengthof(_){return isArray(_)?_.length:_?.numRows}function range(_){const T=lengthof(_),R=new Uint32Array(T);for(let P=0;P<T;++P)R[P]=P;return R}function take(_,T){return isArray(_)?map(T,R=>_[R],_.constructor):map(T,R=>_.at(R))}function subarray(_,T,R){return _.subarray?_.subarray(T,R):_.slice(T,R)}function keyof(_){return _!==null&&typeof _=="object"?_.valueOf():_}function maybeInput(_,T){if(T[_]!==void 0)return T[_];switch(_){case"x1":case"x2":_="x";break;case"y1":case"y2":_="y";break}return T[_]}function column(_){let T;return[{transform:()=>T,label:labelof(_)},R=>T=R]}function maybeColumn(_){return _==null?[_]:column(_)}function labelof(_,T){return typeof _=="string"?_:_&&_.label!==void 0?_.label:T}function mid(_,T){return{transform(R){const P=_.transform(R),O=T.transform(R);return isTemporal(P)||isTemporal(O)?map(P,(I,z)=>new Date((+P[z]+ +O[z])/2)):map(P,(I,z)=>(+P[z]+ +O[z])/2,Float64Array)},label:_.label}}function maybeApplyInterval(_,T){const R=maybeIntervalTransform(T?.interval,T?.type);return R?map(_,R):_}function maybeIntervalTransform(_,T){const R=maybeInterval(_,T);return R&&(P=>defined(P)?R.floor(P):P)}function maybeInterval(_,T){if(_!=null){if(typeof _=="number")return numberInterval(_);if(typeof _=="string")return(T==="time"?timeInterval:utcInterval)(_);if(typeof _.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof _.offset!="function")throw new Error("invalid interval; missing offset method");return _}}function numberInterval(_){_=+_,0<_&&_<1&&Number.isInteger(1/_)&&(_=-1/_);const T=Math.abs(_);return _<0?{floor:R=>Math.floor(R*T)/T,offset:(R,P=1)=>(R*T+Math.floor(P))/T,range:(R,P)=>range$1(Math.ceil(R*T),P*T).map(O=>O/T)}:{floor:R=>Math.floor(R/T)*T,offset:(R,P=1)=>R+T*Math.floor(P),range:(R,P)=>range$1(Math.ceil(R/T),P/T).map(O=>O*T)}}function maybeRangeInterval(_,T){if(_=maybeInterval(_,T),_&&typeof _.range!="function")throw new Error("invalid interval: missing range method");return _}function maybeNiceInterval(_,T){if(_=maybeRangeInterval(_,T),_&&typeof _.ceil!="function")throw new Error("invalid interval: missing ceil method");return _}function isTimeInterval(_){return isInterval(_)&&typeof _?.floor=="function"&&_.floor()instanceof Date}function isInterval(_){return typeof _?.range=="function"}function maybeValue(_){return _===void 0||isOptions(_)?_:{value:_}}function numberChannel(_){return _==null?null:{transform:T=>valueof(T,_,Float64Array),label:labelof(_)}}function isIterable(_){return _&&typeof _[Symbol.iterator]=="function"}function isTextual(_){for(const T of _)if(T!=null)return typeof T!="object"||T instanceof Date}function isOrdinal(_){for(const T of _){if(T==null)continue;const R=typeof T;return R==="string"||R==="boolean"}}function isTemporal(_){for(const T of _)if(T!=null)return T instanceof Date}function isTemporalString(_){for(const T of _)if(T!=null)return typeof T=="string"&&isNaN(T)&&parse(T)}function isNumericString(_){for(const T of _)if(T!=null){if(typeof T!="string")return!1;if(T.trim())return!isNaN(T)}}function isNumeric(_){for(const T of _)if(T!=null)return typeof T=="number"}function isEvery(_,T){let R;for(const P of _)if(P!=null){if(!T(P))return!1;R=!0}return R}const namedColors=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function isColor(_){return typeof _!="string"?!1:(_=_.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(_)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(_)||namedColors.has(_))}function isOpacity(_){return typeof _=="number"&&(0<=_&&_<=1||isNaN(_))}function isNoneish(_){return _==null||isNone(_)}function isNone(_){return/^\s*none\s*$/i.test(_)}function isRound(_){return/^\s*round\s*$/i.test(_)}function maybeAnchor$1(_,T){return maybeKeyword(_,T,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function maybeFrameAnchor(_="middle"){return maybeAnchor$1(_,"frameAnchor")}function inherit(_={},...T){let R=_;for(const P of T)for(const O in P)if(R[O]===void 0){const I=P[O];R===_?R={...R,[O]:I}:R[O]=I}return R}function named(_){console.warn("named iterables are deprecated; please use an object instead");const T=new Set;return Object.fromEntries(Array.from(_,R=>{const{name:P}=R;if(P==null)throw new Error("missing name");const O=`${P}`;if(O==="__proto__")throw new Error(`illegal name: ${O}`);if(T.has(O))throw new Error(`duplicate name: ${O}`);return T.add(O),[P,R]}))}function maybeNamed(_){return isIterable(_)?named(_):_}function maybeClip(_){return _===!0?_="frame":_===!1?_=null:!isGeoJSON(_)&&_!=null&&(_=keyword(_,"clip",["frame","sphere"]),_==="sphere"&&(_={type:"Sphere"})),_}function isArrowTable(_){return _&&typeof _.getChild=="function"&&typeof _.toArray=="function"&&_.schema&&Array.isArray(_.schema.fields)}function isArrowVector(_){return _&&typeof _.toArray=="function"&&_.type}function isArrowDateType(_){return _&&(_.typeId===8||_.typeId===10)&&_.unit===1}const position=Symbol("position"),color=Symbol("color"),radius=Symbol("radius"),length=Symbol("length"),opacity=Symbol("opacity"),symbol=Symbol("symbol"),projection=Symbol("projection"),registry=new Map([["x",position],["y",position],["fx",position],["fy",position],["r",radius],["color",color],["opacity",opacity],["symbol",symbol],["length",length],["projection",projection]]);function isPosition(_){return _===position||_===projection}function hasNumericRange(_){return _===position||_===radius||_===length||_===opacity}const sqrt3=Math.sqrt(3),sqrt4_3=2/sqrt3,symbolHexagon={draw(_,T){const R=Math.sqrt(T/Math.PI),P=R*sqrt4_3,O=P/2;_.moveTo(0,P),_.lineTo(R,O),_.lineTo(R,-O),_.lineTo(0,-P),_.lineTo(-R,-O),_.lineTo(-R,O),_.closePath()}},symbols=new Map([["asterisk",symbolAsterisk],["circle",symbolCircle],["cross",symbolCross],["diamond",symbolDiamond],["diamond2",symbolDiamond2],["hexagon",symbolHexagon],["plus",symbolPlus],["square",symbolSquare],["square2",symbolSquare2],["star",symbolStar],["times",symbolTimes],["triangle",symbolTriangle],["triangle2",symbolTriangle2],["wye",symbolWye]]);function isSymbolObject(_){return _&&typeof _.draw=="function"}function isSymbol(_){return isSymbolObject(_)?!0:typeof _!="string"?!1:symbols.has(_.toLowerCase())}function maybeSymbol(_){if(_==null||isSymbolObject(_))return _;const T=symbols.get(`${_}`.toLowerCase());if(T)return T;throw new Error(`invalid symbol: ${_}`)}function maybeSymbolChannel(_){if(_==null||isSymbolObject(_))return[void 0,_];if(typeof _=="string"){const T=symbols.get(`${_}`.toLowerCase());if(T)return[void 0,T]}return[_,void 0]}function basic({filter:_,sort:T,reverse:R,transform:P,initializer:O,...I}={},z){if(P===void 0&&(_!=null&&(P=filterTransform(_)),T!=null&&!isDomainSort(T)&&(P=composeTransform(P,sortTransform(T))),R&&(P=composeTransform(P,reverseTransform))),z!=null&&O!=null)throw new Error("transforms cannot be applied after initializers");return{...I,...(T===null||isDomainSort(T))&&{sort:T},transform:composeTransform(P,z)}}function initializer({filter:_,sort:T,reverse:R,initializer:P,...O}={},I){return P===void 0&&(_!=null&&(P=filterTransform(_)),T!=null&&!isDomainSort(T)&&(P=composeInitializer(P,sortTransform(T))),R&&(P=composeInitializer(P,reverseTransform))),{...O,...(T===null||isDomainSort(T))&&{sort:T},initializer:composeInitializer(P,I)}}function composeTransform(_,T){return _==null?T===null?void 0:T:T==null?_===null?void 0:_:function(R,P,O){return{data:R,facets:P}=_.call(this,R,P,O),T.call(this,dataify(R),P,O)}}function composeInitializer(_,T){return _==null?T===null?void 0:T:T==null?_===null?void 0:_:function(R,P,O,...I){let z,F,G,V,Z,Y;return{data:F=R,facets:G=P,channels:z}=_.call(this,R,P,O,...I),{data:Z=F,facets:Y=G,channels:V}=T.call(this,F,G,{...O,...z},...I),{data:Z,facets:Y,channels:{...z,...V}}}}function apply(_,T){return(_.initializer!=null?initializer:basic)(_,T)}function filterTransform(_){return(T,R)=>{const P=valueof(T,_);return{data:T,facets:R.map(O=>O.filter(I=>P[I]))}}}function reverseTransform(_,T){return{data:_,facets:T.map(R=>R.slice().reverse())}}function sort(_,{sort:T,...R}={}){return{...(isOptions(_)&&_.channel!==void 0?initializer:apply)(R,sortTransform(_)),sort:isDomainSort(T)?T:null}}function sortTransform(_){return(typeof _=="function"&&_.length!==1?sortData:sortValue)(_)}function sortData(_){return(T,R)=>{const P=isArray(T)?(O,I)=>_(T[O],T[I]):(O,I)=>_(T.get(O),T.get(I));return{data:T,facets:R.map(O=>O.slice().sort(P))}}}function sortValue(_){let T,R;({channel:T,value:_,order:R}={...maybeValue(_)});const P=T?.startsWith("-");if(P&&(T=T.slice(1)),R===void 0&&(R=P?descendingDefined:ascendingDefined),typeof R!="function")switch(`${R}`.toLowerCase()){case"ascending":R=ascendingDefined;break;case"descending":R=descendingDefined;break;default:throw new Error(`invalid order: ${R}`)}return(O,I,z)=>{let F;if(T===void 0)F=valueof(O,_);else{if(z===void 0)throw new Error("channel sort requires an initializer");if(F=z[T],!F)return{};F=F.value}const G=(V,Z)=>R(F[V],F[Z]);return{data:O,facets:I.map(V=>V.slice().sort(G))}}}function hasOutput(_,...T){for(const{name:R}of _)if(T.includes(R))return!0;return!1}function maybeOutputs(_,T,R=maybeOutput){const P=Object.entries(_);return T.title!=null&&_.title===void 0&&P.push(["title",reduceTitle]),T.href!=null&&_.href===void 0&&P.push(["href",reduceFirst]),P.filter(([,O])=>O!==void 0).map(([O,I])=>I===null?nullOutput(O):R(O,I,T))}function maybeOutput(_,T,R,P=maybeEvaluator){let O;isObject(T)&&"reduce"in T&&(O=T.scale,T=T.reduce);const I=P(_,T,R),[z,F]=column(I.label);let G;return{name:_,output:O===void 0?z:{value:z,scale:O},initialize(V){I.initialize(V),G=F([])},scope(V,Z){I.scope(V,Z)},reduce(V,Z){G.push(I.reduce(V,Z))}}}function nullOutput(_){return{name:_,initialize(){},scope(){},reduce(){}}}function maybeEvaluator(_,T,R,P=maybeReduce){const O=maybeInput(_,R),I=P(T,O);let z,F;return{label:labelof(I===reduceCount?null:O,I.label),initialize(G){z=O===void 0?G:valueof(G,O),I.scope==="data"&&(F=I.reduceIndex(range(G),z))},scope(G,V){I.scope===G&&(F=I.reduceIndex(V,z))},reduce(G,V){return I.scope==null?I.reduceIndex(G,z,V):I.reduceIndex(G,z,F,V)}}}function maybeGroup(_,T){return T?group(_,R=>T[R]):[[,_]]}function maybeReduce(_,T,R=invalidReduce){if(_==null)return R(_);if(typeof _.reduceIndex=="function")return _;if(typeof _.reduce=="function"&&isObject(_))return reduceReduce(_);if(typeof _=="function")return reduceFunction(_);if(/^p\d{2}$/i.test(_))return reduceAccessor(percentile(_));switch(`${_}`.toLowerCase()){case"first":return reduceFirst;case"last":return reduceLast;case"identity":return reduceIdentity;case"count":return reduceCount;case"distinct":return reduceDistinct;case"sum":return T==null?reduceCount:reduceSum;case"proportion":return reduceProportion(T,"data");case"proportion-facet":return reduceProportion(T,"facet");case"deviation":return reduceAccessor(deviation);case"min":return reduceAccessor(min$1);case"min-index":return reduceAccessor(minIndex);case"max":return reduceAccessor(max);case"max-index":return reduceAccessor(maxIndex);case"mean":return reduceMaybeTemporalAccessor(mean);case"median":return reduceMaybeTemporalAccessor(median);case"variance":return reduceAccessor(variance);case"mode":return reduceAccessor(mode)}return R(_)}function invalidReduce(_){throw new Error(`invalid reduce: ${_}`)}function maybeSubgroup(_,T){for(const R in T){const P=T[R];if(P!==void 0&&!_.some(O=>O.name===R))return P}}function maybeSort(_,T,R){if(T){const P=T.output.transform(),O=(I,z)=>ascendingDefined(P[I],P[z]);_.forEach(I=>I.sort(O))}R&&_.forEach(P=>P.reverse())}function reduceReduce(_){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{..._,reduceIndex:_.reduce.bind(_)}}function reduceFunction(_){return{reduceIndex(T,R,P){return _(take(R,T),P)}}}function reduceAccessor(_){return{reduceIndex(T,R){return _(T,P=>R[P])}}}function reduceMaybeTemporalAccessor(_){return{reduceIndex(T,R){const P=_(T,O=>R[O]);return isTemporal(R)?new Date(P):P}}}const reduceIdentity={reduceIndex(_,T){return take(T,_)}},reduceFirst={reduceIndex(_,T){return T[_[0]]}},reduceTitle={reduceIndex(_,T){const P=sort$1(rollup(_,I=>I.length,I=>T[I]),second),O=P.slice(-5).reverse();if(O.length<P.length){const I=P.slice(0,-4);O[4]=[` ${I.length.toLocaleString("en-US")} more`,sum(I,second)]}return O.map(([I,z])=>`${I} (${z.toLocaleString("en-US")})`).join(`
`)}},reduceLast={reduceIndex(_,T){return T[_[_.length-1]]}},reduceCount={label:"Frequency",reduceIndex(_){return _.length}},reduceDistinct={label:"Distinct",reduceIndex(_,T){const R=new InternSet;for(const P of _)R.add(T[P]);return R.size}},reduceSum=reduceAccessor(sum);function reduceProportion(_,T){return _==null?{scope:T,label:"Frequency",reduceIndex:(R,P,O=1)=>R.length/O}:{scope:T,reduceIndex:(R,P,O=1)=>sum(R,I=>P[I])/O}}const reduceZ={reduceIndex(_,T,{z:R}){return R}};function createChannel(_,{scale:T,type:R,value:P,filter:O,hint:I,label:z=labelof(P)},F){return I===void 0&&typeof P?.transform=="function"&&(I=P.hint),inferChannelScale(F,{scale:T,type:R,value:valueof(_,P),label:z,filter:O,hint:I})}function createChannels(_,T){return Object.fromEntries(Object.entries(_).map(([R,P])=>[R,createChannel(T,P,R)]))}function valueObject(_,T){const R=Object.fromEntries(Object.entries(_).map(([P,{scale:O,value:I}])=>{const z=O==null?null:T[O];return[P,z==null?I:map(I,z)]}));return R.channels=_,R}function inferChannelScale(_,T){const{scale:R,value:P}=T;if(R===!0||R==="auto")switch(_){case"fill":case"stroke":case"color":T.scale=R!==!0&&isEvery(P,isColor)?null:"color",T.defaultScale="color";break;case"fillOpacity":case"strokeOpacity":case"opacity":T.scale=R!==!0&&isEvery(P,isOpacity)?null:"opacity",T.defaultScale="opacity";break;case"symbol":R!==!0&&isEvery(P,isSymbol)?(T.scale=null,T.value=map(P,maybeSymbol)):T.scale="symbol",T.defaultScale="symbol";break;default:T.scale=registry.has(_)?_:null;break}else if(R===!1)T.scale=null;else if(R!=null&&!registry.has(R))throw new Error(`unknown scale: ${R}`);return T}function channelDomain(_,T,R,P,O){const{order:I,reverse:z,reduce:F=!0,limit:G}=O;for(const V in O){if(!registry.has(V))continue;let{value:Z,order:Y=I,reverse:Q=z,reduce:J=F,limit:ee=G}=maybeValue(O[V]);const ne=Z?.startsWith("-");if(ne&&(Z=Z.slice(1)),Y=Y===void 0?ne!==(Z==="width"||Z==="height")?descendingGroup:ascendingGroup:maybeOrder$1(Y),J==null||J===!1)continue;const se=V==="fx"||V==="fy"?reindexFacetChannel(T,P[V]):findScaleChannel(R,V);if(!se)throw new Error(`missing channel for scale: ${V}`);const oe=se.value,[ae=0,ce=1/0]=isIterable(ee)?ee:ee<0?[ee]:[0,ee];if(Z==null)se.domain=()=>{let le=Array.from(new InternSet(oe));return Q&&(le=le.reverse()),(ae!==0||ce!==1/0)&&(le=le.slice(ae,ce)),le};else{const le=Z==="data"?_:Z==="height"?difference(R,"y1","y2"):Z==="width"?difference(R,"x1","x2"):values(R,Z,Z==="y"?"y2":Z==="x"?"x2":void 0),pe=maybeReduce(J===!0?"max":J,le);se.domain=()=>{let me=rollups(range(oe),he=>pe.reduceIndex(he,le),he=>oe[he]);return Y&&me.sort(Y),Q&&me.reverse(),(ae!==0||ce!==1/0)&&(me=me.slice(ae,ce)),me.map(first)}}}}function findScaleChannel(_,T){for(const R in _){const P=_[R];if(P.scale===T)return P}}function reindexFacetChannel(_,T){const R=_.original;if(R===_)return T;const P=T.value,O=T.value=[];for(let I=0;I<R.length;++I){const z=P[R[I][0]];for(const F of _[I])O[F]=z}return T}function difference(_,T,R){const P=values(_,T),O=values(_,R);return map(O,(I,z)=>Math.abs(I-P[z]),Float64Array)}function values(_,T,R){let P=_[T];if(!P&&R!==void 0&&(P=_[R]),P)return P.value;throw new Error(`missing channel: ${T}`)}function maybeOrder$1(_){if(_==null||typeof _=="function")return _;switch(`${_}`.toLowerCase()){case"ascending":return ascendingGroup;case"descending":return descendingGroup}throw new Error(`invalid order: ${_}`)}function ascendingGroup([_,T],[R,P]){return ascendingDefined(T,P)||ascendingDefined(_,R)}function descendingGroup([_,T],[R,P]){return descendingDefined(T,P)||ascendingDefined(_,R)}function getSource(_,T){let R=_[T];if(R){for(;R.source;)R=R.source;return R.source===null?null:R}}const categoricalSchemes=new Map([["accent",schemeAccent],["category10",schemeCategory10],["dark2",schemeDark2],["observable10",schemeObservable10],["paired",schemePaired],["pastel1",schemePastel1],["pastel2",schemePastel2],["set1",schemeSet1],["set2",schemeSet2],["set3",schemeSet3],["tableau10",schemeTableau10]]);function isCategoricalScheme(_){return _!=null&&categoricalSchemes.has(`${_}`.toLowerCase())}const ordinalSchemes=new Map([...categoricalSchemes,["brbg",scheme11(scheme$q,interpolateBrBG)],["prgn",scheme11(scheme$p,interpolatePRGn)],["piyg",scheme11(scheme$o,interpolatePiYG)],["puor",scheme11(scheme$n,interpolatePuOr)],["rdbu",scheme11(scheme$m,interpolateRdBu)],["rdgy",scheme11(scheme$l,interpolateRdGy)],["rdylbu",scheme11(scheme$k,interpolateRdYlBu)],["rdylgn",scheme11(scheme$j,interpolateRdYlGn)],["spectral",scheme11(scheme$i,interpolateSpectral)],["burd",scheme11r(scheme$m,interpolateRdBu)],["buylrd",scheme11r(scheme$k,interpolateRdYlBu)],["blues",scheme9(scheme$5,interpolateBlues)],["greens",scheme9(scheme$4,interpolateGreens)],["greys",scheme9(scheme$3,interpolateGreys)],["oranges",scheme9(scheme,interpolateOranges)],["purples",scheme9(scheme$2,interpolatePurples)],["reds",scheme9(scheme$1,interpolateReds)],["turbo",schemei(interpolateTurbo)],["viridis",schemei(interpolateViridis)],["magma",schemei(magma)],["inferno",schemei(inferno)],["plasma",schemei(plasma)],["cividis",schemei(interpolateCividis)],["cubehelix",schemei(interpolateCubehelixDefault)],["warm",schemei(warm)],["cool",schemei(cool)],["bugn",scheme9(scheme$h,interpolateBuGn)],["bupu",scheme9(scheme$g,interpolateBuPu)],["gnbu",scheme9(scheme$f,interpolateGnBu)],["orrd",scheme9(scheme$e,interpolateOrRd)],["pubu",scheme9(scheme$c,interpolatePuBu)],["pubugn",scheme9(scheme$d,interpolatePuBuGn)],["purd",scheme9(scheme$b,interpolatePuRd)],["rdpu",scheme9(scheme$a,interpolateRdPu)],["ylgn",scheme9(scheme$8,interpolateYlGn)],["ylgnbu",scheme9(scheme$9,interpolateYlGnBu)],["ylorbr",scheme9(scheme$7,interpolateYlOrBr)],["ylorrd",scheme9(scheme$6,interpolateYlOrRd)],["rainbow",schemeicyclical(interpolateRainbow)],["sinebow",schemeicyclical(interpolateSinebow)]]);function scheme9(_,T){return({length:R})=>R===1?[_[3][1]]:R===2?[_[3][1],_[3][2]]:(R=Math.max(3,Math.floor(R)),R>9?quantize(T,R):_[R])}function scheme11(_,T){return({length:R})=>R===2?[_[3][0],_[3][2]]:(R=Math.max(3,Math.floor(R)),R>11?quantize(T,R):_[R])}function scheme11r(_,T){return({length:R})=>R===2?[_[3][2],_[3][0]]:(R=Math.max(3,Math.floor(R)),R>11?quantize(P=>T(1-P),R):_[R].slice().reverse())}function schemei(_){return({length:T})=>quantize(_,Math.max(2,Math.floor(T)))}function schemeicyclical(_){return({length:T})=>quantize(_,Math.floor(T)+1).slice(0,-1)}function ordinalScheme(_){const T=`${_}`.toLowerCase();if(!ordinalSchemes.has(T))throw new Error(`unknown ordinal scheme: ${T}`);return ordinalSchemes.get(T)}function ordinalRange(_,T){const R=ordinalScheme(_),P=typeof R=="function"?R({length:T}):R;return P.length!==T?P.slice(0,T):P}function maybeBooleanRange(_,T="greys"){const R=new Set,[P,O]=ordinalRange(T,2);for(const I of _)if(I!=null)if(I===!0)R.add(O);else if(I===!1)R.add(P);else return;return[...R]}const quantitativeSchemes=new Map([["brbg",interpolateBrBG],["prgn",interpolatePRGn],["piyg",interpolatePiYG],["puor",interpolatePuOr],["rdbu",interpolateRdBu],["rdgy",interpolateRdGy],["rdylbu",interpolateRdYlBu],["rdylgn",interpolateRdYlGn],["spectral",interpolateSpectral],["burd",_=>interpolateRdBu(1-_)],["buylrd",_=>interpolateRdYlBu(1-_)],["blues",interpolateBlues],["greens",interpolateGreens],["greys",interpolateGreys],["purples",interpolatePurples],["reds",interpolateReds],["oranges",interpolateOranges],["turbo",interpolateTurbo],["viridis",interpolateViridis],["magma",magma],["inferno",inferno],["plasma",plasma],["cividis",interpolateCividis],["cubehelix",interpolateCubehelixDefault],["warm",warm],["cool",cool],["bugn",interpolateBuGn],["bupu",interpolateBuPu],["gnbu",interpolateGnBu],["orrd",interpolateOrRd],["pubugn",interpolatePuBuGn],["pubu",interpolatePuBu],["purd",interpolatePuRd],["rdpu",interpolateRdPu],["ylgnbu",interpolateYlGnBu],["ylgn",interpolateYlGn],["ylorbr",interpolateYlOrBr],["ylorrd",interpolateYlOrRd],["rainbow",interpolateRainbow],["sinebow",interpolateSinebow]]);function quantitativeScheme(_){const T=`${_}`.toLowerCase();if(!quantitativeSchemes.has(T))throw new Error(`unknown quantitative scheme: ${T}`);return quantitativeSchemes.get(T)}const divergingSchemes=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function isDivergingScheme(_){return _!=null&&divergingSchemes.has(`${_}`.toLowerCase())}const flip=_=>T=>_(1-T),unit=[0,1],interpolators=new Map([["number",interpolateNumber],["rgb",interpolateRgb],["hsl",interpolateHsl],["hcl",interpolateHcl],["lab",lab]]);function maybeInterpolator(_){const T=`${_}`.toLowerCase();if(!interpolators.has(T))throw new Error(`unknown interpolator: ${T}`);return interpolators.get(T)}function createScaleQ(_,T,R,{type:P,nice:O,clamp:I,zero:z,domain:F=inferAutoDomain(_,R),unknown:G,round:V,scheme:Z,interval:Y,range:Q=registry.get(_)===radius?inferRadialRange(R,F):registry.get(_)===length?inferLengthRange(R,F):registry.get(_)===opacity?unit:void 0,interpolate:J=registry.get(_)===color?Z==null&&Q!==void 0?interpolateRgb:quantitativeScheme(Z!==void 0?Z:P==="cyclical"?"rainbow":"turbo"):V?interpolateRound:interpolateNumber,reverse:ee}){if(F=maybeRepeat(F),Y=maybeRangeInterval(Y,P),(P==="cyclical"||P==="sequential")&&(P="linear"),typeof J!="function"&&(J=maybeInterpolator(J)),ee=!!ee,Q!==void 0){const ne=F.length,se=(Q=maybeRepeat(Q)).length;if(ne!==se){if(J.length===1)throw new Error("invalid piecewise interpolator");J=piecewise(J,Q),Q=void 0}}if(J.length===1?(ee&&(J=flip(J),ee=!1),Q===void 0&&(Q=Float64Array.from(F,(ne,se)=>se/(F.length-1)),Q.length===2&&(Q=unit)),T.interpolate((Q===unit?constant:interpolatePiecewise)(J))):T.interpolate(J),z){const[ne,se]=extent$1(F);(ne>0||se<0)&&(F=slice(F),(orderof(F)||1)===Math.sign(ne)?F[0]=0:F[F.length-1]=0)}return ee&&(F=reverse(F)),T.domain(F).unknown(G),O&&(T.nice(maybeNice(O,P)),F=T.domain()),Q!==void 0&&T.range(Q),I&&T.clamp(I),{type:P,domain:F,range:Q,scale:T,interpolate:J,interval:Y}}function maybeRepeat(_){return _=arrayify(_),_.length>=2?_:[_[0],_[0]]}function maybeNice(_,T){return _===!0?void 0:typeof _=="number"?_:maybeNiceInterval(_,T)}function createScaleLinear(_,T,R){return createScaleQ(_,linear(),T,R)}function createScaleSqrt(_,T,R){return createScalePow(_,T,{...R,exponent:.5})}function createScalePow(_,T,{exponent:R=1,...P}){return createScaleQ(_,pow().exponent(R),T,{...P,type:"pow"})}function createScaleLog(_,T,{base:R=10,domain:P=inferLogDomain(T),...O}){return createScaleQ(_,log().base(R),T,{...O,domain:P})}function createScaleSymlog(_,T,{constant:R=1,...P}){return createScaleQ(_,symlog().constant(R),T,P)}function createScaleQuantile(_,T,{range:R,quantiles:P=R===void 0?5:(R=[...R]).length,n:O=P,scheme:I="rdylbu",domain:z=inferQuantileDomain(T),unknown:F,interpolate:G,reverse:V}){return R===void 0&&(R=G!==void 0?quantize(G,O):registry.get(_)===color?ordinalRange(I,O):void 0),z.length>0&&(z=quantile(z,R===void 0?{length:O}:R).quantiles()),createScaleThreshold(_,T,{domain:z,range:R,reverse:V,unknown:F})}function createScaleQuantize(_,T,{range:R,n:P=R===void 0?5:(R=[...R]).length,scheme:O="rdylbu",domain:I=inferAutoDomain(_,T),unknown:z,interpolate:F,reverse:G}){const[V,Z]=extent$1(I);let Y;return R===void 0?(Y=ticks(V,Z,P),Y[0]<=V&&Y.splice(0,1),Y[Y.length-1]>=Z&&Y.pop(),P=Y.length+1,R=F!==void 0?quantize(F,P):registry.get(_)===color?ordinalRange(O,P):void 0):(Y=quantize(interpolateNumber(V,Z),P+1).slice(1,-1),V instanceof Date&&(Y=Y.map(Q=>new Date(Q)))),orderof(arrayify(I))<0&&Y.reverse(),createScaleThreshold(_,T,{domain:Y,range:R,reverse:G,unknown:z})}function createScaleThreshold(_,T,{domain:R=[0],unknown:P,scheme:O="rdylbu",interpolate:I,range:z=I!==void 0?quantize(I,R.length+1):registry.get(_)===color?ordinalRange(O,R.length+1):void 0,reverse:F}){R=arrayify(R);const G=orderof(R);if(!isNaN(G)&&!isOrdered(R,G))throw new Error(`the ${_} scale has a non-monotonic domain`);return F&&(z=reverse(z)),{type:"threshold",scale:threshold(G<0?reverse(R):R,z===void 0?[]:z).unknown(P),domain:R,range:z}}function isOrdered(_,T){for(let R=1,P=_.length,O=_[0];R<P;++R){const I=descending(O,O=_[R]);if(I!==0&&I!==T)return!1}return!0}function createScaleIdentity(_){return{type:"identity",scale:hasNumericRange(registry.get(_))?identity$2():T=>T}}function inferDomain$1(_,T=finite){return _.length?[min$1(_,({value:R})=>R===void 0?R:min$1(R,T)),max(_,({value:R})=>R===void 0?R:max(R,T))]:[0,1]}function inferAutoDomain(_,T){const R=registry.get(_);return(R===radius||R===opacity||R===length?inferZeroDomain:inferDomain$1)(T)}function inferZeroDomain(_){return[0,_.length?max(_,({value:T})=>T===void 0?T:max(T,finite)):1]}function inferRadialRange(_,T){const R=_.find(({radius:z})=>z!==void 0);if(R!==void 0)return[0,R.radius];const P=quantile$1(_,.5,({value:z})=>z===void 0?NaN:quantile$1(z,.25,positive)),O=T.map(z=>3*Math.sqrt(z/P)),I=30/max(O);return I<1?O.map(z=>z*I):O}function inferLengthRange(_,T){const R=median(_,({value:I})=>I===void 0?NaN:median(I,Math.abs)),P=T.map(I=>12*I/R),O=60/max(P);return O<1?P.map(I=>I*O):P}function inferLogDomain(_){for(const{value:T}of _)if(T!==void 0)for(let R of T){if(R>0)return inferDomain$1(_,positive);if(R<0)return inferDomain$1(_,negative)}return[1,10]}function inferQuantileDomain(_){const T=[];for(const{value:R}of _)if(R!==void 0)for(const P of R)T.push(P);return T}function interpolatePiecewise(_){return(T,R)=>P=>_(T+P*(R-T))}let warnings=0,lastMessage;function consumeWarnings(){const _=warnings;return warnings=0,lastMessage=void 0,_}function warn(_){_!==lastMessage&&(lastMessage=_,console.warn(_),++warnings)}function createScaleD(_,T,R,P,{type:O,nice:I,clamp:z,domain:F=inferDomain$1(P),unknown:G,pivot:V=0,scheme:Z,range:Y,symmetric:Q=!0,interpolate:J=registry.get(_)===color?Z==null&&Y!==void 0?interpolateRgb:quantitativeScheme(Z!==void 0?Z:"rdbu"):interpolateNumber,reverse:ee}){V=+V,F=arrayify(F);let[ne,se]=F;if(F.length>2&&warn(`Warning: the diverging ${_} scale domain contains extra elements.`),descending(ne,se)<0&&([ne,se]=[se,ne],ee=!ee),ne=Math.min(ne,V),se=Math.max(se,V),typeof J!="function"&&(J=maybeInterpolator(J)),Y!==void 0&&(J=J.length===1?interpolatePiecewise(J)(...Y):piecewise(J,Y)),ee&&(J=flip(J)),Q){const oe=R.apply(V),ae=oe-R.apply(ne),ce=R.apply(se)-oe;ae<ce?ne=R.invert(oe-ce):ae>ce&&(se=R.invert(oe+ae))}return T.domain([ne,V,se]).unknown(G).interpolator(J),z&&T.clamp(z),I&&T.nice(I),{type:O,domain:[ne,se],pivot:V,interpolate:J,scale:T}}function createScaleDiverging(_,T,R){return createScaleD(_,diverging(),transformIdentity,T,R)}function createScaleDivergingSqrt(_,T,R){return createScaleDivergingPow(_,T,{...R,exponent:.5})}function createScaleDivergingPow(_,T,{exponent:R=1,...P}){return createScaleD(_,divergingPow().exponent(R=+R),transformPow(R),T,{...P,type:"diverging-pow"})}function createScaleDivergingLog(_,T,{base:R=10,pivot:P=1,domain:O=inferDomain$1(T,P<0?negative:positive),...I}){return createScaleD(_,divergingLog().base(R=+R),transformLog,T,{domain:O,pivot:P,...I})}function createScaleDivergingSymlog(_,T,{constant:R=1,...P}){return createScaleD(_,divergingSymlog().constant(R=+R),transformSymlog(R),T,P)}const transformIdentity={apply(_){return _},invert(_){return _}},transformLog={apply:Math.log,invert:Math.exp},transformSqrt={apply(_){return Math.sign(_)*Math.sqrt(Math.abs(_))},invert(_){return Math.sign(_)*(_*_)}};function transformPow(_){return _===.5?transformSqrt:{apply(T){return Math.sign(T)*Math.pow(Math.abs(T),_)},invert(T){return Math.sign(T)*Math.pow(Math.abs(T),1/_)}}}function transformSymlog(_){return{apply(T){return Math.sign(T)*Math.log1p(Math.abs(T/_))},invert(T){return Math.sign(T)*Math.expm1(Math.abs(T))*_}}}function createScaleT(_,T,R,P){return createScaleQ(_,T,R,P)}function createScaleTime(_,T,R){return createScaleT(_,time(),T,R)}function createScaleUtc(_,T,R){return createScaleT(_,utcTime(),T,R)}const ordinalImplicit=Symbol("ordinal");function createScaleO(_,T,R,{type:P,interval:O,domain:I,range:z,reverse:F,hint:G}){return O=maybeRangeInterval(O,P),I===void 0&&(I=inferDomain(R,O,_)),(P==="categorical"||P===ordinalImplicit)&&(P="ordinal"),F&&(I=reverse(I)),I=T.domain(I).domain(),z!==void 0&&(typeof z=="function"&&(z=z(I)),T.range(z)),{type:P,domain:I,range:z,scale:T,hint:G,interval:O}}function createScaleOrdinal(_,T,{type:R,interval:P,domain:O,range:I,scheme:z,unknown:F,...G}){P=maybeRangeInterval(P,R),O===void 0&&(O=inferDomain(T,P,_));let V;if(registry.get(_)===symbol)V=inferSymbolHint(T),I=I===void 0?inferSymbolRange(V):map(I,maybeSymbol);else if(registry.get(_)===color&&(I===void 0&&(R==="ordinal"||R===ordinalImplicit)&&(I=maybeBooleanRange(O,z),I!==void 0&&(z=void 0)),z===void 0&&I===void 0&&(z=R==="ordinal"?"turbo":"observable10"),z!==void 0))if(I!==void 0){const Z=quantitativeScheme(z),Y=I[0],Q=I[1]-I[0];I=({length:J})=>quantize(ee=>Z(Y+Q*ee),J)}else I=ordinalScheme(z);if(F===implicit)throw new Error(`implicit unknown on ${_} scale is not supported`);return createScaleO(_,ordinal().unknown(F),T,{...G,type:R,domain:O,range:I,hint:V})}function createScalePoint(_,T,{align:R=.5,padding:P=.5,...O}){return maybeRound(point$4().align(R).padding(P),T,O,_)}function createScaleBand(_,T,{align:R=.5,padding:P=.1,paddingInner:O=P,paddingOuter:I=_==="fx"||_==="fy"?0:P,...z}){return maybeRound(band().align(R).paddingInner(O).paddingOuter(I),T,z,_)}function maybeRound(_,T,R,P){let{round:O}=R;return O!==void 0&&_.round(O=!!O),_=createScaleO(P,_,T,R),_.round=O,_}function inferDomain(_,T,R){const P=new InternSet;for(const{value:O,domain:I}of _){if(I!==void 0)return I();if(O!==void 0)for(const z of O)P.add(z)}if(T!==void 0){const[O,I]=extent$1(P).map(T.floor,T);return T.range(O,T.offset(I))}if(P.size>1e4&&registry.get(R)===position)throw new Error(`implicit ordinal domain of ${R} scale has more than 10,000 values`);return sort$1(P,ascendingDefined)}function inferHint(_,T){let R;for(const{hint:P}of _){const O=P?.[T];if(O!==void 0){if(R===void 0)R=O;else if(R!==O)return}}return R}function inferSymbolHint(_){return{fill:inferHint(_,"fill"),stroke:inferHint(_,"stroke")}}function inferSymbolRange(_){return isNoneish(_.fill)?symbolsStroke:symbolsFill}function createScales(_,{label:T,inset:R=0,insetTop:P=R,insetRight:O=R,insetBottom:I=R,insetLeft:z=R,round:F,nice:G,clamp:V,zero:Z,align:Y,padding:Q,projection:J,facet:{label:ee=T}={},...ne}={}){const se={};for(const[oe,ae]of _){const ce=ne[oe],le=createScale(oe,ae,{round:registry.get(oe)===position?F:void 0,nice:G,clamp:V,zero:Z,align:Y,padding:Q,projection:J,...ce});if(le){let{label:pe=oe==="fx"||oe==="fy"?ee:T,percent:me,transform:he,inset:fe,insetTop:de=fe!==void 0?fe:oe==="y"?P:0,insetRight:be=fe!==void 0?fe:oe==="x"?O:0,insetBottom:ye=fe!==void 0?fe:oe==="y"?I:0,insetLeft:Ce=fe!==void 0?fe:oe==="x"?z:0}=ce||{};if(he==null)he=void 0;else if(typeof he!="function")throw new Error("invalid scale transform; not a function");le.percent=!!me,le.label=pe===void 0?inferScaleLabel(ae,le):pe,le.transform=he,oe==="x"||oe==="fx"?(le.insetLeft=+Ce,le.insetRight=+be):(oe==="y"||oe==="fy")&&(le.insetTop=+de,le.insetBottom=+ye),se[oe]=le}}return se}function createScaleFunctions(_){const T={},R={scales:T};for(const[P,O]of Object.entries(_)){const{scale:I,type:z,interval:F,label:G}=O;T[P]=exposeScale(O),R[P]=I,I.type=z,F!=null&&(I.interval=F),G!=null&&(I.label=G)}return R}function autoScaleRange(_,T){const{x:R,y:P,fx:O,fy:I}=_,z=O||I?outerDimensions(T):T;O&&autoScaleRangeX(O,z),I&&autoScaleRangeY(I,z);const F=O||I?innerDimensions(_,T):T;R&&autoScaleRangeX(R,F),P&&autoScaleRangeY(P,F)}function inferScaleLabel(_=[],T){let R;for(const{label:P}of _)if(P!==void 0){if(R===void 0)R=P;else if(R!==P)return}if(R!==void 0)return!isOrdinalScale(T)&&T.percent&&(R=`${R} (%)`),{inferred:!0,toString:()=>R}}function inferScaleOrder(_){return Math.sign(orderof(_.domain()))*Math.sign(orderof(_.range()))}function outerDimensions(_){const{marginTop:T,marginRight:R,marginBottom:P,marginLeft:O,width:I,height:z,facet:{marginTop:F,marginRight:G,marginBottom:V,marginLeft:Z}}=_;return{marginTop:Math.max(T,F),marginRight:Math.max(R,G),marginBottom:Math.max(P,V),marginLeft:Math.max(O,Z),width:I,height:z}}function innerDimensions({fx:_,fy:T},R){const{marginTop:P,marginRight:O,marginBottom:I,marginLeft:z,width:F,height:G}=outerDimensions(R);return{marginTop:P,marginRight:O,marginBottom:I,marginLeft:z,width:_?_.scale.bandwidth()+z+O:F,height:T?T.scale.bandwidth()+P+I:G,facet:{width:F,height:G}}}function autoScaleRangeX(_,T){if(_.range===void 0){const{insetLeft:R,insetRight:P}=_,{width:O,marginLeft:I=0,marginRight:z=0}=T,F=I+R,G=O-z-P;_.range=[F,Math.max(F,G)],isOrdinalScale(_)||(_.range=piecewiseRange(_)),_.scale.range(_.range)}autoScaleRound(_)}function autoScaleRangeY(_,T){if(_.range===void 0){const{insetTop:R,insetBottom:P}=_,{height:O,marginTop:I=0,marginBottom:z=0}=T,F=I+R,G=O-z-P;_.range=[Math.max(F,G),F],isOrdinalScale(_)?_.range.reverse():_.range=piecewiseRange(_),_.scale.range(_.range)}autoScaleRound(_)}function autoScaleRound(_){_.round===void 0&&isBandScale(_)&&roundError(_)<=30&&_.scale.round(!0)}function roundError({scale:_}){const T=_.domain().length,[R,P]=_.range(),O=_.paddingInner?_.paddingInner():1,I=_.paddingOuter?_.paddingOuter():_.padding(),z=T-O,F=Math.abs(P-R)/Math.max(1,z+I*2);return(F-Math.floor(F))*z}function piecewiseRange(_){const T=_.scale.domain().length+isThresholdScale(_);if(!(T>2))return _.range;const[R,P]=_.range;return Array.from({length:T},(O,I)=>R+I/(T-1)*(P-R))}function createScale(_,T=[],R={}){const P=inferScaleType(_,T,R);if(R.type===void 0&&R.domain===void 0&&R.range===void 0&&R.interval==null&&_!=="fx"&&_!=="fy"&&isOrdinalScale({type:P})){const O=T.map(({value:I})=>I).filter(I=>I!==void 0);O.some(isTemporal)?warn(`Warning: some data associated with the ${_} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${formatScaleType(P)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${_} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${_} scale to "${formatScaleType(P)}".`):O.some(isTemporalString)?warn(`Warning: some data associated with the ${_} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${formatScaleType(P)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${_} scale to "${formatScaleType(P)}".`):O.some(isNumericString)&&warn(`Warning: some data associated with the ${_} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${formatScaleType(P)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${_} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${_} scale to "${formatScaleType(P)}".`)}switch(R.type=P,P){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":R=coerceType(T,R,coerceNumbers);break;case"identity":switch(registry.get(_)){case position:R=coerceType(T,R,coerceNumbers);break;case symbol:R=coerceType(T,R,coerceSymbols);break}break;case"utc":case"time":R=coerceType(T,R,coerceDates);break}switch(P){case"diverging":return createScaleDiverging(_,T,R);case"diverging-sqrt":return createScaleDivergingSqrt(_,T,R);case"diverging-pow":return createScaleDivergingPow(_,T,R);case"diverging-log":return createScaleDivergingLog(_,T,R);case"diverging-symlog":return createScaleDivergingSymlog(_,T,R);case"categorical":case"ordinal":case ordinalImplicit:return createScaleOrdinal(_,T,R);case"cyclical":case"sequential":case"linear":return createScaleLinear(_,T,R);case"sqrt":return createScaleSqrt(_,T,R);case"threshold":return createScaleThreshold(_,T,R);case"quantile":return createScaleQuantile(_,T,R);case"quantize":return createScaleQuantize(_,T,R);case"pow":return createScalePow(_,T,R);case"log":return createScaleLog(_,T,R);case"symlog":return createScaleSymlog(_,T,R);case"utc":return createScaleUtc(_,T,R);case"time":return createScaleTime(_,T,R);case"point":return createScalePoint(_,T,R);case"band":return createScaleBand(_,T,R);case"identity":return createScaleIdentity(_);case void 0:return;default:throw new Error(`unknown scale type: ${P}`)}}function formatScaleType(_){return typeof _=="symbol"?_.description:_}function maybeScaleType(_){return typeof _=="string"?`${_}`.toLowerCase():_}const typeProjection={toString:()=>"projection"};function inferScaleType(_,T,{type:R,domain:P,range:O,scheme:I,pivot:z,projection:F}){if(R=maybeScaleType(R),_==="fx"||_==="fy")return"band";(_==="x"||_==="y")&&F!=null&&(R=typeProjection);for(const Z of T){const Y=maybeScaleType(Z.type);if(Y!==void 0){if(R===void 0)R=Y;else if(R!==Y)throw new Error(`scale incompatible with channel: ${R} !== ${Y}`)}}if(R===typeProjection)return;if(R!==void 0)return R;if(P===void 0&&!T.some(({value:Z})=>Z!==void 0))return;const G=registry.get(_);if(G===radius)return"sqrt";if(G===opacity||G===length)return"linear";if(G===symbol)return"ordinal";const V=(P??O)?.length;if(V<2||V>2)return asOrdinalType(G);if(P!==void 0){if(isOrdinal(P))return asOrdinalType(G);if(isTemporal(P))return"utc"}else{const Z=T.map(({value:Y})=>Y).filter(Y=>Y!==void 0);if(Z.some(isOrdinal))return asOrdinalType(G);if(Z.some(isTemporal))return"utc"}if(G===color){if(z!=null||isDivergingScheme(I))return"diverging";if(isCategoricalScheme(I))return"categorical"}return"linear"}function asOrdinalType(_){switch(_){case position:return"point";case color:return ordinalImplicit;default:return"ordinal"}}function isOrdinalScale({type:_}){return _==="ordinal"||_==="point"||_==="band"||_===ordinalImplicit}function isThresholdScale({type:_}){return _==="threshold"}function isBandScale({type:_}){return _==="point"||_==="band"}function isCollapsed(_){if(_===void 0)return!0;const T=_.domain(),R=_(T[0]);for(let P=1,O=T.length;P<O;++P)if(_(T[P])-R)return!1;return!0}function coerceType(_,{domain:T,...R},P){for(const O of _)O.value!==void 0&&(T===void 0&&(T=O.value?.domain),O.value=P(O.value));return{domain:T===void 0?T:P(T),...R}}function coerceSymbols(_){return map(_,maybeSymbol)}function exposeScales(_){return T=>{if(!registry.has(T=`${T}`))throw new Error(`unknown scale: ${T}`);return _[T]}}function exposeScale({scale:_,type:T,domain:R,range:P,interpolate:O,interval:I,transform:z,percent:F,pivot:G}){if(T==="identity")return{type:"identity",apply:Z=>Z,invert:Z=>Z};const V=_.unknown?_.unknown():void 0;return{type:T,domain:slice(R),...P!==void 0&&{range:slice(P)},...z!==void 0&&{transform:z},...F&&{percent:F},...V!==void 0&&{unknown:V},...I!==void 0&&{interval:I},...O!==void 0&&{interpolate:O},..._.clamp&&{clamp:_.clamp()},...G!==void 0&&{pivot:G,symmetric:!1},..._.base&&{base:_.base()},..._.exponent&&{exponent:_.exponent()},..._.constant&&{constant:_.constant()},..._.align&&{align:_.align(),round:_.round()},..._.padding&&(_.paddingInner?{paddingInner:_.paddingInner(),paddingOuter:_.paddingOuter()}:{padding:_.padding()}),..._.bandwidth&&{bandwidth:_.bandwidth(),step:_.step()},apply:Z=>_(Z),..._.invert&&{invert:Z=>_.invert(Z)}}}function createFacets(_,T){const{fx:R,fy:P}=createScales(_,T),O=R?.scale.domain(),I=P?.scale.domain();return O&&I?cross(O,I).map(([z,F],G)=>({x:z,y:F,i:G})):O?O.map((z,F)=>({x:z,i:F})):I?I.map((z,F)=>({y:z,i:F})):void 0}function recreateFacets(_,{x:T,y:R}){return T&&=facetIndex(T),R&&=facetIndex(R),_.filter(T&&R?P=>T.has(P.x)&&R.has(P.y):T?P=>T.has(P.x):P=>R.has(P.y)).sort(T&&R?(P,O)=>T.get(P.x)-T.get(O.x)||R.get(P.y)-R.get(O.y):T?(P,O)=>T.get(P.x)-T.get(O.x):(P,O)=>R.get(P.y)-R.get(O.y))}function facetGroups(_,{fx:T,fy:R}){const P=range(_),O=T?.value,I=R?.value;return T&&R?rollup(P,z=>(z.fx=O[z[0]],z.fy=I[z[0]],z),z=>O[z],z=>I[z]):T?rollup(P,z=>(z.fx=O[z[0]],z),z=>O[z]):rollup(P,z=>(z.fy=I[z[0]],z),z=>I[z])}function facetTranslator(_,T,{marginTop:R,marginLeft:P}){const O=_?({x:z})=>_(z)-P:()=>0,I=T?({y:z})=>T(z)-R:()=>0;return function(z){this.tagName==="svg"?(this.setAttribute("x",O(z)),this.setAttribute("y",I(z))):this.setAttribute("transform",`translate(${O(z)},${I(z)})`)}}function facetExclude(_){const T=[],R=new Uint32Array(sum(_,P=>P.length));for(const P of _){let O=0;for(const I of _)P!==I&&(R.set(I,O),O+=I.length);T.push(R.slice(0,O))}return T}const facetAnchors=new Map([["top",facetAnchorTop],["right",facetAnchorRight],["bottom",facetAnchorBottom],["left",facetAnchorLeft],["top-left",and(facetAnchorTop,facetAnchorLeft)],["top-right",and(facetAnchorTop,facetAnchorRight)],["bottom-left",and(facetAnchorBottom,facetAnchorLeft)],["bottom-right",and(facetAnchorBottom,facetAnchorRight)],["top-empty",facetAnchorTopEmpty],["right-empty",facetAnchorRightEmpty],["bottom-empty",facetAnchorBottomEmpty],["left-empty",facetAnchorLeftEmpty],["empty",facetAnchorEmpty]]);function maybeFacetAnchor(_){if(_==null)return null;const T=facetAnchors.get(`${_}`.toLowerCase());if(T)return T;throw new Error(`invalid facet anchor: ${_}`)}const indexCache=new WeakMap;function facetIndex(_){let T=indexCache.get(_);return T||indexCache.set(_,T=new InternMap(map(_,(R,P)=>[R,P]))),T}function facetIndexOf(_,T){return facetIndex(_).get(T)}function facetFind(_,T,R){return T=keyof(T),R=keyof(R),_.find(P=>Object.is(keyof(P.x),T)&&Object.is(keyof(P.y),R))}function facetEmpty(_,T,R){return facetFind(_,T,R)?.empty}function facetAnchorTop(_,{y:T},{y:R}){return T?facetIndexOf(T,R)===0:!0}function facetAnchorBottom(_,{y:T},{y:R}){return T?facetIndexOf(T,R)===T.length-1:!0}function facetAnchorLeft(_,{x:T},{x:R}){return T?facetIndexOf(T,R)===0:!0}function facetAnchorRight(_,{x:T},{x:R}){return T?facetIndexOf(T,R)===T.length-1:!0}function facetAnchorTopEmpty(_,{y:T},{x:R,y:P,empty:O}){if(O)return!1;if(!T)return;const I=facetIndexOf(T,P);if(I>0)return facetEmpty(_,R,T[I-1])}function facetAnchorBottomEmpty(_,{y:T},{x:R,y:P,empty:O}){if(O)return!1;if(!T)return;const I=facetIndexOf(T,P);if(I<T.length-1)return facetEmpty(_,R,T[I+1])}function facetAnchorLeftEmpty(_,{x:T},{x:R,y:P,empty:O}){if(O)return!1;if(!T)return;const I=facetIndexOf(T,R);if(I>0)return facetEmpty(_,T[I-1],P)}function facetAnchorRightEmpty(_,{x:T},{x:R,y:P,empty:O}){if(O)return!1;if(!T)return;const I=facetIndexOf(T,R);if(I<T.length-1)return facetEmpty(_,T[I+1],P)}function facetAnchorEmpty(_,T,{empty:R}){return R}function and(_,T){return function(){return _.apply(null,arguments)&&T.apply(null,arguments)}}function facetFilter(_,{channels:{fx:T,fy:R},groups:P}){return T&&R?_.map(({x:O,y:I})=>P.get(O)?.get(I)??[]):T?_.map(({x:O})=>P.get(O)??[]):_.map(({y:O})=>P.get(O)??[])}const pi=Math.PI,tau=2*pi,defaultAspectRatio=.618;function createProjection({projection:_,inset:T=0,insetTop:R=T,insetRight:P=T,insetBottom:O=T,insetLeft:I=T}={},z){if(_==null)return;if(typeof _.stream=="function")return _;let F,G,V="frame";if(isObject(_)){let pe;if({type:_,domain:G,inset:pe,insetTop:R=pe!==void 0?pe:R,insetRight:P=pe!==void 0?pe:P,insetBottom:O=pe!==void 0?pe:O,insetLeft:I=pe!==void 0?pe:I,clip:V=V,...F}=_,_==null)return}typeof _!="function"&&({type:_}=namedProjection(_));const{width:Z,height:Y,marginLeft:Q,marginRight:J,marginTop:ee,marginBottom:ne}=z,se=Z-Q-J-I-P,oe=Y-ee-ne-R-O;if(_=_?.({width:se,height:oe,clip:V,...F}),_==null)return;V=maybePostClip(V,Q,ee,Z-J,Y-ne);let ae=Q+I,ce=ee+R,le;if(G!=null){const[[pe,me],[he,fe]]=geoPath(_).bounds(G),de=Math.min(se/(he-pe),oe/(fe-me));de>0?(ae-=(de*(pe+he)-se)/2,ce-=(de*(me+fe)-oe)/2,le=geoTransform({point(be,ye){this.stream.point(be*de+ae,ye*de+ce)}})):warn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return le??=ae===0&&ce===0?identity():geoTransform({point(pe,me){this.stream.point(pe+ae,me+ce)}}),{stream:pe=>_.stream(le.stream(V(pe)))}}function namedProjection(_){switch(`${_}`.toLowerCase()){case"albers-usa":return scaleProjection(geoAlbersUsa,.7463,.4673);case"albers":return conicProjection(geoAlbers,.7463,.4673);case"azimuthal-equal-area":return scaleProjection(geoAzimuthalEqualArea,4,4);case"azimuthal-equidistant":return scaleProjection(geoAzimuthalEquidistant,tau,tau);case"conic-conformal":return conicProjection(geoConicConformal,tau,tau);case"conic-equal-area":return conicProjection(geoConicEqualArea,6.1702,2.9781);case"conic-equidistant":return conicProjection(geoConicEquidistant,7.312,3.6282);case"equal-earth":return scaleProjection(geoEqualEarth,5.4133,2.6347);case"equirectangular":return scaleProjection(geoEquirectangular,tau,pi);case"gnomonic":return scaleProjection(geoGnomonic,3.4641,3.4641);case"identity":return{type:identity};case"reflect-y":return{type:reflectY};case"mercator":return scaleProjection(geoMercator,tau,tau);case"orthographic":return scaleProjection(geoOrthographic,2,2);case"stereographic":return scaleProjection(geoStereographic,2,2);case"transverse-mercator":return scaleProjection(geoTransverseMercator,tau,tau);default:throw new Error(`unknown projection type: ${_}`)}}function maybePostClip(_,T,R,P,O){if(_===!1||_==null||typeof _=="number")return I=>I;if(_===!0&&(_="frame"),`${_}`.toLowerCase()==="frame")return clipRectangle(T,R,P,O);throw new Error(`unknown projection clip type: ${_}`)}function scaleProjection(_,T,R){return{type:({width:P,height:O,rotate:I,precision:z=.15,clip:F})=>{const G=_();return z!=null&&G.precision?.(z),I!=null&&G.rotate?.(I),typeof F=="number"&&G.clipAngle?.(F),P!=null&&(G.scale(Math.min(P/T,O/R)),G.translate([P/2,O/2])),G},aspectRatio:R/T}}function conicProjection(_,T,R){const{type:P,aspectRatio:O}=scaleProjection(_,T,R);return{type:I=>{const{parallels:z,domain:F,width:G,height:V}=I,Z=P(I);return z!=null&&(Z.parallels(z),F===void 0&&G!=null&&Z.fitSize([G,V],{type:"Sphere"})),Z},aspectRatio:O}}const identity=constant({stream:_=>_}),reflectY=constant(geoTransform({point(_,T){this.stream.point(_,-T)}}));function project(_,T,R,P){const O=R[_],I=R[T],z=O.length,F=R[_]=new Float64Array(z).fill(NaN),G=R[T]=new Float64Array(z).fill(NaN);let V;const Z=P.stream({point(Y,Q){F[V]=Y,G[V]=Q}});for(V=0;V<z;++V)Z.point(O[V],I[V])}function hasProjection({projection:_}={}){return _==null?!1:typeof _.stream=="function"?!0:(isObject(_)&&(_=_.type),_!=null)}function projectionAspectRatio(_){if(typeof _?.stream=="function")return defaultAspectRatio;if(isObject(_)){let T,R;if({domain:T,type:_,...R}=_,T!=null&&_!=null){const P=typeof _=="string"?namedProjection(_).type:_,[[O,I],[z,F]]=geoPath(P({...R,width:100,height:100})).bounds(T),G=(F-I)/(z-O);return G&&isFinite(G)?G<.2?.2:G>5?5:G:defaultAspectRatio}}if(_!=null){if(typeof _!="function"){const{aspectRatio:T}=namedProjection(_);if(T)return T}return defaultAspectRatio}}function getGeometryChannels(_){const T=[],R=[],P={scale:"x",value:T},O={scale:"y",value:R},I={point(z,F){T.push(z),R.push(F)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const z of _.value)geoStream(z,I);return[P,O]}function xyProjection({x:_,y:T}){if(_||T)return _??=R=>R,T??=R=>R,geoTransform({point(R,P){this.stream.point(_(R),T(P))}})}function createContext(_={}){const{document:T=typeof window<"u"?window.document:void 0,clip:R}=_;return{document:T,clip:maybeClip(R)}}function create(_,{document:T}){return select(creator(_).call(T.documentElement))}const unset=Symbol("unset");function memoize1(_){return(_.length===1?memoize1Arg:memoize1Args)(_)}function memoize1Arg(_){let T,R=unset;return P=>(Object.is(R,P)||(R=P,T=_(P)),T)}function memoize1Args(_){let T,R;return(...P)=>((R?.length!==P.length||R.some((O,I)=>!Object.is(O,P[I])))&&(R=P,T=_(...P)),T)}const numberFormat=memoize1(_=>new Intl.NumberFormat(_));memoize1((_,T)=>new Intl.DateTimeFormat(_,{timeZone:"UTC",...T&&{month:T}}));memoize1((_,T)=>new Intl.DateTimeFormat(_,{timeZone:"UTC",...T&&{weekday:T}}));function formatNumber(_="en-US"){const T=numberFormat(_);return R=>R!=null&&!isNaN(R)?T.format(R):void 0}function formatIsoDate(_){return format(_,"Invalid Date")}function formatAuto(_="en-US"){const T=formatNumber(_);return R=>(R instanceof Date?formatIsoDate:typeof R=="number"?T:string)(R)}const formatDefault=formatAuto(),offset=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let nextClipId=0;function getClipId(){return`plot-clip-${++nextClipId}`}function styles(_,{title:T,href:R,ariaLabel:P,ariaDescription:O,ariaHidden:I,target:z,fill:F,fillOpacity:G,stroke:V,strokeWidth:Z,strokeOpacity:Y,strokeLinejoin:Q,strokeLinecap:J,strokeMiterlimit:ee,strokeDasharray:ne,strokeDashoffset:se,opacity:oe,mixBlendMode:ae,imageFilter:ce,paintOrder:le,pointerEvents:pe,shapeRendering:me,channels:he},{ariaLabel:fe,fill:de="currentColor",fillOpacity:be,stroke:ye="none",strokeOpacity:Ce,strokeWidth:ve,strokeLinecap:Ee,strokeLinejoin:we,strokeMiterlimit:ge,paintOrder:Se}){de===null&&(F=null,G=null),ye===null&&(V=null,Y=null),isNoneish(de)?!isNoneish(ye)&&(!isNoneish(F)||he?.fill)&&(ye="none"):isNoneish(ye)&&(!isNoneish(V)||he?.stroke)&&(de="none");const[Te,Ae]=maybeColorChannel(F,de),[Ue,_e]=maybeNumberChannel(G,be),[$e,Ne]=maybeColorChannel(V,ye),[Be,Ze]=maybeNumberChannel(Y,Ce),[We,Oe]=maybeNumberChannel(oe);isNone(Ne)||(Z===void 0&&(Z=ve),J===void 0&&(J=Ee),Q===void 0&&(Q=we),ee===void 0&&!isRound(Q)&&(ee=ge),!isNone(Ae)&&le===void 0&&(le=Se));const[Ge,je]=maybeNumberChannel(Z);return de!==null&&(_.fill=impliedString(Ae,"currentColor"),_.fillOpacity=impliedNumber(_e,1)),ye!==null&&(_.stroke=impliedString(Ne,"none"),_.strokeWidth=impliedNumber(je,1),_.strokeOpacity=impliedNumber(Ze,1),_.strokeLinejoin=impliedString(Q,"miter"),_.strokeLinecap=impliedString(J,"butt"),_.strokeMiterlimit=impliedNumber(ee,4),_.strokeDasharray=impliedString(ne,"none"),_.strokeDashoffset=impliedString(se,"0")),_.target=string(z),_.ariaLabel=string(fe),_.ariaDescription=string(O),_.ariaHidden=string(I),_.opacity=impliedNumber(Oe,1),_.mixBlendMode=impliedString(ae,"normal"),_.imageFilter=impliedString(ce,"none"),_.paintOrder=impliedString(le,"normal"),_.pointerEvents=impliedString(pe,"auto"),_.shapeRendering=impliedString(me,"auto"),{title:{value:T,optional:!0,filter:null},href:{value:R,optional:!0,filter:null},ariaLabel:{value:P,optional:!0,filter:null},fill:{value:Te,scale:"auto",optional:!0},fillOpacity:{value:Ue,scale:"auto",optional:!0},stroke:{value:$e,scale:"auto",optional:!0},strokeOpacity:{value:Be,scale:"auto",optional:!0},strokeWidth:{value:Ge,optional:!0},opacity:{value:We,scale:"auto",optional:!0}}}function applyTitle(_,T){T&&_.filter(R=>nonempty(T[R])).append("title").call(applyText,T)}function applyTitleGroup(_,T){T&&_.filter(([R])=>nonempty(T[R])).append("title").call(applyTextGroup,T)}function applyText(_,T){T&&_.text(R=>formatDefault(T[R]))}function applyTextGroup(_,T){T&&_.text(([R])=>formatDefault(T[R]))}function applyChannelStyles(_,{target:T,tip:R},{ariaLabel:P,title:O,fill:I,fillOpacity:z,stroke:F,strokeOpacity:G,strokeWidth:V,opacity:Z,href:Y}){P&&applyAttr(_,"aria-label",Q=>P[Q]),I&&applyAttr(_,"fill",Q=>I[Q]),z&&applyAttr(_,"fill-opacity",Q=>z[Q]),F&&applyAttr(_,"stroke",Q=>F[Q]),G&&applyAttr(_,"stroke-opacity",Q=>G[Q]),V&&applyAttr(_,"stroke-width",Q=>V[Q]),Z&&applyAttr(_,"opacity",Q=>Z[Q]),Y&&applyHref(_,Q=>Y[Q],T),R||applyTitle(_,O)}function applyGroupedChannelStyles(_,{target:T,tip:R},{ariaLabel:P,title:O,fill:I,fillOpacity:z,stroke:F,strokeOpacity:G,strokeWidth:V,opacity:Z,href:Y}){P&&applyAttr(_,"aria-label",([Q])=>P[Q]),I&&applyAttr(_,"fill",([Q])=>I[Q]),z&&applyAttr(_,"fill-opacity",([Q])=>z[Q]),F&&applyAttr(_,"stroke",([Q])=>F[Q]),G&&applyAttr(_,"stroke-opacity",([Q])=>G[Q]),V&&applyAttr(_,"stroke-width",([Q])=>V[Q]),Z&&applyAttr(_,"opacity",([Q])=>Z[Q]),Y&&applyHref(_,([Q])=>Y[Q],T),R||applyTitleGroup(_,O)}function groupAesthetics({ariaLabel:_,title:T,fill:R,fillOpacity:P,stroke:O,strokeOpacity:I,strokeWidth:z,opacity:F,href:G},{tip:V}){return[_,V?void 0:T,R,P,O,I,z,F,G].filter(Z=>Z!==void 0)}function groupZ(_,T,R){const P=group(_,O=>T[O]);return R===void 0&&P.size>1+_.length>>1&&warn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),P.values()}function*groupIndex(_,T,R,P){const{z:O}=R,{z:I}=P,z=groupAesthetics(P,R),F=[...T,...z];for(const G of I?groupZ(_,I,O):[_]){let V,Z;e:for(const Y of G){for(const Q of F)if(!defined(Q[Y])){Z&&Z.push(-1);continue e}if(V===void 0){Z&&(yield Z),V=z.map(Q=>keyof(Q[Y])),Z=[Y];continue}Z.push(Y);for(let Q=0;Q<z.length;++Q)if(keyof(z[Q][Y])!==V[Q]){yield Z,V=z.map(ee=>keyof(ee[Y])),Z=[Y];continue e}}Z&&(yield Z)}}function applyClip(_,T,R,P){let O;const{clip:I=P.clip}=T;I==="frame"?(_=create("svg:g",P).each(function(){this.appendChild(_.node()),_.node=()=>this}),O=getFrameClip(P,R)):I&&(O=getGeoClip(I,P)),applyAttr(_,"aria-label",T.ariaLabel),applyAttr(_,"aria-description",T.ariaDescription),applyAttr(_,"aria-hidden",T.ariaHidden),applyAttr(_,"clip-path",O)}function memoizeClip(_){const T=new WeakMap;return(R,P)=>{let O=T.get(R);if(!O){const I=getClipId();select(R.ownerSVGElement).append("clipPath").attr("id",I).call(_,R,P),T.set(R,O=`url(#${I})`)}return O}}const getFrameClip=memoizeClip((_,T,R)=>{const{width:P,height:O,marginLeft:I,marginRight:z,marginTop:F,marginBottom:G}=R;_.append("rect").attr("x",I).attr("y",F).attr("width",P-z-I).attr("height",O-F-G)}),geoClipCache=new WeakMap,sphere={type:"Sphere"};function getGeoClip(_,T){let R,P;if((R=geoClipCache.get(T))||geoClipCache.set(T,R=new WeakMap),_.type==="Sphere"&&(_=sphere),!(P=R.get(_))){const O=getClipId();select(T.ownerSVGElement).append("clipPath").attr("id",O).append("path").attr("d",T.path()(_)),R.set(_,P=`url(#${O})`)}return P}function applyIndirectStyles(_,T,R,P){applyClip(_,T,R,P),applyAttr(_,"class",T.className),applyAttr(_,"fill",T.fill),applyAttr(_,"fill-opacity",T.fillOpacity),applyAttr(_,"stroke",T.stroke),applyAttr(_,"stroke-width",T.strokeWidth),applyAttr(_,"stroke-opacity",T.strokeOpacity),applyAttr(_,"stroke-linejoin",T.strokeLinejoin),applyAttr(_,"stroke-linecap",T.strokeLinecap),applyAttr(_,"stroke-miterlimit",T.strokeMiterlimit),applyAttr(_,"stroke-dasharray",T.strokeDasharray),applyAttr(_,"stroke-dashoffset",T.strokeDashoffset),applyAttr(_,"shape-rendering",T.shapeRendering),applyAttr(_,"filter",T.imageFilter),applyAttr(_,"paint-order",T.paintOrder);const{pointerEvents:O=P.pointerSticky===!1?"none":void 0}=T;applyAttr(_,"pointer-events",O)}function applyDirectStyles(_,T){applyStyle(_,"mix-blend-mode",T.mixBlendMode),applyAttr(_,"opacity",T.opacity)}function applyHref(_,T,R){_.each(function(P){const O=T(P);if(O!=null){const I=this.ownerDocument.createElementNS(namespaces.svg,"a");I.setAttribute("fill","inherit"),I.setAttributeNS(namespaces.xlink,"href",O),R!=null&&I.setAttribute("target",R),this.parentNode.insertBefore(I,this).appendChild(this)}})}function applyAttr(_,T,R){R!=null&&_.attr(T,R)}function applyStyle(_,T,R){R!=null&&_.style(T,R)}function applyTransform(_,T,{x:R,y:P},O=offset,I=offset){O+=T.dx,I+=T.dy,R?.bandwidth&&(O+=R.bandwidth()/2),P?.bandwidth&&(I+=P.bandwidth()/2),(O||I)&&_.attr("transform",`translate(${O},${I})`)}function impliedString(_,T){if((_=string(_))!==T)return _}function impliedNumber(_,T){if((_=number(_))!==T)return _}const validClassName=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function maybeClassName(_){if(_===void 0)return"plot-d6a7b5";if(_=`${_}`,!validClassName.test(_))throw new Error(`invalid class name: ${_}`);return _}function applyInlineStyles(_,T){if(typeof T=="string")_.property("style",T);else if(T!=null)for(const R of _)Object.assign(R.style,T)}function applyFrameAnchor({frameAnchor:_},{width:T,height:R,marginTop:P,marginRight:O,marginBottom:I,marginLeft:z}){return[/left$/.test(_)?z:/right$/.test(_)?T-O:(z+T-O)/2,/^top/.test(_)?P:/^bottom/.test(_)?R-I:(P+R-I)/2]}class Mark{constructor(T,R={},P={},O){const{facet:I="auto",facetAnchor:z,fx:F,fy:G,sort:V,dx:Z=0,dy:Y=0,margin:Q=0,marginTop:J=Q,marginRight:ee=Q,marginBottom:ne=Q,marginLeft:se=Q,className:oe,clip:ae=O?.clip,channels:ce,tip:le,render:pe}=P;if(this.data=T,this.sort=isDomainSort(V)?V:null,this.initializer=initializer(P).initializer,this.transform=this.initializer?P.transform:basic(P).transform,I===null||I===!1?this.facet=null:(this.facet=keyword(I===!0?"include":I,"facet",["auto","include","exclude","super"]),this.fx=T===singleton&&typeof F=="string"?[F]:F,this.fy=T===singleton&&typeof G=="string"?[G]:G),this.facetAnchor=maybeFacetAnchor(z),R=maybeNamed(R),ce!==void 0&&(R={...maybeChannels(ce),...R}),O!==void 0&&(R={...styles(this,P,O),...R}),this.channels=Object.fromEntries(Object.entries(R).map(([me,he])=>{if(isOptions(he.value)){const{value:fe,label:de=he.label,scale:be=he.scale}=he.value;he={...he,label:de,scale:be,value:fe}}if(T===singleton&&typeof he.value=="string"){const{value:fe}=he;he={...he,value:[fe]}}return[me,he]}).filter(([me,{value:he,optional:fe}])=>{if(he!=null)return!0;if(fe)return!1;throw new Error(`missing channel value: ${me}`)})),this.dx=+Z,this.dy=+Y,this.marginTop=+J,this.marginRight=+ee,this.marginBottom=+ne,this.marginLeft=+se,this.clip=maybeClip(ae),this.tip=maybeTip(le),this.className=string(oe),this.facet==="super"){if(F||G)throw new Error("super-faceting cannot use fx or fy");for(const me in this.channels){const{scale:he}=R[me];if(!(he!=="x"&&he!=="y"))throw new Error("super-faceting cannot use x or y")}}pe!=null&&(this.render=composeRender(pe,this.render))}initialize(T,R,P){let O=dataify(this.data);T===void 0&&O!=null&&(T=[range(O)]);const I=T;this.transform!=null&&({facets:T,data:O}=this.transform(O,T,P),O=dataify(O)),T!==void 0&&(T.original=I);const z=createChannels(this.channels,O);return this.sort!=null&&channelDomain(O,T,z,R,this.sort),{data:O,facets:T,channels:z}}filter(T,R,P){for(const O in R){const{filter:I=defined}=R[O];if(I!==null){const z=P[O];T=T.filter(F=>I(z[F]))}}return T}project(T,R,P){for(const O in T)if(T[O].scale==="x"&&/^x|x$/.test(O)){const I=O.replace(/^x|x$/,"y");I in T&&T[I].scale==="y"&&project(O,I,R,P.projection)}}scale(T,R,P){const O=valueObject(T,R);return P.projection&&this.project(T,O,P),O}}function marks(..._){return _.plot=Mark.prototype.plot,_}function composeRender(_,T){if(_==null)return T===null?void 0:T;if(T==null)return _===null?void 0:_;if(typeof _!="function")throw new TypeError(`invalid render transform: ${_}`);if(typeof T!="function")throw new TypeError(`invalid render transform: ${T}`);return function(R,P,O,I,z,F){return _.call(this,R,P,O,I,z,(G,V,Z,Y,Q)=>T.call(this,G,V,Z,Y,Q,F))}}function maybeChannels(_){return Object.fromEntries(Object.entries(maybeNamed(_)).map(([T,R])=>(R=typeof R=="string"?{value:R,label:T}:maybeValue(R),R.filter===void 0&&R.scale==null&&(R={...R,filter:null}),[T,R])))}function maybeTip(_){return _===!0?"xy":_===!1||_==null?null:typeof _=="string"?keyword(_,"tip",["x","y","xy"]):_}function withTip(_,T){return _?.tip===!0?{..._,tip:T}:isObject(_?.tip)&&_.tip.pointer===void 0?{..._,tip:{..._.tip,pointer:T}}:_}function createDimensions(_,T,R={}){let P=.5-offset,O=.5+offset,I=.5+offset,z=.5-offset;for(const{marginTop:ne,marginRight:se,marginBottom:oe,marginLeft:ae}of T)ne>P&&(P=ne),se>O&&(O=se),oe>I&&(I=oe),ae>z&&(z=ae);let{margin:F,marginTop:G=F!==void 0?F:P,marginRight:V=F!==void 0?F:O,marginBottom:Z=F!==void 0?F:I,marginLeft:Y=F!==void 0?F:z}=R;G=+G,V=+V,Z=+Z,Y=+Y;let{width:Q=640,height:J=autoHeight(_,R,{width:Q,marginTopDefault:P,marginRightDefault:O,marginBottomDefault:I,marginLeftDefault:z})+Math.max(0,G-P+Z-I)}=R;Q=+Q,J=+J;const ee={width:Q,height:J,marginTop:G,marginRight:V,marginBottom:Z,marginLeft:Y};if(_.fx||_.fy){let{margin:ne,marginTop:se=ne!==void 0?ne:G,marginRight:oe=ne!==void 0?ne:V,marginBottom:ae=ne!==void 0?ne:Z,marginLeft:ce=ne!==void 0?ne:Y}=R.facet??{};se=+se,oe=+oe,ae=+ae,ce=+ce,ee.facet={marginTop:se,marginRight:oe,marginBottom:ae,marginLeft:ce}}return ee}function autoHeight({x:_,y:T,fy:R,fx:P},{projection:O,aspectRatio:I},{width:z,marginTopDefault:F,marginRightDefault:G,marginBottomDefault:V,marginLeftDefault:Z}){const Y=R&&R.scale.domain().length||1,Q=projectionAspectRatio(O);if(Q){const ee=P?P.scale.domain().length:1,ne=(1.1*Y-.1)/(1.1*ee-.1)*Q,se=Math.max(.1,Math.min(10,ne));return Math.round((z-Z-G)*se+F+V)}const J=T?isOrdinalScale(T)?T.scale.domain().length||1:Math.max(7,17/Y):1;if(I!=null){if(I=+I,!(isFinite(I)&&I>0))throw new Error(`invalid aspectRatio: ${I}`);const ee=aspectRatioLength("y",T)/(aspectRatioLength("x",_)*I),ne=P?P.scale.bandwidth():1,se=R?R.scale.bandwidth():1,oe=ne*(z-Z-G)-_.insetLeft-_.insetRight;return(ee*oe+T.insetTop+T.insetBottom)/se+F+V}return!!(T||R)*Math.max(1,Math.min(60,J*Y))*20+!!P*30+60}function aspectRatioLength(_,T){if(!T)throw new Error(`aspectRatio requires ${_} scale`);const{type:R,domain:P}=T;let O;switch(R){case"linear":case"utc":case"time":O=Number;break;case"pow":{const F=T.scale.exponent();O=G=>Math.pow(G,F);break}case"log":O=Math.log;break;case"point":case"band":return P.length;default:throw new Error(`unsupported ${_} scale for aspectRatio: ${R}`)}const[I,z]=extent$1(P);return Math.abs(O(z)-O(I))}const states=new WeakMap;function pointerK(_,T,{x:R,y:P,px:O,py:I,maxRadius:z=40,channels:F,render:G,...V}={}){return z=+z,O!=null&&(R??=null,F={...F,px:{value:O,scale:"x"}}),I!=null&&(P??=null,F={...F,py:{value:I,scale:"y"}}),{x:R,y:P,channels:F,...V,render:composeRender(function(Z,Y,Q,J,ee,ne){ee={...ee,pointerSticky:!1};const se=ee.ownerSVGElement,{data:oe}=ee.getMarkState(this);let ae=states.get(se);ae||states.set(se,ae={sticky:!1,roots:[],renders:[]});let ce=ae.renders.push(Ne)-1;const{x:le,y:pe,fx:me,fy:he}=Y;let fe=me?me(Z.fx)-J.marginLeft:0,de=he?he(Z.fy)-J.marginTop:0;le?.bandwidth&&(fe+=le.bandwidth()/2),pe?.bandwidth&&(de+=pe.bandwidth()/2);const be=Z.fi!=null;let ye;if(be){let Oe=ae.facetStates;Oe||(ae.facetStates=Oe=new Map),ye=Oe.get(this),ye||Oe.set(this,ye=new Map)}const[Ce,ve]=applyFrameAnchor(this,J),{px:Ee,py:we}=Q,ge=Ee?Oe=>Ee[Oe]:anchorX$1(Q,Ce),Se=we?Oe=>we[Oe]:anchorY$1(Q,ve);let Te,Ae,Ue,_e;function $e(Oe,Ge){if(be)if(_e&&(_e=cancelAnimationFrame(_e)),Oe==null)ye.delete(Z.fi);else{ye.set(Z.fi,Ge),_e=requestAnimationFrame(()=>{_e=null;for(const[je,Fe]of ye)if(Fe<Ge||Fe===Ge&&je<Z.fi){Oe=null;break}Ne(Oe)});return}Ne(Oe)}function Ne(Oe){if(Te===Oe&&Ue===ae.sticky)return;Te=Oe,Ue=ee.pointerSticky=ae.sticky;const Ge=Te==null?[]:[Te];be&&(Ge.fx=Z.fx,Ge.fy=Z.fy,Ge.fi=Z.fi);const je=ne(Ge,Y,Q,J,ee);if(Ae){if(be){const Fe=Ae.parentNode,ze=Ae.getAttribute("transform"),Me=je.getAttribute("transform");ze?je.setAttribute("transform",ze):je.removeAttribute("transform"),Me?Fe.setAttribute("transform",Me):Fe.removeAttribute("transform"),je.removeAttribute("aria-label"),je.removeAttribute("aria-description"),je.removeAttribute("aria-hidden")}Ae.replaceWith(je)}if(ae.roots[ce]=Ae=je,!(Te==null&&ye?.size>1)){const Fe=Te==null?null:isArray(oe)?oe[Te]:oe.get(Te);ee.dispatchValue(Fe)}return je}function Be(Oe){if(ae.sticky||Oe.pointerType==="mouse"&&Oe.buttons===1)return;let[Ge,je]=pointof(Oe);Ge-=fe,je-=de;const Fe=Ge<J.marginLeft||Ge>J.width-J.marginRight?1:_,ze=je<J.marginTop||je>J.height-J.marginBottom?1:T;let Me=null,Ke=z*z;for(const Ye of Z){const Qe=Fe*(ge(Ye)-Ge),Je=ze*(Se(Ye)-je),lt=Qe*Qe+Je*Je;lt<=Ke&&(Me=Ye,Ke=lt)}if(Me!=null&&(_!==1||T!==1)){const Ye=ge(Me)-Ge,Qe=Se(Me)-je;Ke=Ye*Ye+Qe*Qe}$e(Me,Ke)}function Ze(Oe){Oe.pointerType==="mouse"&&Te!=null&&(ae.sticky&&ae.roots.some(Ge=>Ge?.contains(Oe.target))||(ae.sticky?(ae.sticky=!1,ae.renders.forEach(Ge=>Ge(null))):(ae.sticky=!0,Ne(Te)),Oe.stopImmediatePropagation()))}function We(Oe){Oe.pointerType==="mouse"&&(ae.sticky||$e(null))}return se.addEventListener("pointerenter",Be),se.addEventListener("pointermove",Be),se.addEventListener("pointerdown",Ze),se.addEventListener("pointerleave",We),Ne(null)},G)}}function pointer(_){return pointerK(1,1,_)}function pointerX(_){return pointerK(1,.01,_)}function pointerY(_){return pointerK(.01,1,_)}function anchorX$1({x1:_,x2:T,x:R=_},P){return _&&T?O=>(_[O]+T[O])/2:R?O=>R[O]:()=>P}function anchorY$1({y1:_,y2:T,y:R=_},P){return _&&T?O=>(_[O]+T[O])/2:R?O=>R[O]:()=>P}function inferFontVariant$2(_){return isOrdinalScale(_)&&_.interval===void 0?void 0:"tabular-nums"}function legendRamp(_,T){let{label:R=_.label,tickSize:P=6,width:O=240,height:I=44+P,marginTop:z=18,marginRight:F=0,marginBottom:G=16+P,marginLeft:V=0,style:Z,ticks:Y=(O-V-F)/64,tickFormat:Q,fontVariant:J=inferFontVariant$2(_),round:ee=!0,opacity:ne,className:se}=T;const oe=createContext(T);se=maybeClassName(se),ne=maybeNumberChannel(ne)[1],Q===null&&(Q=()=>null);const ae=create("svg",oe).attr("class",`${se}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",O).attr("height",I).attr("viewBox",`0 0 ${O} ${I}`).call(Ce=>Ce.append("style").text(`:where(.${se}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${se}-ramp text) {
  white-space: pre;
}`)).call(applyInlineStyles,Z);let ce=Ce=>Ce.selectAll(".tick line").attr("y1",z+G-I),le;const pe=ee?(Ce,ve)=>Ce.rangeRound(ve):(Ce,ve)=>Ce.range(ve),{type:me,domain:he,range:fe,interpolate:de,scale:be,pivot:ye}=_;if(de){const Ce=fe===void 0?de:piecewise(de.length===1?interpolatePiecewise(de):de,fe);le=pe(be.copy(),quantize(interpolateNumber(V,O-F),Math.min(he.length+(ye!==void 0),fe===void 0?1/0:fe.length)));const ve=256,Ee=oe.document.createElement("canvas");Ee.width=ve,Ee.height=1;const we=Ee.getContext("2d");for(let ge=0,Se=ve-1;ge<ve;++ge)we.fillStyle=Ce(ge/Se),we.fillRect(ge,0,1,1);ae.append("image").attr("opacity",ne).attr("x",V).attr("y",z).attr("width",O-V-F).attr("height",I-z-G).attr("preserveAspectRatio","none").attr("xlink:href",Ee.toDataURL())}else if(me==="threshold"){const Ce=he,ve=Q===void 0?Ee=>Ee:typeof Q=="string"?format$1(Q):Q;le=pe(linear().domain([-1,fe.length-1]),[V,O-F]),ae.append("g").attr("fill-opacity",ne).selectAll().data(fe).enter().append("rect").attr("x",(Ee,we)=>le(we-1)).attr("y",z).attr("width",(Ee,we)=>le(we)-le(we-1)).attr("height",I-z-G).attr("fill",Ee=>Ee),Y=map(Ce,(Ee,we)=>we),Q=Ee=>ve(Ce[Ee],Ee)}else le=pe(band().domain(he),[V,O-F]),ae.append("g").attr("fill-opacity",ne).selectAll().data(he).enter().append("rect").attr("x",le).attr("y",z).attr("width",Math.max(0,le.bandwidth()-1)).attr("height",I-z-G).attr("fill",be),ce=()=>{};return ae.append("g").attr("transform",`translate(0,${I-G})`).call(axisBottom(le).ticks(Array.isArray(Y)?null:Y,typeof Q=="string"?Q:void 0).tickFormat(typeof Q=="function"?Q:void 0).tickSize(P).tickValues(Array.isArray(Y)?Y:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",impliedString(J,"normal")).call(ce).call(Ce=>Ce.select(".domain").remove()),R!==void 0&&ae.append("text").attr("x",V).attr("y",z-6).attr("fill","currentColor").attr("font-weight","bold").text(R),ae.node()}const radians=Math.PI/180;function markers(_,{marker:T,markerStart:R=T,markerMid:P=T,markerEnd:O=T}={}){_.markerStart=maybeMarker(R),_.markerMid=maybeMarker(P),_.markerEnd=maybeMarker(O)}function maybeMarker(_){if(_==null||_===!1)return null;if(_===!0)return markerCircleFill;if(typeof _=="function")return _;switch(`${_}`.toLowerCase()){case"none":return null;case"arrow":return markerArrow("auto");case"arrow-reverse":return markerArrow("auto-start-reverse");case"dot":return markerDot;case"circle":case"circle-fill":return markerCircleFill;case"circle-stroke":return markerCircleStroke;case"tick":return markerTick("auto");case"tick-x":return markerTick(90);case"tick-y":return markerTick(0)}throw new Error(`invalid marker: ${_}`)}function markerArrow(_){return(T,R)=>create("svg:marker",R).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",_).attr("fill","none").attr("stroke",T).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(P=>P.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function markerDot(_,T){return create("svg:marker",T).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",_).attr("stroke","none").call(R=>R.append("circle").attr("r",2.5)).node()}function markerCircleFill(_,T){return create("svg:marker",T).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",_).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(R=>R.append("circle").attr("r",3)).node()}function markerCircleStroke(_,T){return create("svg:marker",T).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",_).attr("stroke-width",1.5).call(R=>R.append("circle").attr("r",3)).node()}function markerTick(_){return(T,R)=>create("svg:marker",R).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",_).attr("stroke",T).call(P=>P.append("path").attr("d","M0,-3v6")).node()}let nextMarkerId=0;function applyMarkers(_,T,{stroke:R},P){return applyMarkersColor(_,T,R&&(O=>R[O]),null,P)}function applyGroupedMarkers(_,T,{stroke:R,z:P},O){return applyMarkersColor(_,T,R&&(([I])=>R[I]),P,O)}const START=1,END=2;function getGroupedOrientation(_,T){const R=new Uint8Array(T.length),P=_.data().filter(I=>I.length>1),O=P.length;for(let I=0,z=unset;I<O;++I){const F=P[I];if(F.length>1){const G=F[0];z!==(z=keyof(T[G]))&&(R[G]|=START)}}for(let I=O-1,z=unset;I>=0;--I){const F=P[I];if(F.length>1){const G=F[0];z!==(z=keyof(T[G]))&&(R[G]|=END)}}return([I])=>R[I]}function applyMarkersColor(_,{markerStart:T,markerMid:R,markerEnd:P,stroke:O},I=()=>O,z,F){if(!T&&!R&&!P)return;const G=new Map,V=z&&getGroupedOrientation(_,z);function Z(Y,Q,J){return function(ee){if(J&&!J(ee))return;const ne=I(ee);let se=G.get(Q);se||G.set(Q,se=new Map);let oe=se.get(ne);if(!oe){const ae=this.parentNode.insertBefore(Q(ne,F),this),ce=`plot-marker-${++nextMarkerId}`;ae.setAttribute("id",ce),se.set(ne,oe=`url(#${ce})`)}this.setAttribute(Y,oe)}}T&&_.each(Z("marker-start",T,V&&(Y=>V(Y)&START))),R&&V&&_.each(Z("marker-start",R,Y=>!(V(Y)&START))),R&&_.each(Z("marker-mid",R)),P&&_.each(Z("marker-end",P,V&&(Y=>V(Y)&END)))}function maybeInsetX({inset:_,insetLeft:T,insetRight:R,...P}={}){return[T,R]=maybeInset(_,T,R),{inset:_,insetLeft:T,insetRight:R,...P}}function maybeInsetY({inset:_,insetTop:T,insetBottom:R,...P}={}){return[T,R]=maybeInset(_,T,R),{inset:_,insetTop:T,insetBottom:R,...P}}function maybeInset(_,T,R){return _===void 0&&T===void 0&&R===void 0?offset?[1,0]:[.5,.5]:[T,R]}function maybeIntervalValue(_,{interval:T}){return _={...maybeValue(_)},_.interval=maybeInterval(_.interval===void 0?T:_.interval),_}function maybeIntervalK(_,T,R,P){const{[_]:O,[`${_}1`]:I,[`${_}2`]:z}=R,{value:F,interval:G}=maybeIntervalValue(O,R);if(F==null||G==null&&!P)return R;const V=labelof(O);if(G==null){let J;const ee={transform:ne=>J||(J=valueof(ne,F)),label:V};return{...R,[_]:void 0,[`${_}1`]:I===void 0?ee:I,[`${_}2`]:z===void 0&&!(I===z&&P)?ee:z}}let Z,Y;function Q(J){return Y!==void 0&&J===Z?Y:Y=map(valueof(Z=J,F),ee=>G.floor(ee))}return T({...R,[_]:void 0,[`${_}1`]:I===void 0?{transform:Q,label:V}:I,[`${_}2`]:z===void 0?{transform:J=>Q(J).map(ee=>G.offset(ee)),label:V}:z})}function maybeIntervalMidK(_,T,R){const{[_]:P}=R,{value:O,interval:I}=maybeIntervalValue(P,R);return O==null||I==null?R:T({...R,[_]:{label:labelof(P),transform:z=>{const F=map(valueof(z,O),V=>I.floor(V)),G=F.map(V=>I.offset(V));return F.map(isTemporal(F)?(V,Z)=>V==null||isNaN(V=+V)||(Z=G[Z],Z==null)||isNaN(Z=+Z)?void 0:new Date((V+Z)/2):(V,Z)=>V==null||(Z=G[Z],Z==null)?NaN:(+V+ +Z)/2)}}})}function maybeIntervalX(_={}){return maybeIntervalK("x",maybeInsetX,_)}function maybeIntervalY(_={}){return maybeIntervalK("y",maybeInsetY,_)}function maybeIntervalMidX(_={}){return maybeIntervalMidK("x",maybeInsetX,_)}function maybeIntervalMidY(_={}){return maybeIntervalMidK("y",maybeInsetY,_)}const defaults$9={ariaLabel:"rule",fill:null,stroke:"currentColor"};class RuleX extends Mark{constructor(T,R={}){const{x:P,y1:O,y2:I,inset:z=0,insetTop:F=z,insetBottom:G=z}=R;super(T,{x:{value:P,scale:"x",optional:!0},y1:{value:O,scale:"y",optional:!0},y2:{value:I,scale:"y",optional:!0}},withTip(R,"x"),defaults$9),this.insetTop=number(F),this.insetBottom=number(G),markers(this,R)}render(T,R,P,O,I){const{x:z,y:F}=R,{x:G,y1:V,y2:Z}=P,{width:Y,height:Q,marginTop:J,marginRight:ee,marginLeft:ne,marginBottom:se}=O,{insetTop:oe,insetBottom:ae}=this;return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyTransform,this,{x:G&&z},offset,0).call(ce=>ce.selectAll().data(T).enter().append("line").call(applyDirectStyles,this).attr("x1",G?le=>G[le]:(ne+Y-ee)/2).attr("x2",G?le=>G[le]:(ne+Y-ee)/2).attr("y1",V&&!isCollapsed(F)?le=>V[le]+oe:J+oe).attr("y2",Z&&!isCollapsed(F)?F.bandwidth?le=>Z[le]+F.bandwidth()-ae:le=>Z[le]-ae:Q-se-ae).call(applyChannelStyles,this,P).call(applyMarkers,this,P,I)).node()}}class RuleY extends Mark{constructor(T,R={}){const{x1:P,x2:O,y:I,inset:z=0,insetRight:F=z,insetLeft:G=z}=R;super(T,{y:{value:I,scale:"y",optional:!0},x1:{value:P,scale:"x",optional:!0},x2:{value:O,scale:"x",optional:!0}},withTip(R,"y"),defaults$9),this.insetRight=number(F),this.insetLeft=number(G),markers(this,R)}render(T,R,P,O,I){const{x:z,y:F}=R,{y:G,x1:V,x2:Z}=P,{width:Y,height:Q,marginTop:J,marginRight:ee,marginLeft:ne,marginBottom:se}=O,{insetLeft:oe,insetRight:ae}=this;return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyTransform,this,{y:G&&F},0,offset).call(ce=>ce.selectAll().data(T).enter().append("line").call(applyDirectStyles,this).attr("x1",V&&!isCollapsed(z)?le=>V[le]+oe:ne+oe).attr("x2",Z&&!isCollapsed(z)?z.bandwidth?le=>Z[le]+z.bandwidth()-ae:le=>Z[le]-ae:Y-ee-ae).attr("y1",G?le=>G[le]:(J+Q-se)/2).attr("y2",G?le=>G[le]:(J+Q-se)/2).call(applyChannelStyles,this,P).call(applyMarkers,this,P,I)).node()}}function ruleX(_,T){let{x:R=identity$1,y:P,y1:O,y2:I,...z}=maybeIntervalY(T);return[O,I]=maybeOptionalZero(P,O,I),new RuleX(_,{...z,x:R,y1:O,y2:I})}function ruleY(_,T){let{y:R=identity$1,x:P,x1:O,x2:I,...z}=maybeIntervalX(T);return[O,I]=maybeOptionalZero(P,O,I),new RuleY(_,{...z,y:R,x1:O,x2:I})}function maybeOptionalZero(_,T,R){if(_==null){if(T===void 0){if(R!==void 0)return[0,R]}else if(R===void 0)return[0,T]}else{if(T===void 0)return R===void 0?[0,_]:[_,R];if(R===void 0)return[_,T]}return[T,R]}function template(_,...T){let R=T.length;for(let P=0,O=!0;P<R;++P)typeof T[P]!="function"&&(O&&(_=_.slice(),O=!1),_.splice(P,2,_[P]+T[P]+_[P+1]),T.splice(P,1),--P,--R);return P=>{let O=_[0];for(let I=0;I<R;++I)O+=T[I](P)+_[I+1];return O}}const defaults$8={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},softHyphen="";class Text extends Mark{constructor(T,R={}){const{x:P,y:O,text:I=isIterable(T)&&isTextual(T)?identity$1:indexOf,frameAnchor:z,textAnchor:F=/right$/i.test(z)?"end":/left$/i.test(z)?"start":"middle",lineAnchor:G=/^top/i.test(z)?"top":/^bottom/i.test(z)?"bottom":"middle",lineHeight:V=1,lineWidth:Z=1/0,textOverflow:Y,monospace:Q,fontFamily:J=Q?"ui-monospace, monospace":void 0,fontSize:ee,fontStyle:ne,fontVariant:se,fontWeight:oe,rotate:ae}=R,[ce,le]=maybeNumberChannel(ae,0),[pe,me]=maybeFontSizeChannel(ee);if(super(T,{x:{value:P,scale:"x",optional:!0},y:{value:O,scale:"y",optional:!0},fontSize:{value:pe,optional:!0},rotate:{value:numberChannel(ce),optional:!0},text:{value:I,filter:nonempty,optional:!0}},R,defaults$8),this.rotate=le,this.textAnchor=impliedString(F,"middle"),this.lineAnchor=keyword(G,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+V,this.lineWidth=+Z,this.textOverflow=maybeTextOverflow(Y),this.monospace=!!Q,this.fontFamily=string(J),this.fontSize=me,this.fontStyle=string(ne),this.fontVariant=string(se),this.fontWeight=string(oe),this.frameAnchor=maybeFrameAnchor(z),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${Z}`);this.splitLines=splitter(this),this.clipLine=clipper(this)}render(T,R,P,O,I){const{x:z,y:F}=R,{x:G,y:V,rotate:Z,text:Y,title:Q,fontSize:J}=P,{rotate:ee}=this,[ne,se]=applyFrameAnchor(this,O);return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyIndirectTextStyles,this,Y,O).call(applyTransform,this,{x:G&&z,y:V&&F}).call(oe=>oe.selectAll().data(T).enter().append("text").call(applyDirectStyles,this).call(applyMultilineText,this,Y,Q).attr("transform",template`translate(${G?ae=>G[ae]:ne},${V?ae=>V[ae]:se})${Z?ae=>` rotate(${Z[ae]})`:ee?` rotate(${ee})`:""}`).call(applyAttr,"font-size",J&&(ae=>J[ae])).call(applyChannelStyles,this,P)).node()}}function maybeTextOverflow(_){return _==null?null:keyword(_,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function applyMultilineText(_,T,R,P){if(!R)return;const{lineAnchor:O,lineHeight:I,textOverflow:z,splitLines:F,clipLine:G}=T;_.each(function(V){const Z=F(formatDefault(R[V])??"").map(G),Y=Z.length,Q=O==="top"?.71:O==="bottom"?1-Y:(164-Y*100)/200;if(Y>1){let J=0;for(let ee=0;ee<Y;++ee){if(++J,!Z[ee])continue;const ne=this.ownerDocument.createElementNS(namespaces.svg,"tspan");ne.setAttribute("x",0),ee===J-1?ne.setAttribute("y",`${(Q+ee)*I}em`):ne.setAttribute("dy",`${J*I}em`),ne.textContent=Z[ee],this.appendChild(ne),J=0}}else Q&&this.setAttribute("y",`${Q*I}em`),this.textContent=Z[0];if(z&&!P&&Z[0]!==R[V]){const J=this.ownerDocument.createElementNS(namespaces.svg,"title");J.textContent=R[V],this.appendChild(J)}})}function text(_,{x:T,y:R,...P}={}){return P.frameAnchor===void 0&&([T,R]=maybeTuple(T,R)),new Text(_,{...P,x:T,y:R})}function textX(_,{x:T=identity$1,...R}={}){return new Text(_,maybeIntervalMidY({...R,x:T}))}function textY(_,{y:T=identity$1,...R}={}){return new Text(_,maybeIntervalMidX({...R,y:T}))}function applyIndirectTextStyles(_,T,R){applyAttr(_,"text-anchor",T.textAnchor),applyAttr(_,"font-family",T.fontFamily),applyAttr(_,"font-size",T.fontSize),applyAttr(_,"font-style",T.fontStyle),applyAttr(_,"font-variant",T.fontVariant===void 0?inferFontVariant$1(R):T.fontVariant),applyAttr(_,"font-weight",T.fontWeight)}function inferFontVariant$1(_){return _&&(isNumeric(_)||isTemporal(_))?"tabular-nums":void 0}const fontSizes=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function maybeFontSizeChannel(_){return _==null||typeof _=="number"?[void 0,_]:typeof _!="string"?[_,void 0]:(_=_.trim().toLowerCase(),fontSizes.has(_)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(_)?[void 0,_]:[_,void 0])}function lineWrap(_,T,R){const P=[];let O,I=0;for(const[z,F,G]of lineBreaks(_)){if(O===void 0&&(O=z),I>O&&R(_,O,F)>T&&(P.push(_.slice(O,I)+(_[I-1]===softHyphen?"-":"")),O=z),G){P.push(_.slice(O,F)),O=void 0;continue}I=F}return P}function*lineBreaks(_){let T=0,R=0;const P=_.length;for(;R<P;){let O=1;switch(_[R]){case softHyphen:case"-":++R,yield[T,R,!1],T=R;break;case" ":for(yield[T,R,!1];_[++R]===" ";);T=R;break;case"\r":_[R+1]===`
`&&++O;case`
`:yield[T,R,!0],R+=O,T=R;break;default:++R;break}}yield[T,R,!0]}const defaultWidthMap={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function defaultWidth(_,T=0,R=_.length){let P=0;for(let O=T;O<R;O=readCharacter(_,O))P+=defaultWidthMap[_[O]]??(isPictographic(_,O)?120:defaultWidthMap.e);return P}function monospaceWidth(_,T=0,R=_.length){let P=0;for(let O=T;O<R;O=readCharacter(_,O))P+=isPictographic(_,O)?126:63;return P}function splitter({monospace:_,lineWidth:T,textOverflow:R}){if(R!=null||T==1/0)return I=>I.split(/\r\n?|\n/g);const P=_?monospaceWidth:defaultWidth,O=T*100;return I=>lineWrap(I,O,P)}function clipper({monospace:_,lineWidth:T,textOverflow:R}){if(R==null||T==1/0)return I=>I;const P=_?monospaceWidth:defaultWidth,O=T*100;switch(R){case"clip-start":return I=>clipStart(I,O,P,"");case"clip-end":return I=>clipEnd(I,O,P,"");case"ellipsis-start":return I=>clipStart(I,O,P,ellipsis);case"ellipsis-middle":return I=>clipMiddle(I,O,P,ellipsis);case"ellipsis-end":return I=>clipEnd(I,O,P,ellipsis)}}const ellipsis="";function cut(_,T,R,P){const O=[];let I=0;for(let z=0,F=0,G=_.length;z<G;z=F){F=readCharacter(_,z);const V=R(_,z,F);if(I+V>T){for(I+=P;I>T&&z>0;)F=z,z=O.pop(),I-=R(_,z,F);return[z,T-I]}I+=V,O.push(z)}return[-1,0]}function clipEnd(_,T,R,P){_=_.trim();const O=R(P),[I]=cut(_,T,R,O);return I<0?_:_.slice(0,I).trimEnd()+P}function clipMiddle(_,T,R,P){_=_.trim();const O=R(_);if(O<=T)return _;const I=R(P)/2,[z,F]=cut(_,T/2,R,I),[G]=cut(_,O-T/2-F+I,R,-I);return G<0?P:_.slice(0,z).trimEnd()+P+_.slice(readCharacter(_,G)).trimStart()}function clipStart(_,T,R,P){_=_.trim();const O=R(_);if(O<=T)return _;const I=R(P),[z]=cut(_,O-T+I,R,-I);return z<0?P:P+_.slice(readCharacter(_,z)).trimStart()}const reCombiner=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,rePictographic=new RegExp("\\p{Extended_Pictographic}","uy");function readCharacter(_,T){return T+=isSurrogatePair(_,T)?2:1,isCombiner(_,T)&&(T=reCombiner.lastIndex),isZeroWidthJoiner(_,T)?readCharacter(_,T+1):T}function isAscii(_,T){return _.charCodeAt(T)<128}function isSurrogatePair(_,T){const R=_.charCodeAt(T);if(R>=55296&&R<56320){const P=_.charCodeAt(T+1);return P>=56320&&P<57344}return!1}function isZeroWidthJoiner(_,T){return _.charCodeAt(T)===8205}function isCombiner(_,T){return isAscii(_,T)?!1:(reCombiner.lastIndex=T,reCombiner.test(_))}function isPictographic(_,T){return isAscii(_,T)?!1:(rePictographic.lastIndex=T,rePictographic.test(_))}const defaults$7={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},defaultRadius=3.5,wingRatio=defaultRadius*5,shapeArrow={draw(_,T,R){const P=T*R/wingRatio;_.moveTo(0,0),_.lineTo(0,-T),_.moveTo(-P,P-T),_.lineTo(0,-T),_.lineTo(P,P-T)}},shapeSpike={draw(_,T,R){_.moveTo(-R,0),_.lineTo(0,-T),_.lineTo(R,0)}},shapes=new Map([["arrow",shapeArrow],["spike",shapeSpike]]);function isShapeObject(_){return _&&typeof _.draw=="function"}function maybeShape(_){if(isShapeObject(_))return _;const T=shapes.get(`${_}`.toLowerCase());if(T)return T;throw new Error(`invalid shape: ${_}`)}class Vector extends Mark{constructor(T,R={}){const{x:P,y:O,r:I=defaultRadius,length:z,rotate:F,shape:G=shapeArrow,anchor:V="middle",frameAnchor:Z}=R,[Y,Q]=maybeNumberChannel(z,12),[J,ee]=maybeNumberChannel(F,0);super(T,{x:{value:P,scale:"x",optional:!0},y:{value:O,scale:"y",optional:!0},length:{value:Y,scale:"length",optional:!0},rotate:{value:J,optional:!0}},R,defaults$7),this.r=+I,this.length=Q,this.rotate=ee,this.shape=maybeShape(G),this.anchor=keyword(V,"anchor",["start","middle","end"]),this.frameAnchor=maybeFrameAnchor(Z)}render(T,R,P,O,I){const{x:z,y:F}=R,{x:G,y:V,length:Z,rotate:Y}=P,{length:Q,rotate:J,anchor:ee,shape:ne,r:se}=this,[oe,ae]=applyFrameAnchor(this,O);return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyTransform,this,{x:G&&z,y:V&&F}).call(ce=>ce.selectAll().data(T).enter().append("path").call(applyDirectStyles,this).attr("transform",template`translate(${G?le=>G[le]:oe},${V?le=>V[le]:ae})${Y?le=>` rotate(${Y[le]})`:J?` rotate(${J})`:""}${ee==="start"?"":ee==="end"?Z?le=>` translate(0,${Z[le]})`:` translate(0,${Q})`:Z?le=>` translate(0,${Z[le]/2})`:` translate(0,${Q/2})`}`).attr("d",Z?le=>{const pe=pathRound();return ne.draw(pe,Z[le],se),pe}:(()=>{const le=pathRound();return ne.draw(le,Q,se),le})()).call(applyChannelStyles,this,P)).node()}}function vectorX(_,T={}){const{x:R=identity$1,...P}=T;return new Vector(_,{...P,x:R})}function vectorY(_,T={}){const{y:R=identity$1,...P}=T;return new Vector(_,{...P,y:R})}function maybeData(_,T){return arguments.length<2&&!isIterable(_)&&(T=_,_=null),T===void 0&&(T={}),[_,T]}function maybeAnchor({anchor:_}={},T){return _===void 0?T[0]:keyword(_,"anchor",T)}function anchorY(_){return maybeAnchor(_,["left","right"])}function anchorFy(_){return maybeAnchor(_,["right","left"])}function anchorX(_){return maybeAnchor(_,["bottom","top"])}function anchorFx(_){return maybeAnchor(_,["top","bottom"])}function axisY(){const[_,T]=maybeData(...arguments);return axisKy("y",anchorY(T),_,T)}function axisFy(){const[_,T]=maybeData(...arguments);return axisKy("fy",anchorFy(T),_,T)}function axisX(){const[_,T]=maybeData(...arguments);return axisKx("x",anchorX(T),_,T)}function axisFx(){const[_,T]=maybeData(...arguments);return axisKx("fx",anchorFx(T),_,T)}function axisKy(_,T,R,{color:P="currentColor",opacity:O=1,stroke:I=P,strokeOpacity:z=O,strokeWidth:F=1,fill:G=P,fillOpacity:V=O,textAnchor:Z,textStroke:Y,textStrokeOpacity:Q,textStrokeWidth:J,tickSize:ee=_==="y"?6:0,tickPadding:ne,tickRotate:se,x:oe,margin:ae,marginTop:ce=ae===void 0?20:ae,marginRight:le=ae===void 0?T==="right"?40:0:ae,marginBottom:pe=ae===void 0?20:ae,marginLeft:me=ae===void 0?T==="left"?40:0:ae,label:he,labelAnchor:fe,labelArrow:de,labelOffset:be,ariaLabel:ye=`${_}-axis`,...Ce}){return ee=number(ee),ne=number(ne),se=number(se),fe!==void 0&&(fe=keyword(fe,"labelAnchor",["center","top","bottom"])),de=maybeLabelArrow(de),marks(ee&&!isNoneish(I)?axisTickKy(_,T,R,{stroke:I,strokeOpacity:z,strokeWidth:F,tickSize:ee,tickPadding:ne,tickRotate:se,x:oe,ariaLabel:ye,...Ce}):null,isNoneish(G)?null:axisTextKy(_,T,R,{fill:G,fillOpacity:V,stroke:Y,strokeOpacity:Q,strokeWidth:J,textAnchor:Z,tickSize:ee,tickPadding:ne,tickRotate:se,x:oe,marginTop:ce,marginRight:le,marginBottom:pe,marginLeft:me,ariaLabel:ye,...Ce}),!isNoneish(G)&&he!==null?text([],labelOptions({fill:G,fillOpacity:V,...Ce},function(ve,Ee,we,ge,Se){const Te=ge[_],{marginTop:Ae,marginRight:Ue,marginBottom:_e,marginLeft:$e}=_==="y"&&Se.inset||Se,Ne=fe??(Te.bandwidth?"center":"top"),Be=be??(T==="right"?Ue:$e)-3;return Ne==="center"?(this.textAnchor=void 0,this.lineAnchor=T==="right"?"bottom":"top",this.frameAnchor=T,this.rotate=-90):(this.textAnchor=T==="right"?"end":"start",this.lineAnchor=Ne,this.frameAnchor=`${Ne}-${T}`,this.rotate=0),this.dy=Ne==="top"?3-Ae:Ne==="bottom"?_e-3:0,this.dx=T==="right"?Be:-Be,this.ariaLabel=`${ye} label`,{facets:[[0]],channels:{text:{value:[formatAxisLabel(_,Te,{anchor:T,label:he,labelAnchor:Ne,labelArrow:de})]}}}})):null)}function axisKx(_,T,R,{color:P="currentColor",opacity:O=1,stroke:I=P,strokeOpacity:z=O,strokeWidth:F=1,fill:G=P,fillOpacity:V=O,textAnchor:Z,textStroke:Y,textStrokeOpacity:Q,textStrokeWidth:J,tickSize:ee=_==="x"?6:0,tickPadding:ne,tickRotate:se,y:oe,margin:ae,marginTop:ce=ae===void 0?T==="top"?30:0:ae,marginRight:le=ae===void 0?20:ae,marginBottom:pe=ae===void 0?T==="bottom"?30:0:ae,marginLeft:me=ae===void 0?20:ae,label:he,labelAnchor:fe,labelArrow:de,labelOffset:be,ariaLabel:ye=`${_}-axis`,...Ce}){return ee=number(ee),ne=number(ne),se=number(se),fe!==void 0&&(fe=keyword(fe,"labelAnchor",["center","left","right"])),de=maybeLabelArrow(de),marks(ee&&!isNoneish(I)?axisTickKx(_,T,R,{stroke:I,strokeOpacity:z,strokeWidth:F,tickSize:ee,tickPadding:ne,tickRotate:se,y:oe,ariaLabel:ye,...Ce}):null,isNoneish(G)?null:axisTextKx(_,T,R,{fill:G,fillOpacity:V,stroke:Y,strokeOpacity:Q,strokeWidth:J,textAnchor:Z,tickSize:ee,tickPadding:ne,tickRotate:se,y:oe,marginTop:ce,marginRight:le,marginBottom:pe,marginLeft:me,ariaLabel:ye,...Ce}),!isNoneish(G)&&he!==null?text([],labelOptions({fill:G,fillOpacity:V,...Ce},function(ve,Ee,we,ge,Se){const Te=ge[_],{marginTop:Ae,marginRight:Ue,marginBottom:_e,marginLeft:$e}=_==="x"&&Se.inset||Se,Ne=fe??(Te.bandwidth?"center":"right"),Be=be??(T==="top"?Ae:_e)-3;return Ne==="center"?(this.frameAnchor=T,this.textAnchor=void 0):(this.frameAnchor=`${T}-${Ne}`,this.textAnchor=Ne==="right"?"end":"start"),this.lineAnchor=T,this.dy=T==="top"?-Be:Be,this.dx=Ne==="right"?Ue-3:Ne==="left"?3-$e:0,this.ariaLabel=`${ye} label`,{facets:[[0]],channels:{text:{value:[formatAxisLabel(_,Te,{anchor:T,label:he,labelAnchor:Ne,labelArrow:de})]}}}})):null)}function axisTickKy(_,T,R,{strokeWidth:P=1,strokeLinecap:O=null,strokeLinejoin:I=null,facetAnchor:z=T+(_==="y"?"-empty":""),frameAnchor:F=T,tickSize:G,inset:V=0,insetLeft:Z=V,insetRight:Y=V,dx:Q=0,y:J=_==="y"?void 0:null,ariaLabel:ee,...ne}){return axisMark(vectorY,_,R,{ariaLabel:`${ee} tick`,ariaHidden:!0},{strokeWidth:P,strokeLinecap:O,strokeLinejoin:I,facetAnchor:z,frameAnchor:F,y:J,...ne,dx:T==="left"?+Q-offset+ +Z:+Q+offset-Y,anchor:"start",length:G,shape:T==="left"?shapeTickLeft:shapeTickRight})}function axisTickKx(_,T,R,{strokeWidth:P=1,strokeLinecap:O=null,strokeLinejoin:I=null,facetAnchor:z=T+(_==="x"?"-empty":""),frameAnchor:F=T,tickSize:G,inset:V=0,insetTop:Z=V,insetBottom:Y=V,dy:Q=0,x:J=_==="x"?void 0:null,ariaLabel:ee,...ne}){return axisMark(vectorX,_,R,{ariaLabel:`${ee} tick`,ariaHidden:!0},{strokeWidth:P,strokeLinejoin:I,strokeLinecap:O,facetAnchor:z,frameAnchor:F,x:J,...ne,dy:T==="bottom"?+Q-offset-Y:+Q+offset+ +Z,anchor:"start",length:G,shape:T==="bottom"?shapeTickBottom:shapeTickTop})}function axisTextKy(_,T,R,{facetAnchor:P=T+(_==="y"?"-empty":""),frameAnchor:O=T,tickSize:I,tickRotate:z=0,tickPadding:F=Math.max(3,9-I)+(Math.abs(z)>60?4*Math.cos(z*radians):0),text:G,textAnchor:V=Math.abs(z)>60?"middle":T==="left"?"end":"start",lineAnchor:Z=z>60?"top":z<-60?"bottom":"middle",fontVariant:Y,inset:Q=0,insetLeft:J=Q,insetRight:ee=Q,dx:ne=0,ariaLabel:se,y:oe=_==="y"?void 0:null,...ae}){return axisMark(textY,_,R,{ariaLabel:`${se} tick label`},{facetAnchor:P,frameAnchor:O,text:G,textAnchor:V,lineAnchor:Z,fontVariant:Y,rotate:z,y:oe,...ae,dx:T==="left"?+ne-I-F+ +J:+ne+ +I+ +F-ee},function(ce,le,pe,me,he){Y===void 0&&(this.fontVariant=inferFontVariant(ce)),G===void 0&&(he.text=inferTextChannel(ce,le,pe,me,T))})}function axisTextKx(_,T,R,{facetAnchor:P=T+(_==="x"?"-empty":""),frameAnchor:O=T,tickSize:I,tickRotate:z=0,tickPadding:F=Math.max(3,9-I)+(Math.abs(z)>=10?4*Math.cos(z*radians):0),text:G,textAnchor:V=Math.abs(z)>=10?z<0^T==="bottom"?"start":"end":"middle",lineAnchor:Z=Math.abs(z)>=10?"middle":T==="bottom"?"top":"bottom",fontVariant:Y,inset:Q=0,insetTop:J=Q,insetBottom:ee=Q,dy:ne=0,x:se=_==="x"?void 0:null,ariaLabel:oe,...ae}){return axisMark(textX,_,R,{ariaLabel:`${oe} tick label`},{facetAnchor:P,frameAnchor:O,text:G===void 0?null:G,textAnchor:V,lineAnchor:Z,fontVariant:Y,rotate:z,x:se,...ae,dy:T==="bottom"?+ne+ +I+ +F-ee:+ne-I-F+ +J},function(ce,le,pe,me,he){Y===void 0&&(this.fontVariant=inferFontVariant(ce)),G===void 0&&(he.text=inferTextChannel(ce,le,pe,me,T))})}function gridY(){const[_,T]=maybeData(...arguments);return gridKy("y",anchorY(T),_,T)}function gridFy(){const[_,T]=maybeData(...arguments);return gridKy("fy",anchorFy(T),_,T)}function gridX(){const[_,T]=maybeData(...arguments);return gridKx("x",anchorX(T),_,T)}function gridFx(){const[_,T]=maybeData(...arguments);return gridKx("fx",anchorFx(T),_,T)}function gridKy(_,T,R,{y:P=_==="y"?void 0:null,x:O=null,x1:I=T==="left"?O:null,x2:z=T==="right"?O:null,ariaLabel:F=`${_}-grid`,ariaHidden:G=!0,...V}){return axisMark(ruleY,_,R,{ariaLabel:F,ariaHidden:G},{y:P,x1:I,x2:z,...gridDefaults(V)})}function gridKx(_,T,R,{x:P=_==="x"?void 0:null,y:O=null,y1:I=T==="top"?O:null,y2:z=T==="bottom"?O:null,ariaLabel:F=`${_}-grid`,ariaHidden:G=!0,...V}){return axisMark(ruleX,_,R,{ariaLabel:F,ariaHidden:G},{x:P,y1:I,y2:z,...gridDefaults(V)})}function gridDefaults({color:_="currentColor",opacity:T=.1,stroke:R=_,strokeOpacity:P=T,strokeWidth:O=1,...I}){return{stroke:R,strokeOpacity:P,strokeWidth:O,...I}}function labelOptions({fill:_,fillOpacity:T,fontFamily:R,fontSize:P,fontStyle:O,fontVariant:I,fontWeight:z,monospace:F,pointerEvents:G,shapeRendering:V,clip:Z=!1},Y){return[,_]=maybeColorChannel(_),[,T]=maybeNumberChannel(T),{facet:"super",x:null,y:null,fill:_,fillOpacity:T,fontFamily:R,fontSize:P,fontStyle:O,fontVariant:I,fontWeight:z,monospace:F,pointerEvents:G,shapeRendering:V,clip:Z,initializer:Y}}function axisMark(_,T,R,P,O,I){let z;function F(Z,Y,Q,J,ee,ne){const se=Z==null&&(T==="fx"||T==="fy"),{[T]:oe}=J;if(!oe)throw new Error(`missing scale: ${T}`);const ae=oe.domain();let{interval:ce,ticks:le,tickFormat:pe,tickSpacing:me=T==="x"?80:35}=O;if(typeof le=="string"&&hasTemporalDomain(oe)&&(ce=le,le=void 0),le===void 0&&(le=maybeRangeInterval(ce,oe.type)??inferTickCount(oe,me)),Z==null){if(isIterable(le))Z=arrayify(le);else if(isInterval(le))Z=inclusiveRange(le,...extent$1(ae));else if(oe.interval){let fe=oe.interval;if(oe.ticks){const[de,be]=extent$1(ae),ye=(be-de)/fe[intervalDuration];fe=generalizeTimeInterval(fe,ye/le)??fe,Z=inclusiveRange(fe,de,be)}else{Z=ae;const de=Z.length;fe=generalizeTimeInterval(fe,de/le)??fe,fe!==oe.interval&&(Z=inclusiveRange(fe,...extent$1(Z)))}if(fe===oe.interval){const de=Math.round(Z.length/le);de>1&&(Z=Z.filter((be,ye)=>ye%de===0))}}else oe.ticks?Z=oe.ticks(le):Z=ae;if(!oe.ticks&&Z.length&&Z!==ae){const fe=new InternSet(ae);Z=Z.filter(de=>fe.has(de)),Z.length||warn(`Warning: the ${T}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}T==="y"||T==="x"?Y=[range(Z)]:z[T]={scale:T,value:identity$1}}I?.call(this,oe,Z,le,pe,z);const he=Object.fromEntries(Object.entries(z).map(([fe,de])=>[fe,{...de,value:valueof(Z,de.value)}]));return se&&(Y=ne.filterFacets(Z,he)),{data:Z,facets:Y,channels:he}}const G=initializer(O).initializer,V=_(R,initializer({...O,initializer:F},G));return R==null?(z=V.channels,V.channels={}):z={},P!==void 0&&Object.assign(V,P),V.clip===void 0&&(V.clip=!1),V}function inferTickCount(_,T){const[R,P]=extent$1(_.range());return(P-R)/T}function inferTextChannel(_,T,R,P,O){return{value:inferTickFormat(_,T,R,P,O)}}function inferTickFormat(_,T,R,P,O){return typeof P=="function"&&!(_.type==="log"&&_.tickFormat)?P:P===void 0&&T&&isTemporal(T)?inferTimeFormat(_.type,T,O)??formatDefault:_.tickFormat?_.tickFormat(typeof R=="number"?R:null,P):typeof P=="string"&&_.domain().length>0?(isTemporal(_.domain())?utcFormat:format$1)(P):P===void 0?formatDefault:constant(P)}function inclusiveRange(_,T,R){return _.range(T,_.offset(_.floor(R)))}const shapeTickBottom={draw(_,T){_.moveTo(0,0),_.lineTo(0,T)}},shapeTickTop={draw(_,T){_.moveTo(0,0),_.lineTo(0,-T)}},shapeTickLeft={draw(_,T){_.moveTo(0,0),_.lineTo(-T,0)}},shapeTickRight={draw(_,T){_.moveTo(0,0),_.lineTo(T,0)}};function inferFontVariant(_){return _.bandwidth&&!_.interval?void 0:"tabular-nums"}function formatAxisLabel(_,T,{anchor:R,label:P=T.label,labelAnchor:O,labelArrow:I}={}){if(!(P==null||P.inferred&&hasTemporalDomain(T)&&/^(date|time|year)$/i.test(P))){if(P=String(P),I==="auto"&&(I=(!T.bandwidth||T.interval)&&!/[]/.test(P)),!I)return P;if(I===!0){const z=inferScaleOrder(T);z&&(I=/x$/.test(_)||O==="center"?/x$/.test(_)===z<0?"left":"right":z<0?"up":"down")}switch(I){case"left":return` ${P}`;case"right":return`${P} `;case"up":return R==="right"?`${P} `:` ${P}`;case"down":return R==="right"?`${P} `:` ${P}`}return P}}function maybeLabelArrow(_="auto"){return isNoneish(_)?!1:typeof _=="boolean"?_:keyword(_,"labelArrow",["auto","up","right","down","left"])}function hasTemporalDomain(_){return isTemporal(_.domain())}function maybeScale(_,T){if(T==null)return T;const R=_(T);if(!R)throw new Error(`scale not found: ${T}`);return R}function legendSwatches(_,{opacity:T,...R}={}){if(!isOrdinalScale(_)&&!isThresholdScale(_))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${_.type})`);return legendItems(_,R,(P,O,I,z)=>P.append("svg").attr("width",I).attr("height",z).attr("fill",O.scale).attr("fill-opacity",maybeNumberChannel(T)[1]).append("rect").attr("width","100%").attr("height","100%"))}function legendSymbols(_,{fill:T=_.hint?.fill!==void 0?_.hint.fill:"none",fillOpacity:R=1,stroke:P=_.hint?.stroke!==void 0?_.hint.stroke:isNoneish(T)?"currentColor":"none",strokeOpacity:O=1,strokeWidth:I=1.5,r:z=4.5,...F}={},G){const[V,Z]=maybeColorChannel(T),[Y,Q]=maybeColorChannel(P),J=maybeScale(G,V),ee=maybeScale(G,Y),ne=z*z*Math.PI;return R=maybeNumberChannel(R)[1],O=maybeNumberChannel(O)[1],I=maybeNumberChannel(I)[1],legendItems(_,F,(se,oe,ae,ce)=>se.append("svg").attr("viewBox","-8 -8 16 16").attr("width",ae).attr("height",ce).attr("fill",V==="color"?le=>J.scale(le):Z).attr("fill-opacity",R).attr("stroke",Y==="color"?le=>ee.scale(le):Q).attr("stroke-opacity",O).attr("stroke-width",I).append("path").attr("d",le=>{const pe=pathRound();return _.scale(le).draw(pe,ne),pe}))}function legendItems(_,T={},R){let{columns:P,tickFormat:O,fontVariant:I=inferFontVariant$2(_),swatchSize:z=15,swatchWidth:F=z,swatchHeight:G=z,marginLeft:V=0,className:Z,style:Y,width:Q}=T;const J=createContext(T);Z=maybeClassName(Z),O=inferTickFormat(_.scale,_.domain,void 0,O);const ee=create("div",J).attr("class",`${Z}-swatches ${Z}-swatches-${P!=null?"columns":"wrap"}`);let ne;return P!=null?(ne=`:where(.${Z}-swatches-columns .${Z}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${Z}-swatches-columns .${Z}-swatch::before) {
  flex-shrink: 0;
}
:where(.${Z}-swatches-columns .${Z}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,ee.style("columns",P).selectAll().data(_.domain).enter().append("div").attr("class",`${Z}-swatch`).call(R,_,F,G).call(se=>se.append("div").attr("class",`${Z}-swatch-label`).attr("title",O).text(O))):(ne=`:where(.${Z}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${Z}-swatches-wrap .${Z}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,ee.selectAll().data(_.domain).enter().append("span").attr("class",`${Z}-swatch`).call(R,_,F,G).append(function(){return this.ownerDocument.createTextNode(O.apply(this,arguments))})),ee.call(se=>se.insert("style","*").text(`:where(.${Z}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${Z}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${ne}`)).style("margin-left",V?`${+V}px`:null).style("width",Q===void 0?null:`${+Q}px`).style("font-variant",impliedString(I,"normal")).call(applyInlineStyles,Y).node()}const legendRegistry=new Map([["symbol",legendSymbols],["color",legendColor],["opacity",legendOpacity]]);function exposeLegends(_,T,R={}){return(P,O)=>{if(!legendRegistry.has(P))throw new Error(`unknown legend type: ${P}`);if(P in _)return legendRegistry.get(P)(_[P],legendOptions(T,R[P],O),I=>_[I])}}function legendOptions({className:_,...T},{label:R,ticks:P,tickFormat:O}={},I){return inherit(I,{className:_,...T},{label:R,ticks:P,tickFormat:O})}function legendColor(_,{legend:T=!0,...R}){if(T===!0&&(T=_.type==="ordinal"?"swatches":"ramp"),_.domain!==void 0)switch(`${T}`.toLowerCase()){case"swatches":return legendSwatches(_,R);case"ramp":return legendRamp(_,R);default:throw new Error(`unknown legend type: ${T}`)}}function legendOpacity({type:_,interpolate:T,...R},{legend:P=!0,color:O=rgb(0,0,0),...I}){if(!T)throw new Error(`${_} opacity scales are not supported`);if(P===!0&&(P="ramp"),`${P}`.toLowerCase()!=="ramp")throw new Error(`${P} opacity legends are not supported`);return legendColor({type:_,...R,interpolate:interpolateOpacity(O)},{legend:P,...I})}function interpolateOpacity(_){const{r:T,g:R,b:P}=rgb(_)||rgb(0,0,0);return O=>`rgba(${T},${R},${P},${O})`}function createLegends(_,T,R){const P=[];for(const[O,I]of legendRegistry){const z=R[O];if(z?.legend&&O in _){const F=I(_[O],legendOptions(T,_[O],z),G=>_[G]);F!=null&&P.push(F)}}return P}function maybeIdentityY(_={},T="y"){return hasY(_)?_:{..._,[T]:identity$1}}function exclusiveFacets(_,T){if(T.length===1)return{data:_,facets:T};const R=lengthof(_),P=new Uint8Array(R);let O=0;for(const F of T)for(const G of F)P[G]&&++O,P[G]=1;if(O===0)return{data:_,facets:T};_=slice(_);const I=_[reindex]=new Uint32Array(R+O);T=T.map(F=>slice(F,Uint32Array));let z=R;P.fill(0);for(const F of T)for(let G=0,V=F.length;G<V;++G){const Z=F[G];P[Z]?(F[G]=z,_[z]=_[Z],I[z]=Z,++z):I[Z]=Z,P[Z]=1}return{data:_,facets:T}}function stackY(_={},T={}){arguments.length===1&&([_,T]=mergeOptions$1(_));const{x1:R,x:P=R,y:O,...I}=T,[z,F,G,V]=stack(P,O,"x","y",_,I);return{...z,x1:R,x:F,y1:G,y2:V,y:mid(G,V)}}function maybeStackY({y:_,y1:T,y2:R,...P}={}){return P=withTip(P,"x"),T===void 0&&R===void 0?stackY({y:_,...P}):([T,R]=maybeZero(_,T,R),{...P,y1:T,y2:R})}function mergeOptions$1(_){const{offset:T,order:R,reverse:P,...O}=_;return[{offset:T,order:R,reverse:P},O]}const lengthy={length:!0};function stack(_,T=one,R,P,{offset:O,order:I,reverse:z},F){if(T===null)throw new Error(`stack requires ${P}`);const G=maybeZ(F),[V,Z]=maybeColumn(_),[Y,Q]=column(T),[J,ee]=column(T);return Y.hint=J.hint=lengthy,O=maybeOffset(O),I=maybeOrder(I,O,P),[basic(F,(ne,se,oe)=>{({data:ne,facets:se}=exclusiveFacets(ne,se));const ae=_==null?void 0:Z(maybeApplyInterval(valueof(ne,_),oe?.[R])),ce=valueof(ne,T,Float64Array),le=valueof(ne,G),pe=I&&I(ne,ae,ce,le),me=lengthof(ne),he=Q(new Float64Array(me)),fe=ee(new Float64Array(me)),de=[];for(const be of se){const ye=ae?Array.from(group(be,Ce=>ae[Ce]).values()):[be];if(pe)for(const Ce of ye)Ce.sort(pe);for(const Ce of ye){let ve=0,Ee=0;z&&Ce.reverse();for(const we of Ce){const ge=ce[we];ge<0?ve=fe[we]=(he[we]=ve)+ge:ge>0?Ee=fe[we]=(he[we]=Ee)+ge:fe[we]=he[we]=Ee}}de.push(ye)}return O&&O(de,he,fe,le),{data:ne,facets:se}}),V,Y,J]}function maybeOffset(_){if(_!=null){if(typeof _=="function")return _;switch(`${_}`.toLowerCase()){case"expand":case"normalize":return offsetExpand;case"center":case"silhouette":return offsetCenter;case"wiggle":return offsetWiggle}throw new Error(`unknown offset: ${_}`)}}function extent(_,T){let R=0,P=0;for(const O of _){const I=T[O];I<R&&(R=I),I>P&&(P=I)}return[R,P]}function offsetExpand(_,T,R){for(const P of _)for(const O of P){const[I,z]=extent(O,R);for(const F of O){const G=1/(z-I||1);T[F]=G*(T[F]-I),R[F]=G*(R[F]-I)}}}function offsetCenter(_,T,R){for(const P of _){for(const O of P){const[I,z]=extent(O,R);for(const F of O){const G=(z+I)/2;T[F]-=G,R[F]-=G}}offsetZero(P,T,R)}offsetCenterFacets(_,T,R)}function offsetWiggle(_,T,R,P){for(const O of _){const I=new InternMap;let z=0;for(const F of O){let G=-1;const V=F.map(J=>Math.abs(R[J]-T[J])),Z=F.map(J=>{G=P?P[J]:++G;const ee=R[J]-T[J],ne=I.has(G)?ee-I.get(G):0;return I.set(G,ee),ne}),Y=[0,...cumsum(Z)];for(const J of F)T[J]+=z,R[J]+=z;const Q=sum(V);Q&&(z-=sum(V,(J,ee)=>(Z[ee]/2+Y[ee])*J)/Q)}offsetZero(O,T,R)}offsetCenterFacets(_,T,R)}function offsetZero(_,T,R){const P=min$1(_,O=>min$1(O,I=>T[I]));for(const O of _)for(const I of O)T[I]-=P,R[I]-=P}function offsetCenterFacets(_,T,R){const P=_.length;if(P===1)return;const O=_.map(F=>F.flat()),I=O.map(F=>(min$1(F,G=>T[G])+max(F,G=>R[G]))/2),z=min$1(I);for(let F=0;F<P;F++){const G=z-I[F];for(const V of O[F])T[V]+=G,R[V]+=G}}function maybeOrder(_,T,R){if(_===void 0&&T===offsetWiggle)return orderInsideOut(ascendingDefined);if(_!=null){if(typeof _=="string"){const P=_.startsWith("-"),O=P?descendingDefined:ascendingDefined;switch((P?_.slice(1):_).toLowerCase()){case"value":case R:return orderY(O);case"z":return orderZ(O);case"sum":return orderSum(O);case"appearance":return orderAppearance(O);case"inside-out":return orderInsideOut(O)}return orderAccessor(field(_))}if(typeof _=="function")return(_.length===1?orderAccessor:orderComparator)(_);if(isArray(_))return orderGiven(_);throw new Error(`invalid order: ${_}`)}}function orderY(_){return(T,R,P)=>(O,I)=>_(P[O],P[I])}function orderZ(_){return(T,R,P,O)=>(I,z)=>_(O[I],O[z])}function orderSum(_){return orderZDomain(_,(T,R,P,O)=>groupSort(range(T),I=>sum(I,z=>P[z]),I=>O[I]))}function orderAppearance(_){return orderZDomain(_,(T,R,P,O)=>groupSort(range(T),I=>R[greatest(I,z=>P[z])],I=>O[I]))}function orderInsideOut(_){return orderZDomain(_,(T,R,P,O)=>{const I=range(T),z=groupSort(I,Y=>R[greatest(Y,Q=>P[Q])],Y=>O[Y]),F=rollup(I,Y=>sum(Y,Q=>P[Q]),Y=>O[Y]),G=[],V=[];let Z=0;for(const Y of z)Z<0?(Z+=F.get(Y),G.push(Y)):(Z-=F.get(Y),V.push(Y));return V.reverse().concat(G)})}function orderAccessor(_){return T=>{const R=valueof(T,_);return(P,O)=>ascendingDefined(R[P],R[O])}}function orderComparator(_){return T=>isArray(T)?(R,P)=>_(T[R],T[P]):(R,P)=>_(T.get(R),T.get(P))}function orderGiven(_){return orderZDomain(ascendingDefined,()=>_)}function orderZDomain(_,T){return(R,P,O,I)=>{if(!I)throw new Error("missing channel: z");const z=new InternMap(T(R,P,O,I).map((F,G)=>[F,G]));return(F,G)=>_(z.get(I[F]),z.get(I[G]))}}function rectInsets(_,{inset:T=0,insetTop:R=T,insetRight:P=T,insetBottom:O=T,insetLeft:I=T}={}){_.insetTop=number(R),_.insetRight=number(P),_.insetBottom=number(O),_.insetLeft=number(I)}function rectRadii(_,{r:T,rx:R,ry:P,rx1:O=T,ry1:I=T,rx2:z=T,ry2:F=T,rx1y1:G=O!==void 0?+O:I!==void 0?+I:0,rx1y2:V=O!==void 0?+O:F!==void 0?+F:0,rx2y1:Z=z!==void 0?+z:I!==void 0?+I:0,rx2y2:Y=z!==void 0?+z:F!==void 0?+F:0}={}){G||V||Z||Y?(_.rx1y1=G,_.rx1y2=V,_.rx2y1=Z,_.rx2y2=Y):(_.rx=impliedString(R,"auto"),_.ry=impliedString(P,"auto"))}function applyRoundedRect(_,T,R,P,O,I){const{rx1y1:z,rx1y2:F,rx2y1:G,rx2y2:V}=I;typeof T!="function"&&(T=constant(T)),typeof R!="function"&&(R=constant(R)),typeof P!="function"&&(P=constant(P)),typeof O!="function"&&(O=constant(O));const Z=Math.max(Math.abs(z+G),Math.abs(F+V)),Y=Math.max(Math.abs(z+F),Math.abs(G+V));_.attr("d",Q=>{const J=T(Q),ee=R(Q),ne=P(Q),se=O(Q),oe=J>ne,ae=ee>se,ce=oe?ne:J,le=oe?J:ne,pe=ae?se:ee,me=ae?ee:se,he=Math.min(1,(le-ce)/Z,(me-pe)/Y),fe=he*(oe?ae?V:G:ae?F:z),de=he*(oe?ae?F:z:ae?V:G),be=he*(oe?ae?z:F:ae?G:V),ye=he*(oe?ae?G:V:ae?z:F);return`M${ce},${pe+biasY(fe,ye)}A${fe},${fe} 0 0 ${fe<0?0:1} ${ce+biasX(fe,ye)},${pe}H${le-biasX(de,be)}A${de},${de} 0 0 ${de<0?0:1} ${le},${pe+biasY(de,be)}V${me-biasY(be,de)}A${be},${be} 0 0 ${be<0?0:1} ${le-biasX(be,de)},${me}H${ce+biasX(ye,fe)}A${ye},${ye} 0 0 ${ye<0?0:1} ${ce},${me-biasY(ye,fe)}Z`})}function biasX(_,T){return T<0?_:Math.abs(_)}function biasY(_,T){return T<0?Math.abs(_):_}const defaults$6={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},lineDefaults={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class Frame extends Mark{constructor(T={}){const{anchor:R=null}=T;super(singleton,void 0,T,R==null?defaults$6:lineDefaults),this.anchor=maybeKeyword(R,"anchor",["top","right","bottom","left"]),rectInsets(this,T),R||rectRadii(this,T)}render(T,R,P,O,I){const{marginTop:z,marginRight:F,marginBottom:G,marginLeft:V,width:Z,height:Y}=O,{anchor:Q,insetTop:J,insetRight:ee,insetBottom:ne,insetLeft:se}=this,{rx:oe,ry:ae,rx1y1:ce,rx1y2:le,rx2y1:pe,rx2y2:me}=this,he=V+se,fe=Z-F-ee,de=z+J,be=Y-G-ne;return create(Q?"svg:line":ce||le||pe||me?"svg:path":"svg:rect",I).datum(0).call(applyIndirectStyles,this,O,I).call(applyDirectStyles,this).call(applyChannelStyles,this,P).call(applyTransform,this,{}).call(Q==="left"?ye=>ye.attr("x1",he).attr("x2",he).attr("y1",de).attr("y2",be):Q==="right"?ye=>ye.attr("x1",fe).attr("x2",fe).attr("y1",de).attr("y2",be):Q==="top"?ye=>ye.attr("x1",he).attr("x2",fe).attr("y1",de).attr("y2",de):Q==="bottom"?ye=>ye.attr("x1",he).attr("x2",fe).attr("y1",be).attr("y2",be):ce||le||pe||me?ye=>ye.call(applyRoundedRect,he,de,fe,be,this):ye=>ye.attr("x",he).attr("y",de).attr("width",fe-he).attr("height",be-de).attr("rx",oe).attr("ry",ae)).node()}}function frame(_){return new Frame(_)}const defaults$5={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},ignoreChannels=new Set(["geometry","href","src","ariaLabel","scales"]);class Tip extends Mark{constructor(T,R={}){R.tip&&(R={...R,tip:!1}),R.title===void 0&&isIterable(T)&&isTextual(T)&&(R={...R,title:identity$1});const{x:P,y:O,x1:I,x2:z,y1:F,y2:G,anchor:V,preferredAnchor:Z="bottom",monospace:Y,fontFamily:Q=Y?"ui-monospace, monospace":void 0,fontSize:J,fontStyle:ee,fontVariant:ne,fontWeight:se,lineHeight:oe=1,lineWidth:ae=20,frameAnchor:ce,format:le,textAnchor:pe="start",textOverflow:me,textPadding:he=8,title:fe,pointerSize:de=12,pathFilter:be="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=R;super(T,{x:{value:I!=null&&z!=null?null:P,scale:"x",optional:!0},y:{value:F!=null&&G!=null?null:O,scale:"y",optional:!0},x1:{value:I,scale:"x",optional:z==null},y1:{value:F,scale:"y",optional:G==null},x2:{value:z,scale:"x",optional:I==null},y2:{value:G,scale:"y",optional:F==null},title:{value:fe,optional:!0}},R,defaults$5),this.anchor=maybeAnchor$1(V,"anchor"),this.preferredAnchor=maybeAnchor$1(Z,"preferredAnchor"),this.frameAnchor=maybeFrameAnchor(ce),this.textAnchor=impliedString(pe,"middle"),this.textPadding=+he,this.pointerSize=+de,this.pathFilter=string(be),this.lineHeight=+oe,this.lineWidth=+ae,this.textOverflow=maybeTextOverflow(me),this.monospace=!!Y,this.fontFamily=string(Q),this.fontSize=number(J),this.fontStyle=string(ee),this.fontVariant=string(ne),this.fontWeight=string(se);for(const ye in defaults$5)ye in this.channels&&(this[ye]=defaults$5[ye]);this.splitLines=splitter(this),this.clipLine=clipper(this),this.format=typeof le=="string"||typeof le=="function"?{title:le}:{...le}}render(T,R,P,O,I){const z=this,{x:F,y:G,fx:V,fy:Z}=R,{ownerSVGElement:Y,document:Q}=I,{anchor:J,monospace:ee,lineHeight:ne,lineWidth:se}=this,{textPadding:oe,pointerSize:ae,pathFilter:ce}=this,{marginTop:le,marginLeft:pe}=O,{x1:me,y1:he,x2:fe,y2:de,x:be=me??fe,y:ye=he??de}=P,Ce=V?V(T.fx)-pe:0,ve=Z?Z(T.fy)-le:0,[Ee,we]=applyFrameAnchor(this,O),ge=anchorX$1(P,Ee),Se=anchorY$1(P,we),Te=ee?monospaceWidth:defaultWidth,Ae=Te(ellipsis);let Ue,_e;"title"in P?(Ue=getSourceChannels.call(this,{title:P.channels.title},R),_e=formatTitle):(Ue=getSourceChannels.call(this,P.channels,R),_e=formatChannels);const $e=create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyIndirectTextStyles,this).call(applyTransform,this,{x:be&&F,y:ye&&G}).call(Ze=>Ze.selectAll().data(T).enter().append("g").attr("transform",We=>`translate(${Math.round(ge(We))},${Math.round(Se(We))})`).call(applyDirectStyles,this).call(We=>We.append("path").attr("filter",ce)).call(We=>We.append("text").each(function(Oe){const Ge=select(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const je=_e.call(z,Oe,T,Ue,R,P);if(typeof je=="string")for(const Fe of z.splitLines(je))Ne(Ge,{value:z.clipLine(Fe)});else{const Fe=new Set;for(const ze of je){const{label:Me=""}=ze;Me&&Fe.has(Me)||(Fe.add(Me),Ne(Ge,ze))}}})));function Ne(Ze,{label:We,value:Oe,color:Ge,opacity:je}){We??="",Oe??="";const Fe=Ge!=null||je!=null;let ze,Me=se*100;const[Ke]=cut(We,Me,Te,Ae);if(Ke>=0)We=We.slice(0,Ke).trimEnd()+ellipsis,ze=Oe.trim(),Oe="";else{(We||!Oe&&!Fe)&&(Oe=" "+Oe);const[Qe]=cut(Oe,Me-Te(We),Te,Ae);Qe>=0&&(ze=Oe.trim(),Oe=Oe.slice(0,Qe).trimEnd()+ellipsis)}const Ye=Ze.append("tspan").attr("x",0).attr("dy",`${ne}em`).text("");We&&Ye.append("tspan").attr("font-weight","bold").text(We),Oe&&Ye.append(()=>Q.createTextNode(Oe)),Fe&&Ye.append("tspan").text(" ").attr("fill",Ge).attr("fill-opacity",je).style("user-select","none"),ze&&Ye.append("title").text(ze)}function Be(){const{width:Ze,height:We}=O.facet??O;$e.selectChildren().each(function(Oe){let{x:Ge,width:je,height:Fe}=this.getBBox();je=Math.round(je),Fe=Math.round(Fe);let ze=J;if(ze===void 0){const Ye=ge(Oe)+Ce,Qe=Se(Oe)+ve,Je=Ye+je+ae+oe*2<Ze,lt=Ye-je-ae-oe*2>0,et=Qe+Fe+ae+oe*2<We,ot=Qe-Fe-ae-oe*2>0;ze=Je&&lt?et&&ot?z.preferredAnchor:ot?"bottom":"top":et&&ot?Je?"left":"right":(Je||lt)&&(et||ot)?`${ot?"bottom":"top"}-${Je?"left":"right"}`:z.preferredAnchor}const Me=this.firstChild,Ke=this.lastChild;if(Me.setAttribute("d",getPath(ze,ae,oe,je,Fe)),Ge)for(const Ye of Ke.childNodes)Ye.setAttribute("x",-Ge);Ke.setAttribute("y",`${+getLineOffset(ze,Ke.childNodes.length,ne).toFixed(6)}em`),Ke.setAttribute("transform",`translate(${getTextTranslate(ze,ae,oe,je,Fe)})`)}),$e.attr("visibility",null)}return T.length&&($e.attr("visibility","hidden"),Y.isConnected?Promise.resolve().then(Be):typeof requestAnimationFrame<"u"&&requestAnimationFrame(Be)),$e.node()}}function tip(_,{x:T,y:R,...P}={}){return P.frameAnchor===void 0&&([T,R]=maybeTuple(T,R)),new Tip(_,{...P,x:T,y:R})}function getLineOffset(_,T,R){return/^top(?:-|$)/.test(_)?.94-R:-.29-T*R}function getTextTranslate(_,T,R,P,O){switch(_){case"middle":return[-P/2,O/2];case"top-left":return[R,T+R];case"top":return[-P/2,T/2+R];case"top-right":return[-P-R,T+R];case"right":return[-T/2-P-R,O/2];case"bottom-left":return[R,-T-R];case"bottom":return[-P/2,-T/2-R];case"bottom-right":return[-P-R,-T-R];case"left":return[R+T/2,O/2]}}function getPath(_,T,R,P,O){const I=P+R*2,z=O+R*2;switch(_){case"middle":return`M${-I/2},${-z/2}h${I}v${z}h${-I}z`;case"top-left":return`M0,0l${T},${T}h${I-T}v${z}h${-I}z`;case"top":return`M0,0l${T/2},${T/2}h${(I-T)/2}v${z}h${-I}v${-z}h${(I-T)/2}z`;case"top-right":return`M0,0l${-T},${T}h${T-I}v${z}h${I}z`;case"right":return`M0,0l${-T/2},${-T/2}v${T/2-z/2}h${-I}v${z}h${I}v${T/2-z/2}z`;case"bottom-left":return`M0,0l${T},${-T}h${I-T}v${-z}h${-I}z`;case"bottom":return`M0,0l${T/2},${-T/2}h${(I-T)/2}v${-z}h${-I}v${z}h${(I-T)/2}z`;case"bottom-right":return`M0,0l${-T},${-T}h${T-I}v${-z}h${I}z`;case"left":return`M0,0l${T/2},${-T/2}v${T/2-z/2}h${I}v${z}h${-I}v${T/2-z/2}z`}}function getSourceChannels(_,T){const R={};let P=this.format;P=maybeExpandPairedFormat(P,_,"x"),P=maybeExpandPairedFormat(P,_,"y"),this.format=P;for(const O in P){const I=P[O];if(!(I===null||I===!1))if(O==="fx"||O==="fy")R[O]=!0;else{const z=getSource(_,O);z&&(R[O]=z)}}for(const O in _){if(O in R||O in P||ignoreChannels.has(O)||(O==="x"||O==="y")&&_.geometry)continue;const I=getSource(_,O);if(I){if(I.scale==null&&I.defaultScale==="color")continue;R[O]=I}}this.facet&&(T.fx&&!("fx"in P)&&(R.fx=!0),T.fy&&!("fy"in P)&&(R.fy=!0));for(const O in R){const I=this.format[O];if(typeof I=="string"){const z=R[O]?.value??T[O]?.domain()??[];this.format[O]=(isTemporal(z)?utcFormat:format$1)(I)}else if(I===void 0||I===!0){const z=T[O];this.format[O]=z?.bandwidth?inferTickFormat(z,z.domain()):formatDefault}}return R}function maybeExpandPairedFormat(_,T,R){if(!(R in _))return _;const P=`${R}1`,O=`${R}2`;if((P in _||!(P in T))&&(O in _||!(O in T)))return _;const I=Object.entries(_),z=_[R];return I.splice(I.findIndex(([F])=>F===R)+1,0,[P,z],[O,z]),Object.fromEntries(I)}function formatTitle(_,T,{title:R}){return this.format.title(R.value[_],_)}function*formatChannels(_,T,R,P,O){for(const I in R){if(I==="fx"||I==="fy"){yield{label:formatLabel(P,R,I),value:this.format[I](T[I],_)};continue}if(I==="x1"&&"x2"in R||I==="y1"&&"y2"in R)continue;const z=R[I];if(I==="x2"&&"x1"in R)yield{label:formatPairLabel(P,R,"x"),value:formatPair(this.format.x2,R.x1,z,_)};else if(I==="y2"&&"y1"in R)yield{label:formatPairLabel(P,R,"y"),value:formatPair(this.format.y2,R.y1,z,_)};else{const F=z.value[_],G=z.scale;if(!defined(F)&&G==null)continue;yield{label:formatLabel(P,R,I),value:this.format[I](F,_),color:G==="color"?O[I][_]:null,opacity:G==="opacity"?O[I][_]:null}}}}function formatPair(_,T,R,P){return R.hint?.length?`${_(R.value[P]-T.value[P],P)}`:`${_(T.value[P],P)}${_(R.value[P],P)}`}function formatPairLabel(_,T,R){const P=formatLabel(_,T,`${R}1`,R),O=formatLabel(_,T,`${R}2`,R);return P===O?P:`${P}${O}`}function formatLabel(_,T,R,P=R){const O=T[R],I=_[O?.scale??R];return String(I?.label??O?.label??P)}function plot(_={}){const{facet:T,style:R,title:P,subtitle:O,caption:I,ariaLabel:z,ariaDescription:F}=_,G=maybeClassName(_.className),V=_.marks===void 0?[]:flatMarks(_.marks);V.push(...inferTips(V));const Z=maybeTopFacet(T,_),Y=new Map;for(const Ae of V){const Ue=maybeMarkFacet(Ae,Z,_);Ue&&Y.set(Ae,Ue)}const Q=new Map;Z&&addScaleChannels(Q,[Z],_),addScaleChannels(Q,Y,_);const J=flatMarks(inferAxes(V,Q,_));for(const Ae of J){const Ue=maybeMarkFacet(Ae,Z,_);Ue&&Y.set(Ae,Ue)}V.unshift(...J);let ee=createFacets(Q,_);if(ee!==void 0){const Ae=Z?facetFilter(ee,Z):void 0;for(const _e of V){if(_e.facet===null||_e.facet==="super")continue;const $e=Y.get(_e);$e!==void 0&&($e.facetsIndex=_e.fx!=null||_e.fy!=null?facetFilter(ee,$e):Ae)}const Ue=new Set;for(const{facetsIndex:_e}of Y.values())_e?.forEach(($e,Ne)=>{$e?.length>0&&Ue.add(Ne)});ee.forEach(0<Ue.size&&Ue.size<ee.length?(_e,$e)=>_e.empty=!Ue.has($e):_e=>_e.empty=!1);for(const _e of V)if(_e.facet==="exclude"){const $e=Y.get(_e);$e!==void 0&&($e.facetsIndex=facetExclude($e.facetsIndex))}}for(const Ae of registry.keys())isScaleOptions(_[Ae])&&Ae!=="fx"&&Ae!=="fy"&&Q.set(Ae,[]);const ne=new Map;for(const Ae of V){if(ne.has(Ae))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:Ue,channels:_e}=Y.get(Ae)??{},{data:$e,facets:Ne,channels:Be}=Ae.initialize(Ue,_e,_);applyScaleTransforms(Be,_),ne.set(Ae,{data:$e,facets:Ne,channels:Be})}const se=createScales(addScaleChannels(Q,ne,_),_),oe=createDimensions(se,V,_);autoScaleRange(se,oe);const ae=createScaleFunctions(se),{fx:ce,fy:le}=ae,pe=ce||le?innerDimensions(se,oe):oe,me=ce||le?actualDimensions(ae,oe):oe,he=createContext(_),fe=he.document,de=creator("svg").call(fe.documentElement);let be=de;he.ownerSVGElement=de,he.className=G,he.projection=createProjection(_,pe),he.path=function(){return geoPath(this.projection??xyProjection(ae))},he.filterFacets=(Ae,Ue)=>facetFilter(ee,{channels:Ue,groups:facetGroups(Ae,Ue)}),he.getMarkState=Ae=>{const Ue=ne.get(Ae),_e=Y.get(Ae);return{...Ue,channels:{...Ue.channels,..._e?.channels}}},he.dispatchValue=Ae=>{be.value!==Ae&&(be.value=Ae,be.dispatchEvent(new he.document.defaultView.Event("input",{bubbles:!0})))};const ye=new Set;for(const[Ae,Ue]of ne)if(Ae.initializer!=null){const _e=Ae.facet==="super"?me:pe,$e=Ae.initializer(Ue.data,Ue.facets,Ue.channels,ae,_e,he);if($e.data!==void 0&&(Ue.data=$e.data),$e.facets!==void 0&&(Ue.facets=$e.facets),$e.channels!==void 0){const{fx:Ne,fy:Be,...Ze}=$e.channels;inferChannelScales(Ze),Object.assign(Ue.channels,Ze);for(const We of Object.values(Ze)){const{scale:Oe}=We;Oe!=null&&!isPosition(registry.get(Oe))&&(applyScaleTransform(We,_),ye.add(Oe))}(Ne!=null||Be!=null)&&Y.set(Ae,!0)}}if(ye.size){const Ae=new Map;addScaleChannels(Ae,ne,_,Ne=>ye.has(Ne)),addScaleChannels(Q,ne,_,Ne=>ye.has(Ne));const Ue=inheritScaleLabels(createScales(Ae,_),se),{scales:_e,...$e}=createScaleFunctions(Ue);Object.assign(se,Ue),Object.assign(ae,$e),Object.assign(ae.scales,_e)}let Ce,ve;ee!==void 0&&(Ce={x:ce?.domain(),y:le?.domain()},ee=recreateFacets(ee,Ce),ve=facetTranslator(ce,le,oe));for(const[Ae,Ue]of ne)Ue.values=Ae.scale(Ue.channels,ae,he);const{width:Ee,height:we}=oe;select(de).attr("class",G).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",Ee).attr("height",we).attr("viewBox",`0 0 ${Ee} ${we}`).attr("aria-label",z).attr("aria-description",F).call(Ae=>Ae.append("style").text(`:where(.${G}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${G} text),
:where(.${G} tspan) {
  white-space: pre;
}`)).call(applyInlineStyles,R);for(const Ae of V){const{channels:Ue,values:_e,facets:$e}=ne.get(Ae);if(ee===void 0||Ae.facet==="super"){let Ne=null;if($e&&(Ne=$e[0],Ne=Ae.filter(Ne,Ue,_e),Ne.length===0))continue;const Be=Ae.render(Ne,ae,_e,me,he);if(Be==null)continue;de.appendChild(Be)}else{let Ne;for(const Be of ee){if(!(Ae.facetAnchor?.(ee,Ce,Be)??!Be.empty))continue;let Ze=null;if($e){const Oe=Y.has(Ae);if(Ze=$e[Oe?Be.i:0],Ze=Ae.filter(Ze,Ue,_e),Ze.length===0)continue;!Oe&&Ze===$e[0]&&(Ze=subarray(Ze)),Ze.fx=Be.x,Ze.fy=Be.y,Ze.fi=Be.i}const We=Ae.render(Ze,ae,_e,pe,he);if(We!=null){(Ne??=select(de).append("g")).append(()=>We).datum(Be);for(const Oe of["aria-label","aria-description","aria-hidden","transform"])We.hasAttribute(Oe)&&(Ne.attr(Oe,We.getAttribute(Oe)),We.removeAttribute(Oe))}}Ne?.selectChildren().each(ve)}}const ge=createLegends(se,he,_),{figure:Se=P!=null||O!=null||I!=null||ge.length>0}=_;Se&&(be=fe.createElement("figure"),be.className=`${G}-figure`,be.style.maxWidth="initial",P!=null&&be.append(createTitleElement(fe,P,"h2")),O!=null&&be.append(createTitleElement(fe,O,"h3")),be.append(...ge,de),I!=null&&be.append(createFigcaption(fe,I)),"value"in de&&(be.value=de.value,delete de.value)),be.scale=exposeScales(ae.scales),be.legend=exposeLegends(se,he,_);const Te=consumeWarnings();return Te>0&&select(de).append("text").attr("x",Ee).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${Te.toLocaleString("en-US")} warning${Te===1?"":"s"}. Please check the console.`),be}function createTitleElement(_,T,R){if(T.ownerDocument)return T;const P=_.createElement(R);return P.append(T),P}function createFigcaption(_,T){const R=_.createElement("figcaption");return R.append(T),R}function flatMarks(_){return _.flat(1/0).filter(T=>T!=null).map(markify)}function markify(_){return typeof _.render=="function"?_:new Render(_)}class Render extends Mark{constructor(T){if(typeof T!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=T}render(){}}function applyScaleTransforms(_,T){for(const R in _)applyScaleTransform(_[R],T);return _}function applyScaleTransform(_,T){const{scale:R,transform:P=!0}=_;if(R==null||!P)return;const{type:O,percent:I,interval:z,transform:F=I?G=>G==null?NaN:G*100:maybeIntervalTransform(z,O)}=T[R]??{};F!=null&&(_.value=map(_.value,F),_.transform=!1)}function inferChannelScales(_){for(const T in _)inferChannelScale(T,_[T])}function addScaleChannels(_,T,R,P=yes){for(const{channels:O}of T.values())for(const I in O){const z=O[I],{scale:F}=z;if(F!=null&&P(F))if(F==="projection"){if(!hasProjection(R)){const G=R.x?.domain===void 0,V=R.y?.domain===void 0;if(G||V){const[Z,Y]=getGeometryChannels(z);G&&addScaleChannel(_,"x",Z),V&&addScaleChannel(_,"y",Y)}}}else addScaleChannel(_,F,z)}return _}function addScaleChannel(_,T,R){const P=_.get(T);P!==void 0?P.push(R):_.set(T,[R])}function maybeTopFacet(_,T){if(_==null)return;const{x:R,y:P}=_;if(R==null&&P==null)return;const O=dataify(_.data);if(O==null)throw new Error("missing facet data");const I={};R!=null&&(I.fx=createChannel(O,{value:R,scale:"fx"})),P!=null&&(I.fy=createChannel(O,{value:P,scale:"fy"})),applyScaleTransforms(I,T);const z=facetGroups(O,I);return{channels:I,groups:z,data:_.data}}function maybeMarkFacet(_,T,R){if(_.facet===null||_.facet==="super")return;const{fx:P,fy:O}=_;if(P!=null||O!=null){const G=dataify(_.data??P??O);if(G===void 0)throw new Error(`missing facet data in ${_.ariaLabel}`);if(G===null)return;const V={};return P!=null&&(V.fx=createChannel(G,{value:P,scale:"fx"})),O!=null&&(V.fy=createChannel(G,{value:O,scale:"fy"})),applyScaleTransforms(V,R),{channels:V,groups:facetGroups(G,V)}}if(T===void 0)return;const{channels:I,groups:z,data:F}=T;if(_.facet!=="auto"||_.data===F)return{channels:I,groups:z};F.length>0&&(z.size>1||z.size===1&&I.fx&&I.fy&&[...z][0][1].size>1)&&lengthof(dataify(_.data))===lengthof(F)&&warn(`Warning: the ${_.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function derive(_,T={}){return initializer({...T,x:null,y:null},(R,P,O,I,z,F)=>F.getMarkState(_))}function inferTips(_){const T=[];for(const R of _){let P=R.tip;if(P){P===!0?P={}:typeof P=="string"&&(P={pointer:P});let{pointer:O,preferredAnchor:I}=P;O=/^x$/i.test(O)?pointerX:/^y$/i.test(O)?pointerY:pointer,P=O(derive(R,P)),P.title=null,I===void 0&&(P.preferredAnchor=O===pointerY?"left":"bottom");const z=tip(R.data,P);z.facet=R.facet,z.facetAnchor=R.facetAnchor,T.push(z)}}return T}function inferAxes(_,T,R){let{projection:P,x:O={},y:I={},fx:z={},fy:F={},axis:G,grid:V,facet:Z={},facet:{axis:Y=G,grid:Q}=Z,x:{axis:J=G,grid:ee=J===null?null:V}=O,y:{axis:ne=G,grid:se=ne===null?null:V}=I,fx:{axis:oe=Y,grid:ae=oe===null?null:Q}=z,fy:{axis:ce=Y,grid:le=ce===null?null:Q}=F}=R;(P||!isScaleOptions(O)&&!hasPositionChannel("x",_))&&(J=ee=null),(P||!isScaleOptions(I)&&!hasPositionChannel("y",_))&&(ne=se=null),T.has("fx")||(oe=ae=null),T.has("fy")||(ce=le=null),J===void 0&&(J=!hasAxis(_,"x")),ne===void 0&&(ne=!hasAxis(_,"y")),oe===void 0&&(oe=!hasAxis(_,"fx")),ce===void 0&&(ce=!hasAxis(_,"fy")),J===!0&&(J="bottom"),ne===!0&&(ne="left"),oe===!0&&(oe=J==="top"||J===null?"bottom":"top"),ce===!0&&(ce=ne==="right"||ne===null?"left":"right");const pe=[];return maybeGrid(pe,le,gridFy,F),maybeAxis(pe,ce,axisFy,"right","left",Z,F),maybeGrid(pe,ae,gridFx,z),maybeAxis(pe,oe,axisFx,"top","bottom",Z,z),maybeGrid(pe,se,gridY,I),maybeAxis(pe,ne,axisY,"left","right",R,I),maybeGrid(pe,ee,gridX,O),maybeAxis(pe,J,axisX,"bottom","top",R,O),pe}function maybeAxis(_,T,R,P,O,I,z){if(!T)return;const F=isBoth(T);z=axisOptions(F?P:T,I,z);const{line:G}=z;(R===axisY||R===axisX)&&G&&!isNone(G)&&_.push(frame(lineOptions(z))),_.push(R(z)),F&&_.push(R({...z,anchor:O,label:null}))}function maybeGrid(_,T,R,P){!T||isNone(T)||_.push(R(gridOptions(T,P)))}function isBoth(_){return/^\s*both\s*$/i.test(_)}function axisOptions(_,T,{line:R=T.line,ticks:P,tickSize:O,tickSpacing:I,tickPadding:z,tickFormat:F,tickRotate:G,fontVariant:V,ariaLabel:Z,ariaDescription:Y,label:Q=T.label,labelAnchor:J,labelArrow:ee=T.labelArrow,labelOffset:ne}){return{anchor:_,line:R,ticks:P,tickSize:O,tickSpacing:I,tickPadding:z,tickFormat:F,tickRotate:G,fontVariant:V,ariaLabel:Z,ariaDescription:Y,label:Q,labelAnchor:J,labelArrow:ee,labelOffset:ne}}function lineOptions(_){const{anchor:T,line:R}=_;return{anchor:T,facetAnchor:T+"-empty",stroke:R===!0?void 0:R}}function gridOptions(_,{stroke:T=isColor(_)?_:void 0,ticks:R=isGridTicks(_)?_:void 0,tickSpacing:P,ariaLabel:O,ariaDescription:I}){return{stroke:T,ticks:R,tickSpacing:P,ariaLabel:O,ariaDescription:I}}function isGridTicks(_){switch(typeof _){case"number":return!0;case"string":return!isColor(_)}return isIterable(_)||typeof _?.range=="function"}function hasAxis(_,T){const R=`${T}-axis `;return _.some(P=>P.ariaLabel?.startsWith(R))}function hasPositionChannel(_,T){for(const R of T)for(const P in R.channels){const{scale:O}=R.channels[P];if(O===_||O==="projection")return!0}return!1}function inheritScaleLabels(_,T){for(const R in _){const P=_[R],O=T[R];P.label===void 0&&O&&(P.label=O.label)}return _}function actualDimensions({fx:_,fy:T},R){const{marginTop:P,marginRight:O,marginBottom:I,marginLeft:z,width:F,height:G}=outerDimensions(R),V=_&&outerRange(_),Z=T&&outerRange(T);return{marginTop:T?Z[0]:P,marginRight:_?F-V[1]:O,marginBottom:T?G-Z[1]:I,marginLeft:_?V[0]:z,inset:{marginTop:R.marginTop,marginRight:R.marginRight,marginBottom:R.marginBottom,marginLeft:R.marginLeft},width:F,height:G}}function outerRange(_){const T=_.domain();if(T.length===0)return[0,_.bandwidth()];let R=_(T[0]),P=_(T[T.length-1]);return P<R&&([R,P]=[P,R]),[R,P+_.bandwidth()]}const curves=new Map([["basis",curveBasis],["basis-closed",curveBasisClosed],["basis-open",curveBasisOpen],["bundle",curveBundle],["bump-x",bumpX],["bump-y",bumpY],["cardinal",curveCardinal],["cardinal-closed",curveCardinalClosed],["cardinal-open",curveCardinalOpen],["catmull-rom",curveCatmullRom],["catmull-rom-closed",curveCatmullRomClosed],["catmull-rom-open",curveCatmullRomOpen],["linear",curveLinear],["linear-closed",curveLinearClosed],["monotone-x",monotoneX],["monotone-y",monotoneY],["natural",curveNatural],["step",curveStep],["step-after",stepAfter],["step-before",stepBefore]]);function maybeCurve(_=curveLinear,T){if(typeof _=="function")return _;const R=curves.get(`${_}`.toLowerCase());if(!R)throw new Error(`unknown curve: ${_}`);if(T!==void 0){if("beta"in R)return R.beta(T);if("tension"in R)return R.tension(T);if("alpha"in R)return R.alpha(T)}return R}function maybeCurveAuto(_=curveAuto,T){return typeof _!="function"&&`${_}`.toLowerCase()==="auto"?curveAuto:maybeCurve(_,T)}function curveAuto(_){return curveLinear(_)}function binX(_={y:"count"},T={}){[_,T]=mergeOptions(_,T);const{x:R,y:P}=T;return binn(maybeBinValue(R,T,identity$1),null,null,P,_,maybeInsetX(T))}function maybeDenseInterval(_,T,R={}){if(R?.interval==null)return R;const{reduce:P=reduceFirst}=R,O={filter:null};return R[T]!=null&&(O[T]=P),R[`${T}1`]!=null&&(O[`${T}1`]=P),R[`${T}2`]!=null&&(O[`${T}2`]=P),_(O,R)}function maybeDenseIntervalX(_={}){return maybeDenseInterval(binX,"y",withTip(_,"x"))}function binn(_,T,R,P,{data:O=reduceIdentity,filter:I=reduceCount,sort:z,reverse:F,...G}={},V={}){_=maybeBin(_),T=maybeBin(T),G=maybeBinOutputs(G,V),O=maybeBinReduce(O,identity$1),z=z==null?void 0:maybeBinOutput("sort",z,V),I=I==null?void 0:maybeBinEvaluator("filter",I,V),P!=null&&hasOutput(G,"y","y1","y2")&&(P=null);const[Z,Y]=maybeColumn(_),[Q,J]=maybeColumn(_),[ee,ne]=maybeColumn(T),[se,oe]=maybeColumn(T),[ae,ce]=P!=null?[P,"y"]:[],[le,pe]=maybeColumn(ae),{x:me,y:he,z:fe,fill:de,stroke:be,x1:ye,x2:Ce,y1:ve,y2:Ee,domain:we,cumulative:ge,thresholds:Se,interval:Te,...Ae}=V,[Ue,_e]=maybeColumn(fe),[$e]=maybeColorChannel(de),[Ne]=maybeColorChannel(be),[Be,Ze]=maybeColumn($e),[We,Oe]=maybeColumn(Ne);return{..."z"in V&&{z:Ue||fe},..."fill"in V&&{fill:Be||de},..."stroke"in V&&{stroke:We||be},...basic(Ae,(Ge,je,Fe)=>{const ze=maybeApplyInterval(valueof(Ge,ae),Fe?.[ce]),Me=valueof(Ge,fe),Ke=valueof(Ge,$e),Ye=valueof(Ge,Ne),Qe=maybeSubgroup(G,{z:Me,fill:Ke,stroke:Ye}),Je=[],lt=[],et=ze&&pe([]),ot=Me&&_e([]),At=Ke&&Ze([]),pt=Ye&&Oe([]),xt=_&&Y([]),qt=_&&J([]),ft=T&&ne([]),Gt=T&&oe([]),Rt=bing(_,T,Ge);let Ot=0;for(const kt of G)kt.initialize(Ge);z&&z.initialize(Ge),I&&I.initialize(Ge);for(const kt of je){const cr=[];for(const Sn of G)Sn.scope("facet",kt);z&&z.scope("facet",kt),I&&I.scope("facet",kt);for(const[Sn,In]of maybeGroup(kt,Qe))for(const[sn,tn]of maybeGroup(In,ze))for(const[$t,Zt]of Rt(tn))if(Qe&&(Zt.z=Sn),!(I&&!I.reduce($t,Zt))){cr.push(Ot++),lt.push(O.reduceIndex($t,Ge,Zt)),ze&&et.push(sn),Me&&ot.push(Qe===Me?Sn:Me[($t.length>0?$t:tn)[0]]),Ke&&At.push(Qe===Ke?Sn:Ke[($t.length>0?$t:tn)[0]]),Ye&&pt.push(Qe===Ye?Sn:Ye[($t.length>0?$t:tn)[0]]),xt&&(xt.push(Zt.x1),qt.push(Zt.x2)),ft&&(ft.push(Zt.y1),Gt.push(Zt.y2));for(const nn of G)nn.reduce($t,Zt);z&&z.reduce($t,Zt)}Je.push(cr)}return maybeSort(Je,z,F),{data:lt,facets:Je}}),...!hasOutput(G,"x")&&(Z?{x1:Z,x2:Q,x:mid(Z,Q)}:{x:me,x1:ye,x2:Ce}),...!hasOutput(G,"y")&&(ee?{y1:ee,y2:se,y:mid(ee,se)}:{y:he,y1:ve,y2:Ee}),...le&&{[ce]:le},...Object.fromEntries(G.map(({name:Ge,output:je})=>[Ge,je]))}}function mergeOptions({cumulative:_,domain:T,thresholds:R,interval:P,...O},I){return[O,{cumulative:_,domain:T,thresholds:R,interval:P,...I}]}function maybeBinValue(_,{cumulative:T,domain:R,thresholds:P,interval:O},I){return _={...maybeValue(_)},_.domain===void 0&&(_.domain=R),_.cumulative===void 0&&(_.cumulative=T),_.thresholds===void 0&&(_.thresholds=P),_.interval===void 0&&(_.interval=O),_.value===void 0&&(_.value=I),_.thresholds=maybeThresholds(_.thresholds,_.interval),_}function maybeBin(_){if(_==null)return;const{value:T,cumulative:R,domain:P=extent$1,thresholds:O}=_,I=z=>{let F=valueof(z,T),G;if(isTemporal(F)||isTimeThresholds(O)){F=map(F,coerceDate,Float64Array);let[Z,Y]=typeof P=="function"?P(F):P,Q=typeof O=="function"&&!isInterval(O)?O(F,Z,Y):O;typeof Q=="number"&&(Q=utcTickInterval(Z,Y,Q)),isInterval(Q)&&(P===extent$1&&(Z=Q.floor(Z),Y=Q.offset(Q.floor(Y))),Q=Q.range(Z,Q.offset(Y))),G=Q}else{F=coerceNumbers(F);let[Z,Y]=typeof P=="function"?P(F):P,Q=typeof O=="function"&&!isInterval(O)?O(F,Z,Y):O;if(typeof Q=="number")if(P===extent$1){let J=tickIncrement(Z,Y,Q);if(isFinite(J))if(J>0){let ee=Math.round(Z/J),ne=Math.round(Y/J);ee*J<=Z||--ee,ne*J>Y||++ne;let se=ne-ee+1;Q=new Float64Array(se);for(let oe=0;oe<se;++oe)Q[oe]=(ee+oe)*J}else if(J<0){J=-J;let ee=Math.round(Z*J),ne=Math.round(Y*J);ee/J<=Z||--ee,ne/J>Y||++ne;let se=ne-ee+1;Q=new Float64Array(se);for(let oe=0;oe<se;++oe)Q[oe]=(ee+oe)/J}else Q=[Z];else Q=[Z]}else Q=ticks(Z,Y,Q);else isInterval(Q)&&(P===extent$1&&(Z=Q.floor(Z),Y=Q.offset(Q.floor(Y))),Q=Q.range(Z,Q.offset(Y)));G=Q}const V=[];if(G.length===1)V.push([G[0],G[0]]);else for(let Z=1;Z<G.length;++Z)V.push([G[Z-1],G[Z]]);return V.bin=(R<0?bin1cn:R>0?bin1cp:bin1)(V,G,F),V};return I.label=labelof(T),I}function maybeThresholds(_,T,R=thresholdAuto){if(_===void 0)return T===void 0?R:maybeRangeInterval(T);if(typeof _=="string"){switch(_.toLowerCase()){case"freedman-diaconis":return thresholdFreedmanDiaconis;case"scott":return thresholdScott;case"sturges":return thresholdSturges;case"auto":return thresholdAuto}return utcInterval(_)}return _}function maybeBinOutputs(_,T){return maybeOutputs(_,T,maybeBinOutput)}function maybeBinOutput(_,T,R){return maybeOutput(_,T,R,maybeBinEvaluator)}function maybeBinEvaluator(_,T,R){return maybeEvaluator(_,T,R,maybeBinReduce)}function maybeBinReduce(_,T){return maybeReduce(_,T,maybeBinReduceFallback)}function maybeBinReduceFallback(_){switch(`${_}`.toLowerCase()){case"x":return reduceX;case"x1":return reduceX1;case"x2":return reduceX2;case"y":return reduceY;case"y1":return reduceY1;case"y2":return reduceY2;case"z":return reduceZ}throw new Error(`invalid bin reduce: ${_}`)}function thresholdAuto(_,T,R){return Math.min(200,thresholdScott(_,T,R))}function isTimeThresholds(_){return isTimeInterval(_)||isIterable(_)&&isTemporal(_)}function bing(_,T,R){const P=_?.(R),O=T?.(R);return P&&O?function*(I){const z=P.bin(I);for(const[F,[G,V]]of P.entries()){const Z=O.bin(z[F]);for(const[Y,[Q,J]]of O.entries())yield[Z[Y],{data:R,x1:G,y1:Q,x2:V,y2:J}]}}:P?function*(I){const z=P.bin(I);for(const[F,[G,V]]of P.entries())yield[z[F],{data:R,x1:G,x2:V}]}:function*(I){const z=O.bin(I);for(const[F,[G,V]]of O.entries())yield[z[F],{data:R,y1:G,y2:V}]}}function bin1(_,T,R){return T=coerceNumbers(T),P=>{const O=_.map(()=>[]);for(const I of P)O[bisectRight(T,R[I])-1]?.push(I);return O}}function bin1cp(_,T,R){const P=bin1(_,T,R);return O=>{const I=P(O);for(let z=1,F=I.length;z<F;++z){const G=I[z-1],V=I[z];for(const Z of G)V.push(Z)}return I}}function bin1cn(_,T,R){const P=bin1(_,T,R);return O=>{const I=P(O);for(let z=I.length-2;z>=0;--z){const F=I[z+1],G=I[z];for(const V of F)G.push(V)}return I}}function mid1(_,T){const R=(+_+ +T)/2;return _ instanceof Date?new Date(R):R}const reduceX={reduceIndex(_,T,{x1:R,x2:P}){return mid1(R,P)}},reduceY={reduceIndex(_,T,{y1:R,y2:P}){return mid1(R,P)}},reduceX1={reduceIndex(_,T,{x1:R}){return R}},reduceX2={reduceIndex(_,T,{x2:R}){return R}},reduceY1={reduceIndex(_,T,{y1:R}){return R}},reduceY2={reduceIndex(_,T,{y2:R}){return R}},defaults$4={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Area extends Mark{constructor(T,R={}){const{x1:P,y1:O,x2:I,y2:z,z:F,curve:G,tension:V}=R;super(T,{x1:{value:P,scale:"x"},y1:{value:O,scale:"y"},x2:{value:I,scale:"x",optional:!0},y2:{value:z,scale:"y",optional:!0},z:{value:maybeZ(R),optional:!0}},R,defaults$4),this.z=F,this.curve=maybeCurve(G,V)}filter(T){return T}render(T,R,P,O,I){const{x1:z,y1:F,x2:G=z,y2:V=F}=P;return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyTransform,this,R,0,0).call(Z=>Z.selectAll().data(groupIndex(T,[z,F,G,V],this,P)).enter().append("path").call(applyDirectStyles,this).call(applyGroupedChannelStyles,this,P).attr("d",shapeArea().curve(this.curve).defined(Y=>Y>=0).x0(Y=>z[Y]).y0(Y=>F[Y]).x1(Y=>G[Y]).y1(Y=>V[Y]))).node()}}function areaY(_,T){const{x:R=indexOf,...P}=maybeDenseIntervalX(T);return new Area(_,maybeStackY(maybeIdentityY({...P,x1:R,x2:void 0},R===indexOf?"y2":"y")))}const defaults$3={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Link extends Mark{constructor(T,R={}){const{x1:P,y1:O,x2:I,y2:z,curve:F,tension:G}=R;super(T,{x1:{value:P,scale:"x"},y1:{value:O,scale:"y"},x2:{value:I,scale:"x",optional:!0},y2:{value:z,scale:"y",optional:!0}},R,defaults$3),this.curve=maybeCurveAuto(F,G),markers(this,R)}project(T,R,P){this.curve!==curveAuto&&super.project(T,R,P)}render(T,R,P,O,I){const{x1:z,y1:F,x2:G=z,y2:V=F}=P,{curve:Z}=this;return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyTransform,this,R).call(Y=>Y.selectAll().data(T).enter().append("path").call(applyDirectStyles,this).attr("d",Z===curveAuto&&I.projection?sphereLink(I.path(),z,F,G,V):Q=>{const J=pathRound(),ee=Z(J);return ee.lineStart(),ee.point(z[Q],F[Q]),ee.point(G[Q],V[Q]),ee.lineEnd(),J}).call(applyChannelStyles,this,P).call(applyMarkers,this,P,I)).node()}}function sphereLink(_,T,R,P,O){return T=coerceNumbers(T),R=coerceNumbers(R),P=coerceNumbers(P),O=coerceNumbers(O),I=>_({type:"LineString",coordinates:[[T[I],R[I]],[P[I],O[I]]]})}function link(_,{x:T,x1:R,x2:P,y:O,y1:I,y2:z,...F}={}){return[R,P]=maybeSameValue(T,R,P),[I,z]=maybeSameValue(O,I,z),new Link(_,{...F,x1:R,x2:P,y1:I,y2:z})}function maybeSameValue(_,T,R){if(_===void 0){if(T===void 0){if(R!==void 0)return[R]}else if(R===void 0)return[T]}else{if(T===void 0)return R===void 0?[_]:[_,R];if(R===void 0)return[_,T]}return[T,R]}const barDefaults={ariaLabel:"bar"};class AbstractBar extends Mark{constructor(T,R,P={},O=barDefaults){super(T,R,P,O),rectInsets(this,P),rectRadii(this,P)}render(T,R,P,O,I){const{rx:z,ry:F,rx1y1:G,rx1y2:V,rx2y1:Z,rx2y2:Y}=this,Q=this._x(R,P,O),J=this._y(R,P,O),ee=this._width(R,P,O),ne=this._height(R,P,O);return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(this._transform,this,R).call(se=>se.selectAll().data(T).enter().call(G||V||Z||Y?oe=>oe.append("path").call(applyDirectStyles,this).call(applyRoundedRect,Q,J,add(Q,ee),add(J,ne),this).call(applyChannelStyles,this,P):oe=>oe.append("rect").call(applyDirectStyles,this).attr("x",Q).attr("width",ee).attr("y",J).attr("height",ne).call(applyAttr,"rx",z).call(applyAttr,"ry",F).call(applyChannelStyles,this,P))).node()}_x(T,{x:R},{marginLeft:P}){const{insetLeft:O}=this;return R?I=>R[I]+O:P+O}_y(T,{y:R},{marginTop:P}){const{insetTop:O}=this;return R?I=>R[I]+O:P+O}_width({x:T},{x:R},{marginRight:P,marginLeft:O,width:I}){const{insetLeft:z,insetRight:F}=this,G=R&&T?T.bandwidth():I-P-O;return Math.max(0,G-z-F)}_height({y:T},{y:R},{marginTop:P,marginBottom:O,height:I}){const{insetTop:z,insetBottom:F}=this,G=R&&T?T.bandwidth():I-P-O;return Math.max(0,G-z-F)}}function add(_,T){return typeof _=="function"&&typeof T=="function"?R=>_(R)+T(R):typeof _=="function"?R=>_(R)+T:typeof T=="function"?R=>_+T(R):_+T}class BarY extends AbstractBar{constructor(T,R={},P){const{x:O,y1:I,y2:z}=R;super(T,{y1:{value:I,scale:"y"},y2:{value:z,scale:"y"},x:{value:O,scale:"x",type:"band",optional:!0}},R,P)}_transform(T,R,{y:P}){T.call(applyTransform,R,{y:P},0,0)}_y({y:T},{y1:R,y2:P},{marginTop:O}){const{insetTop:I}=this;return isCollapsed(T)?O+I:z=>Math.min(R[z],P[z])+I}_height({y:T},{y1:R,y2:P},{marginTop:O,marginBottom:I,height:z}){const{insetTop:F,insetBottom:G}=this;return isCollapsed(T)?z-O-I-F-G:V=>Math.max(0,Math.abs(P[V]-R[V])-F-G)}}function barY(_,T={}){return hasXY(T)||(T={...T,x:indexOf,y2:identity$1}),new BarY(_,maybeStackY(maybeIntervalY(maybeIdentityY(T))))}const defaults$2={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function withDefaultSort(_){return _.sort===void 0&&_.reverse===void 0?sort({channel:"-r"},_):_}class Dot extends Mark{constructor(T,R={}){const{x:P,y:O,r:I,rotate:z,symbol:F=symbolCircle,frameAnchor:G}=R,[V,Z]=maybeNumberChannel(z,0),[Y,Q]=maybeSymbolChannel(F),[J,ee]=maybeNumberChannel(I,Y==null?3:4.5);super(T,{x:{value:P,scale:"x",optional:!0},y:{value:O,scale:"y",optional:!0},r:{value:J,scale:"r",filter:positive,optional:!0},rotate:{value:V,optional:!0},symbol:{value:Y,scale:"auto",optional:!0}},withDefaultSort(R),defaults$2),this.r=ee,this.rotate=Z,this.symbol=Q,this.frameAnchor=maybeFrameAnchor(G);const{channels:ne}=this,{symbol:se}=ne;if(se){const{fill:oe,stroke:ae}=ne;se.hint={fill:oe?oe.value===se.value?"color":"currentColor":this.fill??"currentColor",stroke:ae?ae.value===se.value?"color":"currentColor":this.stroke??"none"}}}render(T,R,P,O,I){const{x:z,y:F}=R,{x:G,y:V,r:Z,rotate:Y,symbol:Q}=P,{r:J,rotate:ee,symbol:ne}=this,[se,oe]=applyFrameAnchor(this,O),ae=ne===symbolCircle,ce=Z?void 0:J*J*Math.PI;return negative(J)&&(T=[]),create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyTransform,this,{x:G&&z,y:V&&F}).call(le=>le.selectAll().data(T).enter().append(ae?"circle":"path").call(applyDirectStyles,this).call(ae?pe=>{pe.attr("cx",G?me=>G[me]:se).attr("cy",V?me=>V[me]:oe).attr("r",Z?me=>Z[me]:J)}:pe=>{pe.attr("transform",template`translate(${G?me=>G[me]:se},${V?me=>V[me]:oe})${Y?me=>` rotate(${Y[me]})`:ee?` rotate(${ee})`:""}`).attr("d",Z&&Q?me=>{const he=pathRound();return Q[me].draw(he,Z[me]*Z[me]*Math.PI),he}:Z?me=>{const he=pathRound();return ne.draw(he,Z[me]*Z[me]*Math.PI),he}:Q?me=>{const he=pathRound();return Q[me].draw(he,ce),he}:(()=>{const me=pathRound();return ne.draw(me,ce),me})())}).call(applyChannelStyles,this,P)).node()}}function dot(_,{x:T,y:R,...P}={}){return P.frameAnchor===void 0&&([T,R]=maybeTuple(T,R)),new Dot(_,{...P,x:T,y:R})}const defaults$1={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Line extends Mark{constructor(T,R={}){const{x:P,y:O,z:I,curve:z,tension:F}=R;super(T,{x:{value:P,scale:"x"},y:{value:O,scale:"y"},z:{value:maybeZ(R),optional:!0}},R,defaults$1),this.z=I,this.curve=maybeCurveAuto(z,F),markers(this,R)}filter(T){return T}project(T,R,P){this.curve!==curveAuto&&super.project(T,R,P)}render(T,R,P,O,I){const{x:z,y:F}=P,{curve:G}=this;return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyTransform,this,R).call(V=>V.selectAll().data(groupIndex(T,[z,F],this,P)).enter().append("path").call(applyDirectStyles,this).call(applyGroupedChannelStyles,this,P).call(applyGroupedMarkers,this,P,I).attr("d",G===curveAuto&&I.projection?sphereLine(I.path(),z,F):shapeLine().curve(G).defined(Z=>Z>=0).x(Z=>z[Z]).y(Z=>F[Z]))).node()}}function sphereLine(_,T,R){return T=coerceNumbers(T),R=coerceNumbers(R),P=>{let O=[];const I=[O];for(const z of P)z===-1?(O=[],I.push(O)):O.push([T[z],R[z]]);return _({type:"MultiLineString",coordinates:I})}}function line(_,{x:T,y:R,...P}={}){return[T,R]=maybeTuple(T,R),new Line(_,{...P,x:T,y:R})}const defaults={ariaLabel:"tick",fill:null,stroke:"currentColor"};class AbstractTick extends Mark{constructor(T,R,P){super(T,R,P,defaults),markers(this,P)}render(T,R,P,O,I){return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(this._transform,this,R).call(z=>z.selectAll().data(T).enter().append("line").call(applyDirectStyles,this).attr("x1",this._x1(R,P,O)).attr("x2",this._x2(R,P,O)).attr("y1",this._y1(R,P,O)).attr("y2",this._y2(R,P,O)).call(applyChannelStyles,this,P).call(applyMarkers,this,P,I)).node()}}class TickX extends AbstractTick{constructor(T,R={}){const{x:P,y:O,inset:I=0,insetTop:z=I,insetBottom:F=I}=R;super(T,{x:{value:P,scale:"x"},y:{value:O,scale:"y",type:"band",optional:!0}},R),this.insetTop=number(z),this.insetBottom=number(F)}_transform(T,R,{x:P}){T.call(applyTransform,R,{x:P},offset,0)}_x1(T,{x:R}){return P=>R[P]}_x2(T,{x:R}){return P=>R[P]}_y1({y:T},{y:R},{marginTop:P}){const{insetTop:O}=this;return R&&T?I=>R[I]+O:P+O}_y2({y:T},{y:R},{height:P,marginBottom:O}){const{insetBottom:I}=this;return R&&T?z=>R[z]+T.bandwidth()-I:P-O-I}}function tickX(_,{x:T=identity$1,...R}={}){return new TickX(_,{...R,x:T})}Mark.prototype.plot=function({marks:_=[],...T}={}){return plot({...T,marks:[..._,this]})};function BatchPlot({data:_,dataWithCI:T,histogramData:R,xAxisLabel:P="Time (h)",yAxisLabel:O,plotType:I,width:z=640,height:F=400}){const G=reactExports.useRef(null);return reactExports.useEffect(()=>{if(!G.current||I==="line"&&_.length===0||I==="line_ci"&&(!T||T.length===0)||I==="histogram"&&(!R||R.length===0))return;let V,Z={legend:!0},Y={label:P},Q={label:O};I==="histogram"&&R?(V=[barY(R,{x:"group",y:"mean",fill:"group"}),link(R.flatMap(ee=>[{group:ee.group,y:ee.lower,y2:ee.upper}]),pointer({x:"group",y1:"y",y2:"y2",stroke:"#666",strokeWidth:2})),...R.flatMap(ee=>[tickX([ee],{x:"group",y:ee.lower,stroke:"#666"}),tickX([ee],{x:"group",y:ee.upper,stroke:"#666"})])],Y={label:"Cell Group"},Q={label:O,grid:!0},Z={color:{legend:!0,label:"Cell Group"}}):I==="line_ci"&&T?(V=[areaY(T,{x:"time",y1:"lower",y2:"upper",fill:"cell_group",fillOpacity:.2}),line(T,{x:"time",y:"mean",stroke:"cell_group",strokeWidth:2}),dot(T,{x:"time",y:"mean",fill:"cell_group",r:3})],Z={color:{legend:!0,label:"Cell Group"}}):_.some(ne=>ne.cell_group!==void 0)?(V=[line(_,{x:"time",y:"value",stroke:"cell_group",strokeWidth:2}),dot(_,{x:"time",y:"value",fill:"cell_group",r:3})],Z={color:{legend:!0,label:"Cell Group"}}):V=[line(_,{x:"time",y:"value",stroke:"steelblue",strokeWidth:2}),dot(_,{x:"time",y:"value",fill:"steelblue",r:3})];const J=plot({width:z,height:F,marginLeft:60,marginBottom:40,marginRight:120,grid:!0,x:Y,y:Q,...Z,marks:V});return G.current.appendChild(J),()=>{J.remove()}},[_,T,R,P,O,I,z,F]),jsxRuntimeExports.jsx("div",{ref:G})}function aggregateByTime(_,T,R){const P=_.indexOf("time_h"),O=_.indexOf(R);if(P===-1||O===-1)return[];const I=new Map;for(const F of T){const G=Number(F[P]),V=Number(F[O]);!isNaN(G)&&!isNaN(V)&&(I.has(G)||I.set(G,[]),I.get(G).push(V))}const z=[];for(const[F,G]of I.entries()){const V=G.reduce((Z,Y)=>Z+Y,0)/G.length;z.push({time:F,value:V})}return z.sort((F,G)=>F.time-G.time),z}function aggregateByXAxisWithCI(_,T,R,P){const O=_.indexOf(R),I=_.indexOf(P),z=_.indexOf("cell_group");if(O===-1||I===-1)return[];const F=new Map;for(const V of T){const Z=Number(V[O]),Y=Number(V[I]),Q=z!==-1?String(V[z]):"all";if(!isNaN(Z)&&!isNaN(Y)){const J=`${Z}_${Q}`;F.has(J)||F.set(J,{time:Z,cell_group:Q,values:[]}),F.get(J).values.push(Y)}}const G=[];for(const{time:V,cell_group:Z,values:Y}of F.values()){const Q=Y.length,J=Y.reduce((ee,ne)=>ee+ne,0)/Q;if(Q>1){const ee=Y.reduce((ae,ce)=>ae+Math.pow(ce-J,2),0)/(Q-1),oe=1.96*(Math.sqrt(ee)/Math.sqrt(Q));G.push({time:V,mean:J,lower:J-oe,upper:J+oe,n:Q,cell_group:Z})}else G.push({time:V,mean:J,lower:J,upper:J,n:Q,cell_group:Z})}return G.sort((V,Z)=>V.time!==Z.time?V.time-Z.time:V.cell_group.localeCompare(Z.cell_group)),G}function aggregateForHistogram(_,T,R){const P=_.indexOf(R),O=_.indexOf("cell_group");if(P===-1)return[];const I=new Map;for(const F of T){const G=Number(F[P]),V=O!==-1?String(F[O]):"all";isNaN(G)||(I.has(V)||I.set(V,[]),I.get(V).push(G))}const z=[];for(const[F,G]of I.entries()){const V=G.length,Z=G.reduce((Y,Q)=>Y+Q,0)/V;if(V>1){const Y=G.reduce((ne,se)=>ne+Math.pow(se-Z,2),0)/(V-1),ee=1.96*(Math.sqrt(Y)/Math.sqrt(V));z.push({group:F,mean:Z,lower:Z-ee,upper:Z+ee,n:V})}else z.push({group:F,mean:Z,lower:Z,upper:Z,n:V})}return z.sort((F,G)=>F.group.localeCompare(G.group)),z}function getTimeSamples(_){const T=[];for(let R=_.start;R<=_.end;R+=_.step)T.push(R);return T}function generateParameterConfigs(_,T,R){return _.length===0?[{}]:T==="grid"?generateGridConfigs(_):generateRandomConfigs(_,R??10)}function generateGridConfigs(_){const T=_.map(O=>{const I=[],z=O.steps>1?(O.max-O.min)/(O.steps-1):0;for(let F=0;F<O.steps;F++)I.push(O.min+F*z);return{path:O.path,values:I}}),R=[];function P(O,I){if(O===T.length){R.push({...I});return}const{path:z,values:F}=T[O];for(const G of F)I[z]=G,P(O+1,I)}return P(0,{}),R}function generateRandomConfigs(_,T){const R=[];for(let P=0;P<T;P++){const O={};for(const I of _)O[I.path]=I.min+Math.random()*(I.max-I.min);R.push(O)}return R}const DEFAULT_TIME_SAMPLES={start:0,end:48,step:12};function customMerge(_,T){if(T===void 0)return _;if(Array.isArray(T))return T;if(!(isPlainObject(_)&&isPlainObject(T)))return T}function mergeWithDefaults(_,T=DEFAULT_EHT_PARAMS){const R=cloneDeep(T);if(_.general&&mergeWith(R.general,_.general,customMerge),_.cell_prop&&mergeWith(R.cell_prop,_.cell_prop,customMerge),_.cell_types)for(const[P,O]of Object.entries(_.cell_types))if(P in R.cell_types)mergeWith(R.cell_types[P],O,customMerge);else{const I=cloneDeep(DEFAULT_CONTROL_CELL);mergeWith(I,O,customMerge),R.cell_types[P]=I}return R}function setNestedValue(_,T,R){const P=T.split(".");let O=_;for(let I=0;I<P.length-1;I++){const z=P[I];(!(z in O)||typeof O[z]!="object"||O[z]===null)&&(O[z]={}),O=O[z]}O[P[P.length-1]]=R}function parseSimulationConfigToml(_){const T=TOML.parse(_);let R=[];T.parameter_ranges&&Array.isArray(T.parameter_ranges)&&(R=T.parameter_ranges.map(G=>{const V=G;return{path:String(V.path??""),min:Number(V.min??0),max:Number(V.max??0),steps:Number(V.steps??1)}}),delete T.parameter_ranges);let P={...DEFAULT_TIME_SAMPLES};if(T.time_samples&&typeof T.time_samples=="object"){const G=T.time_samples;P={start:Number(G.start??DEFAULT_TIME_SAMPLES.start),end:Number(G.end??DEFAULT_TIME_SAMPLES.end),step:Number(G.step??DEFAULT_TIME_SAMPLES.step)},delete T.time_samples}const O=T.seeds_per_config,I=typeof O=="number"&&!Number.isNaN(O)?O:1;return"seeds_per_config"in T&&delete T.seeds_per_config,{params:mergeWithDefaults(T),parameterRanges:R,timeSamples:P,seedsPerConfig:I}}function toSimulationConfigToml(_){const T=JSON.parse(JSON.stringify(_.params,(R,P)=>P===1/0?1e308:P===-1/0?-1e308:P));return T.parameter_ranges=_.parameterRanges??[],T.time_samples=_.timeSamples??DEFAULT_TIME_SAMPLES,T.seeds_per_config=_.seedsPerConfig??1,TOML.stringify(T)}function WorkerWrapper(_){return new Worker("/assets/simulation.worker-Br8FhXMh.js",{name:_?.name})}class WorkerPool{constructor(T=navigator.hardwareConcurrency||4){this.poolSize=T}workers=[];busyWorkers=new Set;taskQueue=[];pendingTasks=new Map;init(){for(let T=0;T<this.poolSize;T++){const R=new WorkerWrapper;R.onmessage=P=>{this.handleWorkerMessage(R,P.data)},R.onerror=P=>{console.error("Worker error:",P),this.handleWorkerError(R,P)},this.workers.push(R)}}getPoolSize(){return this.poolSize}submit(T,R,P,O,I,z){return new Promise((F,G)=>{const Z={request:{type:"run",modelName:T,baseParams:R,overrides:P,seed:O,timeSamples:I,runIndex:z},resolve:F,reject:G},Y=this.workers.find(Q=>!this.busyWorkers.has(Q));Y?this.executeTask(Y,Z):this.taskQueue.push(Z)})}executeTask(T,R){this.busyWorkers.add(T),this.pendingTasks.set(R.request.runIndex,R),T.postMessage(R.request)}handleWorkerMessage(T,R){const P=this.pendingTasks.get(R.runIndex);if(this.pendingTasks.delete(R.runIndex),this.busyWorkers.delete(T),P&&(R.type==="complete"&&R.snapshots?P.resolve(R.snapshots):R.type==="error"&&P.reject(new Error(R.error||"Unknown worker error"))),this.taskQueue.length>0){const O=this.taskQueue.shift();this.executeTask(T,O)}}handleWorkerError(T,R){if(this.busyWorkers.delete(T),console.error("Worker error:",R.message),this.taskQueue.length>0){const P=this.taskQueue.shift();this.executeTask(T,P)}}terminate(){for(const T of this.workers)T.terminate();this.workers=[],this.busyWorkers.clear(),this.taskQueue=[],this.pendingTasks.clear()}static isSupported(){return typeof Worker<"u"}}function runSingleSimulation(_,T,R,P,O,I,z){const F=cloneDeep(T);for(const[Y,Q]of Object.entries(R))setNestedValue(F,Y,Q);F.general.random_seed=P;const G=new SimulationEngine({model:_,params:F});G.init();const V=[];let Z=0;if(O.length>0&&O[0]<=0){const Y=_.getSnapshot(G.getState()),Q={run_index:I,seed:P,time_h:0,sampled_params:R,data:Y};V.push(Q),z?.onSnapshot?.(Q),Z=1}for(;!G.isComplete()&&Z<O.length;){G.step();const Y=G.getState(),Q=Y.t??0;for(;Z<O.length&&Q>=O[Z];){const J=_.getSnapshot(Y),ee={run_index:I,seed:P,time_h:O[Z],sampled_params:R,data:J};V.push(ee),z?.onSnapshot?.(ee),Z++}}return V}function yieldToUI(){return new Promise(_=>setTimeout(_,0))}async function runBatchSequential(_,T,R,P){const O=generateParameterConfigs(R.parameter_ranges,R.sampling_mode,R.random_sample_count),I=getTimeSamples(R.time_samples),z=O.length*R.seeds_per_config,F=[];let G=0;for(const Z of O)for(let Y=0;Y<R.seeds_per_config;Y++){const Q=T.general.random_seed+G;P?.onProgress?.({current_run:G,total_runs:z,current_config:Z,is_running:!0,is_complete:!1}),await yieldToUI();const J=runSingleSimulation(_,T,Z,Q,I,G,P);F.push(...J),G++}const V={config:R,snapshots:F,completed_runs:z,total_runs:z};return P?.onProgress?.({current_run:z,total_runs:z,current_config:{},is_running:!1,is_complete:!0}),P?.onComplete?.(V),V}async function runBatchParallel(_,T,R,P,O){const I=generateParameterConfigs(R.parameter_ranges,R.sampling_mode,R.random_sample_count),z=getTimeSamples(R.time_samples),F=I.length*R.seeds_per_config,G=[];let V=0;const Z=new WorkerPool(O);Z.init();try{const Q=[];let J=0;for(const se of I)for(let oe=0;oe<R.seeds_per_config;oe++){const ae=T.general.random_seed+J;Q.push({paramConfig:se,seed:ae,runIndex:J}),J++}P?.onProgress?.({current_run:0,total_runs:F,current_config:{},is_running:!0,is_complete:!1});const ee=Q.map(async se=>{const oe=await Z.submit(_.id,T,se.paramConfig,se.seed,z,se.runIndex);V++,P?.onProgress?.({current_run:V,total_runs:F,current_config:se.paramConfig,is_running:!0,is_complete:!1});for(const ae of oe)P?.onSnapshot?.(ae);return oe}),ne=await Promise.all(ee);for(const se of ne)G.push(...se);G.sort((se,oe)=>se.run_index!==oe.run_index?se.run_index-oe.run_index:se.time_h-oe.time_h)}finally{Z.terminate()}const Y={config:R,snapshots:G,completed_runs:F,total_runs:F};return P?.onProgress?.({current_run:F,total_runs:F,current_config:{},is_running:!1,is_complete:!0}),P?.onComplete?.(Y),Y}async function runBatch(_,T,R,P){const O=P?.modelName??_.metadata?.model;if(!O)throw new Error("Model name not specified. Provide options.modelName or ensure params.metadata.model is set.");const I=modelRegistry.get(O);if(!I)throw new Error(`Model "${O}" not found in registry.`);return(P?.parallel??WorkerPool.isSupported())&&WorkerPool.isSupported()?runBatchParallel(I,_,T,R,P?.workerCount):runBatchSequential(I,_,T,R)}function computeTotalRuns(_,T){return generateParameterConfigs(_,"grid").length*T}var papaparse_min$1={exports:{}};var papaparse_min=papaparse_min$1.exports,hasRequiredPapaparse_min;function requirePapaparse_min(){return hasRequiredPapaparse_min||(hasRequiredPapaparse_min=1,(function(_,T){((R,P)=>{_.exports=P()})(papaparse_min,function R(){var P=typeof self<"u"?self:typeof window<"u"?window:P!==void 0?P:{},O,I=!P.document&&!!P.postMessage,z=P.IS_PAPA_WORKER||!1,F={},G=0,V={};function Z(fe){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(de){var be=pe(de);be.chunkSize=parseInt(be.chunkSize),de.step||de.chunk||(be.chunkSize=null),this._handle=new ne(be),(this._handle.streamer=this)._config=be}).call(this,fe),this.parseChunk=function(de,be){var ye=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<ye){let ve=this._config.newline;ve||(Ce=this._config.quoteChar||'"',ve=this._handle.guessLineEndings(de,Ce)),de=[...de.split(ve).slice(ye)].join(ve)}this.isFirstChunk&&he(this._config.beforeFirstChunk)&&(Ce=this._config.beforeFirstChunk(de))!==void 0&&(de=Ce),this.isFirstChunk=!1,this._halted=!1;var ye=this._partialLine+de,Ce=(this._partialLine="",this._handle.parse(ye,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(de=Ce.meta.cursor,ye=(this._finished||(this._partialLine=ye.substring(de-this._baseIndex),this._baseIndex=de),Ce&&Ce.data&&(this._rowCount+=Ce.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),z)P.postMessage({results:Ce,workerId:V.WORKER_ID,finished:ye});else if(he(this._config.chunk)&&!be){if(this._config.chunk(Ce,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=Ce=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(Ce.data),this._completeResults.errors=this._completeResults.errors.concat(Ce.errors),this._completeResults.meta=Ce.meta),this._completed||!ye||!he(this._config.complete)||Ce&&Ce.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ye||Ce&&Ce.meta.paused||this._nextChunk(),Ce}this._halted=!0},this._sendError=function(de){he(this._config.error)?this._config.error(de):z&&this._config.error&&P.postMessage({workerId:V.WORKER_ID,error:de,finished:!1})}}function Y(fe){var de;(fe=fe||{}).chunkSize||(fe.chunkSize=V.RemoteChunkSize),Z.call(this,fe),this._nextChunk=I?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(be){this._input=be,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(de=new XMLHttpRequest,this._config.withCredentials&&(de.withCredentials=this._config.withCredentials),I||(de.onload=me(this._chunkLoaded,this),de.onerror=me(this._chunkError,this)),de.open(this._config.downloadRequestBody?"POST":"GET",this._input,!I),this._config.downloadRequestHeaders){var be,ye=this._config.downloadRequestHeaders;for(be in ye)de.setRequestHeader(be,ye[be])}var Ce;this._config.chunkSize&&(Ce=this._start+this._config.chunkSize-1,de.setRequestHeader("Range","bytes="+this._start+"-"+Ce));try{de.send(this._config.downloadRequestBody)}catch(ve){this._chunkError(ve.message)}I&&de.status===0&&this._chunkError()}},this._chunkLoaded=function(){de.readyState===4&&(de.status<200||400<=de.status?this._chunkError():(this._start+=this._config.chunkSize||de.responseText.length,this._finished=!this._config.chunkSize||this._start>=(be=>(be=be.getResponseHeader("Content-Range"))!==null?parseInt(be.substring(be.lastIndexOf("/")+1)):-1)(de),this.parseChunk(de.responseText)))},this._chunkError=function(be){be=de.statusText||be,this._sendError(new Error(be))}}function Q(fe){(fe=fe||{}).chunkSize||(fe.chunkSize=V.LocalChunkSize),Z.call(this,fe);var de,be,ye=typeof FileReader<"u";this.stream=function(Ce){this._input=Ce,be=Ce.slice||Ce.webkitSlice||Ce.mozSlice,ye?((de=new FileReader).onload=me(this._chunkLoaded,this),de.onerror=me(this._chunkError,this)):de=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var Ce=this._input,ve=(this._config.chunkSize&&(ve=Math.min(this._start+this._config.chunkSize,this._input.size),Ce=be.call(Ce,this._start,ve)),de.readAsText(Ce,this._config.encoding));ye||this._chunkLoaded({target:{result:ve}})},this._chunkLoaded=function(Ce){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(Ce.target.result)},this._chunkError=function(){this._sendError(de.error)}}function J(fe){var de;Z.call(this,fe=fe||{}),this.stream=function(be){return de=be,this._nextChunk()},this._nextChunk=function(){var be,ye;if(!this._finished)return be=this._config.chunkSize,de=be?(ye=de.substring(0,be),de.substring(be)):(ye=de,""),this._finished=!de,this.parseChunk(ye)}}function ee(fe){Z.call(this,fe=fe||{});var de=[],be=!0,ye=!1;this.pause=function(){Z.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){Z.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(Ce){this._input=Ce,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){ye&&de.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),de.length?this.parseChunk(de.shift()):be=!0},this._streamData=me(function(Ce){try{de.push(typeof Ce=="string"?Ce:Ce.toString(this._config.encoding)),be&&(be=!1,this._checkIsFinished(),this.parseChunk(de.shift()))}catch(ve){this._streamError(ve)}},this),this._streamError=me(function(Ce){this._streamCleanUp(),this._sendError(Ce)},this),this._streamEnd=me(function(){this._streamCleanUp(),ye=!0,this._streamData("")},this),this._streamCleanUp=me(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function ne(fe){var de,be,ye,Ce,ve=Math.pow(2,53),Ee=-ve,we=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ge=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Se=this,Te=0,Ae=0,Ue=!1,_e=!1,$e=[],Ne={data:[],errors:[],meta:{}};function Be(Ge){return fe.skipEmptyLines==="greedy"?Ge.join("").trim()==="":Ge.length===1&&Ge[0].length===0}function Ze(){if(Ne&&ye&&(Oe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+V.DefaultDelimiter+"'"),ye=!1),fe.skipEmptyLines&&(Ne.data=Ne.data.filter(function(ze){return!Be(ze)})),We()){let ze=function(Me,Ke){he(fe.transformHeader)&&(Me=fe.transformHeader(Me,Ke)),$e.push(Me)};if(Ne)if(Array.isArray(Ne.data[0])){for(var Ge=0;We()&&Ge<Ne.data.length;Ge++)Ne.data[Ge].forEach(ze);Ne.data.splice(0,1)}else Ne.data.forEach(ze)}function je(ze,Me){for(var Ke=fe.header?{}:[],Ye=0;Ye<ze.length;Ye++){var Qe=Ye,Je=ze[Ye],Je=((lt,et)=>(ot=>(fe.dynamicTypingFunction&&fe.dynamicTyping[ot]===void 0&&(fe.dynamicTyping[ot]=fe.dynamicTypingFunction(ot)),(fe.dynamicTyping[ot]||fe.dynamicTyping)===!0))(lt)?et==="true"||et==="TRUE"||et!=="false"&&et!=="FALSE"&&((ot=>{if(we.test(ot)&&(ot=parseFloat(ot),Ee<ot&&ot<ve))return 1})(et)?parseFloat(et):ge.test(et)?new Date(et):et===""?null:et):et)(Qe=fe.header?Ye>=$e.length?"__parsed_extra":$e[Ye]:Qe,Je=fe.transform?fe.transform(Je,Qe):Je);Qe==="__parsed_extra"?(Ke[Qe]=Ke[Qe]||[],Ke[Qe].push(Je)):Ke[Qe]=Je}return fe.header&&(Ye>$e.length?Oe("FieldMismatch","TooManyFields","Too many fields: expected "+$e.length+" fields but parsed "+Ye,Ae+Me):Ye<$e.length&&Oe("FieldMismatch","TooFewFields","Too few fields: expected "+$e.length+" fields but parsed "+Ye,Ae+Me)),Ke}var Fe;Ne&&(fe.header||fe.dynamicTyping||fe.transform)&&(Fe=1,!Ne.data.length||Array.isArray(Ne.data[0])?(Ne.data=Ne.data.map(je),Fe=Ne.data.length):Ne.data=je(Ne.data,0),fe.header&&Ne.meta&&(Ne.meta.fields=$e),Ae+=Fe)}function We(){return fe.header&&$e.length===0}function Oe(Ge,je,Fe,ze){Ge={type:Ge,code:je,message:Fe},ze!==void 0&&(Ge.row=ze),Ne.errors.push(Ge)}he(fe.step)&&(Ce=fe.step,fe.step=function(Ge){Ne=Ge,We()?Ze():(Ze(),Ne.data.length!==0&&(Te+=Ge.data.length,fe.preview&&Te>fe.preview?be.abort():(Ne.data=Ne.data[0],Ce(Ne,Se))))}),this.parse=function(Ge,je,Fe){var ze=fe.quoteChar||'"',ze=(fe.newline||(fe.newline=this.guessLineEndings(Ge,ze)),ye=!1,fe.delimiter?he(fe.delimiter)&&(fe.delimiter=fe.delimiter(Ge),Ne.meta.delimiter=fe.delimiter):((ze=((Me,Ke,Ye,Qe,Je)=>{var lt,et,ot,At;Je=Je||[",","	","|",";",V.RECORD_SEP,V.UNIT_SEP];for(var pt=0;pt<Je.length;pt++){for(var xt,qt=Je[pt],ft=0,Gt=0,Rt=0,Ot=(ot=void 0,new oe({comments:Qe,delimiter:qt,newline:Ke,preview:10}).parse(Me)),kt=0;kt<Ot.data.length;kt++)Ye&&Be(Ot.data[kt])?Rt++:(xt=Ot.data[kt].length,Gt+=xt,ot===void 0?ot=xt:0<xt&&(ft+=Math.abs(xt-ot),ot=xt));0<Ot.data.length&&(Gt/=Ot.data.length-Rt),(et===void 0||ft<=et)&&(At===void 0||At<Gt)&&1.99<Gt&&(et=ft,lt=qt,At=Gt)}return{successful:!!(fe.delimiter=lt),bestDelimiter:lt}})(Ge,fe.newline,fe.skipEmptyLines,fe.comments,fe.delimitersToGuess)).successful?fe.delimiter=ze.bestDelimiter:(ye=!0,fe.delimiter=V.DefaultDelimiter),Ne.meta.delimiter=fe.delimiter),pe(fe));return fe.preview&&fe.header&&ze.preview++,de=Ge,be=new oe(ze),Ne=be.parse(de,je,Fe),Ze(),Ue?{meta:{paused:!0}}:Ne||{meta:{paused:!1}}},this.paused=function(){return Ue},this.pause=function(){Ue=!0,be.abort(),de=he(fe.chunk)?"":de.substring(be.getCharIndex())},this.resume=function(){Se.streamer._halted?(Ue=!1,Se.streamer.parseChunk(de,!0)):setTimeout(Se.resume,3)},this.aborted=function(){return _e},this.abort=function(){_e=!0,be.abort(),Ne.meta.aborted=!0,he(fe.complete)&&fe.complete(Ne),de=""},this.guessLineEndings=function(Me,ze){Me=Me.substring(0,1048576);var ze=new RegExp(se(ze)+"([^]*?)"+se(ze),"gm"),Fe=(Me=Me.replace(ze,"")).split("\r"),ze=Me.split(`
`),Me=1<ze.length&&ze[0].length<Fe[0].length;if(Fe.length===1||Me)return`
`;for(var Ke=0,Ye=0;Ye<Fe.length;Ye++)Fe[Ye][0]===`
`&&Ke++;return Ke>=Fe.length/2?`\r
`:"\r"}}function se(fe){return fe.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function oe(fe){var de=(fe=fe||{}).delimiter,be=fe.newline,ye=fe.comments,Ce=fe.step,ve=fe.preview,Ee=fe.fastMode,we=null,ge=!1,Se=fe.quoteChar==null?'"':fe.quoteChar,Te=Se;if(fe.escapeChar!==void 0&&(Te=fe.escapeChar),(typeof de!="string"||-1<V.BAD_DELIMITERS.indexOf(de))&&(de=","),ye===de)throw new Error("Comment character same as delimiter");ye===!0?ye="#":(typeof ye!="string"||-1<V.BAD_DELIMITERS.indexOf(ye))&&(ye=!1),be!==`
`&&be!=="\r"&&be!==`\r
`&&(be=`
`);var Ae=0,Ue=!1;this.parse=function(_e,$e,Ne){if(typeof _e!="string")throw new Error("Input must be a string");var Be=_e.length,Ze=de.length,We=be.length,Oe=ye.length,Ge=he(Ce),je=[],Fe=[],ze=[],Me=Ae=0;if(!_e)return ft();if(Ee||Ee!==!1&&_e.indexOf(Se)===-1){for(var Ke=_e.split(be),Ye=0;Ye<Ke.length;Ye++){if(ze=Ke[Ye],Ae+=ze.length,Ye!==Ke.length-1)Ae+=be.length;else if(Ne)return ft();if(!ye||ze.substring(0,Oe)!==ye){if(Ge){if(je=[],At(ze.split(de)),Gt(),Ue)return ft()}else At(ze.split(de));if(ve&&ve<=Ye)return je=je.slice(0,ve),ft(!0)}}return ft()}for(var Qe=_e.indexOf(de,Ae),Je=_e.indexOf(be,Ae),lt=new RegExp(se(Te)+se(Se),"g"),et=_e.indexOf(Se,Ae);;)if(_e[Ae]===Se)for(et=Ae,Ae++;;){if((et=_e.indexOf(Se,et+1))===-1)return Ne||Fe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:je.length,index:Ae}),xt();if(et===Be-1)return xt(_e.substring(Ae,et).replace(lt,Se));if(Se===Te&&_e[et+1]===Te)et++;else if(Se===Te||et===0||_e[et-1]!==Te){Qe!==-1&&Qe<et+1&&(Qe=_e.indexOf(de,et+1));var ot=pt((Je=Je!==-1&&Je<et+1?_e.indexOf(be,et+1):Je)===-1?Qe:Math.min(Qe,Je));if(_e.substr(et+1+ot,Ze)===de){ze.push(_e.substring(Ae,et).replace(lt,Se)),_e[Ae=et+1+ot+Ze]!==Se&&(et=_e.indexOf(Se,Ae)),Qe=_e.indexOf(de,Ae),Je=_e.indexOf(be,Ae);break}if(ot=pt(Je),_e.substring(et+1+ot,et+1+ot+We)===be){if(ze.push(_e.substring(Ae,et).replace(lt,Se)),qt(et+1+ot+We),Qe=_e.indexOf(de,Ae),et=_e.indexOf(Se,Ae),Ge&&(Gt(),Ue))return ft();if(ve&&je.length>=ve)return ft(!0);break}Fe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:je.length,index:Ae}),et++}}else if(ye&&ze.length===0&&_e.substring(Ae,Ae+Oe)===ye){if(Je===-1)return ft();Ae=Je+We,Je=_e.indexOf(be,Ae),Qe=_e.indexOf(de,Ae)}else if(Qe!==-1&&(Qe<Je||Je===-1))ze.push(_e.substring(Ae,Qe)),Ae=Qe+Ze,Qe=_e.indexOf(de,Ae);else{if(Je===-1)break;if(ze.push(_e.substring(Ae,Je)),qt(Je+We),Ge&&(Gt(),Ue))return ft();if(ve&&je.length>=ve)return ft(!0)}return xt();function At(Rt){je.push(Rt),Me=Ae}function pt(Rt){var Ot=0;return Ot=Rt!==-1&&(Rt=_e.substring(et+1,Rt))&&Rt.trim()===""?Rt.length:Ot}function xt(Rt){return Ne||(Rt===void 0&&(Rt=_e.substring(Ae)),ze.push(Rt),Ae=Be,At(ze),Ge&&Gt()),ft()}function qt(Rt){Ae=Rt,At(ze),ze=[],Je=_e.indexOf(be,Ae)}function ft(Rt){if(fe.header&&!$e&&je.length&&!ge){var Ot=je[0],kt=Object.create(null),cr=new Set(Ot);let Sn=!1;for(let In=0;In<Ot.length;In++){let sn=Ot[In];if(kt[sn=he(fe.transformHeader)?fe.transformHeader(sn,In):sn]){let tn,$t=kt[sn];for(;tn=sn+"_"+$t,$t++,cr.has(tn););cr.add(tn),Ot[In]=tn,kt[sn]++,Sn=!0,(we=we===null?{}:we)[tn]=sn}else kt[sn]=1,Ot[In]=sn;cr.add(sn)}Sn&&console.warn("Duplicate headers found and renamed."),ge=!0}return{data:je,errors:Fe,meta:{delimiter:de,linebreak:be,aborted:Ue,truncated:!!Rt,cursor:Me+($e||0),renamedHeaders:we}}}function Gt(){Ce(ft()),je=[],Fe=[]}},this.abort=function(){Ue=!0},this.getCharIndex=function(){return Ae}}function ae(fe){var de=fe.data,be=F[de.workerId],ye=!1;if(de.error)be.userError(de.error,de.file);else if(de.results&&de.results.data){var Ce={abort:function(){ye=!0,ce(de.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:le,resume:le};if(he(be.userStep)){for(var ve=0;ve<de.results.data.length&&(be.userStep({data:de.results.data[ve],errors:de.results.errors,meta:de.results.meta},Ce),!ye);ve++);delete de.results}else he(be.userChunk)&&(be.userChunk(de.results,Ce,de.file),delete de.results)}de.finished&&!ye&&ce(de.workerId,de.results)}function ce(fe,de){var be=F[fe];he(be.userComplete)&&be.userComplete(de),be.terminate(),delete F[fe]}function le(){throw new Error("Not implemented.")}function pe(fe){if(typeof fe!="object"||fe===null)return fe;var de,be=Array.isArray(fe)?[]:{};for(de in fe)be[de]=pe(fe[de]);return be}function me(fe,de){return function(){fe.apply(de,arguments)}}function he(fe){return typeof fe=="function"}return V.parse=function(fe,de){var be=(de=de||{}).dynamicTyping||!1;if(he(be)&&(de.dynamicTypingFunction=be,be={}),de.dynamicTyping=be,de.transform=!!he(de.transform)&&de.transform,!de.worker||!V.WORKERS_SUPPORTED)return be=null,V.NODE_STREAM_INPUT,typeof fe=="string"?(fe=(ye=>ye.charCodeAt(0)!==65279?ye:ye.slice(1))(fe),be=new(de.download?Y:J)(de)):fe.readable===!0&&he(fe.read)&&he(fe.on)?be=new ee(de):(P.File&&fe instanceof File||fe instanceof Object)&&(be=new Q(de)),be.stream(fe);(be=(()=>{var ye;return!!V.WORKERS_SUPPORTED&&(ye=(()=>{var Ce=P.URL||P.webkitURL||null,ve=R.toString();return V.BLOB_URL||(V.BLOB_URL=Ce.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ve,")();"],{type:"text/javascript"})))})(),(ye=new P.Worker(ye)).onmessage=ae,ye.id=G++,F[ye.id]=ye)})()).userStep=de.step,be.userChunk=de.chunk,be.userComplete=de.complete,be.userError=de.error,de.step=he(de.step),de.chunk=he(de.chunk),de.complete=he(de.complete),de.error=he(de.error),delete de.worker,be.postMessage({input:fe,config:de,workerId:be.id})},V.unparse=function(fe,de){var be=!1,ye=!0,Ce=",",ve=`\r
`,Ee='"',we=Ee+Ee,ge=!1,Se=null,Te=!1,Ae=((()=>{if(typeof de=="object"){if(typeof de.delimiter!="string"||V.BAD_DELIMITERS.filter(function($e){return de.delimiter.indexOf($e)!==-1}).length||(Ce=de.delimiter),typeof de.quotes!="boolean"&&typeof de.quotes!="function"&&!Array.isArray(de.quotes)||(be=de.quotes),typeof de.skipEmptyLines!="boolean"&&typeof de.skipEmptyLines!="string"||(ge=de.skipEmptyLines),typeof de.newline=="string"&&(ve=de.newline),typeof de.quoteChar=="string"&&(Ee=de.quoteChar),typeof de.header=="boolean"&&(ye=de.header),Array.isArray(de.columns)){if(de.columns.length===0)throw new Error("Option columns is empty");Se=de.columns}de.escapeChar!==void 0&&(we=de.escapeChar+Ee),de.escapeFormulae instanceof RegExp?Te=de.escapeFormulae:typeof de.escapeFormulae=="boolean"&&de.escapeFormulae&&(Te=/^[=+\-@\t\r].*$/)}})(),new RegExp(se(Ee),"g"));if(typeof fe=="string"&&(fe=JSON.parse(fe)),Array.isArray(fe)){if(!fe.length||Array.isArray(fe[0]))return Ue(null,fe,ge);if(typeof fe[0]=="object")return Ue(Se||Object.keys(fe[0]),fe,ge)}else if(typeof fe=="object")return typeof fe.data=="string"&&(fe.data=JSON.parse(fe.data)),Array.isArray(fe.data)&&(fe.fields||(fe.fields=fe.meta&&fe.meta.fields||Se),fe.fields||(fe.fields=Array.isArray(fe.data[0])?fe.fields:typeof fe.data[0]=="object"?Object.keys(fe.data[0]):[]),Array.isArray(fe.data[0])||typeof fe.data[0]=="object"||(fe.data=[fe.data])),Ue(fe.fields||[],fe.data||[],ge);throw new Error("Unable to serialize unrecognized input");function Ue($e,Ne,Be){var Ze="",We=(typeof $e=="string"&&($e=JSON.parse($e)),typeof Ne=="string"&&(Ne=JSON.parse(Ne)),Array.isArray($e)&&0<$e.length),Oe=!Array.isArray(Ne[0]);if(We&&ye){for(var Ge=0;Ge<$e.length;Ge++)0<Ge&&(Ze+=Ce),Ze+=_e($e[Ge],Ge);0<Ne.length&&(Ze+=ve)}for(var je=0;je<Ne.length;je++){var Fe=(We?$e:Ne[je]).length,ze=!1,Me=We?Object.keys(Ne[je]).length===0:Ne[je].length===0;if(Be&&!We&&(ze=Be==="greedy"?Ne[je].join("").trim()==="":Ne[je].length===1&&Ne[je][0].length===0),Be==="greedy"&&We){for(var Ke=[],Ye=0;Ye<Fe;Ye++){var Qe=Oe?$e[Ye]:Ye;Ke.push(Ne[je][Qe])}ze=Ke.join("").trim()===""}if(!ze){for(var Je=0;Je<Fe;Je++){0<Je&&!Me&&(Ze+=Ce);var lt=We&&Oe?$e[Je]:Je;Ze+=_e(Ne[je][lt],Je)}je<Ne.length-1&&(!Be||0<Fe&&!Me)&&(Ze+=ve)}}return Ze}function _e($e,Ne){var Be,Ze;return $e==null?"":$e.constructor===Date?JSON.stringify($e).slice(1,25):(Ze=!1,Te&&typeof $e=="string"&&Te.test($e)&&($e="'"+$e,Ze=!0),Be=$e.toString().replace(Ae,we),(Ze=Ze||be===!0||typeof be=="function"&&be($e,Ne)||Array.isArray(be)&&be[Ne]||((We,Oe)=>{for(var Ge=0;Ge<Oe.length;Ge++)if(-1<We.indexOf(Oe[Ge]))return!0;return!1})(Be,V.BAD_DELIMITERS)||-1<Be.indexOf(Ce)||Be.charAt(0)===" "||Be.charAt(Be.length-1)===" ")?Ee+Be+Ee:Be)}},V.RECORD_SEP="",V.UNIT_SEP="",V.BYTE_ORDER_MARK="\uFEFF",V.BAD_DELIMITERS=["\r",`
`,'"',V.BYTE_ORDER_MARK],V.WORKERS_SUPPORTED=!I&&!!P.Worker,V.NODE_STREAM_INPUT=1,V.LocalChunkSize=10485760,V.RemoteChunkSize=5242880,V.DefaultDelimiter=",",V.Parser=oe,V.ParserHandle=ne,V.NetworkStreamer=Y,V.FileStreamer=Q,V.StringStreamer=J,V.ReadableStreamStreamer=ee,P.jQuery&&((O=P.jQuery).fn.parse=function(fe){var de=fe.config||{},be=[];return this.each(function(ve){if(!(O(this).prop("tagName").toUpperCase()==="INPUT"&&O(this).attr("type").toLowerCase()==="file"&&P.FileReader)||!this.files||this.files.length===0)return!0;for(var Ee=0;Ee<this.files.length;Ee++)be.push({file:this.files[Ee],inputElem:this,instanceConfig:O.extend({},de)})}),ye(),this;function ye(){if(be.length===0)he(fe.complete)&&fe.complete();else{var ve,Ee,we,ge,Se=be[0];if(he(fe.before)){var Te=fe.before(Se.file,Se.inputElem);if(typeof Te=="object"){if(Te.action==="abort")return ve="AbortError",Ee=Se.file,we=Se.inputElem,ge=Te.reason,void(he(fe.error)&&fe.error({name:ve},Ee,we,ge));if(Te.action==="skip")return void Ce();typeof Te.config=="object"&&(Se.instanceConfig=O.extend(Se.instanceConfig,Te.config))}else if(Te==="skip")return void Ce()}var Ae=Se.instanceConfig.complete;Se.instanceConfig.complete=function(Ue){he(Ae)&&Ae(Ue,Se.file,Se.inputElem),Ce()},V.parse(Se.file,Se.instanceConfig)}}function Ce(){be.splice(0,1),ye()}}),z&&(P.onmessage=function(fe){fe=fe.data,V.WORKER_ID===void 0&&fe&&(V.WORKER_ID=fe.workerId),typeof fe.input=="string"?P.postMessage({workerId:V.WORKER_ID,results:V.parse(fe.input,fe.config),finished:!0}):(P.File&&fe.input instanceof File||fe.input instanceof Object)&&(fe=V.parse(fe.input,fe.config))&&P.postMessage({workerId:V.WORKER_ID,results:fe,finished:!0})}),(Y.prototype=Object.create(Z.prototype)).constructor=Y,(Q.prototype=Object.create(Z.prototype)).constructor=Q,(J.prototype=Object.create(J.prototype)).constructor=J,(ee.prototype=Object.create(Z.prototype)).constructor=ee,V})})(papaparse_min$1)),papaparse_min$1.exports}var papaparse_minExports=requirePapaparse_min();const Papa=getDefaultExportFromCjs(papaparse_minExports),PATH_SEPARATOR="__";function pathToColumn(_){return"param"+PATH_SEPARATOR+_.replace(/\./g,PATH_SEPARATOR)}function columnToPath(_){return _.startsWith("param"+PATH_SEPARATOR)?_.slice(("param"+PATH_SEPARATOR).length).replace(new RegExp(PATH_SEPARATOR,"g"),"."):_}function batchSnapshotsToCSV(_){if(_.length===0)return"";const T=new Set;for(const F of _)for(const G of Object.keys(F.sampled_params))T.add(G);const R=Array.from(T).sort(),P=new Set;for(const F of _)F.data.length>0&&Object.keys(F.data[0]).forEach(G=>P.add(G));const O=Array.from(P).sort((F,G)=>F==="id"?-1:G==="id"?1:F.localeCompare(G)),I=[];for(const F of _)for(const G of F.data){const V={run_index:F.run_index,seed:F.seed,time_h:F.time_h,...G};for(const Z of R)V[pathToColumn(Z)]=F.sampled_params[Z]??"";I.push(V)}const z=["run_index","seed","time_h",...R.map(pathToColumn),...O];return Papa.unparse(I,{columns:z,delimiter:"	"})}function csvToBatchSnapshots(_){const T=Papa.parse(_,{header:!0,dynamicTyping:!1,skipEmptyLines:!0,delimiter:"	"});T.errors.length>0&&console.warn("CSV parse warnings:",T.errors);const R=new Map,P=T.meta.fields?.filter(F=>F.startsWith("param"+PATH_SEPARATOR))??[],O=new Set(["run_index","seed","time_h"]),I=T.meta.fields?.filter(F=>!O.has(F)&&!F.startsWith("param"+PATH_SEPARATOR))??[];for(const F of T.data){const G=parseInt(F.run_index,10),V=parseInt(F.seed,10),Z=parseFloat(F.time_h),Y=`${G}-${V}-${Z}`;if(!R.has(Y)){const ee={};for(const ne of P){const se=F[ne];se!==""&&se!==void 0&&(ee[columnToPath(ne)]=parseFloat(se))}R.set(Y,{run_index:G,seed:V,time_h:Z,sampled_params:ee,data:[]})}const Q=R.get(Y),J={};for(const ee of I){const ne=F[ee],se=Number(ne);!isNaN(se)&&ne.trim()!==""?J[ee]=se:ne==="true"?J[ee]=!0:ne==="false"?J[ee]=!1:J[ee]=ne}Q.data.push(J)}const z=Array.from(R.values());return z.sort((F,G)=>F.run_index!==G.run_index?F.run_index-G.run_index:F.time_h-G.time_h),z}function createBatchDataFromSnapshots(_){const T=new Set;for(const z of _)for(const F of Object.keys(z.sampled_params))T.add(F);const R=new Set;for(const z of _)R.add(z.time_h);const P=Array.from(R).sort((z,F)=>z-F),O=new Set;for(const z of _)O.add(`${z.run_index}-${z.seed}`);return{config:{parameter_ranges:Array.from(T).map(z=>({path:z,min:0,max:0,steps:0})),time_samples:{start:P[0]??0,end:P[P.length-1]??48,step:P.length>1?P[1]-P[0]:12},seeds_per_config:1,sampling_mode:"grid"},snapshots:_,completed_runs:O.size,total_runs:O.size}}function statisticsToCSV(_,T){const R=T.map(P=>{const O={};return _.forEach((I,z)=>{O[I]=P[z]}),O});return Papa.unparse(R,{columns:_,delimiter:"	"})}function downloadCSV(_,T){const R=new Blob([_],{type:"text/csv;charset=utf-8;"}),P=URL.createObjectURL(R),O=document.createElement("a");O.href=P,O.download=T,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(P)}function readFileAsText(_){return new Promise((T,R)=>{const P=new FileReader;P.onload=()=>T(P.result),P.onerror=()=>R(P.error),P.readAsText(_)})}function BatchTab({config:_,onConfigChange:T}){const{currentModel:R}=useModel(),[P,O]=reactExports.useState(null),[I,z]=reactExports.useState(null),[F,G]=reactExports.useState(!1),[V,Z]=reactExports.useState(null),Y=reactExports.useRef(!1),J=(R?.generateStatistics?R.generateStatistics(_.params):R?.statistics||[]).map(Me=>Me.id),[ee,ne]=reactExports.useState("time_series"),[se,oe]=reactExports.useState([]),[ae,ce]=reactExports.useState([]),[le,pe]=reactExports.useState("time_h"),[me,he]=reactExports.useState(""),[fe,de]=reactExports.useState("line_ci"),[be,ye]=reactExports.useState(WorkerPool.isSupported()),Ce=typeof navigator<"u"&&navigator.hardwareConcurrency||4,ve=reactExports.useRef(null),Ee=computeTotalRuns(_.parameterRanges,_.seedsPerConfig),we=getTimeSamples(_.timeSamples),ge=Ee*we.length,Se=reactExports.useCallback(async()=>{G(!0),Z(Date.now()),Y.current=!1;try{const Me=await runBatch(_.params,{parameter_ranges:_.parameterRanges,time_samples:_.timeSamples,seeds_per_config:_.seedsPerConfig,sampling_mode:"grid"},{onProgress:Ke=>{Y.current||z(Ke)}},{parallel:be,workerCount:Ce});Y.current||(O(Me),oe([]),ce([]))}catch(Me){console.error("Batch run failed:",Me),alert("Batch run failed. Check console for details.")}finally{G(!1),z(null),Z(null)}},[_,be,Ce]),Te=reactExports.useCallback(()=>{Y.current=!0},[]),Ae=async Me=>{const Ke=Me.target.files?.[0];if(Ke){try{const Ye=await readFileAsText(Ke),Qe=csvToBatchSnapshots(Ye),Je=createBatchDataFromSnapshots(Qe);O(Je),oe([]),ce([])}catch(Ye){console.error("Failed to load batch CSV:",Ye),alert("Failed to load batch CSV. Check console for details.")}ve.current&&(ve.current.value="")}},Ue=()=>{if(!P)return;const Me=batchSnapshotsToCSV(P.snapshots);downloadCSV(Me,"batch_snapshots.csv")},_e=()=>{if(!P||J.length===0||!R)return;const Me=new Set;for(const pt of P.snapshots)for(const xt of Object.keys(pt.sampled_params))Me.add(xt);const Ke=Array.from(Me).sort();let Ye;if(ee==="terminal"){const pt=new Map;for(const xt of P.snapshots){const qt=`${xt.run_index}-${xt.seed}`,ft=pt.get(qt);(!ft||xt.time_h>ft.time_h)&&pt.set(qt,xt)}Ye=Array.from(pt.values())}else Ye=P.snapshots;const Qe=new Set,Je=new Set;for(const pt of J){const xt=pt.lastIndexOf("_");if(xt>0){const qt=pt.substring(0,xt),ft=pt.substring(xt+1);Je.add(qt),Qe.add(ft)}}const lt=Array.from(Qe).sort(),et=Array.from(Je).sort(),ot=[...Ke,"run_index","seed","time_h","cell_group",...et],At=[];for(const pt of Ye){const xt=JSON.parse(JSON.stringify(_.params));for(const[Gt,Rt]of Object.entries(pt.sampled_params))setNestedValue(xt,Gt,Rt);const qt=R.loadSnapshot(pt.data,xt),ft=R.computeStats(qt,xt);for(const Gt of lt){const Rt=[...Ke.map(Ot=>pt.sampled_params[Ot]??""),pt.run_index,pt.seed,pt.time_h,Gt,...et.map(Ot=>{const kt=`${Ot}_${Gt}`;return ft[kt]??0})];At.push(Rt)}}oe(ot),ce(At),!me&&et.length>0&&he(et[0])},$e=()=>{if(se.length===0||ae.length===0)return;const Me=statisticsToCSV(se,ae);downloadCSV(Me,"batch_statistics.csv")},Ne=()=>{if(!P||!R)return;const Me=new Set;for(const et of P.snapshots)for(const ot of Object.keys(et.sampled_params))Me.add(ot);const Ke=Array.from(Me).sort();let Ye;if(ee==="terminal"){const et=new Map;for(const ot of P.snapshots){const At=`${ot.run_index}-${ot.seed}`,pt=et.get(At);(!pt||ot.time_h>pt.time_h)&&et.set(At,ot)}Ye=Array.from(et.values())}else Ye=P.snapshots;const Qe=[...Ke,"run_index","seed","time_h","cell_id","cell_type","X_x","X_y","A_x","A_y","B_x","B_y","a_x","a_y","b_x","b_y","ab_distance","AX","BX","ax","bx","x","below_basal","above_apical","below_neighbours"],Je=[];for(const et of Ye){const ot=JSON.parse(JSON.stringify(_.params));for(const[At,pt]of Object.entries(et.sampled_params))setNestedValue(ot,At,pt);for(let At=0;At<et.data.length;At++){const pt=et.data[At],xt=[...Ke.map(qt=>et.sampled_params[qt]??""),et.run_index,et.seed,et.time_h,At,pt.typeIndex||"",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];Je.push(xt)}}const lt=statisticsToCSV(Qe,Je);downloadCSV(lt,"batch_full_cell_data.csv")},Be=I?I.current_run/I.total_runs*100:0,We=(()=>{if(!I||!V||I.current_run===0)return null;const Ke=(Date.now()-V)/I.current_run,Ye=I.total_runs-I.current_run,Qe=Ke*Ye;if(Qe<1e3)return"< 1s";if(Qe<6e4)return`${Math.ceil(Qe/1e3)}s`;if(Qe<36e5){const et=Math.floor(Qe/6e4),ot=Math.ceil(Qe%6e4/1e3);return`${et}m ${ot}s`}const Je=Math.floor(Qe/36e5),lt=Math.ceil(Qe%36e5/6e4);return`${Je}h ${lt}m`})(),Oe=se.filter(Me=>!["run_index","seed","time_h","cell_group"].includes(Me)&&!Me.includes(".")),Ge=se.filter(Me=>Me==="time_h"||Me.includes(".")&&!["run_index","seed","cell_group"].includes(Me));let je=[],Fe=[],ze=[];return fe==="histogram"&&me?ze=aggregateForHistogram(se,ae,me):fe==="line_ci"&&le&&me?Fe=aggregateByXAxisWithCI(se,ae,le,me):le&&me&&(je=aggregateByTime(se,ae,me)),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-3",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-base",children:"Run New Batch"})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Uses the shared parameters, ranges, seeds, and time samples configured in the Parameters panel."}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Parameter ranges"}),_.parameterRanges.length===0?jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"No ranges defined."}):jsxRuntimeExports.jsx("ul",{className:"space-y-1 text-sm",children:_.parameterRanges.map(Me=>jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-mono text-xs",children:Me.path}),jsxRuntimeExports.jsxs("span",{className:"text-muted-foreground",children:[Me.min,"  ",Me.max," (",Me.steps," steps)"]})]},Me.path))})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-sm",children:[jsxRuntimeExports.jsxs("p",{children:["Time samples: ",_.timeSamples.start,"h  ",_.timeSamples.end,"h (step ",_.timeSamples.step,"h)"]}),jsxRuntimeExports.jsxs("p",{children:["Seeds per configuration: ",_.seedsPerConfig]}),jsxRuntimeExports.jsxs("p",{className:"text-muted-foreground",children:["Total: ",Ee," run",Ee!==1?"s":"","  ",we.length," time point",we.length!==1?"s":""," = ",ge," snapshot",ge!==1?"s":""]})]}),WorkerPool.isSupported()&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:be,onChange:Me=>ye(Me.target.checked),disabled:F,className:"rounded"}),"Parallel execution"]}),be&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",Ce," workers)"]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:F?jsxRuntimeExports.jsxs(Button,{onClick:Te,variant:"destructive",size:"sm",children:[jsxRuntimeExports.jsx(Square,{className:"h-4 w-4 mr-1"}),"Stop"]}):jsxRuntimeExports.jsxs(Button,{onClick:Se,size:"sm",disabled:_.parameterRanges.length===0&&_.seedsPerConfig<=1,children:[jsxRuntimeExports.jsx(Play,{className:"h-4 w-4 mr-1"}),"Run Batch"]})}),F&&I&&jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Progress,{value:Be,className:"h-2"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:[I.current_run," / ",I.total_runs," runs",We&&`  ~${We} remaining`]})]})]})]}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"pt-4 space-y-3",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx("input",{ref:ve,type:"file",accept:".csv",onChange:Ae,className:"hidden"}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>ve.current?.click(),disabled:F,children:[jsxRuntimeExports.jsx(Upload,{className:"h-4 w-4 mr-1"}),"Load Batch CSV"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:Ue,disabled:!P||F,children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-1"}),"Save Batch CSV"]}),P&&jsxRuntimeExports.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:[P.snapshots.length," snapshots loaded"]})]})})}),P&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-3",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-base",children:"Compute Statistics"})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"All available statistics will be computed for all cell groups."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-center",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm",children:"Output:"}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-1 text-sm cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"outputMode",checked:ee==="time_series",onChange:()=>ne("time_series"),disabled:F}),"Time Series"]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-1 text-sm cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"outputMode",checked:ee==="terminal",onChange:()=>ne("terminal"),disabled:F}),"Terminal Only"]})]}),jsxRuntimeExports.jsx(Button,{onClick:_e,size:"sm",disabled:!R||F,children:"Compute"})]})]}),ae.length>0&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{className:"pb-3 flex-row items-center justify-between",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-base",children:"Results"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:$e,children:[jsxRuntimeExports.jsx(FileSpreadsheet,{className:"h-4 w-4 mr-1"}),"Export CSV"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:Ne,children:[jsxRuntimeExports.jsx(FileSpreadsheet,{className:"h-4 w-4 mr-1"}),"Export Full CSV"]})]})]}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ResultsTable,{columns:se,rows:ae}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[ae.length," row",ae.length!==1?"s":""]})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium",children:"Visualization"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"plot-type",className:"text-sm",children:"Plot Type"}),jsxRuntimeExports.jsxs("select",{id:"plot-type",value:fe,onChange:Me=>de(Me.target.value),className:"w-full h-9 px-3 rounded-md border border-input bg-background text-sm",children:[jsxRuntimeExports.jsx("option",{value:"line_ci",children:"Line + CI"}),jsxRuntimeExports.jsx("option",{value:"histogram",children:"Histogram"})]})]}),fe!=="histogram"&&jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"plot-x-axis",className:"text-sm",children:"X-Axis"}),jsxRuntimeExports.jsxs("select",{id:"plot-x-axis",value:le,onChange:Me=>pe(Me.target.value),className:"w-full h-9 px-3 rounded-md border border-input bg-background text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select x-axis..."}),Ge.map(Me=>jsxRuntimeExports.jsx("option",{value:Me,children:Me},Me))]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"plot-y-axis",className:"text-sm",children:"Y-Axis (Statistic)"}),jsxRuntimeExports.jsxs("select",{id:"plot-y-axis",value:me,onChange:Me=>he(Me.target.value),className:"w-full h-9 px-3 rounded-md border border-input bg-background text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select statistic..."}),Oe.map(Me=>jsxRuntimeExports.jsx("option",{value:Me,children:Me},Me))]})]})]}),fe==="histogram"&&me&&ze.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-4 border rounded-md p-4 bg-muted/30",children:jsxRuntimeExports.jsx(BatchPlot,{data:je,dataWithCI:Fe,histogramData:ze,xAxisLabel:"Cell Group",yAxisLabel:me,plotType:fe,width:640,height:400})}),fe==="line_ci"&&le&&me&&Fe.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-4 border rounded-md p-4 bg-muted/30",children:jsxRuntimeExports.jsx(BatchPlot,{data:je,dataWithCI:Fe,histogramData:ze,xAxisLabel:le==="time_h"?"Time (h)":le,yAxisLabel:me,plotType:fe,width:640,height:400})})]})]})]})]})}var COLLAPSIBLE_NAME="Collapsible",[createCollapsibleContext,createCollapsibleScope]=createContextScope$1(COLLAPSIBLE_NAME),[CollapsibleProvider,useCollapsibleContext]=createCollapsibleContext(COLLAPSIBLE_NAME),Collapsible=reactExports.forwardRef((_,T)=>{const{__scopeCollapsible:R,open:P,defaultOpen:O,disabled:I,onOpenChange:z,...F}=_,[G,V]=useControllableState({prop:P,defaultProp:O??!1,onChange:z,caller:COLLAPSIBLE_NAME});return jsxRuntimeExports.jsx(CollapsibleProvider,{scope:R,disabled:I,contentId:useId(),open:G,onOpenToggle:reactExports.useCallback(()=>V(Z=>!Z),[V]),children:jsxRuntimeExports.jsx(Primitive$2.div,{"data-state":getState$1(G),"data-disabled":I?"":void 0,...F,ref:T})})});Collapsible.displayName=COLLAPSIBLE_NAME;var TRIGGER_NAME$2="CollapsibleTrigger",CollapsibleTrigger=reactExports.forwardRef((_,T)=>{const{__scopeCollapsible:R,...P}=_,O=useCollapsibleContext(TRIGGER_NAME$2,R);return jsxRuntimeExports.jsx(Primitive$2.button,{type:"button","aria-controls":O.contentId,"aria-expanded":O.open||!1,"data-state":getState$1(O.open),"data-disabled":O.disabled?"":void 0,disabled:O.disabled,...P,ref:T,onClick:composeEventHandlers(_.onClick,O.onOpenToggle)})});CollapsibleTrigger.displayName=TRIGGER_NAME$2;var CONTENT_NAME$2="CollapsibleContent",CollapsibleContent=reactExports.forwardRef((_,T)=>{const{forceMount:R,...P}=_,O=useCollapsibleContext(CONTENT_NAME$2,_.__scopeCollapsible);return jsxRuntimeExports.jsx(Presence,{present:R||O.open,children:({present:I})=>jsxRuntimeExports.jsx(CollapsibleContentImpl,{...P,ref:T,present:I})})});CollapsibleContent.displayName=CONTENT_NAME$2;var CollapsibleContentImpl=reactExports.forwardRef((_,T)=>{const{__scopeCollapsible:R,present:P,children:O,...I}=_,z=useCollapsibleContext(CONTENT_NAME$2,R),[F,G]=reactExports.useState(P),V=reactExports.useRef(null),Z=useComposedRefs(T,V),Y=reactExports.useRef(0),Q=Y.current,J=reactExports.useRef(0),ee=J.current,ne=z.open||F,se=reactExports.useRef(ne),oe=reactExports.useRef(void 0);return reactExports.useEffect(()=>{const ae=requestAnimationFrame(()=>se.current=!1);return()=>cancelAnimationFrame(ae)},[]),useLayoutEffect2(()=>{const ae=V.current;if(ae){oe.current=oe.current||{transitionDuration:ae.style.transitionDuration,animationName:ae.style.animationName},ae.style.transitionDuration="0s",ae.style.animationName="none";const ce=ae.getBoundingClientRect();Y.current=ce.height,J.current=ce.width,se.current||(ae.style.transitionDuration=oe.current.transitionDuration,ae.style.animationName=oe.current.animationName),G(P)}},[z.open,P]),jsxRuntimeExports.jsx(Primitive$2.div,{"data-state":getState$1(z.open),"data-disabled":z.disabled?"":void 0,id:z.contentId,hidden:!ne,...I,ref:Z,style:{"--radix-collapsible-content-height":Q?`${Q}px`:void 0,"--radix-collapsible-content-width":ee?`${ee}px`:void 0,..._.style},children:ne&&O})});function getState$1(_){return _?"open":"closed"}var Root$1=Collapsible,Trigger$1=CollapsibleTrigger,Content$1=CollapsibleContent,ACCORDION_NAME="Accordion",ACCORDION_KEYS=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(ACCORDION_NAME),[createAccordionContext]=createContextScope$1(ACCORDION_NAME,[createCollectionScope$1,createCollapsibleScope]),useCollapsibleScope=createCollapsibleScope(),Accordion=React.forwardRef((_,T)=>{const{type:R,...P}=_,O=P,I=P;return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:_.__scopeAccordion,children:R==="multiple"?jsxRuntimeExports.jsx(AccordionImplMultiple,{...I,ref:T}):jsxRuntimeExports.jsx(AccordionImplSingle,{...O,ref:T})})});Accordion.displayName=ACCORDION_NAME;var[AccordionValueProvider,useAccordionValueContext]=createAccordionContext(ACCORDION_NAME),[AccordionCollapsibleProvider,useAccordionCollapsibleContext]=createAccordionContext(ACCORDION_NAME,{collapsible:!1}),AccordionImplSingle=React.forwardRef((_,T)=>{const{value:R,defaultValue:P,onValueChange:O=()=>{},collapsible:I=!1,...z}=_,[F,G]=useControllableState({prop:R,defaultProp:P??"",onChange:O,caller:ACCORDION_NAME});return jsxRuntimeExports.jsx(AccordionValueProvider,{scope:_.__scopeAccordion,value:React.useMemo(()=>F?[F]:[],[F]),onItemOpen:G,onItemClose:React.useCallback(()=>I&&G(""),[I,G]),children:jsxRuntimeExports.jsx(AccordionCollapsibleProvider,{scope:_.__scopeAccordion,collapsible:I,children:jsxRuntimeExports.jsx(AccordionImpl,{...z,ref:T})})})}),AccordionImplMultiple=React.forwardRef((_,T)=>{const{value:R,defaultValue:P,onValueChange:O=()=>{},...I}=_,[z,F]=useControllableState({prop:R,defaultProp:P??[],onChange:O,caller:ACCORDION_NAME}),G=React.useCallback(Z=>F((Y=[])=>[...Y,Z]),[F]),V=React.useCallback(Z=>F((Y=[])=>Y.filter(Q=>Q!==Z)),[F]);return jsxRuntimeExports.jsx(AccordionValueProvider,{scope:_.__scopeAccordion,value:z,onItemOpen:G,onItemClose:V,children:jsxRuntimeExports.jsx(AccordionCollapsibleProvider,{scope:_.__scopeAccordion,collapsible:!0,children:jsxRuntimeExports.jsx(AccordionImpl,{...I,ref:T})})})}),[AccordionImplProvider,useAccordionContext]=createAccordionContext(ACCORDION_NAME),AccordionImpl=React.forwardRef((_,T)=>{const{__scopeAccordion:R,disabled:P,dir:O,orientation:I="vertical",...z}=_,F=React.useRef(null),G=useComposedRefs(F,T),V=useCollection$1(R),Y=useDirection(O)==="ltr",Q=composeEventHandlers(_.onKeyDown,J=>{if(!ACCORDION_KEYS.includes(J.key))return;const ee=J.target,ne=V().filter(fe=>!fe.ref.current?.disabled),se=ne.findIndex(fe=>fe.ref.current===ee),oe=ne.length;if(se===-1)return;J.preventDefault();let ae=se;const ce=0,le=oe-1,pe=()=>{ae=se+1,ae>le&&(ae=ce)},me=()=>{ae=se-1,ae<ce&&(ae=le)};switch(J.key){case"Home":ae=ce;break;case"End":ae=le;break;case"ArrowRight":I==="horizontal"&&(Y?pe():me());break;case"ArrowDown":I==="vertical"&&pe();break;case"ArrowLeft":I==="horizontal"&&(Y?me():pe());break;case"ArrowUp":I==="vertical"&&me();break}const he=ae%oe;ne[he].ref.current?.focus()});return jsxRuntimeExports.jsx(AccordionImplProvider,{scope:R,disabled:P,direction:O,orientation:I,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:R,children:jsxRuntimeExports.jsx(Primitive$2.div,{...z,"data-orientation":I,ref:G,onKeyDown:P?void 0:Q})})})}),ITEM_NAME$1="AccordionItem",[AccordionItemProvider,useAccordionItemContext]=createAccordionContext(ITEM_NAME$1),AccordionItem$1=React.forwardRef((_,T)=>{const{__scopeAccordion:R,value:P,...O}=_,I=useAccordionContext(ITEM_NAME$1,R),z=useAccordionValueContext(ITEM_NAME$1,R),F=useCollapsibleScope(R),G=useId(),V=P&&z.value.includes(P)||!1,Z=I.disabled||_.disabled;return jsxRuntimeExports.jsx(AccordionItemProvider,{scope:R,open:V,disabled:Z,triggerId:G,children:jsxRuntimeExports.jsx(Root$1,{"data-orientation":I.orientation,"data-state":getState(V),...F,...O,ref:T,disabled:Z,open:V,onOpenChange:Y=>{Y?z.onItemOpen(P):z.onItemClose(P)}})})});AccordionItem$1.displayName=ITEM_NAME$1;var HEADER_NAME="AccordionHeader",AccordionHeader=React.forwardRef((_,T)=>{const{__scopeAccordion:R,...P}=_,O=useAccordionContext(ACCORDION_NAME,R),I=useAccordionItemContext(HEADER_NAME,R);return jsxRuntimeExports.jsx(Primitive$2.h3,{"data-orientation":O.orientation,"data-state":getState(I.open),"data-disabled":I.disabled?"":void 0,...P,ref:T})});AccordionHeader.displayName=HEADER_NAME;var TRIGGER_NAME$1="AccordionTrigger",AccordionTrigger$1=React.forwardRef((_,T)=>{const{__scopeAccordion:R,...P}=_,O=useAccordionContext(ACCORDION_NAME,R),I=useAccordionItemContext(TRIGGER_NAME$1,R),z=useAccordionCollapsibleContext(TRIGGER_NAME$1,R),F=useCollapsibleScope(R);return jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:R,children:jsxRuntimeExports.jsx(Trigger$1,{"aria-disabled":I.open&&!z.collapsible||void 0,"data-orientation":O.orientation,id:I.triggerId,...F,...P,ref:T})})});AccordionTrigger$1.displayName=TRIGGER_NAME$1;var CONTENT_NAME$1="AccordionContent",AccordionContent$1=React.forwardRef((_,T)=>{const{__scopeAccordion:R,...P}=_,O=useAccordionContext(ACCORDION_NAME,R),I=useAccordionItemContext(CONTENT_NAME$1,R),z=useCollapsibleScope(R);return jsxRuntimeExports.jsx(Content$1,{role:"region","aria-labelledby":I.triggerId,"data-orientation":O.orientation,...z,...P,ref:T,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",..._.style}})});AccordionContent$1.displayName=CONTENT_NAME$1;function getState(_){return _?"open":"closed"}var Item$1=AccordionItem$1,Header=AccordionHeader,Trigger2=AccordionTrigger$1,Content2=AccordionContent$1;const AccordionItem=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(Item$1,{ref:R,className:cn("border-b",_),...T}));AccordionItem.displayName="AccordionItem";const AccordionTrigger=reactExports.forwardRef(({className:_,children:T,...R},P)=>jsxRuntimeExports.jsx(Header,{className:"flex",children:jsxRuntimeExports.jsxs(Trigger2,{ref:P,className:cn("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",_),...R,children:[T,jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));AccordionTrigger.displayName=Trigger2.displayName;const AccordionContent=reactExports.forwardRef(({className:_,children:T,...R},P)=>jsxRuntimeExports.jsx(Content2,{ref:P,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...R,children:jsxRuntimeExports.jsx("div",{className:cn("pb-4 pt-0",_),children:T})}));AccordionContent.displayName=Content2.displayName;var ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME="RovingFocusGroup",[Collection,useCollection,createCollectionScope]=createCollection(GROUP_NAME),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope$1(GROUP_NAME,[createCollectionScope]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME),RovingFocusGroup=reactExports.forwardRef((_,T)=>jsxRuntimeExports.jsx(Collection.Provider,{scope:_.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:_.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{..._,ref:T})})}));RovingFocusGroup.displayName=GROUP_NAME;var RovingFocusGroupImpl=reactExports.forwardRef((_,T)=>{const{__scopeRovingFocusGroup:R,orientation:P,loop:O=!1,dir:I,currentTabStopId:z,defaultCurrentTabStopId:F,onCurrentTabStopIdChange:G,onEntryFocus:V,preventScrollOnEntryFocus:Z=!1,...Y}=_,Q=reactExports.useRef(null),J=useComposedRefs(T,Q),ee=useDirection(I),[ne,se]=useControllableState({prop:z,defaultProp:F??null,onChange:G,caller:GROUP_NAME}),[oe,ae]=reactExports.useState(!1),ce=useCallbackRef$1(V),le=useCollection(R),pe=reactExports.useRef(!1),[me,he]=reactExports.useState(0);return reactExports.useEffect(()=>{const fe=Q.current;if(fe)return fe.addEventListener(ENTRY_FOCUS,ce),()=>fe.removeEventListener(ENTRY_FOCUS,ce)},[ce]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:R,orientation:P,dir:ee,loop:O,currentTabStopId:ne,onItemFocus:reactExports.useCallback(fe=>se(fe),[se]),onItemShiftTab:reactExports.useCallback(()=>ae(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>he(fe=>fe+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>he(fe=>fe-1),[]),children:jsxRuntimeExports.jsx(Primitive$2.div,{tabIndex:oe||me===0?-1:0,"data-orientation":P,...Y,ref:J,style:{outline:"none",..._.style},onMouseDown:composeEventHandlers(_.onMouseDown,()=>{pe.current=!0}),onFocus:composeEventHandlers(_.onFocus,fe=>{const de=!pe.current;if(fe.target===fe.currentTarget&&de&&!oe){const be=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(fe.currentTarget.dispatchEvent(be),!be.defaultPrevented){const ye=le().filter(ge=>ge.focusable),Ce=ye.find(ge=>ge.active),ve=ye.find(ge=>ge.id===ne),we=[Ce,ve,...ye].filter(Boolean).map(ge=>ge.ref.current);focusFirst(we,Z)}}pe.current=!1}),onBlur:composeEventHandlers(_.onBlur,()=>ae(!1))})})}),ITEM_NAME="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((_,T)=>{const{__scopeRovingFocusGroup:R,focusable:P=!0,active:O=!1,tabStopId:I,children:z,...F}=_,G=useId(),V=I||G,Z=useRovingFocusContext(ITEM_NAME,R),Y=Z.currentTabStopId===V,Q=useCollection(R),{onFocusableItemAdd:J,onFocusableItemRemove:ee,currentTabStopId:ne}=Z;return reactExports.useEffect(()=>{if(P)return J(),()=>ee()},[P,J,ee]),jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:R,id:V,focusable:P,active:O,children:jsxRuntimeExports.jsx(Primitive$2.span,{tabIndex:Y?0:-1,"data-orientation":Z.orientation,...F,ref:T,onMouseDown:composeEventHandlers(_.onMouseDown,se=>{P?Z.onItemFocus(V):se.preventDefault()}),onFocus:composeEventHandlers(_.onFocus,()=>Z.onItemFocus(V)),onKeyDown:composeEventHandlers(_.onKeyDown,se=>{if(se.key==="Tab"&&se.shiftKey){Z.onItemShiftTab();return}if(se.target!==se.currentTarget)return;const oe=getFocusIntent(se,Z.orientation,Z.dir);if(oe!==void 0){if(se.metaKey||se.ctrlKey||se.altKey||se.shiftKey)return;se.preventDefault();let ce=Q().filter(le=>le.focusable).map(le=>le.ref.current);if(oe==="last")ce.reverse();else if(oe==="prev"||oe==="next"){oe==="prev"&&ce.reverse();const le=ce.indexOf(se.currentTarget);ce=Z.loop?wrapArray(ce,le+1):ce.slice(le+1)}setTimeout(()=>focusFirst(ce))}}),children:typeof z=="function"?z({isCurrentTabStop:Y,hasTabStop:ne!=null}):z})})});RovingFocusGroupItem.displayName=ITEM_NAME;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(_,T){return T!=="rtl"?_:_==="ArrowLeft"?"ArrowRight":_==="ArrowRight"?"ArrowLeft":_}function getFocusIntent(_,T,R){const P=getDirectionAwareKey(_.key,R);if(!(T==="vertical"&&["ArrowLeft","ArrowRight"].includes(P))&&!(T==="horizontal"&&["ArrowUp","ArrowDown"].includes(P)))return MAP_KEY_TO_FOCUS_INTENT[P]}function focusFirst(_,T=!1){const R=document.activeElement;for(const P of _)if(P===R||(P.focus({preventScroll:T}),document.activeElement!==R))return}function wrapArray(_,T){return _.map((R,P)=>_[(T+P)%_.length])}var Root=RovingFocusGroup,Item=RovingFocusGroupItem,TABS_NAME="Tabs",[createTabsContext]=createContextScope$1(TABS_NAME,[createRovingFocusGroupScope]),useRovingFocusGroupScope=createRovingFocusGroupScope(),[TabsProvider,useTabsContext]=createTabsContext(TABS_NAME),Tabs$1=reactExports.forwardRef((_,T)=>{const{__scopeTabs:R,value:P,onValueChange:O,defaultValue:I,orientation:z="horizontal",dir:F,activationMode:G="automatic",...V}=_,Z=useDirection(F),[Y,Q]=useControllableState({prop:P,onChange:O,defaultProp:I??"",caller:TABS_NAME});return jsxRuntimeExports.jsx(TabsProvider,{scope:R,baseId:useId(),value:Y,onValueChange:Q,orientation:z,dir:Z,activationMode:G,children:jsxRuntimeExports.jsx(Primitive$2.div,{dir:Z,"data-orientation":z,...V,ref:T})})});Tabs$1.displayName=TABS_NAME;var TAB_LIST_NAME="TabsList",TabsList$1=reactExports.forwardRef((_,T)=>{const{__scopeTabs:R,loop:P=!0,...O}=_,I=useTabsContext(TAB_LIST_NAME,R),z=useRovingFocusGroupScope(R);return jsxRuntimeExports.jsx(Root,{asChild:!0,...z,orientation:I.orientation,dir:I.dir,loop:P,children:jsxRuntimeExports.jsx(Primitive$2.div,{role:"tablist","aria-orientation":I.orientation,...O,ref:T})})});TabsList$1.displayName=TAB_LIST_NAME;var TRIGGER_NAME="TabsTrigger",TabsTrigger$1=reactExports.forwardRef((_,T)=>{const{__scopeTabs:R,value:P,disabled:O=!1,...I}=_,z=useTabsContext(TRIGGER_NAME,R),F=useRovingFocusGroupScope(R),G=makeTriggerId(z.baseId,P),V=makeContentId(z.baseId,P),Z=P===z.value;return jsxRuntimeExports.jsx(Item,{asChild:!0,...F,focusable:!O,active:Z,children:jsxRuntimeExports.jsx(Primitive$2.button,{type:"button",role:"tab","aria-selected":Z,"aria-controls":V,"data-state":Z?"active":"inactive","data-disabled":O?"":void 0,disabled:O,id:G,...I,ref:T,onMouseDown:composeEventHandlers(_.onMouseDown,Y=>{!O&&Y.button===0&&Y.ctrlKey===!1?z.onValueChange(P):Y.preventDefault()}),onKeyDown:composeEventHandlers(_.onKeyDown,Y=>{[" ","Enter"].includes(Y.key)&&z.onValueChange(P)}),onFocus:composeEventHandlers(_.onFocus,()=>{const Y=z.activationMode!=="manual";!Z&&!O&&Y&&z.onValueChange(P)})})})});TabsTrigger$1.displayName=TRIGGER_NAME;var CONTENT_NAME="TabsContent",TabsContent$1=reactExports.forwardRef((_,T)=>{const{__scopeTabs:R,value:P,forceMount:O,children:I,...z}=_,F=useTabsContext(CONTENT_NAME,R),G=makeTriggerId(F.baseId,P),V=makeContentId(F.baseId,P),Z=P===F.value,Y=reactExports.useRef(Z);return reactExports.useEffect(()=>{const Q=requestAnimationFrame(()=>Y.current=!1);return()=>cancelAnimationFrame(Q)},[]),jsxRuntimeExports.jsx(Presence,{present:O||Z,children:({present:Q})=>jsxRuntimeExports.jsx(Primitive$2.div,{"data-state":Z?"active":"inactive","data-orientation":F.orientation,role:"tabpanel","aria-labelledby":G,hidden:!Q,id:V,tabIndex:0,...z,ref:T,style:{..._.style,animationDuration:Y.current?"0s":void 0},children:Q&&I})})});TabsContent$1.displayName=CONTENT_NAME;function makeTriggerId(_,T){return`${_}-trigger-${T}`}function makeContentId(_,T){return`${_}-content-${T}`}var Root2=Tabs$1,List=TabsList$1,Trigger=TabsTrigger$1,Content=TabsContent$1;const Tabs=Root2,TabsList=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(List,{ref:R,className:cn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",_),...T}));TabsList.displayName=List.displayName;const TabsTrigger=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(Trigger,{ref:R,className:cn("m-1 inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all hover:bg-blue-500 hover:text-white disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-green-500 data-[state=active]:text-white data-[state=active]:shadow-sm",_),...T}));TabsTrigger.displayName=Trigger.displayName;const TabsContent=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(Content,{ref:R,className:cn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",_),...T}));TabsContent.displayName=Content.displayName;function ModelParameterPanel({params:_,onChange:T,disabled:R}){const{currentModel:P}=useModel(),O=P.ui?.WarningBanner,I=P.ui?.ParametersTab,z=P.ui?.CellTypesTab,F=P.ui?.SimulationTab,G=!!z,V=!!F;return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col",children:[O&&jsxRuntimeExports.jsx("div",{className:"shrink-0 p-2",children:jsxRuntimeExports.jsx(O,{params:_,onChange:T,disabled:R})}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:"parameters",className:"flex-1 flex flex-col min-h-0",children:[jsxRuntimeExports.jsxs(TabsList,{className:"w-full justify-start shrink-0",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"parameters",children:"Parameters"}),G&&jsxRuntimeExports.jsx(TabsTrigger,{value:"celltypes",children:"Cell Types"}),V&&jsxRuntimeExports.jsx(TabsTrigger,{value:"simulation",children:"Simulation"})]}),jsxRuntimeExports.jsx(TabsContent,{value:"parameters",className:"flex-1 overflow-hidden mt-0",children:jsxRuntimeExports.jsx(ScrollArea,{className:"h-full",children:jsxRuntimeExports.jsx("div",{className:"p-4 space-y-3",children:I?jsxRuntimeExports.jsx(I,{params:_,onChange:T,disabled:R}):jsxRuntimeExports.jsx("div",{className:"text-sm text-muted-foreground",children:"No parameter UI defined for this model."})})})}),G&&jsxRuntimeExports.jsx(TabsContent,{value:"celltypes",className:"flex-1 mt-0 overflow-auto",children:jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsx(z,{params:_,onChange:T,disabled:R})})}),V&&jsxRuntimeExports.jsx(TabsContent,{value:"simulation",className:"flex-1 overflow-hidden mt-0",children:jsxRuntimeExports.jsx(ScrollArea,{className:"h-full",children:jsxRuntimeExports.jsx("div",{className:"p-4 space-y-3",children:jsxRuntimeExports.jsx(F,{params:_,onChange:T,disabled:R})})})})]})]})}function parseNumber(_,T=0){if(_==null||_==="")return T;if(typeof _=="number")return _;const R=String(_).trim().toLowerCase();if(R==="inf"||R==="infinity")return 1/0;if(R==="-inf"||R==="-infinity")return-1/0;const P=parseFloat(R);return isNaN(P)?T:P}function parseInitDistr(_){const T={};if(!_)return T;const R=_.split(",");for(const P of R){const[O,I]=P.split(":").map(z=>z.trim());if(O&&I){const z=parseInt(I,10);isNaN(z)||(T[O]=(T[O]||0)+z)}}return T}function parseINMFromEventStart(_){if(typeof _=="number")return isFinite(_)?1:0;const T=String(_).trim();if(T.toLowerCase()==="inf"||T.toLowerCase()==="infinity")return 0;if(T==="0")return 1;if(T.startsWith("(")&&T.endsWith(")")){const P=T.slice(1,-1).split(",").map(O=>O.trim());for(const O of P){const I=O.match(/^([\d.]+)%\s*Inf$/i);if(I){const z=parseFloat(I[1]);if(!isNaN(z))return 1-z/100}}}return 1}function importLegacyXLSX(_){const T=cloneDeep(DEFAULT_EHT_PARAMS),R=_.parameters;R["sim.t_end"]!==void 0&&(T.general.t_end=parseNumber(R["sim.t_end"],48)),R["sim.dt"]!==void 0&&(T.general.dt=parseNumber(R["sim.dt"],.1)),R["stat.random_seed"]!==void 0&&(T.general.random_seed=Math.floor(parseNumber(R["stat.random_seed"],0))),R["epi.prob_out_div"]!==void 0&&(T.general.p_div_out=parseNumber(R["epi.prob_out_div"],1)),R["epi.mu"]!==void 0&&(T.general.mu=parseNumber(R["epi.mu"],.2)),R["alg.n_substeps"]!==void 0&&(T.general.n_substeps=Math.floor(parseNumber(R["alg.n_substeps"],30))),R["alg.dt"]!==void 0&&(T.general.alg_dt=parseNumber(R["alg.dt"],.01)),R["epi.init_zone.size.x"]!==void 0&&(T.general.w_init=parseNumber(R["epi.init_zone.size.x"],80)),R["epi.init_zone.size.y"]!==void 0&&(T.general.h_init=parseNumber(R["epi.init_zone.size.y"],5)),parseNumber(R["epi.basal_curvature"],0)===0?(T.general.perimeter=T.general.w_init*2,T.general.aspect_ratio=0,T.general.full_circle=!1):(T.general.perimeter=T.general.w_init*2,T.general.aspect_ratio=1,T.general.full_circle=!0),T.general.w_screen=T.general.w_init*1.5,T.general.h_screen=0;const O=R["epi.init_apical_junction_dist"]!==void 0?parseNumber(R["epi.init_apical_junction_dist"],0):void 0,I=R["epi.init_basal_junction_dist"]!==void 0?parseNumber(R["epi.init_basal_junction_dist"],4):void 0,z=parseInitDistr(String(R["epi.init_distr"]||"")),F=parseNumber(R["epi.N_init"],0),G=Object.values(z).reduce((Q,J)=>Q+J,0),V=F>0&&G>0?F/G:1;T.cell_types={};const Z=_.cell_type,Y=Object.keys(Z.types);for(const Q of Y){const J=Z.types[Q],ee=Q==="exp"?"emt":Q,ne=ee==="control"?{r:0,g:128,b:0}:{r:255,g:0,b:255},se=ee==="emt"?"bottom":"",oe=Math.round((z[Q]||0)*V),ae={...cloneDeep(DEFAULT_CONTROL_CELL),N_init:oe,location:se,R_hard:parseNumber(J.R_hard,.3),R_hard_div:parseNumber(J.R_hard,.3)*.7/.3,R_soft:parseNumber(J.R_soft,1.2),color:ne,dur_G2:parseNumber(J.duration_G2,.5),dur_mitosis:parseNumber(J.duration_mitosis,.5),k_apical_junction:Math.abs(parseNumber(J.k_apical_junction,5)),k_cytos:parseNumber(J.k_cytoskeleton,5),max_cytoskeleton_length:parseNumber(J.max_cytoskeleton_length,0),run:0,running_speed:parseNumber(J.running_speed,1),running_mode:Math.floor(parseNumber(J.running_mode,0)),stiffness_apical_apical:parseNumber(J.stiffness_apical_apical,2),stiffness_apical_apical_div:parseNumber(J.stiffness_apical_apical,2)*2,stiffness_nuclei_apical:parseNumber(J.stiffness_nuclei_apical,3),stiffness_nuclei_basal:parseNumber(J.stiffness_nuclei_basal,2),stiffness_repulsion:parseNumber(J.stiffness_repulsion,2),stiffness_straightness:parseNumber(J.stiffness_straightness,5),lifespan_start:parseNumber(J["life_span.min"],5.5),lifespan_end:parseNumber(J["life_span.max"],6.5),INM:1,hetero:!1,events:{time_A_start:1/0,time_A_end:1/0,time_B_start:1/0,time_B_end:1/0,time_S_start:1/0,time_S_end:1/0,time_P_start:1/0,time_P_end:1/0},diffusion:parseNumber(J.diffusion,0)||DEFAULT_CONTROL_CELL.diffusion,basal_damping_ratio:parseNumber(J.basal_damping_ratio,0)||DEFAULT_CONTROL_CELL.basal_damping_ratio,max_basal_junction_dist:2*parseNumber(J.max_basal_junction_dist,.5)||(I?2*I:DEFAULT_CONTROL_CELL.max_basal_junction_dist),cytos_init:parseNumber(J.cytoskeleton_init,DEFAULT_CONTROL_CELL.cytos_init),basal_membrane_repulsion:parseNumber(J.basal_repulsion,DEFAULT_CONTROL_CELL.basal_membrane_repulsion),apical_junction_init:parseNumber(J.apical_junction_init,0)||O||DEFAULT_CONTROL_CELL.apical_junction_init};T.cell_types[ee]=ae}if(_.special_cell_events)for(const Q of _.special_cell_events){const J=Q.cell_type==="exp"?"emt":Q.cell_type,ee=T.cell_types[J];if(!ee)continue;const ne=parseNumber(Q.sim_time_start,1/0),se=parseNumber(Q.sim_time_end,1/0);switch(Q.name){case"loss_apical_adhesion":case"local_loss_apical_adhesion":ee.events.time_A_start=ne,ee.events.time_A_end=se;break;case"loss_basal_adhesion":ee.events.time_B_start=ne,ee.events.time_B_end=se;break}}if(_.cell_events)for(const Q of _.cell_events){const J=Q.cell_type==="exp"?"emt":Q.cell_type,ee=T.cell_types[J];ee&&(Q.name==="loss_polarity"&&Q.symbol==="stiffness_straightness"&&(ee.events.time_S_start=parseNumber(Q.sim_time_start,1/0),ee.events.time_S_end=parseNumber(Q.sim_time_end,1/0)),Q.name==="INM"&&(ee.INM=parseINMFromEventStart(Q.sim_time_start)))}for(const Q of Object.values(T.cell_types))(isFinite(Q.events.time_A_start)||isFinite(Q.events.time_B_start)||isFinite(Q.events.time_S_start))&&(Q.hetero=!0);return T}async function parseXLSXFile(_){const T=await __vitePreload(()=>import("./xlsx-CebWqg3Z.js"),[]),R=await _.arrayBuffer(),P=T.read(R,{type:"array"}),O={parameters:{},cell_type:{parameters:[],types:{}}},I=P.Sheets.parameters;if(I){const V=T.utils.sheet_to_json(I);for(const Z of V)Z.key&&(O.parameters[Z.key]=Z.value)}const z=P.Sheets.cell_type;if(z){const V=T.utils.sheet_to_json(z);if(V.length>0){const Z=V[0],Y=Object.keys(Z).filter(Q=>Q!=="parameter");for(const Q of Y)O.cell_type.types[Q]={};for(const Q of V){const J=String(Q.parameter||"");if(J){O.cell_type.parameters.push(J);for(const ee of Y)O.cell_type.types[ee][J]=Q[ee]}}}}const F=P.Sheets.cell_events;F&&(O.cell_events=T.utils.sheet_to_json(F));const G=P.Sheets.special_cell_events;return G&&(O.special_cell_events=T.utils.sheet_to_json(G)),O}async function importXLSXToParams(_){const T=await parseXLSXFile(_);return importLegacyXLSX(T)}function ParameterConfigView({config:_,onConfigChange:T,disabled:R}){const P=reactExports.useRef(null),O=reactExports.useRef(null),[I,z]=reactExports.useState(!1),F=EHT_PRESETS,G=se=>{const oe=F.find(ce=>ce.key===se);if(!oe)return;const ae=oe.create();T({..._,params:ae})},V=se=>{T({..._,params:se})},Z=se=>{T({..._,parameterRanges:se})},Y=se=>{T({..._,timeSamples:se})},Q=se=>{const oe=Math.max(1,parseInt(se,10)||1);T({..._,seedsPerConfig:oe})},J=async se=>{const oe=se.target.files?.[0];if(oe){try{const ae=await oe.text(),ce=parseSimulationConfigToml(ae);T(ce)}catch(ae){console.error("Failed to parse TOML:",ae),alert("Failed to parse TOML file. Check console for details.")}P.current&&(P.current.value="")}},ee=()=>{const se=toSimulationConfigToml(_),oe=new Blob([se],{type:"text/plain"}),ae=URL.createObjectURL(oe),ce=document.createElement("a");ce.href=ae,ce.download="simulation_config.toml",document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),URL.revokeObjectURL(ae)},ne=async se=>{const oe=se.target.files?.[0];if(oe){z(!0);try{const ae=await importXLSXToParams(oe);T({..._,params:ae})}catch(ae){console.error("Failed to import XLSX:",ae),alert("Failed to import legacy XLSX file. Check console for details.")}finally{z(!1)}O.current&&(O.current.value="")}};return jsxRuntimeExports.jsxs(Card,{className:"h-full",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-3",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-base",children:"Parameters & Ranges"})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx("input",{ref:P,type:"file",accept:".toml",onChange:J,className:"hidden"}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>P.current?.click(),disabled:R,className:"flex-1",children:[jsxRuntimeExports.jsx(Upload,{className:"h-4 w-4 mr-2"}),"Load TOML"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:ee,disabled:R,className:"flex-1",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-2"}),"Save TOML"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx("input",{ref:O,type:"file",accept:".xlsx,.xls",onChange:ne,className:"hidden"}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>O.current?.click(),disabled:R||I,className:"flex-1",children:[jsxRuntimeExports.jsx(FileSpreadsheet,{className:"h-4 w-4 mr-2"}),I?"Importing...":"Import Legacy XLSX"]})]})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Select preset"}),jsxRuntimeExports.jsxs(Select,{onValueChange:G,disabled:R,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-full",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Choose a preset"})}),jsxRuntimeExports.jsx(SelectContent,{children:F.map(se=>jsxRuntimeExports.jsx(SelectItem,{value:se.key,children:se.label},se.key))})]})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsx("div",{className:"h-[500px] border rounded-md overflow-hidden relative",children:jsxRuntimeExports.jsx(ModelParameterPanel,{params:_.params,onChange:V,disabled:R})}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsx(ParameterRangeList,{ranges:_.parameterRanges,onChange:Z,baseParams:_.params,disabled:R}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Batch Sampling"}),jsxRuntimeExports.jsx(TimeSampleConfig,{config:_.timeSamples,onChange:Y,disabled:R}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"seeds",className:"text-xs text-muted-foreground",children:"Seeds per configuration"}),jsxRuntimeExports.jsx(Input,{id:"seeds",type:"number",min:1,step:1,value:_.seedsPerConfig,onChange:se=>Q(se.target.value),disabled:R,className:"h-8 w-32"})]})]})]})]})}function AppContent(){const{currentParams:_,setParams:T}=useModel(),[R,P]=reactExports.useState({parameterRanges:[],timeSamples:{...DEFAULT_TIME_SAMPLES},seedsPerConfig:1}),O=reactExports.useMemo(()=>({params:_,...R}),[_,R]),I=reactExports.useCallback(z=>{T(z.params),P({parameterRanges:z.parameterRanges,timeSamples:z.timeSamples,seedsPerConfig:z.seedsPerConfig})},[T]);return jsxRuntimeExports.jsx(AppLayout,{children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsx(SingleSimulationTab,{})}),jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsx(ParameterConfigView,{config:O,onConfigChange:I})}),jsxRuntimeExports.jsx("section",{className:"lg:col-span-2",children:jsxRuntimeExports.jsx(BatchTab,{config:O,onConfigChange:I})})]})})}function App(){return jsxRuntimeExports.jsx(ModelProvider,{children:jsxRuntimeExports.jsx(MessagesProvider,{children:jsxRuntimeExports.jsx(AppContent,{})})})}console.log("[Main] Registering global for debug");window.EHT_REGISTRY=modelRegistry;clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{RenderGroup as $,AbstractRenderer as A,BufferUsage as B,Container as C,DOMAdapter as D,ExtensionType as E,TexturePool as F,GpuProgram as G,FilterEffect as H,Sprite as I,getAttributeInfoFromFormat as J,unsafeEvalSupported as K,GlobalResourceRegistry as L,Matrix as M,uid as N,Rectangle as O,Point as P,SystemRunner as Q,RendererType as R,Shader as S,Ticker as T,UPDATE_PRIORITY as U,multiplyColors as V,UPDATE_VISIBLE as W,UPDATE_COLOR as X,UPDATE_BLEND as Y,TextureStyle as Z,Color$1 as _,GlProgram as a,getLocalBounds as a0,VERSION as a1,deprecation as a2,v8_0_0 as a3,RendererInitHook as a4,Geometry as a5,checkMaxIfStatementsInShader as a6,compileHighShaderGlProgram as a7,colorBitGl as a8,generateTextureBatchBitGl as a9,roundPixelsBitGl as aa,getBatchSamplersUniformGroup as ab,fontStringFromTextStyle as ac,CanvasTextMetrics as ad,ImageSource as ae,getCanvasFillStyle as af,TextStyle as ag,lru as ah,Cache as ai,BatchableGraphics as aj,getAdjustedBlendModeBlend as ak,ViewableBuffer as al,Graphics as am,updateQuadBounds as an,CanvasTextGenerator as ao,GraphicsContextSystem as ap,EventEmitter as b,STENCIL_MODES as c,Buffer as d,extensions as e,fastCopy as f,getTextureBatchBindGroup as g,BindGroup as h,createIdFromString as i,CLEAR as j,CanvasSource as k,TextureSource as l,UniformGroup as m,CanvasPool as n,compileHighShaderGpuProgram as o,colorBit as p,generateTextureBatchBit as q,removeItems as r,roundPixelsBit as s,Texture as t,TextureMatrix as u,DefaultBatcher as v,warn$1 as w,BigPool as x,getGlobalBounds as y,Bounds as z};
//# sourceMappingURL=index-Bs31WLcN.js.map
