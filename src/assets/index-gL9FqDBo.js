const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-DpxGOc4a.js","assets/webworkerAll-BAz5mTGW.js","assets/colorToUniform-DarDuVge.js","assets/WebGPURenderer-DJloQg5I.js","assets/SharedSystems-D3LE6CRl.js","assets/WebGLRenderer-B1ycQgGg.js"])))=>i.map(i=>d[i]);
function _mergeNamespaces(_,T){for(var R=0;R<T.length;R++){const P=T[R];if(typeof P!="string"&&!Array.isArray(P)){for(const O in P)if(O!=="default"&&!(O in _)){const I=Object.getOwnPropertyDescriptor(P,O);I&&Object.defineProperty(_,O,I.get?I:{enumerable:!0,get:()=>P[O]})}}}return Object.freeze(Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}))}(function(){const T=document.createElement("link").relList;if(T&&T.supports&&T.supports("modulepreload"))return;for(const O of document.querySelectorAll('link[rel="modulepreload"]'))P(O);new MutationObserver(O=>{for(const I of O)if(I.type==="childList")for(const L of I.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&P(L)}).observe(document,{childList:!0,subtree:!0});function R(O){const I={};return O.integrity&&(I.integrity=O.integrity),O.referrerPolicy&&(I.referrerPolicy=O.referrerPolicy),O.crossOrigin==="use-credentials"?I.credentials="include":O.crossOrigin==="anonymous"?I.credentials="omit":I.credentials="same-origin",I}function P(O){if(O.ep)return;O.ep=!0;const I=R(O);fetch(O.href,I)}})();function getDefaultExportFromCjs(_){return _&&_.__esModule&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_}function getAugmentedNamespace(_){if(Object.prototype.hasOwnProperty.call(_,"__esModule"))return _;var T=_.default;if(typeof T=="function"){var R=function P(){var O=!1;try{O=this instanceof P}catch{}return O?Reflect.construct(T,arguments,this.constructor):T.apply(this,arguments)};R.prototype=T.prototype}else R={};return Object.defineProperty(R,"__esModule",{value:!0}),Object.keys(_).forEach(function(P){var O=Object.getOwnPropertyDescriptor(_,P);Object.defineProperty(R,P,O.get?O:{enumerable:!0,get:function(){return _[P]}})}),R}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var _=Symbol.for("react.transitional.element"),T=Symbol.for("react.fragment");function R(P,O,I){var L=null;if(I!==void 0&&(L=""+I),O.key!==void 0&&(L=""+O.key),"key"in O){I={};for(var U in O)U!=="key"&&(I[U]=O[U])}else I=O;return O=I.ref,{$$typeof:_,type:P,key:L,ref:O!==void 0?O:null,props:I}}return reactJsxRuntime_production.Fragment=T,reactJsxRuntime_production.jsx=R,reactJsxRuntime_production.jsxs=R,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var _=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),L=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),V=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),W=Symbol.iterator;function J(ve){return ve===null||typeof ve!="object"?null:(ve=W&&ve[W]||ve["@@iterator"],typeof ve=="function"?ve:null)}var ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},te=Object.assign,ie={};function oe(ve,Re,Me){this.props=ve,this.context=Re,this.refs=ie,this.updater=Me||ee}oe.prototype.isReactComponent={},oe.prototype.setState=function(ve,Re){if(typeof ve!="object"&&typeof ve!="function"&&ve!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ve,Re,"setState")},oe.prototype.forceUpdate=function(ve){this.updater.enqueueForceUpdate(this,ve,"forceUpdate")};function ae(){}ae.prototype=oe.prototype;function ce(ve,Re,Me){this.props=ve,this.context=Re,this.refs=ie,this.updater=Me||ee}var le=ce.prototype=new ae;le.constructor=ce,te(le,oe.prototype),le.isPureReactComponent=!0;var he=Array.isArray;function me(){}var fe={H:null,A:null,T:null,S:null},ue=Object.prototype.hasOwnProperty;function pe(ve,Re,Me){var ze=Me.ref;return{$$typeof:_,type:ve,key:Re,ref:ze!==void 0?ze:null,props:Me}}function ge(ve,Re){return pe(ve.type,Re,ve.props)}function _e(ve){return typeof ve=="object"&&ve!==null&&ve.$$typeof===_}function we(ve){var Re={"=":"=0",":":"=2"};return"$"+ve.replace(/[=:]/g,function(Me){return Re[Me]})}var be=/\/+/g;function Ce(ve,Re){return typeof ve=="object"&&ve!==null&&ve.key!=null?we(""+ve.key):Re.toString(36)}function Ee(ve){switch(ve.status){case"fulfilled":return ve.value;case"rejected":throw ve.reason;default:switch(typeof ve.status=="string"?ve.then(me,me):(ve.status="pending",ve.then(function(Re){ve.status==="pending"&&(ve.status="fulfilled",ve.value=Re)},function(Re){ve.status==="pending"&&(ve.status="rejected",ve.reason=Re)})),ve.status){case"fulfilled":return ve.value;case"rejected":throw ve.reason}}throw ve}function ye(ve,Re,Me,ze,qe){var We=typeof ve;(We==="undefined"||We==="boolean")&&(ve=null);var Oe=!1;if(ve===null)Oe=!0;else switch(We){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(ve.$$typeof){case _:case T:Oe=!0;break;case Z:return Oe=ve._init,ye(Oe(ve._payload),Re,Me,ze,qe)}}if(Oe)return qe=qe(ve),Oe=ze===""?"."+Ce(ve,0):ze,he(qe)?(Me="",Oe!=null&&(Me=Oe.replace(be,"$&/")+"/"),ye(qe,Re,Me,"",function(Fe){return Fe})):qe!=null&&(_e(qe)&&(qe=ge(qe,Me+(qe.key==null||ve&&ve.key===qe.key?"":(""+qe.key).replace(be,"$&/")+"/")+Oe)),Re.push(qe)),1;Oe=0;var Ve=ze===""?".":ze+":";if(he(ve))for(var ke=0;ke<ve.length;ke++)ze=ve[ke],We=Ve+Ce(ze,ke),Oe+=ye(ze,Re,Me,We,qe);else if(ke=J(ve),typeof ke=="function")for(ve=ke.call(ve),ke=0;!(ze=ve.next()).done;)ze=ze.value,We=Ve+Ce(ze,ke++),Oe+=ye(ze,Re,Me,We,qe);else if(We==="object"){if(typeof ve.then=="function")return ye(Ee(ve),Re,Me,ze,qe);throw Re=String(ve),Error("Objects are not valid as a React child (found: "+(Re==="[object Object]"?"object with keys {"+Object.keys(ve).join(", ")+"}":Re)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function Se(ve,Re,Me){if(ve==null)return ve;var ze=[],qe=0;return ye(ve,ze,"","",function(We){return Re.call(Me,We,qe++)}),ze}function Te(ve){if(ve._status===-1){var Re=ve._result;Re=Re(),Re.then(function(Me){(ve._status===0||ve._status===-1)&&(ve._status=1,ve._result=Me)},function(Me){(ve._status===0||ve._status===-1)&&(ve._status=2,ve._result=Me)}),ve._status===-1&&(ve._status=0,ve._result=Re)}if(ve._status===1)return ve._result.default;throw ve._result}var Ae=typeof reportError=="function"?reportError:function(ve){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ve=="object"&&ve!==null&&typeof ve.message=="string"?String(ve.message):String(ve),error:ve});if(!window.dispatchEvent(Re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ve);return}console.error(ve)},Be={map:Se,forEach:function(ve,Re,Me){Se(ve,function(){Re.apply(this,arguments)},Me)},count:function(ve){var Re=0;return Se(ve,function(){Re++}),Re},toArray:function(ve){return Se(ve,function(Re){return Re})||[]},only:function(ve){if(!_e(ve))throw Error("React.Children.only expected to receive a single React element child.");return ve}};return react_production.Activity=Y,react_production.Children=Be,react_production.Component=oe,react_production.Fragment=R,react_production.Profiler=O,react_production.PureComponent=ce,react_production.StrictMode=P,react_production.Suspense=G,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=fe,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(ve){return fe.H.useMemoCache(ve)}},react_production.cache=function(ve){return function(){return ve.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(ve,Re,Me){if(ve==null)throw Error("The argument must be a React element, but you passed "+ve+".");var ze=te({},ve.props),qe=ve.key;if(Re!=null)for(We in Re.key!==void 0&&(qe=""+Re.key),Re)!ue.call(Re,We)||We==="key"||We==="__self"||We==="__source"||We==="ref"&&Re.ref===void 0||(ze[We]=Re[We]);var We=arguments.length-2;if(We===1)ze.children=Me;else if(1<We){for(var Oe=Array(We),Ve=0;Ve<We;Ve++)Oe[Ve]=arguments[Ve+2];ze.children=Oe}return pe(ve.type,qe,ze)},react_production.createContext=function(ve){return ve={$$typeof:L,_currentValue:ve,_currentValue2:ve,_threadCount:0,Provider:null,Consumer:null},ve.Provider=ve,ve.Consumer={$$typeof:I,_context:ve},ve},react_production.createElement=function(ve,Re,Me){var ze,qe={},We=null;if(Re!=null)for(ze in Re.key!==void 0&&(We=""+Re.key),Re)ue.call(Re,ze)&&ze!=="key"&&ze!=="__self"&&ze!=="__source"&&(qe[ze]=Re[ze]);var Oe=arguments.length-2;if(Oe===1)qe.children=Me;else if(1<Oe){for(var Ve=Array(Oe),ke=0;ke<Oe;ke++)Ve[ke]=arguments[ke+2];qe.children=Ve}if(ve&&ve.defaultProps)for(ze in Oe=ve.defaultProps,Oe)qe[ze]===void 0&&(qe[ze]=Oe[ze]);return pe(ve,We,qe)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(ve){return{$$typeof:U,render:ve}},react_production.isValidElement=_e,react_production.lazy=function(ve){return{$$typeof:Z,_payload:{_status:-1,_result:ve},_init:Te}},react_production.memo=function(ve,Re){return{$$typeof:V,type:ve,compare:Re===void 0?null:Re}},react_production.startTransition=function(ve){var Re=fe.T,Me={};fe.T=Me;try{var ze=ve(),qe=fe.S;qe!==null&&qe(Me,ze),typeof ze=="object"&&ze!==null&&typeof ze.then=="function"&&ze.then(me,Ae)}catch(We){Ae(We)}finally{Re!==null&&Me.types!==null&&(Re.types=Me.types),fe.T=Re}},react_production.unstable_useCacheRefresh=function(){return fe.H.useCacheRefresh()},react_production.use=function(ve){return fe.H.use(ve)},react_production.useActionState=function(ve,Re,Me){return fe.H.useActionState(ve,Re,Me)},react_production.useCallback=function(ve,Re){return fe.H.useCallback(ve,Re)},react_production.useContext=function(ve){return fe.H.useContext(ve)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(ve,Re){return fe.H.useDeferredValue(ve,Re)},react_production.useEffect=function(ve,Re){return fe.H.useEffect(ve,Re)},react_production.useEffectEvent=function(ve){return fe.H.useEffectEvent(ve)},react_production.useId=function(){return fe.H.useId()},react_production.useImperativeHandle=function(ve,Re,Me){return fe.H.useImperativeHandle(ve,Re,Me)},react_production.useInsertionEffect=function(ve,Re){return fe.H.useInsertionEffect(ve,Re)},react_production.useLayoutEffect=function(ve,Re){return fe.H.useLayoutEffect(ve,Re)},react_production.useMemo=function(ve,Re){return fe.H.useMemo(ve,Re)},react_production.useOptimistic=function(ve,Re){return fe.H.useOptimistic(ve,Re)},react_production.useReducer=function(ve,Re,Me){return fe.H.useReducer(ve,Re,Me)},react_production.useRef=function(ve){return fe.H.useRef(ve)},react_production.useState=function(ve){return fe.H.useState(ve)},react_production.useSyncExternalStore=function(ve,Re,Me){return fe.H.useSyncExternalStore(ve,Re,Me)},react_production.useTransition=function(){return fe.H.useTransition()},react_production.version="19.2.3",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(_){function T(ye,Se){var Te=ye.length;ye.push(Se);e:for(;0<Te;){var Ae=Te-1>>>1,Be=ye[Ae];if(0<O(Be,Se))ye[Ae]=Se,ye[Te]=Be,Te=Ae;else break e}}function R(ye){return ye.length===0?null:ye[0]}function P(ye){if(ye.length===0)return null;var Se=ye[0],Te=ye.pop();if(Te!==Se){ye[0]=Te;e:for(var Ae=0,Be=ye.length,ve=Be>>>1;Ae<ve;){var Re=2*(Ae+1)-1,Me=ye[Re],ze=Re+1,qe=ye[ze];if(0>O(Me,Te))ze<Be&&0>O(qe,Me)?(ye[Ae]=qe,ye[ze]=Te,Ae=ze):(ye[Ae]=Me,ye[Re]=Te,Ae=Re);else if(ze<Be&&0>O(qe,Te))ye[Ae]=qe,ye[ze]=Te,Ae=ze;else break e}}return Se}function O(ye,Se){var Te=ye.sortIndex-Se.sortIndex;return Te!==0?Te:ye.id-Se.id}if(_.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var I=performance;_.unstable_now=function(){return I.now()}}else{var L=Date,U=L.now();_.unstable_now=function(){return L.now()-U}}var G=[],V=[],Z=1,Y=null,W=3,J=!1,ee=!1,te=!1,ie=!1,oe=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function le(ye){for(var Se=R(V);Se!==null;){if(Se.callback===null)P(V);else if(Se.startTime<=ye)P(V),Se.sortIndex=Se.expirationTime,T(G,Se);else break;Se=R(V)}}function he(ye){if(te=!1,le(ye),!ee)if(R(G)!==null)ee=!0,me||(me=!0,we());else{var Se=R(V);Se!==null&&Ee(he,Se.startTime-ye)}}var me=!1,fe=-1,ue=5,pe=-1;function ge(){return ie?!0:!(_.unstable_now()-pe<ue)}function _e(){if(ie=!1,me){var ye=_.unstable_now();pe=ye;var Se=!0;try{e:{ee=!1,te&&(te=!1,ae(fe),fe=-1),J=!0;var Te=W;try{t:{for(le(ye),Y=R(G);Y!==null&&!(Y.expirationTime>ye&&ge());){var Ae=Y.callback;if(typeof Ae=="function"){Y.callback=null,W=Y.priorityLevel;var Be=Ae(Y.expirationTime<=ye);if(ye=_.unstable_now(),typeof Be=="function"){Y.callback=Be,le(ye),Se=!0;break t}Y===R(G)&&P(G),le(ye)}else P(G);Y=R(G)}if(Y!==null)Se=!0;else{var ve=R(V);ve!==null&&Ee(he,ve.startTime-ye),Se=!1}}break e}finally{Y=null,W=Te,J=!1}Se=void 0}}finally{Se?we():me=!1}}}var we;if(typeof ce=="function")we=function(){ce(_e)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,Ce=be.port2;be.port1.onmessage=_e,we=function(){Ce.postMessage(null)}}else we=function(){oe(_e,0)};function Ee(ye,Se){fe=oe(function(){ye(_.unstable_now())},Se)}_.unstable_IdlePriority=5,_.unstable_ImmediatePriority=1,_.unstable_LowPriority=4,_.unstable_NormalPriority=3,_.unstable_Profiling=null,_.unstable_UserBlockingPriority=2,_.unstable_cancelCallback=function(ye){ye.callback=null},_.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<ye?Math.floor(1e3/ye):5},_.unstable_getCurrentPriorityLevel=function(){return W},_.unstable_next=function(ye){switch(W){case 1:case 2:case 3:var Se=3;break;default:Se=W}var Te=W;W=Se;try{return ye()}finally{W=Te}},_.unstable_requestPaint=function(){ie=!0},_.unstable_runWithPriority=function(ye,Se){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var Te=W;W=ye;try{return Se()}finally{W=Te}},_.unstable_scheduleCallback=function(ye,Se,Te){var Ae=_.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Ae+Te:Ae):Te=Ae,ye){case 1:var Be=-1;break;case 2:Be=250;break;case 5:Be=1073741823;break;case 4:Be=1e4;break;default:Be=5e3}return Be=Te+Be,ye={id:Z++,callback:Se,priorityLevel:ye,startTime:Te,expirationTime:Be,sortIndex:-1},Te>Ae?(ye.sortIndex=Te,T(V,ye),R(G)===null&&ye===R(V)&&(te?(ae(fe),fe=-1):te=!0,Ee(he,Te-Ae))):(ye.sortIndex=Be,T(G,ye),ee||J||(ee=!0,me||(me=!0,we()))),ye},_.unstable_shouldYield=ge,_.unstable_wrapCallback=function(ye){var Se=W;return function(){var Te=W;W=Se;try{return ye.apply(this,arguments)}finally{W=Te}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var _=requireReact();function T(G){var V="https://react.dev/errors/"+G;if(1<arguments.length){V+="?args[]="+encodeURIComponent(arguments[1]);for(var Z=2;Z<arguments.length;Z++)V+="&args[]="+encodeURIComponent(arguments[Z])}return"Minified React error #"+G+"; visit "+V+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function R(){}var P={d:{f:R,r:function(){throw Error(T(522))},D:R,C:R,L:R,m:R,X:R,S:R,M:R},p:0,findDOMNode:null},O=Symbol.for("react.portal");function I(G,V,Z){var Y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:Y==null?null:""+Y,children:G,containerInfo:V,implementation:Z}}var L=_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function U(G,V){if(G==="font")return"";if(typeof V=="string")return V==="use-credentials"?V:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,reactDom_production.createPortal=function(G,V){var Z=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!V||V.nodeType!==1&&V.nodeType!==9&&V.nodeType!==11)throw Error(T(299));return I(G,V,null,Z)},reactDom_production.flushSync=function(G){var V=L.T,Z=P.p;try{if(L.T=null,P.p=2,G)return G()}finally{L.T=V,P.p=Z,P.d.f()}},reactDom_production.preconnect=function(G,V){typeof G=="string"&&(V?(V=V.crossOrigin,V=typeof V=="string"?V==="use-credentials"?V:"":void 0):V=null,P.d.C(G,V))},reactDom_production.prefetchDNS=function(G){typeof G=="string"&&P.d.D(G)},reactDom_production.preinit=function(G,V){if(typeof G=="string"&&V&&typeof V.as=="string"){var Z=V.as,Y=U(Z,V.crossOrigin),W=typeof V.integrity=="string"?V.integrity:void 0,J=typeof V.fetchPriority=="string"?V.fetchPriority:void 0;Z==="style"?P.d.S(G,typeof V.precedence=="string"?V.precedence:void 0,{crossOrigin:Y,integrity:W,fetchPriority:J}):Z==="script"&&P.d.X(G,{crossOrigin:Y,integrity:W,fetchPriority:J,nonce:typeof V.nonce=="string"?V.nonce:void 0})}},reactDom_production.preinitModule=function(G,V){if(typeof G=="string")if(typeof V=="object"&&V!==null){if(V.as==null||V.as==="script"){var Z=U(V.as,V.crossOrigin);P.d.M(G,{crossOrigin:Z,integrity:typeof V.integrity=="string"?V.integrity:void 0,nonce:typeof V.nonce=="string"?V.nonce:void 0})}}else V==null&&P.d.M(G)},reactDom_production.preload=function(G,V){if(typeof G=="string"&&typeof V=="object"&&V!==null&&typeof V.as=="string"){var Z=V.as,Y=U(Z,V.crossOrigin);P.d.L(G,Z,{crossOrigin:Y,integrity:typeof V.integrity=="string"?V.integrity:void 0,nonce:typeof V.nonce=="string"?V.nonce:void 0,type:typeof V.type=="string"?V.type:void 0,fetchPriority:typeof V.fetchPriority=="string"?V.fetchPriority:void 0,referrerPolicy:typeof V.referrerPolicy=="string"?V.referrerPolicy:void 0,imageSrcSet:typeof V.imageSrcSet=="string"?V.imageSrcSet:void 0,imageSizes:typeof V.imageSizes=="string"?V.imageSizes:void 0,media:typeof V.media=="string"?V.media:void 0})}},reactDom_production.preloadModule=function(G,V){if(typeof G=="string")if(V){var Z=U(V.as,V.crossOrigin);P.d.m(G,{as:typeof V.as=="string"&&V.as!=="script"?V.as:void 0,crossOrigin:Z,integrity:typeof V.integrity=="string"?V.integrity:void 0})}else P.d.m(G)},reactDom_production.requestFormReset=function(G){P.d.r(G)},reactDom_production.unstable_batchedUpdates=function(G,V){return G(V)},reactDom_production.useFormState=function(G,V,Z){return L.H.useFormState(G,V,Z)},reactDom_production.useFormStatus=function(){return L.H.useHostTransitionStatus()},reactDom_production.version="19.2.3",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(T){console.error(T)}}return _(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var _=requireScheduler(),T=requireReact(),R=requireReactDom();function P(z){var F="https://react.dev/errors/"+z;if(1<arguments.length){F+="?args[]="+encodeURIComponent(arguments[1]);for(var q=2;q<arguments.length;q++)F+="&args[]="+encodeURIComponent(arguments[q])}return"Minified React error #"+z+"; visit "+F+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function O(z){return!(!z||z.nodeType!==1&&z.nodeType!==9&&z.nodeType!==11)}function I(z){var F=z,q=z;if(z.alternate)for(;F.return;)F=F.return;else{z=F;do F=z,(F.flags&4098)!==0&&(q=F.return),z=F.return;while(z)}return F.tag===3?q:null}function L(z){if(z.tag===13){var F=z.memoizedState;if(F===null&&(z=z.alternate,z!==null&&(F=z.memoizedState)),F!==null)return F.dehydrated}return null}function U(z){if(z.tag===31){var F=z.memoizedState;if(F===null&&(z=z.alternate,z!==null&&(F=z.memoizedState)),F!==null)return F.dehydrated}return null}function G(z){if(I(z)!==z)throw Error(P(188))}function V(z){var F=z.alternate;if(!F){if(F=I(z),F===null)throw Error(P(188));return F!==z?null:z}for(var q=z,Q=F;;){var ne=q.return;if(ne===null)break;var se=ne.alternate;if(se===null){if(Q=ne.return,Q!==null){q=Q;continue}break}if(ne.child===se.child){for(se=ne.child;se;){if(se===q)return G(ne),z;if(se===Q)return G(ne),F;se=se.sibling}throw Error(P(188))}if(q.return!==Q.return)q=ne,Q=se;else{for(var de=!1,xe=ne.child;xe;){if(xe===q){de=!0,q=ne,Q=se;break}if(xe===Q){de=!0,Q=ne,q=se;break}xe=xe.sibling}if(!de){for(xe=se.child;xe;){if(xe===q){de=!0,q=se,Q=ne;break}if(xe===Q){de=!0,Q=se,q=ne;break}xe=xe.sibling}if(!de)throw Error(P(189))}}if(q.alternate!==Q)throw Error(P(190))}if(q.tag!==3)throw Error(P(188));return q.stateNode.current===q?z:F}function Z(z){var F=z.tag;if(F===5||F===26||F===27||F===6)return z;for(z=z.child;z!==null;){if(F=Z(z),F!==null)return F;z=z.sibling}return null}var Y=Object.assign,W=Symbol.for("react.element"),J=Symbol.for("react.transitional.element"),ee=Symbol.for("react.portal"),te=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),ae=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),pe=Symbol.for("react.activity"),ge=Symbol.for("react.memo_cache_sentinel"),_e=Symbol.iterator;function we(z){return z===null||typeof z!="object"?null:(z=_e&&z[_e]||z["@@iterator"],typeof z=="function"?z:null)}var be=Symbol.for("react.client.reference");function Ce(z){if(z==null)return null;if(typeof z=="function")return z.$$typeof===be?null:z.displayName||z.name||null;if(typeof z=="string")return z;switch(z){case te:return"Fragment";case oe:return"Profiler";case ie:return"StrictMode";case he:return"Suspense";case me:return"SuspenseList";case pe:return"Activity"}if(typeof z=="object")switch(z.$$typeof){case ee:return"Portal";case ce:return z.displayName||"Context";case ae:return(z._context.displayName||"Context")+".Consumer";case le:var F=z.render;return z=z.displayName,z||(z=F.displayName||F.name||"",z=z!==""?"ForwardRef("+z+")":"ForwardRef"),z;case fe:return F=z.displayName||null,F!==null?F:Ce(z.type)||"Memo";case ue:F=z._payload,z=z._init;try{return Ce(z(F))}catch{}}return null}var Ee=Array.isArray,ye=T.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se=R.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Ae=[],Be=-1;function ve(z){return{current:z}}function Re(z){0>Be||(z.current=Ae[Be],Ae[Be]=null,Be--)}function Me(z,F){Be++,Ae[Be]=z.current,z.current=F}var ze=ve(null),qe=ve(null),We=ve(null),Oe=ve(null);function Ve(z,F){switch(Me(We,F),Me(qe,z),Me(ze,null),F.nodeType){case 9:case 11:z=(z=F.documentElement)&&(z=z.namespaceURI)?Od(z):0;break;default:if(z=F.tagName,F=F.namespaceURI)F=Od(F),z=Id(F,z);else switch(z){case"svg":z=1;break;case"math":z=2;break;default:z=0}}Re(ze),Me(ze,z)}function ke(){Re(ze),Re(qe),Re(We)}function Fe(z){z.memoizedState!==null&&Me(Oe,z);var F=ze.current,q=Id(F,z.type);F!==q&&(Me(qe,z),Me(ze,q))}function He(z){qe.current===z&&(Re(ze),Re(qe)),Oe.current===z&&(Re(Oe),Ts._currentValue=Te)}var Pe,Je;function Ke(z){if(Pe===void 0)try{throw Error()}catch(q){var F=q.stack.trim().match(/\n( *(at )?)/);Pe=F&&F[1]||"",Je=-1<q.stack.indexOf(`
    at`)?" (<anonymous>)":-1<q.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pe+z+Je}var Ze=!1;function Qe(z,F){if(!z||Ze)return"";Ze=!0;var q=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var Q={DetermineComponentFrameRoot:function(){try{if(F){var Xe=function(){throw Error()};if(Object.defineProperty(Xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Xe,[])}catch(Ue){var Le=Ue}Reflect.construct(z,[],Xe)}else{try{Xe.call()}catch(Ue){Le=Ue}z.call(Xe.prototype)}}else{try{throw Error()}catch(Ue){Le=Ue}(Xe=z())&&typeof Xe.catch=="function"&&Xe.catch(function(){})}}catch(Ue){if(Ue&&Le&&typeof Ue.stack=="string")return[Ue.stack,Le.stack]}return[null,null]}};Q.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var ne=Object.getOwnPropertyDescriptor(Q.DetermineComponentFrameRoot,"name");ne&&ne.configurable&&Object.defineProperty(Q.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var se=Q.DetermineComponentFrameRoot(),de=se[0],xe=se[1];if(de&&xe){var $e=de.split(`
`),De=xe.split(`
`);for(ne=Q=0;Q<$e.length&&!$e[Q].includes("DetermineComponentFrameRoot");)Q++;for(;ne<De.length&&!De[ne].includes("DetermineComponentFrameRoot");)ne++;if(Q===$e.length||ne===De.length)for(Q=$e.length-1,ne=De.length-1;1<=Q&&0<=ne&&$e[Q]!==De[ne];)ne--;for(;1<=Q&&0<=ne;Q--,ne--)if($e[Q]!==De[ne]){if(Q!==1||ne!==1)do if(Q--,ne--,0>ne||$e[Q]!==De[ne]){var Ge=`
`+$e[Q].replace(" at new "," at ");return z.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",z.displayName)),Ge}while(1<=Q&&0<=ne);break}}}finally{Ze=!1,Error.prepareStackTrace=q}return(q=z?z.displayName||z.name:"")?Ke(q):""}function at(z,F){switch(z.tag){case 26:case 27:case 5:return Ke(z.type);case 16:return Ke("Lazy");case 13:return z.child!==F&&F!==null?Ke("Suspense Fallback"):Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 15:return Qe(z.type,!1);case 11:return Qe(z.type.render,!1);case 1:return Qe(z.type,!0);case 31:return Ke("Activity");default:return""}}function et(z){try{var F="",q=null;do F+=at(z,q),q=z,z=z.return;while(z);return F}catch(Q){return`
Error generating stack: `+Q.message+`
`+Q.stack}}var ct=Object.prototype.hasOwnProperty,Dt=_.unstable_scheduleCallback,gt=_.unstable_cancelCallback,wt=_.unstable_shouldYield,Nt=_.unstable_requestPaint,st=_.unstable_now,vt=_.unstable_getCurrentPriorityLevel,yt=_.unstable_ImmediatePriority,kt=_.unstable_UserBlockingPriority,Pt=_.unstable_NormalPriority,wn=_.unstable_LowPriority,tn=_.unstable_IdlePriority,En=_.log,an=_.unstable_setDisableYieldValue,nn=null,$t=null;function qt(z){if(typeof En=="function"&&an(z),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(nn,z)}catch{}}var rn=Math.clz32?Math.clz32:bh,yh=Math.log,xh=Math.LN2;function bh(z){return z>>>=0,z===0?32:31-(yh(z)/xh|0)|0}var ks=256,Ps=262144,Os=4194304;function Ir(z){var F=z&42;if(F!==0)return F;switch(z&-z){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return z&261888;case 262144:case 524288:case 1048576:case 2097152:return z&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return z&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return z}}function Is(z,F,q){var Q=z.pendingLanes;if(Q===0)return 0;var ne=0,se=z.suspendedLanes,de=z.pingedLanes;z=z.warmLanes;var xe=Q&134217727;return xe!==0?(Q=xe&~se,Q!==0?ne=Ir(Q):(de&=xe,de!==0?ne=Ir(de):q||(q=xe&~z,q!==0&&(ne=Ir(q))))):(xe=Q&~se,xe!==0?ne=Ir(xe):de!==0?ne=Ir(de):q||(q=Q&~z,q!==0&&(ne=Ir(q)))),ne===0?0:F!==0&&F!==ne&&(F&se)===0&&(se=ne&-ne,q=F&-F,se>=q||se===32&&(q&4194048)!==0)?F:ne}function zi(z,F){return(z.pendingLanes&~(z.suspendedLanes&~z.pingedLanes)&F)===0}function vh(z,F){switch(z){case 1:case 2:case 4:case 8:case 64:return F+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return F+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hc(){var z=Os;return Os<<=1,(Os&62914560)===0&&(Os=4194304),z}function Wa(z){for(var F=[],q=0;31>q;q++)F.push(z);return F}function Bi(z,F){z.pendingLanes|=F,F!==268435456&&(z.suspendedLanes=0,z.pingedLanes=0,z.warmLanes=0)}function Sh(z,F,q,Q,ne,se){var de=z.pendingLanes;z.pendingLanes=q,z.suspendedLanes=0,z.pingedLanes=0,z.warmLanes=0,z.expiredLanes&=q,z.entangledLanes&=q,z.errorRecoveryDisabledLanes&=q,z.shellSuspendCounter=0;var xe=z.entanglements,$e=z.expirationTimes,De=z.hiddenUpdates;for(q=de&~q;0<q;){var Ge=31-rn(q),Xe=1<<Ge;xe[Ge]=0,$e[Ge]=-1;var Le=De[Ge];if(Le!==null)for(De[Ge]=null,Ge=0;Ge<Le.length;Ge++){var Ue=Le[Ge];Ue!==null&&(Ue.lane&=-536870913)}q&=~Xe}Q!==0&&pc(z,Q,0),se!==0&&ne===0&&z.tag!==0&&(z.suspendedLanes|=se&~(de&~F))}function pc(z,F,q){z.pendingLanes|=F,z.suspendedLanes&=~F;var Q=31-rn(F);z.entangledLanes|=F,z.entanglements[Q]=z.entanglements[Q]|1073741824|q&261930}function mc(z,F){var q=z.entangledLanes|=F;for(z=z.entanglements;q;){var Q=31-rn(q),ne=1<<Q;ne&F|z[Q]&F&&(z[Q]|=F),q&=~ne}}function gc(z,F){var q=F&-F;return q=(q&42)!==0?1:Ka(q),(q&(z.suspendedLanes|F))!==0?0:q}function Ka(z){switch(z){case 2:z=1;break;case 8:z=4;break;case 32:z=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:z=128;break;case 268435456:z=134217728;break;default:z=0}return z}function Qa(z){return z&=-z,2<z?8<z?(z&134217727)!==0?32:268435456:8:2}function _c(){var z=Se.p;return z!==0?z:(z=window.event,z===void 0?32:ih(z.type))}function yc(z,F){var q=Se.p;try{return Se.p=z,F()}finally{Se.p=q}}var ur=Math.random().toString(36).slice(2),Wt="__reactFiber$"+ur,on="__reactProps$"+ur,Jr="__reactContainer$"+ur,Ja="__reactEvents$"+ur,wh="__reactListeners$"+ur,Eh="__reactHandles$"+ur,xc="__reactResources$"+ur,Hi="__reactMarker$"+ur;function eo(z){delete z[Wt],delete z[on],delete z[Ja],delete z[wh],delete z[Eh]}function ei(z){var F=z[Wt];if(F)return F;for(var q=z.parentNode;q;){if(F=q[Jr]||q[Wt]){if(q=F.alternate,F.child!==null||q!==null&&q.child!==null)for(z=Ud(z);z!==null;){if(q=z[Wt])return q;z=Ud(z)}return F}z=q,q=z.parentNode}return null}function ti(z){if(z=z[Wt]||z[Jr]){var F=z.tag;if(F===5||F===6||F===13||F===31||F===26||F===27||F===3)return z}return null}function Ui(z){var F=z.tag;if(F===5||F===26||F===27||F===6)return z.stateNode;throw Error(P(33))}function ni(z){var F=z[xc];return F||(F=z[xc]={hoistableStyles:new Map,hoistableScripts:new Map}),F}function Yt(z){z[Hi]=!0}var bc=new Set,vc={};function jr(z,F){ri(z,F),ri(z+"Capture",F)}function ri(z,F){for(vc[z]=F,z=0;z<F.length;z++)bc.add(F[z])}var Ch=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Sc={},wc={};function Th(z){return ct.call(wc,z)?!0:ct.call(Sc,z)?!1:Ch.test(z)?wc[z]=!0:(Sc[z]=!0,!1)}function js(z,F,q){if(Th(F))if(q===null)z.removeAttribute(F);else{switch(typeof q){case"undefined":case"function":case"symbol":z.removeAttribute(F);return;case"boolean":var Q=F.toLowerCase().slice(0,5);if(Q!=="data-"&&Q!=="aria-"){z.removeAttribute(F);return}}z.setAttribute(F,""+q)}}function Ds(z,F,q){if(q===null)z.removeAttribute(F);else{switch(typeof q){case"undefined":case"function":case"symbol":case"boolean":z.removeAttribute(F);return}z.setAttribute(F,""+q)}}function Fn(z,F,q,Q){if(Q===null)z.removeAttribute(q);else{switch(typeof Q){case"undefined":case"function":case"symbol":case"boolean":z.removeAttribute(q);return}z.setAttributeNS(F,q,""+Q)}}function Cn(z){switch(typeof z){case"bigint":case"boolean":case"number":case"string":case"undefined":return z;case"object":return z;default:return""}}function Ec(z){var F=z.type;return(z=z.nodeName)&&z.toLowerCase()==="input"&&(F==="checkbox"||F==="radio")}function Ah(z,F,q){var Q=Object.getOwnPropertyDescriptor(z.constructor.prototype,F);if(!z.hasOwnProperty(F)&&typeof Q<"u"&&typeof Q.get=="function"&&typeof Q.set=="function"){var ne=Q.get,se=Q.set;return Object.defineProperty(z,F,{configurable:!0,get:function(){return ne.call(this)},set:function(de){q=""+de,se.call(this,de)}}),Object.defineProperty(z,F,{enumerable:Q.enumerable}),{getValue:function(){return q},setValue:function(de){q=""+de},stopTracking:function(){z._valueTracker=null,delete z[F]}}}}function to(z){if(!z._valueTracker){var F=Ec(z)?"checked":"value";z._valueTracker=Ah(z,F,""+z[F])}}function Cc(z){if(!z)return!1;var F=z._valueTracker;if(!F)return!0;var q=F.getValue(),Q="";return z&&(Q=Ec(z)?z.checked?"true":"false":z.value),z=Q,z!==q?(F.setValue(z),!0):!1}function Ls(z){if(z=z||(typeof document<"u"?document:void 0),typeof z>"u")return null;try{return z.activeElement||z.body}catch{return z.body}}var Rh=/[\n"\\]/g;function Tn(z){return z.replace(Rh,function(F){return"\\"+F.charCodeAt(0).toString(16)+" "})}function no(z,F,q,Q,ne,se,de,xe){z.name="",de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"?z.type=de:z.removeAttribute("type"),F!=null?de==="number"?(F===0&&z.value===""||z.value!=F)&&(z.value=""+Cn(F)):z.value!==""+Cn(F)&&(z.value=""+Cn(F)):de!=="submit"&&de!=="reset"||z.removeAttribute("value"),F!=null?ro(z,de,Cn(F)):q!=null?ro(z,de,Cn(q)):Q!=null&&z.removeAttribute("value"),ne==null&&se!=null&&(z.defaultChecked=!!se),ne!=null&&(z.checked=ne&&typeof ne!="function"&&typeof ne!="symbol"),xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?z.name=""+Cn(xe):z.removeAttribute("name")}function Tc(z,F,q,Q,ne,se,de,xe){if(se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"&&(z.type=se),F!=null||q!=null){if(!(se!=="submit"&&se!=="reset"||F!=null)){to(z);return}q=q!=null?""+Cn(q):"",F=F!=null?""+Cn(F):q,xe||F===z.value||(z.value=F),z.defaultValue=F}Q=Q??ne,Q=typeof Q!="function"&&typeof Q!="symbol"&&!!Q,z.checked=xe?z.checked:!!Q,z.defaultChecked=!!Q,de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"&&(z.name=de),to(z)}function ro(z,F,q){F==="number"&&Ls(z.ownerDocument)===z||z.defaultValue===""+q||(z.defaultValue=""+q)}function ii(z,F,q,Q){if(z=z.options,F){F={};for(var ne=0;ne<q.length;ne++)F["$"+q[ne]]=!0;for(q=0;q<z.length;q++)ne=F.hasOwnProperty("$"+z[q].value),z[q].selected!==ne&&(z[q].selected=ne),ne&&Q&&(z[q].defaultSelected=!0)}else{for(q=""+Cn(q),F=null,ne=0;ne<z.length;ne++){if(z[ne].value===q){z[ne].selected=!0,Q&&(z[ne].defaultSelected=!0);return}F!==null||z[ne].disabled||(F=z[ne])}F!==null&&(F.selected=!0)}}function Ac(z,F,q){if(F!=null&&(F=""+Cn(F),F!==z.value&&(z.value=F),q==null)){z.defaultValue!==F&&(z.defaultValue=F);return}z.defaultValue=q!=null?""+Cn(q):""}function Rc(z,F,q,Q){if(F==null){if(Q!=null){if(q!=null)throw Error(P(92));if(Ee(Q)){if(1<Q.length)throw Error(P(93));Q=Q[0]}q=Q}q==null&&(q=""),F=q}q=Cn(F),z.defaultValue=q,Q=z.textContent,Q===q&&Q!==""&&Q!==null&&(z.value=Q),to(z)}function si(z,F){if(F){var q=z.firstChild;if(q&&q===z.lastChild&&q.nodeType===3){q.nodeValue=F;return}}z.textContent=F}var $h=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $c(z,F,q){var Q=F.indexOf("--")===0;q==null||typeof q=="boolean"||q===""?Q?z.setProperty(F,""):F==="float"?z.cssFloat="":z[F]="":Q?z.setProperty(F,q):typeof q!="number"||q===0||$h.has(F)?F==="float"?z.cssFloat=q:z[F]=(""+q).trim():z[F]=q+"px"}function Mc(z,F,q){if(F!=null&&typeof F!="object")throw Error(P(62));if(z=z.style,q!=null){for(var Q in q)!q.hasOwnProperty(Q)||F!=null&&F.hasOwnProperty(Q)||(Q.indexOf("--")===0?z.setProperty(Q,""):Q==="float"?z.cssFloat="":z[Q]="");for(var ne in F)Q=F[ne],F.hasOwnProperty(ne)&&q[ne]!==Q&&$c(z,ne,Q)}else for(var se in F)F.hasOwnProperty(se)&&$c(z,se,F[se])}function io(z){if(z.indexOf("-")===-1)return!1;switch(z){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zs(z){return Nh.test(""+z)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":z}function Gn(){}var so=null;function ao(z){return z=z.target||z.srcElement||window,z.correspondingUseElement&&(z=z.correspondingUseElement),z.nodeType===3?z.parentNode:z}var ai=null,oi=null;function Nc(z){var F=ti(z);if(F&&(z=F.stateNode)){var q=z[on]||null;e:switch(z=F.stateNode,F.type){case"input":if(no(z,q.value,q.defaultValue,q.defaultValue,q.checked,q.defaultChecked,q.type,q.name),F=q.name,q.type==="radio"&&F!=null){for(q=z;q.parentNode;)q=q.parentNode;for(q=q.querySelectorAll('input[name="'+Tn(""+F)+'"][type="radio"]'),F=0;F<q.length;F++){var Q=q[F];if(Q!==z&&Q.form===z.form){var ne=Q[on]||null;if(!ne)throw Error(P(90));no(Q,ne.value,ne.defaultValue,ne.defaultValue,ne.checked,ne.defaultChecked,ne.type,ne.name)}}for(F=0;F<q.length;F++)Q=q[F],Q.form===z.form&&Cc(Q)}break e;case"textarea":Ac(z,q.value,q.defaultValue);break e;case"select":F=q.value,F!=null&&ii(z,!!q.multiple,F,!1)}}}var oo=!1;function kc(z,F,q){if(oo)return z(F,q);oo=!0;try{var Q=z(F);return Q}finally{if(oo=!1,(ai!==null||oi!==null)&&(Aa(),ai&&(F=ai,z=oi,oi=ai=null,Nc(F),z)))for(F=0;F<z.length;F++)Nc(z[F])}}function Fi(z,F){var q=z.stateNode;if(q===null)return null;var Q=q[on]||null;if(Q===null)return null;q=Q[F];e:switch(F){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Q=!Q.disabled)||(z=z.type,Q=!(z==="button"||z==="input"||z==="select"||z==="textarea")),z=!Q;break e;default:z=!1}if(z)return null;if(q&&typeof q!="function")throw Error(P(231,F,typeof q));return q}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lo=!1;if(Vn)try{var Gi={};Object.defineProperty(Gi,"passive",{get:function(){lo=!0}}),window.addEventListener("test",Gi,Gi),window.removeEventListener("test",Gi,Gi)}catch{lo=!1}var fr=null,co=null,Bs=null;function Pc(){if(Bs)return Bs;var z,F=co,q=F.length,Q,ne="value"in fr?fr.value:fr.textContent,se=ne.length;for(z=0;z<q&&F[z]===ne[z];z++);var de=q-z;for(Q=1;Q<=de&&F[q-Q]===ne[se-Q];Q++);return Bs=ne.slice(z,1<Q?1-Q:void 0)}function Hs(z){var F=z.keyCode;return"charCode"in z?(z=z.charCode,z===0&&F===13&&(z=13)):z=F,z===10&&(z=13),32<=z||z===13?z:0}function Us(){return!0}function Oc(){return!1}function ln(z){function F(q,Q,ne,se,de){this._reactName=q,this._targetInst=ne,this.type=Q,this.nativeEvent=se,this.target=de,this.currentTarget=null;for(var xe in z)z.hasOwnProperty(xe)&&(q=z[xe],this[xe]=q?q(se):se[xe]);return this.isDefaultPrevented=(se.defaultPrevented!=null?se.defaultPrevented:se.returnValue===!1)?Us:Oc,this.isPropagationStopped=Oc,this}return Y(F.prototype,{preventDefault:function(){this.defaultPrevented=!0;var q=this.nativeEvent;q&&(q.preventDefault?q.preventDefault():typeof q.returnValue!="unknown"&&(q.returnValue=!1),this.isDefaultPrevented=Us)},stopPropagation:function(){var q=this.nativeEvent;q&&(q.stopPropagation?q.stopPropagation():typeof q.cancelBubble!="unknown"&&(q.cancelBubble=!0),this.isPropagationStopped=Us)},persist:function(){},isPersistent:Us}),F}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(z){return z.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fs=ln(Dr),Vi=Y({},Dr,{view:0,detail:0}),kh=ln(Vi),uo,fo,Zi,Gs=Y({},Vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:po,button:0,buttons:0,relatedTarget:function(z){return z.relatedTarget===void 0?z.fromElement===z.srcElement?z.toElement:z.fromElement:z.relatedTarget},movementX:function(z){return"movementX"in z?z.movementX:(z!==Zi&&(Zi&&z.type==="mousemove"?(uo=z.screenX-Zi.screenX,fo=z.screenY-Zi.screenY):fo=uo=0,Zi=z),uo)},movementY:function(z){return"movementY"in z?z.movementY:fo}}),Ic=ln(Gs),Ph=Y({},Gs,{dataTransfer:0}),Oh=ln(Ph),Ih=Y({},Vi,{relatedTarget:0}),ho=ln(Ih),jh=Y({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),Dh=ln(jh),Lh=Y({},Dr,{clipboardData:function(z){return"clipboardData"in z?z.clipboardData:window.clipboardData}}),zh=ln(Lh),Bh=Y({},Dr,{data:0}),jc=ln(Bh),Hh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gh(z){var F=this.nativeEvent;return F.getModifierState?F.getModifierState(z):(z=Fh[z])?!!F[z]:!1}function po(){return Gh}var Vh=Y({},Vi,{key:function(z){if(z.key){var F=Hh[z.key]||z.key;if(F!=="Unidentified")return F}return z.type==="keypress"?(z=Hs(z),z===13?"Enter":String.fromCharCode(z)):z.type==="keydown"||z.type==="keyup"?Uh[z.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:po,charCode:function(z){return z.type==="keypress"?Hs(z):0},keyCode:function(z){return z.type==="keydown"||z.type==="keyup"?z.keyCode:0},which:function(z){return z.type==="keypress"?Hs(z):z.type==="keydown"||z.type==="keyup"?z.keyCode:0}}),Zh=ln(Vh),qh=Y({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dc=ln(qh),Yh=Y({},Vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:po}),Xh=ln(Yh),Wh=Y({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kh=ln(Wh),Qh=Y({},Gs,{deltaX:function(z){return"deltaX"in z?z.deltaX:"wheelDeltaX"in z?-z.wheelDeltaX:0},deltaY:function(z){return"deltaY"in z?z.deltaY:"wheelDeltaY"in z?-z.wheelDeltaY:"wheelDelta"in z?-z.wheelDelta:0},deltaZ:0,deltaMode:0}),Jh=ln(Qh),ep=Y({},Dr,{newState:0,oldState:0}),tp=ln(ep),np=[9,13,27,32],mo=Vn&&"CompositionEvent"in window,qi=null;Vn&&"documentMode"in document&&(qi=document.documentMode);var rp=Vn&&"TextEvent"in window&&!qi,Lc=Vn&&(!mo||qi&&8<qi&&11>=qi),zc=" ",Bc=!1;function Hc(z,F){switch(z){case"keyup":return np.indexOf(F.keyCode)!==-1;case"keydown":return F.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uc(z){return z=z.detail,typeof z=="object"&&"data"in z?z.data:null}var li=!1;function ip(z,F){switch(z){case"compositionend":return Uc(F);case"keypress":return F.which!==32?null:(Bc=!0,zc);case"textInput":return z=F.data,z===zc&&Bc?null:z;default:return null}}function sp(z,F){if(li)return z==="compositionend"||!mo&&Hc(z,F)?(z=Pc(),Bs=co=fr=null,li=!1,z):null;switch(z){case"paste":return null;case"keypress":if(!(F.ctrlKey||F.altKey||F.metaKey)||F.ctrlKey&&F.altKey){if(F.char&&1<F.char.length)return F.char;if(F.which)return String.fromCharCode(F.which)}return null;case"compositionend":return Lc&&F.locale!=="ko"?null:F.data;default:return null}}var ap={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fc(z){var F=z&&z.nodeName&&z.nodeName.toLowerCase();return F==="input"?!!ap[z.type]:F==="textarea"}function Gc(z,F,q,Q){ai?oi?oi.push(Q):oi=[Q]:ai=Q,F=Ia(F,"onChange"),0<F.length&&(q=new Fs("onChange","change",null,q,Q),z.push({event:q,listeners:F}))}var Yi=null,Xi=null;function op(z){Rd(z,0)}function Vs(z){var F=Ui(z);if(Cc(F))return z}function Vc(z,F){if(z==="change")return F}var Zc=!1;if(Vn){var go;if(Vn){var _o="oninput"in document;if(!_o){var qc=document.createElement("div");qc.setAttribute("oninput","return;"),_o=typeof qc.oninput=="function"}go=_o}else go=!1;Zc=go&&(!document.documentMode||9<document.documentMode)}function Yc(){Yi&&(Yi.detachEvent("onpropertychange",Xc),Xi=Yi=null)}function Xc(z){if(z.propertyName==="value"&&Vs(Xi)){var F=[];Gc(F,Xi,z,ao(z)),kc(op,F)}}function lp(z,F,q){z==="focusin"?(Yc(),Yi=F,Xi=q,Yi.attachEvent("onpropertychange",Xc)):z==="focusout"&&Yc()}function cp(z){if(z==="selectionchange"||z==="keyup"||z==="keydown")return Vs(Xi)}function up(z,F){if(z==="click")return Vs(F)}function fp(z,F){if(z==="input"||z==="change")return Vs(F)}function dp(z,F){return z===F&&(z!==0||1/z===1/F)||z!==z&&F!==F}var mn=typeof Object.is=="function"?Object.is:dp;function Wi(z,F){if(mn(z,F))return!0;if(typeof z!="object"||z===null||typeof F!="object"||F===null)return!1;var q=Object.keys(z),Q=Object.keys(F);if(q.length!==Q.length)return!1;for(Q=0;Q<q.length;Q++){var ne=q[Q];if(!ct.call(F,ne)||!mn(z[ne],F[ne]))return!1}return!0}function Wc(z){for(;z&&z.firstChild;)z=z.firstChild;return z}function Kc(z,F){var q=Wc(z);z=0;for(var Q;q;){if(q.nodeType===3){if(Q=z+q.textContent.length,z<=F&&Q>=F)return{node:q,offset:F-z};z=Q}e:{for(;q;){if(q.nextSibling){q=q.nextSibling;break e}q=q.parentNode}q=void 0}q=Wc(q)}}function Qc(z,F){return z&&F?z===F?!0:z&&z.nodeType===3?!1:F&&F.nodeType===3?Qc(z,F.parentNode):"contains"in z?z.contains(F):z.compareDocumentPosition?!!(z.compareDocumentPosition(F)&16):!1:!1}function Jc(z){z=z!=null&&z.ownerDocument!=null&&z.ownerDocument.defaultView!=null?z.ownerDocument.defaultView:window;for(var F=Ls(z.document);F instanceof z.HTMLIFrameElement;){try{var q=typeof F.contentWindow.location.href=="string"}catch{q=!1}if(q)z=F.contentWindow;else break;F=Ls(z.document)}return F}function yo(z){var F=z&&z.nodeName&&z.nodeName.toLowerCase();return F&&(F==="input"&&(z.type==="text"||z.type==="search"||z.type==="tel"||z.type==="url"||z.type==="password")||F==="textarea"||z.contentEditable==="true")}var hp=Vn&&"documentMode"in document&&11>=document.documentMode,ci=null,xo=null,Ki=null,bo=!1;function eu(z,F,q){var Q=q.window===q?q.document:q.nodeType===9?q:q.ownerDocument;bo||ci==null||ci!==Ls(Q)||(Q=ci,"selectionStart"in Q&&yo(Q)?Q={start:Q.selectionStart,end:Q.selectionEnd}:(Q=(Q.ownerDocument&&Q.ownerDocument.defaultView||window).getSelection(),Q={anchorNode:Q.anchorNode,anchorOffset:Q.anchorOffset,focusNode:Q.focusNode,focusOffset:Q.focusOffset}),Ki&&Wi(Ki,Q)||(Ki=Q,Q=Ia(xo,"onSelect"),0<Q.length&&(F=new Fs("onSelect","select",null,F,q),z.push({event:F,listeners:Q}),F.target=ci)))}function Lr(z,F){var q={};return q[z.toLowerCase()]=F.toLowerCase(),q["Webkit"+z]="webkit"+F,q["Moz"+z]="moz"+F,q}var ui={animationend:Lr("Animation","AnimationEnd"),animationiteration:Lr("Animation","AnimationIteration"),animationstart:Lr("Animation","AnimationStart"),transitionrun:Lr("Transition","TransitionRun"),transitionstart:Lr("Transition","TransitionStart"),transitioncancel:Lr("Transition","TransitionCancel"),transitionend:Lr("Transition","TransitionEnd")},vo={},tu={};Vn&&(tu=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function zr(z){if(vo[z])return vo[z];if(!ui[z])return z;var F=ui[z],q;for(q in F)if(F.hasOwnProperty(q)&&q in tu)return vo[z]=F[q];return z}var nu=zr("animationend"),ru=zr("animationiteration"),iu=zr("animationstart"),pp=zr("transitionrun"),mp=zr("transitionstart"),gp=zr("transitioncancel"),su=zr("transitionend"),au=new Map,So="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");So.push("scrollEnd");function In(z,F){au.set(z,F),jr(F,[z])}var Zs=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},An=[],fi=0,wo=0;function qs(){for(var z=fi,F=wo=fi=0;F<z;){var q=An[F];An[F++]=null;var Q=An[F];An[F++]=null;var ne=An[F];An[F++]=null;var se=An[F];if(An[F++]=null,Q!==null&&ne!==null){var de=Q.pending;de===null?ne.next=ne:(ne.next=de.next,de.next=ne),Q.pending=ne}se!==0&&ou(q,ne,se)}}function Ys(z,F,q,Q){An[fi++]=z,An[fi++]=F,An[fi++]=q,An[fi++]=Q,wo|=Q,z.lanes|=Q,z=z.alternate,z!==null&&(z.lanes|=Q)}function Eo(z,F,q,Q){return Ys(z,F,q,Q),Xs(z)}function Br(z,F){return Ys(z,null,null,F),Xs(z)}function ou(z,F,q){z.lanes|=q;var Q=z.alternate;Q!==null&&(Q.lanes|=q);for(var ne=!1,se=z.return;se!==null;)se.childLanes|=q,Q=se.alternate,Q!==null&&(Q.childLanes|=q),se.tag===22&&(z=se.stateNode,z===null||z._visibility&1||(ne=!0)),z=se,se=se.return;return z.tag===3?(se=z.stateNode,ne&&F!==null&&(ne=31-rn(q),z=se.hiddenUpdates,Q=z[ne],Q===null?z[ne]=[F]:Q.push(F),F.lane=q|536870912),se):null}function Xs(z){if(50<xs)throw xs=0,Pl=null,Error(P(185));for(var F=z.return;F!==null;)z=F,F=z.return;return z.tag===3?z.stateNode:null}var di={};function _p(z,F,q,Q){this.tag=z,this.key=q,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=F,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Q,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(z,F,q,Q){return new _p(z,F,q,Q)}function Co(z){return z=z.prototype,!(!z||!z.isReactComponent)}function qn(z,F){var q=z.alternate;return q===null?(q=gn(z.tag,F,z.key,z.mode),q.elementType=z.elementType,q.type=z.type,q.stateNode=z.stateNode,q.alternate=z,z.alternate=q):(q.pendingProps=F,q.type=z.type,q.flags=0,q.subtreeFlags=0,q.deletions=null),q.flags=z.flags&65011712,q.childLanes=z.childLanes,q.lanes=z.lanes,q.child=z.child,q.memoizedProps=z.memoizedProps,q.memoizedState=z.memoizedState,q.updateQueue=z.updateQueue,F=z.dependencies,q.dependencies=F===null?null:{lanes:F.lanes,firstContext:F.firstContext},q.sibling=z.sibling,q.index=z.index,q.ref=z.ref,q.refCleanup=z.refCleanup,q}function lu(z,F){z.flags&=65011714;var q=z.alternate;return q===null?(z.childLanes=0,z.lanes=F,z.child=null,z.subtreeFlags=0,z.memoizedProps=null,z.memoizedState=null,z.updateQueue=null,z.dependencies=null,z.stateNode=null):(z.childLanes=q.childLanes,z.lanes=q.lanes,z.child=q.child,z.subtreeFlags=0,z.deletions=null,z.memoizedProps=q.memoizedProps,z.memoizedState=q.memoizedState,z.updateQueue=q.updateQueue,z.type=q.type,F=q.dependencies,z.dependencies=F===null?null:{lanes:F.lanes,firstContext:F.firstContext}),z}function Ws(z,F,q,Q,ne,se){var de=0;if(Q=z,typeof z=="function")Co(z)&&(de=1);else if(typeof z=="string")de=Sm(z,q,ze.current)?26:z==="html"||z==="head"||z==="body"?27:5;else e:switch(z){case pe:return z=gn(31,q,F,ne),z.elementType=pe,z.lanes=se,z;case te:return Hr(q.children,ne,se,F);case ie:de=8,ne|=24;break;case oe:return z=gn(12,q,F,ne|2),z.elementType=oe,z.lanes=se,z;case he:return z=gn(13,q,F,ne),z.elementType=he,z.lanes=se,z;case me:return z=gn(19,q,F,ne),z.elementType=me,z.lanes=se,z;default:if(typeof z=="object"&&z!==null)switch(z.$$typeof){case ce:de=10;break e;case ae:de=9;break e;case le:de=11;break e;case fe:de=14;break e;case ue:de=16,Q=null;break e}de=29,q=Error(P(130,z===null?"null":typeof z,"")),Q=null}return F=gn(de,q,F,ne),F.elementType=z,F.type=Q,F.lanes=se,F}function Hr(z,F,q,Q){return z=gn(7,z,Q,F),z.lanes=q,z}function To(z,F,q){return z=gn(6,z,null,F),z.lanes=q,z}function cu(z){var F=gn(18,null,null,0);return F.stateNode=z,F}function Ao(z,F,q){return F=gn(4,z.children!==null?z.children:[],z.key,F),F.lanes=q,F.stateNode={containerInfo:z.containerInfo,pendingChildren:null,implementation:z.implementation},F}var uu=new WeakMap;function Rn(z,F){if(typeof z=="object"&&z!==null){var q=uu.get(z);return q!==void 0?q:(F={value:z,source:F,stack:et(F)},uu.set(z,F),F)}return{value:z,source:F,stack:et(F)}}var hi=[],mi=0,Ks=null,Qi=0,$n=[],Mn=0,dr=null,Ln=1,zn="";function Wn(z,F){hi[mi++]=Qi,hi[mi++]=Ks,Ks=z,Qi=F}function fu(z,F,q){$n[Mn++]=Ln,$n[Mn++]=zn,$n[Mn++]=dr,dr=z;var Q=Ln;z=zn;var ne=32-rn(Q)-1;Q&=~(1<<ne),q+=1;var se=32-rn(F)+ne;if(30<se){var de=ne-ne%5;se=(Q&(1<<de)-1).toString(32),Q>>=de,ne-=de,Ln=1<<32-rn(F)+ne|q<<ne|Q,zn=se+z}else Ln=1<<se|q<<ne|Q,zn=z}function Ro(z){z.return!==null&&(Wn(z,1),fu(z,1,0))}function $o(z){for(;z===Ks;)Ks=hi[--mi],hi[mi]=null,Qi=hi[--mi],hi[mi]=null;for(;z===dr;)dr=$n[--Mn],$n[Mn]=null,zn=$n[--Mn],$n[Mn]=null,Ln=$n[--Mn],$n[Mn]=null}function du(z,F){$n[Mn++]=Ln,$n[Mn++]=zn,$n[Mn++]=dr,Ln=F.id,zn=F.overflow,dr=z}var Kt=null,Ot=null,_t=!1,hr=null,Nn=!1,Mo=Error(P(519));function pr(z){var F=Error(P(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ji(Rn(F,z)),Mo}function hu(z){var F=z.stateNode,q=z.type,Q=z.memoizedProps;switch(F[Wt]=z,F[on]=Q,q){case"dialog":ht("cancel",F),ht("close",F);break;case"iframe":case"object":case"embed":ht("load",F);break;case"video":case"audio":for(q=0;q<vs.length;q++)ht(vs[q],F);break;case"source":ht("error",F);break;case"img":case"image":case"link":ht("error",F),ht("load",F);break;case"details":ht("toggle",F);break;case"input":ht("invalid",F),Tc(F,Q.value,Q.defaultValue,Q.checked,Q.defaultChecked,Q.type,Q.name,!0);break;case"select":ht("invalid",F);break;case"textarea":ht("invalid",F),Rc(F,Q.value,Q.defaultValue,Q.children)}q=Q.children,typeof q!="string"&&typeof q!="number"&&typeof q!="bigint"||F.textContent===""+q||Q.suppressHydrationWarning===!0||kd(F.textContent,q)?(Q.popover!=null&&(ht("beforetoggle",F),ht("toggle",F)),Q.onScroll!=null&&ht("scroll",F),Q.onScrollEnd!=null&&ht("scrollend",F),Q.onClick!=null&&(F.onclick=Gn),F=!0):F=!1,F||pr(z,!0)}function pu(z){for(Kt=z.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:Kt=Kt.return}}function gi(z){if(z!==Kt)return!1;if(!_t)return pu(z),_t=!0,!1;var F=z.tag,q;if((q=F!==3&&F!==27)&&((q=F===5)&&(q=z.type,q=!(q!=="form"&&q!=="button")||Yl(z.type,z.memoizedProps)),q=!q),q&&Ot&&pr(z),pu(z),F===13){if(z=z.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(P(317));Ot=Hd(z)}else if(F===31){if(z=z.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(P(317));Ot=Hd(z)}else F===27?(F=Ot,Rr(z.type)?(z=Jl,Jl=null,Ot=z):Ot=F):Ot=Kt?Pn(z.stateNode.nextSibling):null;return!0}function Ur(){Ot=Kt=null,_t=!1}function No(){var z=hr;return z!==null&&(hn===null?hn=z:hn.push.apply(hn,z),hr=null),z}function Ji(z){hr===null?hr=[z]:hr.push(z)}var ko=ve(null),Fr=null,Kn=null;function mr(z,F,q){Me(ko,F._currentValue),F._currentValue=q}function Qn(z){z._currentValue=ko.current,Re(ko)}function Po(z,F,q){for(;z!==null;){var Q=z.alternate;if((z.childLanes&F)!==F?(z.childLanes|=F,Q!==null&&(Q.childLanes|=F)):Q!==null&&(Q.childLanes&F)!==F&&(Q.childLanes|=F),z===q)break;z=z.return}}function Oo(z,F,q,Q){var ne=z.child;for(ne!==null&&(ne.return=z);ne!==null;){var se=ne.dependencies;if(se!==null){var de=ne.child;se=se.firstContext;e:for(;se!==null;){var xe=se;se=ne;for(var $e=0;$e<F.length;$e++)if(xe.context===F[$e]){se.lanes|=q,xe=se.alternate,xe!==null&&(xe.lanes|=q),Po(se.return,q,z),Q||(de=null);break e}se=xe.next}}else if(ne.tag===18){if(de=ne.return,de===null)throw Error(P(341));de.lanes|=q,se=de.alternate,se!==null&&(se.lanes|=q),Po(de,q,z),de=null}else de=ne.child;if(de!==null)de.return=ne;else for(de=ne;de!==null;){if(de===z){de=null;break}if(ne=de.sibling,ne!==null){ne.return=de.return,de=ne;break}de=de.return}ne=de}}function _i(z,F,q,Q){z=null;for(var ne=F,se=!1;ne!==null;){if(!se){if((ne.flags&524288)!==0)se=!0;else if((ne.flags&262144)!==0)break}if(ne.tag===10){var de=ne.alternate;if(de===null)throw Error(P(387));if(de=de.memoizedProps,de!==null){var xe=ne.type;mn(ne.pendingProps.value,de.value)||(z!==null?z.push(xe):z=[xe])}}else if(ne===Oe.current){if(de=ne.alternate,de===null)throw Error(P(387));de.memoizedState.memoizedState!==ne.memoizedState.memoizedState&&(z!==null?z.push(Ts):z=[Ts])}ne=ne.return}z!==null&&Oo(F,z,q,Q),F.flags|=262144}function Qs(z){for(z=z.firstContext;z!==null;){if(!mn(z.context._currentValue,z.memoizedValue))return!0;z=z.next}return!1}function Gr(z){Fr=z,Kn=null,z=z.dependencies,z!==null&&(z.firstContext=null)}function Qt(z){return mu(Fr,z)}function Js(z,F){return Fr===null&&Gr(z),mu(z,F)}function mu(z,F){var q=F._currentValue;if(F={context:F,memoizedValue:q,next:null},Kn===null){if(z===null)throw Error(P(308));Kn=F,z.dependencies={lanes:0,firstContext:F},z.flags|=524288}else Kn=Kn.next=F;return q}var yp=typeof AbortController<"u"?AbortController:function(){var z=[],F=this.signal={aborted:!1,addEventListener:function(q,Q){z.push(Q)}};this.abort=function(){F.aborted=!0,z.forEach(function(q){return q()})}},xp=_.unstable_scheduleCallback,bp=_.unstable_NormalPriority,Ut={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Io(){return{controller:new yp,data:new Map,refCount:0}}function es(z){z.refCount--,z.refCount===0&&xp(bp,function(){z.controller.abort()})}var ts=null,jo=0,yi=0,xi=null;function vp(z,F){if(ts===null){var q=ts=[];jo=0,yi=zl(),xi={status:"pending",value:void 0,then:function(Q){q.push(Q)}}}return jo++,F.then(gu,gu),F}function gu(){if(--jo===0&&ts!==null){xi!==null&&(xi.status="fulfilled");var z=ts;ts=null,yi=0,xi=null;for(var F=0;F<z.length;F++)(0,z[F])()}}function Sp(z,F){var q=[],Q={status:"pending",value:null,reason:null,then:function(ne){q.push(ne)}};return z.then(function(){Q.status="fulfilled",Q.value=F;for(var ne=0;ne<q.length;ne++)(0,q[ne])(F)},function(ne){for(Q.status="rejected",Q.reason=ne,ne=0;ne<q.length;ne++)(0,q[ne])(void 0)}),Q}var _u=ye.S;ye.S=function(z,F){td=st(),typeof F=="object"&&F!==null&&typeof F.then=="function"&&vp(z,F),_u!==null&&_u(z,F)};var Vr=ve(null);function Do(){var z=Vr.current;return z!==null?z:Mt.pooledCache}function ea(z,F){F===null?Me(Vr,Vr.current):Me(Vr,F.pool)}function yu(){var z=Do();return z===null?null:{parent:Ut._currentValue,pool:z}}var bi=Error(P(460)),Lo=Error(P(474)),ta=Error(P(542)),na={then:function(){}};function xu(z){return z=z.status,z==="fulfilled"||z==="rejected"}function bu(z,F,q){switch(q=z[q],q===void 0?z.push(F):q!==F&&(F.then(Gn,Gn),F=q),F.status){case"fulfilled":return F.value;case"rejected":throw z=F.reason,Su(z),z;default:if(typeof F.status=="string")F.then(Gn,Gn);else{if(z=Mt,z!==null&&100<z.shellSuspendCounter)throw Error(P(482));z=F,z.status="pending",z.then(function(Q){if(F.status==="pending"){var ne=F;ne.status="fulfilled",ne.value=Q}},function(Q){if(F.status==="pending"){var ne=F;ne.status="rejected",ne.reason=Q}})}switch(F.status){case"fulfilled":return F.value;case"rejected":throw z=F.reason,Su(z),z}throw qr=F,bi}}function Zr(z){try{var F=z._init;return F(z._payload)}catch(q){throw q!==null&&typeof q=="object"&&typeof q.then=="function"?(qr=q,bi):q}}var qr=null;function vu(){if(qr===null)throw Error(P(459));var z=qr;return qr=null,z}function Su(z){if(z===bi||z===ta)throw Error(P(483))}var vi=null,ns=0;function ra(z){var F=ns;return ns+=1,vi===null&&(vi=[]),bu(vi,z,F)}function rs(z,F){F=F.props.ref,z.ref=F!==void 0?F:null}function ia(z,F){throw F.$$typeof===W?Error(P(525)):(z=Object.prototype.toString.call(F),Error(P(31,z==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":z)))}function wu(z){function F(Ie,Ne){if(z){var je=Ie.deletions;je===null?(Ie.deletions=[Ne],Ie.flags|=16):je.push(Ne)}}function q(Ie,Ne){if(!z)return null;for(;Ne!==null;)F(Ie,Ne),Ne=Ne.sibling;return null}function Q(Ie){for(var Ne=new Map;Ie!==null;)Ie.key!==null?Ne.set(Ie.key,Ie):Ne.set(Ie.index,Ie),Ie=Ie.sibling;return Ne}function ne(Ie,Ne){return Ie=qn(Ie,Ne),Ie.index=0,Ie.sibling=null,Ie}function se(Ie,Ne,je){return Ie.index=je,z?(je=Ie.alternate,je!==null?(je=je.index,je<Ne?(Ie.flags|=67108866,Ne):je):(Ie.flags|=67108866,Ne)):(Ie.flags|=1048576,Ne)}function de(Ie){return z&&Ie.alternate===null&&(Ie.flags|=67108866),Ie}function xe(Ie,Ne,je,Ye){return Ne===null||Ne.tag!==6?(Ne=To(je,Ie.mode,Ye),Ne.return=Ie,Ne):(Ne=ne(Ne,je),Ne.return=Ie,Ne)}function $e(Ie,Ne,je,Ye){var ot=je.type;return ot===te?Ge(Ie,Ne,je.props.children,Ye,je.key):Ne!==null&&(Ne.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===ue&&Zr(ot)===Ne.type)?(Ne=ne(Ne,je.props),rs(Ne,je),Ne.return=Ie,Ne):(Ne=Ws(je.type,je.key,je.props,null,Ie.mode,Ye),rs(Ne,je),Ne.return=Ie,Ne)}function De(Ie,Ne,je,Ye){return Ne===null||Ne.tag!==4||Ne.stateNode.containerInfo!==je.containerInfo||Ne.stateNode.implementation!==je.implementation?(Ne=Ao(je,Ie.mode,Ye),Ne.return=Ie,Ne):(Ne=ne(Ne,je.children||[]),Ne.return=Ie,Ne)}function Ge(Ie,Ne,je,Ye,ot){return Ne===null||Ne.tag!==7?(Ne=Hr(je,Ie.mode,Ye,ot),Ne.return=Ie,Ne):(Ne=ne(Ne,je),Ne.return=Ie,Ne)}function Xe(Ie,Ne,je){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return Ne=To(""+Ne,Ie.mode,je),Ne.return=Ie,Ne;if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case J:return je=Ws(Ne.type,Ne.key,Ne.props,null,Ie.mode,je),rs(je,Ne),je.return=Ie,je;case ee:return Ne=Ao(Ne,Ie.mode,je),Ne.return=Ie,Ne;case ue:return Ne=Zr(Ne),Xe(Ie,Ne,je)}if(Ee(Ne)||we(Ne))return Ne=Hr(Ne,Ie.mode,je,null),Ne.return=Ie,Ne;if(typeof Ne.then=="function")return Xe(Ie,ra(Ne),je);if(Ne.$$typeof===ce)return Xe(Ie,Js(Ie,Ne),je);ia(Ie,Ne)}return null}function Le(Ie,Ne,je,Ye){var ot=Ne!==null?Ne.key:null;if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return ot!==null?null:xe(Ie,Ne,""+je,Ye);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case J:return je.key===ot?$e(Ie,Ne,je,Ye):null;case ee:return je.key===ot?De(Ie,Ne,je,Ye):null;case ue:return je=Zr(je),Le(Ie,Ne,je,Ye)}if(Ee(je)||we(je))return ot!==null?null:Ge(Ie,Ne,je,Ye,null);if(typeof je.then=="function")return Le(Ie,Ne,ra(je),Ye);if(je.$$typeof===ce)return Le(Ie,Ne,Js(Ie,je),Ye);ia(Ie,je)}return null}function Ue(Ie,Ne,je,Ye,ot){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ie=Ie.get(je)||null,xe(Ne,Ie,""+Ye,ot);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case J:return Ie=Ie.get(Ye.key===null?je:Ye.key)||null,$e(Ne,Ie,Ye,ot);case ee:return Ie=Ie.get(Ye.key===null?je:Ye.key)||null,De(Ne,Ie,Ye,ot);case ue:return Ye=Zr(Ye),Ue(Ie,Ne,je,Ye,ot)}if(Ee(Ye)||we(Ye))return Ie=Ie.get(je)||null,Ge(Ne,Ie,Ye,ot,null);if(typeof Ye.then=="function")return Ue(Ie,Ne,je,ra(Ye),ot);if(Ye.$$typeof===ce)return Ue(Ie,Ne,je,Js(Ne,Ye),ot);ia(Ne,Ye)}return null}function tt(Ie,Ne,je,Ye){for(var ot=null,xt=null,nt=Ne,ft=Ne=0,mt=null;nt!==null&&ft<je.length;ft++){nt.index>ft?(mt=nt,nt=null):mt=nt.sibling;var bt=Le(Ie,nt,je[ft],Ye);if(bt===null){nt===null&&(nt=mt);break}z&&nt&&bt.alternate===null&&F(Ie,nt),Ne=se(bt,Ne,ft),xt===null?ot=bt:xt.sibling=bt,xt=bt,nt=mt}if(ft===je.length)return q(Ie,nt),_t&&Wn(Ie,ft),ot;if(nt===null){for(;ft<je.length;ft++)nt=Xe(Ie,je[ft],Ye),nt!==null&&(Ne=se(nt,Ne,ft),xt===null?ot=nt:xt.sibling=nt,xt=nt);return _t&&Wn(Ie,ft),ot}for(nt=Q(nt);ft<je.length;ft++)mt=Ue(nt,Ie,ft,je[ft],Ye),mt!==null&&(z&&mt.alternate!==null&&nt.delete(mt.key===null?ft:mt.key),Ne=se(mt,Ne,ft),xt===null?ot=mt:xt.sibling=mt,xt=mt);return z&&nt.forEach(function(Or){return F(Ie,Or)}),_t&&Wn(Ie,ft),ot}function lt(Ie,Ne,je,Ye){if(je==null)throw Error(P(151));for(var ot=null,xt=null,nt=Ne,ft=Ne=0,mt=null,bt=je.next();nt!==null&&!bt.done;ft++,bt=je.next()){nt.index>ft?(mt=nt,nt=null):mt=nt.sibling;var Or=Le(Ie,nt,bt.value,Ye);if(Or===null){nt===null&&(nt=mt);break}z&&nt&&Or.alternate===null&&F(Ie,nt),Ne=se(Or,Ne,ft),xt===null?ot=Or:xt.sibling=Or,xt=Or,nt=mt}if(bt.done)return q(Ie,nt),_t&&Wn(Ie,ft),ot;if(nt===null){for(;!bt.done;ft++,bt=je.next())bt=Xe(Ie,bt.value,Ye),bt!==null&&(Ne=se(bt,Ne,ft),xt===null?ot=bt:xt.sibling=bt,xt=bt);return _t&&Wn(Ie,ft),ot}for(nt=Q(nt);!bt.done;ft++,bt=je.next())bt=Ue(nt,Ie,ft,bt.value,Ye),bt!==null&&(z&&bt.alternate!==null&&nt.delete(bt.key===null?ft:bt.key),Ne=se(bt,Ne,ft),xt===null?ot=bt:xt.sibling=bt,xt=bt);return z&&nt.forEach(function(Pm){return F(Ie,Pm)}),_t&&Wn(Ie,ft),ot}function Rt(Ie,Ne,je,Ye){if(typeof je=="object"&&je!==null&&je.type===te&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case J:e:{for(var ot=je.key;Ne!==null;){if(Ne.key===ot){if(ot=je.type,ot===te){if(Ne.tag===7){q(Ie,Ne.sibling),Ye=ne(Ne,je.props.children),Ye.return=Ie,Ie=Ye;break e}}else if(Ne.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===ue&&Zr(ot)===Ne.type){q(Ie,Ne.sibling),Ye=ne(Ne,je.props),rs(Ye,je),Ye.return=Ie,Ie=Ye;break e}q(Ie,Ne);break}else F(Ie,Ne);Ne=Ne.sibling}je.type===te?(Ye=Hr(je.props.children,Ie.mode,Ye,je.key),Ye.return=Ie,Ie=Ye):(Ye=Ws(je.type,je.key,je.props,null,Ie.mode,Ye),rs(Ye,je),Ye.return=Ie,Ie=Ye)}return de(Ie);case ee:e:{for(ot=je.key;Ne!==null;){if(Ne.key===ot)if(Ne.tag===4&&Ne.stateNode.containerInfo===je.containerInfo&&Ne.stateNode.implementation===je.implementation){q(Ie,Ne.sibling),Ye=ne(Ne,je.children||[]),Ye.return=Ie,Ie=Ye;break e}else{q(Ie,Ne);break}else F(Ie,Ne);Ne=Ne.sibling}Ye=Ao(je,Ie.mode,Ye),Ye.return=Ie,Ie=Ye}return de(Ie);case ue:return je=Zr(je),Rt(Ie,Ne,je,Ye)}if(Ee(je))return tt(Ie,Ne,je,Ye);if(we(je)){if(ot=we(je),typeof ot!="function")throw Error(P(150));return je=ot.call(je),lt(Ie,Ne,je,Ye)}if(typeof je.then=="function")return Rt(Ie,Ne,ra(je),Ye);if(je.$$typeof===ce)return Rt(Ie,Ne,Js(Ie,je),Ye);ia(Ie,je)}return typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint"?(je=""+je,Ne!==null&&Ne.tag===6?(q(Ie,Ne.sibling),Ye=ne(Ne,je),Ye.return=Ie,Ie=Ye):(q(Ie,Ne),Ye=To(je,Ie.mode,Ye),Ye.return=Ie,Ie=Ye),de(Ie)):q(Ie,Ne)}return function(Ie,Ne,je,Ye){try{ns=0;var ot=Rt(Ie,Ne,je,Ye);return vi=null,ot}catch(nt){if(nt===bi||nt===ta)throw nt;var xt=gn(29,nt,null,Ie.mode);return xt.lanes=Ye,xt.return=Ie,xt}}}var Yr=wu(!0),Eu=wu(!1),gr=!1;function zo(z){z.updateQueue={baseState:z.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bo(z,F){z=z.updateQueue,F.updateQueue===z&&(F.updateQueue={baseState:z.baseState,firstBaseUpdate:z.firstBaseUpdate,lastBaseUpdate:z.lastBaseUpdate,shared:z.shared,callbacks:null})}function _r(z){return{lane:z,tag:0,payload:null,callback:null,next:null}}function yr(z,F,q){var Q=z.updateQueue;if(Q===null)return null;if(Q=Q.shared,(St&2)!==0){var ne=Q.pending;return ne===null?F.next=F:(F.next=ne.next,ne.next=F),Q.pending=F,F=Xs(z),ou(z,null,q),F}return Ys(z,Q,F,q),Xs(z)}function is(z,F,q){if(F=F.updateQueue,F!==null&&(F=F.shared,(q&4194048)!==0)){var Q=F.lanes;Q&=z.pendingLanes,q|=Q,F.lanes=q,mc(z,q)}}function Ho(z,F){var q=z.updateQueue,Q=z.alternate;if(Q!==null&&(Q=Q.updateQueue,q===Q)){var ne=null,se=null;if(q=q.firstBaseUpdate,q!==null){do{var de={lane:q.lane,tag:q.tag,payload:q.payload,callback:null,next:null};se===null?ne=se=de:se=se.next=de,q=q.next}while(q!==null);se===null?ne=se=F:se=se.next=F}else ne=se=F;q={baseState:Q.baseState,firstBaseUpdate:ne,lastBaseUpdate:se,shared:Q.shared,callbacks:Q.callbacks},z.updateQueue=q;return}z=q.lastBaseUpdate,z===null?q.firstBaseUpdate=F:z.next=F,q.lastBaseUpdate=F}var Uo=!1;function ss(){if(Uo){var z=xi;if(z!==null)throw z}}function as(z,F,q,Q){Uo=!1;var ne=z.updateQueue;gr=!1;var se=ne.firstBaseUpdate,de=ne.lastBaseUpdate,xe=ne.shared.pending;if(xe!==null){ne.shared.pending=null;var $e=xe,De=$e.next;$e.next=null,de===null?se=De:de.next=De,de=$e;var Ge=z.alternate;Ge!==null&&(Ge=Ge.updateQueue,xe=Ge.lastBaseUpdate,xe!==de&&(xe===null?Ge.firstBaseUpdate=De:xe.next=De,Ge.lastBaseUpdate=$e))}if(se!==null){var Xe=ne.baseState;de=0,Ge=De=$e=null,xe=se;do{var Le=xe.lane&-536870913,Ue=Le!==xe.lane;if(Ue?(pt&Le)===Le:(Q&Le)===Le){Le!==0&&Le===yi&&(Uo=!0),Ge!==null&&(Ge=Ge.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var tt=z,lt=xe;Le=F;var Rt=q;switch(lt.tag){case 1:if(tt=lt.payload,typeof tt=="function"){Xe=tt.call(Rt,Xe,Le);break e}Xe=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=lt.payload,Le=typeof tt=="function"?tt.call(Rt,Xe,Le):tt,Le==null)break e;Xe=Y({},Xe,Le);break e;case 2:gr=!0}}Le=xe.callback,Le!==null&&(z.flags|=64,Ue&&(z.flags|=8192),Ue=ne.callbacks,Ue===null?ne.callbacks=[Le]:Ue.push(Le))}else Ue={lane:Le,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},Ge===null?(De=Ge=Ue,$e=Xe):Ge=Ge.next=Ue,de|=Le;if(xe=xe.next,xe===null){if(xe=ne.shared.pending,xe===null)break;Ue=xe,xe=Ue.next,Ue.next=null,ne.lastBaseUpdate=Ue,ne.shared.pending=null}}while(!0);Ge===null&&($e=Xe),ne.baseState=$e,ne.firstBaseUpdate=De,ne.lastBaseUpdate=Ge,se===null&&(ne.shared.lanes=0),wr|=de,z.lanes=de,z.memoizedState=Xe}}function Cu(z,F){if(typeof z!="function")throw Error(P(191,z));z.call(F)}function Tu(z,F){var q=z.callbacks;if(q!==null)for(z.callbacks=null,z=0;z<q.length;z++)Cu(q[z],F)}var Si=ve(null),sa=ve(0);function Au(z,F){z=or,Me(sa,z),Me(Si,F),or=z|F.baseLanes}function Fo(){Me(sa,or),Me(Si,Si.current)}function Go(){or=sa.current,Re(Si),Re(sa)}var _n=ve(null),kn=null;function xr(z){var F=z.alternate;Me(Bt,Bt.current&1),Me(_n,z),kn===null&&(F===null||Si.current!==null||F.memoizedState!==null)&&(kn=z)}function Vo(z){Me(Bt,Bt.current),Me(_n,z),kn===null&&(kn=z)}function Ru(z){z.tag===22?(Me(Bt,Bt.current),Me(_n,z),kn===null&&(kn=z)):br()}function br(){Me(Bt,Bt.current),Me(_n,_n.current)}function yn(z){Re(_n),kn===z&&(kn=null),Re(Bt)}var Bt=ve(0);function aa(z){for(var F=z;F!==null;){if(F.tag===13){var q=F.memoizedState;if(q!==null&&(q=q.dehydrated,q===null||Kl(q)||Ql(q)))return F}else if(F.tag===19&&(F.memoizedProps.revealOrder==="forwards"||F.memoizedProps.revealOrder==="backwards"||F.memoizedProps.revealOrder==="unstable_legacy-backwards"||F.memoizedProps.revealOrder==="together")){if((F.flags&128)!==0)return F}else if(F.child!==null){F.child.return=F,F=F.child;continue}if(F===z)break;for(;F.sibling===null;){if(F.return===null||F.return===z)return null;F=F.return}F.sibling.return=F.return,F=F.sibling}return null}var Jn=0,ut=null,Tt=null,Ft=null,oa=!1,wi=!1,Xr=!1,la=0,os=0,Ei=null,wp=0;function Lt(){throw Error(P(321))}function Zo(z,F){if(F===null)return!1;for(var q=0;q<F.length&&q<z.length;q++)if(!mn(z[q],F[q]))return!1;return!0}function qo(z,F,q,Q,ne,se){return Jn=se,ut=F,F.memoizedState=null,F.updateQueue=null,F.lanes=0,ye.H=z===null||z.memoizedState===null?df:ll,Xr=!1,se=q(Q,ne),Xr=!1,wi&&(se=Mu(F,q,Q,ne)),$u(z),se}function $u(z){ye.H=us;var F=Tt!==null&&Tt.next!==null;if(Jn=0,Ft=Tt=ut=null,oa=!1,os=0,Ei=null,F)throw Error(P(300));z===null||Gt||(z=z.dependencies,z!==null&&Qs(z)&&(Gt=!0))}function Mu(z,F,q,Q){ut=z;var ne=0;do{if(wi&&(Ei=null),os=0,wi=!1,25<=ne)throw Error(P(301));if(ne+=1,Ft=Tt=null,z.updateQueue!=null){var se=z.updateQueue;se.lastEffect=null,se.events=null,se.stores=null,se.memoCache!=null&&(se.memoCache.index=0)}ye.H=hf,se=F(q,Q)}while(wi);return se}function Ep(){var z=ye.H,F=z.useState()[0];return F=typeof F.then=="function"?ls(F):F,z=z.useState()[0],(Tt!==null?Tt.memoizedState:null)!==z&&(ut.flags|=1024),F}function Yo(){var z=la!==0;return la=0,z}function Xo(z,F,q){F.updateQueue=z.updateQueue,F.flags&=-2053,z.lanes&=~q}function Wo(z){if(oa){for(z=z.memoizedState;z!==null;){var F=z.queue;F!==null&&(F.pending=null),z=z.next}oa=!1}Jn=0,Ft=Tt=ut=null,wi=!1,os=la=0,Ei=null}function sn(){var z={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?ut.memoizedState=Ft=z:Ft=Ft.next=z,Ft}function Ht(){if(Tt===null){var z=ut.alternate;z=z!==null?z.memoizedState:null}else z=Tt.next;var F=Ft===null?ut.memoizedState:Ft.next;if(F!==null)Ft=F,Tt=z;else{if(z===null)throw ut.alternate===null?Error(P(467)):Error(P(310));Tt=z,z={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Ft===null?ut.memoizedState=Ft=z:Ft=Ft.next=z}return Ft}function ca(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ls(z){var F=os;return os+=1,Ei===null&&(Ei=[]),z=bu(Ei,z,F),F=ut,(Ft===null?F.memoizedState:Ft.next)===null&&(F=F.alternate,ye.H=F===null||F.memoizedState===null?df:ll),z}function ua(z){if(z!==null&&typeof z=="object"){if(typeof z.then=="function")return ls(z);if(z.$$typeof===ce)return Qt(z)}throw Error(P(438,String(z)))}function Ko(z){var F=null,q=ut.updateQueue;if(q!==null&&(F=q.memoCache),F==null){var Q=ut.alternate;Q!==null&&(Q=Q.updateQueue,Q!==null&&(Q=Q.memoCache,Q!=null&&(F={data:Q.data.map(function(ne){return ne.slice()}),index:0})))}if(F==null&&(F={data:[],index:0}),q===null&&(q=ca(),ut.updateQueue=q),q.memoCache=F,q=F.data[F.index],q===void 0)for(q=F.data[F.index]=Array(z),Q=0;Q<z;Q++)q[Q]=ge;return F.index++,q}function er(z,F){return typeof F=="function"?F(z):F}function fa(z){var F=Ht();return Qo(F,Tt,z)}function Qo(z,F,q){var Q=z.queue;if(Q===null)throw Error(P(311));Q.lastRenderedReducer=q;var ne=z.baseQueue,se=Q.pending;if(se!==null){if(ne!==null){var de=ne.next;ne.next=se.next,se.next=de}F.baseQueue=ne=se,Q.pending=null}if(se=z.baseState,ne===null)z.memoizedState=se;else{F=ne.next;var xe=de=null,$e=null,De=F,Ge=!1;do{var Xe=De.lane&-536870913;if(Xe!==De.lane?(pt&Xe)===Xe:(Jn&Xe)===Xe){var Le=De.revertLane;if(Le===0)$e!==null&&($e=$e.next={lane:0,revertLane:0,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null}),Xe===yi&&(Ge=!0);else if((Jn&Le)===Le){De=De.next,Le===yi&&(Ge=!0);continue}else Xe={lane:0,revertLane:De.revertLane,gesture:null,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},$e===null?(xe=$e=Xe,de=se):$e=$e.next=Xe,ut.lanes|=Le,wr|=Le;Xe=De.action,Xr&&q(se,Xe),se=De.hasEagerState?De.eagerState:q(se,Xe)}else Le={lane:Xe,revertLane:De.revertLane,gesture:De.gesture,action:De.action,hasEagerState:De.hasEagerState,eagerState:De.eagerState,next:null},$e===null?(xe=$e=Le,de=se):$e=$e.next=Le,ut.lanes|=Xe,wr|=Xe;De=De.next}while(De!==null&&De!==F);if($e===null?de=se:$e.next=xe,!mn(se,z.memoizedState)&&(Gt=!0,Ge&&(q=xi,q!==null)))throw q;z.memoizedState=se,z.baseState=de,z.baseQueue=$e,Q.lastRenderedState=se}return ne===null&&(Q.lanes=0),[z.memoizedState,Q.dispatch]}function Jo(z){var F=Ht(),q=F.queue;if(q===null)throw Error(P(311));q.lastRenderedReducer=z;var Q=q.dispatch,ne=q.pending,se=F.memoizedState;if(ne!==null){q.pending=null;var de=ne=ne.next;do se=z(se,de.action),de=de.next;while(de!==ne);mn(se,F.memoizedState)||(Gt=!0),F.memoizedState=se,F.baseQueue===null&&(F.baseState=se),q.lastRenderedState=se}return[se,Q]}function Nu(z,F,q){var Q=ut,ne=Ht(),se=_t;if(se){if(q===void 0)throw Error(P(407));q=q()}else q=F();var de=!mn((Tt||ne).memoizedState,q);if(de&&(ne.memoizedState=q,Gt=!0),ne=ne.queue,nl(Ou.bind(null,Q,ne,z),[z]),ne.getSnapshot!==F||de||Ft!==null&&Ft.memoizedState.tag&1){if(Q.flags|=2048,Ci(9,{destroy:void 0},Pu.bind(null,Q,ne,q,F),null),Mt===null)throw Error(P(349));se||(Jn&127)!==0||ku(Q,F,q)}return q}function ku(z,F,q){z.flags|=16384,z={getSnapshot:F,value:q},F=ut.updateQueue,F===null?(F=ca(),ut.updateQueue=F,F.stores=[z]):(q=F.stores,q===null?F.stores=[z]:q.push(z))}function Pu(z,F,q,Q){F.value=q,F.getSnapshot=Q,Iu(F)&&ju(z)}function Ou(z,F,q){return q(function(){Iu(F)&&ju(z)})}function Iu(z){var F=z.getSnapshot;z=z.value;try{var q=F();return!mn(z,q)}catch{return!0}}function ju(z){var F=Br(z,2);F!==null&&pn(F,z,2)}function el(z){var F=sn();if(typeof z=="function"){var q=z;if(z=q(),Xr){qt(!0);try{q()}finally{qt(!1)}}}return F.memoizedState=F.baseState=z,F.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:z},F}function Du(z,F,q,Q){return z.baseState=q,Qo(z,Tt,typeof Q=="function"?Q:er)}function Cp(z,F,q,Q,ne){if(pa(z))throw Error(P(485));if(z=F.action,z!==null){var se={payload:ne,action:z,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(de){se.listeners.push(de)}};ye.T!==null?q(!0):se.isTransition=!1,Q(se),q=F.pending,q===null?(se.next=F.pending=se,Lu(F,se)):(se.next=q.next,F.pending=q.next=se)}}function Lu(z,F){var q=F.action,Q=F.payload,ne=z.state;if(F.isTransition){var se=ye.T,de={};ye.T=de;try{var xe=q(ne,Q),$e=ye.S;$e!==null&&$e(de,xe),zu(z,F,xe)}catch(De){tl(z,F,De)}finally{se!==null&&de.types!==null&&(se.types=de.types),ye.T=se}}else try{se=q(ne,Q),zu(z,F,se)}catch(De){tl(z,F,De)}}function zu(z,F,q){q!==null&&typeof q=="object"&&typeof q.then=="function"?q.then(function(Q){Bu(z,F,Q)},function(Q){return tl(z,F,Q)}):Bu(z,F,q)}function Bu(z,F,q){F.status="fulfilled",F.value=q,Hu(F),z.state=q,F=z.pending,F!==null&&(q=F.next,q===F?z.pending=null:(q=q.next,F.next=q,Lu(z,q)))}function tl(z,F,q){var Q=z.pending;if(z.pending=null,Q!==null){Q=Q.next;do F.status="rejected",F.reason=q,Hu(F),F=F.next;while(F!==Q)}z.action=null}function Hu(z){z=z.listeners;for(var F=0;F<z.length;F++)(0,z[F])()}function Uu(z,F){return F}function Fu(z,F){if(_t){var q=Mt.formState;if(q!==null){e:{var Q=ut;if(_t){if(Ot){t:{for(var ne=Ot,se=Nn;ne.nodeType!==8;){if(!se){ne=null;break t}if(ne=Pn(ne.nextSibling),ne===null){ne=null;break t}}se=ne.data,ne=se==="F!"||se==="F"?ne:null}if(ne){Ot=Pn(ne.nextSibling),Q=ne.data==="F!";break e}}pr(Q)}Q=!1}Q&&(F=q[0])}}return q=sn(),q.memoizedState=q.baseState=F,Q={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:F},q.queue=Q,q=cf.bind(null,ut,Q),Q.dispatch=q,Q=el(!1),se=ol.bind(null,ut,!1,Q.queue),Q=sn(),ne={state:F,dispatch:null,action:z,pending:null},Q.queue=ne,q=Cp.bind(null,ut,ne,se,q),ne.dispatch=q,Q.memoizedState=z,[F,q,!1]}function Gu(z){var F=Ht();return Vu(F,Tt,z)}function Vu(z,F,q){if(F=Qo(z,F,Uu)[0],z=fa(er)[0],typeof F=="object"&&F!==null&&typeof F.then=="function")try{var Q=ls(F)}catch(de){throw de===bi?ta:de}else Q=F;F=Ht();var ne=F.queue,se=ne.dispatch;return q!==F.memoizedState&&(ut.flags|=2048,Ci(9,{destroy:void 0},Tp.bind(null,ne,q),null)),[Q,se,z]}function Tp(z,F){z.action=F}function Zu(z){var F=Ht(),q=Tt;if(q!==null)return Vu(F,q,z);Ht(),F=F.memoizedState,q=Ht();var Q=q.queue.dispatch;return q.memoizedState=z,[F,Q,!1]}function Ci(z,F,q,Q){return z={tag:z,create:q,deps:Q,inst:F,next:null},F=ut.updateQueue,F===null&&(F=ca(),ut.updateQueue=F),q=F.lastEffect,q===null?F.lastEffect=z.next=z:(Q=q.next,q.next=z,z.next=Q,F.lastEffect=z),z}function qu(){return Ht().memoizedState}function da(z,F,q,Q){var ne=sn();ut.flags|=z,ne.memoizedState=Ci(1|F,{destroy:void 0},q,Q===void 0?null:Q)}function ha(z,F,q,Q){var ne=Ht();Q=Q===void 0?null:Q;var se=ne.memoizedState.inst;Tt!==null&&Q!==null&&Zo(Q,Tt.memoizedState.deps)?ne.memoizedState=Ci(F,se,q,Q):(ut.flags|=z,ne.memoizedState=Ci(1|F,se,q,Q))}function Yu(z,F){da(8390656,8,z,F)}function nl(z,F){ha(2048,8,z,F)}function Ap(z){ut.flags|=4;var F=ut.updateQueue;if(F===null)F=ca(),ut.updateQueue=F,F.events=[z];else{var q=F.events;q===null?F.events=[z]:q.push(z)}}function Xu(z){var F=Ht().memoizedState;return Ap({ref:F,nextImpl:z}),function(){if((St&2)!==0)throw Error(P(440));return F.impl.apply(void 0,arguments)}}function Wu(z,F){return ha(4,2,z,F)}function Ku(z,F){return ha(4,4,z,F)}function Qu(z,F){if(typeof F=="function"){z=z();var q=F(z);return function(){typeof q=="function"?q():F(null)}}if(F!=null)return z=z(),F.current=z,function(){F.current=null}}function Ju(z,F,q){q=q!=null?q.concat([z]):null,ha(4,4,Qu.bind(null,F,z),q)}function rl(){}function ef(z,F){var q=Ht();F=F===void 0?null:F;var Q=q.memoizedState;return F!==null&&Zo(F,Q[1])?Q[0]:(q.memoizedState=[z,F],z)}function tf(z,F){var q=Ht();F=F===void 0?null:F;var Q=q.memoizedState;if(F!==null&&Zo(F,Q[1]))return Q[0];if(Q=z(),Xr){qt(!0);try{z()}finally{qt(!1)}}return q.memoizedState=[Q,F],Q}function il(z,F,q){return q===void 0||(Jn&1073741824)!==0&&(pt&261930)===0?z.memoizedState=F:(z.memoizedState=q,z=rd(),ut.lanes|=z,wr|=z,q)}function nf(z,F,q,Q){return mn(q,F)?q:Si.current!==null?(z=il(z,q,Q),mn(z,F)||(Gt=!0),z):(Jn&42)===0||(Jn&1073741824)!==0&&(pt&261930)===0?(Gt=!0,z.memoizedState=q):(z=rd(),ut.lanes|=z,wr|=z,F)}function rf(z,F,q,Q,ne){var se=Se.p;Se.p=se!==0&&8>se?se:8;var de=ye.T,xe={};ye.T=xe,ol(z,!1,F,q);try{var $e=ne(),De=ye.S;if(De!==null&&De(xe,$e),$e!==null&&typeof $e=="object"&&typeof $e.then=="function"){var Ge=Sp($e,Q);cs(z,F,Ge,vn(z))}else cs(z,F,Q,vn(z))}catch(Xe){cs(z,F,{then:function(){},status:"rejected",reason:Xe},vn())}finally{Se.p=se,de!==null&&xe.types!==null&&(de.types=xe.types),ye.T=de}}function Rp(){}function sl(z,F,q,Q){if(z.tag!==5)throw Error(P(476));var ne=sf(z).queue;rf(z,ne,F,Te,q===null?Rp:function(){return af(z),q(Q)})}function sf(z){var F=z.memoizedState;if(F!==null)return F;F={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:Te},next:null};var q={};return F.next={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:q},next:null},z.memoizedState=F,z=z.alternate,z!==null&&(z.memoizedState=F),F}function af(z){var F=sf(z);F.next===null&&(F=z.alternate.memoizedState),cs(z,F.next.queue,{},vn())}function al(){return Qt(Ts)}function of(){return Ht().memoizedState}function lf(){return Ht().memoizedState}function $p(z){for(var F=z.return;F!==null;){switch(F.tag){case 24:case 3:var q=vn();z=_r(q);var Q=yr(F,z,q);Q!==null&&(pn(Q,F,q),is(Q,F,q)),F={cache:Io()},z.payload=F;return}F=F.return}}function Mp(z,F,q){var Q=vn();q={lane:Q,revertLane:0,gesture:null,action:q,hasEagerState:!1,eagerState:null,next:null},pa(z)?uf(F,q):(q=Eo(z,F,q,Q),q!==null&&(pn(q,z,Q),ff(q,F,Q)))}function cf(z,F,q){var Q=vn();cs(z,F,q,Q)}function cs(z,F,q,Q){var ne={lane:Q,revertLane:0,gesture:null,action:q,hasEagerState:!1,eagerState:null,next:null};if(pa(z))uf(F,ne);else{var se=z.alternate;if(z.lanes===0&&(se===null||se.lanes===0)&&(se=F.lastRenderedReducer,se!==null))try{var de=F.lastRenderedState,xe=se(de,q);if(ne.hasEagerState=!0,ne.eagerState=xe,mn(xe,de))return Ys(z,F,ne,0),Mt===null&&qs(),!1}catch{}if(q=Eo(z,F,ne,Q),q!==null)return pn(q,z,Q),ff(q,F,Q),!0}return!1}function ol(z,F,q,Q){if(Q={lane:2,revertLane:zl(),gesture:null,action:Q,hasEagerState:!1,eagerState:null,next:null},pa(z)){if(F)throw Error(P(479))}else F=Eo(z,q,Q,2),F!==null&&pn(F,z,2)}function pa(z){var F=z.alternate;return z===ut||F!==null&&F===ut}function uf(z,F){wi=oa=!0;var q=z.pending;q===null?F.next=F:(F.next=q.next,q.next=F),z.pending=F}function ff(z,F,q){if((q&4194048)!==0){var Q=F.lanes;Q&=z.pendingLanes,q|=Q,F.lanes=q,mc(z,q)}}var us={readContext:Qt,use:ua,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useLayoutEffect:Lt,useInsertionEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useSyncExternalStore:Lt,useId:Lt,useHostTransitionStatus:Lt,useFormState:Lt,useActionState:Lt,useOptimistic:Lt,useMemoCache:Lt,useCacheRefresh:Lt};us.useEffectEvent=Lt;var df={readContext:Qt,use:ua,useCallback:function(z,F){return sn().memoizedState=[z,F===void 0?null:F],z},useContext:Qt,useEffect:Yu,useImperativeHandle:function(z,F,q){q=q!=null?q.concat([z]):null,da(4194308,4,Qu.bind(null,F,z),q)},useLayoutEffect:function(z,F){return da(4194308,4,z,F)},useInsertionEffect:function(z,F){da(4,2,z,F)},useMemo:function(z,F){var q=sn();F=F===void 0?null:F;var Q=z();if(Xr){qt(!0);try{z()}finally{qt(!1)}}return q.memoizedState=[Q,F],Q},useReducer:function(z,F,q){var Q=sn();if(q!==void 0){var ne=q(F);if(Xr){qt(!0);try{q(F)}finally{qt(!1)}}}else ne=F;return Q.memoizedState=Q.baseState=ne,z={pending:null,lanes:0,dispatch:null,lastRenderedReducer:z,lastRenderedState:ne},Q.queue=z,z=z.dispatch=Mp.bind(null,ut,z),[Q.memoizedState,z]},useRef:function(z){var F=sn();return z={current:z},F.memoizedState=z},useState:function(z){z=el(z);var F=z.queue,q=cf.bind(null,ut,F);return F.dispatch=q,[z.memoizedState,q]},useDebugValue:rl,useDeferredValue:function(z,F){var q=sn();return il(q,z,F)},useTransition:function(){var z=el(!1);return z=rf.bind(null,ut,z.queue,!0,!1),sn().memoizedState=z,[!1,z]},useSyncExternalStore:function(z,F,q){var Q=ut,ne=sn();if(_t){if(q===void 0)throw Error(P(407));q=q()}else{if(q=F(),Mt===null)throw Error(P(349));(pt&127)!==0||ku(Q,F,q)}ne.memoizedState=q;var se={value:q,getSnapshot:F};return ne.queue=se,Yu(Ou.bind(null,Q,se,z),[z]),Q.flags|=2048,Ci(9,{destroy:void 0},Pu.bind(null,Q,se,q,F),null),q},useId:function(){var z=sn(),F=Mt.identifierPrefix;if(_t){var q=zn,Q=Ln;q=(Q&~(1<<32-rn(Q)-1)).toString(32)+q,F="_"+F+"R_"+q,q=la++,0<q&&(F+="H"+q.toString(32)),F+="_"}else q=wp++,F="_"+F+"r_"+q.toString(32)+"_";return z.memoizedState=F},useHostTransitionStatus:al,useFormState:Fu,useActionState:Fu,useOptimistic:function(z){var F=sn();F.memoizedState=F.baseState=z;var q={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return F.queue=q,F=ol.bind(null,ut,!0,q),q.dispatch=F,[z,F]},useMemoCache:Ko,useCacheRefresh:function(){return sn().memoizedState=$p.bind(null,ut)},useEffectEvent:function(z){var F=sn(),q={impl:z};return F.memoizedState=q,function(){if((St&2)!==0)throw Error(P(440));return q.impl.apply(void 0,arguments)}}},ll={readContext:Qt,use:ua,useCallback:ef,useContext:Qt,useEffect:nl,useImperativeHandle:Ju,useInsertionEffect:Wu,useLayoutEffect:Ku,useMemo:tf,useReducer:fa,useRef:qu,useState:function(){return fa(er)},useDebugValue:rl,useDeferredValue:function(z,F){var q=Ht();return nf(q,Tt.memoizedState,z,F)},useTransition:function(){var z=fa(er)[0],F=Ht().memoizedState;return[typeof z=="boolean"?z:ls(z),F]},useSyncExternalStore:Nu,useId:of,useHostTransitionStatus:al,useFormState:Gu,useActionState:Gu,useOptimistic:function(z,F){var q=Ht();return Du(q,Tt,z,F)},useMemoCache:Ko,useCacheRefresh:lf};ll.useEffectEvent=Xu;var hf={readContext:Qt,use:ua,useCallback:ef,useContext:Qt,useEffect:nl,useImperativeHandle:Ju,useInsertionEffect:Wu,useLayoutEffect:Ku,useMemo:tf,useReducer:Jo,useRef:qu,useState:function(){return Jo(er)},useDebugValue:rl,useDeferredValue:function(z,F){var q=Ht();return Tt===null?il(q,z,F):nf(q,Tt.memoizedState,z,F)},useTransition:function(){var z=Jo(er)[0],F=Ht().memoizedState;return[typeof z=="boolean"?z:ls(z),F]},useSyncExternalStore:Nu,useId:of,useHostTransitionStatus:al,useFormState:Zu,useActionState:Zu,useOptimistic:function(z,F){var q=Ht();return Tt!==null?Du(q,Tt,z,F):(q.baseState=z,[z,q.queue.dispatch])},useMemoCache:Ko,useCacheRefresh:lf};hf.useEffectEvent=Xu;function cl(z,F,q,Q){F=z.memoizedState,q=q(Q,F),q=q==null?F:Y({},F,q),z.memoizedState=q,z.lanes===0&&(z.updateQueue.baseState=q)}var ul={enqueueSetState:function(z,F,q){z=z._reactInternals;var Q=vn(),ne=_r(Q);ne.payload=F,q!=null&&(ne.callback=q),F=yr(z,ne,Q),F!==null&&(pn(F,z,Q),is(F,z,Q))},enqueueReplaceState:function(z,F,q){z=z._reactInternals;var Q=vn(),ne=_r(Q);ne.tag=1,ne.payload=F,q!=null&&(ne.callback=q),F=yr(z,ne,Q),F!==null&&(pn(F,z,Q),is(F,z,Q))},enqueueForceUpdate:function(z,F){z=z._reactInternals;var q=vn(),Q=_r(q);Q.tag=2,F!=null&&(Q.callback=F),F=yr(z,Q,q),F!==null&&(pn(F,z,q),is(F,z,q))}};function pf(z,F,q,Q,ne,se,de){return z=z.stateNode,typeof z.shouldComponentUpdate=="function"?z.shouldComponentUpdate(Q,se,de):F.prototype&&F.prototype.isPureReactComponent?!Wi(q,Q)||!Wi(ne,se):!0}function mf(z,F,q,Q){z=F.state,typeof F.componentWillReceiveProps=="function"&&F.componentWillReceiveProps(q,Q),typeof F.UNSAFE_componentWillReceiveProps=="function"&&F.UNSAFE_componentWillReceiveProps(q,Q),F.state!==z&&ul.enqueueReplaceState(F,F.state,null)}function Wr(z,F){var q=F;if("ref"in F){q={};for(var Q in F)Q!=="ref"&&(q[Q]=F[Q])}if(z=z.defaultProps){q===F&&(q=Y({},q));for(var ne in z)q[ne]===void 0&&(q[ne]=z[ne])}return q}function gf(z){Zs(z)}function _f(z){console.error(z)}function yf(z){Zs(z)}function ma(z,F){try{var q=z.onUncaughtError;q(F.value,{componentStack:F.stack})}catch(Q){setTimeout(function(){throw Q})}}function xf(z,F,q){try{var Q=z.onCaughtError;Q(q.value,{componentStack:q.stack,errorBoundary:F.tag===1?F.stateNode:null})}catch(ne){setTimeout(function(){throw ne})}}function fl(z,F,q){return q=_r(q),q.tag=3,q.payload={element:null},q.callback=function(){ma(z,F)},q}function bf(z){return z=_r(z),z.tag=3,z}function vf(z,F,q,Q){var ne=q.type.getDerivedStateFromError;if(typeof ne=="function"){var se=Q.value;z.payload=function(){return ne(se)},z.callback=function(){xf(F,q,Q)}}var de=q.stateNode;de!==null&&typeof de.componentDidCatch=="function"&&(z.callback=function(){xf(F,q,Q),typeof ne!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var xe=Q.stack;this.componentDidCatch(Q.value,{componentStack:xe!==null?xe:""})})}function Np(z,F,q,Q,ne){if(q.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){if(F=q.alternate,F!==null&&_i(F,q,ne,!0),q=_n.current,q!==null){switch(q.tag){case 31:case 13:return kn===null?Ra():q.alternate===null&&zt===0&&(zt=3),q.flags&=-257,q.flags|=65536,q.lanes=ne,Q===na?q.flags|=16384:(F=q.updateQueue,F===null?q.updateQueue=new Set([Q]):F.add(Q),jl(z,Q,ne)),!1;case 22:return q.flags|=65536,Q===na?q.flags|=16384:(F=q.updateQueue,F===null?(F={transitions:null,markerInstances:null,retryQueue:new Set([Q])},q.updateQueue=F):(q=F.retryQueue,q===null?F.retryQueue=new Set([Q]):q.add(Q)),jl(z,Q,ne)),!1}throw Error(P(435,q.tag))}return jl(z,Q,ne),Ra(),!1}if(_t)return F=_n.current,F!==null?((F.flags&65536)===0&&(F.flags|=256),F.flags|=65536,F.lanes=ne,Q!==Mo&&(z=Error(P(422),{cause:Q}),Ji(Rn(z,q)))):(Q!==Mo&&(F=Error(P(423),{cause:Q}),Ji(Rn(F,q))),z=z.current.alternate,z.flags|=65536,ne&=-ne,z.lanes|=ne,Q=Rn(Q,q),ne=fl(z.stateNode,Q,ne),Ho(z,ne),zt!==4&&(zt=2)),!1;var se=Error(P(520),{cause:Q});if(se=Rn(se,q),ys===null?ys=[se]:ys.push(se),zt!==4&&(zt=2),F===null)return!0;Q=Rn(Q,q),q=F;do{switch(q.tag){case 3:return q.flags|=65536,z=ne&-ne,q.lanes|=z,z=fl(q.stateNode,Q,z),Ho(q,z),!1;case 1:if(F=q.type,se=q.stateNode,(q.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(Er===null||!Er.has(se))))return q.flags|=65536,ne&=-ne,q.lanes|=ne,ne=bf(ne),vf(ne,z,q,Q),Ho(q,ne),!1}q=q.return}while(q!==null);return!1}var dl=Error(P(461)),Gt=!1;function Jt(z,F,q,Q){F.child=z===null?Eu(F,null,q,Q):Yr(F,z.child,q,Q)}function Sf(z,F,q,Q,ne){q=q.render;var se=F.ref;if("ref"in Q){var de={};for(var xe in Q)xe!=="ref"&&(de[xe]=Q[xe])}else de=Q;return Gr(F),Q=qo(z,F,q,de,se,ne),xe=Yo(),z!==null&&!Gt?(Xo(z,F,ne),tr(z,F,ne)):(_t&&xe&&Ro(F),F.flags|=1,Jt(z,F,Q,ne),F.child)}function wf(z,F,q,Q,ne){if(z===null){var se=q.type;return typeof se=="function"&&!Co(se)&&se.defaultProps===void 0&&q.compare===null?(F.tag=15,F.type=se,Ef(z,F,se,Q,ne)):(z=Ws(q.type,null,Q,F,F.mode,ne),z.ref=F.ref,z.return=F,F.child=z)}if(se=z.child,!bl(z,ne)){var de=se.memoizedProps;if(q=q.compare,q=q!==null?q:Wi,q(de,Q)&&z.ref===F.ref)return tr(z,F,ne)}return F.flags|=1,z=qn(se,Q),z.ref=F.ref,z.return=F,F.child=z}function Ef(z,F,q,Q,ne){if(z!==null){var se=z.memoizedProps;if(Wi(se,Q)&&z.ref===F.ref)if(Gt=!1,F.pendingProps=Q=se,bl(z,ne))(z.flags&131072)!==0&&(Gt=!0);else return F.lanes=z.lanes,tr(z,F,ne)}return hl(z,F,q,Q,ne)}function Cf(z,F,q,Q){var ne=Q.children,se=z!==null?z.memoizedState:null;if(z===null&&F.stateNode===null&&(F.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),Q.mode==="hidden"){if((F.flags&128)!==0){if(se=se!==null?se.baseLanes|q:q,z!==null){for(Q=F.child=z.child,ne=0;Q!==null;)ne=ne|Q.lanes|Q.childLanes,Q=Q.sibling;Q=ne&~se}else Q=0,F.child=null;return Tf(z,F,se,q,Q)}if((q&536870912)!==0)F.memoizedState={baseLanes:0,cachePool:null},z!==null&&ea(F,se!==null?se.cachePool:null),se!==null?Au(F,se):Fo(),Ru(F);else return Q=F.lanes=536870912,Tf(z,F,se!==null?se.baseLanes|q:q,q,Q)}else se!==null?(ea(F,se.cachePool),Au(F,se),br(),F.memoizedState=null):(z!==null&&ea(F,null),Fo(),br());return Jt(z,F,ne,q),F.child}function fs(z,F){return z!==null&&z.tag===22||F.stateNode!==null||(F.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),F.sibling}function Tf(z,F,q,Q,ne){var se=Do();return se=se===null?null:{parent:Ut._currentValue,pool:se},F.memoizedState={baseLanes:q,cachePool:se},z!==null&&ea(F,null),Fo(),Ru(F),z!==null&&_i(z,F,Q,!0),F.childLanes=ne,null}function ga(z,F){return F=xa({mode:F.mode,children:F.children},z.mode),F.ref=z.ref,z.child=F,F.return=z,F}function Af(z,F,q){return Yr(F,z.child,null,q),z=ga(F,F.pendingProps),z.flags|=2,yn(F),F.memoizedState=null,z}function kp(z,F,q){var Q=F.pendingProps,ne=(F.flags&128)!==0;if(F.flags&=-129,z===null){if(_t){if(Q.mode==="hidden")return z=ga(F,Q),F.lanes=536870912,fs(null,z);if(Vo(F),(z=Ot)?(z=Bd(z,Nn),z=z!==null&&z.data==="&"?z:null,z!==null&&(F.memoizedState={dehydrated:z,treeContext:dr!==null?{id:Ln,overflow:zn}:null,retryLane:536870912,hydrationErrors:null},q=cu(z),q.return=F,F.child=q,Kt=F,Ot=null)):z=null,z===null)throw pr(F);return F.lanes=536870912,null}return ga(F,Q)}var se=z.memoizedState;if(se!==null){var de=se.dehydrated;if(Vo(F),ne)if(F.flags&256)F.flags&=-257,F=Af(z,F,q);else if(F.memoizedState!==null)F.child=z.child,F.flags|=128,F=null;else throw Error(P(558));else if(Gt||_i(z,F,q,!1),ne=(q&z.childLanes)!==0,Gt||ne){if(Q=Mt,Q!==null&&(de=gc(Q,q),de!==0&&de!==se.retryLane))throw se.retryLane=de,Br(z,de),pn(Q,z,de),dl;Ra(),F=Af(z,F,q)}else z=se.treeContext,Ot=Pn(de.nextSibling),Kt=F,_t=!0,hr=null,Nn=!1,z!==null&&du(F,z),F=ga(F,Q),F.flags|=4096;return F}return z=qn(z.child,{mode:Q.mode,children:Q.children}),z.ref=F.ref,F.child=z,z.return=F,z}function ya(z,F){var q=F.ref;if(q===null)z!==null&&z.ref!==null&&(F.flags|=4194816);else{if(typeof q!="function"&&typeof q!="object")throw Error(P(284));(z===null||z.ref!==q)&&(F.flags|=4194816)}}function hl(z,F,q,Q,ne){return Gr(F),q=qo(z,F,q,Q,void 0,ne),Q=Yo(),z!==null&&!Gt?(Xo(z,F,ne),tr(z,F,ne)):(_t&&Q&&Ro(F),F.flags|=1,Jt(z,F,q,ne),F.child)}function Rf(z,F,q,Q,ne,se){return Gr(F),F.updateQueue=null,q=Mu(F,Q,q,ne),$u(z),Q=Yo(),z!==null&&!Gt?(Xo(z,F,se),tr(z,F,se)):(_t&&Q&&Ro(F),F.flags|=1,Jt(z,F,q,se),F.child)}function $f(z,F,q,Q,ne){if(Gr(F),F.stateNode===null){var se=di,de=q.contextType;typeof de=="object"&&de!==null&&(se=Qt(de)),se=new q(Q,se),F.memoizedState=se.state!==null&&se.state!==void 0?se.state:null,se.updater=ul,F.stateNode=se,se._reactInternals=F,se=F.stateNode,se.props=Q,se.state=F.memoizedState,se.refs={},zo(F),de=q.contextType,se.context=typeof de=="object"&&de!==null?Qt(de):di,se.state=F.memoizedState,de=q.getDerivedStateFromProps,typeof de=="function"&&(cl(F,q,de,Q),se.state=F.memoizedState),typeof q.getDerivedStateFromProps=="function"||typeof se.getSnapshotBeforeUpdate=="function"||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(de=se.state,typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount(),de!==se.state&&ul.enqueueReplaceState(se,se.state,null),as(F,Q,se,ne),ss(),se.state=F.memoizedState),typeof se.componentDidMount=="function"&&(F.flags|=4194308),Q=!0}else if(z===null){se=F.stateNode;var xe=F.memoizedProps,$e=Wr(q,xe);se.props=$e;var De=se.context,Ge=q.contextType;de=di,typeof Ge=="object"&&Ge!==null&&(de=Qt(Ge));var Xe=q.getDerivedStateFromProps;Ge=typeof Xe=="function"||typeof se.getSnapshotBeforeUpdate=="function",xe=F.pendingProps!==xe,Ge||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(xe||De!==de)&&mf(F,se,Q,de),gr=!1;var Le=F.memoizedState;se.state=Le,as(F,Q,se,ne),ss(),De=F.memoizedState,xe||Le!==De||gr?(typeof Xe=="function"&&(cl(F,q,Xe,Q),De=F.memoizedState),($e=gr||pf(F,q,$e,Q,Le,De,de))?(Ge||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(F.flags|=4194308)):(typeof se.componentDidMount=="function"&&(F.flags|=4194308),F.memoizedProps=Q,F.memoizedState=De),se.props=Q,se.state=De,se.context=de,Q=$e):(typeof se.componentDidMount=="function"&&(F.flags|=4194308),Q=!1)}else{se=F.stateNode,Bo(z,F),de=F.memoizedProps,Ge=Wr(q,de),se.props=Ge,Xe=F.pendingProps,Le=se.context,De=q.contextType,$e=di,typeof De=="object"&&De!==null&&($e=Qt(De)),xe=q.getDerivedStateFromProps,(De=typeof xe=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(de!==Xe||Le!==$e)&&mf(F,se,Q,$e),gr=!1,Le=F.memoizedState,se.state=Le,as(F,Q,se,ne),ss();var Ue=F.memoizedState;de!==Xe||Le!==Ue||gr||z!==null&&z.dependencies!==null&&Qs(z.dependencies)?(typeof xe=="function"&&(cl(F,q,xe,Q),Ue=F.memoizedState),(Ge=gr||pf(F,q,Ge,Q,Le,Ue,$e)||z!==null&&z.dependencies!==null&&Qs(z.dependencies))?(De||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(Q,Ue,$e),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(Q,Ue,$e)),typeof se.componentDidUpdate=="function"&&(F.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(F.flags|=1024)):(typeof se.componentDidUpdate!="function"||de===z.memoizedProps&&Le===z.memoizedState||(F.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||de===z.memoizedProps&&Le===z.memoizedState||(F.flags|=1024),F.memoizedProps=Q,F.memoizedState=Ue),se.props=Q,se.state=Ue,se.context=$e,Q=Ge):(typeof se.componentDidUpdate!="function"||de===z.memoizedProps&&Le===z.memoizedState||(F.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||de===z.memoizedProps&&Le===z.memoizedState||(F.flags|=1024),Q=!1)}return se=Q,ya(z,F),Q=(F.flags&128)!==0,se||Q?(se=F.stateNode,q=Q&&typeof q.getDerivedStateFromError!="function"?null:se.render(),F.flags|=1,z!==null&&Q?(F.child=Yr(F,z.child,null,ne),F.child=Yr(F,null,q,ne)):Jt(z,F,q,ne),F.memoizedState=se.state,z=F.child):z=tr(z,F,ne),z}function Mf(z,F,q,Q){return Ur(),F.flags|=256,Jt(z,F,q,Q),F.child}var pl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ml(z){return{baseLanes:z,cachePool:yu()}}function gl(z,F,q){return z=z!==null?z.childLanes&~q:0,F&&(z|=bn),z}function Nf(z,F,q){var Q=F.pendingProps,ne=!1,se=(F.flags&128)!==0,de;if((de=se)||(de=z!==null&&z.memoizedState===null?!1:(Bt.current&2)!==0),de&&(ne=!0,F.flags&=-129),de=(F.flags&32)!==0,F.flags&=-33,z===null){if(_t){if(ne?xr(F):br(),(z=Ot)?(z=Bd(z,Nn),z=z!==null&&z.data!=="&"?z:null,z!==null&&(F.memoizedState={dehydrated:z,treeContext:dr!==null?{id:Ln,overflow:zn}:null,retryLane:536870912,hydrationErrors:null},q=cu(z),q.return=F,F.child=q,Kt=F,Ot=null)):z=null,z===null)throw pr(F);return Ql(z)?F.lanes=32:F.lanes=536870912,null}var xe=Q.children;return Q=Q.fallback,ne?(br(),ne=F.mode,xe=xa({mode:"hidden",children:xe},ne),Q=Hr(Q,ne,q,null),xe.return=F,Q.return=F,xe.sibling=Q,F.child=xe,Q=F.child,Q.memoizedState=ml(q),Q.childLanes=gl(z,de,q),F.memoizedState=pl,fs(null,Q)):(xr(F),_l(F,xe))}var $e=z.memoizedState;if($e!==null&&(xe=$e.dehydrated,xe!==null)){if(se)F.flags&256?(xr(F),F.flags&=-257,F=yl(z,F,q)):F.memoizedState!==null?(br(),F.child=z.child,F.flags|=128,F=null):(br(),xe=Q.fallback,ne=F.mode,Q=xa({mode:"visible",children:Q.children},ne),xe=Hr(xe,ne,q,null),xe.flags|=2,Q.return=F,xe.return=F,Q.sibling=xe,F.child=Q,Yr(F,z.child,null,q),Q=F.child,Q.memoizedState=ml(q),Q.childLanes=gl(z,de,q),F.memoizedState=pl,F=fs(null,Q));else if(xr(F),Ql(xe)){if(de=xe.nextSibling&&xe.nextSibling.dataset,de)var De=de.dgst;de=De,Q=Error(P(419)),Q.stack="",Q.digest=de,Ji({value:Q,source:null,stack:null}),F=yl(z,F,q)}else if(Gt||_i(z,F,q,!1),de=(q&z.childLanes)!==0,Gt||de){if(de=Mt,de!==null&&(Q=gc(de,q),Q!==0&&Q!==$e.retryLane))throw $e.retryLane=Q,Br(z,Q),pn(de,z,Q),dl;Kl(xe)||Ra(),F=yl(z,F,q)}else Kl(xe)?(F.flags|=192,F.child=z.child,F=null):(z=$e.treeContext,Ot=Pn(xe.nextSibling),Kt=F,_t=!0,hr=null,Nn=!1,z!==null&&du(F,z),F=_l(F,Q.children),F.flags|=4096);return F}return ne?(br(),xe=Q.fallback,ne=F.mode,$e=z.child,De=$e.sibling,Q=qn($e,{mode:"hidden",children:Q.children}),Q.subtreeFlags=$e.subtreeFlags&65011712,De!==null?xe=qn(De,xe):(xe=Hr(xe,ne,q,null),xe.flags|=2),xe.return=F,Q.return=F,Q.sibling=xe,F.child=Q,fs(null,Q),Q=F.child,xe=z.child.memoizedState,xe===null?xe=ml(q):(ne=xe.cachePool,ne!==null?($e=Ut._currentValue,ne=ne.parent!==$e?{parent:$e,pool:$e}:ne):ne=yu(),xe={baseLanes:xe.baseLanes|q,cachePool:ne}),Q.memoizedState=xe,Q.childLanes=gl(z,de,q),F.memoizedState=pl,fs(z.child,Q)):(xr(F),q=z.child,z=q.sibling,q=qn(q,{mode:"visible",children:Q.children}),q.return=F,q.sibling=null,z!==null&&(de=F.deletions,de===null?(F.deletions=[z],F.flags|=16):de.push(z)),F.child=q,F.memoizedState=null,q)}function _l(z,F){return F=xa({mode:"visible",children:F},z.mode),F.return=z,z.child=F}function xa(z,F){return z=gn(22,z,null,F),z.lanes=0,z}function yl(z,F,q){return Yr(F,z.child,null,q),z=_l(F,F.pendingProps.children),z.flags|=2,F.memoizedState=null,z}function kf(z,F,q){z.lanes|=F;var Q=z.alternate;Q!==null&&(Q.lanes|=F),Po(z.return,F,q)}function xl(z,F,q,Q,ne,se){var de=z.memoizedState;de===null?z.memoizedState={isBackwards:F,rendering:null,renderingStartTime:0,last:Q,tail:q,tailMode:ne,treeForkCount:se}:(de.isBackwards=F,de.rendering=null,de.renderingStartTime=0,de.last=Q,de.tail=q,de.tailMode=ne,de.treeForkCount=se)}function Pf(z,F,q){var Q=F.pendingProps,ne=Q.revealOrder,se=Q.tail;Q=Q.children;var de=Bt.current,xe=(de&2)!==0;if(xe?(de=de&1|2,F.flags|=128):de&=1,Me(Bt,de),Jt(z,F,Q,q),Q=_t?Qi:0,!xe&&z!==null&&(z.flags&128)!==0)e:for(z=F.child;z!==null;){if(z.tag===13)z.memoizedState!==null&&kf(z,q,F);else if(z.tag===19)kf(z,q,F);else if(z.child!==null){z.child.return=z,z=z.child;continue}if(z===F)break e;for(;z.sibling===null;){if(z.return===null||z.return===F)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}switch(ne){case"forwards":for(q=F.child,ne=null;q!==null;)z=q.alternate,z!==null&&aa(z)===null&&(ne=q),q=q.sibling;q=ne,q===null?(ne=F.child,F.child=null):(ne=q.sibling,q.sibling=null),xl(F,!1,ne,q,se,Q);break;case"backwards":case"unstable_legacy-backwards":for(q=null,ne=F.child,F.child=null;ne!==null;){if(z=ne.alternate,z!==null&&aa(z)===null){F.child=ne;break}z=ne.sibling,ne.sibling=q,q=ne,ne=z}xl(F,!0,q,null,se,Q);break;case"together":xl(F,!1,null,null,void 0,Q);break;default:F.memoizedState=null}return F.child}function tr(z,F,q){if(z!==null&&(F.dependencies=z.dependencies),wr|=F.lanes,(q&F.childLanes)===0)if(z!==null){if(_i(z,F,q,!1),(q&F.childLanes)===0)return null}else return null;if(z!==null&&F.child!==z.child)throw Error(P(153));if(F.child!==null){for(z=F.child,q=qn(z,z.pendingProps),F.child=q,q.return=F;z.sibling!==null;)z=z.sibling,q=q.sibling=qn(z,z.pendingProps),q.return=F;q.sibling=null}return F.child}function bl(z,F){return(z.lanes&F)!==0?!0:(z=z.dependencies,!!(z!==null&&Qs(z)))}function Pp(z,F,q){switch(F.tag){case 3:Ve(F,F.stateNode.containerInfo),mr(F,Ut,z.memoizedState.cache),Ur();break;case 27:case 5:Fe(F);break;case 4:Ve(F,F.stateNode.containerInfo);break;case 10:mr(F,F.type,F.memoizedProps.value);break;case 31:if(F.memoizedState!==null)return F.flags|=128,Vo(F),null;break;case 13:var Q=F.memoizedState;if(Q!==null)return Q.dehydrated!==null?(xr(F),F.flags|=128,null):(q&F.child.childLanes)!==0?Nf(z,F,q):(xr(F),z=tr(z,F,q),z!==null?z.sibling:null);xr(F);break;case 19:var ne=(z.flags&128)!==0;if(Q=(q&F.childLanes)!==0,Q||(_i(z,F,q,!1),Q=(q&F.childLanes)!==0),ne){if(Q)return Pf(z,F,q);F.flags|=128}if(ne=F.memoizedState,ne!==null&&(ne.rendering=null,ne.tail=null,ne.lastEffect=null),Me(Bt,Bt.current),Q)break;return null;case 22:return F.lanes=0,Cf(z,F,q,F.pendingProps);case 24:mr(F,Ut,z.memoizedState.cache)}return tr(z,F,q)}function Of(z,F,q){if(z!==null)if(z.memoizedProps!==F.pendingProps)Gt=!0;else{if(!bl(z,q)&&(F.flags&128)===0)return Gt=!1,Pp(z,F,q);Gt=(z.flags&131072)!==0}else Gt=!1,_t&&(F.flags&1048576)!==0&&fu(F,Qi,F.index);switch(F.lanes=0,F.tag){case 16:e:{var Q=F.pendingProps;if(z=Zr(F.elementType),F.type=z,typeof z=="function")Co(z)?(Q=Wr(z,Q),F.tag=1,F=$f(null,F,z,Q,q)):(F.tag=0,F=hl(null,F,z,Q,q));else{if(z!=null){var ne=z.$$typeof;if(ne===le){F.tag=11,F=Sf(null,F,z,Q,q);break e}else if(ne===fe){F.tag=14,F=wf(null,F,z,Q,q);break e}}throw F=Ce(z)||z,Error(P(306,F,""))}}return F;case 0:return hl(z,F,F.type,F.pendingProps,q);case 1:return Q=F.type,ne=Wr(Q,F.pendingProps),$f(z,F,Q,ne,q);case 3:e:{if(Ve(F,F.stateNode.containerInfo),z===null)throw Error(P(387));Q=F.pendingProps;var se=F.memoizedState;ne=se.element,Bo(z,F),as(F,Q,null,q);var de=F.memoizedState;if(Q=de.cache,mr(F,Ut,Q),Q!==se.cache&&Oo(F,[Ut],q,!0),ss(),Q=de.element,se.isDehydrated)if(se={element:Q,isDehydrated:!1,cache:de.cache},F.updateQueue.baseState=se,F.memoizedState=se,F.flags&256){F=Mf(z,F,Q,q);break e}else if(Q!==ne){ne=Rn(Error(P(424)),F),Ji(ne),F=Mf(z,F,Q,q);break e}else for(z=F.stateNode.containerInfo,z.nodeType===9?z=z.body:z=z.nodeName==="HTML"?z.ownerDocument.body:z,Ot=Pn(z.firstChild),Kt=F,_t=!0,hr=null,Nn=!0,q=Eu(F,null,Q,q),F.child=q;q;)q.flags=q.flags&-3|4096,q=q.sibling;else{if(Ur(),Q===ne){F=tr(z,F,q);break e}Jt(z,F,Q,q)}F=F.child}return F;case 26:return ya(z,F),z===null?(q=Zd(F.type,null,F.pendingProps,null))?F.memoizedState=q:_t||(q=F.type,z=F.pendingProps,Q=ja(We.current).createElement(q),Q[Wt]=F,Q[on]=z,en(Q,q,z),Yt(Q),F.stateNode=Q):F.memoizedState=Zd(F.type,z.memoizedProps,F.pendingProps,z.memoizedState),null;case 27:return Fe(F),z===null&&_t&&(Q=F.stateNode=Fd(F.type,F.pendingProps,We.current),Kt=F,Nn=!0,ne=Ot,Rr(F.type)?(Jl=ne,Ot=Pn(Q.firstChild)):Ot=ne),Jt(z,F,F.pendingProps.children,q),ya(z,F),z===null&&(F.flags|=4194304),F.child;case 5:return z===null&&_t&&((ne=Q=Ot)&&(Q=cm(Q,F.type,F.pendingProps,Nn),Q!==null?(F.stateNode=Q,Kt=F,Ot=Pn(Q.firstChild),Nn=!1,ne=!0):ne=!1),ne||pr(F)),Fe(F),ne=F.type,se=F.pendingProps,de=z!==null?z.memoizedProps:null,Q=se.children,Yl(ne,se)?Q=null:de!==null&&Yl(ne,de)&&(F.flags|=32),F.memoizedState!==null&&(ne=qo(z,F,Ep,null,null,q),Ts._currentValue=ne),ya(z,F),Jt(z,F,Q,q),F.child;case 6:return z===null&&_t&&((z=q=Ot)&&(q=um(q,F.pendingProps,Nn),q!==null?(F.stateNode=q,Kt=F,Ot=null,z=!0):z=!1),z||pr(F)),null;case 13:return Nf(z,F,q);case 4:return Ve(F,F.stateNode.containerInfo),Q=F.pendingProps,z===null?F.child=Yr(F,null,Q,q):Jt(z,F,Q,q),F.child;case 11:return Sf(z,F,F.type,F.pendingProps,q);case 7:return Jt(z,F,F.pendingProps,q),F.child;case 8:return Jt(z,F,F.pendingProps.children,q),F.child;case 12:return Jt(z,F,F.pendingProps.children,q),F.child;case 10:return Q=F.pendingProps,mr(F,F.type,Q.value),Jt(z,F,Q.children,q),F.child;case 9:return ne=F.type._context,Q=F.pendingProps.children,Gr(F),ne=Qt(ne),Q=Q(ne),F.flags|=1,Jt(z,F,Q,q),F.child;case 14:return wf(z,F,F.type,F.pendingProps,q);case 15:return Ef(z,F,F.type,F.pendingProps,q);case 19:return Pf(z,F,q);case 31:return kp(z,F,q);case 22:return Cf(z,F,q,F.pendingProps);case 24:return Gr(F),Q=Qt(Ut),z===null?(ne=Do(),ne===null&&(ne=Mt,se=Io(),ne.pooledCache=se,se.refCount++,se!==null&&(ne.pooledCacheLanes|=q),ne=se),F.memoizedState={parent:Q,cache:ne},zo(F),mr(F,Ut,ne)):((z.lanes&q)!==0&&(Bo(z,F),as(F,null,null,q),ss()),ne=z.memoizedState,se=F.memoizedState,ne.parent!==Q?(ne={parent:Q,cache:Q},F.memoizedState=ne,F.lanes===0&&(F.memoizedState=F.updateQueue.baseState=ne),mr(F,Ut,Q)):(Q=se.cache,mr(F,Ut,Q),Q!==ne.cache&&Oo(F,[Ut],q,!0))),Jt(z,F,F.pendingProps.children,q),F.child;case 29:throw F.pendingProps}throw Error(P(156,F.tag))}function nr(z){z.flags|=4}function vl(z,F,q,Q,ne){if((F=(z.mode&32)!==0)&&(F=!1),F){if(z.flags|=16777216,(ne&335544128)===ne)if(z.stateNode.complete)z.flags|=8192;else if(ld())z.flags|=8192;else throw qr=na,Lo}else z.flags&=-16777217}function If(z,F){if(F.type!=="stylesheet"||(F.state.loading&4)!==0)z.flags&=-16777217;else if(z.flags|=16777216,!Kd(F))if(ld())z.flags|=8192;else throw qr=na,Lo}function ba(z,F){F!==null&&(z.flags|=4),z.flags&16384&&(F=z.tag!==22?hc():536870912,z.lanes|=F,$i|=F)}function ds(z,F){if(!_t)switch(z.tailMode){case"hidden":F=z.tail;for(var q=null;F!==null;)F.alternate!==null&&(q=F),F=F.sibling;q===null?z.tail=null:q.sibling=null;break;case"collapsed":q=z.tail;for(var Q=null;q!==null;)q.alternate!==null&&(Q=q),q=q.sibling;Q===null?F||z.tail===null?z.tail=null:z.tail.sibling=null:Q.sibling=null}}function It(z){var F=z.alternate!==null&&z.alternate.child===z.child,q=0,Q=0;if(F)for(var ne=z.child;ne!==null;)q|=ne.lanes|ne.childLanes,Q|=ne.subtreeFlags&65011712,Q|=ne.flags&65011712,ne.return=z,ne=ne.sibling;else for(ne=z.child;ne!==null;)q|=ne.lanes|ne.childLanes,Q|=ne.subtreeFlags,Q|=ne.flags,ne.return=z,ne=ne.sibling;return z.subtreeFlags|=Q,z.childLanes=q,F}function Op(z,F,q){var Q=F.pendingProps;switch($o(F),F.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return It(F),null;case 1:return It(F),null;case 3:return q=F.stateNode,Q=null,z!==null&&(Q=z.memoizedState.cache),F.memoizedState.cache!==Q&&(F.flags|=2048),Qn(Ut),ke(),q.pendingContext&&(q.context=q.pendingContext,q.pendingContext=null),(z===null||z.child===null)&&(gi(F)?nr(F):z===null||z.memoizedState.isDehydrated&&(F.flags&256)===0||(F.flags|=1024,No())),It(F),null;case 26:var ne=F.type,se=F.memoizedState;return z===null?(nr(F),se!==null?(It(F),If(F,se)):(It(F),vl(F,ne,null,Q,q))):se?se!==z.memoizedState?(nr(F),It(F),If(F,se)):(It(F),F.flags&=-16777217):(z=z.memoizedProps,z!==Q&&nr(F),It(F),vl(F,ne,z,Q,q)),null;case 27:if(He(F),q=We.current,ne=F.type,z!==null&&F.stateNode!=null)z.memoizedProps!==Q&&nr(F);else{if(!Q){if(F.stateNode===null)throw Error(P(166));return It(F),null}z=ze.current,gi(F)?hu(F):(z=Fd(ne,Q,q),F.stateNode=z,nr(F))}return It(F),null;case 5:if(He(F),ne=F.type,z!==null&&F.stateNode!=null)z.memoizedProps!==Q&&nr(F);else{if(!Q){if(F.stateNode===null)throw Error(P(166));return It(F),null}if(se=ze.current,gi(F))hu(F);else{var de=ja(We.current);switch(se){case 1:se=de.createElementNS("http://www.w3.org/2000/svg",ne);break;case 2:se=de.createElementNS("http://www.w3.org/1998/Math/MathML",ne);break;default:switch(ne){case"svg":se=de.createElementNS("http://www.w3.org/2000/svg",ne);break;case"math":se=de.createElementNS("http://www.w3.org/1998/Math/MathML",ne);break;case"script":se=de.createElement("div"),se.innerHTML="<script><\/script>",se=se.removeChild(se.firstChild);break;case"select":se=typeof Q.is=="string"?de.createElement("select",{is:Q.is}):de.createElement("select"),Q.multiple?se.multiple=!0:Q.size&&(se.size=Q.size);break;default:se=typeof Q.is=="string"?de.createElement(ne,{is:Q.is}):de.createElement(ne)}}se[Wt]=F,se[on]=Q;e:for(de=F.child;de!==null;){if(de.tag===5||de.tag===6)se.appendChild(de.stateNode);else if(de.tag!==4&&de.tag!==27&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===F)break e;for(;de.sibling===null;){if(de.return===null||de.return===F)break e;de=de.return}de.sibling.return=de.return,de=de.sibling}F.stateNode=se;e:switch(en(se,ne,Q),ne){case"button":case"input":case"select":case"textarea":Q=!!Q.autoFocus;break e;case"img":Q=!0;break e;default:Q=!1}Q&&nr(F)}}return It(F),vl(F,F.type,z===null?null:z.memoizedProps,F.pendingProps,q),null;case 6:if(z&&F.stateNode!=null)z.memoizedProps!==Q&&nr(F);else{if(typeof Q!="string"&&F.stateNode===null)throw Error(P(166));if(z=We.current,gi(F)){if(z=F.stateNode,q=F.memoizedProps,Q=null,ne=Kt,ne!==null)switch(ne.tag){case 27:case 5:Q=ne.memoizedProps}z[Wt]=F,z=!!(z.nodeValue===q||Q!==null&&Q.suppressHydrationWarning===!0||kd(z.nodeValue,q)),z||pr(F,!0)}else z=ja(z).createTextNode(Q),z[Wt]=F,F.stateNode=z}return It(F),null;case 31:if(q=F.memoizedState,z===null||z.memoizedState!==null){if(Q=gi(F),q!==null){if(z===null){if(!Q)throw Error(P(318));if(z=F.memoizedState,z=z!==null?z.dehydrated:null,!z)throw Error(P(557));z[Wt]=F}else Ur(),(F.flags&128)===0&&(F.memoizedState=null),F.flags|=4;It(F),z=!1}else q=No(),z!==null&&z.memoizedState!==null&&(z.memoizedState.hydrationErrors=q),z=!0;if(!z)return F.flags&256?(yn(F),F):(yn(F),null);if((F.flags&128)!==0)throw Error(P(558))}return It(F),null;case 13:if(Q=F.memoizedState,z===null||z.memoizedState!==null&&z.memoizedState.dehydrated!==null){if(ne=gi(F),Q!==null&&Q.dehydrated!==null){if(z===null){if(!ne)throw Error(P(318));if(ne=F.memoizedState,ne=ne!==null?ne.dehydrated:null,!ne)throw Error(P(317));ne[Wt]=F}else Ur(),(F.flags&128)===0&&(F.memoizedState=null),F.flags|=4;It(F),ne=!1}else ne=No(),z!==null&&z.memoizedState!==null&&(z.memoizedState.hydrationErrors=ne),ne=!0;if(!ne)return F.flags&256?(yn(F),F):(yn(F),null)}return yn(F),(F.flags&128)!==0?(F.lanes=q,F):(q=Q!==null,z=z!==null&&z.memoizedState!==null,q&&(Q=F.child,ne=null,Q.alternate!==null&&Q.alternate.memoizedState!==null&&Q.alternate.memoizedState.cachePool!==null&&(ne=Q.alternate.memoizedState.cachePool.pool),se=null,Q.memoizedState!==null&&Q.memoizedState.cachePool!==null&&(se=Q.memoizedState.cachePool.pool),se!==ne&&(Q.flags|=2048)),q!==z&&q&&(F.child.flags|=8192),ba(F,F.updateQueue),It(F),null);case 4:return ke(),z===null&&Fl(F.stateNode.containerInfo),It(F),null;case 10:return Qn(F.type),It(F),null;case 19:if(Re(Bt),Q=F.memoizedState,Q===null)return It(F),null;if(ne=(F.flags&128)!==0,se=Q.rendering,se===null)if(ne)ds(Q,!1);else{if(zt!==0||z!==null&&(z.flags&128)!==0)for(z=F.child;z!==null;){if(se=aa(z),se!==null){for(F.flags|=128,ds(Q,!1),z=se.updateQueue,F.updateQueue=z,ba(F,z),F.subtreeFlags=0,z=q,q=F.child;q!==null;)lu(q,z),q=q.sibling;return Me(Bt,Bt.current&1|2),_t&&Wn(F,Q.treeForkCount),F.child}z=z.sibling}Q.tail!==null&&st()>Ca&&(F.flags|=128,ne=!0,ds(Q,!1),F.lanes=4194304)}else{if(!ne)if(z=aa(se),z!==null){if(F.flags|=128,ne=!0,z=z.updateQueue,F.updateQueue=z,ba(F,z),ds(Q,!0),Q.tail===null&&Q.tailMode==="hidden"&&!se.alternate&&!_t)return It(F),null}else 2*st()-Q.renderingStartTime>Ca&&q!==536870912&&(F.flags|=128,ne=!0,ds(Q,!1),F.lanes=4194304);Q.isBackwards?(se.sibling=F.child,F.child=se):(z=Q.last,z!==null?z.sibling=se:F.child=se,Q.last=se)}return Q.tail!==null?(z=Q.tail,Q.rendering=z,Q.tail=z.sibling,Q.renderingStartTime=st(),z.sibling=null,q=Bt.current,Me(Bt,ne?q&1|2:q&1),_t&&Wn(F,Q.treeForkCount),z):(It(F),null);case 22:case 23:return yn(F),Go(),Q=F.memoizedState!==null,z!==null?z.memoizedState!==null!==Q&&(F.flags|=8192):Q&&(F.flags|=8192),Q?(q&536870912)!==0&&(F.flags&128)===0&&(It(F),F.subtreeFlags&6&&(F.flags|=8192)):It(F),q=F.updateQueue,q!==null&&ba(F,q.retryQueue),q=null,z!==null&&z.memoizedState!==null&&z.memoizedState.cachePool!==null&&(q=z.memoizedState.cachePool.pool),Q=null,F.memoizedState!==null&&F.memoizedState.cachePool!==null&&(Q=F.memoizedState.cachePool.pool),Q!==q&&(F.flags|=2048),z!==null&&Re(Vr),null;case 24:return q=null,z!==null&&(q=z.memoizedState.cache),F.memoizedState.cache!==q&&(F.flags|=2048),Qn(Ut),It(F),null;case 25:return null;case 30:return null}throw Error(P(156,F.tag))}function Ip(z,F){switch($o(F),F.tag){case 1:return z=F.flags,z&65536?(F.flags=z&-65537|128,F):null;case 3:return Qn(Ut),ke(),z=F.flags,(z&65536)!==0&&(z&128)===0?(F.flags=z&-65537|128,F):null;case 26:case 27:case 5:return He(F),null;case 31:if(F.memoizedState!==null){if(yn(F),F.alternate===null)throw Error(P(340));Ur()}return z=F.flags,z&65536?(F.flags=z&-65537|128,F):null;case 13:if(yn(F),z=F.memoizedState,z!==null&&z.dehydrated!==null){if(F.alternate===null)throw Error(P(340));Ur()}return z=F.flags,z&65536?(F.flags=z&-65537|128,F):null;case 19:return Re(Bt),null;case 4:return ke(),null;case 10:return Qn(F.type),null;case 22:case 23:return yn(F),Go(),z!==null&&Re(Vr),z=F.flags,z&65536?(F.flags=z&-65537|128,F):null;case 24:return Qn(Ut),null;case 25:return null;default:return null}}function jf(z,F){switch($o(F),F.tag){case 3:Qn(Ut),ke();break;case 26:case 27:case 5:He(F);break;case 4:ke();break;case 31:F.memoizedState!==null&&yn(F);break;case 13:yn(F);break;case 19:Re(Bt);break;case 10:Qn(F.type);break;case 22:case 23:yn(F),Go(),z!==null&&Re(Vr);break;case 24:Qn(Ut)}}function hs(z,F){try{var q=F.updateQueue,Q=q!==null?q.lastEffect:null;if(Q!==null){var ne=Q.next;q=ne;do{if((q.tag&z)===z){Q=void 0;var se=q.create,de=q.inst;Q=se(),de.destroy=Q}q=q.next}while(q!==ne)}}catch(xe){Ct(F,F.return,xe)}}function vr(z,F,q){try{var Q=F.updateQueue,ne=Q!==null?Q.lastEffect:null;if(ne!==null){var se=ne.next;Q=se;do{if((Q.tag&z)===z){var de=Q.inst,xe=de.destroy;if(xe!==void 0){de.destroy=void 0,ne=F;var $e=q,De=xe;try{De()}catch(Ge){Ct(ne,$e,Ge)}}}Q=Q.next}while(Q!==se)}}catch(Ge){Ct(F,F.return,Ge)}}function Df(z){var F=z.updateQueue;if(F!==null){var q=z.stateNode;try{Tu(F,q)}catch(Q){Ct(z,z.return,Q)}}}function Lf(z,F,q){q.props=Wr(z.type,z.memoizedProps),q.state=z.memoizedState;try{q.componentWillUnmount()}catch(Q){Ct(z,F,Q)}}function ps(z,F){try{var q=z.ref;if(q!==null){switch(z.tag){case 26:case 27:case 5:var Q=z.stateNode;break;case 30:Q=z.stateNode;break;default:Q=z.stateNode}typeof q=="function"?z.refCleanup=q(Q):q.current=Q}}catch(ne){Ct(z,F,ne)}}function Bn(z,F){var q=z.ref,Q=z.refCleanup;if(q!==null)if(typeof Q=="function")try{Q()}catch(ne){Ct(z,F,ne)}finally{z.refCleanup=null,z=z.alternate,z!=null&&(z.refCleanup=null)}else if(typeof q=="function")try{q(null)}catch(ne){Ct(z,F,ne)}else q.current=null}function zf(z){var F=z.type,q=z.memoizedProps,Q=z.stateNode;try{e:switch(F){case"button":case"input":case"select":case"textarea":q.autoFocus&&Q.focus();break e;case"img":q.src?Q.src=q.src:q.srcSet&&(Q.srcset=q.srcSet)}}catch(ne){Ct(z,z.return,ne)}}function Sl(z,F,q){try{var Q=z.stateNode;rm(Q,z.type,q,F),Q[on]=F}catch(ne){Ct(z,z.return,ne)}}function Bf(z){return z.tag===5||z.tag===3||z.tag===26||z.tag===27&&Rr(z.type)||z.tag===4}function wl(z){e:for(;;){for(;z.sibling===null;){if(z.return===null||Bf(z.return))return null;z=z.return}for(z.sibling.return=z.return,z=z.sibling;z.tag!==5&&z.tag!==6&&z.tag!==18;){if(z.tag===27&&Rr(z.type)||z.flags&2||z.child===null||z.tag===4)continue e;z.child.return=z,z=z.child}if(!(z.flags&2))return z.stateNode}}function El(z,F,q){var Q=z.tag;if(Q===5||Q===6)z=z.stateNode,F?(q.nodeType===9?q.body:q.nodeName==="HTML"?q.ownerDocument.body:q).insertBefore(z,F):(F=q.nodeType===9?q.body:q.nodeName==="HTML"?q.ownerDocument.body:q,F.appendChild(z),q=q._reactRootContainer,q!=null||F.onclick!==null||(F.onclick=Gn));else if(Q!==4&&(Q===27&&Rr(z.type)&&(q=z.stateNode,F=null),z=z.child,z!==null))for(El(z,F,q),z=z.sibling;z!==null;)El(z,F,q),z=z.sibling}function va(z,F,q){var Q=z.tag;if(Q===5||Q===6)z=z.stateNode,F?q.insertBefore(z,F):q.appendChild(z);else if(Q!==4&&(Q===27&&Rr(z.type)&&(q=z.stateNode),z=z.child,z!==null))for(va(z,F,q),z=z.sibling;z!==null;)va(z,F,q),z=z.sibling}function Hf(z){var F=z.stateNode,q=z.memoizedProps;try{for(var Q=z.type,ne=F.attributes;ne.length;)F.removeAttributeNode(ne[0]);en(F,Q,q),F[Wt]=z,F[on]=q}catch(se){Ct(z,z.return,se)}}var rr=!1,Vt=!1,Cl=!1,Uf=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function jp(z,F){if(z=z.containerInfo,Zl=Fa,z=Jc(z),yo(z)){if("selectionStart"in z)var q={start:z.selectionStart,end:z.selectionEnd};else e:{q=(q=z.ownerDocument)&&q.defaultView||window;var Q=q.getSelection&&q.getSelection();if(Q&&Q.rangeCount!==0){q=Q.anchorNode;var ne=Q.anchorOffset,se=Q.focusNode;Q=Q.focusOffset;try{q.nodeType,se.nodeType}catch{q=null;break e}var de=0,xe=-1,$e=-1,De=0,Ge=0,Xe=z,Le=null;t:for(;;){for(var Ue;Xe!==q||ne!==0&&Xe.nodeType!==3||(xe=de+ne),Xe!==se||Q!==0&&Xe.nodeType!==3||($e=de+Q),Xe.nodeType===3&&(de+=Xe.nodeValue.length),(Ue=Xe.firstChild)!==null;)Le=Xe,Xe=Ue;for(;;){if(Xe===z)break t;if(Le===q&&++De===ne&&(xe=de),Le===se&&++Ge===Q&&($e=de),(Ue=Xe.nextSibling)!==null)break;Xe=Le,Le=Xe.parentNode}Xe=Ue}q=xe===-1||$e===-1?null:{start:xe,end:$e}}else q=null}q=q||{start:0,end:0}}else q=null;for(ql={focusedElem:z,selectionRange:q},Fa=!1,Xt=F;Xt!==null;)if(F=Xt,z=F.child,(F.subtreeFlags&1028)!==0&&z!==null)z.return=F,Xt=z;else for(;Xt!==null;){switch(F=Xt,se=F.alternate,z=F.flags,F.tag){case 0:if((z&4)!==0&&(z=F.updateQueue,z=z!==null?z.events:null,z!==null))for(q=0;q<z.length;q++)ne=z[q],ne.ref.impl=ne.nextImpl;break;case 11:case 15:break;case 1:if((z&1024)!==0&&se!==null){z=void 0,q=F,ne=se.memoizedProps,se=se.memoizedState,Q=q.stateNode;try{var tt=Wr(q.type,ne);z=Q.getSnapshotBeforeUpdate(tt,se),Q.__reactInternalSnapshotBeforeUpdate=z}catch(lt){Ct(q,q.return,lt)}}break;case 3:if((z&1024)!==0){if(z=F.stateNode.containerInfo,q=z.nodeType,q===9)Wl(z);else if(q===1)switch(z.nodeName){case"HEAD":case"HTML":case"BODY":Wl(z);break;default:z.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((z&1024)!==0)throw Error(P(163))}if(z=F.sibling,z!==null){z.return=F.return,Xt=z;break}Xt=F.return}}function Ff(z,F,q){var Q=q.flags;switch(q.tag){case 0:case 11:case 15:sr(z,q),Q&4&&hs(5,q);break;case 1:if(sr(z,q),Q&4)if(z=q.stateNode,F===null)try{z.componentDidMount()}catch(de){Ct(q,q.return,de)}else{var ne=Wr(q.type,F.memoizedProps);F=F.memoizedState;try{z.componentDidUpdate(ne,F,z.__reactInternalSnapshotBeforeUpdate)}catch(de){Ct(q,q.return,de)}}Q&64&&Df(q),Q&512&&ps(q,q.return);break;case 3:if(sr(z,q),Q&64&&(z=q.updateQueue,z!==null)){if(F=null,q.child!==null)switch(q.child.tag){case 27:case 5:F=q.child.stateNode;break;case 1:F=q.child.stateNode}try{Tu(z,F)}catch(de){Ct(q,q.return,de)}}break;case 27:F===null&&Q&4&&Hf(q);case 26:case 5:sr(z,q),F===null&&Q&4&&zf(q),Q&512&&ps(q,q.return);break;case 12:sr(z,q);break;case 31:sr(z,q),Q&4&&Zf(z,q);break;case 13:sr(z,q),Q&4&&qf(z,q),Q&64&&(z=q.memoizedState,z!==null&&(z=z.dehydrated,z!==null&&(q=Vp.bind(null,q),fm(z,q))));break;case 22:if(Q=q.memoizedState!==null||rr,!Q){F=F!==null&&F.memoizedState!==null||Vt,ne=rr;var se=Vt;rr=Q,(Vt=F)&&!se?ar(z,q,(q.subtreeFlags&8772)!==0):sr(z,q),rr=ne,Vt=se}break;case 30:break;default:sr(z,q)}}function Gf(z){var F=z.alternate;F!==null&&(z.alternate=null,Gf(F)),z.child=null,z.deletions=null,z.sibling=null,z.tag===5&&(F=z.stateNode,F!==null&&eo(F)),z.stateNode=null,z.return=null,z.dependencies=null,z.memoizedProps=null,z.memoizedState=null,z.pendingProps=null,z.stateNode=null,z.updateQueue=null}var jt=null,un=!1;function ir(z,F,q){for(q=q.child;q!==null;)Vf(z,F,q),q=q.sibling}function Vf(z,F,q){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(nn,q)}catch{}switch(q.tag){case 26:Vt||Bn(q,F),ir(z,F,q),q.memoizedState?q.memoizedState.count--:q.stateNode&&(q=q.stateNode,q.parentNode.removeChild(q));break;case 27:Vt||Bn(q,F);var Q=jt,ne=un;Rr(q.type)&&(jt=q.stateNode,un=!1),ir(z,F,q),ws(q.stateNode),jt=Q,un=ne;break;case 5:Vt||Bn(q,F);case 6:if(Q=jt,ne=un,jt=null,ir(z,F,q),jt=Q,un=ne,jt!==null)if(un)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(q.stateNode)}catch(se){Ct(q,F,se)}else try{jt.removeChild(q.stateNode)}catch(se){Ct(q,F,se)}break;case 18:jt!==null&&(un?(z=jt,Ld(z.nodeType===9?z.body:z.nodeName==="HTML"?z.ownerDocument.body:z,q.stateNode),Di(z)):Ld(jt,q.stateNode));break;case 4:Q=jt,ne=un,jt=q.stateNode.containerInfo,un=!0,ir(z,F,q),jt=Q,un=ne;break;case 0:case 11:case 14:case 15:vr(2,q,F),Vt||vr(4,q,F),ir(z,F,q);break;case 1:Vt||(Bn(q,F),Q=q.stateNode,typeof Q.componentWillUnmount=="function"&&Lf(q,F,Q)),ir(z,F,q);break;case 21:ir(z,F,q);break;case 22:Vt=(Q=Vt)||q.memoizedState!==null,ir(z,F,q),Vt=Q;break;default:ir(z,F,q)}}function Zf(z,F){if(F.memoizedState===null&&(z=F.alternate,z!==null&&(z=z.memoizedState,z!==null))){z=z.dehydrated;try{Di(z)}catch(q){Ct(F,F.return,q)}}}function qf(z,F){if(F.memoizedState===null&&(z=F.alternate,z!==null&&(z=z.memoizedState,z!==null&&(z=z.dehydrated,z!==null))))try{Di(z)}catch(q){Ct(F,F.return,q)}}function Dp(z){switch(z.tag){case 31:case 13:case 19:var F=z.stateNode;return F===null&&(F=z.stateNode=new Uf),F;case 22:return z=z.stateNode,F=z._retryCache,F===null&&(F=z._retryCache=new Uf),F;default:throw Error(P(435,z.tag))}}function Sa(z,F){var q=Dp(z);F.forEach(function(Q){if(!q.has(Q)){q.add(Q);var ne=Zp.bind(null,z,Q);Q.then(ne,ne)}})}function fn(z,F){var q=F.deletions;if(q!==null)for(var Q=0;Q<q.length;Q++){var ne=q[Q],se=z,de=F,xe=de;e:for(;xe!==null;){switch(xe.tag){case 27:if(Rr(xe.type)){jt=xe.stateNode,un=!1;break e}break;case 5:jt=xe.stateNode,un=!1;break e;case 3:case 4:jt=xe.stateNode.containerInfo,un=!0;break e}xe=xe.return}if(jt===null)throw Error(P(160));Vf(se,de,ne),jt=null,un=!1,se=ne.alternate,se!==null&&(se.return=null),ne.return=null}if(F.subtreeFlags&13886)for(F=F.child;F!==null;)Yf(F,z),F=F.sibling}var jn=null;function Yf(z,F){var q=z.alternate,Q=z.flags;switch(z.tag){case 0:case 11:case 14:case 15:fn(F,z),dn(z),Q&4&&(vr(3,z,z.return),hs(3,z),vr(5,z,z.return));break;case 1:fn(F,z),dn(z),Q&512&&(Vt||q===null||Bn(q,q.return)),Q&64&&rr&&(z=z.updateQueue,z!==null&&(Q=z.callbacks,Q!==null&&(q=z.shared.hiddenCallbacks,z.shared.hiddenCallbacks=q===null?Q:q.concat(Q))));break;case 26:var ne=jn;if(fn(F,z),dn(z),Q&512&&(Vt||q===null||Bn(q,q.return)),Q&4){var se=q!==null?q.memoizedState:null;if(Q=z.memoizedState,q===null)if(Q===null)if(z.stateNode===null){e:{Q=z.type,q=z.memoizedProps,ne=ne.ownerDocument||ne;t:switch(Q){case"title":se=ne.getElementsByTagName("title")[0],(!se||se[Hi]||se[Wt]||se.namespaceURI==="http://www.w3.org/2000/svg"||se.hasAttribute("itemprop"))&&(se=ne.createElement(Q),ne.head.insertBefore(se,ne.querySelector("head > title"))),en(se,Q,q),se[Wt]=z,Yt(se),Q=se;break e;case"link":var de=Xd("link","href",ne).get(Q+(q.href||""));if(de){for(var xe=0;xe<de.length;xe++)if(se=de[xe],se.getAttribute("href")===(q.href==null||q.href===""?null:q.href)&&se.getAttribute("rel")===(q.rel==null?null:q.rel)&&se.getAttribute("title")===(q.title==null?null:q.title)&&se.getAttribute("crossorigin")===(q.crossOrigin==null?null:q.crossOrigin)){de.splice(xe,1);break t}}se=ne.createElement(Q),en(se,Q,q),ne.head.appendChild(se);break;case"meta":if(de=Xd("meta","content",ne).get(Q+(q.content||""))){for(xe=0;xe<de.length;xe++)if(se=de[xe],se.getAttribute("content")===(q.content==null?null:""+q.content)&&se.getAttribute("name")===(q.name==null?null:q.name)&&se.getAttribute("property")===(q.property==null?null:q.property)&&se.getAttribute("http-equiv")===(q.httpEquiv==null?null:q.httpEquiv)&&se.getAttribute("charset")===(q.charSet==null?null:q.charSet)){de.splice(xe,1);break t}}se=ne.createElement(Q),en(se,Q,q),ne.head.appendChild(se);break;default:throw Error(P(468,Q))}se[Wt]=z,Yt(se),Q=se}z.stateNode=Q}else Wd(ne,z.type,z.stateNode);else z.stateNode=Yd(ne,Q,z.memoizedProps);else se!==Q?(se===null?q.stateNode!==null&&(q=q.stateNode,q.parentNode.removeChild(q)):se.count--,Q===null?Wd(ne,z.type,z.stateNode):Yd(ne,Q,z.memoizedProps)):Q===null&&z.stateNode!==null&&Sl(z,z.memoizedProps,q.memoizedProps)}break;case 27:fn(F,z),dn(z),Q&512&&(Vt||q===null||Bn(q,q.return)),q!==null&&Q&4&&Sl(z,z.memoizedProps,q.memoizedProps);break;case 5:if(fn(F,z),dn(z),Q&512&&(Vt||q===null||Bn(q,q.return)),z.flags&32){ne=z.stateNode;try{si(ne,"")}catch(tt){Ct(z,z.return,tt)}}Q&4&&z.stateNode!=null&&(ne=z.memoizedProps,Sl(z,ne,q!==null?q.memoizedProps:ne)),Q&1024&&(Cl=!0);break;case 6:if(fn(F,z),dn(z),Q&4){if(z.stateNode===null)throw Error(P(162));Q=z.memoizedProps,q=z.stateNode;try{q.nodeValue=Q}catch(tt){Ct(z,z.return,tt)}}break;case 3:if(za=null,ne=jn,jn=Da(F.containerInfo),fn(F,z),jn=ne,dn(z),Q&4&&q!==null&&q.memoizedState.isDehydrated)try{Di(F.containerInfo)}catch(tt){Ct(z,z.return,tt)}Cl&&(Cl=!1,Xf(z));break;case 4:Q=jn,jn=Da(z.stateNode.containerInfo),fn(F,z),dn(z),jn=Q;break;case 12:fn(F,z),dn(z);break;case 31:fn(F,z),dn(z),Q&4&&(Q=z.updateQueue,Q!==null&&(z.updateQueue=null,Sa(z,Q)));break;case 13:fn(F,z),dn(z),z.child.flags&8192&&z.memoizedState!==null!=(q!==null&&q.memoizedState!==null)&&(Ea=st()),Q&4&&(Q=z.updateQueue,Q!==null&&(z.updateQueue=null,Sa(z,Q)));break;case 22:ne=z.memoizedState!==null;var $e=q!==null&&q.memoizedState!==null,De=rr,Ge=Vt;if(rr=De||ne,Vt=Ge||$e,fn(F,z),Vt=Ge,rr=De,dn(z),Q&8192)e:for(F=z.stateNode,F._visibility=ne?F._visibility&-2:F._visibility|1,ne&&(q===null||$e||rr||Vt||Kr(z)),q=null,F=z;;){if(F.tag===5||F.tag===26){if(q===null){$e=q=F;try{if(se=$e.stateNode,ne)de=se.style,typeof de.setProperty=="function"?de.setProperty("display","none","important"):de.display="none";else{xe=$e.stateNode;var Xe=$e.memoizedProps.style,Le=Xe!=null&&Xe.hasOwnProperty("display")?Xe.display:null;xe.style.display=Le==null||typeof Le=="boolean"?"":(""+Le).trim()}}catch(tt){Ct($e,$e.return,tt)}}}else if(F.tag===6){if(q===null){$e=F;try{$e.stateNode.nodeValue=ne?"":$e.memoizedProps}catch(tt){Ct($e,$e.return,tt)}}}else if(F.tag===18){if(q===null){$e=F;try{var Ue=$e.stateNode;ne?zd(Ue,!0):zd($e.stateNode,!1)}catch(tt){Ct($e,$e.return,tt)}}}else if((F.tag!==22&&F.tag!==23||F.memoizedState===null||F===z)&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===z)break e;for(;F.sibling===null;){if(F.return===null||F.return===z)break e;q===F&&(q=null),F=F.return}q===F&&(q=null),F.sibling.return=F.return,F=F.sibling}Q&4&&(Q=z.updateQueue,Q!==null&&(q=Q.retryQueue,q!==null&&(Q.retryQueue=null,Sa(z,q))));break;case 19:fn(F,z),dn(z),Q&4&&(Q=z.updateQueue,Q!==null&&(z.updateQueue=null,Sa(z,Q)));break;case 30:break;case 21:break;default:fn(F,z),dn(z)}}function dn(z){var F=z.flags;if(F&2){try{for(var q,Q=z.return;Q!==null;){if(Bf(Q)){q=Q;break}Q=Q.return}if(q==null)throw Error(P(160));switch(q.tag){case 27:var ne=q.stateNode,se=wl(z);va(z,se,ne);break;case 5:var de=q.stateNode;q.flags&32&&(si(de,""),q.flags&=-33);var xe=wl(z);va(z,xe,de);break;case 3:case 4:var $e=q.stateNode.containerInfo,De=wl(z);El(z,De,$e);break;default:throw Error(P(161))}}catch(Ge){Ct(z,z.return,Ge)}z.flags&=-3}F&4096&&(z.flags&=-4097)}function Xf(z){if(z.subtreeFlags&1024)for(z=z.child;z!==null;){var F=z;Xf(F),F.tag===5&&F.flags&1024&&F.stateNode.reset(),z=z.sibling}}function sr(z,F){if(F.subtreeFlags&8772)for(F=F.child;F!==null;)Ff(z,F.alternate,F),F=F.sibling}function Kr(z){for(z=z.child;z!==null;){var F=z;switch(F.tag){case 0:case 11:case 14:case 15:vr(4,F,F.return),Kr(F);break;case 1:Bn(F,F.return);var q=F.stateNode;typeof q.componentWillUnmount=="function"&&Lf(F,F.return,q),Kr(F);break;case 27:ws(F.stateNode);case 26:case 5:Bn(F,F.return),Kr(F);break;case 22:F.memoizedState===null&&Kr(F);break;case 30:Kr(F);break;default:Kr(F)}z=z.sibling}}function ar(z,F,q){for(q=q&&(F.subtreeFlags&8772)!==0,F=F.child;F!==null;){var Q=F.alternate,ne=z,se=F,de=se.flags;switch(se.tag){case 0:case 11:case 15:ar(ne,se,q),hs(4,se);break;case 1:if(ar(ne,se,q),Q=se,ne=Q.stateNode,typeof ne.componentDidMount=="function")try{ne.componentDidMount()}catch(De){Ct(Q,Q.return,De)}if(Q=se,ne=Q.updateQueue,ne!==null){var xe=Q.stateNode;try{var $e=ne.shared.hiddenCallbacks;if($e!==null)for(ne.shared.hiddenCallbacks=null,ne=0;ne<$e.length;ne++)Cu($e[ne],xe)}catch(De){Ct(Q,Q.return,De)}}q&&de&64&&Df(se),ps(se,se.return);break;case 27:Hf(se);case 26:case 5:ar(ne,se,q),q&&Q===null&&de&4&&zf(se),ps(se,se.return);break;case 12:ar(ne,se,q);break;case 31:ar(ne,se,q),q&&de&4&&Zf(ne,se);break;case 13:ar(ne,se,q),q&&de&4&&qf(ne,se);break;case 22:se.memoizedState===null&&ar(ne,se,q),ps(se,se.return);break;case 30:break;default:ar(ne,se,q)}F=F.sibling}}function Tl(z,F){var q=null;z!==null&&z.memoizedState!==null&&z.memoizedState.cachePool!==null&&(q=z.memoizedState.cachePool.pool),z=null,F.memoizedState!==null&&F.memoizedState.cachePool!==null&&(z=F.memoizedState.cachePool.pool),z!==q&&(z!=null&&z.refCount++,q!=null&&es(q))}function Al(z,F){z=null,F.alternate!==null&&(z=F.alternate.memoizedState.cache),F=F.memoizedState.cache,F!==z&&(F.refCount++,z!=null&&es(z))}function Dn(z,F,q,Q){if(F.subtreeFlags&10256)for(F=F.child;F!==null;)Wf(z,F,q,Q),F=F.sibling}function Wf(z,F,q,Q){var ne=F.flags;switch(F.tag){case 0:case 11:case 15:Dn(z,F,q,Q),ne&2048&&hs(9,F);break;case 1:Dn(z,F,q,Q);break;case 3:Dn(z,F,q,Q),ne&2048&&(z=null,F.alternate!==null&&(z=F.alternate.memoizedState.cache),F=F.memoizedState.cache,F!==z&&(F.refCount++,z!=null&&es(z)));break;case 12:if(ne&2048){Dn(z,F,q,Q),z=F.stateNode;try{var se=F.memoizedProps,de=se.id,xe=se.onPostCommit;typeof xe=="function"&&xe(de,F.alternate===null?"mount":"update",z.passiveEffectDuration,-0)}catch($e){Ct(F,F.return,$e)}}else Dn(z,F,q,Q);break;case 31:Dn(z,F,q,Q);break;case 13:Dn(z,F,q,Q);break;case 23:break;case 22:se=F.stateNode,de=F.alternate,F.memoizedState!==null?se._visibility&2?Dn(z,F,q,Q):ms(z,F):se._visibility&2?Dn(z,F,q,Q):(se._visibility|=2,Ti(z,F,q,Q,(F.subtreeFlags&10256)!==0||!1)),ne&2048&&Tl(de,F);break;case 24:Dn(z,F,q,Q),ne&2048&&Al(F.alternate,F);break;default:Dn(z,F,q,Q)}}function Ti(z,F,q,Q,ne){for(ne=ne&&((F.subtreeFlags&10256)!==0||!1),F=F.child;F!==null;){var se=z,de=F,xe=q,$e=Q,De=de.flags;switch(de.tag){case 0:case 11:case 15:Ti(se,de,xe,$e,ne),hs(8,de);break;case 23:break;case 22:var Ge=de.stateNode;de.memoizedState!==null?Ge._visibility&2?Ti(se,de,xe,$e,ne):ms(se,de):(Ge._visibility|=2,Ti(se,de,xe,$e,ne)),ne&&De&2048&&Tl(de.alternate,de);break;case 24:Ti(se,de,xe,$e,ne),ne&&De&2048&&Al(de.alternate,de);break;default:Ti(se,de,xe,$e,ne)}F=F.sibling}}function ms(z,F){if(F.subtreeFlags&10256)for(F=F.child;F!==null;){var q=z,Q=F,ne=Q.flags;switch(Q.tag){case 22:ms(q,Q),ne&2048&&Tl(Q.alternate,Q);break;case 24:ms(q,Q),ne&2048&&Al(Q.alternate,Q);break;default:ms(q,Q)}F=F.sibling}}var gs=8192;function Ai(z,F,q){if(z.subtreeFlags&gs)for(z=z.child;z!==null;)Kf(z,F,q),z=z.sibling}function Kf(z,F,q){switch(z.tag){case 26:Ai(z,F,q),z.flags&gs&&z.memoizedState!==null&&wm(q,jn,z.memoizedState,z.memoizedProps);break;case 5:Ai(z,F,q);break;case 3:case 4:var Q=jn;jn=Da(z.stateNode.containerInfo),Ai(z,F,q),jn=Q;break;case 22:z.memoizedState===null&&(Q=z.alternate,Q!==null&&Q.memoizedState!==null?(Q=gs,gs=16777216,Ai(z,F,q),gs=Q):Ai(z,F,q));break;default:Ai(z,F,q)}}function Qf(z){var F=z.alternate;if(F!==null&&(z=F.child,z!==null)){F.child=null;do F=z.sibling,z.sibling=null,z=F;while(z!==null)}}function _s(z){var F=z.deletions;if((z.flags&16)!==0){if(F!==null)for(var q=0;q<F.length;q++){var Q=F[q];Xt=Q,ed(Q,z)}Qf(z)}if(z.subtreeFlags&10256)for(z=z.child;z!==null;)Jf(z),z=z.sibling}function Jf(z){switch(z.tag){case 0:case 11:case 15:_s(z),z.flags&2048&&vr(9,z,z.return);break;case 3:_s(z);break;case 12:_s(z);break;case 22:var F=z.stateNode;z.memoizedState!==null&&F._visibility&2&&(z.return===null||z.return.tag!==13)?(F._visibility&=-3,wa(z)):_s(z);break;default:_s(z)}}function wa(z){var F=z.deletions;if((z.flags&16)!==0){if(F!==null)for(var q=0;q<F.length;q++){var Q=F[q];Xt=Q,ed(Q,z)}Qf(z)}for(z=z.child;z!==null;){switch(F=z,F.tag){case 0:case 11:case 15:vr(8,F,F.return),wa(F);break;case 22:q=F.stateNode,q._visibility&2&&(q._visibility&=-3,wa(F));break;default:wa(F)}z=z.sibling}}function ed(z,F){for(;Xt!==null;){var q=Xt;switch(q.tag){case 0:case 11:case 15:vr(8,q,F);break;case 23:case 22:if(q.memoizedState!==null&&q.memoizedState.cachePool!==null){var Q=q.memoizedState.cachePool.pool;Q!=null&&Q.refCount++}break;case 24:es(q.memoizedState.cache)}if(Q=q.child,Q!==null)Q.return=q,Xt=Q;else e:for(q=z;Xt!==null;){Q=Xt;var ne=Q.sibling,se=Q.return;if(Gf(Q),Q===q){Xt=null;break e}if(ne!==null){ne.return=se,Xt=ne;break e}Xt=se}}}var Lp={getCacheForType:function(z){var F=Qt(Ut),q=F.data.get(z);return q===void 0&&(q=z(),F.data.set(z,q)),q},cacheSignal:function(){return Qt(Ut).controller.signal}},zp=typeof WeakMap=="function"?WeakMap:Map,St=0,Mt=null,dt=null,pt=0,Et=0,xn=null,Sr=!1,Ri=!1,Rl=!1,or=0,zt=0,wr=0,Qr=0,$l=0,bn=0,$i=0,ys=null,hn=null,Ml=!1,Ea=0,td=0,Ca=1/0,Ta=null,Er=null,Zt=0,Cr=null,Mi=null,lr=0,Nl=0,kl=null,nd=null,xs=0,Pl=null;function vn(){return(St&2)!==0&&pt!==0?pt&-pt:ye.T!==null?zl():_c()}function rd(){if(bn===0)if((pt&536870912)===0||_t){var z=Ps;Ps<<=1,(Ps&3932160)===0&&(Ps=262144),bn=z}else bn=536870912;return z=_n.current,z!==null&&(z.flags|=32),bn}function pn(z,F,q){(z===Mt&&(Et===2||Et===9)||z.cancelPendingCommit!==null)&&(Ni(z,0),Tr(z,pt,bn,!1)),Bi(z,q),((St&2)===0||z!==Mt)&&(z===Mt&&((St&2)===0&&(Qr|=q),zt===4&&Tr(z,pt,bn,!1)),Hn(z))}function sd(z,F,q){if((St&6)!==0)throw Error(P(327));var Q=!q&&(F&127)===0&&(F&z.expiredLanes)===0||zi(z,F),ne=Q?Up(z,F):Il(z,F,!0),se=Q;do{if(ne===0){Ri&&!Q&&Tr(z,F,0,!1);break}else{if(q=z.current.alternate,se&&!Bp(q)){ne=Il(z,F,!1),se=!1;continue}if(ne===2){if(se=F,z.errorRecoveryDisabledLanes&se)var de=0;else de=z.pendingLanes&-536870913,de=de!==0?de:de&536870912?536870912:0;if(de!==0){F=de;e:{var xe=z;ne=ys;var $e=xe.current.memoizedState.isDehydrated;if($e&&(Ni(xe,de).flags|=256),de=Il(xe,de,!1),de!==2){if(Rl&&!$e){xe.errorRecoveryDisabledLanes|=se,Qr|=se,ne=4;break e}se=hn,hn=ne,se!==null&&(hn===null?hn=se:hn.push.apply(hn,se))}ne=de}if(se=!1,ne!==2)continue}}if(ne===1){Ni(z,0),Tr(z,F,0,!0);break}e:{switch(Q=z,se=ne,se){case 0:case 1:throw Error(P(345));case 4:if((F&4194048)!==F)break;case 6:Tr(Q,F,bn,!Sr);break e;case 2:hn=null;break;case 3:case 5:break;default:throw Error(P(329))}if((F&62914560)===F&&(ne=Ea+300-st(),10<ne)){if(Tr(Q,F,bn,!Sr),Is(Q,0,!0)!==0)break e;lr=F,Q.timeoutHandle=jd(ad.bind(null,Q,q,hn,Ta,Ml,F,bn,Qr,$i,Sr,se,"Throttled",-0,0),ne);break e}ad(Q,q,hn,Ta,Ml,F,bn,Qr,$i,Sr,se,null,-0,0)}}break}while(!0);Hn(z)}function ad(z,F,q,Q,ne,se,de,xe,$e,De,Ge,Xe,Le,Ue){if(z.timeoutHandle=-1,Xe=F.subtreeFlags,Xe&8192||(Xe&16785408)===16785408){Xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gn},Kf(F,se,Xe);var tt=(se&62914560)===se?Ea-st():(se&4194048)===se?td-st():0;if(tt=Em(Xe,tt),tt!==null){lr=se,z.cancelPendingCommit=tt(pd.bind(null,z,F,se,q,Q,ne,de,xe,$e,Ge,Xe,null,Le,Ue)),Tr(z,se,de,!De);return}}pd(z,F,se,q,Q,ne,de,xe,$e)}function Bp(z){for(var F=z;;){var q=F.tag;if((q===0||q===11||q===15)&&F.flags&16384&&(q=F.updateQueue,q!==null&&(q=q.stores,q!==null)))for(var Q=0;Q<q.length;Q++){var ne=q[Q],se=ne.getSnapshot;ne=ne.value;try{if(!mn(se(),ne))return!1}catch{return!1}}if(q=F.child,F.subtreeFlags&16384&&q!==null)q.return=F,F=q;else{if(F===z)break;for(;F.sibling===null;){if(F.return===null||F.return===z)return!0;F=F.return}F.sibling.return=F.return,F=F.sibling}}return!0}function Tr(z,F,q,Q){F&=~$l,F&=~Qr,z.suspendedLanes|=F,z.pingedLanes&=~F,Q&&(z.warmLanes|=F),Q=z.expirationTimes;for(var ne=F;0<ne;){var se=31-rn(ne),de=1<<se;Q[se]=-1,ne&=~de}q!==0&&pc(z,q,F)}function Aa(){return(St&6)===0?(bs(0),!1):!0}function Ol(){if(dt!==null){if(Et===0)var z=dt.return;else z=dt,Kn=Fr=null,Wo(z),vi=null,ns=0,z=dt;for(;z!==null;)jf(z.alternate,z),z=z.return;dt=null}}function Ni(z,F){var q=z.timeoutHandle;q!==-1&&(z.timeoutHandle=-1,am(q)),q=z.cancelPendingCommit,q!==null&&(z.cancelPendingCommit=null,q()),lr=0,Ol(),Mt=z,dt=q=qn(z.current,null),pt=F,Et=0,xn=null,Sr=!1,Ri=zi(z,F),Rl=!1,$i=bn=$l=Qr=wr=zt=0,hn=ys=null,Ml=!1,(F&8)!==0&&(F|=F&32);var Q=z.entangledLanes;if(Q!==0)for(z=z.entanglements,Q&=F;0<Q;){var ne=31-rn(Q),se=1<<ne;F|=z[ne],Q&=~se}return or=F,qs(),q}function od(z,F){ut=null,ye.H=us,F===bi||F===ta?(F=vu(),Et=3):F===Lo?(F=vu(),Et=4):Et=F===dl?8:F!==null&&typeof F=="object"&&typeof F.then=="function"?6:1,xn=F,dt===null&&(zt=1,ma(z,Rn(F,z.current)))}function ld(){var z=_n.current;return z===null?!0:(pt&4194048)===pt?kn===null:(pt&62914560)===pt||(pt&536870912)!==0?z===kn:!1}function cd(){var z=ye.H;return ye.H=us,z===null?us:z}function ud(){var z=ye.A;return ye.A=Lp,z}function Ra(){zt=4,Sr||(pt&4194048)!==pt&&_n.current!==null||(Ri=!0),(wr&134217727)===0&&(Qr&134217727)===0||Mt===null||Tr(Mt,pt,bn,!1)}function Il(z,F,q){var Q=St;St|=2;var ne=cd(),se=ud();(Mt!==z||pt!==F)&&(Ta=null,Ni(z,F)),F=!1;var de=zt;e:do try{if(Et!==0&&dt!==null){var xe=dt,$e=xn;switch(Et){case 8:Ol(),de=6;break e;case 3:case 2:case 9:case 6:_n.current===null&&(F=!0);var De=Et;if(Et=0,xn=null,ki(z,xe,$e,De),q&&Ri){de=0;break e}break;default:De=Et,Et=0,xn=null,ki(z,xe,$e,De)}}Hp(),de=zt;break}catch(Ge){od(z,Ge)}while(!0);return F&&z.shellSuspendCounter++,Kn=Fr=null,St=Q,ye.H=ne,ye.A=se,dt===null&&(Mt=null,pt=0,qs()),de}function Hp(){for(;dt!==null;)fd(dt)}function Up(z,F){var q=St;St|=2;var Q=cd(),ne=ud();Mt!==z||pt!==F?(Ta=null,Ca=st()+500,Ni(z,F)):Ri=zi(z,F);e:do try{if(Et!==0&&dt!==null){F=dt;var se=xn;t:switch(Et){case 1:Et=0,xn=null,ki(z,F,se,1);break;case 2:case 9:if(xu(se)){Et=0,xn=null,dd(F);break}F=function(){Et!==2&&Et!==9||Mt!==z||(Et=7),Hn(z)},se.then(F,F);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:xu(se)?(Et=0,xn=null,dd(F)):(Et=0,xn=null,ki(z,F,se,7));break;case 5:var de=null;switch(dt.tag){case 26:de=dt.memoizedState;case 5:case 27:var xe=dt;if(de?Kd(de):xe.stateNode.complete){Et=0,xn=null;var $e=xe.sibling;if($e!==null)dt=$e;else{var De=xe.return;De!==null?(dt=De,$a(De)):dt=null}break t}}Et=0,xn=null,ki(z,F,se,5);break;case 6:Et=0,xn=null,ki(z,F,se,6);break;case 8:Ol(),zt=6;break e;default:throw Error(P(462))}}Fp();break}catch(Ge){od(z,Ge)}while(!0);return Kn=Fr=null,ye.H=Q,ye.A=ne,St=q,dt!==null?0:(Mt=null,pt=0,qs(),zt)}function Fp(){for(;dt!==null&&!wt();)fd(dt)}function fd(z){var F=Of(z.alternate,z,or);z.memoizedProps=z.pendingProps,F===null?$a(z):dt=F}function dd(z){var F=z,q=F.alternate;switch(F.tag){case 15:case 0:F=Rf(q,F,F.pendingProps,F.type,void 0,pt);break;case 11:F=Rf(q,F,F.pendingProps,F.type.render,F.ref,pt);break;case 5:Wo(F);default:jf(q,F),F=dt=lu(F,or),F=Of(q,F,or)}z.memoizedProps=z.pendingProps,F===null?$a(z):dt=F}function ki(z,F,q,Q){Kn=Fr=null,Wo(F),vi=null,ns=0;var ne=F.return;try{if(Np(z,ne,F,q,pt)){zt=1,ma(z,Rn(q,z.current)),dt=null;return}}catch(se){if(ne!==null)throw dt=ne,se;zt=1,ma(z,Rn(q,z.current)),dt=null;return}F.flags&32768?(_t||Q===1?z=!0:Ri||(pt&536870912)!==0?z=!1:(Sr=z=!0,(Q===2||Q===9||Q===3||Q===6)&&(Q=_n.current,Q!==null&&Q.tag===13&&(Q.flags|=16384))),hd(F,z)):$a(F)}function $a(z){var F=z;do{if((F.flags&32768)!==0){hd(F,Sr);return}z=F.return;var q=Op(F.alternate,F,or);if(q!==null){dt=q;return}if(F=F.sibling,F!==null){dt=F;return}dt=F=z}while(F!==null);zt===0&&(zt=5)}function hd(z,F){do{var q=Ip(z.alternate,z);if(q!==null){q.flags&=32767,dt=q;return}if(q=z.return,q!==null&&(q.flags|=32768,q.subtreeFlags=0,q.deletions=null),!F&&(z=z.sibling,z!==null)){dt=z;return}dt=z=q}while(z!==null);zt=6,dt=null}function pd(z,F,q,Q,ne,se,de,xe,$e){z.cancelPendingCommit=null;do Ma();while(Zt!==0);if((St&6)!==0)throw Error(P(327));if(F!==null){if(F===z.current)throw Error(P(177));if(se=F.lanes|F.childLanes,se|=wo,Sh(z,q,se,de,xe,$e),z===Mt&&(dt=Mt=null,pt=0),Mi=F,Cr=z,lr=q,Nl=se,kl=ne,nd=Q,(F.subtreeFlags&10256)!==0||(F.flags&10256)!==0?(z.callbackNode=null,z.callbackPriority=0,qp(Pt,function(){return xd(),null})):(z.callbackNode=null,z.callbackPriority=0),Q=(F.flags&13878)!==0,(F.subtreeFlags&13878)!==0||Q){Q=ye.T,ye.T=null,ne=Se.p,Se.p=2,de=St,St|=4;try{jp(z,F,q)}finally{St=de,Se.p=ne,ye.T=Q}}Zt=1,md(),gd(),_d()}}function md(){if(Zt===1){Zt=0;var z=Cr,F=Mi,q=(F.flags&13878)!==0;if((F.subtreeFlags&13878)!==0||q){q=ye.T,ye.T=null;var Q=Se.p;Se.p=2;var ne=St;St|=4;try{Yf(F,z);var se=ql,de=Jc(z.containerInfo),xe=se.focusedElem,$e=se.selectionRange;if(de!==xe&&xe&&xe.ownerDocument&&Qc(xe.ownerDocument.documentElement,xe)){if($e!==null&&yo(xe)){var De=$e.start,Ge=$e.end;if(Ge===void 0&&(Ge=De),"selectionStart"in xe)xe.selectionStart=De,xe.selectionEnd=Math.min(Ge,xe.value.length);else{var Xe=xe.ownerDocument||document,Le=Xe&&Xe.defaultView||window;if(Le.getSelection){var Ue=Le.getSelection(),tt=xe.textContent.length,lt=Math.min($e.start,tt),Rt=$e.end===void 0?lt:Math.min($e.end,tt);!Ue.extend&&lt>Rt&&(de=Rt,Rt=lt,lt=de);var Ie=Kc(xe,lt),Ne=Kc(xe,Rt);if(Ie&&Ne&&(Ue.rangeCount!==1||Ue.anchorNode!==Ie.node||Ue.anchorOffset!==Ie.offset||Ue.focusNode!==Ne.node||Ue.focusOffset!==Ne.offset)){var je=Xe.createRange();je.setStart(Ie.node,Ie.offset),Ue.removeAllRanges(),lt>Rt?(Ue.addRange(je),Ue.extend(Ne.node,Ne.offset)):(je.setEnd(Ne.node,Ne.offset),Ue.addRange(je))}}}}for(Xe=[],Ue=xe;Ue=Ue.parentNode;)Ue.nodeType===1&&Xe.push({element:Ue,left:Ue.scrollLeft,top:Ue.scrollTop});for(typeof xe.focus=="function"&&xe.focus(),xe=0;xe<Xe.length;xe++){var Ye=Xe[xe];Ye.element.scrollLeft=Ye.left,Ye.element.scrollTop=Ye.top}}Fa=!!Zl,ql=Zl=null}finally{St=ne,Se.p=Q,ye.T=q}}z.current=F,Zt=2}}function gd(){if(Zt===2){Zt=0;var z=Cr,F=Mi,q=(F.flags&8772)!==0;if((F.subtreeFlags&8772)!==0||q){q=ye.T,ye.T=null;var Q=Se.p;Se.p=2;var ne=St;St|=4;try{Ff(z,F.alternate,F)}finally{St=ne,Se.p=Q,ye.T=q}}Zt=3}}function _d(){if(Zt===4||Zt===3){Zt=0,Nt();var z=Cr,F=Mi,q=lr,Q=nd;(F.subtreeFlags&10256)!==0||(F.flags&10256)!==0?Zt=5:(Zt=0,Mi=Cr=null,yd(z,z.pendingLanes));var ne=z.pendingLanes;if(ne===0&&(Er=null),Qa(q),F=F.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(nn,F,void 0,(F.current.flags&128)===128)}catch{}if(Q!==null){F=ye.T,ne=Se.p,Se.p=2,ye.T=null;try{for(var se=z.onRecoverableError,de=0;de<Q.length;de++){var xe=Q[de];se(xe.value,{componentStack:xe.stack})}}finally{ye.T=F,Se.p=ne}}(lr&3)!==0&&Ma(),Hn(z),ne=z.pendingLanes,(q&261930)!==0&&(ne&42)!==0?z===Pl?xs++:(xs=0,Pl=z):xs=0,bs(0)}}function yd(z,F){(z.pooledCacheLanes&=F)===0&&(F=z.pooledCache,F!=null&&(z.pooledCache=null,es(F)))}function Ma(){return md(),gd(),_d(),xd()}function xd(){if(Zt!==5)return!1;var z=Cr,F=Nl;Nl=0;var q=Qa(lr),Q=ye.T,ne=Se.p;try{Se.p=32>q?32:q,ye.T=null,q=kl,kl=null;var se=Cr,de=lr;if(Zt=0,Mi=Cr=null,lr=0,(St&6)!==0)throw Error(P(331));var xe=St;if(St|=4,Jf(se.current),Wf(se,se.current,de,q),St=xe,bs(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(nn,se)}catch{}return!0}finally{Se.p=ne,ye.T=Q,yd(z,F)}}function bd(z,F,q){F=Rn(q,F),F=fl(z.stateNode,F,2),z=yr(z,F,2),z!==null&&(Bi(z,2),Hn(z))}function Ct(z,F,q){if(z.tag===3)bd(z,z,q);else for(;F!==null;){if(F.tag===3){bd(F,z,q);break}else if(F.tag===1){var Q=F.stateNode;if(typeof F.type.getDerivedStateFromError=="function"||typeof Q.componentDidCatch=="function"&&(Er===null||!Er.has(Q))){z=Rn(q,z),q=bf(2),Q=yr(F,q,2),Q!==null&&(vf(q,Q,F,z),Bi(Q,2),Hn(Q));break}}F=F.return}}function jl(z,F,q){var Q=z.pingCache;if(Q===null){Q=z.pingCache=new zp;var ne=new Set;Q.set(F,ne)}else ne=Q.get(F),ne===void 0&&(ne=new Set,Q.set(F,ne));ne.has(q)||(Rl=!0,ne.add(q),z=Gp.bind(null,z,F,q),F.then(z,z))}function Gp(z,F,q){var Q=z.pingCache;Q!==null&&Q.delete(F),z.pingedLanes|=z.suspendedLanes&q,z.warmLanes&=~q,Mt===z&&(pt&q)===q&&(zt===4||zt===3&&(pt&62914560)===pt&&300>st()-Ea?(St&2)===0&&Ni(z,0):$l|=q,$i===pt&&($i=0)),Hn(z)}function vd(z,F){F===0&&(F=hc()),z=Br(z,F),z!==null&&(Bi(z,F),Hn(z))}function Vp(z){var F=z.memoizedState,q=0;F!==null&&(q=F.retryLane),vd(z,q)}function Zp(z,F){var q=0;switch(z.tag){case 31:case 13:var Q=z.stateNode,ne=z.memoizedState;ne!==null&&(q=ne.retryLane);break;case 19:Q=z.stateNode;break;case 22:Q=z.stateNode._retryCache;break;default:throw Error(P(314))}Q!==null&&Q.delete(F),vd(z,q)}function qp(z,F){return Dt(z,F)}var Na=null,Pi=null,Dl=!1,Pa=!1,Ll=!1,Ar=0;function Hn(z){z!==Pi&&z.next===null&&(Pi===null?Na=Pi=z:Pi=Pi.next=z),Pa=!0,Dl||(Dl=!0,Xp())}function bs(z,F){if(!Ll&&Pa){Ll=!0;do for(var q=!1,Q=Na;Q!==null;){if(z!==0){var ne=Q.pendingLanes;if(ne===0)var se=0;else{var de=Q.suspendedLanes,xe=Q.pingedLanes;se=(1<<31-rn(42|z)+1)-1,se&=ne&~(de&~xe),se=se&201326741?se&201326741|1:se?se|2:0}se!==0&&(q=!0,Cd(Q,se))}else se=pt,se=Is(Q,Q===Mt?se:0,Q.cancelPendingCommit!==null||Q.timeoutHandle!==-1),(se&3)===0||zi(Q,se)||(q=!0,Cd(Q,se));Q=Q.next}while(q);Ll=!1}}function Yp(){Sd()}function Sd(){Pa=Dl=!1;var z=0;Ar!==0&&sm()&&(z=Ar);for(var F=st(),q=null,Q=Na;Q!==null;){var ne=Q.next,se=wd(Q,F);se===0?(Q.next=null,q===null?Na=ne:q.next=ne,ne===null&&(Pi=q)):(q=Q,(z!==0||(se&3)!==0)&&(Pa=!0)),Q=ne}Zt!==0&&Zt!==5||bs(z),Ar!==0&&(Ar=0)}function wd(z,F){for(var q=z.suspendedLanes,Q=z.pingedLanes,ne=z.expirationTimes,se=z.pendingLanes&-62914561;0<se;){var de=31-rn(se),xe=1<<de,$e=ne[de];$e===-1?((xe&q)===0||(xe&Q)!==0)&&(ne[de]=vh(xe,F)):$e<=F&&(z.expiredLanes|=xe),se&=~xe}if(F=Mt,q=pt,q=Is(z,z===F?q:0,z.cancelPendingCommit!==null||z.timeoutHandle!==-1),Q=z.callbackNode,q===0||z===F&&(Et===2||Et===9)||z.cancelPendingCommit!==null)return Q!==null&&Q!==null&&gt(Q),z.callbackNode=null,z.callbackPriority=0;if((q&3)===0||zi(z,q)){if(F=q&-q,F===z.callbackPriority)return F;switch(Q!==null&&gt(Q),Qa(q)){case 2:case 8:q=kt;break;case 32:q=Pt;break;case 268435456:q=tn;break;default:q=Pt}return Q=Ed.bind(null,z),q=Dt(q,Q),z.callbackPriority=F,z.callbackNode=q,F}return Q!==null&&Q!==null&&gt(Q),z.callbackPriority=2,z.callbackNode=null,2}function Ed(z,F){if(Zt!==0&&Zt!==5)return z.callbackNode=null,z.callbackPriority=0,null;var q=z.callbackNode;if(Ma()&&z.callbackNode!==q)return null;var Q=pt;return Q=Is(z,z===Mt?Q:0,z.cancelPendingCommit!==null||z.timeoutHandle!==-1),Q===0?null:(sd(z,Q,F),wd(z,st()),z.callbackNode!=null&&z.callbackNode===q?Ed.bind(null,z):null)}function Cd(z,F){if(Ma())return null;sd(z,F,!0)}function Xp(){om(function(){(St&6)!==0?Dt(yt,Yp):Sd()})}function zl(){if(Ar===0){var z=yi;z===0&&(z=ks,ks<<=1,(ks&261888)===0&&(ks=256)),Ar=z}return Ar}function Td(z){return z==null||typeof z=="symbol"||typeof z=="boolean"?null:typeof z=="function"?z:zs(""+z)}function Ad(z,F){var q=F.ownerDocument.createElement("input");return q.name=F.name,q.value=F.value,z.id&&q.setAttribute("form",z.id),F.parentNode.insertBefore(q,F),z=new FormData(z),q.parentNode.removeChild(q),z}function Wp(z,F,q,Q,ne){if(F==="submit"&&q&&q.stateNode===ne){var se=Td((ne[on]||null).action),de=Q.submitter;de&&(F=(F=de[on]||null)?Td(F.formAction):de.getAttribute("formAction"),F!==null&&(se=F,de=null));var xe=new Fs("action","action",null,Q,ne);z.push({event:xe,listeners:[{instance:null,listener:function(){if(Q.defaultPrevented){if(Ar!==0){var $e=de?Ad(ne,de):new FormData(ne);sl(q,{pending:!0,data:$e,method:ne.method,action:se},null,$e)}}else typeof se=="function"&&(xe.preventDefault(),$e=de?Ad(ne,de):new FormData(ne),sl(q,{pending:!0,data:$e,method:ne.method,action:se},se,$e))},currentTarget:ne}]})}}for(var Bl=0;Bl<So.length;Bl++){var Hl=So[Bl],Kp=Hl.toLowerCase(),Qp=Hl[0].toUpperCase()+Hl.slice(1);In(Kp,"on"+Qp)}In(nu,"onAnimationEnd"),In(ru,"onAnimationIteration"),In(iu,"onAnimationStart"),In("dblclick","onDoubleClick"),In("focusin","onFocus"),In("focusout","onBlur"),In(pp,"onTransitionRun"),In(mp,"onTransitionStart"),In(gp,"onTransitionCancel"),In(su,"onTransitionEnd"),ri("onMouseEnter",["mouseout","mouseover"]),ri("onMouseLeave",["mouseout","mouseover"]),ri("onPointerEnter",["pointerout","pointerover"]),ri("onPointerLeave",["pointerout","pointerover"]),jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jr("onBeforeInput",["compositionend","keypress","textInput","paste"]),jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vs));function Rd(z,F){F=(F&4)!==0;for(var q=0;q<z.length;q++){var Q=z[q],ne=Q.event;Q=Q.listeners;e:{var se=void 0;if(F)for(var de=Q.length-1;0<=de;de--){var xe=Q[de],$e=xe.instance,De=xe.currentTarget;if(xe=xe.listener,$e!==se&&ne.isPropagationStopped())break e;se=xe,ne.currentTarget=De;try{se(ne)}catch(Ge){Zs(Ge)}ne.currentTarget=null,se=$e}else for(de=0;de<Q.length;de++){if(xe=Q[de],$e=xe.instance,De=xe.currentTarget,xe=xe.listener,$e!==se&&ne.isPropagationStopped())break e;se=xe,ne.currentTarget=De;try{se(ne)}catch(Ge){Zs(Ge)}ne.currentTarget=null,se=$e}}}}function ht(z,F){var q=F[Ja];q===void 0&&(q=F[Ja]=new Set);var Q=z+"__bubble";q.has(Q)||($d(F,z,2,!1),q.add(Q))}function Ul(z,F,q){var Q=0;F&&(Q|=4),$d(q,z,Q,F)}var Oa="_reactListening"+Math.random().toString(36).slice(2);function Fl(z){if(!z[Oa]){z[Oa]=!0,bc.forEach(function(q){q!=="selectionchange"&&(Jp.has(q)||Ul(q,!1,z),Ul(q,!0,z))});var F=z.nodeType===9?z:z.ownerDocument;F===null||F[Oa]||(F[Oa]=!0,Ul("selectionchange",!1,F))}}function $d(z,F,q,Q){switch(ih(F)){case 2:var ne=Am;break;case 8:ne=Rm;break;default:ne=ic}q=ne.bind(null,F,q,z),ne=void 0,!lo||F!=="touchstart"&&F!=="touchmove"&&F!=="wheel"||(ne=!0),Q?ne!==void 0?z.addEventListener(F,q,{capture:!0,passive:ne}):z.addEventListener(F,q,!0):ne!==void 0?z.addEventListener(F,q,{passive:ne}):z.addEventListener(F,q,!1)}function Gl(z,F,q,Q,ne){var se=Q;if((F&1)===0&&(F&2)===0&&Q!==null)e:for(;;){if(Q===null)return;var de=Q.tag;if(de===3||de===4){var xe=Q.stateNode.containerInfo;if(xe===ne)break;if(de===4)for(de=Q.return;de!==null;){var $e=de.tag;if(($e===3||$e===4)&&de.stateNode.containerInfo===ne)return;de=de.return}for(;xe!==null;){if(de=ei(xe),de===null)return;if($e=de.tag,$e===5||$e===6||$e===26||$e===27){Q=se=de;continue e}xe=xe.parentNode}}Q=Q.return}kc(function(){var De=se,Ge=ao(q),Xe=[];e:{var Le=au.get(z);if(Le!==void 0){var Ue=Fs,tt=z;switch(z){case"keypress":if(Hs(q)===0)break e;case"keydown":case"keyup":Ue=Zh;break;case"focusin":tt="focus",Ue=ho;break;case"focusout":tt="blur",Ue=ho;break;case"beforeblur":case"afterblur":Ue=ho;break;case"click":if(q.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=Ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=Oh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=Xh;break;case nu:case ru:case iu:Ue=Dh;break;case su:Ue=Kh;break;case"scroll":case"scrollend":Ue=kh;break;case"wheel":Ue=Jh;break;case"copy":case"cut":case"paste":Ue=zh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=Dc;break;case"toggle":case"beforetoggle":Ue=tp}var lt=(F&4)!==0,Rt=!lt&&(z==="scroll"||z==="scrollend"),Ie=lt?Le!==null?Le+"Capture":null:Le;lt=[];for(var Ne=De,je;Ne!==null;){var Ye=Ne;if(je=Ye.stateNode,Ye=Ye.tag,Ye!==5&&Ye!==26&&Ye!==27||je===null||Ie===null||(Ye=Fi(Ne,Ie),Ye!=null&&lt.push(Ss(Ne,Ye,je))),Rt)break;Ne=Ne.return}0<lt.length&&(Le=new Ue(Le,tt,null,q,Ge),Xe.push({event:Le,listeners:lt}))}}if((F&7)===0){e:{if(Le=z==="mouseover"||z==="pointerover",Ue=z==="mouseout"||z==="pointerout",Le&&q!==so&&(tt=q.relatedTarget||q.fromElement)&&(ei(tt)||tt[Jr]))break e;if((Ue||Le)&&(Le=Ge.window===Ge?Ge:(Le=Ge.ownerDocument)?Le.defaultView||Le.parentWindow:window,Ue?(tt=q.relatedTarget||q.toElement,Ue=De,tt=tt?ei(tt):null,tt!==null&&(Rt=I(tt),lt=tt.tag,tt!==Rt||lt!==5&&lt!==27&&lt!==6)&&(tt=null)):(Ue=null,tt=De),Ue!==tt)){if(lt=Ic,Ye="onMouseLeave",Ie="onMouseEnter",Ne="mouse",(z==="pointerout"||z==="pointerover")&&(lt=Dc,Ye="onPointerLeave",Ie="onPointerEnter",Ne="pointer"),Rt=Ue==null?Le:Ui(Ue),je=tt==null?Le:Ui(tt),Le=new lt(Ye,Ne+"leave",Ue,q,Ge),Le.target=Rt,Le.relatedTarget=je,Ye=null,ei(Ge)===De&&(lt=new lt(Ie,Ne+"enter",tt,q,Ge),lt.target=je,lt.relatedTarget=Rt,Ye=lt),Rt=Ye,Ue&&tt)t:{for(lt=em,Ie=Ue,Ne=tt,je=0,Ye=Ie;Ye;Ye=lt(Ye))je++;Ye=0;for(var ot=Ne;ot;ot=lt(ot))Ye++;for(;0<je-Ye;)Ie=lt(Ie),je--;for(;0<Ye-je;)Ne=lt(Ne),Ye--;for(;je--;){if(Ie===Ne||Ne!==null&&Ie===Ne.alternate){lt=Ie;break t}Ie=lt(Ie),Ne=lt(Ne)}lt=null}else lt=null;Ue!==null&&Md(Xe,Le,Ue,lt,!1),tt!==null&&Rt!==null&&Md(Xe,Rt,tt,lt,!0)}}e:{if(Le=De?Ui(De):window,Ue=Le.nodeName&&Le.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&Le.type==="file")var xt=Vc;else if(Fc(Le))if(Zc)xt=fp;else{xt=cp;var nt=lp}else Ue=Le.nodeName,!Ue||Ue.toLowerCase()!=="input"||Le.type!=="checkbox"&&Le.type!=="radio"?De&&io(De.elementType)&&(xt=Vc):xt=up;if(xt&&(xt=xt(z,De))){Gc(Xe,xt,q,Ge);break e}nt&&nt(z,Le,De),z==="focusout"&&De&&Le.type==="number"&&De.memoizedProps.value!=null&&ro(Le,"number",Le.value)}switch(nt=De?Ui(De):window,z){case"focusin":(Fc(nt)||nt.contentEditable==="true")&&(ci=nt,xo=De,Ki=null);break;case"focusout":Ki=xo=ci=null;break;case"mousedown":bo=!0;break;case"contextmenu":case"mouseup":case"dragend":bo=!1,eu(Xe,q,Ge);break;case"selectionchange":if(hp)break;case"keydown":case"keyup":eu(Xe,q,Ge)}var ft;if(mo)e:{switch(z){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else li?Hc(z,q)&&(mt="onCompositionEnd"):z==="keydown"&&q.keyCode===229&&(mt="onCompositionStart");mt&&(Lc&&q.locale!=="ko"&&(li||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&li&&(ft=Pc()):(fr=Ge,co="value"in fr?fr.value:fr.textContent,li=!0)),nt=Ia(De,mt),0<nt.length&&(mt=new jc(mt,z,null,q,Ge),Xe.push({event:mt,listeners:nt}),ft?mt.data=ft:(ft=Uc(q),ft!==null&&(mt.data=ft)))),(ft=rp?ip(z,q):sp(z,q))&&(mt=Ia(De,"onBeforeInput"),0<mt.length&&(nt=new jc("onBeforeInput","beforeinput",null,q,Ge),Xe.push({event:nt,listeners:mt}),nt.data=ft)),Wp(Xe,z,De,q,Ge)}Rd(Xe,F)})}function Ss(z,F,q){return{instance:z,listener:F,currentTarget:q}}function Ia(z,F){for(var q=F+"Capture",Q=[];z!==null;){var ne=z,se=ne.stateNode;if(ne=ne.tag,ne!==5&&ne!==26&&ne!==27||se===null||(ne=Fi(z,q),ne!=null&&Q.unshift(Ss(z,ne,se)),ne=Fi(z,F),ne!=null&&Q.push(Ss(z,ne,se))),z.tag===3)return Q;z=z.return}return[]}function em(z){if(z===null)return null;do z=z.return;while(z&&z.tag!==5&&z.tag!==27);return z||null}function Md(z,F,q,Q,ne){for(var se=F._reactName,de=[];q!==null&&q!==Q;){var xe=q,$e=xe.alternate,De=xe.stateNode;if(xe=xe.tag,$e!==null&&$e===Q)break;xe!==5&&xe!==26&&xe!==27||De===null||($e=De,ne?(De=Fi(q,se),De!=null&&de.unshift(Ss(q,De,$e))):ne||(De=Fi(q,se),De!=null&&de.push(Ss(q,De,$e)))),q=q.return}de.length!==0&&z.push({event:F,listeners:de})}var tm=/\r\n?/g,nm=/\u0000|\uFFFD/g;function Nd(z){return(typeof z=="string"?z:""+z).replace(tm,`
`).replace(nm,"")}function kd(z,F){return F=Nd(F),Nd(z)===F}function At(z,F,q,Q,ne,se){switch(q){case"children":typeof Q=="string"?F==="body"||F==="textarea"&&Q===""||si(z,Q):(typeof Q=="number"||typeof Q=="bigint")&&F!=="body"&&si(z,""+Q);break;case"className":Ds(z,"class",Q);break;case"tabIndex":Ds(z,"tabindex",Q);break;case"dir":case"role":case"viewBox":case"width":case"height":Ds(z,q,Q);break;case"style":Mc(z,Q,se);break;case"data":if(F!=="object"){Ds(z,"data",Q);break}case"src":case"href":if(Q===""&&(F!=="a"||q!=="href")){z.removeAttribute(q);break}if(Q==null||typeof Q=="function"||typeof Q=="symbol"||typeof Q=="boolean"){z.removeAttribute(q);break}Q=zs(""+Q),z.setAttribute(q,Q);break;case"action":case"formAction":if(typeof Q=="function"){z.setAttribute(q,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof se=="function"&&(q==="formAction"?(F!=="input"&&At(z,F,"name",ne.name,ne,null),At(z,F,"formEncType",ne.formEncType,ne,null),At(z,F,"formMethod",ne.formMethod,ne,null),At(z,F,"formTarget",ne.formTarget,ne,null)):(At(z,F,"encType",ne.encType,ne,null),At(z,F,"method",ne.method,ne,null),At(z,F,"target",ne.target,ne,null)));if(Q==null||typeof Q=="symbol"||typeof Q=="boolean"){z.removeAttribute(q);break}Q=zs(""+Q),z.setAttribute(q,Q);break;case"onClick":Q!=null&&(z.onclick=Gn);break;case"onScroll":Q!=null&&ht("scroll",z);break;case"onScrollEnd":Q!=null&&ht("scrollend",z);break;case"dangerouslySetInnerHTML":if(Q!=null){if(typeof Q!="object"||!("__html"in Q))throw Error(P(61));if(q=Q.__html,q!=null){if(ne.children!=null)throw Error(P(60));z.innerHTML=q}}break;case"multiple":z.multiple=Q&&typeof Q!="function"&&typeof Q!="symbol";break;case"muted":z.muted=Q&&typeof Q!="function"&&typeof Q!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(Q==null||typeof Q=="function"||typeof Q=="boolean"||typeof Q=="symbol"){z.removeAttribute("xlink:href");break}q=zs(""+Q),z.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",q);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":Q!=null&&typeof Q!="function"&&typeof Q!="symbol"?z.setAttribute(q,""+Q):z.removeAttribute(q);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":Q&&typeof Q!="function"&&typeof Q!="symbol"?z.setAttribute(q,""):z.removeAttribute(q);break;case"capture":case"download":Q===!0?z.setAttribute(q,""):Q!==!1&&Q!=null&&typeof Q!="function"&&typeof Q!="symbol"?z.setAttribute(q,Q):z.removeAttribute(q);break;case"cols":case"rows":case"size":case"span":Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&!isNaN(Q)&&1<=Q?z.setAttribute(q,Q):z.removeAttribute(q);break;case"rowSpan":case"start":Q==null||typeof Q=="function"||typeof Q=="symbol"||isNaN(Q)?z.removeAttribute(q):z.setAttribute(q,Q);break;case"popover":ht("beforetoggle",z),ht("toggle",z),js(z,"popover",Q);break;case"xlinkActuate":Fn(z,"http://www.w3.org/1999/xlink","xlink:actuate",Q);break;case"xlinkArcrole":Fn(z,"http://www.w3.org/1999/xlink","xlink:arcrole",Q);break;case"xlinkRole":Fn(z,"http://www.w3.org/1999/xlink","xlink:role",Q);break;case"xlinkShow":Fn(z,"http://www.w3.org/1999/xlink","xlink:show",Q);break;case"xlinkTitle":Fn(z,"http://www.w3.org/1999/xlink","xlink:title",Q);break;case"xlinkType":Fn(z,"http://www.w3.org/1999/xlink","xlink:type",Q);break;case"xmlBase":Fn(z,"http://www.w3.org/XML/1998/namespace","xml:base",Q);break;case"xmlLang":Fn(z,"http://www.w3.org/XML/1998/namespace","xml:lang",Q);break;case"xmlSpace":Fn(z,"http://www.w3.org/XML/1998/namespace","xml:space",Q);break;case"is":js(z,"is",Q);break;case"innerText":case"textContent":break;default:(!(2<q.length)||q[0]!=="o"&&q[0]!=="O"||q[1]!=="n"&&q[1]!=="N")&&(q=Mh.get(q)||q,js(z,q,Q))}}function Vl(z,F,q,Q,ne,se){switch(q){case"style":Mc(z,Q,se);break;case"dangerouslySetInnerHTML":if(Q!=null){if(typeof Q!="object"||!("__html"in Q))throw Error(P(61));if(q=Q.__html,q!=null){if(ne.children!=null)throw Error(P(60));z.innerHTML=q}}break;case"children":typeof Q=="string"?si(z,Q):(typeof Q=="number"||typeof Q=="bigint")&&si(z,""+Q);break;case"onScroll":Q!=null&&ht("scroll",z);break;case"onScrollEnd":Q!=null&&ht("scrollend",z);break;case"onClick":Q!=null&&(z.onclick=Gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vc.hasOwnProperty(q))e:{if(q[0]==="o"&&q[1]==="n"&&(ne=q.endsWith("Capture"),F=q.slice(2,ne?q.length-7:void 0),se=z[on]||null,se=se!=null?se[q]:null,typeof se=="function"&&z.removeEventListener(F,se,ne),typeof Q=="function")){typeof se!="function"&&se!==null&&(q in z?z[q]=null:z.hasAttribute(q)&&z.removeAttribute(q)),z.addEventListener(F,Q,ne);break e}q in z?z[q]=Q:Q===!0?z.setAttribute(q,""):js(z,q,Q)}}}function en(z,F,q){switch(F){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ht("error",z),ht("load",z);var Q=!1,ne=!1,se;for(se in q)if(q.hasOwnProperty(se)){var de=q[se];if(de!=null)switch(se){case"src":Q=!0;break;case"srcSet":ne=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(P(137,F));default:At(z,F,se,de,q,null)}}ne&&At(z,F,"srcSet",q.srcSet,q,null),Q&&At(z,F,"src",q.src,q,null);return;case"input":ht("invalid",z);var xe=se=de=ne=null,$e=null,De=null;for(Q in q)if(q.hasOwnProperty(Q)){var Ge=q[Q];if(Ge!=null)switch(Q){case"name":ne=Ge;break;case"type":de=Ge;break;case"checked":$e=Ge;break;case"defaultChecked":De=Ge;break;case"value":se=Ge;break;case"defaultValue":xe=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(P(137,F));break;default:At(z,F,Q,Ge,q,null)}}Tc(z,se,xe,$e,De,de,ne,!1);return;case"select":ht("invalid",z),Q=de=se=null;for(ne in q)if(q.hasOwnProperty(ne)&&(xe=q[ne],xe!=null))switch(ne){case"value":se=xe;break;case"defaultValue":de=xe;break;case"multiple":Q=xe;default:At(z,F,ne,xe,q,null)}F=se,q=de,z.multiple=!!Q,F!=null?ii(z,!!Q,F,!1):q!=null&&ii(z,!!Q,q,!0);return;case"textarea":ht("invalid",z),se=ne=Q=null;for(de in q)if(q.hasOwnProperty(de)&&(xe=q[de],xe!=null))switch(de){case"value":Q=xe;break;case"defaultValue":ne=xe;break;case"children":se=xe;break;case"dangerouslySetInnerHTML":if(xe!=null)throw Error(P(91));break;default:At(z,F,de,xe,q,null)}Rc(z,Q,ne,se);return;case"option":for($e in q)q.hasOwnProperty($e)&&(Q=q[$e],Q!=null)&&($e==="selected"?z.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":At(z,F,$e,Q,q,null));return;case"dialog":ht("beforetoggle",z),ht("toggle",z),ht("cancel",z),ht("close",z);break;case"iframe":case"object":ht("load",z);break;case"video":case"audio":for(Q=0;Q<vs.length;Q++)ht(vs[Q],z);break;case"image":ht("error",z),ht("load",z);break;case"details":ht("toggle",z);break;case"embed":case"source":case"link":ht("error",z),ht("load",z);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(De in q)if(q.hasOwnProperty(De)&&(Q=q[De],Q!=null))switch(De){case"children":case"dangerouslySetInnerHTML":throw Error(P(137,F));default:At(z,F,De,Q,q,null)}return;default:if(io(F)){for(Ge in q)q.hasOwnProperty(Ge)&&(Q=q[Ge],Q!==void 0&&Vl(z,F,Ge,Q,q,void 0));return}}for(xe in q)q.hasOwnProperty(xe)&&(Q=q[xe],Q!=null&&At(z,F,xe,Q,q,null))}function rm(z,F,q,Q){switch(F){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var ne=null,se=null,de=null,xe=null,$e=null,De=null,Ge=null;for(Ue in q){var Xe=q[Ue];if(q.hasOwnProperty(Ue)&&Xe!=null)switch(Ue){case"checked":break;case"value":break;case"defaultValue":$e=Xe;default:Q.hasOwnProperty(Ue)||At(z,F,Ue,null,Q,Xe)}}for(var Le in Q){var Ue=Q[Le];if(Xe=q[Le],Q.hasOwnProperty(Le)&&(Ue!=null||Xe!=null))switch(Le){case"type":se=Ue;break;case"name":ne=Ue;break;case"checked":De=Ue;break;case"defaultChecked":Ge=Ue;break;case"value":de=Ue;break;case"defaultValue":xe=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(P(137,F));break;default:Ue!==Xe&&At(z,F,Le,Ue,Q,Xe)}}no(z,de,xe,$e,De,Ge,se,ne);return;case"select":Ue=de=xe=Le=null;for(se in q)if($e=q[se],q.hasOwnProperty(se)&&$e!=null)switch(se){case"value":break;case"multiple":Ue=$e;default:Q.hasOwnProperty(se)||At(z,F,se,null,Q,$e)}for(ne in Q)if(se=Q[ne],$e=q[ne],Q.hasOwnProperty(ne)&&(se!=null||$e!=null))switch(ne){case"value":Le=se;break;case"defaultValue":xe=se;break;case"multiple":de=se;default:se!==$e&&At(z,F,ne,se,Q,$e)}F=xe,q=de,Q=Ue,Le!=null?ii(z,!!q,Le,!1):!!Q!=!!q&&(F!=null?ii(z,!!q,F,!0):ii(z,!!q,q?[]:"",!1));return;case"textarea":Ue=Le=null;for(xe in q)if(ne=q[xe],q.hasOwnProperty(xe)&&ne!=null&&!Q.hasOwnProperty(xe))switch(xe){case"value":break;case"children":break;default:At(z,F,xe,null,Q,ne)}for(de in Q)if(ne=Q[de],se=q[de],Q.hasOwnProperty(de)&&(ne!=null||se!=null))switch(de){case"value":Le=ne;break;case"defaultValue":Ue=ne;break;case"children":break;case"dangerouslySetInnerHTML":if(ne!=null)throw Error(P(91));break;default:ne!==se&&At(z,F,de,ne,Q,se)}Ac(z,Le,Ue);return;case"option":for(var tt in q)Le=q[tt],q.hasOwnProperty(tt)&&Le!=null&&!Q.hasOwnProperty(tt)&&(tt==="selected"?z.selected=!1:At(z,F,tt,null,Q,Le));for($e in Q)Le=Q[$e],Ue=q[$e],Q.hasOwnProperty($e)&&Le!==Ue&&(Le!=null||Ue!=null)&&($e==="selected"?z.selected=Le&&typeof Le!="function"&&typeof Le!="symbol":At(z,F,$e,Le,Q,Ue));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lt in q)Le=q[lt],q.hasOwnProperty(lt)&&Le!=null&&!Q.hasOwnProperty(lt)&&At(z,F,lt,null,Q,Le);for(De in Q)if(Le=Q[De],Ue=q[De],Q.hasOwnProperty(De)&&Le!==Ue&&(Le!=null||Ue!=null))switch(De){case"children":case"dangerouslySetInnerHTML":if(Le!=null)throw Error(P(137,F));break;default:At(z,F,De,Le,Q,Ue)}return;default:if(io(F)){for(var Rt in q)Le=q[Rt],q.hasOwnProperty(Rt)&&Le!==void 0&&!Q.hasOwnProperty(Rt)&&Vl(z,F,Rt,void 0,Q,Le);for(Ge in Q)Le=Q[Ge],Ue=q[Ge],!Q.hasOwnProperty(Ge)||Le===Ue||Le===void 0&&Ue===void 0||Vl(z,F,Ge,Le,Q,Ue);return}}for(var Ie in q)Le=q[Ie],q.hasOwnProperty(Ie)&&Le!=null&&!Q.hasOwnProperty(Ie)&&At(z,F,Ie,null,Q,Le);for(Xe in Q)Le=Q[Xe],Ue=q[Xe],!Q.hasOwnProperty(Xe)||Le===Ue||Le==null&&Ue==null||At(z,F,Xe,Le,Q,Ue)}function Pd(z){switch(z){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function im(){if(typeof performance.getEntriesByType=="function"){for(var z=0,F=0,q=performance.getEntriesByType("resource"),Q=0;Q<q.length;Q++){var ne=q[Q],se=ne.transferSize,de=ne.initiatorType,xe=ne.duration;if(se&&xe&&Pd(de)){for(de=0,xe=ne.responseEnd,Q+=1;Q<q.length;Q++){var $e=q[Q],De=$e.startTime;if(De>xe)break;var Ge=$e.transferSize,Xe=$e.initiatorType;Ge&&Pd(Xe)&&($e=$e.responseEnd,de+=Ge*($e<xe?1:(xe-De)/($e-De)))}if(--Q,F+=8*(se+de)/(ne.duration/1e3),z++,10<z)break}}if(0<z)return F/z/1e6}return navigator.connection&&(z=navigator.connection.downlink,typeof z=="number")?z:5}var Zl=null,ql=null;function ja(z){return z.nodeType===9?z:z.ownerDocument}function Od(z){switch(z){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Id(z,F){if(z===0)switch(F){case"svg":return 1;case"math":return 2;default:return 0}return z===1&&F==="foreignObject"?0:z}function Yl(z,F){return z==="textarea"||z==="noscript"||typeof F.children=="string"||typeof F.children=="number"||typeof F.children=="bigint"||typeof F.dangerouslySetInnerHTML=="object"&&F.dangerouslySetInnerHTML!==null&&F.dangerouslySetInnerHTML.__html!=null}var Xl=null;function sm(){var z=window.event;return z&&z.type==="popstate"?z===Xl?!1:(Xl=z,!0):(Xl=null,!1)}var jd=typeof setTimeout=="function"?setTimeout:void 0,am=typeof clearTimeout=="function"?clearTimeout:void 0,Dd=typeof Promise=="function"?Promise:void 0,om=typeof queueMicrotask=="function"?queueMicrotask:typeof Dd<"u"?function(z){return Dd.resolve(null).then(z).catch(lm)}:jd;function lm(z){setTimeout(function(){throw z})}function Rr(z){return z==="head"}function Ld(z,F){var q=F,Q=0;do{var ne=q.nextSibling;if(z.removeChild(q),ne&&ne.nodeType===8)if(q=ne.data,q==="/$"||q==="/&"){if(Q===0){z.removeChild(ne),Di(F);return}Q--}else if(q==="$"||q==="$?"||q==="$~"||q==="$!"||q==="&")Q++;else if(q==="html")ws(z.ownerDocument.documentElement);else if(q==="head"){q=z.ownerDocument.head,ws(q);for(var se=q.firstChild;se;){var de=se.nextSibling,xe=se.nodeName;se[Hi]||xe==="SCRIPT"||xe==="STYLE"||xe==="LINK"&&se.rel.toLowerCase()==="stylesheet"||q.removeChild(se),se=de}}else q==="body"&&ws(z.ownerDocument.body);q=ne}while(q);Di(F)}function zd(z,F){var q=z;z=0;do{var Q=q.nextSibling;if(q.nodeType===1?F?(q._stashedDisplay=q.style.display,q.style.display="none"):(q.style.display=q._stashedDisplay||"",q.getAttribute("style")===""&&q.removeAttribute("style")):q.nodeType===3&&(F?(q._stashedText=q.nodeValue,q.nodeValue=""):q.nodeValue=q._stashedText||""),Q&&Q.nodeType===8)if(q=Q.data,q==="/$"){if(z===0)break;z--}else q!=="$"&&q!=="$?"&&q!=="$~"&&q!=="$!"||z++;q=Q}while(q)}function Wl(z){var F=z.firstChild;for(F&&F.nodeType===10&&(F=F.nextSibling);F;){var q=F;switch(F=F.nextSibling,q.nodeName){case"HTML":case"HEAD":case"BODY":Wl(q),eo(q);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(q.rel.toLowerCase()==="stylesheet")continue}z.removeChild(q)}}function cm(z,F,q,Q){for(;z.nodeType===1;){var ne=q;if(z.nodeName.toLowerCase()!==F.toLowerCase()){if(!Q&&(z.nodeName!=="INPUT"||z.type!=="hidden"))break}else if(Q){if(!z[Hi])switch(F){case"meta":if(!z.hasAttribute("itemprop"))break;return z;case"link":if(se=z.getAttribute("rel"),se==="stylesheet"&&z.hasAttribute("data-precedence"))break;if(se!==ne.rel||z.getAttribute("href")!==(ne.href==null||ne.href===""?null:ne.href)||z.getAttribute("crossorigin")!==(ne.crossOrigin==null?null:ne.crossOrigin)||z.getAttribute("title")!==(ne.title==null?null:ne.title))break;return z;case"style":if(z.hasAttribute("data-precedence"))break;return z;case"script":if(se=z.getAttribute("src"),(se!==(ne.src==null?null:ne.src)||z.getAttribute("type")!==(ne.type==null?null:ne.type)||z.getAttribute("crossorigin")!==(ne.crossOrigin==null?null:ne.crossOrigin))&&se&&z.hasAttribute("async")&&!z.hasAttribute("itemprop"))break;return z;default:return z}}else if(F==="input"&&z.type==="hidden"){var se=ne.name==null?null:""+ne.name;if(ne.type==="hidden"&&z.getAttribute("name")===se)return z}else return z;if(z=Pn(z.nextSibling),z===null)break}return null}function um(z,F,q){if(F==="")return null;for(;z.nodeType!==3;)if((z.nodeType!==1||z.nodeName!=="INPUT"||z.type!=="hidden")&&!q||(z=Pn(z.nextSibling),z===null))return null;return z}function Bd(z,F){for(;z.nodeType!==8;)if((z.nodeType!==1||z.nodeName!=="INPUT"||z.type!=="hidden")&&!F||(z=Pn(z.nextSibling),z===null))return null;return z}function Kl(z){return z.data==="$?"||z.data==="$~"}function Ql(z){return z.data==="$!"||z.data==="$?"&&z.ownerDocument.readyState!=="loading"}function fm(z,F){var q=z.ownerDocument;if(z.data==="$~")z._reactRetry=F;else if(z.data!=="$?"||q.readyState!=="loading")F();else{var Q=function(){F(),q.removeEventListener("DOMContentLoaded",Q)};q.addEventListener("DOMContentLoaded",Q),z._reactRetry=Q}}function Pn(z){for(;z!=null;z=z.nextSibling){var F=z.nodeType;if(F===1||F===3)break;if(F===8){if(F=z.data,F==="$"||F==="$!"||F==="$?"||F==="$~"||F==="&"||F==="F!"||F==="F")break;if(F==="/$"||F==="/&")return null}}return z}var Jl=null;function Hd(z){z=z.nextSibling;for(var F=0;z;){if(z.nodeType===8){var q=z.data;if(q==="/$"||q==="/&"){if(F===0)return Pn(z.nextSibling);F--}else q!=="$"&&q!=="$!"&&q!=="$?"&&q!=="$~"&&q!=="&"||F++}z=z.nextSibling}return null}function Ud(z){z=z.previousSibling;for(var F=0;z;){if(z.nodeType===8){var q=z.data;if(q==="$"||q==="$!"||q==="$?"||q==="$~"||q==="&"){if(F===0)return z;F--}else q!=="/$"&&q!=="/&"||F++}z=z.previousSibling}return null}function Fd(z,F,q){switch(F=ja(q),z){case"html":if(z=F.documentElement,!z)throw Error(P(452));return z;case"head":if(z=F.head,!z)throw Error(P(453));return z;case"body":if(z=F.body,!z)throw Error(P(454));return z;default:throw Error(P(451))}}function ws(z){for(var F=z.attributes;F.length;)z.removeAttributeNode(F[0]);eo(z)}var On=new Map,Gd=new Set;function Da(z){return typeof z.getRootNode=="function"?z.getRootNode():z.nodeType===9?z:z.ownerDocument}var cr=Se.d;Se.d={f:dm,r:hm,D:pm,C:mm,L:gm,m:_m,X:xm,S:ym,M:bm};function dm(){var z=cr.f(),F=Aa();return z||F}function hm(z){var F=ti(z);F!==null&&F.tag===5&&F.type==="form"?af(F):cr.r(z)}var Oi=typeof document>"u"?null:document;function Vd(z,F,q){var Q=Oi;if(Q&&typeof F=="string"&&F){var ne=Tn(F);ne='link[rel="'+z+'"][href="'+ne+'"]',typeof q=="string"&&(ne+='[crossorigin="'+q+'"]'),Gd.has(ne)||(Gd.add(ne),z={rel:z,crossOrigin:q,href:F},Q.querySelector(ne)===null&&(F=Q.createElement("link"),en(F,"link",z),Yt(F),Q.head.appendChild(F)))}}function pm(z){cr.D(z),Vd("dns-prefetch",z,null)}function mm(z,F){cr.C(z,F),Vd("preconnect",z,F)}function gm(z,F,q){cr.L(z,F,q);var Q=Oi;if(Q&&z&&F){var ne='link[rel="preload"][as="'+Tn(F)+'"]';F==="image"&&q&&q.imageSrcSet?(ne+='[imagesrcset="'+Tn(q.imageSrcSet)+'"]',typeof q.imageSizes=="string"&&(ne+='[imagesizes="'+Tn(q.imageSizes)+'"]')):ne+='[href="'+Tn(z)+'"]';var se=ne;switch(F){case"style":se=Ii(z);break;case"script":se=ji(z)}On.has(se)||(z=Y({rel:"preload",href:F==="image"&&q&&q.imageSrcSet?void 0:z,as:F},q),On.set(se,z),Q.querySelector(ne)!==null||F==="style"&&Q.querySelector(Es(se))||F==="script"&&Q.querySelector(Cs(se))||(F=Q.createElement("link"),en(F,"link",z),Yt(F),Q.head.appendChild(F)))}}function _m(z,F){cr.m(z,F);var q=Oi;if(q&&z){var Q=F&&typeof F.as=="string"?F.as:"script",ne='link[rel="modulepreload"][as="'+Tn(Q)+'"][href="'+Tn(z)+'"]',se=ne;switch(Q){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":se=ji(z)}if(!On.has(se)&&(z=Y({rel:"modulepreload",href:z},F),On.set(se,z),q.querySelector(ne)===null)){switch(Q){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(q.querySelector(Cs(se)))return}Q=q.createElement("link"),en(Q,"link",z),Yt(Q),q.head.appendChild(Q)}}}function ym(z,F,q){cr.S(z,F,q);var Q=Oi;if(Q&&z){var ne=ni(Q).hoistableStyles,se=Ii(z);F=F||"default";var de=ne.get(se);if(!de){var xe={loading:0,preload:null};if(de=Q.querySelector(Es(se)))xe.loading=5;else{z=Y({rel:"stylesheet",href:z,"data-precedence":F},q),(q=On.get(se))&&ec(z,q);var $e=de=Q.createElement("link");Yt($e),en($e,"link",z),$e._p=new Promise(function(De,Ge){$e.onload=De,$e.onerror=Ge}),$e.addEventListener("load",function(){xe.loading|=1}),$e.addEventListener("error",function(){xe.loading|=2}),xe.loading|=4,La(de,F,Q)}de={type:"stylesheet",instance:de,count:1,state:xe},ne.set(se,de)}}}function xm(z,F){cr.X(z,F);var q=Oi;if(q&&z){var Q=ni(q).hoistableScripts,ne=ji(z),se=Q.get(ne);se||(se=q.querySelector(Cs(ne)),se||(z=Y({src:z,async:!0},F),(F=On.get(ne))&&tc(z,F),se=q.createElement("script"),Yt(se),en(se,"link",z),q.head.appendChild(se)),se={type:"script",instance:se,count:1,state:null},Q.set(ne,se))}}function bm(z,F){cr.M(z,F);var q=Oi;if(q&&z){var Q=ni(q).hoistableScripts,ne=ji(z),se=Q.get(ne);se||(se=q.querySelector(Cs(ne)),se||(z=Y({src:z,async:!0,type:"module"},F),(F=On.get(ne))&&tc(z,F),se=q.createElement("script"),Yt(se),en(se,"link",z),q.head.appendChild(se)),se={type:"script",instance:se,count:1,state:null},Q.set(ne,se))}}function Zd(z,F,q,Q){var ne=(ne=We.current)?Da(ne):null;if(!ne)throw Error(P(446));switch(z){case"meta":case"title":return null;case"style":return typeof q.precedence=="string"&&typeof q.href=="string"?(F=Ii(q.href),q=ni(ne).hoistableStyles,Q=q.get(F),Q||(Q={type:"style",instance:null,count:0,state:null},q.set(F,Q)),Q):{type:"void",instance:null,count:0,state:null};case"link":if(q.rel==="stylesheet"&&typeof q.href=="string"&&typeof q.precedence=="string"){z=Ii(q.href);var se=ni(ne).hoistableStyles,de=se.get(z);if(de||(ne=ne.ownerDocument||ne,de={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},se.set(z,de),(se=ne.querySelector(Es(z)))&&!se._p&&(de.instance=se,de.state.loading=5),On.has(z)||(q={rel:"preload",as:"style",href:q.href,crossOrigin:q.crossOrigin,integrity:q.integrity,media:q.media,hrefLang:q.hrefLang,referrerPolicy:q.referrerPolicy},On.set(z,q),se||vm(ne,z,q,de.state))),F&&Q===null)throw Error(P(528,""));return de}if(F&&Q!==null)throw Error(P(529,""));return null;case"script":return F=q.async,q=q.src,typeof q=="string"&&F&&typeof F!="function"&&typeof F!="symbol"?(F=ji(q),q=ni(ne).hoistableScripts,Q=q.get(F),Q||(Q={type:"script",instance:null,count:0,state:null},q.set(F,Q)),Q):{type:"void",instance:null,count:0,state:null};default:throw Error(P(444,z))}}function Ii(z){return'href="'+Tn(z)+'"'}function Es(z){return'link[rel="stylesheet"]['+z+"]"}function qd(z){return Y({},z,{"data-precedence":z.precedence,precedence:null})}function vm(z,F,q,Q){z.querySelector('link[rel="preload"][as="style"]['+F+"]")?Q.loading=1:(F=z.createElement("link"),Q.preload=F,F.addEventListener("load",function(){return Q.loading|=1}),F.addEventListener("error",function(){return Q.loading|=2}),en(F,"link",q),Yt(F),z.head.appendChild(F))}function ji(z){return'[src="'+Tn(z)+'"]'}function Cs(z){return"script[async]"+z}function Yd(z,F,q){if(F.count++,F.instance===null)switch(F.type){case"style":var Q=z.querySelector('style[data-href~="'+Tn(q.href)+'"]');if(Q)return F.instance=Q,Yt(Q),Q;var ne=Y({},q,{"data-href":q.href,"data-precedence":q.precedence,href:null,precedence:null});return Q=(z.ownerDocument||z).createElement("style"),Yt(Q),en(Q,"style",ne),La(Q,q.precedence,z),F.instance=Q;case"stylesheet":ne=Ii(q.href);var se=z.querySelector(Es(ne));if(se)return F.state.loading|=4,F.instance=se,Yt(se),se;Q=qd(q),(ne=On.get(ne))&&ec(Q,ne),se=(z.ownerDocument||z).createElement("link"),Yt(se);var de=se;return de._p=new Promise(function(xe,$e){de.onload=xe,de.onerror=$e}),en(se,"link",Q),F.state.loading|=4,La(se,q.precedence,z),F.instance=se;case"script":return se=ji(q.src),(ne=z.querySelector(Cs(se)))?(F.instance=ne,Yt(ne),ne):(Q=q,(ne=On.get(se))&&(Q=Y({},q),tc(Q,ne)),z=z.ownerDocument||z,ne=z.createElement("script"),Yt(ne),en(ne,"link",Q),z.head.appendChild(ne),F.instance=ne);case"void":return null;default:throw Error(P(443,F.type))}else F.type==="stylesheet"&&(F.state.loading&4)===0&&(Q=F.instance,F.state.loading|=4,La(Q,q.precedence,z));return F.instance}function La(z,F,q){for(var Q=q.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),ne=Q.length?Q[Q.length-1]:null,se=ne,de=0;de<Q.length;de++){var xe=Q[de];if(xe.dataset.precedence===F)se=xe;else if(se!==ne)break}se?se.parentNode.insertBefore(z,se.nextSibling):(F=q.nodeType===9?q.head:q,F.insertBefore(z,F.firstChild))}function ec(z,F){z.crossOrigin==null&&(z.crossOrigin=F.crossOrigin),z.referrerPolicy==null&&(z.referrerPolicy=F.referrerPolicy),z.title==null&&(z.title=F.title)}function tc(z,F){z.crossOrigin==null&&(z.crossOrigin=F.crossOrigin),z.referrerPolicy==null&&(z.referrerPolicy=F.referrerPolicy),z.integrity==null&&(z.integrity=F.integrity)}var za=null;function Xd(z,F,q){if(za===null){var Q=new Map,ne=za=new Map;ne.set(q,Q)}else ne=za,Q=ne.get(q),Q||(Q=new Map,ne.set(q,Q));if(Q.has(z))return Q;for(Q.set(z,null),q=q.getElementsByTagName(z),ne=0;ne<q.length;ne++){var se=q[ne];if(!(se[Hi]||se[Wt]||z==="link"&&se.getAttribute("rel")==="stylesheet")&&se.namespaceURI!=="http://www.w3.org/2000/svg"){var de=se.getAttribute(F)||"";de=z+de;var xe=Q.get(de);xe?xe.push(se):Q.set(de,[se])}}return Q}function Wd(z,F,q){z=z.ownerDocument||z,z.head.insertBefore(q,F==="title"?z.querySelector("head > title"):null)}function Sm(z,F,q){if(q===1||F.itemProp!=null)return!1;switch(z){case"meta":case"title":return!0;case"style":if(typeof F.precedence!="string"||typeof F.href!="string"||F.href==="")break;return!0;case"link":if(typeof F.rel!="string"||typeof F.href!="string"||F.href===""||F.onLoad||F.onError)break;return F.rel==="stylesheet"?(z=F.disabled,typeof F.precedence=="string"&&z==null):!0;case"script":if(F.async&&typeof F.async!="function"&&typeof F.async!="symbol"&&!F.onLoad&&!F.onError&&F.src&&typeof F.src=="string")return!0}return!1}function Kd(z){return!(z.type==="stylesheet"&&(z.state.loading&3)===0)}function wm(z,F,q,Q){if(q.type==="stylesheet"&&(typeof Q.media!="string"||matchMedia(Q.media).matches!==!1)&&(q.state.loading&4)===0){if(q.instance===null){var ne=Ii(Q.href),se=F.querySelector(Es(ne));if(se){F=se._p,F!==null&&typeof F=="object"&&typeof F.then=="function"&&(z.count++,z=Ba.bind(z),F.then(z,z)),q.state.loading|=4,q.instance=se,Yt(se);return}se=F.ownerDocument||F,Q=qd(Q),(ne=On.get(ne))&&ec(Q,ne),se=se.createElement("link"),Yt(se);var de=se;de._p=new Promise(function(xe,$e){de.onload=xe,de.onerror=$e}),en(se,"link",Q),q.instance=se}z.stylesheets===null&&(z.stylesheets=new Map),z.stylesheets.set(q,F),(F=q.state.preload)&&(q.state.loading&3)===0&&(z.count++,q=Ba.bind(z),F.addEventListener("load",q),F.addEventListener("error",q))}}var nc=0;function Em(z,F){return z.stylesheets&&z.count===0&&Ua(z,z.stylesheets),0<z.count||0<z.imgCount?function(q){var Q=setTimeout(function(){if(z.stylesheets&&Ua(z,z.stylesheets),z.unsuspend){var se=z.unsuspend;z.unsuspend=null,se()}},6e4+F);0<z.imgBytes&&nc===0&&(nc=62500*im());var ne=setTimeout(function(){if(z.waitingForImages=!1,z.count===0&&(z.stylesheets&&Ua(z,z.stylesheets),z.unsuspend)){var se=z.unsuspend;z.unsuspend=null,se()}},(z.imgBytes>nc?50:800)+F);return z.unsuspend=q,function(){z.unsuspend=null,clearTimeout(Q),clearTimeout(ne)}}:null}function Ba(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ua(this,this.stylesheets);else if(this.unsuspend){var z=this.unsuspend;this.unsuspend=null,z()}}}var Ha=null;function Ua(z,F){z.stylesheets=null,z.unsuspend!==null&&(z.count++,Ha=new Map,F.forEach(Cm,z),Ha=null,Ba.call(z))}function Cm(z,F){if(!(F.state.loading&4)){var q=Ha.get(z);if(q)var Q=q.get(null);else{q=new Map,Ha.set(z,q);for(var ne=z.querySelectorAll("link[data-precedence],style[data-precedence]"),se=0;se<ne.length;se++){var de=ne[se];(de.nodeName==="LINK"||de.getAttribute("media")!=="not all")&&(q.set(de.dataset.precedence,de),Q=de)}Q&&q.set(null,Q)}ne=F.instance,de=ne.getAttribute("data-precedence"),se=q.get(de)||Q,se===Q&&q.set(null,ne),q.set(de,ne),this.count++,Q=Ba.bind(this),ne.addEventListener("load",Q),ne.addEventListener("error",Q),se?se.parentNode.insertBefore(ne,se.nextSibling):(z=z.nodeType===9?z.head:z,z.insertBefore(ne,z.firstChild)),F.state.loading|=4}}var Ts={$$typeof:ce,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function Tm(z,F,q,Q,ne,se,de,xe,$e){this.tag=1,this.containerInfo=z,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wa(0),this.hiddenUpdates=Wa(null),this.identifierPrefix=Q,this.onUncaughtError=ne,this.onCaughtError=se,this.onRecoverableError=de,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$e,this.incompleteTransitions=new Map}function Qd(z,F,q,Q,ne,se,de,xe,$e,De,Ge,Xe){return z=new Tm(z,F,q,de,$e,De,Ge,Xe,xe),F=1,se===!0&&(F|=24),se=gn(3,null,null,F),z.current=se,se.stateNode=z,F=Io(),F.refCount++,z.pooledCache=F,F.refCount++,se.memoizedState={element:Q,isDehydrated:q,cache:F},zo(se),z}function Jd(z){return z?(z=di,z):di}function eh(z,F,q,Q,ne,se){ne=Jd(ne),Q.context===null?Q.context=ne:Q.pendingContext=ne,Q=_r(F),Q.payload={element:q},se=se===void 0?null:se,se!==null&&(Q.callback=se),q=yr(z,Q,F),q!==null&&(pn(q,z,F),is(q,z,F))}function th(z,F){if(z=z.memoizedState,z!==null&&z.dehydrated!==null){var q=z.retryLane;z.retryLane=q!==0&&q<F?q:F}}function rc(z,F){th(z,F),(z=z.alternate)&&th(z,F)}function nh(z){if(z.tag===13||z.tag===31){var F=Br(z,67108864);F!==null&&pn(F,z,67108864),rc(z,67108864)}}function rh(z){if(z.tag===13||z.tag===31){var F=vn();F=Ka(F);var q=Br(z,F);q!==null&&pn(q,z,F),rc(z,F)}}var Fa=!0;function Am(z,F,q,Q){var ne=ye.T;ye.T=null;var se=Se.p;try{Se.p=2,ic(z,F,q,Q)}finally{Se.p=se,ye.T=ne}}function Rm(z,F,q,Q){var ne=ye.T;ye.T=null;var se=Se.p;try{Se.p=8,ic(z,F,q,Q)}finally{Se.p=se,ye.T=ne}}function ic(z,F,q,Q){if(Fa){var ne=sc(Q);if(ne===null)Gl(z,F,Q,Ga,q),sh(z,Q);else if(Mm(ne,z,F,q,Q))Q.stopPropagation();else if(sh(z,Q),F&4&&-1<$m.indexOf(z)){for(;ne!==null;){var se=ti(ne);if(se!==null)switch(se.tag){case 3:if(se=se.stateNode,se.current.memoizedState.isDehydrated){var de=Ir(se.pendingLanes);if(de!==0){var xe=se;for(xe.pendingLanes|=2,xe.entangledLanes|=2;de;){var $e=1<<31-rn(de);xe.entanglements[1]|=$e,de&=~$e}Hn(se),(St&6)===0&&(Ca=st()+500,bs(0))}}break;case 31:case 13:xe=Br(se,2),xe!==null&&pn(xe,se,2),Aa(),rc(se,2)}if(se=sc(Q),se===null&&Gl(z,F,Q,Ga,q),se===ne)break;ne=se}ne!==null&&Q.stopPropagation()}else Gl(z,F,Q,null,q)}}function sc(z){return z=ao(z),ac(z)}var Ga=null;function ac(z){if(Ga=null,z=ei(z),z!==null){var F=I(z);if(F===null)z=null;else{var q=F.tag;if(q===13){if(z=L(F),z!==null)return z;z=null}else if(q===31){if(z=U(F),z!==null)return z;z=null}else if(q===3){if(F.stateNode.current.memoizedState.isDehydrated)return F.tag===3?F.stateNode.containerInfo:null;z=null}else F!==z&&(z=null)}}return Ga=z,null}function ih(z){switch(z){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vt()){case yt:return 2;case kt:return 8;case Pt:case wn:return 32;case tn:return 268435456;default:return 32}default:return 32}}var oc=!1,$r=null,Mr=null,Nr=null,As=new Map,Rs=new Map,Pr=[],$m="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sh(z,F){switch(z){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":As.delete(F.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rs.delete(F.pointerId)}}function $s(z,F,q,Q,ne,se){return z===null||z.nativeEvent!==se?(z={blockedOn:F,domEventName:q,eventSystemFlags:Q,nativeEvent:se,targetContainers:[ne]},F!==null&&(F=ti(F),F!==null&&nh(F)),z):(z.eventSystemFlags|=Q,F=z.targetContainers,ne!==null&&F.indexOf(ne)===-1&&F.push(ne),z)}function Mm(z,F,q,Q,ne){switch(F){case"focusin":return $r=$s($r,z,F,q,Q,ne),!0;case"dragenter":return Mr=$s(Mr,z,F,q,Q,ne),!0;case"mouseover":return Nr=$s(Nr,z,F,q,Q,ne),!0;case"pointerover":var se=ne.pointerId;return As.set(se,$s(As.get(se)||null,z,F,q,Q,ne)),!0;case"gotpointercapture":return se=ne.pointerId,Rs.set(se,$s(Rs.get(se)||null,z,F,q,Q,ne)),!0}return!1}function ah(z){var F=ei(z.target);if(F!==null){var q=I(F);if(q!==null){if(F=q.tag,F===13){if(F=L(q),F!==null){z.blockedOn=F,yc(z.priority,function(){rh(q)});return}}else if(F===31){if(F=U(q),F!==null){z.blockedOn=F,yc(z.priority,function(){rh(q)});return}}else if(F===3&&q.stateNode.current.memoizedState.isDehydrated){z.blockedOn=q.tag===3?q.stateNode.containerInfo:null;return}}}z.blockedOn=null}function Va(z){if(z.blockedOn!==null)return!1;for(var F=z.targetContainers;0<F.length;){var q=sc(z.nativeEvent);if(q===null){q=z.nativeEvent;var Q=new q.constructor(q.type,q);so=Q,q.target.dispatchEvent(Q),so=null}else return F=ti(q),F!==null&&nh(F),z.blockedOn=q,!1;F.shift()}return!0}function oh(z,F,q){Va(z)&&q.delete(F)}function Nm(){oc=!1,$r!==null&&Va($r)&&($r=null),Mr!==null&&Va(Mr)&&(Mr=null),Nr!==null&&Va(Nr)&&(Nr=null),As.forEach(oh),Rs.forEach(oh)}function Za(z,F){z.blockedOn===F&&(z.blockedOn=null,oc||(oc=!0,_.unstable_scheduleCallback(_.unstable_NormalPriority,Nm)))}var qa=null;function lh(z){qa!==z&&(qa=z,_.unstable_scheduleCallback(_.unstable_NormalPriority,function(){qa===z&&(qa=null);for(var F=0;F<z.length;F+=3){var q=z[F],Q=z[F+1],ne=z[F+2];if(typeof Q!="function"){if(ac(Q||q)===null)continue;break}var se=ti(q);se!==null&&(z.splice(F,3),F-=3,sl(se,{pending:!0,data:ne,method:q.method,action:Q},Q,ne))}}))}function Di(z){function F($e){return Za($e,z)}$r!==null&&Za($r,z),Mr!==null&&Za(Mr,z),Nr!==null&&Za(Nr,z),As.forEach(F),Rs.forEach(F);for(var q=0;q<Pr.length;q++){var Q=Pr[q];Q.blockedOn===z&&(Q.blockedOn=null)}for(;0<Pr.length&&(q=Pr[0],q.blockedOn===null);)ah(q),q.blockedOn===null&&Pr.shift();if(q=(z.ownerDocument||z).$$reactFormReplay,q!=null)for(Q=0;Q<q.length;Q+=3){var ne=q[Q],se=q[Q+1],de=ne[on]||null;if(typeof se=="function")de||lh(q);else if(de){var xe=null;if(se&&se.hasAttribute("formAction")){if(ne=se,de=se[on]||null)xe=de.formAction;else if(ac(ne)!==null)continue}else xe=de.action;typeof xe=="function"?q[Q+1]=xe:(q.splice(Q,3),Q-=3),lh(q)}}}function ch(){function z(se){se.canIntercept&&se.info==="react-transition"&&se.intercept({handler:function(){return new Promise(function(de){return ne=de})},focusReset:"manual",scroll:"manual"})}function F(){ne!==null&&(ne(),ne=null),Q||setTimeout(q,20)}function q(){if(!Q&&!navigation.transition){var se=navigation.currentEntry;se&&se.url!=null&&navigation.navigate(se.url,{state:se.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var Q=!1,ne=null;return navigation.addEventListener("navigate",z),navigation.addEventListener("navigatesuccess",F),navigation.addEventListener("navigateerror",F),setTimeout(q,100),function(){Q=!0,navigation.removeEventListener("navigate",z),navigation.removeEventListener("navigatesuccess",F),navigation.removeEventListener("navigateerror",F),ne!==null&&(ne(),ne=null)}}}function lc(z){this._internalRoot=z}Ya.prototype.render=lc.prototype.render=function(z){var F=this._internalRoot;if(F===null)throw Error(P(409));var q=F.current,Q=vn();eh(q,Q,z,F,null,null)},Ya.prototype.unmount=lc.prototype.unmount=function(){var z=this._internalRoot;if(z!==null){this._internalRoot=null;var F=z.containerInfo;eh(z.current,2,null,z,null,null),Aa(),F[Jr]=null}};function Ya(z){this._internalRoot=z}Ya.prototype.unstable_scheduleHydration=function(z){if(z){var F=_c();z={blockedOn:null,target:z,priority:F};for(var q=0;q<Pr.length&&F!==0&&F<Pr[q].priority;q++);Pr.splice(q,0,z),q===0&&ah(z)}};var uh=T.version;if(uh!=="19.2.3")throw Error(P(527,uh,"19.2.3"));Se.findDOMNode=function(z){var F=z._reactInternals;if(F===void 0)throw typeof z.render=="function"?Error(P(188)):(z=Object.keys(z).join(","),Error(P(268,z)));return z=V(F),z=z!==null?Z(z):null,z=z===null?null:z.stateNode,z};var km={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ye,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xa.isDisabled&&Xa.supportsFiber)try{nn=Xa.inject(km),$t=Xa}catch{}}return reactDomClient_production.createRoot=function(z,F){if(!O(z))throw Error(P(299));var q=!1,Q="",ne=gf,se=_f,de=yf;return F!=null&&(F.unstable_strictMode===!0&&(q=!0),F.identifierPrefix!==void 0&&(Q=F.identifierPrefix),F.onUncaughtError!==void 0&&(ne=F.onUncaughtError),F.onCaughtError!==void 0&&(se=F.onCaughtError),F.onRecoverableError!==void 0&&(de=F.onRecoverableError)),F=Qd(z,1,!1,null,null,q,Q,null,ne,se,de,ch),z[Jr]=F.current,Fl(z),new lc(F)},reactDomClient_production.hydrateRoot=function(z,F,q){if(!O(z))throw Error(P(299));var Q=!1,ne="",se=gf,de=_f,xe=yf,$e=null;return q!=null&&(q.unstable_strictMode===!0&&(Q=!0),q.identifierPrefix!==void 0&&(ne=q.identifierPrefix),q.onUncaughtError!==void 0&&(se=q.onUncaughtError),q.onCaughtError!==void 0&&(de=q.onCaughtError),q.onRecoverableError!==void 0&&(xe=q.onRecoverableError),q.formState!==void 0&&($e=q.formState)),F=Qd(z,1,!0,F,q??null,Q,ne,$e,se,de,xe,ch),F.context=Jd(null),q=F.current,Q=vn(),Q=Ka(Q),ne=_r(Q),ne.callback=null,yr(q,ne,Q),q=Q,F.current.lanes=q,Bi(F,q),Hn(F),z[Jr]=F.current,Fl(z),new Ya(F)},reactDomClient_production.version="19.2.3",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(T){console.error(T)}}return _(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();function parseVersion(_){const T=_.split(".").map(Number);return{major:T[0]||0,minor:T[1]||0,patch:T[2]||0}}function compareVersions(_,T){return _.major!==T.major?_.major-T.major:_.minor!==T.minor?_.minor-T.minor:_.patch-T.patch}function isCompatible(_,T){return _.major===T.major&&compareVersions(_,T)>=0}function formatVersion(_){return`${_.major}.${_.minor}.${_.patch}`}class ModelRegistry{models=new Map;defaultModelName=null;constructor(){console.log("[Registry] Initializing")}register(T){const R=parseVersion(T.version),P=formatVersion(R),O=T;if(!this.models.has(T.id))this.models.set(T.id,{latestModel:O,versions:new Map([[P,O]])}),console.log(`[Registry] Registered new model: ${T.id} (v${P})`);else{const I=this.models.get(T.id);I.versions.set(P,O);const L=parseVersion(I.latestModel.version);(R.major>L.major||R.major===L.major&&R.minor>L.minor||R.major===L.major&&R.minor===L.minor&&R.patch>L.patch)&&(I.latestModel=O,console.log(`[Registry] Updated model ${T.id} to version ${P}`))}}setDefault(T){if(!this.models.has(T))throw new Error(`Cannot set default: model "${T}" is not registered`);this.defaultModelName=T}get(T){return this.models.get(T)?.latestModel}getVersion(T,R){return this.models.get(T)?.versions.get(R)}getModelNames(){return Array.from(this.models.keys())}getVersions(T){const R=this.models.get(T);return R?Array.from(R.versions.keys()):[]}getDefault(){return this.defaultModelName?this.get(this.defaultModelName):void 0}getDefaultName(){return this.defaultModelName}findCompatibleModel(T){const R=this.models.get(T.model);if(!R)return;const P=parseVersion(T.version);let O,I;for(const[L,U]of R.versions){const G=parseVersion(L);isCompatible(G,P)&&(!I||G.minor>I.minor||G.minor===I.minor&&G.patch>I.patch)&&(O=U,I=G)}return O}has(T){return this.models.has(T)}getAll(){return Array.from(this.models.values()).map(T=>T.latestModel)}}const modelRegistry=new ModelRegistry;class Vector2{constructor(T=0,R=0){this.x=T,this.y=R}static from(T){return new Vector2(T.x,T.y)}static zero(){return new Vector2(0,0)}static fromAngle(T){return new Vector2(Math.cos(T),Math.sin(T))}add(T){return new Vector2(this.x+T.x,this.y+T.y)}sub(T){return new Vector2(this.x-T.x,this.y-T.y)}scale(T){return new Vector2(this.x*T,this.y*T)}mult(T){return this.scale(T)}div(T){return T===0?(console.warn("Vector2.div: division by zero"),this):new Vector2(this.x/T,this.y/T)}negate(){return new Vector2(-this.x,-this.y)}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}magSq(){return this.x*this.x+this.y*this.y}normalize(){const T=this.mag();return T===0?this:new Vector2(this.x/T,this.y/T)}setMag(T){return this.normalize().scale(T)}limit(T){return this.magSq()>T*T?this.normalize().scale(T):this}dot(T){return this.x*T.x+this.y*T.y}cross(T){return this.x*T.y-this.y*T.x}dist(T){const R=this.x-T.x,P=this.y-T.y;return Math.sqrt(R*R+P*P)}distSq(T){const R=this.x-T.x,P=this.y-T.y;return R*R+P*P}heading(){return Math.atan2(this.y,this.x)}rotate(T){const R=Math.cos(T),P=Math.sin(T);return new Vector2(this.x*R-this.y*P,this.x*P+this.y*R)}lerp(T,R){return new Vector2(this.x+(T.x-this.x)*R,this.y+(T.y-this.y)*R)}equals(T){return this.x===T.x&&this.y===T.y}approxEquals(T,R=1e-10){return Math.abs(this.x-T.x)<R&&Math.abs(this.y-T.y)<R}copy(){return new Vector2(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toString(){return`Vector2(${this.x}, ${this.y})`}toArray(){return[this.x,this.y]}}var alea$1={exports:{}},alea=alea$1.exports,hasRequiredAlea;function requireAlea(){return hasRequiredAlea||(hasRequiredAlea=1,(function(_){(function(T,R,P){function O(G){var V=this,Z=U();V.next=function(){var Y=2091639*V.s0+V.c*23283064365386963e-26;return V.s0=V.s1,V.s1=V.s2,V.s2=Y-(V.c=Y|0)},V.c=1,V.s0=Z(" "),V.s1=Z(" "),V.s2=Z(" "),V.s0-=Z(G),V.s0<0&&(V.s0+=1),V.s1-=Z(G),V.s1<0&&(V.s1+=1),V.s2-=Z(G),V.s2<0&&(V.s2+=1),Z=null}function I(G,V){return V.c=G.c,V.s0=G.s0,V.s1=G.s1,V.s2=G.s2,V}function L(G,V){var Z=new O(G),Y=V&&V.state,W=Z.next;return W.int32=function(){return Z.next()*4294967296|0},W.double=function(){return W()+(W()*2097152|0)*11102230246251565e-32},W.quick=W,Y&&(typeof Y=="object"&&I(Y,Z),W.state=function(){return I(Z,{})}),W}function U(){var G=4022871197,V=function(Z){Z=String(Z);for(var Y=0;Y<Z.length;Y++){G+=Z.charCodeAt(Y);var W=.02519603282416938*G;G=W>>>0,W-=G,W*=G,G=W>>>0,W-=G,G+=W*4294967296}return(G>>>0)*23283064365386963e-26};return V}R&&R.exports?R.exports=L:this.alea=L})(alea,_)})(alea$1)),alea$1.exports}var xor128$1={exports:{}},xor128=xor128$1.exports,hasRequiredXor128;function requireXor128(){return hasRequiredXor128||(hasRequiredXor128=1,(function(_){(function(T,R,P){function O(U){var G=this,V="";G.x=0,G.y=0,G.z=0,G.w=0,G.next=function(){var Y=G.x^G.x<<11;return G.x=G.y,G.y=G.z,G.z=G.w,G.w^=G.w>>>19^Y^Y>>>8},U===(U|0)?G.x=U:V+=U;for(var Z=0;Z<V.length+64;Z++)G.x^=V.charCodeAt(Z)|0,G.next()}function I(U,G){return G.x=U.x,G.y=U.y,G.z=U.z,G.w=U.w,G}function L(U,G){var V=new O(U),Z=G&&G.state,Y=function(){return(V.next()>>>0)/4294967296};return Y.double=function(){do var W=V.next()>>>11,J=(V.next()>>>0)/4294967296,ee=(W+J)/(1<<21);while(ee===0);return ee},Y.int32=V.next,Y.quick=Y,Z&&(typeof Z=="object"&&I(Z,V),Y.state=function(){return I(V,{})}),Y}R&&R.exports?R.exports=L:this.xor128=L})(xor128,_)})(xor128$1)),xor128$1.exports}var xorwow$1={exports:{}},xorwow=xorwow$1.exports,hasRequiredXorwow;function requireXorwow(){return hasRequiredXorwow||(hasRequiredXorwow=1,(function(_){(function(T,R,P){function O(U){var G=this,V="";G.next=function(){var Y=G.x^G.x>>>2;return G.x=G.y,G.y=G.z,G.z=G.w,G.w=G.v,(G.d=G.d+362437|0)+(G.v=G.v^G.v<<4^(Y^Y<<1))|0},G.x=0,G.y=0,G.z=0,G.w=0,G.v=0,U===(U|0)?G.x=U:V+=U;for(var Z=0;Z<V.length+64;Z++)G.x^=V.charCodeAt(Z)|0,Z==V.length&&(G.d=G.x<<10^G.x>>>4),G.next()}function I(U,G){return G.x=U.x,G.y=U.y,G.z=U.z,G.w=U.w,G.v=U.v,G.d=U.d,G}function L(U,G){var V=new O(U),Z=G&&G.state,Y=function(){return(V.next()>>>0)/4294967296};return Y.double=function(){do var W=V.next()>>>11,J=(V.next()>>>0)/4294967296,ee=(W+J)/(1<<21);while(ee===0);return ee},Y.int32=V.next,Y.quick=Y,Z&&(typeof Z=="object"&&I(Z,V),Y.state=function(){return I(V,{})}),Y}R&&R.exports?R.exports=L:this.xorwow=L})(xorwow,_)})(xorwow$1)),xorwow$1.exports}var xorshift7$1={exports:{}},xorshift7=xorshift7$1.exports,hasRequiredXorshift7;function requireXorshift7(){return hasRequiredXorshift7||(hasRequiredXorshift7=1,(function(_){(function(T,R,P){function O(U){var G=this;G.next=function(){var Z=G.x,Y=G.i,W,J;return W=Z[Y],W^=W>>>7,J=W^W<<24,W=Z[Y+1&7],J^=W^W>>>10,W=Z[Y+3&7],J^=W^W>>>3,W=Z[Y+4&7],J^=W^W<<7,W=Z[Y+7&7],W=W^W<<13,J^=W^W<<9,Z[Y]=J,G.i=Y+1&7,J};function V(Z,Y){var W,J=[];if(Y===(Y|0))J[0]=Y;else for(Y=""+Y,W=0;W<Y.length;++W)J[W&7]=J[W&7]<<15^Y.charCodeAt(W)+J[W+1&7]<<13;for(;J.length<8;)J.push(0);for(W=0;W<8&&J[W]===0;++W);for(W==8?J[7]=-1:J[W],Z.x=J,Z.i=0,W=256;W>0;--W)Z.next()}V(G,U)}function I(U,G){return G.x=U.x.slice(),G.i=U.i,G}function L(U,G){U==null&&(U=+new Date);var V=new O(U),Z=G&&G.state,Y=function(){return(V.next()>>>0)/4294967296};return Y.double=function(){do var W=V.next()>>>11,J=(V.next()>>>0)/4294967296,ee=(W+J)/(1<<21);while(ee===0);return ee},Y.int32=V.next,Y.quick=Y,Z&&(Z.x&&I(Z,V),Y.state=function(){return I(V,{})}),Y}R&&R.exports?R.exports=L:this.xorshift7=L})(xorshift7,_)})(xorshift7$1)),xorshift7$1.exports}var xor4096$1={exports:{}},xor4096=xor4096$1.exports,hasRequiredXor4096;function requireXor4096(){return hasRequiredXor4096||(hasRequiredXor4096=1,(function(_){(function(T,R,P){function O(U){var G=this;G.next=function(){var Z=G.w,Y=G.X,W=G.i,J,ee;return G.w=Z=Z+1640531527|0,ee=Y[W+34&127],J=Y[W=W+1&127],ee^=ee<<13,J^=J<<17,ee^=ee>>>15,J^=J>>>12,ee=Y[W]=ee^J,G.i=W,ee+(Z^Z>>>16)|0};function V(Z,Y){var W,J,ee,te,ie,oe=[],ae=128;for(Y===(Y|0)?(J=Y,Y=null):(Y=Y+"\0",J=0,ae=Math.max(ae,Y.length)),ee=0,te=-32;te<ae;++te)Y&&(J^=Y.charCodeAt((te+32)%Y.length)),te===0&&(ie=J),J^=J<<10,J^=J>>>15,J^=J<<4,J^=J>>>13,te>=0&&(ie=ie+1640531527|0,W=oe[te&127]^=J+ie,ee=W==0?ee+1:0);for(ee>=128&&(oe[(Y&&Y.length||0)&127]=-1),ee=127,te=512;te>0;--te)J=oe[ee+34&127],W=oe[ee=ee+1&127],J^=J<<13,W^=W<<17,J^=J>>>15,W^=W>>>12,oe[ee]=J^W;Z.w=ie,Z.X=oe,Z.i=ee}V(G,U)}function I(U,G){return G.i=U.i,G.w=U.w,G.X=U.X.slice(),G}function L(U,G){U==null&&(U=+new Date);var V=new O(U),Z=G&&G.state,Y=function(){return(V.next()>>>0)/4294967296};return Y.double=function(){do var W=V.next()>>>11,J=(V.next()>>>0)/4294967296,ee=(W+J)/(1<<21);while(ee===0);return ee},Y.int32=V.next,Y.quick=Y,Z&&(Z.X&&I(Z,V),Y.state=function(){return I(V,{})}),Y}R&&R.exports?R.exports=L:this.xor4096=L})(xor4096,_)})(xor4096$1)),xor4096$1.exports}var tychei$1={exports:{}},tychei=tychei$1.exports,hasRequiredTychei;function requireTychei(){return hasRequiredTychei||(hasRequiredTychei=1,(function(_){(function(T,R,P){function O(U){var G=this,V="";G.next=function(){var Y=G.b,W=G.c,J=G.d,ee=G.a;return Y=Y<<25^Y>>>7^W,W=W-J|0,J=J<<24^J>>>8^ee,ee=ee-Y|0,G.b=Y=Y<<20^Y>>>12^W,G.c=W=W-J|0,G.d=J<<16^W>>>16^ee,G.a=ee-Y|0},G.a=0,G.b=0,G.c=-1640531527,G.d=1367130551,U===Math.floor(U)?(G.a=U/4294967296|0,G.b=U|0):V+=U;for(var Z=0;Z<V.length+20;Z++)G.b^=V.charCodeAt(Z)|0,G.next()}function I(U,G){return G.a=U.a,G.b=U.b,G.c=U.c,G.d=U.d,G}function L(U,G){var V=new O(U),Z=G&&G.state,Y=function(){return(V.next()>>>0)/4294967296};return Y.double=function(){do var W=V.next()>>>11,J=(V.next()>>>0)/4294967296,ee=(W+J)/(1<<21);while(ee===0);return ee},Y.int32=V.next,Y.quick=Y,Z&&(typeof Z=="object"&&I(Z,V),Y.state=function(){return I(V,{})}),Y}R&&R.exports?R.exports=L:this.tychei=L})(tychei,_)})(tychei$1)),tychei$1.exports}var seedrandom$3={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var seedrandom$2=seedrandom$3.exports,hasRequiredSeedrandom$1;function requireSeedrandom$1(){return hasRequiredSeedrandom$1||(hasRequiredSeedrandom$1=1,(function(_){(function(T,R,P){var O=256,I=6,L=52,U="random",G=P.pow(O,I),V=P.pow(2,L),Z=V*2,Y=O-1,W;function J(le,he,me){var fe=[];he=he==!0?{entropy:!0}:he||{};var ue=oe(ie(he.entropy?[le,ce(R)]:le??ae(),3),fe),pe=new ee(fe),ge=function(){for(var _e=pe.g(I),we=G,be=0;_e<V;)_e=(_e+be)*O,we*=O,be=pe.g(1);for(;_e>=Z;)_e/=2,we/=2,be>>>=1;return(_e+be)/we};return ge.int32=function(){return pe.g(4)|0},ge.quick=function(){return pe.g(4)/4294967296},ge.double=ge,oe(ce(pe.S),R),(he.pass||me||function(_e,we,be,Ce){return Ce&&(Ce.S&&te(Ce,pe),_e.state=function(){return te(pe,{})}),be?(P[U]=_e,we):_e})(ge,ue,"global"in he?he.global:this==P,he.state)}function ee(le){var he,me=le.length,fe=this,ue=0,pe=fe.i=fe.j=0,ge=fe.S=[];for(me||(le=[me++]);ue<O;)ge[ue]=ue++;for(ue=0;ue<O;ue++)ge[ue]=ge[pe=Y&pe+le[ue%me]+(he=ge[ue])],ge[pe]=he;(fe.g=function(_e){for(var we,be=0,Ce=fe.i,Ee=fe.j,ye=fe.S;_e--;)we=ye[Ce=Y&Ce+1],be=be*O+ye[Y&(ye[Ce]=ye[Ee=Y&Ee+we])+(ye[Ee]=we)];return fe.i=Ce,fe.j=Ee,be})(O)}function te(le,he){return he.i=le.i,he.j=le.j,he.S=le.S.slice(),he}function ie(le,he){var me=[],fe=typeof le,ue;if(he&&fe=="object")for(ue in le)try{me.push(ie(le[ue],he-1))}catch{}return me.length?me:fe=="string"?le:le+"\0"}function oe(le,he){for(var me=le+"",fe,ue=0;ue<me.length;)he[Y&ue]=Y&(fe^=he[Y&ue]*19)+me.charCodeAt(ue++);return ce(he)}function ae(){try{var le;return W&&(le=W.randomBytes)?le=le(O):(le=new Uint8Array(O),(T.crypto||T.msCrypto).getRandomValues(le)),ce(le)}catch{var he=T.navigator,me=he&&he.plugins;return[+new Date,T,me,T.screen,ce(R)]}}function ce(le){return String.fromCharCode.apply(0,le)}if(oe(P.random(),R),_.exports){_.exports=J;try{W=require$$0}catch{}}else P["seed"+U]=J})(typeof self<"u"?self:seedrandom$2,[],Math)})(seedrandom$3)),seedrandom$3.exports}var seedrandom$1,hasRequiredSeedrandom;function requireSeedrandom(){if(hasRequiredSeedrandom)return seedrandom$1;hasRequiredSeedrandom=1;var _=requireAlea(),T=requireXor128(),R=requireXorwow(),P=requireXorshift7(),O=requireXor4096(),I=requireTychei(),L=requireSeedrandom$1();return L.alea=_,L.xor128=T,L.xorwow=R,L.xorshift7=P,L.xor4096=O,L.tychei=I,seedrandom$1=L,seedrandom$1}var seedrandomExports=requireSeedrandom();const seedrandom=getDefaultExportFromCjs(seedrandomExports);class SeededRandom{rng;constructor(T=0){this.rng=seedrandom(String(T))}reset(T){this.rng=seedrandom(String(T))}random(T,R){const P=this.rng();return T===void 0?P:R===void 0?P*T:T+P*(R-T)}randomInt(T,R){return Math.floor(R===void 0?this.random(T):this.random(T,R))}randomBool(T=.5){return this.rng()<T}gaussian(){let T,R;do T=this.rng(),R=this.rng();while(T===0);return Math.sqrt(-2*Math.log(T))*Math.cos(2*Math.PI*R)}randomGaussian(T=0,R=1){return T+R*this.gaussian()}choice(T){if(T.length===0)throw new Error("Cannot pick from empty array");return T[Math.floor(this.rng()*T.length)]}shuffle(T){for(let R=T.length-1;R>0;R--){const P=Math.floor(this.rng()*(R+1));[T[R],T[P]]=[T[P],T[R]]}return T}}function shapeCenter(_,T){return _===0&&T===0?new Vector2(0,0):T===0?new Vector2(0,0):new Vector2(0,1/T)}class BasalGeometry{curvedToCartesian(T,R){const P=this.getPointAtArcLength(T),O=this.getNormal(P);return P.add(O.scale(R))}}class StraightLineGeometry extends BasalGeometry{type="line";curvature_1=0;curvature_2=0;perimeter=1/0;projectPoint(T){return new Vector2(T.x,0)}getArcLength(T){return T.x}getPointAtArcLength(T){return new Vector2(T,0)}getNormal(T){return new Vector2(0,1)}}class CircularGeometry extends BasalGeometry{constructor(T,R){super(),this.curvature_1=T,this.curvature_2=R,this.radius=Math.abs(1/T),this.perimeter=2*Math.PI*this.radius,this.dir=-Math.sign(R),this.center=new Vector2(0,1/R)}type="circle";center;radius;perimeter;dir;projectPoint(T){const R=T.sub(this.center);return this.center.add(R.setMag(this.radius))}getArcLength(T){const R=T.sub(this.center);return Math.atan2(this.dir*R.x,this.dir*R.y)*this.radius}getPointAtArcLength(T){const R=T/this.radius;return new Vector2(this.center.x+this.dir*this.radius*Math.cos(R),this.center.y+this.dir*this.radius*Math.sin(R))}getNormal(T){return this.center.sub(T).setMag(Math.sign(this.curvature_2))}}class EllipticalGeometry extends BasalGeometry{constructor(T,R,P=360){super(),this.curvature_1=T,this.curvature_2=R,this.a=Math.abs(1/T),this.b=Math.abs(1/R),this.dir=-Math.sign(R),this.center=new Vector2(0,1/R),this.numPoints=P,this.points=this.discretizeCurve(),this.perimeter=this.points[this.points.length-1].arcLength}type="ellipse";center;a;b;dir;perimeter;points;numPoints;discretizeCurve(){const T=[];let R=0;for(let P=0;P<=this.numPoints;P++){const O=P/this.numPoints*2*Math.PI,I=this.center.x+this.dir*this.a*Math.cos(O),L=this.center.y+this.dir*this.b*Math.sin(O),U=new Vector2(I,L);if(P>0){const W=T[P-1].position,J=U.dist(W);R+=J}const G=U.sub(this.center).scale(this.dir),V=2*G.x/(this.a*this.a),Z=2*G.y/(this.b*this.b),Y=new Vector2(V,Z).setMag(Math.sign(this.curvature_2));T.push({position:U,arcLength:R,theta:O,normal:Y})}return T}findBracket(T,R){let P=0,O=this.points.length-1;for(;O-P>1;){const I=Math.floor((P+O)/2);R(this.points[I])<T?P=I:O=I}return[P,O]}interpolate(T,R,P,O){const I=O(T),L=O(R),U=(P-I)/(L-I);return{position:T.position.lerp(R.position,U),arcLength:T.arcLength+U*(R.arcLength-T.arcLength),theta:T.theta+U*(R.theta-T.theta),normal:T.normal.lerp(R.normal,U).normalize()}}projectPoint(T){let R=1/0,P=0;for(let J=0;J<this.points.length;J++){const ee=T.distSq(this.points[J].position);ee<R&&(R=ee,P=J)}const O=P===0?this.points.length-1:P-1,I=P===this.points.length-1?0:P+1,L=this.points[P].position,U=this.points[O].position,G=this.points[I].position,V=this.projectOntoSegment(T,U,L),Z=T.distSq(V),Y=this.projectOntoSegment(T,L,G),W=T.distSq(Y);return Z<W?V:Y}projectOntoSegment(T,R,P){const O=P.sub(R),I=T.sub(R),L=O.magSq();if(L<1e-10)return R;const U=Math.max(0,Math.min(1,I.dot(O)/L));return R.add(O.scale(U))}getArcLength(T){const R=this.projectPoint(T);let P=1/0,O=0;for(let I=0;I<this.points.length;I++){const L=R.distSq(this.points[I].position);L<P&&(P=L,O=I)}return this.points[O].arcLength}getPointAtArcLength(T){const R=(T%this.perimeter+this.perimeter)%this.perimeter,[P,O]=this.findBracket(R,L=>L.arcLength);return this.interpolate(this.points[P],this.points[O],R,L=>L.arcLength).position}getNormal(T){let R=1/0,P=0;for(let O=0;O<this.points.length;O++){const I=T.distSq(this.points[O].position);I<R&&(R=I,P=O)}return this.points[P].normal}}function createBasalGeometry(_,T,R=360){return _===0&&T===0?new StraightLineGeometry:Math.abs(_-T)<1e-10?new CircularGeometry(_,T):new EllipticalGeometry(_,T,R)}var CellPhase=(_=>(_[_.G1=0]="G1",_[_.G2=1]="G2",_[_.Mitosis=2]="Mitosis",_[_.Division=3]="Division",_))(CellPhase||{});function createInitialEHTState(_="default"){return{cells:[],ap_links:[],ba_links:[],t:0,step_count:0,basalGeometry:new StraightLineGeometry,rngSeed:_}}function $constructor(_,T,R){function P(U,G){if(U._zod||Object.defineProperty(U,"_zod",{value:{def:G,constr:L,traits:new Set},enumerable:!1}),U._zod.traits.has(_))return;U._zod.traits.add(_),T(U,G);const V=L.prototype,Z=Object.keys(V);for(let Y=0;Y<Z.length;Y++){const W=Z[Y];W in U||(U[W]=V[W].bind(U))}}const O=R?.Parent??Object;class I extends O{}Object.defineProperty(I,"name",{value:_});function L(U){var G;const V=R?.Parent?new I:this;P(V,U),(G=V._zod).deferred??(G.deferred=[]);for(const Z of V._zod.deferred)Z();return V}return Object.defineProperty(L,"init",{value:P}),Object.defineProperty(L,Symbol.hasInstance,{value:U=>R?.Parent&&U instanceof R.Parent?!0:U?._zod?.traits?.has(_)}),Object.defineProperty(L,"name",{value:_}),L}class $ZodAsyncError extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class $ZodEncodeError extends Error{constructor(T){super(`Encountered unidirectional transform during encode: ${T}`),this.name="ZodEncodeError"}}const globalConfig={};function config(_){return globalConfig}function getEnumValues(_){const T=Object.values(_).filter(P=>typeof P=="number");return Object.entries(_).filter(([P,O])=>T.indexOf(+P)===-1).map(([P,O])=>O)}function jsonStringifyReplacer(_,T){return typeof T=="bigint"?T.toString():T}function cached(_){return{get value(){{const T=_();return Object.defineProperty(this,"value",{value:T}),T}}}}function nullish(_){return _==null}function cleanRegex(_){const T=_.startsWith("^")?1:0,R=_.endsWith("$")?_.length-1:_.length;return _.slice(T,R)}function floatSafeRemainder(_,T){const R=(_.toString().split(".")[1]||"").length,P=T.toString();let O=(P.split(".")[1]||"").length;if(O===0&&/\d?e-\d?/.test(P)){const G=P.match(/\d?e-(\d?)/);G?.[1]&&(O=Number.parseInt(G[1]))}const I=R>O?R:O,L=Number.parseInt(_.toFixed(I).replace(".","")),U=Number.parseInt(T.toFixed(I).replace(".",""));return L%U/10**I}const EVALUATING=Symbol("evaluating");function defineLazy(_,T,R){let P;Object.defineProperty(_,T,{get(){if(P!==EVALUATING)return P===void 0&&(P=EVALUATING,P=R()),P},set(O){Object.defineProperty(_,T,{value:O})},configurable:!0})}function assignProp(_,T,R){Object.defineProperty(_,T,{value:R,writable:!0,enumerable:!0,configurable:!0})}function mergeDefs(..._){const T={};for(const R of _){const P=Object.getOwnPropertyDescriptors(R);Object.assign(T,P)}return Object.defineProperties({},T)}function esc(_){return JSON.stringify(_)}function slugify(_){return _.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const captureStackTrace="captureStackTrace"in Error?Error.captureStackTrace:(..._)=>{};function isObject$2(_){return typeof _=="object"&&_!==null&&!Array.isArray(_)}const allowsEval=cached(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const _=Function;return new _(""),!0}catch{return!1}});function isPlainObject$1(_){if(isObject$2(_)===!1)return!1;const T=_.constructor;if(T===void 0||typeof T!="function")return!0;const R=T.prototype;return!(isObject$2(R)===!1||Object.prototype.hasOwnProperty.call(R,"isPrototypeOf")===!1)}function shallowClone(_){return isPlainObject$1(_)?{..._}:Array.isArray(_)?[..._]:_}const propertyKeyTypes=new Set(["string","number","symbol"]);function escapeRegex(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function clone(_,T,R){const P=new _._zod.constr(T??_._zod.def);return(!T||R?.parent)&&(P._zod.parent=_),P}function normalizeParams(_){const T=_;if(!T)return{};if(typeof T=="string")return{error:()=>T};if(T?.message!==void 0){if(T?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");T.error=T.message}return delete T.message,typeof T.error=="string"?{...T,error:()=>T.error}:T}function optionalKeys(_){return Object.keys(_).filter(T=>_[T]._zod.optin==="optional"&&_[T]._zod.optout==="optional")}const NUMBER_FORMAT_RANGES={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function pick(_,T){const R=_._zod.def,P=R.checks;if(P&&P.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const I=mergeDefs(_._zod.def,{get shape(){const L={};for(const U in T){if(!(U in R.shape))throw new Error(`Unrecognized key: "${U}"`);T[U]&&(L[U]=R.shape[U])}return assignProp(this,"shape",L),L},checks:[]});return clone(_,I)}function omit(_,T){const R=_._zod.def,P=R.checks;if(P&&P.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const I=mergeDefs(_._zod.def,{get shape(){const L={..._._zod.def.shape};for(const U in T){if(!(U in R.shape))throw new Error(`Unrecognized key: "${U}"`);T[U]&&delete L[U]}return assignProp(this,"shape",L),L},checks:[]});return clone(_,I)}function extend$1(_,T){if(!isPlainObject$1(T))throw new Error("Invalid input to extend: expected a plain object");const R=_._zod.def.checks;if(R&&R.length>0){const I=_._zod.def.shape;for(const L in T)if(Object.getOwnPropertyDescriptor(I,L)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const O=mergeDefs(_._zod.def,{get shape(){const I={..._._zod.def.shape,...T};return assignProp(this,"shape",I),I}});return clone(_,O)}function safeExtend(_,T){if(!isPlainObject$1(T))throw new Error("Invalid input to safeExtend: expected a plain object");const R=mergeDefs(_._zod.def,{get shape(){const P={..._._zod.def.shape,...T};return assignProp(this,"shape",P),P}});return clone(_,R)}function merge$1(_,T){const R=mergeDefs(_._zod.def,{get shape(){const P={..._._zod.def.shape,...T._zod.def.shape};return assignProp(this,"shape",P),P},get catchall(){return T._zod.def.catchall},checks:[]});return clone(_,R)}function partial(_,T,R){const O=T._zod.def.checks;if(O&&O.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const L=mergeDefs(T._zod.def,{get shape(){const U=T._zod.def.shape,G={...U};if(R)for(const V in R){if(!(V in U))throw new Error(`Unrecognized key: "${V}"`);R[V]&&(G[V]=_?new _({type:"optional",innerType:U[V]}):U[V])}else for(const V in U)G[V]=_?new _({type:"optional",innerType:U[V]}):U[V];return assignProp(this,"shape",G),G},checks:[]});return clone(T,L)}function required(_,T,R){const P=mergeDefs(T._zod.def,{get shape(){const O=T._zod.def.shape,I={...O};if(R)for(const L in R){if(!(L in I))throw new Error(`Unrecognized key: "${L}"`);R[L]&&(I[L]=new _({type:"nonoptional",innerType:O[L]}))}else for(const L in O)I[L]=new _({type:"nonoptional",innerType:O[L]});return assignProp(this,"shape",I),I}});return clone(T,P)}function aborted(_,T=0){if(_.aborted===!0)return!0;for(let R=T;R<_.issues.length;R++)if(_.issues[R]?.continue!==!0)return!0;return!1}function prefixIssues(_,T){return T.map(R=>{var P;return(P=R).path??(P.path=[]),R.path.unshift(_),R})}function unwrapMessage(_){return typeof _=="string"?_:_?.message}function finalizeIssue(_,T,R){const P={..._,path:_.path??[]};if(!_.message){const O=unwrapMessage(_.inst?._zod.def?.error?.(_))??unwrapMessage(T?.error?.(_))??unwrapMessage(R.customError?.(_))??unwrapMessage(R.localeError?.(_))??"Invalid input";P.message=O}return delete P.inst,delete P.continue,T?.reportInput||delete P.input,P}function getLengthableOrigin(_){return Array.isArray(_)?"array":typeof _=="string"?"string":"unknown"}function issue(..._){const[T,R,P]=_;return typeof T=="string"?{message:T,code:"custom",input:R,inst:P}:{...T}}const initializer$2=(_,T)=>{_.name="$ZodError",Object.defineProperty(_,"_zod",{value:_._zod,enumerable:!1}),Object.defineProperty(_,"issues",{value:T,enumerable:!1}),_.message=JSON.stringify(T,jsonStringifyReplacer,2),Object.defineProperty(_,"toString",{value:()=>_.message,enumerable:!1})},$ZodError=$constructor("$ZodError",initializer$2),$ZodRealError=$constructor("$ZodError",initializer$2,{Parent:Error});function flattenError(_,T=R=>R.message){const R={},P=[];for(const O of _.issues)O.path.length>0?(R[O.path[0]]=R[O.path[0]]||[],R[O.path[0]].push(T(O))):P.push(T(O));return{formErrors:P,fieldErrors:R}}function formatError(_,T=R=>R.message){const R={_errors:[]},P=O=>{for(const I of O.issues)if(I.code==="invalid_union"&&I.errors.length)I.errors.map(L=>P({issues:L}));else if(I.code==="invalid_key")P({issues:I.issues});else if(I.code==="invalid_element")P({issues:I.issues});else if(I.path.length===0)R._errors.push(T(I));else{let L=R,U=0;for(;U<I.path.length;){const G=I.path[U];U===I.path.length-1?(L[G]=L[G]||{_errors:[]},L[G]._errors.push(T(I))):L[G]=L[G]||{_errors:[]},L=L[G],U++}}};return P(_),R}const _parse=_=>(T,R,P,O)=>{const I=P?Object.assign(P,{async:!1}):{async:!1},L=T._zod.run({value:R,issues:[]},I);if(L instanceof Promise)throw new $ZodAsyncError;if(L.issues.length){const U=new(O?.Err??_)(L.issues.map(G=>finalizeIssue(G,I,config())));throw captureStackTrace(U,O?.callee),U}return L.value},_parseAsync=_=>async(T,R,P,O)=>{const I=P?Object.assign(P,{async:!0}):{async:!0};let L=T._zod.run({value:R,issues:[]},I);if(L instanceof Promise&&(L=await L),L.issues.length){const U=new(O?.Err??_)(L.issues.map(G=>finalizeIssue(G,I,config())));throw captureStackTrace(U,O?.callee),U}return L.value},_safeParse=_=>(T,R,P)=>{const O=P?{...P,async:!1}:{async:!1},I=T._zod.run({value:R,issues:[]},O);if(I instanceof Promise)throw new $ZodAsyncError;return I.issues.length?{success:!1,error:new(_??$ZodError)(I.issues.map(L=>finalizeIssue(L,O,config())))}:{success:!0,data:I.value}},safeParse$1=_safeParse($ZodRealError),_safeParseAsync=_=>async(T,R,P)=>{const O=P?Object.assign(P,{async:!0}):{async:!0};let I=T._zod.run({value:R,issues:[]},O);return I instanceof Promise&&(I=await I),I.issues.length?{success:!1,error:new _(I.issues.map(L=>finalizeIssue(L,O,config())))}:{success:!0,data:I.value}},safeParseAsync$1=_safeParseAsync($ZodRealError),_encode=_=>(T,R,P)=>{const O=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return _parse(_)(T,R,O)},_decode=_=>(T,R,P)=>_parse(_)(T,R,P),_encodeAsync=_=>async(T,R,P)=>{const O=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return _parseAsync(_)(T,R,O)},_decodeAsync=_=>async(T,R,P)=>_parseAsync(_)(T,R,P),_safeEncode=_=>(T,R,P)=>{const O=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return _safeParse(_)(T,R,O)},_safeDecode=_=>(T,R,P)=>_safeParse(_)(T,R,P),_safeEncodeAsync=_=>async(T,R,P)=>{const O=P?Object.assign(P,{direction:"backward"}):{direction:"backward"};return _safeParseAsync(_)(T,R,O)},_safeDecodeAsync=_=>async(T,R,P)=>_safeParseAsync(_)(T,R,P),cuid=/^[cC][^\s-]{8,}$/,cuid2=/^[0-9a-z]+$/,ulid=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,xid=/^[0-9a-vA-V]{20}$/,ksuid=/^[A-Za-z0-9]{27}$/,nanoid=/^[a-zA-Z0-9_-]{21}$/,duration$1=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,guid=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,uuid=_=>_?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${_}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,email=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,_emoji$1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function emoji(){return new RegExp(_emoji$1,"u")}const ipv4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,cidrv4=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,cidrv6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,base64url=/^[A-Za-z0-9_-]*$/,e164=/^\+[1-9]\d{6,14}$/,dateSource="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",date$3=new RegExp(`^${dateSource}$`);function timeSource(_){const T="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof _.precision=="number"?_.precision===-1?`${T}`:_.precision===0?`${T}:[0-5]\\d`:`${T}:[0-5]\\d\\.\\d{${_.precision}}`:`${T}(?::[0-5]\\d(?:\\.\\d+)?)?`}function time$2(_){return new RegExp(`^${timeSource(_)}$`)}function datetime$1(_){const T=timeSource({precision:_.precision}),R=["Z"];_.local&&R.push(""),_.offset&&R.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const P=`${T}(?:${R.join("|")})`;return new RegExp(`^${dateSource}T(?:${P})$`)}const string$2=_=>{const T=_?`[\\s\\S]{${_?.minimum??0},${_?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${T}$`)},integer=/^-?\d+$/,number$6=/^-?\d+(?:\.\d+)?$/,boolean$1=/^(?:true|false)$/i,lowercase=/^[^A-Z]*$/,uppercase=/^[^a-z]*$/,$ZodCheck=$constructor("$ZodCheck",(_,T)=>{var R;_._zod??(_._zod={}),_._zod.def=T,(R=_._zod).onattach??(R.onattach=[])}),numericOriginMap={number:"number",bigint:"bigint",object:"date"},$ZodCheckLessThan=$constructor("$ZodCheckLessThan",(_,T)=>{$ZodCheck.init(_,T);const R=numericOriginMap[typeof T.value];_._zod.onattach.push(P=>{const O=P._zod.bag,I=(T.inclusive?O.maximum:O.exclusiveMaximum)??Number.POSITIVE_INFINITY;T.value<I&&(T.inclusive?O.maximum=T.value:O.exclusiveMaximum=T.value)}),_._zod.check=P=>{(T.inclusive?P.value<=T.value:P.value<T.value)||P.issues.push({origin:R,code:"too_big",maximum:typeof T.value=="object"?T.value.getTime():T.value,input:P.value,inclusive:T.inclusive,inst:_,continue:!T.abort})}}),$ZodCheckGreaterThan=$constructor("$ZodCheckGreaterThan",(_,T)=>{$ZodCheck.init(_,T);const R=numericOriginMap[typeof T.value];_._zod.onattach.push(P=>{const O=P._zod.bag,I=(T.inclusive?O.minimum:O.exclusiveMinimum)??Number.NEGATIVE_INFINITY;T.value>I&&(T.inclusive?O.minimum=T.value:O.exclusiveMinimum=T.value)}),_._zod.check=P=>{(T.inclusive?P.value>=T.value:P.value>T.value)||P.issues.push({origin:R,code:"too_small",minimum:typeof T.value=="object"?T.value.getTime():T.value,input:P.value,inclusive:T.inclusive,inst:_,continue:!T.abort})}}),$ZodCheckMultipleOf=$constructor("$ZodCheckMultipleOf",(_,T)=>{$ZodCheck.init(_,T),_._zod.onattach.push(R=>{var P;(P=R._zod.bag).multipleOf??(P.multipleOf=T.value)}),_._zod.check=R=>{if(typeof R.value!=typeof T.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof R.value=="bigint"?R.value%T.value===BigInt(0):floatSafeRemainder(R.value,T.value)===0)||R.issues.push({origin:typeof R.value,code:"not_multiple_of",divisor:T.value,input:R.value,inst:_,continue:!T.abort})}}),$ZodCheckNumberFormat=$constructor("$ZodCheckNumberFormat",(_,T)=>{$ZodCheck.init(_,T),T.format=T.format||"float64";const R=T.format?.includes("int"),P=R?"int":"number",[O,I]=NUMBER_FORMAT_RANGES[T.format];_._zod.onattach.push(L=>{const U=L._zod.bag;U.format=T.format,U.minimum=O,U.maximum=I,R&&(U.pattern=integer)}),_._zod.check=L=>{const U=L.value;if(R){if(!Number.isInteger(U)){L.issues.push({expected:P,format:T.format,code:"invalid_type",continue:!1,input:U,inst:_});return}if(!Number.isSafeInteger(U)){U>0?L.issues.push({input:U,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:_,origin:P,inclusive:!0,continue:!T.abort}):L.issues.push({input:U,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:_,origin:P,inclusive:!0,continue:!T.abort});return}}U<O&&L.issues.push({origin:"number",input:U,code:"too_small",minimum:O,inclusive:!0,inst:_,continue:!T.abort}),U>I&&L.issues.push({origin:"number",input:U,code:"too_big",maximum:I,inclusive:!0,inst:_,continue:!T.abort})}}),$ZodCheckMaxLength=$constructor("$ZodCheckMaxLength",(_,T)=>{var R;$ZodCheck.init(_,T),(R=_._zod.def).when??(R.when=P=>{const O=P.value;return!nullish(O)&&O.length!==void 0}),_._zod.onattach.push(P=>{const O=P._zod.bag.maximum??Number.POSITIVE_INFINITY;T.maximum<O&&(P._zod.bag.maximum=T.maximum)}),_._zod.check=P=>{const O=P.value;if(O.length<=T.maximum)return;const L=getLengthableOrigin(O);P.issues.push({origin:L,code:"too_big",maximum:T.maximum,inclusive:!0,input:O,inst:_,continue:!T.abort})}}),$ZodCheckMinLength=$constructor("$ZodCheckMinLength",(_,T)=>{var R;$ZodCheck.init(_,T),(R=_._zod.def).when??(R.when=P=>{const O=P.value;return!nullish(O)&&O.length!==void 0}),_._zod.onattach.push(P=>{const O=P._zod.bag.minimum??Number.NEGATIVE_INFINITY;T.minimum>O&&(P._zod.bag.minimum=T.minimum)}),_._zod.check=P=>{const O=P.value;if(O.length>=T.minimum)return;const L=getLengthableOrigin(O);P.issues.push({origin:L,code:"too_small",minimum:T.minimum,inclusive:!0,input:O,inst:_,continue:!T.abort})}}),$ZodCheckLengthEquals=$constructor("$ZodCheckLengthEquals",(_,T)=>{var R;$ZodCheck.init(_,T),(R=_._zod.def).when??(R.when=P=>{const O=P.value;return!nullish(O)&&O.length!==void 0}),_._zod.onattach.push(P=>{const O=P._zod.bag;O.minimum=T.length,O.maximum=T.length,O.length=T.length}),_._zod.check=P=>{const O=P.value,I=O.length;if(I===T.length)return;const L=getLengthableOrigin(O),U=I>T.length;P.issues.push({origin:L,...U?{code:"too_big",maximum:T.length}:{code:"too_small",minimum:T.length},inclusive:!0,exact:!0,input:P.value,inst:_,continue:!T.abort})}}),$ZodCheckStringFormat=$constructor("$ZodCheckStringFormat",(_,T)=>{var R,P;$ZodCheck.init(_,T),_._zod.onattach.push(O=>{const I=O._zod.bag;I.format=T.format,T.pattern&&(I.patterns??(I.patterns=new Set),I.patterns.add(T.pattern))}),T.pattern?(R=_._zod).check??(R.check=O=>{T.pattern.lastIndex=0,!T.pattern.test(O.value)&&O.issues.push({origin:"string",code:"invalid_format",format:T.format,input:O.value,...T.pattern?{pattern:T.pattern.toString()}:{},inst:_,continue:!T.abort})}):(P=_._zod).check??(P.check=()=>{})}),$ZodCheckRegex=$constructor("$ZodCheckRegex",(_,T)=>{$ZodCheckStringFormat.init(_,T),_._zod.check=R=>{T.pattern.lastIndex=0,!T.pattern.test(R.value)&&R.issues.push({origin:"string",code:"invalid_format",format:"regex",input:R.value,pattern:T.pattern.toString(),inst:_,continue:!T.abort})}}),$ZodCheckLowerCase=$constructor("$ZodCheckLowerCase",(_,T)=>{T.pattern??(T.pattern=lowercase),$ZodCheckStringFormat.init(_,T)}),$ZodCheckUpperCase=$constructor("$ZodCheckUpperCase",(_,T)=>{T.pattern??(T.pattern=uppercase),$ZodCheckStringFormat.init(_,T)}),$ZodCheckIncludes=$constructor("$ZodCheckIncludes",(_,T)=>{$ZodCheck.init(_,T);const R=escapeRegex(T.includes),P=new RegExp(typeof T.position=="number"?`^.{${T.position}}${R}`:R);T.pattern=P,_._zod.onattach.push(O=>{const I=O._zod.bag;I.patterns??(I.patterns=new Set),I.patterns.add(P)}),_._zod.check=O=>{O.value.includes(T.includes,T.position)||O.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:T.includes,input:O.value,inst:_,continue:!T.abort})}}),$ZodCheckStartsWith=$constructor("$ZodCheckStartsWith",(_,T)=>{$ZodCheck.init(_,T);const R=new RegExp(`^${escapeRegex(T.prefix)}.*`);T.pattern??(T.pattern=R),_._zod.onattach.push(P=>{const O=P._zod.bag;O.patterns??(O.patterns=new Set),O.patterns.add(R)}),_._zod.check=P=>{P.value.startsWith(T.prefix)||P.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:T.prefix,input:P.value,inst:_,continue:!T.abort})}}),$ZodCheckEndsWith=$constructor("$ZodCheckEndsWith",(_,T)=>{$ZodCheck.init(_,T);const R=new RegExp(`.*${escapeRegex(T.suffix)}$`);T.pattern??(T.pattern=R),_._zod.onattach.push(P=>{const O=P._zod.bag;O.patterns??(O.patterns=new Set),O.patterns.add(R)}),_._zod.check=P=>{P.value.endsWith(T.suffix)||P.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:T.suffix,input:P.value,inst:_,continue:!T.abort})}}),$ZodCheckOverwrite=$constructor("$ZodCheckOverwrite",(_,T)=>{$ZodCheck.init(_,T),_._zod.check=R=>{R.value=T.tx(R.value)}});class Doc{constructor(T=[]){this.content=[],this.indent=0,this&&(this.args=T)}indented(T){this.indent+=1,T(this),this.indent-=1}write(T){if(typeof T=="function"){T(this,{execution:"sync"}),T(this,{execution:"async"});return}const P=T.split(`
`).filter(L=>L),O=Math.min(...P.map(L=>L.length-L.trimStart().length)),I=P.map(L=>L.slice(O)).map(L=>" ".repeat(this.indent*2)+L);for(const L of I)this.content.push(L)}compile(){const T=Function,R=this?.args,O=[...(this?.content??[""]).map(I=>`  ${I}`)];return new T(...R,O.join(`
`))}}const version={major:4,minor:3,patch:5},$ZodType=$constructor("$ZodType",(_,T)=>{var R;_??(_={}),_._zod.def=T,_._zod.bag=_._zod.bag||{},_._zod.version=version;const P=[..._._zod.def.checks??[]];_._zod.traits.has("$ZodCheck")&&P.unshift(_);for(const O of P)for(const I of O._zod.onattach)I(_);if(P.length===0)(R=_._zod).deferred??(R.deferred=[]),_._zod.deferred?.push(()=>{_._zod.run=_._zod.parse});else{const O=(L,U,G)=>{let V=aborted(L),Z;for(const Y of U){if(Y._zod.def.when){if(!Y._zod.def.when(L))continue}else if(V)continue;const W=L.issues.length,J=Y._zod.check(L);if(J instanceof Promise&&G?.async===!1)throw new $ZodAsyncError;if(Z||J instanceof Promise)Z=(Z??Promise.resolve()).then(async()=>{await J,L.issues.length!==W&&(V||(V=aborted(L,W)))});else{if(L.issues.length===W)continue;V||(V=aborted(L,W))}}return Z?Z.then(()=>L):L},I=(L,U,G)=>{if(aborted(L))return L.aborted=!0,L;const V=O(U,P,G);if(V instanceof Promise){if(G.async===!1)throw new $ZodAsyncError;return V.then(Z=>_._zod.parse(Z,G))}return _._zod.parse(V,G)};_._zod.run=(L,U)=>{if(U.skipChecks)return _._zod.parse(L,U);if(U.direction==="backward"){const V=_._zod.parse({value:L.value,issues:[]},{...U,skipChecks:!0});return V instanceof Promise?V.then(Z=>I(Z,L,U)):I(V,L,U)}const G=_._zod.parse(L,U);if(G instanceof Promise){if(U.async===!1)throw new $ZodAsyncError;return G.then(V=>O(V,P,U))}return O(G,P,U)}}defineLazy(_,"~standard",()=>({validate:O=>{try{const I=safeParse$1(_,O);return I.success?{value:I.data}:{issues:I.error?.issues}}catch{return safeParseAsync$1(_,O).then(L=>L.success?{value:L.data}:{issues:L.error?.issues})}},vendor:"zod",version:1}))}),$ZodString=$constructor("$ZodString",(_,T)=>{$ZodType.init(_,T),_._zod.pattern=[..._?._zod.bag?.patterns??[]].pop()??string$2(_._zod.bag),_._zod.parse=(R,P)=>{if(T.coerce)try{R.value=String(R.value)}catch{}return typeof R.value=="string"||R.issues.push({expected:"string",code:"invalid_type",input:R.value,inst:_}),R}}),$ZodStringFormat=$constructor("$ZodStringFormat",(_,T)=>{$ZodCheckStringFormat.init(_,T),$ZodString.init(_,T)}),$ZodGUID=$constructor("$ZodGUID",(_,T)=>{T.pattern??(T.pattern=guid),$ZodStringFormat.init(_,T)}),$ZodUUID=$constructor("$ZodUUID",(_,T)=>{if(T.version){const P={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[T.version];if(P===void 0)throw new Error(`Invalid UUID version: "${T.version}"`);T.pattern??(T.pattern=uuid(P))}else T.pattern??(T.pattern=uuid());$ZodStringFormat.init(_,T)}),$ZodEmail=$constructor("$ZodEmail",(_,T)=>{T.pattern??(T.pattern=email),$ZodStringFormat.init(_,T)}),$ZodURL=$constructor("$ZodURL",(_,T)=>{$ZodStringFormat.init(_,T),_._zod.check=R=>{try{const P=R.value.trim(),O=new URL(P);T.hostname&&(T.hostname.lastIndex=0,T.hostname.test(O.hostname)||R.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:T.hostname.source,input:R.value,inst:_,continue:!T.abort})),T.protocol&&(T.protocol.lastIndex=0,T.protocol.test(O.protocol.endsWith(":")?O.protocol.slice(0,-1):O.protocol)||R.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:T.protocol.source,input:R.value,inst:_,continue:!T.abort})),T.normalize?R.value=O.href:R.value=P;return}catch{R.issues.push({code:"invalid_format",format:"url",input:R.value,inst:_,continue:!T.abort})}}}),$ZodEmoji=$constructor("$ZodEmoji",(_,T)=>{T.pattern??(T.pattern=emoji()),$ZodStringFormat.init(_,T)}),$ZodNanoID=$constructor("$ZodNanoID",(_,T)=>{T.pattern??(T.pattern=nanoid),$ZodStringFormat.init(_,T)}),$ZodCUID=$constructor("$ZodCUID",(_,T)=>{T.pattern??(T.pattern=cuid),$ZodStringFormat.init(_,T)}),$ZodCUID2=$constructor("$ZodCUID2",(_,T)=>{T.pattern??(T.pattern=cuid2),$ZodStringFormat.init(_,T)}),$ZodULID=$constructor("$ZodULID",(_,T)=>{T.pattern??(T.pattern=ulid),$ZodStringFormat.init(_,T)}),$ZodXID=$constructor("$ZodXID",(_,T)=>{T.pattern??(T.pattern=xid),$ZodStringFormat.init(_,T)}),$ZodKSUID=$constructor("$ZodKSUID",(_,T)=>{T.pattern??(T.pattern=ksuid),$ZodStringFormat.init(_,T)}),$ZodISODateTime=$constructor("$ZodISODateTime",(_,T)=>{T.pattern??(T.pattern=datetime$1(T)),$ZodStringFormat.init(_,T)}),$ZodISODate=$constructor("$ZodISODate",(_,T)=>{T.pattern??(T.pattern=date$3),$ZodStringFormat.init(_,T)}),$ZodISOTime=$constructor("$ZodISOTime",(_,T)=>{T.pattern??(T.pattern=time$2(T)),$ZodStringFormat.init(_,T)}),$ZodISODuration=$constructor("$ZodISODuration",(_,T)=>{T.pattern??(T.pattern=duration$1),$ZodStringFormat.init(_,T)}),$ZodIPv4=$constructor("$ZodIPv4",(_,T)=>{T.pattern??(T.pattern=ipv4),$ZodStringFormat.init(_,T),_._zod.bag.format="ipv4"}),$ZodIPv6=$constructor("$ZodIPv6",(_,T)=>{T.pattern??(T.pattern=ipv6),$ZodStringFormat.init(_,T),_._zod.bag.format="ipv6",_._zod.check=R=>{try{new URL(`http://[${R.value}]`)}catch{R.issues.push({code:"invalid_format",format:"ipv6",input:R.value,inst:_,continue:!T.abort})}}}),$ZodCIDRv4=$constructor("$ZodCIDRv4",(_,T)=>{T.pattern??(T.pattern=cidrv4),$ZodStringFormat.init(_,T)}),$ZodCIDRv6=$constructor("$ZodCIDRv6",(_,T)=>{T.pattern??(T.pattern=cidrv6),$ZodStringFormat.init(_,T),_._zod.check=R=>{const P=R.value.split("/");try{if(P.length!==2)throw new Error;const[O,I]=P;if(!I)throw new Error;const L=Number(I);if(`${L}`!==I)throw new Error;if(L<0||L>128)throw new Error;new URL(`http://[${O}]`)}catch{R.issues.push({code:"invalid_format",format:"cidrv6",input:R.value,inst:_,continue:!T.abort})}}});function isValidBase64(_){if(_==="")return!0;if(_.length%4!==0)return!1;try{return atob(_),!0}catch{return!1}}const $ZodBase64=$constructor("$ZodBase64",(_,T)=>{T.pattern??(T.pattern=base64),$ZodStringFormat.init(_,T),_._zod.bag.contentEncoding="base64",_._zod.check=R=>{isValidBase64(R.value)||R.issues.push({code:"invalid_format",format:"base64",input:R.value,inst:_,continue:!T.abort})}});function isValidBase64URL(_){if(!base64url.test(_))return!1;const T=_.replace(/[-_]/g,P=>P==="-"?"+":"/"),R=T.padEnd(Math.ceil(T.length/4)*4,"=");return isValidBase64(R)}const $ZodBase64URL=$constructor("$ZodBase64URL",(_,T)=>{T.pattern??(T.pattern=base64url),$ZodStringFormat.init(_,T),_._zod.bag.contentEncoding="base64url",_._zod.check=R=>{isValidBase64URL(R.value)||R.issues.push({code:"invalid_format",format:"base64url",input:R.value,inst:_,continue:!T.abort})}}),$ZodE164=$constructor("$ZodE164",(_,T)=>{T.pattern??(T.pattern=e164),$ZodStringFormat.init(_,T)});function isValidJWT(_,T=null){try{const R=_.split(".");if(R.length!==3)return!1;const[P]=R;if(!P)return!1;const O=JSON.parse(atob(P));return!("typ"in O&&O?.typ!=="JWT"||!O.alg||T&&(!("alg"in O)||O.alg!==T))}catch{return!1}}const $ZodJWT=$constructor("$ZodJWT",(_,T)=>{$ZodStringFormat.init(_,T),_._zod.check=R=>{isValidJWT(R.value,T.alg)||R.issues.push({code:"invalid_format",format:"jwt",input:R.value,inst:_,continue:!T.abort})}}),$ZodNumber=$constructor("$ZodNumber",(_,T)=>{$ZodType.init(_,T),_._zod.pattern=_._zod.bag.pattern??number$6,_._zod.parse=(R,P)=>{if(T.coerce)try{R.value=Number(R.value)}catch{}const O=R.value;if(typeof O=="number"&&!Number.isNaN(O)&&Number.isFinite(O))return R;const I=typeof O=="number"?Number.isNaN(O)?"NaN":Number.isFinite(O)?void 0:"Infinity":void 0;return R.issues.push({expected:"number",code:"invalid_type",input:O,inst:_,...I?{received:I}:{}}),R}}),$ZodNumberFormat=$constructor("$ZodNumberFormat",(_,T)=>{$ZodCheckNumberFormat.init(_,T),$ZodNumber.init(_,T)}),$ZodBoolean=$constructor("$ZodBoolean",(_,T)=>{$ZodType.init(_,T),_._zod.pattern=boolean$1,_._zod.parse=(R,P)=>{if(T.coerce)try{R.value=!!R.value}catch{}const O=R.value;return typeof O=="boolean"||R.issues.push({expected:"boolean",code:"invalid_type",input:O,inst:_}),R}}),$ZodUnknown=$constructor("$ZodUnknown",(_,T)=>{$ZodType.init(_,T),_._zod.parse=R=>R}),$ZodNever=$constructor("$ZodNever",(_,T)=>{$ZodType.init(_,T),_._zod.parse=(R,P)=>(R.issues.push({expected:"never",code:"invalid_type",input:R.value,inst:_}),R)});function handleArrayResult(_,T,R){_.issues.length&&T.issues.push(...prefixIssues(R,_.issues)),T.value[R]=_.value}const $ZodArray=$constructor("$ZodArray",(_,T)=>{$ZodType.init(_,T),_._zod.parse=(R,P)=>{const O=R.value;if(!Array.isArray(O))return R.issues.push({expected:"array",code:"invalid_type",input:O,inst:_}),R;R.value=Array(O.length);const I=[];for(let L=0;L<O.length;L++){const U=O[L],G=T.element._zod.run({value:U,issues:[]},P);G instanceof Promise?I.push(G.then(V=>handleArrayResult(V,R,L))):handleArrayResult(G,R,L)}return I.length?Promise.all(I).then(()=>R):R}});function handlePropertyResult(_,T,R,P,O){if(_.issues.length){if(O&&!(R in P))return;T.issues.push(...prefixIssues(R,_.issues))}_.value===void 0?R in P&&(T.value[R]=void 0):T.value[R]=_.value}function normalizeDef(_){const T=Object.keys(_.shape);for(const P of T)if(!_.shape?.[P]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${P}": expected a Zod schema`);const R=optionalKeys(_.shape);return{..._,keys:T,keySet:new Set(T),numKeys:T.length,optionalKeys:new Set(R)}}function handleCatchall(_,T,R,P,O,I){const L=[],U=O.keySet,G=O.catchall._zod,V=G.def.type,Z=G.optout==="optional";for(const Y in T){if(U.has(Y))continue;if(V==="never"){L.push(Y);continue}const W=G.run({value:T[Y],issues:[]},P);W instanceof Promise?_.push(W.then(J=>handlePropertyResult(J,R,Y,T,Z))):handlePropertyResult(W,R,Y,T,Z)}return L.length&&R.issues.push({code:"unrecognized_keys",keys:L,input:T,inst:I}),_.length?Promise.all(_).then(()=>R):R}const $ZodObject=$constructor("$ZodObject",(_,T)=>{if($ZodType.init(_,T),!Object.getOwnPropertyDescriptor(T,"shape")?.get){const U=T.shape;Object.defineProperty(T,"shape",{get:()=>{const G={...U};return Object.defineProperty(T,"shape",{value:G}),G}})}const P=cached(()=>normalizeDef(T));defineLazy(_._zod,"propValues",()=>{const U=T.shape,G={};for(const V in U){const Z=U[V]._zod;if(Z.values){G[V]??(G[V]=new Set);for(const Y of Z.values)G[V].add(Y)}}return G});const O=isObject$2,I=T.catchall;let L;_._zod.parse=(U,G)=>{L??(L=P.value);const V=U.value;if(!O(V))return U.issues.push({expected:"object",code:"invalid_type",input:V,inst:_}),U;U.value={};const Z=[],Y=L.shape;for(const W of L.keys){const J=Y[W],ee=J._zod.optout==="optional",te=J._zod.run({value:V[W],issues:[]},G);te instanceof Promise?Z.push(te.then(ie=>handlePropertyResult(ie,U,W,V,ee))):handlePropertyResult(te,U,W,V,ee)}return I?handleCatchall(Z,V,U,G,P.value,_):Z.length?Promise.all(Z).then(()=>U):U}}),$ZodObjectJIT=$constructor("$ZodObjectJIT",(_,T)=>{$ZodObject.init(_,T);const R=_._zod.parse,P=cached(()=>normalizeDef(T)),O=W=>{const J=new Doc(["shape","payload","ctx"]),ee=P.value,te=ce=>{const le=esc(ce);return`shape[${le}]._zod.run({ value: input[${le}], issues: [] }, ctx)`};J.write("const input = payload.value;");const ie=Object.create(null);let oe=0;for(const ce of ee.keys)ie[ce]=`key_${oe++}`;J.write("const newResult = {};");for(const ce of ee.keys){const le=ie[ce],he=esc(ce),fe=W[ce]?._zod?.optout==="optional";J.write(`const ${le} = ${te(ce)};`),fe?J.write(`
        if (${le}.issues.length) {
          if (${he} in input) {
            payload.issues = payload.issues.concat(${le}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${he}, ...iss.path] : [${he}]
            })));
          }
        }
        
        if (${le}.value === undefined) {
          if (${he} in input) {
            newResult[${he}] = undefined;
          }
        } else {
          newResult[${he}] = ${le}.value;
        }
        
      `):J.write(`
        if (${le}.issues.length) {
          payload.issues = payload.issues.concat(${le}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${he}, ...iss.path] : [${he}]
          })));
        }
        
        if (${le}.value === undefined) {
          if (${he} in input) {
            newResult[${he}] = undefined;
          }
        } else {
          newResult[${he}] = ${le}.value;
        }
        
      `)}J.write("payload.value = newResult;"),J.write("return payload;");const ae=J.compile();return(ce,le)=>ae(W,ce,le)};let I;const L=isObject$2,U=!globalConfig.jitless,V=U&&allowsEval.value,Z=T.catchall;let Y;_._zod.parse=(W,J)=>{Y??(Y=P.value);const ee=W.value;return L(ee)?U&&V&&J?.async===!1&&J.jitless!==!0?(I||(I=O(T.shape)),W=I(W,J),Z?handleCatchall([],ee,W,J,Y,_):W):R(W,J):(W.issues.push({expected:"object",code:"invalid_type",input:ee,inst:_}),W)}});function handleUnionResults(_,T,R,P){for(const I of _)if(I.issues.length===0)return T.value=I.value,T;const O=_.filter(I=>!aborted(I));return O.length===1?(T.value=O[0].value,O[0]):(T.issues.push({code:"invalid_union",input:T.value,inst:R,errors:_.map(I=>I.issues.map(L=>finalizeIssue(L,P,config())))}),T)}const $ZodUnion=$constructor("$ZodUnion",(_,T)=>{$ZodType.init(_,T),defineLazy(_._zod,"optin",()=>T.options.some(O=>O._zod.optin==="optional")?"optional":void 0),defineLazy(_._zod,"optout",()=>T.options.some(O=>O._zod.optout==="optional")?"optional":void 0),defineLazy(_._zod,"values",()=>{if(T.options.every(O=>O._zod.values))return new Set(T.options.flatMap(O=>Array.from(O._zod.values)))}),defineLazy(_._zod,"pattern",()=>{if(T.options.every(O=>O._zod.pattern)){const O=T.options.map(I=>I._zod.pattern);return new RegExp(`^(${O.map(I=>cleanRegex(I.source)).join("|")})$`)}});const R=T.options.length===1,P=T.options[0]._zod.run;_._zod.parse=(O,I)=>{if(R)return P(O,I);let L=!1;const U=[];for(const G of T.options){const V=G._zod.run({value:O.value,issues:[]},I);if(V instanceof Promise)U.push(V),L=!0;else{if(V.issues.length===0)return V;U.push(V)}}return L?Promise.all(U).then(G=>handleUnionResults(G,O,_,I)):handleUnionResults(U,O,_,I)}}),$ZodIntersection=$constructor("$ZodIntersection",(_,T)=>{$ZodType.init(_,T),_._zod.parse=(R,P)=>{const O=R.value,I=T.left._zod.run({value:O,issues:[]},P),L=T.right._zod.run({value:O,issues:[]},P);return I instanceof Promise||L instanceof Promise?Promise.all([I,L]).then(([G,V])=>handleIntersectionResults(R,G,V)):handleIntersectionResults(R,I,L)}});function mergeValues(_,T){if(_===T)return{valid:!0,data:_};if(_ instanceof Date&&T instanceof Date&&+_==+T)return{valid:!0,data:_};if(isPlainObject$1(_)&&isPlainObject$1(T)){const R=Object.keys(T),P=Object.keys(_).filter(I=>R.indexOf(I)!==-1),O={..._,...T};for(const I of P){const L=mergeValues(_[I],T[I]);if(!L.valid)return{valid:!1,mergeErrorPath:[I,...L.mergeErrorPath]};O[I]=L.data}return{valid:!0,data:O}}if(Array.isArray(_)&&Array.isArray(T)){if(_.length!==T.length)return{valid:!1,mergeErrorPath:[]};const R=[];for(let P=0;P<_.length;P++){const O=_[P],I=T[P],L=mergeValues(O,I);if(!L.valid)return{valid:!1,mergeErrorPath:[P,...L.mergeErrorPath]};R.push(L.data)}return{valid:!0,data:R}}return{valid:!1,mergeErrorPath:[]}}function handleIntersectionResults(_,T,R){const P=new Map;let O;for(const U of T.issues)if(U.code==="unrecognized_keys"){O??(O=U);for(const G of U.keys)P.has(G)||P.set(G,{}),P.get(G).l=!0}else _.issues.push(U);for(const U of R.issues)if(U.code==="unrecognized_keys")for(const G of U.keys)P.has(G)||P.set(G,{}),P.get(G).r=!0;else _.issues.push(U);const I=[...P].filter(([,U])=>U.l&&U.r).map(([U])=>U);if(I.length&&O&&_.issues.push({...O,keys:I}),aborted(_))return _;const L=mergeValues(T.value,R.value);if(!L.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(L.mergeErrorPath)}`);return _.value=L.data,_}const $ZodTuple=$constructor("$ZodTuple",(_,T)=>{$ZodType.init(_,T);const R=T.items;_._zod.parse=(P,O)=>{const I=P.value;if(!Array.isArray(I))return P.issues.push({input:I,inst:_,expected:"tuple",code:"invalid_type"}),P;P.value=[];const L=[],U=[...R].reverse().findIndex(Z=>Z._zod.optin!=="optional"),G=U===-1?0:R.length-U;if(!T.rest){const Z=I.length>R.length,Y=I.length<G-1;if(Z||Y)return P.issues.push({...Z?{code:"too_big",maximum:R.length,inclusive:!0}:{code:"too_small",minimum:R.length},input:I,inst:_,origin:"array"}),P}let V=-1;for(const Z of R){if(V++,V>=I.length&&V>=G)continue;const Y=Z._zod.run({value:I[V],issues:[]},O);Y instanceof Promise?L.push(Y.then(W=>handleTupleResult(W,P,V))):handleTupleResult(Y,P,V)}if(T.rest){const Z=I.slice(R.length);for(const Y of Z){V++;const W=T.rest._zod.run({value:Y,issues:[]},O);W instanceof Promise?L.push(W.then(J=>handleTupleResult(J,P,V))):handleTupleResult(W,P,V)}}return L.length?Promise.all(L).then(()=>P):P}});function handleTupleResult(_,T,R){_.issues.length&&T.issues.push(...prefixIssues(R,_.issues)),T.value[R]=_.value}const $ZodRecord=$constructor("$ZodRecord",(_,T)=>{$ZodType.init(_,T),_._zod.parse=(R,P)=>{const O=R.value;if(!isPlainObject$1(O))return R.issues.push({expected:"record",code:"invalid_type",input:O,inst:_}),R;const I=[],L=T.keyType._zod.values;if(L){R.value={};const U=new Set;for(const V of L)if(typeof V=="string"||typeof V=="number"||typeof V=="symbol"){U.add(typeof V=="number"?V.toString():V);const Z=T.valueType._zod.run({value:O[V],issues:[]},P);Z instanceof Promise?I.push(Z.then(Y=>{Y.issues.length&&R.issues.push(...prefixIssues(V,Y.issues)),R.value[V]=Y.value})):(Z.issues.length&&R.issues.push(...prefixIssues(V,Z.issues)),R.value[V]=Z.value)}let G;for(const V in O)U.has(V)||(G=G??[],G.push(V));G&&G.length>0&&R.issues.push({code:"unrecognized_keys",input:O,inst:_,keys:G})}else{R.value={};for(const U of Reflect.ownKeys(O)){if(U==="__proto__")continue;let G=T.keyType._zod.run({value:U,issues:[]},P);if(G instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof U=="string"&&number$6.test(U)&&G.issues.length&&G.issues.some(Y=>Y.code==="invalid_type"&&Y.expected==="number")){const Y=T.keyType._zod.run({value:Number(U),issues:[]},P);if(Y instanceof Promise)throw new Error("Async schemas not supported in object keys currently");Y.issues.length===0&&(G=Y)}if(G.issues.length){T.mode==="loose"?R.value[U]=O[U]:R.issues.push({code:"invalid_key",origin:"record",issues:G.issues.map(Y=>finalizeIssue(Y,P,config())),input:U,path:[U],inst:_});continue}const Z=T.valueType._zod.run({value:O[U],issues:[]},P);Z instanceof Promise?I.push(Z.then(Y=>{Y.issues.length&&R.issues.push(...prefixIssues(U,Y.issues)),R.value[G.value]=Y.value})):(Z.issues.length&&R.issues.push(...prefixIssues(U,Z.issues)),R.value[G.value]=Z.value)}}return I.length?Promise.all(I).then(()=>R):R}}),$ZodEnum=$constructor("$ZodEnum",(_,T)=>{$ZodType.init(_,T);const R=getEnumValues(T.entries),P=new Set(R);_._zod.values=P,_._zod.pattern=new RegExp(`^(${R.filter(O=>propertyKeyTypes.has(typeof O)).map(O=>typeof O=="string"?escapeRegex(O):O.toString()).join("|")})$`),_._zod.parse=(O,I)=>{const L=O.value;return P.has(L)||O.issues.push({code:"invalid_value",values:R,input:L,inst:_}),O}}),$ZodLiteral=$constructor("$ZodLiteral",(_,T)=>{if($ZodType.init(_,T),T.values.length===0)throw new Error("Cannot create literal schema with no valid values");const R=new Set(T.values);_._zod.values=R,_._zod.pattern=new RegExp(`^(${T.values.map(P=>typeof P=="string"?escapeRegex(P):P?escapeRegex(P.toString()):String(P)).join("|")})$`),_._zod.parse=(P,O)=>{const I=P.value;return R.has(I)||P.issues.push({code:"invalid_value",values:T.values,input:I,inst:_}),P}}),$ZodTransform=$constructor("$ZodTransform",(_,T)=>{$ZodType.init(_,T),_._zod.parse=(R,P)=>{if(P.direction==="backward")throw new $ZodEncodeError(_.constructor.name);const O=T.transform(R.value,R);if(P.async)return(O instanceof Promise?O:Promise.resolve(O)).then(L=>(R.value=L,R));if(O instanceof Promise)throw new $ZodAsyncError;return R.value=O,R}});function handleOptionalResult(_,T){return _.issues.length&&T===void 0?{issues:[],value:void 0}:_}const $ZodOptional=$constructor("$ZodOptional",(_,T)=>{$ZodType.init(_,T),_._zod.optin="optional",_._zod.optout="optional",defineLazy(_._zod,"values",()=>T.innerType._zod.values?new Set([...T.innerType._zod.values,void 0]):void 0),defineLazy(_._zod,"pattern",()=>{const R=T.innerType._zod.pattern;return R?new RegExp(`^(${cleanRegex(R.source)})?$`):void 0}),_._zod.parse=(R,P)=>{if(T.innerType._zod.optin==="optional"){const O=T.innerType._zod.run(R,P);return O instanceof Promise?O.then(I=>handleOptionalResult(I,R.value)):handleOptionalResult(O,R.value)}return R.value===void 0?R:T.innerType._zod.run(R,P)}}),$ZodExactOptional=$constructor("$ZodExactOptional",(_,T)=>{$ZodOptional.init(_,T),defineLazy(_._zod,"values",()=>T.innerType._zod.values),defineLazy(_._zod,"pattern",()=>T.innerType._zod.pattern),_._zod.parse=(R,P)=>T.innerType._zod.run(R,P)}),$ZodNullable=$constructor("$ZodNullable",(_,T)=>{$ZodType.init(_,T),defineLazy(_._zod,"optin",()=>T.innerType._zod.optin),defineLazy(_._zod,"optout",()=>T.innerType._zod.optout),defineLazy(_._zod,"pattern",()=>{const R=T.innerType._zod.pattern;return R?new RegExp(`^(${cleanRegex(R.source)}|null)$`):void 0}),defineLazy(_._zod,"values",()=>T.innerType._zod.values?new Set([...T.innerType._zod.values,null]):void 0),_._zod.parse=(R,P)=>R.value===null?R:T.innerType._zod.run(R,P)}),$ZodDefault=$constructor("$ZodDefault",(_,T)=>{$ZodType.init(_,T),_._zod.optin="optional",defineLazy(_._zod,"values",()=>T.innerType._zod.values),_._zod.parse=(R,P)=>{if(P.direction==="backward")return T.innerType._zod.run(R,P);if(R.value===void 0)return R.value=T.defaultValue,R;const O=T.innerType._zod.run(R,P);return O instanceof Promise?O.then(I=>handleDefaultResult(I,T)):handleDefaultResult(O,T)}});function handleDefaultResult(_,T){return _.value===void 0&&(_.value=T.defaultValue),_}const $ZodPrefault=$constructor("$ZodPrefault",(_,T)=>{$ZodType.init(_,T),_._zod.optin="optional",defineLazy(_._zod,"values",()=>T.innerType._zod.values),_._zod.parse=(R,P)=>(P.direction==="backward"||R.value===void 0&&(R.value=T.defaultValue),T.innerType._zod.run(R,P))}),$ZodNonOptional=$constructor("$ZodNonOptional",(_,T)=>{$ZodType.init(_,T),defineLazy(_._zod,"values",()=>{const R=T.innerType._zod.values;return R?new Set([...R].filter(P=>P!==void 0)):void 0}),_._zod.parse=(R,P)=>{const O=T.innerType._zod.run(R,P);return O instanceof Promise?O.then(I=>handleNonOptionalResult(I,_)):handleNonOptionalResult(O,_)}});function handleNonOptionalResult(_,T){return!_.issues.length&&_.value===void 0&&_.issues.push({code:"invalid_type",expected:"nonoptional",input:_.value,inst:T}),_}const $ZodCatch=$constructor("$ZodCatch",(_,T)=>{$ZodType.init(_,T),defineLazy(_._zod,"optin",()=>T.innerType._zod.optin),defineLazy(_._zod,"optout",()=>T.innerType._zod.optout),defineLazy(_._zod,"values",()=>T.innerType._zod.values),_._zod.parse=(R,P)=>{if(P.direction==="backward")return T.innerType._zod.run(R,P);const O=T.innerType._zod.run(R,P);return O instanceof Promise?O.then(I=>(R.value=I.value,I.issues.length&&(R.value=T.catchValue({...R,error:{issues:I.issues.map(L=>finalizeIssue(L,P,config()))},input:R.value}),R.issues=[]),R)):(R.value=O.value,O.issues.length&&(R.value=T.catchValue({...R,error:{issues:O.issues.map(I=>finalizeIssue(I,P,config()))},input:R.value}),R.issues=[]),R)}}),$ZodPipe=$constructor("$ZodPipe",(_,T)=>{$ZodType.init(_,T),defineLazy(_._zod,"values",()=>T.in._zod.values),defineLazy(_._zod,"optin",()=>T.in._zod.optin),defineLazy(_._zod,"optout",()=>T.out._zod.optout),defineLazy(_._zod,"propValues",()=>T.in._zod.propValues),_._zod.parse=(R,P)=>{if(P.direction==="backward"){const I=T.out._zod.run(R,P);return I instanceof Promise?I.then(L=>handlePipeResult(L,T.in,P)):handlePipeResult(I,T.in,P)}const O=T.in._zod.run(R,P);return O instanceof Promise?O.then(I=>handlePipeResult(I,T.out,P)):handlePipeResult(O,T.out,P)}});function handlePipeResult(_,T,R){return _.issues.length?(_.aborted=!0,_):T._zod.run({value:_.value,issues:_.issues},R)}const $ZodReadonly=$constructor("$ZodReadonly",(_,T)=>{$ZodType.init(_,T),defineLazy(_._zod,"propValues",()=>T.innerType._zod.propValues),defineLazy(_._zod,"values",()=>T.innerType._zod.values),defineLazy(_._zod,"optin",()=>T.innerType?._zod?.optin),defineLazy(_._zod,"optout",()=>T.innerType?._zod?.optout),_._zod.parse=(R,P)=>{if(P.direction==="backward")return T.innerType._zod.run(R,P);const O=T.innerType._zod.run(R,P);return O instanceof Promise?O.then(handleReadonlyResult):handleReadonlyResult(O)}});function handleReadonlyResult(_){return _.value=Object.freeze(_.value),_}const $ZodCustom=$constructor("$ZodCustom",(_,T)=>{$ZodCheck.init(_,T),$ZodType.init(_,T),_._zod.parse=(R,P)=>R,_._zod.check=R=>{const P=R.value,O=T.fn(P);if(O instanceof Promise)return O.then(I=>handleRefineResult(I,R,P,_));handleRefineResult(O,R,P,_)}});function handleRefineResult(_,T,R,P){if(!_){const O={code:"custom",input:R,inst:P,path:[...P._zod.def.path??[]],continue:!P._zod.def.abort};P._zod.def.params&&(O.params=P._zod.def.params),T.issues.push(issue(O))}}var _a;class $ZodRegistry{constructor(){this._map=new WeakMap,this._idmap=new Map}add(T,...R){const P=R[0];return this._map.set(T,P),P&&typeof P=="object"&&"id"in P&&this._idmap.set(P.id,T),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(T){const R=this._map.get(T);return R&&typeof R=="object"&&"id"in R&&this._idmap.delete(R.id),this._map.delete(T),this}get(T){const R=T._zod.parent;if(R){const P={...this.get(R)??{}};delete P.id;const O={...P,...this._map.get(T)};return Object.keys(O).length?O:void 0}return this._map.get(T)}has(T){return this._map.has(T)}}function registry$1(){return new $ZodRegistry}(_a=globalThis).__zod_globalRegistry??(_a.__zod_globalRegistry=registry$1());const globalRegistry=globalThis.__zod_globalRegistry;function _string(_,T){return new _({type:"string",...normalizeParams(T)})}function _email(_,T){return new _({type:"string",format:"email",check:"string_format",abort:!1,...normalizeParams(T)})}function _guid(_,T){return new _({type:"string",format:"guid",check:"string_format",abort:!1,...normalizeParams(T)})}function _uuid(_,T){return new _({type:"string",format:"uuid",check:"string_format",abort:!1,...normalizeParams(T)})}function _uuidv4(_,T){return new _({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...normalizeParams(T)})}function _uuidv6(_,T){return new _({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...normalizeParams(T)})}function _uuidv7(_,T){return new _({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...normalizeParams(T)})}function _url(_,T){return new _({type:"string",format:"url",check:"string_format",abort:!1,...normalizeParams(T)})}function _emoji(_,T){return new _({type:"string",format:"emoji",check:"string_format",abort:!1,...normalizeParams(T)})}function _nanoid(_,T){return new _({type:"string",format:"nanoid",check:"string_format",abort:!1,...normalizeParams(T)})}function _cuid(_,T){return new _({type:"string",format:"cuid",check:"string_format",abort:!1,...normalizeParams(T)})}function _cuid2(_,T){return new _({type:"string",format:"cuid2",check:"string_format",abort:!1,...normalizeParams(T)})}function _ulid(_,T){return new _({type:"string",format:"ulid",check:"string_format",abort:!1,...normalizeParams(T)})}function _xid(_,T){return new _({type:"string",format:"xid",check:"string_format",abort:!1,...normalizeParams(T)})}function _ksuid(_,T){return new _({type:"string",format:"ksuid",check:"string_format",abort:!1,...normalizeParams(T)})}function _ipv4(_,T){return new _({type:"string",format:"ipv4",check:"string_format",abort:!1,...normalizeParams(T)})}function _ipv6(_,T){return new _({type:"string",format:"ipv6",check:"string_format",abort:!1,...normalizeParams(T)})}function _cidrv4(_,T){return new _({type:"string",format:"cidrv4",check:"string_format",abort:!1,...normalizeParams(T)})}function _cidrv6(_,T){return new _({type:"string",format:"cidrv6",check:"string_format",abort:!1,...normalizeParams(T)})}function _base64(_,T){return new _({type:"string",format:"base64",check:"string_format",abort:!1,...normalizeParams(T)})}function _base64url(_,T){return new _({type:"string",format:"base64url",check:"string_format",abort:!1,...normalizeParams(T)})}function _e164(_,T){return new _({type:"string",format:"e164",check:"string_format",abort:!1,...normalizeParams(T)})}function _jwt(_,T){return new _({type:"string",format:"jwt",check:"string_format",abort:!1,...normalizeParams(T)})}function _isoDateTime(_,T){return new _({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...normalizeParams(T)})}function _isoDate(_,T){return new _({type:"string",format:"date",check:"string_format",...normalizeParams(T)})}function _isoTime(_,T){return new _({type:"string",format:"time",check:"string_format",precision:null,...normalizeParams(T)})}function _isoDuration(_,T){return new _({type:"string",format:"duration",check:"string_format",...normalizeParams(T)})}function _number(_,T){return new _({type:"number",checks:[],...normalizeParams(T)})}function _int(_,T){return new _({type:"number",check:"number_format",abort:!1,format:"safeint",...normalizeParams(T)})}function _boolean(_,T){return new _({type:"boolean",...normalizeParams(T)})}function _unknown(_){return new _({type:"unknown"})}function _never(_,T){return new _({type:"never",...normalizeParams(T)})}function _lt(_,T){return new $ZodCheckLessThan({check:"less_than",...normalizeParams(T),value:_,inclusive:!1})}function _lte(_,T){return new $ZodCheckLessThan({check:"less_than",...normalizeParams(T),value:_,inclusive:!0})}function _gt(_,T){return new $ZodCheckGreaterThan({check:"greater_than",...normalizeParams(T),value:_,inclusive:!1})}function _gte(_,T){return new $ZodCheckGreaterThan({check:"greater_than",...normalizeParams(T),value:_,inclusive:!0})}function _multipleOf(_,T){return new $ZodCheckMultipleOf({check:"multiple_of",...normalizeParams(T),value:_})}function _maxLength(_,T){return new $ZodCheckMaxLength({check:"max_length",...normalizeParams(T),maximum:_})}function _minLength(_,T){return new $ZodCheckMinLength({check:"min_length",...normalizeParams(T),minimum:_})}function _length(_,T){return new $ZodCheckLengthEquals({check:"length_equals",...normalizeParams(T),length:_})}function _regex(_,T){return new $ZodCheckRegex({check:"string_format",format:"regex",...normalizeParams(T),pattern:_})}function _lowercase(_){return new $ZodCheckLowerCase({check:"string_format",format:"lowercase",...normalizeParams(_)})}function _uppercase(_){return new $ZodCheckUpperCase({check:"string_format",format:"uppercase",...normalizeParams(_)})}function _includes(_,T){return new $ZodCheckIncludes({check:"string_format",format:"includes",...normalizeParams(T),includes:_})}function _startsWith(_,T){return new $ZodCheckStartsWith({check:"string_format",format:"starts_with",...normalizeParams(T),prefix:_})}function _endsWith(_,T){return new $ZodCheckEndsWith({check:"string_format",format:"ends_with",...normalizeParams(T),suffix:_})}function _overwrite(_){return new $ZodCheckOverwrite({check:"overwrite",tx:_})}function _normalize(_){return _overwrite(T=>T.normalize(_))}function _trim(){return _overwrite(_=>_.trim())}function _toLowerCase(){return _overwrite(_=>_.toLowerCase())}function _toUpperCase(){return _overwrite(_=>_.toUpperCase())}function _slugify(){return _overwrite(_=>slugify(_))}function _array(_,T,R){return new _({type:"array",element:T,...normalizeParams(R)})}function _refine(_,T,R){return new _({type:"custom",check:"custom",fn:T,...normalizeParams(R)})}function _superRefine(_){const T=_check(R=>(R.addIssue=P=>{if(typeof P=="string")R.issues.push(issue(P,R.value,T._zod.def));else{const O=P;O.fatal&&(O.continue=!1),O.code??(O.code="custom"),O.input??(O.input=R.value),O.inst??(O.inst=T),O.continue??(O.continue=!T._zod.def.abort),R.issues.push(issue(O))}},_(R.value,R)));return T}function _check(_,T){const R=new $ZodCheck({check:"custom",...normalizeParams(T)});return R._zod.check=_,R}function initializeContext(_){let T=_?.target??"draft-2020-12";return T==="draft-4"&&(T="draft-04"),T==="draft-7"&&(T="draft-07"),{processors:_.processors??{},metadataRegistry:_?.metadata??globalRegistry,target:T,unrepresentable:_?.unrepresentable??"throw",override:_?.override??(()=>{}),io:_?.io??"output",counter:0,seen:new Map,cycles:_?.cycles??"ref",reused:_?.reused??"inline",external:_?.external??void 0}}function process$1(_,T,R={path:[],schemaPath:[]}){var P;const O=_._zod.def,I=T.seen.get(_);if(I)return I.count++,R.schemaPath.includes(_)&&(I.cycle=R.path),I.schema;const L={schema:{},count:1,cycle:void 0,path:R.path};T.seen.set(_,L);const U=_._zod.toJSONSchema?.();if(U)L.schema=U;else{const Z={...R,schemaPath:[...R.schemaPath,_],path:R.path};if(_._zod.processJSONSchema)_._zod.processJSONSchema(T,L.schema,Z);else{const W=L.schema,J=T.processors[O.type];if(!J)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${O.type}`);J(_,T,W,Z)}const Y=_._zod.parent;Y&&(L.ref||(L.ref=Y),process$1(Y,T,Z),T.seen.get(Y).isParent=!0)}const G=T.metadataRegistry.get(_);return G&&Object.assign(L.schema,G),T.io==="input"&&isTransforming(_)&&(delete L.schema.examples,delete L.schema.default),T.io==="input"&&L.schema._prefault&&((P=L.schema).default??(P.default=L.schema._prefault)),delete L.schema._prefault,T.seen.get(_).schema}function extractDefs(_,T){const R=_.seen.get(T);if(!R)throw new Error("Unprocessed schema. This is a bug in Zod.");const P=new Map;for(const L of _.seen.entries()){const U=_.metadataRegistry.get(L[0])?.id;if(U){const G=P.get(U);if(G&&G!==L[0])throw new Error(`Duplicate schema id "${U}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);P.set(U,L[0])}}const O=L=>{const U=_.target==="draft-2020-12"?"$defs":"definitions";if(_.external){const Y=_.external.registry.get(L[0])?.id,W=_.external.uri??(ee=>ee);if(Y)return{ref:W(Y)};const J=L[1].defId??L[1].schema.id??`schema${_.counter++}`;return L[1].defId=J,{defId:J,ref:`${W("__shared")}#/${U}/${J}`}}if(L[1]===R)return{ref:"#"};const V=`#/${U}/`,Z=L[1].schema.id??`__schema${_.counter++}`;return{defId:Z,ref:V+Z}},I=L=>{if(L[1].schema.$ref)return;const U=L[1],{ref:G,defId:V}=O(L);U.def={...U.schema},V&&(U.defId=V);const Z=U.schema;for(const Y in Z)delete Z[Y];Z.$ref=G};if(_.cycles==="throw")for(const L of _.seen.entries()){const U=L[1];if(U.cycle)throw new Error(`Cycle detected: #/${U.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const L of _.seen.entries()){const U=L[1];if(T===L[0]){I(L);continue}if(_.external){const V=_.external.registry.get(L[0])?.id;if(T!==L[0]&&V){I(L);continue}}if(_.metadataRegistry.get(L[0])?.id){I(L);continue}if(U.cycle){I(L);continue}if(U.count>1&&_.reused==="ref"){I(L);continue}}}function finalize(_,T){const R=_.seen.get(T);if(!R)throw new Error("Unprocessed schema. This is a bug in Zod.");const P=L=>{const U=_.seen.get(L);if(U.ref===null)return;const G=U.def??U.schema,V={...G},Z=U.ref;if(U.ref=null,Z){P(Z);const W=_.seen.get(Z),J=W.schema;if(J.$ref&&(_.target==="draft-07"||_.target==="draft-04"||_.target==="openapi-3.0")?(G.allOf=G.allOf??[],G.allOf.push(J)):Object.assign(G,J),Object.assign(G,V),L._zod.parent===Z)for(const te in G)te==="$ref"||te==="allOf"||te in V||delete G[te];if(J.$ref)for(const te in G)te==="$ref"||te==="allOf"||te in W.def&&JSON.stringify(G[te])===JSON.stringify(W.def[te])&&delete G[te]}const Y=L._zod.parent;if(Y&&Y!==Z){P(Y);const W=_.seen.get(Y);if(W?.schema.$ref&&(G.$ref=W.schema.$ref,W.def))for(const J in G)J==="$ref"||J==="allOf"||J in W.def&&JSON.stringify(G[J])===JSON.stringify(W.def[J])&&delete G[J]}_.override({zodSchema:L,jsonSchema:G,path:U.path??[]})};for(const L of[..._.seen.entries()].reverse())P(L[0]);const O={};if(_.target==="draft-2020-12"?O.$schema="https://json-schema.org/draft/2020-12/schema":_.target==="draft-07"?O.$schema="http://json-schema.org/draft-07/schema#":_.target==="draft-04"?O.$schema="http://json-schema.org/draft-04/schema#":_.target,_.external?.uri){const L=_.external.registry.get(T)?.id;if(!L)throw new Error("Schema is missing an `id` property");O.$id=_.external.uri(L)}Object.assign(O,R.def??R.schema);const I=_.external?.defs??{};for(const L of _.seen.entries()){const U=L[1];U.def&&U.defId&&(I[U.defId]=U.def)}_.external||Object.keys(I).length>0&&(_.target==="draft-2020-12"?O.$defs=I:O.definitions=I);try{const L=JSON.parse(JSON.stringify(O));return Object.defineProperty(L,"~standard",{value:{...T["~standard"],jsonSchema:{input:createStandardJSONSchemaMethod(T,"input",_.processors),output:createStandardJSONSchemaMethod(T,"output",_.processors)}},enumerable:!1,writable:!1}),L}catch{throw new Error("Error converting schema to JSON.")}}function isTransforming(_,T){const R=T??{seen:new Set};if(R.seen.has(_))return!1;R.seen.add(_);const P=_._zod.def;if(P.type==="transform")return!0;if(P.type==="array")return isTransforming(P.element,R);if(P.type==="set")return isTransforming(P.valueType,R);if(P.type==="lazy")return isTransforming(P.getter(),R);if(P.type==="promise"||P.type==="optional"||P.type==="nonoptional"||P.type==="nullable"||P.type==="readonly"||P.type==="default"||P.type==="prefault")return isTransforming(P.innerType,R);if(P.type==="intersection")return isTransforming(P.left,R)||isTransforming(P.right,R);if(P.type==="record"||P.type==="map")return isTransforming(P.keyType,R)||isTransforming(P.valueType,R);if(P.type==="pipe")return isTransforming(P.in,R)||isTransforming(P.out,R);if(P.type==="object"){for(const O in P.shape)if(isTransforming(P.shape[O],R))return!0;return!1}if(P.type==="union"){for(const O of P.options)if(isTransforming(O,R))return!0;return!1}if(P.type==="tuple"){for(const O of P.items)if(isTransforming(O,R))return!0;return!!(P.rest&&isTransforming(P.rest,R))}return!1}const createToJSONSchemaMethod=(_,T={})=>R=>{const P=initializeContext({...R,processors:T});return process$1(_,P),extractDefs(P,_),finalize(P,_)},createStandardJSONSchemaMethod=(_,T,R={})=>P=>{const{libraryOptions:O,target:I}=P??{},L=initializeContext({...O??{},target:I,io:T,processors:R});return process$1(_,L),extractDefs(L,_),finalize(L,_)},formatMap={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},stringProcessor=(_,T,R,P)=>{const O=R;O.type="string";const{minimum:I,maximum:L,format:U,patterns:G,contentEncoding:V}=_._zod.bag;if(typeof I=="number"&&(O.minLength=I),typeof L=="number"&&(O.maxLength=L),U&&(O.format=formatMap[U]??U,O.format===""&&delete O.format,U==="time"&&delete O.format),V&&(O.contentEncoding=V),G&&G.size>0){const Z=[...G];Z.length===1?O.pattern=Z[0].source:Z.length>1&&(O.allOf=[...Z.map(Y=>({...T.target==="draft-07"||T.target==="draft-04"||T.target==="openapi-3.0"?{type:"string"}:{},pattern:Y.source}))])}},numberProcessor=(_,T,R,P)=>{const O=R,{minimum:I,maximum:L,format:U,multipleOf:G,exclusiveMaximum:V,exclusiveMinimum:Z}=_._zod.bag;typeof U=="string"&&U.includes("int")?O.type="integer":O.type="number",typeof Z=="number"&&(T.target==="draft-04"||T.target==="openapi-3.0"?(O.minimum=Z,O.exclusiveMinimum=!0):O.exclusiveMinimum=Z),typeof I=="number"&&(O.minimum=I,typeof Z=="number"&&T.target!=="draft-04"&&(Z>=I?delete O.minimum:delete O.exclusiveMinimum)),typeof V=="number"&&(T.target==="draft-04"||T.target==="openapi-3.0"?(O.maximum=V,O.exclusiveMaximum=!0):O.exclusiveMaximum=V),typeof L=="number"&&(O.maximum=L,typeof V=="number"&&T.target!=="draft-04"&&(V<=L?delete O.maximum:delete O.exclusiveMaximum)),typeof G=="number"&&(O.multipleOf=G)},booleanProcessor=(_,T,R,P)=>{R.type="boolean"},neverProcessor=(_,T,R,P)=>{R.not={}},unknownProcessor=(_,T,R,P)=>{},enumProcessor=(_,T,R,P)=>{const O=_._zod.def,I=getEnumValues(O.entries);I.every(L=>typeof L=="number")&&(R.type="number"),I.every(L=>typeof L=="string")&&(R.type="string"),R.enum=I},literalProcessor=(_,T,R,P)=>{const O=_._zod.def,I=[];for(const L of O.values)if(L===void 0){if(T.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof L=="bigint"){if(T.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");I.push(Number(L))}else I.push(L);if(I.length!==0)if(I.length===1){const L=I[0];R.type=L===null?"null":typeof L,T.target==="draft-04"||T.target==="openapi-3.0"?R.enum=[L]:R.const=L}else I.every(L=>typeof L=="number")&&(R.type="number"),I.every(L=>typeof L=="string")&&(R.type="string"),I.every(L=>typeof L=="boolean")&&(R.type="boolean"),I.every(L=>L===null)&&(R.type="null"),R.enum=I},customProcessor=(_,T,R,P)=>{if(T.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},transformProcessor=(_,T,R,P)=>{if(T.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},arrayProcessor=(_,T,R,P)=>{const O=R,I=_._zod.def,{minimum:L,maximum:U}=_._zod.bag;typeof L=="number"&&(O.minItems=L),typeof U=="number"&&(O.maxItems=U),O.type="array",O.items=process$1(I.element,T,{...P,path:[...P.path,"items"]})},objectProcessor=(_,T,R,P)=>{const O=R,I=_._zod.def;O.type="object",O.properties={};const L=I.shape;for(const V in L)O.properties[V]=process$1(L[V],T,{...P,path:[...P.path,"properties",V]});const U=new Set(Object.keys(L)),G=new Set([...U].filter(V=>{const Z=I.shape[V]._zod;return T.io==="input"?Z.optin===void 0:Z.optout===void 0}));G.size>0&&(O.required=Array.from(G)),I.catchall?._zod.def.type==="never"?O.additionalProperties=!1:I.catchall?I.catchall&&(O.additionalProperties=process$1(I.catchall,T,{...P,path:[...P.path,"additionalProperties"]})):T.io==="output"&&(O.additionalProperties=!1)},unionProcessor=(_,T,R,P)=>{const O=_._zod.def,I=O.inclusive===!1,L=O.options.map((U,G)=>process$1(U,T,{...P,path:[...P.path,I?"oneOf":"anyOf",G]}));I?R.oneOf=L:R.anyOf=L},intersectionProcessor=(_,T,R,P)=>{const O=_._zod.def,I=process$1(O.left,T,{...P,path:[...P.path,"allOf",0]}),L=process$1(O.right,T,{...P,path:[...P.path,"allOf",1]}),U=V=>"allOf"in V&&Object.keys(V).length===1,G=[...U(I)?I.allOf:[I],...U(L)?L.allOf:[L]];R.allOf=G},tupleProcessor=(_,T,R,P)=>{const O=R,I=_._zod.def;O.type="array";const L=T.target==="draft-2020-12"?"prefixItems":"items",U=T.target==="draft-2020-12"||T.target==="openapi-3.0"?"items":"additionalItems",G=I.items.map((W,J)=>process$1(W,T,{...P,path:[...P.path,L,J]})),V=I.rest?process$1(I.rest,T,{...P,path:[...P.path,U,...T.target==="openapi-3.0"?[I.items.length]:[]]}):null;T.target==="draft-2020-12"?(O.prefixItems=G,V&&(O.items=V)):T.target==="openapi-3.0"?(O.items={anyOf:G},V&&O.items.anyOf.push(V),O.minItems=G.length,V||(O.maxItems=G.length)):(O.items=G,V&&(O.additionalItems=V));const{minimum:Z,maximum:Y}=_._zod.bag;typeof Z=="number"&&(O.minItems=Z),typeof Y=="number"&&(O.maxItems=Y)},recordProcessor=(_,T,R,P)=>{const O=R,I=_._zod.def;O.type="object";const L=I.keyType,G=L._zod.bag?.patterns;if(I.mode==="loose"&&G&&G.size>0){const Z=process$1(I.valueType,T,{...P,path:[...P.path,"patternProperties","*"]});O.patternProperties={};for(const Y of G)O.patternProperties[Y.source]=Z}else(T.target==="draft-07"||T.target==="draft-2020-12")&&(O.propertyNames=process$1(I.keyType,T,{...P,path:[...P.path,"propertyNames"]})),O.additionalProperties=process$1(I.valueType,T,{...P,path:[...P.path,"additionalProperties"]});const V=L._zod.values;if(V){const Z=[...V].filter(Y=>typeof Y=="string"||typeof Y=="number");Z.length>0&&(O.required=Z)}},nullableProcessor=(_,T,R,P)=>{const O=_._zod.def,I=process$1(O.innerType,T,P),L=T.seen.get(_);T.target==="openapi-3.0"?(L.ref=O.innerType,R.nullable=!0):R.anyOf=[I,{type:"null"}]},nonoptionalProcessor=(_,T,R,P)=>{const O=_._zod.def;process$1(O.innerType,T,P);const I=T.seen.get(_);I.ref=O.innerType},defaultProcessor=(_,T,R,P)=>{const O=_._zod.def;process$1(O.innerType,T,P);const I=T.seen.get(_);I.ref=O.innerType,R.default=JSON.parse(JSON.stringify(O.defaultValue))},prefaultProcessor=(_,T,R,P)=>{const O=_._zod.def;process$1(O.innerType,T,P);const I=T.seen.get(_);I.ref=O.innerType,T.io==="input"&&(R._prefault=JSON.parse(JSON.stringify(O.defaultValue)))},catchProcessor=(_,T,R,P)=>{const O=_._zod.def;process$1(O.innerType,T,P);const I=T.seen.get(_);I.ref=O.innerType;let L;try{L=O.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}R.default=L},pipeProcessor=(_,T,R,P)=>{const O=_._zod.def,I=T.io==="input"?O.in._zod.def.type==="transform"?O.out:O.in:O.out;process$1(I,T,P);const L=T.seen.get(_);L.ref=I},readonlyProcessor=(_,T,R,P)=>{const O=_._zod.def;process$1(O.innerType,T,P);const I=T.seen.get(_);I.ref=O.innerType,R.readOnly=!0},optionalProcessor=(_,T,R,P)=>{const O=_._zod.def;process$1(O.innerType,T,P);const I=T.seen.get(_);I.ref=O.innerType},ZodISODateTime=$constructor("ZodISODateTime",(_,T)=>{$ZodISODateTime.init(_,T),ZodStringFormat.init(_,T)});function datetime(_){return _isoDateTime(ZodISODateTime,_)}const ZodISODate=$constructor("ZodISODate",(_,T)=>{$ZodISODate.init(_,T),ZodStringFormat.init(_,T)});function date$2(_){return _isoDate(ZodISODate,_)}const ZodISOTime=$constructor("ZodISOTime",(_,T)=>{$ZodISOTime.init(_,T),ZodStringFormat.init(_,T)});function time$1(_){return _isoTime(ZodISOTime,_)}const ZodISODuration=$constructor("ZodISODuration",(_,T)=>{$ZodISODuration.init(_,T),ZodStringFormat.init(_,T)});function duration(_){return _isoDuration(ZodISODuration,_)}const initializer$1=(_,T)=>{$ZodError.init(_,T),_.name="ZodError",Object.defineProperties(_,{format:{value:R=>formatError(_,R)},flatten:{value:R=>flattenError(_,R)},addIssue:{value:R=>{_.issues.push(R),_.message=JSON.stringify(_.issues,jsonStringifyReplacer,2)}},addIssues:{value:R=>{_.issues.push(...R),_.message=JSON.stringify(_.issues,jsonStringifyReplacer,2)}},isEmpty:{get(){return _.issues.length===0}}})},ZodRealError=$constructor("ZodError",initializer$1,{Parent:Error}),parse$4=_parse(ZodRealError),parseAsync=_parseAsync(ZodRealError),safeParse=_safeParse(ZodRealError),safeParseAsync=_safeParseAsync(ZodRealError),encode=_encode(ZodRealError),decode=_decode(ZodRealError),encodeAsync=_encodeAsync(ZodRealError),decodeAsync=_decodeAsync(ZodRealError),safeEncode=_safeEncode(ZodRealError),safeDecode=_safeDecode(ZodRealError),safeEncodeAsync=_safeEncodeAsync(ZodRealError),safeDecodeAsync=_safeDecodeAsync(ZodRealError),ZodType=$constructor("ZodType",(_,T)=>($ZodType.init(_,T),Object.assign(_["~standard"],{jsonSchema:{input:createStandardJSONSchemaMethod(_,"input"),output:createStandardJSONSchemaMethod(_,"output")}}),_.toJSONSchema=createToJSONSchemaMethod(_,{}),_.def=T,_.type=T.type,Object.defineProperty(_,"_def",{value:T}),_.check=(...R)=>_.clone(mergeDefs(T,{checks:[...T.checks??[],...R.map(P=>typeof P=="function"?{_zod:{check:P,def:{check:"custom"},onattach:[]}}:P)]}),{parent:!0}),_.with=_.check,_.clone=(R,P)=>clone(_,R,P),_.brand=()=>_,_.register=((R,P)=>(R.add(_,P),_)),_.parse=(R,P)=>parse$4(_,R,P,{callee:_.parse}),_.safeParse=(R,P)=>safeParse(_,R,P),_.parseAsync=async(R,P)=>parseAsync(_,R,P,{callee:_.parseAsync}),_.safeParseAsync=async(R,P)=>safeParseAsync(_,R,P),_.spa=_.safeParseAsync,_.encode=(R,P)=>encode(_,R,P),_.decode=(R,P)=>decode(_,R,P),_.encodeAsync=async(R,P)=>encodeAsync(_,R,P),_.decodeAsync=async(R,P)=>decodeAsync(_,R,P),_.safeEncode=(R,P)=>safeEncode(_,R,P),_.safeDecode=(R,P)=>safeDecode(_,R,P),_.safeEncodeAsync=async(R,P)=>safeEncodeAsync(_,R,P),_.safeDecodeAsync=async(R,P)=>safeDecodeAsync(_,R,P),_.refine=(R,P)=>_.check(refine(R,P)),_.superRefine=R=>_.check(superRefine(R)),_.overwrite=R=>_.check(_overwrite(R)),_.optional=()=>optional(_),_.exactOptional=()=>exactOptional(_),_.nullable=()=>nullable(_),_.nullish=()=>optional(nullable(_)),_.nonoptional=R=>nonoptional(_,R),_.array=()=>array$2(_),_.or=R=>union([_,R]),_.and=R=>intersection(_,R),_.transform=R=>pipe(_,transform(R)),_.default=R=>_default(_,R),_.prefault=R=>prefault(_,R),_.catch=R=>_catch(_,R),_.pipe=R=>pipe(_,R),_.readonly=()=>readonly(_),_.describe=R=>{const P=_.clone();return globalRegistry.add(P,{description:R}),P},Object.defineProperty(_,"description",{get(){return globalRegistry.get(_)?.description},configurable:!0}),_.meta=(...R)=>{if(R.length===0)return globalRegistry.get(_);const P=_.clone();return globalRegistry.add(P,R[0]),P},_.isOptional=()=>_.safeParse(void 0).success,_.isNullable=()=>_.safeParse(null).success,_.apply=R=>R(_),_)),_ZodString=$constructor("_ZodString",(_,T)=>{$ZodString.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(P,O,I)=>stringProcessor(_,P,O);const R=_._zod.bag;_.format=R.format??null,_.minLength=R.minimum??null,_.maxLength=R.maximum??null,_.regex=(...P)=>_.check(_regex(...P)),_.includes=(...P)=>_.check(_includes(...P)),_.startsWith=(...P)=>_.check(_startsWith(...P)),_.endsWith=(...P)=>_.check(_endsWith(...P)),_.min=(...P)=>_.check(_minLength(...P)),_.max=(...P)=>_.check(_maxLength(...P)),_.length=(...P)=>_.check(_length(...P)),_.nonempty=(...P)=>_.check(_minLength(1,...P)),_.lowercase=P=>_.check(_lowercase(P)),_.uppercase=P=>_.check(_uppercase(P)),_.trim=()=>_.check(_trim()),_.normalize=(...P)=>_.check(_normalize(...P)),_.toLowerCase=()=>_.check(_toLowerCase()),_.toUpperCase=()=>_.check(_toUpperCase()),_.slugify=()=>_.check(_slugify())}),ZodString=$constructor("ZodString",(_,T)=>{$ZodString.init(_,T),_ZodString.init(_,T),_.email=R=>_.check(_email(ZodEmail,R)),_.url=R=>_.check(_url(ZodURL,R)),_.jwt=R=>_.check(_jwt(ZodJWT,R)),_.emoji=R=>_.check(_emoji(ZodEmoji,R)),_.guid=R=>_.check(_guid(ZodGUID,R)),_.uuid=R=>_.check(_uuid(ZodUUID,R)),_.uuidv4=R=>_.check(_uuidv4(ZodUUID,R)),_.uuidv6=R=>_.check(_uuidv6(ZodUUID,R)),_.uuidv7=R=>_.check(_uuidv7(ZodUUID,R)),_.nanoid=R=>_.check(_nanoid(ZodNanoID,R)),_.guid=R=>_.check(_guid(ZodGUID,R)),_.cuid=R=>_.check(_cuid(ZodCUID,R)),_.cuid2=R=>_.check(_cuid2(ZodCUID2,R)),_.ulid=R=>_.check(_ulid(ZodULID,R)),_.base64=R=>_.check(_base64(ZodBase64,R)),_.base64url=R=>_.check(_base64url(ZodBase64URL,R)),_.xid=R=>_.check(_xid(ZodXID,R)),_.ksuid=R=>_.check(_ksuid(ZodKSUID,R)),_.ipv4=R=>_.check(_ipv4(ZodIPv4,R)),_.ipv6=R=>_.check(_ipv6(ZodIPv6,R)),_.cidrv4=R=>_.check(_cidrv4(ZodCIDRv4,R)),_.cidrv6=R=>_.check(_cidrv6(ZodCIDRv6,R)),_.e164=R=>_.check(_e164(ZodE164,R)),_.datetime=R=>_.check(datetime(R)),_.date=R=>_.check(date$2(R)),_.time=R=>_.check(time$1(R)),_.duration=R=>_.check(duration(R))});function string$1(_){return _string(ZodString,_)}const ZodStringFormat=$constructor("ZodStringFormat",(_,T)=>{$ZodStringFormat.init(_,T),_ZodString.init(_,T)}),ZodEmail=$constructor("ZodEmail",(_,T)=>{$ZodEmail.init(_,T),ZodStringFormat.init(_,T)}),ZodGUID=$constructor("ZodGUID",(_,T)=>{$ZodGUID.init(_,T),ZodStringFormat.init(_,T)}),ZodUUID=$constructor("ZodUUID",(_,T)=>{$ZodUUID.init(_,T),ZodStringFormat.init(_,T)}),ZodURL=$constructor("ZodURL",(_,T)=>{$ZodURL.init(_,T),ZodStringFormat.init(_,T)}),ZodEmoji=$constructor("ZodEmoji",(_,T)=>{$ZodEmoji.init(_,T),ZodStringFormat.init(_,T)}),ZodNanoID=$constructor("ZodNanoID",(_,T)=>{$ZodNanoID.init(_,T),ZodStringFormat.init(_,T)}),ZodCUID=$constructor("ZodCUID",(_,T)=>{$ZodCUID.init(_,T),ZodStringFormat.init(_,T)}),ZodCUID2=$constructor("ZodCUID2",(_,T)=>{$ZodCUID2.init(_,T),ZodStringFormat.init(_,T)}),ZodULID=$constructor("ZodULID",(_,T)=>{$ZodULID.init(_,T),ZodStringFormat.init(_,T)}),ZodXID=$constructor("ZodXID",(_,T)=>{$ZodXID.init(_,T),ZodStringFormat.init(_,T)}),ZodKSUID=$constructor("ZodKSUID",(_,T)=>{$ZodKSUID.init(_,T),ZodStringFormat.init(_,T)}),ZodIPv4=$constructor("ZodIPv4",(_,T)=>{$ZodIPv4.init(_,T),ZodStringFormat.init(_,T)}),ZodIPv6=$constructor("ZodIPv6",(_,T)=>{$ZodIPv6.init(_,T),ZodStringFormat.init(_,T)}),ZodCIDRv4=$constructor("ZodCIDRv4",(_,T)=>{$ZodCIDRv4.init(_,T),ZodStringFormat.init(_,T)}),ZodCIDRv6=$constructor("ZodCIDRv6",(_,T)=>{$ZodCIDRv6.init(_,T),ZodStringFormat.init(_,T)}),ZodBase64=$constructor("ZodBase64",(_,T)=>{$ZodBase64.init(_,T),ZodStringFormat.init(_,T)}),ZodBase64URL=$constructor("ZodBase64URL",(_,T)=>{$ZodBase64URL.init(_,T),ZodStringFormat.init(_,T)}),ZodE164=$constructor("ZodE164",(_,T)=>{$ZodE164.init(_,T),ZodStringFormat.init(_,T)}),ZodJWT=$constructor("ZodJWT",(_,T)=>{$ZodJWT.init(_,T),ZodStringFormat.init(_,T)}),ZodNumber=$constructor("ZodNumber",(_,T)=>{$ZodNumber.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(P,O,I)=>numberProcessor(_,P,O),_.gt=(P,O)=>_.check(_gt(P,O)),_.gte=(P,O)=>_.check(_gte(P,O)),_.min=(P,O)=>_.check(_gte(P,O)),_.lt=(P,O)=>_.check(_lt(P,O)),_.lte=(P,O)=>_.check(_lte(P,O)),_.max=(P,O)=>_.check(_lte(P,O)),_.int=P=>_.check(int(P)),_.safe=P=>_.check(int(P)),_.positive=P=>_.check(_gt(0,P)),_.nonnegative=P=>_.check(_gte(0,P)),_.negative=P=>_.check(_lt(0,P)),_.nonpositive=P=>_.check(_lte(0,P)),_.multipleOf=(P,O)=>_.check(_multipleOf(P,O)),_.step=(P,O)=>_.check(_multipleOf(P,O)),_.finite=()=>_;const R=_._zod.bag;_.minValue=Math.max(R.minimum??Number.NEGATIVE_INFINITY,R.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,_.maxValue=Math.min(R.maximum??Number.POSITIVE_INFINITY,R.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,_.isInt=(R.format??"").includes("int")||Number.isSafeInteger(R.multipleOf??.5),_.isFinite=!0,_.format=R.format??null});function number$5(_){return _number(ZodNumber,_)}const ZodNumberFormat=$constructor("ZodNumberFormat",(_,T)=>{$ZodNumberFormat.init(_,T),ZodNumber.init(_,T)});function int(_){return _int(ZodNumberFormat,_)}const ZodBoolean=$constructor("ZodBoolean",(_,T)=>{$ZodBoolean.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>booleanProcessor(_,R,P)});function boolean(_){return _boolean(ZodBoolean,_)}const ZodUnknown=$constructor("ZodUnknown",(_,T)=>{$ZodUnknown.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>unknownProcessor()});function unknown(){return _unknown(ZodUnknown)}const ZodNever=$constructor("ZodNever",(_,T)=>{$ZodNever.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>neverProcessor(_,R,P)});function never(_){return _never(ZodNever,_)}const ZodArray=$constructor("ZodArray",(_,T)=>{$ZodArray.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>arrayProcessor(_,R,P,O),_.element=T.element,_.min=(R,P)=>_.check(_minLength(R,P)),_.nonempty=R=>_.check(_minLength(1,R)),_.max=(R,P)=>_.check(_maxLength(R,P)),_.length=(R,P)=>_.check(_length(R,P)),_.unwrap=()=>_.element});function array$2(_,T){return _array(ZodArray,_,T)}const ZodObject=$constructor("ZodObject",(_,T)=>{$ZodObjectJIT.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>objectProcessor(_,R,P,O),defineLazy(_,"shape",()=>T.shape),_.keyof=()=>_enum(Object.keys(_._zod.def.shape)),_.catchall=R=>_.clone({..._._zod.def,catchall:R}),_.passthrough=()=>_.clone({..._._zod.def,catchall:unknown()}),_.loose=()=>_.clone({..._._zod.def,catchall:unknown()}),_.strict=()=>_.clone({..._._zod.def,catchall:never()}),_.strip=()=>_.clone({..._._zod.def,catchall:void 0}),_.extend=R=>extend$1(_,R),_.safeExtend=R=>safeExtend(_,R),_.merge=R=>merge$1(_,R),_.pick=R=>pick(_,R),_.omit=R=>omit(_,R),_.partial=(...R)=>partial(ZodOptional,_,R[0]),_.required=(...R)=>required(ZodNonOptional,_,R[0])});function object$1(_,T){const R={type:"object",shape:_??{},...normalizeParams(T)};return new ZodObject(R)}const ZodUnion=$constructor("ZodUnion",(_,T)=>{$ZodUnion.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>unionProcessor(_,R,P,O),_.options=T.options});function union(_,T){return new ZodUnion({type:"union",options:_,...normalizeParams(T)})}const ZodIntersection=$constructor("ZodIntersection",(_,T)=>{$ZodIntersection.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>intersectionProcessor(_,R,P,O)});function intersection(_,T){return new ZodIntersection({type:"intersection",left:_,right:T})}const ZodTuple=$constructor("ZodTuple",(_,T)=>{$ZodTuple.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>tupleProcessor(_,R,P,O),_.rest=R=>_.clone({..._._zod.def,rest:R})});function tuple(_,T,R){const P=T instanceof $ZodType,O=P?R:T,I=P?T:null;return new ZodTuple({type:"tuple",items:_,rest:I,...normalizeParams(O)})}const ZodRecord=$constructor("ZodRecord",(_,T)=>{$ZodRecord.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>recordProcessor(_,R,P,O),_.keyType=T.keyType,_.valueType=T.valueType});function record(_,T,R){return new ZodRecord({type:"record",keyType:_,valueType:T,...normalizeParams(R)})}const ZodEnum=$constructor("ZodEnum",(_,T)=>{$ZodEnum.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(P,O,I)=>enumProcessor(_,P,O),_.enum=T.entries,_.options=Object.values(T.entries);const R=new Set(Object.keys(T.entries));_.extract=(P,O)=>{const I={};for(const L of P)if(R.has(L))I[L]=T.entries[L];else throw new Error(`Key ${L} not found in enum`);return new ZodEnum({...T,checks:[],...normalizeParams(O),entries:I})},_.exclude=(P,O)=>{const I={...T.entries};for(const L of P)if(R.has(L))delete I[L];else throw new Error(`Key ${L} not found in enum`);return new ZodEnum({...T,checks:[],...normalizeParams(O),entries:I})}});function _enum(_,T){const R=Array.isArray(_)?Object.fromEntries(_.map(P=>[P,P])):_;return new ZodEnum({type:"enum",entries:R,...normalizeParams(T)})}const ZodLiteral=$constructor("ZodLiteral",(_,T)=>{$ZodLiteral.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>literalProcessor(_,R,P),_.values=new Set(T.values),Object.defineProperty(_,"value",{get(){if(T.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return T.values[0]}})});function literal(_,T){return new ZodLiteral({type:"literal",values:Array.isArray(_)?_:[_],...normalizeParams(T)})}const ZodTransform=$constructor("ZodTransform",(_,T)=>{$ZodTransform.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>transformProcessor(_,R),_._zod.parse=(R,P)=>{if(P.direction==="backward")throw new $ZodEncodeError(_.constructor.name);R.addIssue=I=>{if(typeof I=="string")R.issues.push(issue(I,R.value,T));else{const L=I;L.fatal&&(L.continue=!1),L.code??(L.code="custom"),L.input??(L.input=R.value),L.inst??(L.inst=_),R.issues.push(issue(L))}};const O=T.transform(R.value,R);return O instanceof Promise?O.then(I=>(R.value=I,R)):(R.value=O,R)}});function transform(_){return new ZodTransform({type:"transform",transform:_})}const ZodOptional=$constructor("ZodOptional",(_,T)=>{$ZodOptional.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>optionalProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType});function optional(_){return new ZodOptional({type:"optional",innerType:_})}const ZodExactOptional=$constructor("ZodExactOptional",(_,T)=>{$ZodExactOptional.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>optionalProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType});function exactOptional(_){return new ZodExactOptional({type:"optional",innerType:_})}const ZodNullable=$constructor("ZodNullable",(_,T)=>{$ZodNullable.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>nullableProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType});function nullable(_){return new ZodNullable({type:"nullable",innerType:_})}const ZodDefault=$constructor("ZodDefault",(_,T)=>{$ZodDefault.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>defaultProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType,_.removeDefault=_.unwrap});function _default(_,T){return new ZodDefault({type:"default",innerType:_,get defaultValue(){return typeof T=="function"?T():shallowClone(T)}})}const ZodPrefault=$constructor("ZodPrefault",(_,T)=>{$ZodPrefault.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>prefaultProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType});function prefault(_,T){return new ZodPrefault({type:"prefault",innerType:_,get defaultValue(){return typeof T=="function"?T():shallowClone(T)}})}const ZodNonOptional=$constructor("ZodNonOptional",(_,T)=>{$ZodNonOptional.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>nonoptionalProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType});function nonoptional(_,T){return new ZodNonOptional({type:"nonoptional",innerType:_,...normalizeParams(T)})}const ZodCatch=$constructor("ZodCatch",(_,T)=>{$ZodCatch.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>catchProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType,_.removeCatch=_.unwrap});function _catch(_,T){return new ZodCatch({type:"catch",innerType:_,catchValue:typeof T=="function"?T:()=>T})}const ZodPipe=$constructor("ZodPipe",(_,T)=>{$ZodPipe.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>pipeProcessor(_,R,P,O),_.in=T.in,_.out=T.out});function pipe(_,T){return new ZodPipe({type:"pipe",in:_,out:T})}const ZodReadonly=$constructor("ZodReadonly",(_,T)=>{$ZodReadonly.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>readonlyProcessor(_,R,P,O),_.unwrap=()=>_._zod.def.innerType});function readonly(_){return new ZodReadonly({type:"readonly",innerType:_})}const ZodCustom=$constructor("ZodCustom",(_,T)=>{$ZodCustom.init(_,T),ZodType.init(_,T),_._zod.processJSONSchema=(R,P,O)=>customProcessor(_,R)});function refine(_,T={}){return _refine(ZodCustom,_,T)}function superRefine(_){return _superRefine(_)}const metadataSchema$1=object$1({model:string$1(),version:string$1()}),rgbColorSchema=object$1({r:number$5().min(0).max(255),g:number$5().min(0).max(255),b:number$5().min(0).max(255)});object$1({min:number$5(),max:number$5()});const emtEventTimesSchema=object$1({time_A_start:number$5(),time_A_end:number$5(),time_B_start:number$5(),time_B_end:number$5(),time_S_start:number$5(),time_S_end:number$5(),time_P_start:number$5(),time_P_end:number$5()}),ehtCellTypeSchema=object$1({N_init:number$5().int().nonnegative(),location:string$1(),R_hard:number$5().positive(),R_hard_div:number$5().positive(),R_soft:number$5().positive(),color:rgbColorSchema,dur_G2:number$5().nonnegative(),dur_mitosis:number$5().nonnegative(),k_apical_junction:number$5().nonnegative(),k_cytos:number$5().nonnegative(),max_cytoskeleton_length:number$5().nonnegative(),run:number$5().min(0).max(1),running_speed:number$5().nonnegative(),running_mode:number$5().int().min(0).max(3),stiffness_apical_apical:number$5().nonnegative(),stiffness_apical_apical_div:number$5().nonnegative(),stiffness_nuclei_apical:number$5().nonnegative(),stiffness_nuclei_basal:number$5().nonnegative(),stiffness_repulsion:number$5().nonnegative(),stiffness_straightness:number$5().nonnegative(),lifespan_start:number$5(),lifespan_end:number$5(),INM:number$5().min(0).max(1),hetero:boolean(),events:emtEventTimesSchema,diffusion:number$5().nonnegative(),basal_damping_ratio:number$5().nonnegative(),max_basal_junction_dist:number$5().positive(),cytos_init:number$5().nonnegative(),basal_membrane_repulsion:number$5().nonnegative(),apical_junction_init:number$5().nonnegative()}),ehtGeneralParamsSchema=object$1({t_end:number$5().positive(),dt:number$5().positive(),random_seed:number$5().int(),full_circle:boolean(),w_init:number$5().positive(),h_init:number$5().positive(),mu:number$5().positive(),n_substeps:number$5().int().positive(),alg_dt:number$5().positive(),w_screen:number$5().positive(),h_screen:number$5().positive(),p_div_out:number$5().min(0).max(1),perimeter:number$5().positive(),aspect_ratio:number$5(),hard_sphere_nuclei:boolean()}),ehtCellPropertyParamsSchema=object$1({}),ehtCellTypesMapSchema=record(string$1(),ehtCellTypeSchema),ehtParamsSchema=object$1({metadata:metadataSchema$1,general:ehtGeneralParamsSchema,cell_prop:ehtCellPropertyParamsSchema,cell_types:ehtCellTypesMapSchema}),partialMetadataSchema=metadataSchema$1.partial(),partialEhtGeneralParamsSchema=ehtGeneralParamsSchema.partial(),partialEhtCellPropertyParamsSchema=ehtCellPropertyParamsSchema.partial(),partialEhtCellTypeSchema=ehtCellTypeSchema.partial();object$1({metadata:partialMetadataSchema.optional(),general:partialEhtGeneralParamsSchema.optional(),cell_prop:partialEhtCellPropertyParamsSchema.optional(),cell_types:record(string$1(),partialEhtCellTypeSchema).optional()});const DEFAULT_CONTROL_CELL={N_init:25,location:"",R_hard:.4,R_hard_div:.7,R_soft:1.2,color:{r:30,g:100,b:20},dur_G2:.5,dur_mitosis:.5,k_apical_junction:5,k_cytos:5,max_cytoskeleton_length:.5,run:0,running_speed:1,running_mode:0,stiffness_apical_apical:2,stiffness_apical_apical_div:4,stiffness_nuclei_apical:3,stiffness_nuclei_basal:2,stiffness_repulsion:2,stiffness_straightness:5,lifespan_start:5.5,lifespan_end:6.5,INM:0,hetero:!1,events:{time_A_start:1/0,time_A_end:1/0,time_B_start:1/0,time_B_end:1/0,time_S_start:1/0,time_S_end:1/0,time_P_start:1/0,time_P_end:1/0},diffusion:.2,basal_damping_ratio:1,max_basal_junction_dist:4,cytos_init:0,basal_membrane_repulsion:0,apical_junction_init:0},DEFAULT_EMT_CELL={N_init:5,location:"bottom",R_hard:.4,R_hard_div:.7,R_soft:1.2,color:{r:128,g:0,b:128},dur_G2:.5,dur_mitosis:.5,k_apical_junction:1,k_cytos:5,max_cytoskeleton_length:.5,run:0,running_speed:1,running_mode:0,stiffness_apical_apical:2,stiffness_apical_apical_div:4,stiffness_nuclei_apical:3,stiffness_nuclei_basal:2,stiffness_repulsion:4,stiffness_straightness:2,lifespan_start:5.5,lifespan_end:6.5,INM:0,hetero:!0,events:{time_A_start:3,time_A_end:12,time_B_start:3,time_B_end:12,time_S_start:1/0,time_S_end:1/0,time_P_start:1/0,time_P_end:1/0},diffusion:.2,basal_damping_ratio:1,max_basal_junction_dist:4,cytos_init:0,basal_membrane_repulsion:0,apical_junction_init:0},DEFAULT_EHT_PARAMS={metadata:{model:"EHT",version:"1.0.0"},general:{t_end:48,dt:.1,random_seed:0,full_circle:!0,w_init:80,h_init:5,mu:.2,n_substeps:30,alg_dt:.01,w_screen:50,h_screen:25,p_div_out:1,perimeter:105,aspect_ratio:1,hard_sphere_nuclei:!1},cell_prop:{},cell_types:{control:DEFAULT_CONTROL_CELL,emt:DEFAULT_EMT_CELL}},EHT_PRESETS=[{key:"default",label:"Default",create:()=>structuredClone(DEFAULT_EHT_PARAMS)},{key:"chick_embryo_control",label:"Chick Embryo Control",create:()=>({metadata:{model:"EHT",version:"1.0.0"},general:{t_end:54,dt:.1,random_seed:0,full_circle:!1,w_init:8,h_init:10,mu:.2,n_substeps:30,alg_dt:.05,w_screen:15,h_screen:0,p_div_out:.8,perimeter:20,aspect_ratio:0,hard_sphere_nuclei:!1},cell_prop:{},cell_types:{control:{N_init:45,location:"",R_hard:.3,R_hard_div:.7,R_soft:1,color:{r:0,g:128,b:0},dur_G2:.5,dur_mitosis:.5,k_apical_junction:1,k_cytos:5,max_cytoskeleton_length:0,run:0,running_speed:1,running_mode:0,stiffness_apical_apical:5,stiffness_apical_apical_div:10,stiffness_nuclei_apical:2,stiffness_nuclei_basal:2,stiffness_repulsion:1,stiffness_straightness:15,lifespan_start:10,lifespan_end:21,INM:1,hetero:!1,events:{time_A_start:1/0,time_A_end:1/0,time_B_start:1/0,time_B_end:1/0,time_S_start:1/0,time_S_end:1/0,time_P_start:1/0,time_P_end:1/0},diffusion:.1,basal_damping_ratio:1,max_basal_junction_dist:.6,cytos_init:1.5,basal_membrane_repulsion:0,apical_junction_init:.333333333333333},emt:{N_init:0,location:"bottom",R_hard:.3,R_hard_div:.7,R_soft:1,color:{r:255,g:0,b:255},dur_G2:.5,dur_mitosis:.5,k_apical_junction:1,k_cytos:5,max_cytoskeleton_length:0,run:0,running_speed:1,running_mode:0,stiffness_apical_apical:5,stiffness_apical_apical_div:10,stiffness_nuclei_apical:2,stiffness_nuclei_basal:2,stiffness_repulsion:1,stiffness_straightness:15,lifespan_start:10,lifespan_end:21,INM:1,hetero:!1,events:{time_A_start:1/0,time_A_end:1/0,time_B_start:1/0,time_B_end:1/0,time_S_start:1/0,time_S_end:1/0,time_P_start:1/0,time_P_end:1/0},diffusion:.1,basal_damping_ratio:1,max_basal_junction_dist:.6,cytos_init:1.5,basal_membrane_repulsion:0,apical_junction_init:.333333333333333}}})},{key:"chick_embryo_single_emt",label:"Chick Embryo Single EMT",create:()=>({metadata:{model:"EHT",version:"1.0.0"},general:{t_end:54,dt:.1,random_seed:0,full_circle:!1,w_init:10,h_init:8,mu:.2,n_substeps:40,alg_dt:.05,w_screen:15,h_screen:0,p_div_out:.8,perimeter:20,aspect_ratio:0,hard_sphere_nuclei:!1},cell_prop:{},cell_types:{control:{N_init:50,location:"",R_hard:.3,R_hard_div:.7,R_soft:1,color:{r:0,g:128,b:0},dur_G2:.5,dur_mitosis:.5,k_apical_junction:1,k_cytos:5,max_cytoskeleton_length:0,run:0,running_speed:1,running_mode:0,stiffness_apical_apical:5,stiffness_apical_apical_div:10,stiffness_nuclei_apical:2,stiffness_nuclei_basal:2,stiffness_repulsion:1,stiffness_straightness:15,lifespan_start:10,lifespan_end:21,INM:0,hetero:!1,events:{time_A_start:1/0,time_A_end:1/0,time_B_start:1/0,time_B_end:1/0,time_S_start:1/0,time_S_end:1/0,time_P_start:1/0,time_P_end:1/0},diffusion:.1,basal_damping_ratio:1,max_basal_junction_dist:.333333333333333,cytos_init:1.5,basal_membrane_repulsion:0,apical_junction_init:.333333333333333},emt:{N_init:1,location:"bottom",R_hard:.3,R_hard_div:.7,R_soft:1,color:{r:255,g:0,b:255},dur_G2:.5,dur_mitosis:.5,k_apical_junction:1,k_cytos:5,max_cytoskeleton_length:0,run:0,running_speed:1,running_mode:0,stiffness_apical_apical:5,stiffness_apical_apical_div:10,stiffness_nuclei_apical:2,stiffness_nuclei_basal:2,stiffness_repulsion:1,stiffness_straightness:15,lifespan_start:10,lifespan_end:21,INM:0,hetero:!1,events:{time_A_start:1/0,time_A_end:1/0,time_B_start:1/0,time_B_end:1/0,time_S_start:1/0,time_S_end:1/0,time_P_start:1/0,time_P_end:1/0},diffusion:.1,basal_damping_ratio:1,max_basal_junction_dist:.333333333333333,cytos_init:1.5,basal_membrane_repulsion:0,apical_junction_init:.333333333333333}}})},{key:"cuboidal",label:"Cuboidal",create:()=>({metadata:{model:"EHT",version:"1.0.0"},general:{t_end:80,dt:.05,random_seed:0,full_circle:!1,w_init:20,h_init:2,mu:.1,n_substeps:40,alg_dt:.01,w_screen:30,h_screen:0,p_div_out:.9,perimeter:40,aspect_ratio:0,hard_sphere_nuclei:!1},cell_prop:{},cell_types:{control:{N_init:29,location:"",R_hard:.3,R_hard_div:.7,R_soft:1,color:{r:0,g:128,b:0},dur_G2:.5,dur_mitosis:.5,k_apical_junction:5,k_cytos:5,max_cytoskeleton_length:0,run:0,running_speed:1,running_mode:0,stiffness_apical_apical:5,stiffness_apical_apical_div:10,stiffness_nuclei_apical:2,stiffness_nuclei_basal:2,stiffness_repulsion:4,stiffness_straightness:15,lifespan_start:10,lifespan_end:21,INM:0,hetero:!1,events:{time_A_start:1/0,time_A_end:1/0,time_B_start:1/0,time_B_end:1/0,time_S_start:1/0,time_S_end:1/0,time_P_start:1/0,time_P_end:1/0},diffusion:.1,basal_damping_ratio:1,max_basal_junction_dist:2,cytos_init:1.5,basal_membrane_repulsion:.1,apical_junction_init:.333333333333333},emt:{N_init:1,location:"bottom",R_hard:.3,R_hard_div:.7,R_soft:1,color:{r:255,g:0,b:255},dur_G2:.5,dur_mitosis:.5,k_apical_junction:5,k_cytos:5,max_cytoskeleton_length:0,run:0,running_speed:1,running_mode:0,stiffness_apical_apical:5,stiffness_apical_apical_div:10,stiffness_nuclei_apical:2,stiffness_nuclei_basal:2,stiffness_repulsion:4,stiffness_straightness:15,lifespan_start:10,lifespan_end:21,INM:0,hetero:!1,events:{time_A_start:1/0,time_A_end:1/0,time_B_start:1/0,time_B_end:1/0,time_S_start:1/0,time_S_end:1/0,time_P_start:1/0,time_P_end:1/0},diffusion:.1,basal_damping_ratio:1,max_basal_junction_dist:2,cytos_init:1.5,basal_membrane_repulsion:.1,apical_junction_init:.333333333333333}}})},{key:"pseudo_stratified",label:"Pseudo Stratified",create:()=>({metadata:{model:"EHT",version:"1.0.0"},general:{t_end:80,dt:.05,random_seed:0,full_circle:!1,w_init:20,h_init:2,mu:.5,n_substeps:40,alg_dt:.01,w_screen:30,h_screen:0,p_div_out:.9,perimeter:40,aspect_ratio:0,hard_sphere_nuclei:!1},cell_prop:{},cell_types:{control:{N_init:29,location:"",R_hard:.3,R_hard_div:.7,R_soft:1,color:{r:0,g:128,b:0},dur_G2:.5,dur_mitosis:.5,k_apical_junction:.01,k_cytos:5,max_cytoskeleton_length:0,run:0,running_speed:1,running_mode:0,stiffness_apical_apical:8,stiffness_apical_apical_div:16,stiffness_nuclei_apical:2,stiffness_nuclei_basal:2,stiffness_repulsion:4,stiffness_straightness:15,lifespan_start:10,lifespan_end:21,INM:0,hetero:!1,events:{time_A_start:1/0,time_A_end:1/0,time_B_start:1/0,time_B_end:1/0,time_S_start:1/0,time_S_end:1/0,time_P_start:1/0,time_P_end:1/0},diffusion:.1,basal_damping_ratio:1,max_basal_junction_dist:.6,cytos_init:1.5,basal_membrane_repulsion:.1,apical_junction_init:.333333333333333},emt:{N_init:1,location:"bottom",R_hard:.3,R_hard_div:.7,R_soft:1,color:{r:255,g:0,b:255},dur_G2:.5,dur_mitosis:.5,k_apical_junction:.01,k_cytos:5,max_cytoskeleton_length:0,run:0,running_speed:1,running_mode:0,stiffness_apical_apical:8,stiffness_apical_apical_div:16,stiffness_nuclei_apical:2,stiffness_nuclei_basal:2,stiffness_repulsion:4,stiffness_straightness:15,lifespan_start:10,lifespan_end:21,INM:0,hetero:!1,events:{time_A_start:1/0,time_A_end:1/0,time_B_start:1/0,time_B_end:1/0,time_S_start:1/0,time_S_end:1/0,time_P_start:1/0,time_P_end:1/0},diffusion:.1,basal_damping_ratio:1,max_basal_junction_dist:.6,cytos_init:1.5,basal_membrane_repulsion:.1,apical_junction_init:.333333333333333}}})}];function projectOntoSegment(_,T,R){const P=R.sub(T),O=_.sub(T),I=P.magSq();if(I<1e-10)return T;const L=Math.max(0,Math.min(1,O.dot(P)/I));return T.add(P.scale(L))}function projectOntoApicalStrip(_,T){const R=T.cells;if(R.length===0)return _;if(R.length===1)return Vector2.from(R[0].A);let P=Vector2.from(R[0].A),O=_.distSq(P);for(let I=0;I<R.length-1;I++){const L=Vector2.from(R[I].A),U=Vector2.from(R[I+1].A),G=projectOntoSegment(_,L,U),V=_.distSq(G);V<O&&(O=V,P=G)}if(R.length>2){const I=Vector2.from(R[R.length-1].A),L=Vector2.from(R[0].A),U=projectOntoSegment(_,I,L);_.distSq(U)<O&&(P=U)}return P}function projectOntoBasalCurve(_,T){return T.basalGeometry.projectPoint(_)}function computeCellMetrics(_,T){const R=_.cells,P=[],I=10*Math.min(...Object.values(T.cell_types).map(L=>L.R_soft));for(const L of R){const U=Vector2.from(L.pos),G=Vector2.from(L.A),V=Vector2.from(L.B),Z=projectOntoApicalStrip(U,_),Y=projectOntoBasalCurve(U,_),W=G.dist(U),J=V.dist(U),ee=U.dist(Z),te=U.dist(Y),ie=Z.sub(Y),oe=ie.magSq();let ae=.5;oe>1e-10&&(ae=U.sub(Y).dot(ie)/oe);const ce=ae<0,le=ae>1;P.push({cell:L,X:U,A:G,B:V,a:Z,b:Y,AX:W,BX:J,ax:ee,bx:te,x:ae,below_basal:ce,above_apical:le,below_neighbours:!1})}for(let L=0;L<P.length;L++){const U=P[L];let G=!0;for(let V=0;V<P.length;V++){if(L===V)continue;const Z=P[V];if(U.X.dist(Z.X)<=I&&Z.bx<=U.bx){G=!1;break}}U.below_neighbours=G&&P.length>1}return P}function generateCellGroups(_){const T=Object.keys(_.cell_types),R=[];R.push("all");for(const P of T)R.push(P);for(let P=0;P<T.length;P++)for(let O=P+1;O<T.length;O++)R.push(`${T[P]}+${T[O]}`);return R}function filterByGroup(_,T){if(T==="all")return _;if(T.includes("+")){const R=T.split("+");return _.filter(P=>R.includes(P.cell.typeIndex))}return _.filter(R=>R.cell.typeIndex===T)}function aggregateMetrics(_){if(_.length===0)return{ab_distance:0,AX:0,BX:0,ax:0,bx:0,x:0,below_basal:0,above_apical:0,below_neighbours:0};const T=P=>P.reduce((O,I)=>O+I,0)/P.length,R=P=>P.filter(O=>O).length/P.length;return{ab_distance:T(_.map(P=>P.A.dist(P.B))),AX:T(_.map(P=>P.AX)),BX:T(_.map(P=>P.BX)),ax:T(_.map(P=>P.ax)),bx:T(_.map(P=>P.bx)),x:T(_.map(P=>P.x)),below_basal:R(_.map(P=>P.below_basal)),above_apical:R(_.map(P=>P.above_apical)),below_neighbours:R(_.map(P=>P.below_neighbours))}}function computeEHTStatistics(_,T){const R={};if(!T){const P=_.cells.length>0?_.cells.reduce((O,I)=>O+Vector2.from(I.A).dist(Vector2.from(I.B)),0)/_.cells.length:0;return R.ab_distance_all=P,R}try{const P=computeCellMetrics(_,T),O=generateCellGroups(T);for(const I of O){const L=filterByGroup(P,I),U=aggregateMetrics(L);for(const[G,V]of Object.entries(U))R[`${G}_${I}`]=V}}catch(P){console.error("Failed to compute EHT statistics",P)}return R}function generateEHTStatistics(_){const T=[],R=generateCellGroups(_),P=[{id:"ab_distance",label:"AB Distance",description:"Apical-basal distance"},{id:"AX",label:"AX Distance",description:"Distance from A to X"},{id:"BX",label:"BX Distance",description:"Distance from B to X"},{id:"ax",label:"ax Distance",description:"Distance from X to apical projection"},{id:"bx",label:"bx Distance",description:"Distance from X to basal projection"},{id:"x",label:"x Position",description:"Position on basal-apical scale (0-1)"},{id:"below_basal",label:"Below Basal",description:"Fraction of cells below basal layer"},{id:"above_apical",label:"Above Apical",description:"Fraction of cells above apical layer"},{id:"below_neighbours",label:"Below Neighbours",description:"Fraction of cells below all neighbours"}];for(const O of R)for(const I of P)T.push({id:`${I.id}_${O}`,label:`${I.label} (${O})`,description:`${I.description} for ${O} cells`,compute:L=>computeEHTStatistics(L,_)[`${I.id}_${O}`]||0});return T}generateEHTStatistics({metadata:{},general:{},cell_prop:{},cell_types:{control:{}}});function generateEHTBatchParameters(_){const T=[];T.push({path:"general.t_end",label:"t_end (End time)"},{path:"general.dt",label:"dt (Time step)"},{path:"general.random_seed",label:"Random seed",isInteger:!0},{path:"general.w_init",label:"w_init (Initial width)"},{path:"general.h_init",label:"h_init (Initial height)"},{path:"general.mu",label:"mu (Friction)"},{path:"general.n_substeps",label:"n_substeps",isInteger:!0},{path:"general.alg_dt",label:"alg_dt (Algorithm dt)"},{path:"general.p_div_out",label:"p_div_out (Division probability)"},{path:"general.perimeter",label:"Perimeter"},{path:"general.aspect_ratio",label:"Aspect ratio"});for(const[R,P]of Object.entries(_.cell_types)){const O=`cell_types.${R}`,I=R;T.push({path:`${O}.N_init`,label:`${I}: N_init`,isInteger:!0},{path:`${O}.location`,label:`${I}: location`},{path:`${O}.R_hard`,label:`${I}: R_hard`},{path:`${O}.R_hard_div`,label:`${I}: R_hard_div`},{path:`${O}.R_soft`,label:`${I}: R_soft`},{path:`${O}.dur_G2`,label:`${I}: dur_G2`},{path:`${O}.dur_mitosis`,label:`${I}: dur_mitosis`},{path:`${O}.k_apical_junction`,label:`${I}: k_apical_junction`},{path:`${O}.k_cytos`,label:`${I}: k_cytos`},{path:`${O}.max_cytoskeleton_length`,label:`${I}: max_cytos_length`},{path:`${O}.run`,label:`${I}: run probability`},{path:`${O}.running_speed`,label:`${I}: running_speed`},{path:`${O}.running_mode`,label:`${I}: running_mode`,isInteger:!0},{path:`${O}.stiffness_apical_apical`,label:`${I}: stiff_apical_apical`},{path:`${O}.stiffness_apical_apical_div`,label:`${I}: stiff_apical_apical_div`},{path:`${O}.stiffness_nuclei_apical`,label:`${I}: stiff_nuclei_apical`},{path:`${O}.stiffness_nuclei_basal`,label:`${I}: stiff_nuclei_basal`},{path:`${O}.stiffness_repulsion`,label:`${I}: stiff_repulsion`},{path:`${O}.stiffness_straightness`,label:`${I}: stiff_straightness`},{path:`${O}.lifespan_start`,label:`${I}: lifespan start`},{path:`${O}.lifespan_end`,label:`${I}: lifespan end`},{path:`${O}.INM`,label:`${I}: INM probability`},{path:`${O}.diffusion`,label:`${I}: diffusion`},{path:`${O}.basal_damping_ratio`,label:`${I}: basal_damping_ratio`},{path:`${O}.max_basal_junction_dist`,label:`${I}: max_basal_junction_dist`},{path:`${O}.cytos_init`,label:`${I}: cytos_init`},{path:`${O}.basal_membrane_repulsion`,label:`${I}: basal_membrane_repulsion`},{path:`${O}.apical_junction_init`,label:`${I}: apical_junction_init`},{path:`${O}.events.time_A_start`,label:`${I}: time_A start`},{path:`${O}.events.time_A_end`,label:`${I}: time_A end`},{path:`${O}.events.time_B_start`,label:`${I}: time_B start`},{path:`${O}.events.time_B_end`,label:`${I}: time_B end`},{path:`${O}.events.time_S_start`,label:`${I}: time_S start`},{path:`${O}.events.time_S_end`,label:`${I}: time_S end`},{path:`${O}.events.time_P_start`,label:`${I}: time_P start`},{path:`${O}.events.time_P_end`,label:`${I}: time_P end`})}return T}const EHT_BATCH_PARAMETERS=[{path:"general.perimeter",label:"Perimeter"},{path:"general.aspect_ratio",label:"Aspect ratio"},{path:"general.random_seed",label:"Random seed",isInteger:!0},{path:"general.t_end",label:"t_end (End time)"},{path:"cell_types.control.diffusion",label:"control: diffusion"},{path:"cell_types.control.max_basal_junction_dist",label:"control: max_basal_junction_dist"},{path:"cell_types.control.apical_junction_init",label:"control: apical_junction_init"}];function r$1(_){var T,R,P="";if(typeof _=="string"||typeof _=="number")P+=_;else if(typeof _=="object")if(Array.isArray(_)){var O=_.length;for(T=0;T<O;T++)_[T]&&(R=r$1(_[T]))&&(P&&(P+=" "),P+=R)}else for(R in _)_[R]&&(P&&(P+=" "),P+=R);return P}function clsx(){for(var _,T,R=0,P="",O=arguments.length;R<O;R++)(_=arguments[R])&&(T=r$1(_))&&(P&&(P+=" "),P+=T);return P}const concatArrays=(_,T)=>{const R=new Array(_.length+T.length);for(let P=0;P<_.length;P++)R[P]=_[P];for(let P=0;P<T.length;P++)R[_.length+P]=T[P];return R},createClassValidatorObject=(_,T)=>({classGroupId:_,validator:T}),createClassPartObject=(_=new Map,T=null,R)=>({nextPart:_,validators:T,classGroupId:R}),CLASS_PART_SEPARATOR="-",EMPTY_CONFLICTS=[],ARBITRARY_PROPERTY_PREFIX="arbitrary..",createClassGroupUtils=_=>{const T=createClassMap(_),{conflictingClassGroups:R,conflictingClassGroupModifiers:P}=_;return{getClassGroupId:L=>{if(L.startsWith("[")&&L.endsWith("]"))return getGroupIdForArbitraryProperty(L);const U=L.split(CLASS_PART_SEPARATOR),G=U[0]===""&&U.length>1?1:0;return getGroupRecursive(U,G,T)},getConflictingClassGroupIds:(L,U)=>{if(U){const G=P[L],V=R[L];return G?V?concatArrays(V,G):G:V||EMPTY_CONFLICTS}return R[L]||EMPTY_CONFLICTS}}},getGroupRecursive=(_,T,R)=>{if(_.length-T===0)return R.classGroupId;const O=_[T],I=R.nextPart.get(O);if(I){const V=getGroupRecursive(_,T+1,I);if(V)return V}const L=R.validators;if(L===null)return;const U=T===0?_.join(CLASS_PART_SEPARATOR):_.slice(T).join(CLASS_PART_SEPARATOR),G=L.length;for(let V=0;V<G;V++){const Z=L[V];if(Z.validator(U))return Z.classGroupId}},getGroupIdForArbitraryProperty=_=>_.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const T=_.slice(1,-1),R=T.indexOf(":"),P=T.slice(0,R);return P?ARBITRARY_PROPERTY_PREFIX+P:void 0})(),createClassMap=_=>{const{theme:T,classGroups:R}=_;return processClassGroups(R,T)},processClassGroups=(_,T)=>{const R=createClassPartObject();for(const P in _){const O=_[P];processClassesRecursively(O,R,P,T)}return R},processClassesRecursively=(_,T,R,P)=>{const O=_.length;for(let I=0;I<O;I++){const L=_[I];processClassDefinition(L,T,R,P)}},processClassDefinition=(_,T,R,P)=>{if(typeof _=="string"){processStringDefinition(_,T,R);return}if(typeof _=="function"){processFunctionDefinition(_,T,R,P);return}processObjectDefinition(_,T,R,P)},processStringDefinition=(_,T,R)=>{const P=_===""?T:getPart(T,_);P.classGroupId=R},processFunctionDefinition=(_,T,R,P)=>{if(isThemeGetter(_)){processClassesRecursively(_(P),T,R,P);return}T.validators===null&&(T.validators=[]),T.validators.push(createClassValidatorObject(R,_))},processObjectDefinition=(_,T,R,P)=>{const O=Object.entries(_),I=O.length;for(let L=0;L<I;L++){const[U,G]=O[L];processClassesRecursively(G,getPart(T,U),R,P)}},getPart=(_,T)=>{let R=_;const P=T.split(CLASS_PART_SEPARATOR),O=P.length;for(let I=0;I<O;I++){const L=P[I];let U=R.nextPart.get(L);U||(U=createClassPartObject(),R.nextPart.set(L,U)),R=U}return R},isThemeGetter=_=>"isThemeGetter"in _&&_.isThemeGetter===!0,createLruCache=_=>{if(_<1)return{get:()=>{},set:()=>{}};let T=0,R=Object.create(null),P=Object.create(null);const O=(I,L)=>{R[I]=L,T++,T>_&&(T=0,P=R,R=Object.create(null))};return{get(I){let L=R[I];if(L!==void 0)return L;if((L=P[I])!==void 0)return O(I,L),L},set(I,L){I in R?R[I]=L:O(I,L)}}},IMPORTANT_MODIFIER="!",MODIFIER_SEPARATOR=":",EMPTY_MODIFIERS=[],createResultObject=(_,T,R,P,O)=>({modifiers:_,hasImportantModifier:T,baseClassName:R,maybePostfixModifierPosition:P,isExternal:O}),createParseClassName=_=>{const{prefix:T,experimentalParseClassName:R}=_;let P=O=>{const I=[];let L=0,U=0,G=0,V;const Z=O.length;for(let te=0;te<Z;te++){const ie=O[te];if(L===0&&U===0){if(ie===MODIFIER_SEPARATOR){I.push(O.slice(G,te)),G=te+1;continue}if(ie==="/"){V=te;continue}}ie==="["?L++:ie==="]"?L--:ie==="("?U++:ie===")"&&U--}const Y=I.length===0?O:O.slice(G);let W=Y,J=!1;Y.endsWith(IMPORTANT_MODIFIER)?(W=Y.slice(0,-1),J=!0):Y.startsWith(IMPORTANT_MODIFIER)&&(W=Y.slice(1),J=!0);const ee=V&&V>G?V-G:void 0;return createResultObject(I,J,W,ee)};if(T){const O=T+MODIFIER_SEPARATOR,I=P;P=L=>L.startsWith(O)?I(L.slice(O.length)):createResultObject(EMPTY_MODIFIERS,!1,L,void 0,!0)}if(R){const O=P;P=I=>R({className:I,parseClassName:O})}return P},createSortModifiers=_=>{const T=new Map;return _.orderSensitiveModifiers.forEach((R,P)=>{T.set(R,1e6+P)}),R=>{const P=[];let O=[];for(let I=0;I<R.length;I++){const L=R[I],U=L[0]==="[",G=T.has(L);U||G?(O.length>0&&(O.sort(),P.push(...O),O=[]),P.push(L)):O.push(L)}return O.length>0&&(O.sort(),P.push(...O)),P}},createConfigUtils=_=>({cache:createLruCache(_.cacheSize),parseClassName:createParseClassName(_),sortModifiers:createSortModifiers(_),...createClassGroupUtils(_)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(_,T)=>{const{parseClassName:R,getClassGroupId:P,getConflictingClassGroupIds:O,sortModifiers:I}=T,L=[],U=_.trim().split(SPLIT_CLASSES_REGEX);let G="";for(let V=U.length-1;V>=0;V-=1){const Z=U[V],{isExternal:Y,modifiers:W,hasImportantModifier:J,baseClassName:ee,maybePostfixModifierPosition:te}=R(Z);if(Y){G=Z+(G.length>0?" "+G:G);continue}let ie=!!te,oe=P(ie?ee.substring(0,te):ee);if(!oe){if(!ie){G=Z+(G.length>0?" "+G:G);continue}if(oe=P(ee),!oe){G=Z+(G.length>0?" "+G:G);continue}ie=!1}const ae=W.length===0?"":W.length===1?W[0]:I(W).join(":"),ce=J?ae+IMPORTANT_MODIFIER:ae,le=ce+oe;if(L.indexOf(le)>-1)continue;L.push(le);const he=O(oe,ie);for(let me=0;me<he.length;++me){const fe=he[me];L.push(ce+fe)}G=Z+(G.length>0?" "+G:G)}return G},twJoin=(..._)=>{let T=0,R,P,O="";for(;T<_.length;)(R=_[T++])&&(P=toValue(R))&&(O&&(O+=" "),O+=P);return O},toValue=_=>{if(typeof _=="string")return _;let T,R="";for(let P=0;P<_.length;P++)_[P]&&(T=toValue(_[P]))&&(R&&(R+=" "),R+=T);return R},createTailwindMerge=(_,...T)=>{let R,P,O,I;const L=G=>{const V=T.reduce((Z,Y)=>Y(Z),_());return R=createConfigUtils(V),P=R.cache.get,O=R.cache.set,I=U,U(G)},U=G=>{const V=P(G);if(V)return V;const Z=mergeClassList(G,R);return O(G,Z),Z};return I=L,(...G)=>I(twJoin(...G))},fallbackThemeArr=[],fromTheme=_=>{const T=R=>R[_]||fallbackThemeArr;return T.isThemeGetter=!0,T},arbitraryValueRegex=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,arbitraryVariableRegex=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fractionRegex=/^\d+\/\d+$/,tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isFraction=_=>fractionRegex.test(_),isNumber$1=_=>!!_&&!Number.isNaN(Number(_)),isInteger=_=>!!_&&Number.isInteger(Number(_)),isPercent=_=>_.endsWith("%")&&isNumber$1(_.slice(0,-1)),isTshirtSize=_=>tshirtUnitRegex.test(_),isAny=()=>!0,isLengthOnly=_=>lengthUnitRegex.test(_)&&!colorFunctionRegex.test(_),isNever=()=>!1,isShadow=_=>shadowRegex.test(_),isImage=_=>imageRegex.test(_),isAnyNonArbitrary=_=>!isArbitraryValue(_)&&!isArbitraryVariable(_),isArbitrarySize=_=>getIsArbitraryValue(_,isLabelSize,isNever),isArbitraryValue=_=>arbitraryValueRegex.test(_),isArbitraryLength=_=>getIsArbitraryValue(_,isLabelLength,isLengthOnly),isArbitraryNumber=_=>getIsArbitraryValue(_,isLabelNumber,isNumber$1),isArbitraryPosition=_=>getIsArbitraryValue(_,isLabelPosition,isNever),isArbitraryImage=_=>getIsArbitraryValue(_,isLabelImage,isImage),isArbitraryShadow=_=>getIsArbitraryValue(_,isLabelShadow,isShadow),isArbitraryVariable=_=>arbitraryVariableRegex.test(_),isArbitraryVariableLength=_=>getIsArbitraryVariable(_,isLabelLength),isArbitraryVariableFamilyName=_=>getIsArbitraryVariable(_,isLabelFamilyName),isArbitraryVariablePosition=_=>getIsArbitraryVariable(_,isLabelPosition),isArbitraryVariableSize=_=>getIsArbitraryVariable(_,isLabelSize),isArbitraryVariableImage=_=>getIsArbitraryVariable(_,isLabelImage),isArbitraryVariableShadow=_=>getIsArbitraryVariable(_,isLabelShadow,!0),getIsArbitraryValue=(_,T,R)=>{const P=arbitraryValueRegex.exec(_);return P?P[1]?T(P[1]):R(P[2]):!1},getIsArbitraryVariable=(_,T,R=!1)=>{const P=arbitraryVariableRegex.exec(_);return P?P[1]?T(P[1]):R:!1},isLabelPosition=_=>_==="position"||_==="percentage",isLabelImage=_=>_==="image"||_==="url",isLabelSize=_=>_==="length"||_==="size"||_==="bg-size",isLabelLength=_=>_==="length",isLabelNumber=_=>_==="number",isLabelFamilyName=_=>_==="family-name",isLabelShadow=_=>_==="shadow",getDefaultConfig=()=>{const _=fromTheme("color"),T=fromTheme("font"),R=fromTheme("text"),P=fromTheme("font-weight"),O=fromTheme("tracking"),I=fromTheme("leading"),L=fromTheme("breakpoint"),U=fromTheme("container"),G=fromTheme("spacing"),V=fromTheme("radius"),Z=fromTheme("shadow"),Y=fromTheme("inset-shadow"),W=fromTheme("text-shadow"),J=fromTheme("drop-shadow"),ee=fromTheme("blur"),te=fromTheme("perspective"),ie=fromTheme("aspect"),oe=fromTheme("ease"),ae=fromTheme("animate"),ce=()=>["auto","avoid","all","avoid-page","page","left","right","column"],le=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],he=()=>[...le(),isArbitraryVariable,isArbitraryValue],me=()=>["auto","hidden","clip","visible","scroll"],fe=()=>["auto","contain","none"],ue=()=>[isArbitraryVariable,isArbitraryValue,G],pe=()=>[isFraction,"full","auto",...ue()],ge=()=>[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue],_e=()=>["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue],we=()=>[isInteger,"auto",isArbitraryVariable,isArbitraryValue],be=()=>["auto","min","max","fr",isArbitraryVariable,isArbitraryValue],Ce=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Ee=()=>["start","end","center","stretch","center-safe","end-safe"],ye=()=>["auto",...ue()],Se=()=>[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...ue()],Te=()=>[_,isArbitraryVariable,isArbitraryValue],Ae=()=>[...le(),isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}],Be=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ve=()=>["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}],Re=()=>[isPercent,isArbitraryVariableLength,isArbitraryLength],Me=()=>["","none","full",V,isArbitraryVariable,isArbitraryValue],ze=()=>["",isNumber$1,isArbitraryVariableLength,isArbitraryLength],qe=()=>["solid","dashed","dotted","double"],We=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Oe=()=>[isNumber$1,isPercent,isArbitraryVariablePosition,isArbitraryPosition],Ve=()=>["","none",ee,isArbitraryVariable,isArbitraryValue],ke=()=>["none",isNumber$1,isArbitraryVariable,isArbitraryValue],Fe=()=>["none",isNumber$1,isArbitraryVariable,isArbitraryValue],He=()=>[isNumber$1,isArbitraryVariable,isArbitraryValue],Pe=()=>[isFraction,"full",...ue()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber$1],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,ie]}],container:["container"],columns:[{columns:[isNumber$1,isArbitraryValue,isArbitraryVariable,U]}],"break-after":[{"break-after":ce()}],"break-before":[{"break-before":ce()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:he()}],overflow:[{overflow:me()}],"overflow-x":[{"overflow-x":me()}],"overflow-y":[{"overflow-y":me()}],overscroll:[{overscroll:fe()}],"overscroll-x":[{"overscroll-x":fe()}],"overscroll-y":[{"overscroll-y":fe()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:pe()}],"inset-x":[{"inset-x":pe()}],"inset-y":[{"inset-y":pe()}],start:[{start:pe()}],end:[{end:pe()}],top:[{top:pe()}],right:[{right:pe()}],bottom:[{bottom:pe()}],left:[{left:pe()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",U,...ue()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber$1,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":ge()}],"col-start-end":[{col:_e()}],"col-start":[{"col-start":we()}],"col-end":[{"col-end":we()}],"grid-rows":[{"grid-rows":ge()}],"row-start-end":[{row:_e()}],"row-start":[{"row-start":we()}],"row-end":[{"row-end":we()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":be()}],"auto-rows":[{"auto-rows":be()}],gap:[{gap:ue()}],"gap-x":[{"gap-x":ue()}],"gap-y":[{"gap-y":ue()}],"justify-content":[{justify:[...Ce(),"normal"]}],"justify-items":[{"justify-items":[...Ee(),"normal"]}],"justify-self":[{"justify-self":["auto",...Ee()]}],"align-content":[{content:["normal",...Ce()]}],"align-items":[{items:[...Ee(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Ee(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ce()}],"place-items":[{"place-items":[...Ee(),"baseline"]}],"place-self":[{"place-self":["auto",...Ee()]}],p:[{p:ue()}],px:[{px:ue()}],py:[{py:ue()}],ps:[{ps:ue()}],pe:[{pe:ue()}],pt:[{pt:ue()}],pr:[{pr:ue()}],pb:[{pb:ue()}],pl:[{pl:ue()}],m:[{m:ye()}],mx:[{mx:ye()}],my:[{my:ye()}],ms:[{ms:ye()}],me:[{me:ye()}],mt:[{mt:ye()}],mr:[{mr:ye()}],mb:[{mb:ye()}],ml:[{ml:ye()}],"space-x":[{"space-x":ue()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":ue()}],"space-y-reverse":["space-y-reverse"],size:[{size:Se()}],w:[{w:[U,"screen",...Se()]}],"min-w":[{"min-w":[U,"screen","none",...Se()]}],"max-w":[{"max-w":[U,"screen","none","prose",{screen:[L]},...Se()]}],h:[{h:["screen","lh",...Se()]}],"min-h":[{"min-h":["screen","lh","none",...Se()]}],"max-h":[{"max-h":["screen","lh",...Se()]}],"font-size":[{text:["base",R,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[P,isArbitraryVariable,isArbitraryNumber]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryValue,T]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[O,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber$1,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[I,...ue()]}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Te()}],"text-color":[{text:Te()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...qe(),"wavy"]}],"text-decoration-thickness":[{decoration:[isNumber$1,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:Te()}],"underline-offset":[{"underline-offset":[isNumber$1,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ue()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ae()}],"bg-repeat":[{bg:Be()}],"bg-size":[{bg:ve()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:Te()}],"gradient-from-pos":[{from:Re()}],"gradient-via-pos":[{via:Re()}],"gradient-to-pos":[{to:Re()}],"gradient-from":[{from:Te()}],"gradient-via":[{via:Te()}],"gradient-to":[{to:Te()}],rounded:[{rounded:Me()}],"rounded-s":[{"rounded-s":Me()}],"rounded-e":[{"rounded-e":Me()}],"rounded-t":[{"rounded-t":Me()}],"rounded-r":[{"rounded-r":Me()}],"rounded-b":[{"rounded-b":Me()}],"rounded-l":[{"rounded-l":Me()}],"rounded-ss":[{"rounded-ss":Me()}],"rounded-se":[{"rounded-se":Me()}],"rounded-ee":[{"rounded-ee":Me()}],"rounded-es":[{"rounded-es":Me()}],"rounded-tl":[{"rounded-tl":Me()}],"rounded-tr":[{"rounded-tr":Me()}],"rounded-br":[{"rounded-br":Me()}],"rounded-bl":[{"rounded-bl":Me()}],"border-w":[{border:ze()}],"border-w-x":[{"border-x":ze()}],"border-w-y":[{"border-y":ze()}],"border-w-s":[{"border-s":ze()}],"border-w-e":[{"border-e":ze()}],"border-w-t":[{"border-t":ze()}],"border-w-r":[{"border-r":ze()}],"border-w-b":[{"border-b":ze()}],"border-w-l":[{"border-l":ze()}],"divide-x":[{"divide-x":ze()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ze()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...qe(),"hidden","none"]}],"divide-style":[{divide:[...qe(),"hidden","none"]}],"border-color":[{border:Te()}],"border-color-x":[{"border-x":Te()}],"border-color-y":[{"border-y":Te()}],"border-color-s":[{"border-s":Te()}],"border-color-e":[{"border-e":Te()}],"border-color-t":[{"border-t":Te()}],"border-color-r":[{"border-r":Te()}],"border-color-b":[{"border-b":Te()}],"border-color-l":[{"border-l":Te()}],"divide-color":[{divide:Te()}],"outline-style":[{outline:[...qe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber$1,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:Te()}],shadow:[{shadow:["","none",Z,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:Te()}],"inset-shadow":[{"inset-shadow":["none",Y,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":Te()}],"ring-w":[{ring:ze()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Te()}],"ring-offset-w":[{"ring-offset":[isNumber$1,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":Te()}],"inset-ring-w":[{"inset-ring":ze()}],"inset-ring-color":[{"inset-ring":Te()}],"text-shadow":[{"text-shadow":["none",W,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":Te()}],opacity:[{opacity:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[...We(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":We()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber$1]}],"mask-image-linear-from-pos":[{"mask-linear-from":Oe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Oe()}],"mask-image-linear-from-color":[{"mask-linear-from":Te()}],"mask-image-linear-to-color":[{"mask-linear-to":Te()}],"mask-image-t-from-pos":[{"mask-t-from":Oe()}],"mask-image-t-to-pos":[{"mask-t-to":Oe()}],"mask-image-t-from-color":[{"mask-t-from":Te()}],"mask-image-t-to-color":[{"mask-t-to":Te()}],"mask-image-r-from-pos":[{"mask-r-from":Oe()}],"mask-image-r-to-pos":[{"mask-r-to":Oe()}],"mask-image-r-from-color":[{"mask-r-from":Te()}],"mask-image-r-to-color":[{"mask-r-to":Te()}],"mask-image-b-from-pos":[{"mask-b-from":Oe()}],"mask-image-b-to-pos":[{"mask-b-to":Oe()}],"mask-image-b-from-color":[{"mask-b-from":Te()}],"mask-image-b-to-color":[{"mask-b-to":Te()}],"mask-image-l-from-pos":[{"mask-l-from":Oe()}],"mask-image-l-to-pos":[{"mask-l-to":Oe()}],"mask-image-l-from-color":[{"mask-l-from":Te()}],"mask-image-l-to-color":[{"mask-l-to":Te()}],"mask-image-x-from-pos":[{"mask-x-from":Oe()}],"mask-image-x-to-pos":[{"mask-x-to":Oe()}],"mask-image-x-from-color":[{"mask-x-from":Te()}],"mask-image-x-to-color":[{"mask-x-to":Te()}],"mask-image-y-from-pos":[{"mask-y-from":Oe()}],"mask-image-y-to-pos":[{"mask-y-to":Oe()}],"mask-image-y-from-color":[{"mask-y-from":Te()}],"mask-image-y-to-color":[{"mask-y-to":Te()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":Oe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Oe()}],"mask-image-radial-from-color":[{"mask-radial-from":Te()}],"mask-image-radial-to-color":[{"mask-radial-to":Te()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":le()}],"mask-image-conic-pos":[{"mask-conic":[isNumber$1]}],"mask-image-conic-from-pos":[{"mask-conic-from":Oe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Oe()}],"mask-image-conic-from-color":[{"mask-conic-from":Te()}],"mask-image-conic-to-color":[{"mask-conic-to":Te()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ae()}],"mask-repeat":[{mask:Be()}],"mask-size":[{mask:ve()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:Ve()}],brightness:[{brightness:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",J,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":Te()}],grayscale:[{grayscale:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":Ve()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber$1,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber$1,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":ue()}],"border-spacing-x":[{"border-spacing-x":ue()}],"border-spacing-y":[{"border-spacing-y":ue()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber$1,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",oe,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber$1,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",ae,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[te,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":he()}],rotate:[{rotate:ke()}],"rotate-x":[{"rotate-x":ke()}],"rotate-y":[{"rotate-y":ke()}],"rotate-z":[{"rotate-z":ke()}],scale:[{scale:Fe()}],"scale-x":[{"scale-x":Fe()}],"scale-y":[{"scale-y":Fe()}],"scale-z":[{"scale-z":Fe()}],"scale-3d":["scale-3d"],skew:[{skew:He()}],"skew-x":[{"skew-x":He()}],"skew-y":[{"skew-y":He()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:he()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Pe()}],"translate-x":[{"translate-x":Pe()}],"translate-y":[{"translate-y":Pe()}],"translate-z":[{"translate-z":Pe()}],"translate-none":["translate-none"],accent:[{accent:Te()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Te()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ue()}],"scroll-mx":[{"scroll-mx":ue()}],"scroll-my":[{"scroll-my":ue()}],"scroll-ms":[{"scroll-ms":ue()}],"scroll-me":[{"scroll-me":ue()}],"scroll-mt":[{"scroll-mt":ue()}],"scroll-mr":[{"scroll-mr":ue()}],"scroll-mb":[{"scroll-mb":ue()}],"scroll-ml":[{"scroll-ml":ue()}],"scroll-p":[{"scroll-p":ue()}],"scroll-px":[{"scroll-px":ue()}],"scroll-py":[{"scroll-py":ue()}],"scroll-ps":[{"scroll-ps":ue()}],"scroll-pe":[{"scroll-pe":ue()}],"scroll-pt":[{"scroll-pt":ue()}],"scroll-pr":[{"scroll-pr":ue()}],"scroll-pb":[{"scroll-pb":ue()}],"scroll-pl":[{"scroll-pl":ue()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none",...Te()]}],"stroke-w":[{stroke:[isNumber$1,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none",...Te()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},twMerge=createTailwindMerge(getDefaultConfig);function cn(..._){return twMerge(clsx(_))}const Input=reactExports.forwardRef(({className:_,type:T,...R},P)=>jsxRuntimeExports.jsx("input",{type:T,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",_),ref:P,...R}));Input.displayName="Input";var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);function setRef(_,T){if(typeof _=="function")return _(T);_!=null&&(_.current=T)}function composeRefs(..._){return T=>{let R=!1;const P=_.map(O=>{const I=setRef(O,T);return!R&&typeof I=="function"&&(R=!0),I});if(R)return()=>{for(let O=0;O<P.length;O++){const I=P[O];typeof I=="function"?I():setRef(_[O],null)}}}}function useComposedRefs(..._){return reactExports.useCallback(composeRefs(..._),_)}var REACT_LAZY_TYPE=Symbol.for("react.lazy"),use=React$1[" use ".trim().toString()];function isPromiseLike(_){return typeof _=="object"&&_!==null&&"then"in _}function isLazyComponent(_){return _!=null&&typeof _=="object"&&"$$typeof"in _&&_.$$typeof===REACT_LAZY_TYPE&&"_payload"in _&&isPromiseLike(_._payload)}function createSlot$3(_){const T=createSlotClone$3(_),R=reactExports.forwardRef((P,O)=>{let{children:I,...L}=P;isLazyComponent(I)&&typeof use=="function"&&(I=use(I._payload));const U=reactExports.Children.toArray(I),G=U.find(isSlottable$3);if(G){const V=G.props.children,Z=U.map(Y=>Y===G?reactExports.Children.count(V)>1?reactExports.Children.only(null):reactExports.isValidElement(V)?V.props.children:null:Y);return jsxRuntimeExports.jsx(T,{...L,ref:O,children:reactExports.isValidElement(V)?reactExports.cloneElement(V,void 0,Z):null})}return jsxRuntimeExports.jsx(T,{...L,ref:O,children:I})});return R.displayName=`${_}.Slot`,R}var Slot$1=createSlot$3("Slot");function createSlotClone$3(_){const T=reactExports.forwardRef((R,P)=>{let{children:O,...I}=R;if(isLazyComponent(O)&&typeof use=="function"&&(O=use(O._payload)),reactExports.isValidElement(O)){const L=getElementRef$4(O),U=mergeProps$3(I,O.props);return O.type!==reactExports.Fragment&&(U.ref=P?composeRefs(P,L):L),reactExports.cloneElement(O,U)}return reactExports.Children.count(O)>1?reactExports.Children.only(null):null});return T.displayName=`${_}.SlotClone`,T}var SLOTTABLE_IDENTIFIER$3=Symbol("radix.slottable");function isSlottable$3(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$3}function mergeProps$3(_,T){const R={...T};for(const P in T){const O=_[P],I=T[P];/^on[A-Z]/.test(P)?O&&I?R[P]=(...U)=>{const G=I(...U);return O(...U),G}:O&&(R[P]=O):P==="style"?R[P]={...O,...I}:P==="className"&&(R[P]=[O,I].filter(Boolean).join(" "))}return{..._,...R}}function getElementRef$4(_){let T=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning;return R?_.ref:(T=Object.getOwnPropertyDescriptor(_,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning,R?_.props.ref:_.props.ref||_.ref)}var NODES$3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive$3=NODES$3.reduce((_,T)=>{const R=createSlot$3(`Primitive.${T}`),P=reactExports.forwardRef((O,I)=>{const{asChild:L,...U}=O,G=L?R:T;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(G,{...U,ref:I})});return P.displayName=`Primitive.${T}`,{..._,[T]:P}},{}),NAME$4="Label",Label$2=reactExports.forwardRef((_,T)=>jsxRuntimeExports.jsx(Primitive$3.label,{..._,ref:T,onMouseDown:R=>{R.target.closest("button, input, select, textarea")||(_.onMouseDown?.(R),!R.defaultPrevented&&R.detail>1&&R.preventDefault())}}));Label$2.displayName=NAME$4;var Root$7=Label$2;const falsyToString=_=>typeof _=="boolean"?`${_}`:_===0?"0":_,cx=clsx,cva=(_,T)=>R=>{var P;if(T?.variants==null)return cx(_,R?.class,R?.className);const{variants:O,defaultVariants:I}=T,L=Object.keys(O).map(V=>{const Z=R?.[V],Y=I?.[V];if(Z===null)return null;const W=falsyToString(Z)||falsyToString(Y);return O[V][W]}),U=R&&Object.entries(R).reduce((V,Z)=>{let[Y,W]=Z;return W===void 0||(V[Y]=W),V},{}),G=T==null||(P=T.compoundVariants)===null||P===void 0?void 0:P.reduce((V,Z)=>{let{class:Y,className:W,...J}=Z;return Object.entries(J).every(ee=>{let[te,ie]=ee;return Array.isArray(ie)?ie.includes({...I,...U}[te]):{...I,...U}[te]===ie})?[...V,Y,W]:V},[]);return cx(_,L,G,R?.class,R?.className)},labelVariants=cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label$1=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(Root$7,{ref:R,className:cn(labelVariants(),_),...T}));Label$1.displayName=Root$7.displayName;function NumberInput({label:_,value:T,onChange:R,disabled:P,min:O,max:I,step:L=.1}){const U=G=>{const V=parseFloat(G.target.value);if(!isNaN(V)){let Z=V;O!==void 0&&(Z=Math.max(O,Z)),I!==void 0&&(Z=Math.min(I,Z)),R(Z)}};return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs w-32 shrink-0",children:_}),jsxRuntimeExports.jsx(Input,{type:"number",value:T,onChange:U,disabled:P,min:O,max:I,step:L,className:"h-7 text-xs w-24"})]})}function IntegerInput({label:_,value:T,onChange:R,disabled:P,min:O,max:I}){const L=U=>{const G=parseInt(U.target.value,10);if(!isNaN(G)){let V=G;O!==void 0&&(V=Math.max(O,V)),I!==void 0&&(V=Math.min(I,V)),R(V)}};return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs w-32 shrink-0",children:_}),jsxRuntimeExports.jsx(Input,{type:"number",value:T,onChange:L,disabled:P,min:O,max:I,step:1,className:"h-7 text-xs w-24"})]})}function createContextScope$1(_,T=[]){let R=[];function P(I,L){const U=reactExports.createContext(L),G=R.length;R=[...R,L];const V=Y=>{const{scope:W,children:J,...ee}=Y,te=W?.[_]?.[G]||U,ie=reactExports.useMemo(()=>ee,Object.values(ee));return jsxRuntimeExports.jsx(te.Provider,{value:ie,children:J})};V.displayName=I+"Provider";function Z(Y,W){const J=W?.[_]?.[G]||U,ee=reactExports.useContext(J);if(ee)return ee;if(L!==void 0)return L;throw new Error(`\`${Y}\` must be used within \`${I}\``)}return[V,Z]}const O=()=>{const I=R.map(L=>reactExports.createContext(L));return function(U){const G=U?.[_]||I;return reactExports.useMemo(()=>({[`__scope${_}`]:{...U,[_]:G}}),[U,G])}};return O.scopeName=_,[P,composeContextScopes$1(O,...T)]}function composeContextScopes$1(..._){const T=_[0];if(_.length===1)return T;const R=()=>{const P=_.map(O=>({useScope:O(),scopeName:O.scopeName}));return function(I){const L=P.reduce((U,{useScope:G,scopeName:V})=>{const Y=G(I)[`__scope${V}`];return{...U,...Y}},{});return reactExports.useMemo(()=>({[`__scope${T.scopeName}`]:L}),[L])}};return R.scopeName=T.scopeName,R}function composeEventHandlers(_,T,{checkForDefaultPrevented:R=!0}={}){return function(O){if(_?.(O),R===!1||!O.defaultPrevented)return T?.(O)}}var useLayoutEffect2=globalThis?.document?reactExports.useLayoutEffect:()=>{},useInsertionEffect=React$1[" useInsertionEffect ".trim().toString()]||useLayoutEffect2;function useControllableState({prop:_,defaultProp:T,onChange:R=()=>{},caller:P}){const[O,I,L]=useUncontrolledState({defaultProp:T,onChange:R}),U=_!==void 0,G=U?_:O;{const Z=reactExports.useRef(_!==void 0);reactExports.useEffect(()=>{const Y=Z.current;Y!==U&&console.warn(`${P} is changing from ${Y?"controlled":"uncontrolled"} to ${U?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),Z.current=U},[U,P])}const V=reactExports.useCallback(Z=>{if(U){const Y=isFunction$2(Z)?Z(_):Z;Y!==_&&L.current?.(Y)}else I(Z)},[U,_,I,L]);return[G,V]}function useUncontrolledState({defaultProp:_,onChange:T}){const[R,P]=reactExports.useState(_),O=reactExports.useRef(R),I=reactExports.useRef(T);return useInsertionEffect(()=>{I.current=T},[T]),reactExports.useEffect(()=>{O.current!==R&&(I.current?.(R),O.current=R)},[R,O]),[R,P,I]}function isFunction$2(_){return typeof _=="function"}function usePrevious(_){const T=reactExports.useRef({value:_,previous:_});return reactExports.useMemo(()=>(T.current.value!==_&&(T.current.previous=T.current.value,T.current.value=_),T.current.previous),[_])}function useSize(_){const[T,R]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(_){R({width:_.offsetWidth,height:_.offsetHeight});const P=new ResizeObserver(O=>{if(!Array.isArray(O)||!O.length)return;const I=O[0];let L,U;if("borderBoxSize"in I){const G=I.borderBoxSize,V=Array.isArray(G)?G[0]:G;L=V.inlineSize,U=V.blockSize}else L=_.offsetWidth,U=_.offsetHeight;R({width:L,height:U})});return P.observe(_,{box:"border-box"}),()=>P.unobserve(_)}else R(void 0)},[_]),T}function useStateMachine$1(_,T){return reactExports.useReducer((R,P)=>T[R][P]??R,_)}var Presence=_=>{const{present:T,children:R}=_,P=usePresence(T),O=typeof R=="function"?R({present:P.isPresent}):reactExports.Children.only(R),I=useComposedRefs(P.ref,getElementRef$3(O));return typeof R=="function"||P.isPresent?reactExports.cloneElement(O,{ref:I}):null};Presence.displayName="Presence";function usePresence(_){const[T,R]=reactExports.useState(),P=reactExports.useRef(null),O=reactExports.useRef(_),I=reactExports.useRef("none"),L=_?"mounted":"unmounted",[U,G]=useStateMachine$1(L,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const V=getAnimationName(P.current);I.current=U==="mounted"?V:"none"},[U]),useLayoutEffect2(()=>{const V=P.current,Z=O.current;if(Z!==_){const W=I.current,J=getAnimationName(V);_?G("MOUNT"):J==="none"||V?.display==="none"?G("UNMOUNT"):G(Z&&W!==J?"ANIMATION_OUT":"UNMOUNT"),O.current=_}},[_,G]),useLayoutEffect2(()=>{if(T){let V;const Z=T.ownerDocument.defaultView??window,Y=J=>{const te=getAnimationName(P.current).includes(CSS.escape(J.animationName));if(J.target===T&&te&&(G("ANIMATION_END"),!O.current)){const ie=T.style.animationFillMode;T.style.animationFillMode="forwards",V=Z.setTimeout(()=>{T.style.animationFillMode==="forwards"&&(T.style.animationFillMode=ie)})}},W=J=>{J.target===T&&(I.current=getAnimationName(P.current))};return T.addEventListener("animationstart",W),T.addEventListener("animationcancel",Y),T.addEventListener("animationend",Y),()=>{Z.clearTimeout(V),T.removeEventListener("animationstart",W),T.removeEventListener("animationcancel",Y),T.removeEventListener("animationend",Y)}}else G("ANIMATION_END")},[T,G]),{isPresent:["mounted","unmountSuspended"].includes(U),ref:reactExports.useCallback(V=>{P.current=V?getComputedStyle(V):null,R(V)},[])}}function getAnimationName(_){return _?.animationName||"none"}function getElementRef$3(_){let T=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning;return R?_.ref:(T=Object.getOwnPropertyDescriptor(_,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning,R?_.props.ref:_.props.ref||_.ref)}function createSlot$2(_){const T=createSlotClone$2(_),R=reactExports.forwardRef((P,O)=>{const{children:I,...L}=P,U=reactExports.Children.toArray(I),G=U.find(isSlottable$2);if(G){const V=G.props.children,Z=U.map(Y=>Y===G?reactExports.Children.count(V)>1?reactExports.Children.only(null):reactExports.isValidElement(V)?V.props.children:null:Y);return jsxRuntimeExports.jsx(T,{...L,ref:O,children:reactExports.isValidElement(V)?reactExports.cloneElement(V,void 0,Z):null})}return jsxRuntimeExports.jsx(T,{...L,ref:O,children:I})});return R.displayName=`${_}.Slot`,R}function createSlotClone$2(_){const T=reactExports.forwardRef((R,P)=>{const{children:O,...I}=R;if(reactExports.isValidElement(O)){const L=getElementRef$2(O),U=mergeProps$2(I,O.props);return O.type!==reactExports.Fragment&&(U.ref=P?composeRefs(P,L):L),reactExports.cloneElement(O,U)}return reactExports.Children.count(O)>1?reactExports.Children.only(null):null});return T.displayName=`${_}.SlotClone`,T}var SLOTTABLE_IDENTIFIER$2=Symbol("radix.slottable");function isSlottable$2(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$2}function mergeProps$2(_,T){const R={...T};for(const P in T){const O=_[P],I=T[P];/^on[A-Z]/.test(P)?O&&I?R[P]=(...U)=>{const G=I(...U);return O(...U),G}:O&&(R[P]=O):P==="style"?R[P]={...O,...I}:P==="className"&&(R[P]=[O,I].filter(Boolean).join(" "))}return{..._,...R}}function getElementRef$2(_){let T=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning;return R?_.ref:(T=Object.getOwnPropertyDescriptor(_,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning,R?_.props.ref:_.props.ref||_.ref)}var NODES$2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive$2=NODES$2.reduce((_,T)=>{const R=createSlot$2(`Primitive.${T}`),P=reactExports.forwardRef((O,I)=>{const{asChild:L,...U}=O,G=L?R:T;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(G,{...U,ref:I})});return P.displayName=`Primitive.${T}`,{..._,[T]:P}},{});function dispatchDiscreteCustomEvent(_,T){_&&reactDomExports.flushSync(()=>_.dispatchEvent(T))}var CHECKBOX_NAME="Checkbox",[createCheckboxContext]=createContextScope$1(CHECKBOX_NAME),[CheckboxProviderImpl,useCheckboxContext]=createCheckboxContext(CHECKBOX_NAME);function CheckboxProvider(_){const{__scopeCheckbox:T,checked:R,children:P,defaultChecked:O,disabled:I,form:L,name:U,onCheckedChange:G,required:V,value:Z="on",internal_do_not_use_render:Y}=_,[W,J]=useControllableState({prop:R,defaultProp:O??!1,onChange:G,caller:CHECKBOX_NAME}),[ee,te]=reactExports.useState(null),[ie,oe]=reactExports.useState(null),ae=reactExports.useRef(!1),ce=ee?!!L||!!ee.closest("form"):!0,le={checked:W,disabled:I,setChecked:J,control:ee,setControl:te,name:U,form:L,value:Z,hasConsumerStoppedPropagationRef:ae,required:V,defaultChecked:isIndeterminate(O)?!1:O,isFormControl:ce,bubbleInput:ie,setBubbleInput:oe};return jsxRuntimeExports.jsx(CheckboxProviderImpl,{scope:T,...le,children:isFunction$1(Y)?Y(le):P})}var TRIGGER_NAME$4="CheckboxTrigger",CheckboxTrigger=reactExports.forwardRef(({__scopeCheckbox:_,onKeyDown:T,onClick:R,...P},O)=>{const{control:I,value:L,disabled:U,checked:G,required:V,setControl:Z,setChecked:Y,hasConsumerStoppedPropagationRef:W,isFormControl:J,bubbleInput:ee}=useCheckboxContext(TRIGGER_NAME$4,_),te=useComposedRefs(O,Z),ie=reactExports.useRef(G);return reactExports.useEffect(()=>{const oe=I?.form;if(oe){const ae=()=>Y(ie.current);return oe.addEventListener("reset",ae),()=>oe.removeEventListener("reset",ae)}},[I,Y]),jsxRuntimeExports.jsx(Primitive$2.button,{type:"button",role:"checkbox","aria-checked":isIndeterminate(G)?"mixed":G,"aria-required":V,"data-state":getState$2(G),"data-disabled":U?"":void 0,disabled:U,value:L,...P,ref:te,onKeyDown:composeEventHandlers(T,oe=>{oe.key==="Enter"&&oe.preventDefault()}),onClick:composeEventHandlers(R,oe=>{Y(ae=>isIndeterminate(ae)?!0:!ae),ee&&J&&(W.current=oe.isPropagationStopped(),W.current||oe.stopPropagation())})})});CheckboxTrigger.displayName=TRIGGER_NAME$4;var Checkbox$1=reactExports.forwardRef((_,T)=>{const{__scopeCheckbox:R,name:P,checked:O,defaultChecked:I,required:L,disabled:U,value:G,onCheckedChange:V,form:Z,...Y}=_;return jsxRuntimeExports.jsx(CheckboxProvider,{__scopeCheckbox:R,checked:O,defaultChecked:I,disabled:U,required:L,onCheckedChange:V,name:P,form:Z,value:G,internal_do_not_use_render:({isFormControl:W})=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CheckboxTrigger,{...Y,ref:T,__scopeCheckbox:R}),W&&jsxRuntimeExports.jsx(CheckboxBubbleInput,{__scopeCheckbox:R})]})})});Checkbox$1.displayName=CHECKBOX_NAME;var INDICATOR_NAME$1="CheckboxIndicator",CheckboxIndicator=reactExports.forwardRef((_,T)=>{const{__scopeCheckbox:R,forceMount:P,...O}=_,I=useCheckboxContext(INDICATOR_NAME$1,R);return jsxRuntimeExports.jsx(Presence,{present:P||isIndeterminate(I.checked)||I.checked===!0,children:jsxRuntimeExports.jsx(Primitive$2.span,{"data-state":getState$2(I.checked),"data-disabled":I.disabled?"":void 0,...O,ref:T,style:{pointerEvents:"none",..._.style}})})});CheckboxIndicator.displayName=INDICATOR_NAME$1;var BUBBLE_INPUT_NAME$2="CheckboxBubbleInput",CheckboxBubbleInput=reactExports.forwardRef(({__scopeCheckbox:_,...T},R)=>{const{control:P,hasConsumerStoppedPropagationRef:O,checked:I,defaultChecked:L,required:U,disabled:G,name:V,value:Z,form:Y,bubbleInput:W,setBubbleInput:J}=useCheckboxContext(BUBBLE_INPUT_NAME$2,_),ee=useComposedRefs(R,J),te=usePrevious(I),ie=useSize(P);reactExports.useEffect(()=>{const ae=W;if(!ae)return;const ce=window.HTMLInputElement.prototype,he=Object.getOwnPropertyDescriptor(ce,"checked").set,me=!O.current;if(te!==I&&he){const fe=new Event("click",{bubbles:me});ae.indeterminate=isIndeterminate(I),he.call(ae,isIndeterminate(I)?!1:I),ae.dispatchEvent(fe)}},[W,te,I,O]);const oe=reactExports.useRef(isIndeterminate(I)?!1:I);return jsxRuntimeExports.jsx(Primitive$2.input,{type:"checkbox","aria-hidden":!0,defaultChecked:L??oe.current,required:U,disabled:G,name:V,value:Z,form:Y,...T,tabIndex:-1,ref:ee,style:{...T.style,...ie,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});CheckboxBubbleInput.displayName=BUBBLE_INPUT_NAME$2;function isFunction$1(_){return typeof _=="function"}function isIndeterminate(_){return _==="indeterminate"}function getState$2(_){return isIndeterminate(_)?"indeterminate":_?"checked":"unchecked"}const toKebabCase=_=>_.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=_=>_.replace(/^([A-Z])|[\s-_]+(\w)/g,(T,R,P)=>P?P.toUpperCase():R.toLowerCase()),toPascalCase=_=>{const T=toCamelCase(_);return T.charAt(0).toUpperCase()+T.slice(1)},mergeClasses=(..._)=>_.filter((T,R,P)=>!!T&&T.trim()!==""&&P.indexOf(T)===R).join(" ").trim(),hasA11yProp=_=>{for(const T in _)if(T.startsWith("aria-")||T==="role"||T==="title")return!0};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Icon$1=reactExports.forwardRef(({color:_="currentColor",size:T=24,strokeWidth:R=2,absoluteStrokeWidth:P,className:O="",children:I,iconNode:L,...U},G)=>reactExports.createElement("svg",{ref:G,...defaultAttributes,width:T,height:T,stroke:_,strokeWidth:P?Number(R)*24/Number(T):R,className:mergeClasses("lucide",O),...!I&&!hasA11yProp(U)&&{"aria-hidden":"true"},...U},[...L.map(([V,Z])=>reactExports.createElement(V,Z)),...Array.isArray(I)?I:[I]]));const createLucideIcon=(_,T)=>{const R=reactExports.forwardRef(({className:P,...O},I)=>reactExports.createElement(Icon$1,{ref:I,iconNode:T,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(_))}`,`lucide-${_}`,P),...O}));return R.displayName=toPascalCase(_),R};const __iconNode$m=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Camera=createLucideIcon("camera",__iconNode$m);const __iconNode$l=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$l);const __iconNode$k=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$k);const __iconNode$j=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ChevronUp=createLucideIcon("chevron-up",__iconNode$j);const __iconNode$i=[["path",{d:"M11 14h10",key:"1w8e9d"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v1.344",key:"1e62lh"}],["path",{d:"m17 18 4-4-4-4",key:"z2g111"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 1.793-1.113",key:"bjbb7m"}],["rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",key:"ublpy"}]],ClipboardPaste=createLucideIcon("clipboard-paste",__iconNode$i);const __iconNode$h=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Copy=createLucideIcon("copy",__iconNode$h);const __iconNode$g=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Download=createLucideIcon("download",__iconNode$g);const __iconNode$f=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],FileDown=createLucideIcon("file-down",__iconNode$f);const __iconNode$e=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],FileSpreadsheet=createLucideIcon("file-spreadsheet",__iconNode$e);const __iconNode$d=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Link2=createLucideIcon("link-2",__iconNode$d);const __iconNode$c=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],LoaderCircle=createLucideIcon("loader-circle",__iconNode$c);const __iconNode$b=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Moon=createLucideIcon("moon",__iconNode$b);const __iconNode$a=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Pause=createLucideIcon("pause",__iconNode$a);const __iconNode$9=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Play=createLucideIcon("play",__iconNode$9);const __iconNode$8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$8);const __iconNode$7=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RotateCcw=createLucideIcon("rotate-ccw",__iconNode$7);const __iconNode$6=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],SkipForward=createLucideIcon("skip-forward",__iconNode$6);const __iconNode$5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Square=createLucideIcon("square",__iconNode$5);const __iconNode$4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sun=createLucideIcon("sun",__iconNode$4);const __iconNode$3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Trash2=createLucideIcon("trash-2",__iconNode$3);const __iconNode$2=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Upload=createLucideIcon("upload",__iconNode$2);const __iconNode$1=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Video=createLucideIcon("video",__iconNode$1);const __iconNode=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode),Checkbox=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(Checkbox$1,{ref:R,className:cn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",_),...T,children:jsxRuntimeExports.jsx(CheckboxIndicator,{className:cn("flex items-center justify-center text-current"),children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}));Checkbox.displayName=Checkbox$1.displayName;function BoolInput({label:_,value:T,onChange:R,disabled:P}){return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs w-32 shrink-0",children:_}),jsxRuntimeExports.jsx(Checkbox,{checked:T,onCheckedChange:O=>R(O===!0),disabled:P})]})}function clamp$1(_,[T,R]){return Math.min(R,Math.max(T,_))}function createSlot$1(_){const T=createSlotClone$1(_),R=reactExports.forwardRef((P,O)=>{const{children:I,...L}=P,U=reactExports.Children.toArray(I),G=U.find(isSlottable$1);if(G){const V=G.props.children,Z=U.map(Y=>Y===G?reactExports.Children.count(V)>1?reactExports.Children.only(null):reactExports.isValidElement(V)?V.props.children:null:Y);return jsxRuntimeExports.jsx(T,{...L,ref:O,children:reactExports.isValidElement(V)?reactExports.cloneElement(V,void 0,Z):null})}return jsxRuntimeExports.jsx(T,{...L,ref:O,children:I})});return R.displayName=`${_}.Slot`,R}function createSlotClone$1(_){const T=reactExports.forwardRef((R,P)=>{const{children:O,...I}=R;if(reactExports.isValidElement(O)){const L=getElementRef$1(O),U=mergeProps$1(I,O.props);return O.type!==reactExports.Fragment&&(U.ref=P?composeRefs(P,L):L),reactExports.cloneElement(O,U)}return reactExports.Children.count(O)>1?reactExports.Children.only(null):null});return T.displayName=`${_}.SlotClone`,T}var SLOTTABLE_IDENTIFIER$1=Symbol("radix.slottable");function isSlottable$1(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER$1}function mergeProps$1(_,T){const R={...T};for(const P in T){const O=_[P],I=T[P];/^on[A-Z]/.test(P)?O&&I?R[P]=(...U)=>{const G=I(...U);return O(...U),G}:O&&(R[P]=O):P==="style"?R[P]={...O,...I}:P==="className"&&(R[P]=[O,I].filter(Boolean).join(" "))}return{..._,...R}}function getElementRef$1(_){let T=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning;return R?_.ref:(T=Object.getOwnPropertyDescriptor(_,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning,R?_.props.ref:_.props.ref||_.ref)}function createCollection(_){const T=_+"CollectionProvider",[R,P]=createContextScope$1(T),[O,I]=R(T,{collectionRef:{current:null},itemMap:new Map}),L=te=>{const{scope:ie,children:oe}=te,ae=React.useRef(null),ce=React.useRef(new Map).current;return jsxRuntimeExports.jsx(O,{scope:ie,itemMap:ce,collectionRef:ae,children:oe})};L.displayName=T;const U=_+"CollectionSlot",G=createSlot$1(U),V=React.forwardRef((te,ie)=>{const{scope:oe,children:ae}=te,ce=I(U,oe),le=useComposedRefs(ie,ce.collectionRef);return jsxRuntimeExports.jsx(G,{ref:le,children:ae})});V.displayName=U;const Z=_+"CollectionItemSlot",Y="data-radix-collection-item",W=createSlot$1(Z),J=React.forwardRef((te,ie)=>{const{scope:oe,children:ae,...ce}=te,le=React.useRef(null),he=useComposedRefs(ie,le),me=I(Z,oe);return React.useEffect(()=>(me.itemMap.set(le,{ref:le,...ce}),()=>{me.itemMap.delete(le)})),jsxRuntimeExports.jsx(W,{[Y]:"",ref:he,children:ae})});J.displayName=Z;function ee(te){const ie=I(_+"CollectionConsumer",te);return React.useCallback(()=>{const ae=ie.collectionRef.current;if(!ae)return[];const ce=Array.from(ae.querySelectorAll(`[${Y}]`));return Array.from(ie.itemMap.values()).sort((me,fe)=>ce.indexOf(me.ref.current)-ce.indexOf(fe.ref.current))},[ie.collectionRef,ie.itemMap])}return[{Provider:L,Slot:V,ItemSlot:J},ee,P]}var DirectionContext=reactExports.createContext(void 0);function useDirection(_){const T=reactExports.useContext(DirectionContext);return _||T||"ltr"}function useCallbackRef$1(_){const T=reactExports.useRef(_);return reactExports.useEffect(()=>{T.current=_}),reactExports.useMemo(()=>(...R)=>T.current?.(...R),[])}function useEscapeKeydown(_,T=globalThis?.document){const R=useCallbackRef$1(_);reactExports.useEffect(()=>{const P=O=>{O.key==="Escape"&&R(O)};return T.addEventListener("keydown",P,{capture:!0}),()=>T.removeEventListener("keydown",P,{capture:!0})},[R,T])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((_,T)=>{const{disableOutsidePointerEvents:R=!1,onEscapeKeyDown:P,onPointerDownOutside:O,onFocusOutside:I,onInteractOutside:L,onDismiss:U,...G}=_,V=reactExports.useContext(DismissableLayerContext),[Z,Y]=reactExports.useState(null),W=Z?.ownerDocument??globalThis?.document,[,J]=reactExports.useState({}),ee=useComposedRefs(T,fe=>Y(fe)),te=Array.from(V.layers),[ie]=[...V.layersWithOutsidePointerEventsDisabled].slice(-1),oe=te.indexOf(ie),ae=Z?te.indexOf(Z):-1,ce=V.layersWithOutsidePointerEventsDisabled.size>0,le=ae>=oe,he=usePointerDownOutside(fe=>{const ue=fe.target,pe=[...V.branches].some(ge=>ge.contains(ue));!le||pe||(O?.(fe),L?.(fe),fe.defaultPrevented||U?.())},W),me=useFocusOutside(fe=>{const ue=fe.target;[...V.branches].some(ge=>ge.contains(ue))||(I?.(fe),L?.(fe),fe.defaultPrevented||U?.())},W);return useEscapeKeydown(fe=>{ae===V.layers.size-1&&(P?.(fe),!fe.defaultPrevented&&U&&(fe.preventDefault(),U()))},W),reactExports.useEffect(()=>{if(Z)return R&&(V.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=W.body.style.pointerEvents,W.body.style.pointerEvents="none"),V.layersWithOutsidePointerEventsDisabled.add(Z)),V.layers.add(Z),dispatchUpdate(),()=>{R&&V.layersWithOutsidePointerEventsDisabled.size===1&&(W.body.style.pointerEvents=originalBodyPointerEvents)}},[Z,W,R,V]),reactExports.useEffect(()=>()=>{Z&&(V.layers.delete(Z),V.layersWithOutsidePointerEventsDisabled.delete(Z),dispatchUpdate())},[Z,V]),reactExports.useEffect(()=>{const fe=()=>J({});return document.addEventListener(CONTEXT_UPDATE,fe),()=>document.removeEventListener(CONTEXT_UPDATE,fe)},[]),jsxRuntimeExports.jsx(Primitive$2.div,{...G,ref:ee,style:{pointerEvents:ce?le?"auto":"none":void 0,..._.style},onFocusCapture:composeEventHandlers(_.onFocusCapture,me.onFocusCapture),onBlurCapture:composeEventHandlers(_.onBlurCapture,me.onBlurCapture),onPointerDownCapture:composeEventHandlers(_.onPointerDownCapture,he.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((_,T)=>{const R=reactExports.useContext(DismissableLayerContext),P=reactExports.useRef(null),O=useComposedRefs(T,P);return reactExports.useEffect(()=>{const I=P.current;if(I)return R.branches.add(I),()=>{R.branches.delete(I)}},[R.branches]),jsxRuntimeExports.jsx(Primitive$2.div,{..._,ref:O})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(_,T=globalThis?.document){const R=useCallbackRef$1(_),P=reactExports.useRef(!1),O=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const I=U=>{if(U.target&&!P.current){let G=function(){handleAndDispatchCustomEvent(POINTER_DOWN_OUTSIDE,R,V,{discrete:!0})};const V={originalEvent:U};U.pointerType==="touch"?(T.removeEventListener("click",O.current),O.current=G,T.addEventListener("click",O.current,{once:!0})):G()}else T.removeEventListener("click",O.current);P.current=!1},L=window.setTimeout(()=>{T.addEventListener("pointerdown",I)},0);return()=>{window.clearTimeout(L),T.removeEventListener("pointerdown",I),T.removeEventListener("click",O.current)}},[T,R]),{onPointerDownCapture:()=>P.current=!0}}function useFocusOutside(_,T=globalThis?.document){const R=useCallbackRef$1(_),P=reactExports.useRef(!1);return reactExports.useEffect(()=>{const O=I=>{I.target&&!P.current&&handleAndDispatchCustomEvent(FOCUS_OUTSIDE,R,{originalEvent:I},{discrete:!1})};return T.addEventListener("focusin",O),()=>T.removeEventListener("focusin",O)},[T,R]),{onFocusCapture:()=>P.current=!0,onBlurCapture:()=>P.current=!1}}function dispatchUpdate(){const _=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(_)}function handleAndDispatchCustomEvent(_,T,R,{discrete:P}){const O=R.originalEvent.target,I=new CustomEvent(_,{bubbles:!1,cancelable:!0,detail:R});T&&O.addEventListener(_,T,{once:!0}),P?dispatchDiscreteCustomEvent(O,I):O.dispatchEvent(I)}var count$3=0;function useFocusGuards(){reactExports.useEffect(()=>{const _=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",_[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",_[1]??createFocusGuard()),count$3++,()=>{count$3===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(T=>T.remove()),count$3--}},[])}function createFocusGuard(){const _=document.createElement("span");return _.setAttribute("data-radix-focus-guard",""),_.tabIndex=0,_.style.outline="none",_.style.opacity="0",_.style.position="fixed",_.style.pointerEvents="none",_}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((_,T)=>{const{loop:R=!1,trapped:P=!1,onMountAutoFocus:O,onUnmountAutoFocus:I,...L}=_,[U,G]=reactExports.useState(null),V=useCallbackRef$1(O),Z=useCallbackRef$1(I),Y=reactExports.useRef(null),W=useComposedRefs(T,te=>G(te)),J=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(P){let te=function(ce){if(J.paused||!U)return;const le=ce.target;U.contains(le)?Y.current=le:focus(Y.current,{select:!0})},ie=function(ce){if(J.paused||!U)return;const le=ce.relatedTarget;le!==null&&(U.contains(le)||focus(Y.current,{select:!0}))},oe=function(ce){if(document.activeElement===document.body)for(const he of ce)he.removedNodes.length>0&&focus(U)};document.addEventListener("focusin",te),document.addEventListener("focusout",ie);const ae=new MutationObserver(oe);return U&&ae.observe(U,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",te),document.removeEventListener("focusout",ie),ae.disconnect()}}},[P,U,J.paused]),reactExports.useEffect(()=>{if(U){focusScopesStack.add(J);const te=document.activeElement;if(!U.contains(te)){const oe=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);U.addEventListener(AUTOFOCUS_ON_MOUNT,V),U.dispatchEvent(oe),oe.defaultPrevented||(focusFirst$1(removeLinks(getTabbableCandidates(U)),{select:!0}),document.activeElement===te&&focus(U))}return()=>{U.removeEventListener(AUTOFOCUS_ON_MOUNT,V),setTimeout(()=>{const oe=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);U.addEventListener(AUTOFOCUS_ON_UNMOUNT,Z),U.dispatchEvent(oe),oe.defaultPrevented||focus(te??document.body,{select:!0}),U.removeEventListener(AUTOFOCUS_ON_UNMOUNT,Z),focusScopesStack.remove(J)},0)}}},[U,V,Z,J]);const ee=reactExports.useCallback(te=>{if(!R&&!P||J.paused)return;const ie=te.key==="Tab"&&!te.altKey&&!te.ctrlKey&&!te.metaKey,oe=document.activeElement;if(ie&&oe){const ae=te.currentTarget,[ce,le]=getTabbableEdges(ae);ce&&le?!te.shiftKey&&oe===le?(te.preventDefault(),R&&focus(ce,{select:!0})):te.shiftKey&&oe===ce&&(te.preventDefault(),R&&focus(le,{select:!0})):oe===ae&&te.preventDefault()}},[R,P,J.paused]);return jsxRuntimeExports.jsx(Primitive$2.div,{tabIndex:-1,...L,ref:W,onKeyDown:ee})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$1(_,{select:T=!1}={}){const R=document.activeElement;for(const P of _)if(focus(P,{select:T}),document.activeElement!==R)return}function getTabbableEdges(_){const T=getTabbableCandidates(_),R=findVisible(T,_),P=findVisible(T.reverse(),_);return[R,P]}function getTabbableCandidates(_){const T=[],R=document.createTreeWalker(_,NodeFilter.SHOW_ELEMENT,{acceptNode:P=>{const O=P.tagName==="INPUT"&&P.type==="hidden";return P.disabled||P.hidden||O?NodeFilter.FILTER_SKIP:P.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;R.nextNode();)T.push(R.currentNode);return T}function findVisible(_,T){for(const R of _)if(!isHidden(R,{upTo:T}))return R}function isHidden(_,{upTo:T}){if(getComputedStyle(_).visibility==="hidden")return!0;for(;_;){if(T!==void 0&&_===T)return!1;if(getComputedStyle(_).display==="none")return!0;_=_.parentElement}return!1}function isSelectableInput(_){return _ instanceof HTMLInputElement&&"select"in _}function focus(_,{select:T=!1}={}){if(_&&_.focus){const R=document.activeElement;_.focus({preventScroll:!0}),_!==R&&isSelectableInput(_)&&T&&_.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let _=[];return{add(T){const R=_[0];T!==R&&R?.pause(),_=arrayRemove(_,T),_.unshift(T)},remove(T){_=arrayRemove(_,T),_[0]?.resume()}}}function arrayRemove(_,T){const R=[..._],P=R.indexOf(T);return P!==-1&&R.splice(P,1),R}function removeLinks(_){return _.filter(T=>T.tagName!=="A")}var useReactId=React$1[" useId ".trim().toString()]||(()=>{}),count$2=0;function useId(_){const[T,R]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{R(P=>P??String(count$2++))},[_]),T?`radix-${T}`:""}const sides=["top","right","bottom","left"],min$2=Math.min,max$1=Math.max,round$1=Math.round,floor=Math.floor,createCoords=_=>({x:_,y:_}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(_,T,R){return max$1(_,min$2(T,R))}function evaluate(_,T){return typeof _=="function"?_(T):_}function getSide(_){return _.split("-")[0]}function getAlignment(_){return _.split("-")[1]}function getOppositeAxis(_){return _==="x"?"y":"x"}function getAxisLength(_){return _==="y"?"height":"width"}const yAxisSides=new Set(["top","bottom"]);function getSideAxis(_){return yAxisSides.has(getSide(_))?"y":"x"}function getAlignmentAxis(_){return getOppositeAxis(getSideAxis(_))}function getAlignmentSides(_,T,R){R===void 0&&(R=!1);const P=getAlignment(_),O=getAlignmentAxis(_),I=getAxisLength(O);let L=O==="x"?P===(R?"end":"start")?"right":"left":P==="start"?"bottom":"top";return T.reference[I]>T.floating[I]&&(L=getOppositePlacement(L)),[L,getOppositePlacement(L)]}function getExpandedPlacements(_){const T=getOppositePlacement(_);return[getOppositeAlignmentPlacement(_),T,getOppositeAlignmentPlacement(T)]}function getOppositeAlignmentPlacement(_){return _.replace(/start|end/g,T=>oppositeAlignmentMap[T])}const lrPlacement=["left","right"],rlPlacement=["right","left"],tbPlacement=["top","bottom"],btPlacement=["bottom","top"];function getSideList(_,T,R){switch(_){case"top":case"bottom":return R?T?rlPlacement:lrPlacement:T?lrPlacement:rlPlacement;case"left":case"right":return T?tbPlacement:btPlacement;default:return[]}}function getOppositeAxisPlacements(_,T,R,P){const O=getAlignment(_);let I=getSideList(getSide(_),R==="start",P);return O&&(I=I.map(L=>L+"-"+O),T&&(I=I.concat(I.map(getOppositeAlignmentPlacement)))),I}function getOppositePlacement(_){return _.replace(/left|right|bottom|top/g,T=>oppositeSideMap[T])}function expandPaddingObject(_){return{top:0,right:0,bottom:0,left:0,..._}}function getPaddingObject(_){return typeof _!="number"?expandPaddingObject(_):{top:_,right:_,bottom:_,left:_}}function rectToClientRect(_){const{x:T,y:R,width:P,height:O}=_;return{width:P,height:O,top:R,left:T,right:T+P,bottom:R+O,x:T,y:R}}function computeCoordsFromPlacement(_,T,R){let{reference:P,floating:O}=_;const I=getSideAxis(T),L=getAlignmentAxis(T),U=getAxisLength(L),G=getSide(T),V=I==="y",Z=P.x+P.width/2-O.width/2,Y=P.y+P.height/2-O.height/2,W=P[U]/2-O[U]/2;let J;switch(G){case"top":J={x:Z,y:P.y-O.height};break;case"bottom":J={x:Z,y:P.y+P.height};break;case"right":J={x:P.x+P.width,y:Y};break;case"left":J={x:P.x-O.width,y:Y};break;default:J={x:P.x,y:P.y}}switch(getAlignment(T)){case"start":J[L]-=W*(R&&V?-1:1);break;case"end":J[L]+=W*(R&&V?-1:1);break}return J}const computePosition$1=async(_,T,R)=>{const{placement:P="bottom",strategy:O="absolute",middleware:I=[],platform:L}=R,U=I.filter(Boolean),G=await(L.isRTL==null?void 0:L.isRTL(T));let V=await L.getElementRects({reference:_,floating:T,strategy:O}),{x:Z,y:Y}=computeCoordsFromPlacement(V,P,G),W=P,J={},ee=0;for(let te=0;te<U.length;te++){const{name:ie,fn:oe}=U[te],{x:ae,y:ce,data:le,reset:he}=await oe({x:Z,y:Y,initialPlacement:P,placement:W,strategy:O,middlewareData:J,rects:V,platform:L,elements:{reference:_,floating:T}});Z=ae??Z,Y=ce??Y,J={...J,[ie]:{...J[ie],...le}},he&&ee<=50&&(ee++,typeof he=="object"&&(he.placement&&(W=he.placement),he.rects&&(V=he.rects===!0?await L.getElementRects({reference:_,floating:T,strategy:O}):he.rects),{x:Z,y:Y}=computeCoordsFromPlacement(V,W,G)),te=-1)}return{x:Z,y:Y,placement:W,strategy:O,middlewareData:J}};async function detectOverflow(_,T){var R;T===void 0&&(T={});const{x:P,y:O,platform:I,rects:L,elements:U,strategy:G}=_,{boundary:V="clippingAncestors",rootBoundary:Z="viewport",elementContext:Y="floating",altBoundary:W=!1,padding:J=0}=evaluate(T,_),ee=getPaddingObject(J),ie=U[W?Y==="floating"?"reference":"floating":Y],oe=rectToClientRect(await I.getClippingRect({element:(R=await(I.isElement==null?void 0:I.isElement(ie)))==null||R?ie:ie.contextElement||await(I.getDocumentElement==null?void 0:I.getDocumentElement(U.floating)),boundary:V,rootBoundary:Z,strategy:G})),ae=Y==="floating"?{x:P,y:O,width:L.floating.width,height:L.floating.height}:L.reference,ce=await(I.getOffsetParent==null?void 0:I.getOffsetParent(U.floating)),le=await(I.isElement==null?void 0:I.isElement(ce))?await(I.getScale==null?void 0:I.getScale(ce))||{x:1,y:1}:{x:1,y:1},he=rectToClientRect(I.convertOffsetParentRelativeRectToViewportRelativeRect?await I.convertOffsetParentRelativeRectToViewportRelativeRect({elements:U,rect:ae,offsetParent:ce,strategy:G}):ae);return{top:(oe.top-he.top+ee.top)/le.y,bottom:(he.bottom-oe.bottom+ee.bottom)/le.y,left:(oe.left-he.left+ee.left)/le.x,right:(he.right-oe.right+ee.right)/le.x}}const arrow$3=_=>({name:"arrow",options:_,async fn(T){const{x:R,y:P,placement:O,rects:I,platform:L,elements:U,middlewareData:G}=T,{element:V,padding:Z=0}=evaluate(_,T)||{};if(V==null)return{};const Y=getPaddingObject(Z),W={x:R,y:P},J=getAlignmentAxis(O),ee=getAxisLength(J),te=await L.getDimensions(V),ie=J==="y",oe=ie?"top":"left",ae=ie?"bottom":"right",ce=ie?"clientHeight":"clientWidth",le=I.reference[ee]+I.reference[J]-W[J]-I.floating[ee],he=W[J]-I.reference[J],me=await(L.getOffsetParent==null?void 0:L.getOffsetParent(V));let fe=me?me[ce]:0;(!fe||!await(L.isElement==null?void 0:L.isElement(me)))&&(fe=U.floating[ce]||I.floating[ee]);const ue=le/2-he/2,pe=fe/2-te[ee]/2-1,ge=min$2(Y[oe],pe),_e=min$2(Y[ae],pe),we=ge,be=fe-te[ee]-_e,Ce=fe/2-te[ee]/2+ue,Ee=clamp(we,Ce,be),ye=!G.arrow&&getAlignment(O)!=null&&Ce!==Ee&&I.reference[ee]/2-(Ce<we?ge:_e)-te[ee]/2<0,Se=ye?Ce<we?Ce-we:Ce-be:0;return{[J]:W[J]+Se,data:{[J]:Ee,centerOffset:Ce-Ee-Se,...ye&&{alignmentOffset:Se}},reset:ye}}}),flip$3=function(_){return _===void 0&&(_={}),{name:"flip",options:_,async fn(T){var R,P;const{placement:O,middlewareData:I,rects:L,initialPlacement:U,platform:G,elements:V}=T,{mainAxis:Z=!0,crossAxis:Y=!0,fallbackPlacements:W,fallbackStrategy:J="bestFit",fallbackAxisSideDirection:ee="none",flipAlignment:te=!0,...ie}=evaluate(_,T);if((R=I.arrow)!=null&&R.alignmentOffset)return{};const oe=getSide(O),ae=getSideAxis(U),ce=getSide(U)===U,le=await(G.isRTL==null?void 0:G.isRTL(V.floating)),he=W||(ce||!te?[getOppositePlacement(U)]:getExpandedPlacements(U)),me=ee!=="none";!W&&me&&he.push(...getOppositeAxisPlacements(U,te,ee,le));const fe=[U,...he],ue=await detectOverflow(T,ie),pe=[];let ge=((P=I.flip)==null?void 0:P.overflows)||[];if(Z&&pe.push(ue[oe]),Y){const Ce=getAlignmentSides(O,L,le);pe.push(ue[Ce[0]],ue[Ce[1]])}if(ge=[...ge,{placement:O,overflows:pe}],!pe.every(Ce=>Ce<=0)){var _e,we;const Ce=(((_e=I.flip)==null?void 0:_e.index)||0)+1,Ee=fe[Ce];if(Ee&&(!(Y==="alignment"?ae!==getSideAxis(Ee):!1)||ge.every(Te=>getSideAxis(Te.placement)===ae?Te.overflows[0]>0:!0)))return{data:{index:Ce,overflows:ge},reset:{placement:Ee}};let ye=(we=ge.filter(Se=>Se.overflows[0]<=0).sort((Se,Te)=>Se.overflows[1]-Te.overflows[1])[0])==null?void 0:we.placement;if(!ye)switch(J){case"bestFit":{var be;const Se=(be=ge.filter(Te=>{if(me){const Ae=getSideAxis(Te.placement);return Ae===ae||Ae==="y"}return!0}).map(Te=>[Te.placement,Te.overflows.filter(Ae=>Ae>0).reduce((Ae,Be)=>Ae+Be,0)]).sort((Te,Ae)=>Te[1]-Ae[1])[0])==null?void 0:be[0];Se&&(ye=Se);break}case"initialPlacement":ye=U;break}if(O!==ye)return{reset:{placement:ye}}}return{}}}};function getSideOffsets(_,T){return{top:_.top-T.height,right:_.right-T.width,bottom:_.bottom-T.height,left:_.left-T.width}}function isAnySideFullyClipped(_){return sides.some(T=>_[T]>=0)}const hide$2=function(_){return _===void 0&&(_={}),{name:"hide",options:_,async fn(T){const{rects:R}=T,{strategy:P="referenceHidden",...O}=evaluate(_,T);switch(P){case"referenceHidden":{const I=await detectOverflow(T,{...O,elementContext:"reference"}),L=getSideOffsets(I,R.reference);return{data:{referenceHiddenOffsets:L,referenceHidden:isAnySideFullyClipped(L)}}}case"escaped":{const I=await detectOverflow(T,{...O,altBoundary:!0}),L=getSideOffsets(I,R.floating);return{data:{escapedOffsets:L,escaped:isAnySideFullyClipped(L)}}}default:return{}}}}},originSides=new Set(["left","top"]);async function convertValueToCoords(_,T){const{placement:R,platform:P,elements:O}=_,I=await(P.isRTL==null?void 0:P.isRTL(O.floating)),L=getSide(R),U=getAlignment(R),G=getSideAxis(R)==="y",V=originSides.has(L)?-1:1,Z=I&&G?-1:1,Y=evaluate(T,_);let{mainAxis:W,crossAxis:J,alignmentAxis:ee}=typeof Y=="number"?{mainAxis:Y,crossAxis:0,alignmentAxis:null}:{mainAxis:Y.mainAxis||0,crossAxis:Y.crossAxis||0,alignmentAxis:Y.alignmentAxis};return U&&typeof ee=="number"&&(J=U==="end"?ee*-1:ee),G?{x:J*Z,y:W*V}:{x:W*V,y:J*Z}}const offset$3=function(_){return _===void 0&&(_=0),{name:"offset",options:_,async fn(T){var R,P;const{x:O,y:I,placement:L,middlewareData:U}=T,G=await convertValueToCoords(T,_);return L===((R=U.offset)==null?void 0:R.placement)&&(P=U.arrow)!=null&&P.alignmentOffset?{}:{x:O+G.x,y:I+G.y,data:{...G,placement:L}}}}},shift$2=function(_){return _===void 0&&(_={}),{name:"shift",options:_,async fn(T){const{x:R,y:P,placement:O}=T,{mainAxis:I=!0,crossAxis:L=!1,limiter:U={fn:ie=>{let{x:oe,y:ae}=ie;return{x:oe,y:ae}}},...G}=evaluate(_,T),V={x:R,y:P},Z=await detectOverflow(T,G),Y=getSideAxis(getSide(O)),W=getOppositeAxis(Y);let J=V[W],ee=V[Y];if(I){const ie=W==="y"?"top":"left",oe=W==="y"?"bottom":"right",ae=J+Z[ie],ce=J-Z[oe];J=clamp(ae,J,ce)}if(L){const ie=Y==="y"?"top":"left",oe=Y==="y"?"bottom":"right",ae=ee+Z[ie],ce=ee-Z[oe];ee=clamp(ae,ee,ce)}const te=U.fn({...T,[W]:J,[Y]:ee});return{...te,data:{x:te.x-R,y:te.y-P,enabled:{[W]:I,[Y]:L}}}}}},limitShift$2=function(_){return _===void 0&&(_={}),{options:_,fn(T){const{x:R,y:P,placement:O,rects:I,middlewareData:L}=T,{offset:U=0,mainAxis:G=!0,crossAxis:V=!0}=evaluate(_,T),Z={x:R,y:P},Y=getSideAxis(O),W=getOppositeAxis(Y);let J=Z[W],ee=Z[Y];const te=evaluate(U,T),ie=typeof te=="number"?{mainAxis:te,crossAxis:0}:{mainAxis:0,crossAxis:0,...te};if(G){const ce=W==="y"?"height":"width",le=I.reference[W]-I.floating[ce]+ie.mainAxis,he=I.reference[W]+I.reference[ce]-ie.mainAxis;J<le?J=le:J>he&&(J=he)}if(V){var oe,ae;const ce=W==="y"?"width":"height",le=originSides.has(getSide(O)),he=I.reference[Y]-I.floating[ce]+(le&&((oe=L.offset)==null?void 0:oe[Y])||0)+(le?0:ie.crossAxis),me=I.reference[Y]+I.reference[ce]+(le?0:((ae=L.offset)==null?void 0:ae[Y])||0)-(le?ie.crossAxis:0);ee<he?ee=he:ee>me&&(ee=me)}return{[W]:J,[Y]:ee}}}},size$2=function(_){return _===void 0&&(_={}),{name:"size",options:_,async fn(T){var R,P;const{placement:O,rects:I,platform:L,elements:U}=T,{apply:G=()=>{},...V}=evaluate(_,T),Z=await detectOverflow(T,V),Y=getSide(O),W=getAlignment(O),J=getSideAxis(O)==="y",{width:ee,height:te}=I.floating;let ie,oe;Y==="top"||Y==="bottom"?(ie=Y,oe=W===(await(L.isRTL==null?void 0:L.isRTL(U.floating))?"start":"end")?"left":"right"):(oe=Y,ie=W==="end"?"top":"bottom");const ae=te-Z.top-Z.bottom,ce=ee-Z.left-Z.right,le=min$2(te-Z[ie],ae),he=min$2(ee-Z[oe],ce),me=!T.middlewareData.shift;let fe=le,ue=he;if((R=T.middlewareData.shift)!=null&&R.enabled.x&&(ue=ce),(P=T.middlewareData.shift)!=null&&P.enabled.y&&(fe=ae),me&&!W){const ge=max$1(Z.left,0),_e=max$1(Z.right,0),we=max$1(Z.top,0),be=max$1(Z.bottom,0);J?ue=ee-2*(ge!==0||_e!==0?ge+_e:max$1(Z.left,Z.right)):fe=te-2*(we!==0||be!==0?we+be:max$1(Z.top,Z.bottom))}await G({...T,availableWidth:ue,availableHeight:fe});const pe=await L.getDimensions(U.floating);return ee!==pe.width||te!==pe.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(_){return isNode(_)?(_.nodeName||"").toLowerCase():"#document"}function getWindow(_){var T;return(_==null||(T=_.ownerDocument)==null?void 0:T.defaultView)||window}function getDocumentElement(_){var T;return(T=(isNode(_)?_.ownerDocument:_.document)||window.document)==null?void 0:T.documentElement}function isNode(_){return hasWindow()?_ instanceof Node||_ instanceof getWindow(_).Node:!1}function isElement(_){return hasWindow()?_ instanceof Element||_ instanceof getWindow(_).Element:!1}function isHTMLElement(_){return hasWindow()?_ instanceof HTMLElement||_ instanceof getWindow(_).HTMLElement:!1}function isShadowRoot(_){return!hasWindow()||typeof ShadowRoot>"u"?!1:_ instanceof ShadowRoot||_ instanceof getWindow(_).ShadowRoot}const invalidOverflowDisplayValues=new Set(["inline","contents"]);function isOverflowElement(_){const{overflow:T,overflowX:R,overflowY:P,display:O}=getComputedStyle$1(_);return/auto|scroll|overlay|hidden|clip/.test(T+P+R)&&!invalidOverflowDisplayValues.has(O)}const tableElements=new Set(["table","td","th"]);function isTableElement(_){return tableElements.has(getNodeName(_))}const topLayerSelectors=[":popover-open",":modal"];function isTopLayer(_){return topLayerSelectors.some(T=>{try{return _.matches(T)}catch{return!1}})}const transformProperties=["transform","translate","scale","rotate","perspective"],willChangeValues=["transform","translate","scale","rotate","perspective","filter"],containValues=["paint","layout","strict","content"];function isContainingBlock(_){const T=isWebKit(),R=isElement(_)?getComputedStyle$1(_):_;return transformProperties.some(P=>R[P]?R[P]!=="none":!1)||(R.containerType?R.containerType!=="normal":!1)||!T&&(R.backdropFilter?R.backdropFilter!=="none":!1)||!T&&(R.filter?R.filter!=="none":!1)||willChangeValues.some(P=>(R.willChange||"").includes(P))||containValues.some(P=>(R.contain||"").includes(P))}function getContainingBlock(_){let T=getParentNode(_);for(;isHTMLElement(T)&&!isLastTraversableNode(T);){if(isContainingBlock(T))return T;if(isTopLayer(T))return null;T=getParentNode(T)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const lastTraversableNodeNames=new Set(["html","body","#document"]);function isLastTraversableNode(_){return lastTraversableNodeNames.has(getNodeName(_))}function getComputedStyle$1(_){return getWindow(_).getComputedStyle(_)}function getNodeScroll(_){return isElement(_)?{scrollLeft:_.scrollLeft,scrollTop:_.scrollTop}:{scrollLeft:_.scrollX,scrollTop:_.scrollY}}function getParentNode(_){if(getNodeName(_)==="html")return _;const T=_.assignedSlot||_.parentNode||isShadowRoot(_)&&_.host||getDocumentElement(_);return isShadowRoot(T)?T.host:T}function getNearestOverflowAncestor(_){const T=getParentNode(_);return isLastTraversableNode(T)?_.ownerDocument?_.ownerDocument.body:_.body:isHTMLElement(T)&&isOverflowElement(T)?T:getNearestOverflowAncestor(T)}function getOverflowAncestors(_,T,R){var P;T===void 0&&(T=[]),R===void 0&&(R=!0);const O=getNearestOverflowAncestor(_),I=O===((P=_.ownerDocument)==null?void 0:P.body),L=getWindow(O);if(I){const U=getFrameElement(L);return T.concat(L,L.visualViewport||[],isOverflowElement(O)?O:[],U&&R?getOverflowAncestors(U):[])}return T.concat(O,getOverflowAncestors(O,[],R))}function getFrameElement(_){return _.parent&&Object.getPrototypeOf(_.parent)?_.frameElement:null}function getCssDimensions(_){const T=getComputedStyle$1(_);let R=parseFloat(T.width)||0,P=parseFloat(T.height)||0;const O=isHTMLElement(_),I=O?_.offsetWidth:R,L=O?_.offsetHeight:P,U=round$1(R)!==I||round$1(P)!==L;return U&&(R=I,P=L),{width:R,height:P,$:U}}function unwrapElement(_){return isElement(_)?_:_.contextElement}function getScale(_){const T=unwrapElement(_);if(!isHTMLElement(T))return createCoords(1);const R=T.getBoundingClientRect(),{width:P,height:O,$:I}=getCssDimensions(T);let L=(I?round$1(R.width):R.width)/P,U=(I?round$1(R.height):R.height)/O;return(!L||!Number.isFinite(L))&&(L=1),(!U||!Number.isFinite(U))&&(U=1),{x:L,y:U}}const noOffsets=createCoords(0);function getVisualOffsets(_){const T=getWindow(_);return!isWebKit()||!T.visualViewport?noOffsets:{x:T.visualViewport.offsetLeft,y:T.visualViewport.offsetTop}}function shouldAddVisualOffsets(_,T,R){return T===void 0&&(T=!1),!R||T&&R!==getWindow(_)?!1:T}function getBoundingClientRect(_,T,R,P){T===void 0&&(T=!1),R===void 0&&(R=!1);const O=_.getBoundingClientRect(),I=unwrapElement(_);let L=createCoords(1);T&&(P?isElement(P)&&(L=getScale(P)):L=getScale(_));const U=shouldAddVisualOffsets(I,R,P)?getVisualOffsets(I):createCoords(0);let G=(O.left+U.x)/L.x,V=(O.top+U.y)/L.y,Z=O.width/L.x,Y=O.height/L.y;if(I){const W=getWindow(I),J=P&&isElement(P)?getWindow(P):P;let ee=W,te=getFrameElement(ee);for(;te&&P&&J!==ee;){const ie=getScale(te),oe=te.getBoundingClientRect(),ae=getComputedStyle$1(te),ce=oe.left+(te.clientLeft+parseFloat(ae.paddingLeft))*ie.x,le=oe.top+(te.clientTop+parseFloat(ae.paddingTop))*ie.y;G*=ie.x,V*=ie.y,Z*=ie.x,Y*=ie.y,G+=ce,V+=le,ee=getWindow(te),te=getFrameElement(ee)}}return rectToClientRect({width:Z,height:Y,x:G,y:V})}function getWindowScrollBarX(_,T){const R=getNodeScroll(_).scrollLeft;return T?T.left+R:getBoundingClientRect(getDocumentElement(_)).left+R}function getHTMLOffset(_,T){const R=_.getBoundingClientRect(),P=R.left+T.scrollLeft-getWindowScrollBarX(_,R),O=R.top+T.scrollTop;return{x:P,y:O}}function convertOffsetParentRelativeRectToViewportRelativeRect(_){let{elements:T,rect:R,offsetParent:P,strategy:O}=_;const I=O==="fixed",L=getDocumentElement(P),U=T?isTopLayer(T.floating):!1;if(P===L||U&&I)return R;let G={scrollLeft:0,scrollTop:0},V=createCoords(1);const Z=createCoords(0),Y=isHTMLElement(P);if((Y||!Y&&!I)&&((getNodeName(P)!=="body"||isOverflowElement(L))&&(G=getNodeScroll(P)),isHTMLElement(P))){const J=getBoundingClientRect(P);V=getScale(P),Z.x=J.x+P.clientLeft,Z.y=J.y+P.clientTop}const W=L&&!Y&&!I?getHTMLOffset(L,G):createCoords(0);return{width:R.width*V.x,height:R.height*V.y,x:R.x*V.x-G.scrollLeft*V.x+Z.x+W.x,y:R.y*V.y-G.scrollTop*V.y+Z.y+W.y}}function getClientRects(_){return Array.from(_.getClientRects())}function getDocumentRect(_){const T=getDocumentElement(_),R=getNodeScroll(_),P=_.ownerDocument.body,O=max$1(T.scrollWidth,T.clientWidth,P.scrollWidth,P.clientWidth),I=max$1(T.scrollHeight,T.clientHeight,P.scrollHeight,P.clientHeight);let L=-R.scrollLeft+getWindowScrollBarX(_);const U=-R.scrollTop;return getComputedStyle$1(P).direction==="rtl"&&(L+=max$1(T.clientWidth,P.clientWidth)-O),{width:O,height:I,x:L,y:U}}const SCROLLBAR_MAX=25;function getViewportRect(_,T){const R=getWindow(_),P=getDocumentElement(_),O=R.visualViewport;let I=P.clientWidth,L=P.clientHeight,U=0,G=0;if(O){I=O.width,L=O.height;const Z=isWebKit();(!Z||Z&&T==="fixed")&&(U=O.offsetLeft,G=O.offsetTop)}const V=getWindowScrollBarX(P);if(V<=0){const Z=P.ownerDocument,Y=Z.body,W=getComputedStyle(Y),J=Z.compatMode==="CSS1Compat"&&parseFloat(W.marginLeft)+parseFloat(W.marginRight)||0,ee=Math.abs(P.clientWidth-Y.clientWidth-J);ee<=SCROLLBAR_MAX&&(I-=ee)}else V<=SCROLLBAR_MAX&&(I+=V);return{width:I,height:L,x:U,y:G}}const absoluteOrFixed=new Set(["absolute","fixed"]);function getInnerBoundingClientRect(_,T){const R=getBoundingClientRect(_,!0,T==="fixed"),P=R.top+_.clientTop,O=R.left+_.clientLeft,I=isHTMLElement(_)?getScale(_):createCoords(1),L=_.clientWidth*I.x,U=_.clientHeight*I.y,G=O*I.x,V=P*I.y;return{width:L,height:U,x:G,y:V}}function getClientRectFromClippingAncestor(_,T,R){let P;if(T==="viewport")P=getViewportRect(_,R);else if(T==="document")P=getDocumentRect(getDocumentElement(_));else if(isElement(T))P=getInnerBoundingClientRect(T,R);else{const O=getVisualOffsets(_);P={x:T.x-O.x,y:T.y-O.y,width:T.width,height:T.height}}return rectToClientRect(P)}function hasFixedPositionAncestor(_,T){const R=getParentNode(_);return R===T||!isElement(R)||isLastTraversableNode(R)?!1:getComputedStyle$1(R).position==="fixed"||hasFixedPositionAncestor(R,T)}function getClippingElementAncestors(_,T){const R=T.get(_);if(R)return R;let P=getOverflowAncestors(_,[],!1).filter(U=>isElement(U)&&getNodeName(U)!=="body"),O=null;const I=getComputedStyle$1(_).position==="fixed";let L=I?getParentNode(_):_;for(;isElement(L)&&!isLastTraversableNode(L);){const U=getComputedStyle$1(L),G=isContainingBlock(L);!G&&U.position==="fixed"&&(O=null),(I?!G&&!O:!G&&U.position==="static"&&!!O&&absoluteOrFixed.has(O.position)||isOverflowElement(L)&&!G&&hasFixedPositionAncestor(_,L))?P=P.filter(Z=>Z!==L):O=U,L=getParentNode(L)}return T.set(_,P),P}function getClippingRect(_){let{element:T,boundary:R,rootBoundary:P,strategy:O}=_;const L=[...R==="clippingAncestors"?isTopLayer(T)?[]:getClippingElementAncestors(T,this._c):[].concat(R),P],U=L[0],G=L.reduce((V,Z)=>{const Y=getClientRectFromClippingAncestor(T,Z,O);return V.top=max$1(Y.top,V.top),V.right=min$2(Y.right,V.right),V.bottom=min$2(Y.bottom,V.bottom),V.left=max$1(Y.left,V.left),V},getClientRectFromClippingAncestor(T,U,O));return{width:G.right-G.left,height:G.bottom-G.top,x:G.left,y:G.top}}function getDimensions(_){const{width:T,height:R}=getCssDimensions(_);return{width:T,height:R}}function getRectRelativeToOffsetParent(_,T,R){const P=isHTMLElement(T),O=getDocumentElement(T),I=R==="fixed",L=getBoundingClientRect(_,!0,I,T);let U={scrollLeft:0,scrollTop:0};const G=createCoords(0);function V(){G.x=getWindowScrollBarX(O)}if(P||!P&&!I)if((getNodeName(T)!=="body"||isOverflowElement(O))&&(U=getNodeScroll(T)),P){const J=getBoundingClientRect(T,!0,I,T);G.x=J.x+T.clientLeft,G.y=J.y+T.clientTop}else O&&V();I&&!P&&O&&V();const Z=O&&!P&&!I?getHTMLOffset(O,U):createCoords(0),Y=L.left+U.scrollLeft-G.x-Z.x,W=L.top+U.scrollTop-G.y-Z.y;return{x:Y,y:W,width:L.width,height:L.height}}function isStaticPositioned(_){return getComputedStyle$1(_).position==="static"}function getTrueOffsetParent(_,T){if(!isHTMLElement(_)||getComputedStyle$1(_).position==="fixed")return null;if(T)return T(_);let R=_.offsetParent;return getDocumentElement(_)===R&&(R=R.ownerDocument.body),R}function getOffsetParent(_,T){const R=getWindow(_);if(isTopLayer(_))return R;if(!isHTMLElement(_)){let O=getParentNode(_);for(;O&&!isLastTraversableNode(O);){if(isElement(O)&&!isStaticPositioned(O))return O;O=getParentNode(O)}return R}let P=getTrueOffsetParent(_,T);for(;P&&isTableElement(P)&&isStaticPositioned(P);)P=getTrueOffsetParent(P,T);return P&&isLastTraversableNode(P)&&isStaticPositioned(P)&&!isContainingBlock(P)?R:P||getContainingBlock(_)||R}const getElementRects=async function(_){const T=this.getOffsetParent||getOffsetParent,R=this.getDimensions,P=await R(_.floating);return{reference:getRectRelativeToOffsetParent(_.reference,await T(_.floating),_.strategy),floating:{x:0,y:0,width:P.width,height:P.height}}};function isRTL(_){return getComputedStyle$1(_).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function rectsAreEqual(_,T){return _.x===T.x&&_.y===T.y&&_.width===T.width&&_.height===T.height}function observeMove(_,T){let R=null,P;const O=getDocumentElement(_);function I(){var U;clearTimeout(P),(U=R)==null||U.disconnect(),R=null}function L(U,G){U===void 0&&(U=!1),G===void 0&&(G=1),I();const V=_.getBoundingClientRect(),{left:Z,top:Y,width:W,height:J}=V;if(U||T(),!W||!J)return;const ee=floor(Y),te=floor(O.clientWidth-(Z+W)),ie=floor(O.clientHeight-(Y+J)),oe=floor(Z),ce={rootMargin:-ee+"px "+-te+"px "+-ie+"px "+-oe+"px",threshold:max$1(0,min$2(1,G))||1};let le=!0;function he(me){const fe=me[0].intersectionRatio;if(fe!==G){if(!le)return L();fe?L(!1,fe):P=setTimeout(()=>{L(!1,1e-7)},1e3)}fe===1&&!rectsAreEqual(V,_.getBoundingClientRect())&&L(),le=!1}try{R=new IntersectionObserver(he,{...ce,root:O.ownerDocument})}catch{R=new IntersectionObserver(he,ce)}R.observe(_)}return L(!0),I}function autoUpdate(_,T,R,P){P===void 0&&(P={});const{ancestorScroll:O=!0,ancestorResize:I=!0,elementResize:L=typeof ResizeObserver=="function",layoutShift:U=typeof IntersectionObserver=="function",animationFrame:G=!1}=P,V=unwrapElement(_),Z=O||I?[...V?getOverflowAncestors(V):[],...getOverflowAncestors(T)]:[];Z.forEach(oe=>{O&&oe.addEventListener("scroll",R,{passive:!0}),I&&oe.addEventListener("resize",R)});const Y=V&&U?observeMove(V,R):null;let W=-1,J=null;L&&(J=new ResizeObserver(oe=>{let[ae]=oe;ae&&ae.target===V&&J&&(J.unobserve(T),cancelAnimationFrame(W),W=requestAnimationFrame(()=>{var ce;(ce=J)==null||ce.observe(T)})),R()}),V&&!G&&J.observe(V),J.observe(T));let ee,te=G?getBoundingClientRect(_):null;G&&ie();function ie(){const oe=getBoundingClientRect(_);te&&!rectsAreEqual(te,oe)&&R(),te=oe,ee=requestAnimationFrame(ie)}return R(),()=>{var oe;Z.forEach(ae=>{O&&ae.removeEventListener("scroll",R),I&&ae.removeEventListener("resize",R)}),Y?.(),(oe=J)==null||oe.disconnect(),J=null,G&&cancelAnimationFrame(ee)}}const offset$2=offset$3,shift$1=shift$2,flip$2=flip$3,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(_,T,R)=>{const P=new Map,O={platform,...R},I={...O.platform,_c:P};return computePosition$1(_,T,{...O,platform:I})};var isClient=typeof document<"u",noop$3=function(){},index=isClient?reactExports.useLayoutEffect:noop$3;function deepEqual(_,T){if(_===T)return!0;if(typeof _!=typeof T)return!1;if(typeof _=="function"&&_.toString()===T.toString())return!0;let R,P,O;if(_&&T&&typeof _=="object"){if(Array.isArray(_)){if(R=_.length,R!==T.length)return!1;for(P=R;P--!==0;)if(!deepEqual(_[P],T[P]))return!1;return!0}if(O=Object.keys(_),R=O.length,R!==Object.keys(T).length)return!1;for(P=R;P--!==0;)if(!{}.hasOwnProperty.call(T,O[P]))return!1;for(P=R;P--!==0;){const I=O[P];if(!(I==="_owner"&&_.$$typeof)&&!deepEqual(_[I],T[I]))return!1}return!0}return _!==_&&T!==T}function getDPR(_){return typeof window>"u"?1:(_.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(_,T){const R=getDPR(_);return Math.round(T*R)/R}function useLatestRef(_){const T=reactExports.useRef(_);return index(()=>{T.current=_}),T}function useFloating(_){_===void 0&&(_={});const{placement:T="bottom",strategy:R="absolute",middleware:P=[],platform:O,elements:{reference:I,floating:L}={},transform:U=!0,whileElementsMounted:G,open:V}=_,[Z,Y]=reactExports.useState({x:0,y:0,strategy:R,placement:T,middlewareData:{},isPositioned:!1}),[W,J]=reactExports.useState(P);deepEqual(W,P)||J(P);const[ee,te]=reactExports.useState(null),[ie,oe]=reactExports.useState(null),ae=reactExports.useCallback(Te=>{Te!==me.current&&(me.current=Te,te(Te))},[]),ce=reactExports.useCallback(Te=>{Te!==fe.current&&(fe.current=Te,oe(Te))},[]),le=I||ee,he=L||ie,me=reactExports.useRef(null),fe=reactExports.useRef(null),ue=reactExports.useRef(Z),pe=G!=null,ge=useLatestRef(G),_e=useLatestRef(O),we=useLatestRef(V),be=reactExports.useCallback(()=>{if(!me.current||!fe.current)return;const Te={placement:T,strategy:R,middleware:W};_e.current&&(Te.platform=_e.current),computePosition(me.current,fe.current,Te).then(Ae=>{const Be={...Ae,isPositioned:we.current!==!1};Ce.current&&!deepEqual(ue.current,Be)&&(ue.current=Be,reactDomExports.flushSync(()=>{Y(Be)}))})},[W,T,R,_e,we]);index(()=>{V===!1&&ue.current.isPositioned&&(ue.current.isPositioned=!1,Y(Te=>({...Te,isPositioned:!1})))},[V]);const Ce=reactExports.useRef(!1);index(()=>(Ce.current=!0,()=>{Ce.current=!1}),[]),index(()=>{if(le&&(me.current=le),he&&(fe.current=he),le&&he){if(ge.current)return ge.current(le,he,be);be()}},[le,he,be,ge,pe]);const Ee=reactExports.useMemo(()=>({reference:me,floating:fe,setReference:ae,setFloating:ce}),[ae,ce]),ye=reactExports.useMemo(()=>({reference:le,floating:he}),[le,he]),Se=reactExports.useMemo(()=>{const Te={position:R,left:0,top:0};if(!ye.floating)return Te;const Ae=roundByDPR(ye.floating,Z.x),Be=roundByDPR(ye.floating,Z.y);return U?{...Te,transform:"translate("+Ae+"px, "+Be+"px)",...getDPR(ye.floating)>=1.5&&{willChange:"transform"}}:{position:R,left:Ae,top:Be}},[R,U,ye.floating,Z.x,Z.y]);return reactExports.useMemo(()=>({...Z,update:be,refs:Ee,elements:ye,floatingStyles:Se}),[Z,be,Ee,ye,Se])}const arrow$1=_=>{function T(R){return{}.hasOwnProperty.call(R,"current")}return{name:"arrow",options:_,fn(R){const{element:P,padding:O}=typeof _=="function"?_(R):_;return P&&T(P)?P.current!=null?arrow$2({element:P.current,padding:O}).fn(R):{}:P?arrow$2({element:P,padding:O}).fn(R):{}}}},offset$1=(_,T)=>({...offset$2(_),options:[_,T]}),shift=(_,T)=>({...shift$1(_),options:[_,T]}),limitShift=(_,T)=>({...limitShift$1(_),options:[_,T]}),flip$1=(_,T)=>({...flip$2(_),options:[_,T]}),size=(_,T)=>({...size$1(_),options:[_,T]}),hide=(_,T)=>({...hide$1(_),options:[_,T]}),arrow=(_,T)=>({...arrow$1(_),options:[_,T]});var NAME$3="Arrow",Arrow$1=reactExports.forwardRef((_,T)=>{const{children:R,width:P=10,height:O=5,...I}=_;return jsxRuntimeExports.jsx(Primitive$2.svg,{...I,ref:T,width:P,height:O,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:_.asChild?R:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$3;var Root$6=Arrow$1,POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope$1(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=_=>{const{__scopePopper:T,children:R}=_,[P,O]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:T,anchor:P,onAnchorChange:O,children:R})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME="PopperAnchor",PopperAnchor=reactExports.forwardRef((_,T)=>{const{__scopePopper:R,virtualRef:P,...O}=_,I=usePopperContext(ANCHOR_NAME,R),L=reactExports.useRef(null),U=useComposedRefs(T,L),G=reactExports.useRef(null);return reactExports.useEffect(()=>{const V=G.current;G.current=P?.current||L.current,V!==G.current&&I.onAnchorChange(G.current)}),P?null:jsxRuntimeExports.jsx(Primitive$2.div,{...O,ref:U})});PopperAnchor.displayName=ANCHOR_NAME;var CONTENT_NAME$4="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$4),PopperContent=reactExports.forwardRef((_,T)=>{const{__scopePopper:R,side:P="bottom",sideOffset:O=0,align:I="center",alignOffset:L=0,arrowPadding:U=0,avoidCollisions:G=!0,collisionBoundary:V=[],collisionPadding:Z=0,sticky:Y="partial",hideWhenDetached:W=!1,updatePositionStrategy:J="optimized",onPlaced:ee,...te}=_,ie=usePopperContext(CONTENT_NAME$4,R),[oe,ae]=reactExports.useState(null),ce=useComposedRefs(T,Oe=>ae(Oe)),[le,he]=reactExports.useState(null),me=useSize(le),fe=me?.width??0,ue=me?.height??0,pe=P+(I!=="center"?"-"+I:""),ge=typeof Z=="number"?Z:{top:0,right:0,bottom:0,left:0,...Z},_e=Array.isArray(V)?V:[V],we=_e.length>0,be={padding:ge,boundary:_e.filter(isNotNull),altBoundary:we},{refs:Ce,floatingStyles:Ee,placement:ye,isPositioned:Se,middlewareData:Te}=useFloating({strategy:"fixed",placement:pe,whileElementsMounted:(...Oe)=>autoUpdate(...Oe,{animationFrame:J==="always"}),elements:{reference:ie.anchor},middleware:[offset$1({mainAxis:O+ue,alignmentAxis:L}),G&&shift({mainAxis:!0,crossAxis:!1,limiter:Y==="partial"?limitShift():void 0,...be}),G&&flip$1({...be}),size({...be,apply:({elements:Oe,rects:Ve,availableWidth:ke,availableHeight:Fe})=>{const{width:He,height:Pe}=Ve.reference,Je=Oe.floating.style;Je.setProperty("--radix-popper-available-width",`${ke}px`),Je.setProperty("--radix-popper-available-height",`${Fe}px`),Je.setProperty("--radix-popper-anchor-width",`${He}px`),Je.setProperty("--radix-popper-anchor-height",`${Pe}px`)}}),le&&arrow({element:le,padding:U}),transformOrigin({arrowWidth:fe,arrowHeight:ue}),W&&hide({strategy:"referenceHidden",...be})]}),[Ae,Be]=getSideAndAlignFromPlacement(ye),ve=useCallbackRef$1(ee);useLayoutEffect2(()=>{Se&&ve?.()},[Se,ve]);const Re=Te.arrow?.x,Me=Te.arrow?.y,ze=Te.arrow?.centerOffset!==0,[qe,We]=reactExports.useState();return useLayoutEffect2(()=>{oe&&We(window.getComputedStyle(oe).zIndex)},[oe]),jsxRuntimeExports.jsx("div",{ref:Ce.setFloating,"data-radix-popper-content-wrapper":"",style:{...Ee,transform:Se?Ee.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:qe,"--radix-popper-transform-origin":[Te.transformOrigin?.x,Te.transformOrigin?.y].join(" "),...Te.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:_.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:R,placedSide:Ae,onArrowChange:he,arrowX:Re,arrowY:Me,shouldHideArrow:ze,children:jsxRuntimeExports.jsx(Primitive$2.div,{"data-side":Ae,"data-align":Be,...te,ref:ce,style:{...te.style,animation:Se?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$4;var ARROW_NAME$1="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function(T,R){const{__scopePopper:P,...O}=T,I=useContentContext(ARROW_NAME$1,P),L=OPPOSITE_SIDE[I.placedSide];return jsxRuntimeExports.jsx("span",{ref:I.onArrowChange,style:{position:"absolute",left:I.arrowX,top:I.arrowY,[L]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[I.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[I.placedSide],visibility:I.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$6,{...O,ref:R,style:{...O.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$1;function isNotNull(_){return _!==null}var transformOrigin=_=>({name:"transformOrigin",options:_,fn(T){const{placement:R,rects:P,middlewareData:O}=T,L=O.arrow?.centerOffset!==0,U=L?0:_.arrowWidth,G=L?0:_.arrowHeight,[V,Z]=getSideAndAlignFromPlacement(R),Y={start:"0%",center:"50%",end:"100%"}[Z],W=(O.arrow?.x??0)+U/2,J=(O.arrow?.y??0)+G/2;let ee="",te="";return V==="bottom"?(ee=L?Y:`${W}px`,te=`${-G}px`):V==="top"?(ee=L?Y:`${W}px`,te=`${P.floating.height+G}px`):V==="right"?(ee=`${-G}px`,te=L?Y:`${J}px`):V==="left"&&(ee=`${P.floating.width+G}px`,te=L?Y:`${J}px`),{data:{x:ee,y:te}}}});function getSideAndAlignFromPlacement(_){const[T,R="center"]=_.split("-");return[T,R]}var Root2$2=Popper,Anchor=PopperAnchor,Content$2=PopperContent,Arrow=PopperArrow,PORTAL_NAME$1="Portal",Portal$1=reactExports.forwardRef((_,T)=>{const{container:R,...P}=_,[O,I]=reactExports.useState(!1);useLayoutEffect2(()=>I(!0),[]);const L=R||O&&globalThis?.document?.body;return L?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive$2.div,{...P,ref:T}),L):null});Portal$1.displayName=PORTAL_NAME$1;function createSlot(_){const T=createSlotClone(_),R=reactExports.forwardRef((P,O)=>{const{children:I,...L}=P,U=reactExports.Children.toArray(I),G=U.find(isSlottable);if(G){const V=G.props.children,Z=U.map(Y=>Y===G?reactExports.Children.count(V)>1?reactExports.Children.only(null):reactExports.isValidElement(V)?V.props.children:null:Y);return jsxRuntimeExports.jsx(T,{...L,ref:O,children:reactExports.isValidElement(V)?reactExports.cloneElement(V,void 0,Z):null})}return jsxRuntimeExports.jsx(T,{...L,ref:O,children:I})});return R.displayName=`${_}.Slot`,R}function createSlotClone(_){const T=reactExports.forwardRef((R,P)=>{const{children:O,...I}=R;if(reactExports.isValidElement(O)){const L=getElementRef(O),U=mergeProps(I,O.props);return O.type!==reactExports.Fragment&&(U.ref=P?composeRefs(P,L):L),reactExports.cloneElement(O,U)}return reactExports.Children.count(O)>1?reactExports.Children.only(null):null});return T.displayName=`${_}.SlotClone`,T}var SLOTTABLE_IDENTIFIER=Symbol("radix.slottable");function isSlottable(_){return reactExports.isValidElement(_)&&typeof _.type=="function"&&"__radixId"in _.type&&_.type.__radixId===SLOTTABLE_IDENTIFIER}function mergeProps(_,T){const R={...T};for(const P in T){const O=_[P],I=T[P];/^on[A-Z]/.test(P)?O&&I?R[P]=(...U)=>{const G=I(...U);return O(...U),G}:O&&(R[P]=O):P==="style"?R[P]={...O,...I}:P==="className"&&(R[P]=[O,I].filter(Boolean).join(" "))}return{..._,...R}}function getElementRef(_){let T=Object.getOwnPropertyDescriptor(_.props,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning;return R?_.ref:(T=Object.getOwnPropertyDescriptor(_,"ref")?.get,R=T&&"isReactWarning"in T&&T.isReactWarning,R?_.props.ref:_.props.ref||_.ref)}var VISUALLY_HIDDEN_STYLES=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),NAME$2="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((_,T)=>jsxRuntimeExports.jsx(Primitive$2.span,{..._,ref:T,style:{...VISUALLY_HIDDEN_STYLES,..._.style}}));VisuallyHidden.displayName=NAME$2;var getDefaultParent=function(_){if(typeof document>"u")return null;var T=Array.isArray(_)?_[0]:_;return T.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(_){return _&&(_.host||unwrapHost(_.parentNode))},correctTargets=function(_,T){return T.map(function(R){if(_.contains(R))return R;var P=unwrapHost(R);return P&&_.contains(P)?P:(console.error("aria-hidden",R,"in not contained inside",_,". Doing nothing"),null)}).filter(function(R){return!!R})},applyAttributeToOthers=function(_,T,R,P){var O=correctTargets(T,Array.isArray(_)?_:[_]);markerMap[R]||(markerMap[R]=new WeakMap);var I=markerMap[R],L=[],U=new Set,G=new Set(O),V=function(Y){!Y||U.has(Y)||(U.add(Y),V(Y.parentNode))};O.forEach(V);var Z=function(Y){!Y||G.has(Y)||Array.prototype.forEach.call(Y.children,function(W){if(U.has(W))Z(W);else try{var J=W.getAttribute(P),ee=J!==null&&J!=="false",te=(counterMap.get(W)||0)+1,ie=(I.get(W)||0)+1;counterMap.set(W,te),I.set(W,ie),L.push(W),te===1&&ee&&uncontrolledNodes.set(W,!0),ie===1&&W.setAttribute(R,"true"),ee||W.setAttribute(P,"true")}catch(oe){console.error("aria-hidden: cannot operate on ",W,oe)}})};return Z(T),U.clear(),lockCount++,function(){L.forEach(function(Y){var W=counterMap.get(Y)-1,J=I.get(Y)-1;counterMap.set(Y,W),I.set(Y,J),W||(uncontrolledNodes.has(Y)||Y.removeAttribute(P),uncontrolledNodes.delete(Y)),J||Y.removeAttribute(R)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(_,T,R){R===void 0&&(R="data-aria-hidden");var P=Array.from(Array.isArray(_)?_:[_]),O=getDefaultParent(_);return O?(P.push.apply(P,Array.from(O.querySelectorAll("[aria-live], script"))),applyAttributeToOthers(P,O,R,"aria-hidden")):function(){return null}},__assign=function(){return __assign=Object.assign||function(T){for(var R,P=1,O=arguments.length;P<O;P++){R=arguments[P];for(var I in R)Object.prototype.hasOwnProperty.call(R,I)&&(T[I]=R[I])}return T},__assign.apply(this,arguments)};function __rest(_,T){var R={};for(var P in _)Object.prototype.hasOwnProperty.call(_,P)&&T.indexOf(P)<0&&(R[P]=_[P]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var O=0,P=Object.getOwnPropertySymbols(_);O<P.length;O++)T.indexOf(P[O])<0&&Object.prototype.propertyIsEnumerable.call(_,P[O])&&(R[P[O]]=_[P[O]]);return R}function __spreadArray(_,T,R){if(R||arguments.length===2)for(var P=0,O=T.length,I;P<O;P++)(I||!(P in T))&&(I||(I=Array.prototype.slice.call(T,0,P)),I[P]=T[P]);return _.concat(I||Array.prototype.slice.call(T))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(_,T){return typeof _=="function"?_(T):_&&(_.current=T),_}function useCallbackRef(_,T){var R=reactExports.useState(function(){return{value:_,callback:T,facade:{get current(){return R.value},set current(P){var O=R.value;O!==P&&(R.value=P,R.callback(P,O))}}}})[0];return R.callback=T,R.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(_,T){var R=useCallbackRef(null,function(P){return _.forEach(function(O){return assignRef(O,P)})});return useIsomorphicLayoutEffect(function(){var P=currentValues.get(R);if(P){var O=new Set(P),I=new Set(_),L=R.current;O.forEach(function(U){I.has(U)||assignRef(U,null)}),I.forEach(function(U){O.has(U)||assignRef(U,L)})}currentValues.set(R,_)},[_]),R}function ItoI(_){return _}function innerCreateMedium(_,T){T===void 0&&(T=ItoI);var R=[],P=!1,O={read:function(){if(P)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return R.length?R[R.length-1]:_},useMedium:function(I){var L=T(I,P);return R.push(L),function(){R=R.filter(function(U){return U!==L})}},assignSyncMedium:function(I){for(P=!0;R.length;){var L=R;R=[],L.forEach(I)}R={push:function(U){return I(U)},filter:function(){return R}}},assignMedium:function(I){P=!0;var L=[];if(R.length){var U=R;R=[],U.forEach(I),L=R}var G=function(){var Z=L;L=[],Z.forEach(I)},V=function(){return Promise.resolve().then(G)};V(),R={push:function(Z){L.push(Z),V()},filter:function(Z){return L=L.filter(Z),R}}}};return O}function createSidecarMedium(_){_===void 0&&(_={});var T=innerCreateMedium(null);return T.options=__assign({async:!0,ssr:!1},_),T}var SideCar$1=function(_){var T=_.sideCar,R=__rest(_,["sideCar"]);if(!T)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var P=T.read();if(!P)throw new Error("Sidecar medium not found");return reactExports.createElement(P,__assign({},R))};SideCar$1.isSideCarExport=!0;function exportSidecar(_,T){return _.useMedium(T),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(_,T){var R=reactExports.useRef(null),P=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),O=P[0],I=P[1],L=_.forwardProps,U=_.children,G=_.className,V=_.removeScrollBar,Z=_.enabled,Y=_.shards,W=_.sideCar,J=_.noRelative,ee=_.noIsolation,te=_.inert,ie=_.allowPinchZoom,oe=_.as,ae=oe===void 0?"div":oe,ce=_.gapMode,le=__rest(_,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),he=W,me=useMergeRefs([R,T]),fe=__assign(__assign({},le),O);return reactExports.createElement(reactExports.Fragment,null,Z&&reactExports.createElement(he,{sideCar:effectCar,removeScrollBar:V,shards:Y,noRelative:J,noIsolation:ee,inert:te,setCallbacks:I,allowPinchZoom:!!ie,lockRef:R,gapMode:ce}),L?reactExports.cloneElement(reactExports.Children.only(U),__assign(__assign({},fe),{ref:me})):reactExports.createElement(ae,__assign({},fe,{className:G,ref:me}),U))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var _=document.createElement("style");_.type="text/css";var T=getNonce();return T&&_.setAttribute("nonce",T),_}function injectStyles(_,T){_.styleSheet?_.styleSheet.cssText=T:_.appendChild(document.createTextNode(T))}function insertStyleTag(_){var T=document.head||document.getElementsByTagName("head")[0];T.appendChild(_)}var stylesheetSingleton=function(){var _=0,T=null;return{add:function(R){_==0&&(T=makeStyleTag())&&(injectStyles(T,R),insertStyleTag(T)),_++},remove:function(){_--,!_&&T&&(T.parentNode&&T.parentNode.removeChild(T),T=null)}}},styleHookSingleton=function(){var _=stylesheetSingleton();return function(T,R){reactExports.useEffect(function(){return _.add(T),function(){_.remove()}},[T&&R])}},styleSingleton=function(){var _=styleHookSingleton(),T=function(R){var P=R.styles,O=R.dynamic;return _(P,O),null};return T},zeroGap={left:0,top:0,right:0,gap:0},parse$3=function(_){return parseInt(_||"",10)||0},getOffset=function(_){var T=window.getComputedStyle(document.body),R=T[_==="padding"?"paddingLeft":"marginLeft"],P=T[_==="padding"?"paddingTop":"marginTop"],O=T[_==="padding"?"paddingRight":"marginRight"];return[parse$3(R),parse$3(P),parse$3(O)]},getGapWidth=function(_){if(_===void 0&&(_="margin"),typeof window>"u")return zeroGap;var T=getOffset(_),R=document.documentElement.clientWidth,P=window.innerWidth;return{left:T[0],top:T[1],right:T[2],gap:Math.max(0,P-R+T[2]-T[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(_,T,R,P){var O=_.left,I=_.top,L=_.right,U=_.gap;return R===void 0&&(R="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(P,`;
   padding-right: `).concat(U,"px ").concat(P,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(P,`;
    overscroll-behavior: contain;
    `).concat([T&&"position: relative ".concat(P,";"),R==="margin"&&`
    padding-left: `.concat(O,`px;
    padding-top: `).concat(I,`px;
    padding-right: `).concat(L,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(U,"px ").concat(P,`;
    `),R==="padding"&&"padding-right: ".concat(U,"px ").concat(P,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(U,"px ").concat(P,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(U,"px ").concat(P,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(P,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(P,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(U,`px;
  }
`)},getCurrentUseCounter=function(){var _=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(_)?_:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var _=getCurrentUseCounter()-1;_<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,_.toString())}},[])},RemoveScrollBar=function(_){var T=_.noRelative,R=_.noImportant,P=_.gapMode,O=P===void 0?"margin":P;useLockAttribute();var I=reactExports.useMemo(function(){return getGapWidth(O)},[O]);return reactExports.createElement(Style,{styles:getStyles(I,!T,O,R?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(_){return _.tagName==="TEXTAREA"},elementCanBeScrolled=function(_,T){if(!(_ instanceof Element))return!1;var R=window.getComputedStyle(_);return R[T]!=="hidden"&&!(R.overflowY===R.overflowX&&!alwaysContainsScroll(_)&&R[T]==="visible")},elementCouldBeVScrolled=function(_){return elementCanBeScrolled(_,"overflowY")},elementCouldBeHScrolled=function(_){return elementCanBeScrolled(_,"overflowX")},locationCouldBeScrolled=function(_,T){var R=T.ownerDocument,P=T;do{typeof ShadowRoot<"u"&&P instanceof ShadowRoot&&(P=P.host);var O=elementCouldBeScrolled(_,P);if(O){var I=getScrollVariables(_,P),L=I[1],U=I[2];if(L>U)return!0}P=P.parentNode}while(P&&P!==R.body);return!1},getVScrollVariables=function(_){var T=_.scrollTop,R=_.scrollHeight,P=_.clientHeight;return[T,R,P]},getHScrollVariables=function(_){var T=_.scrollLeft,R=_.scrollWidth,P=_.clientWidth;return[T,R,P]},elementCouldBeScrolled=function(_,T){return _==="v"?elementCouldBeVScrolled(T):elementCouldBeHScrolled(T)},getScrollVariables=function(_,T){return _==="v"?getVScrollVariables(T):getHScrollVariables(T)},getDirectionFactor=function(_,T){return _==="h"&&T==="rtl"?-1:1},handleScroll=function(_,T,R,P,O){var I=getDirectionFactor(_,window.getComputedStyle(T).direction),L=I*P,U=R.target,G=T.contains(U),V=!1,Z=L>0,Y=0,W=0;do{if(!U)break;var J=getScrollVariables(_,U),ee=J[0],te=J[1],ie=J[2],oe=te-ie-I*ee;(ee||oe)&&elementCouldBeScrolled(_,U)&&(Y+=oe,W+=ee);var ae=U.parentNode;U=ae&&ae.nodeType===Node.DOCUMENT_FRAGMENT_NODE?ae.host:ae}while(!G&&U!==document.body||G&&(T.contains(U)||T===U));return(Z&&Math.abs(Y)<1||!Z&&Math.abs(W)<1)&&(V=!0),V},getTouchXY=function(_){return"changedTouches"in _?[_.changedTouches[0].clientX,_.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(_){return[_.deltaX,_.deltaY]},extractRef=function(_){return _&&"current"in _?_.current:_},deltaCompare=function(_,T){return _[0]===T[0]&&_[1]===T[1]},generateStyle=function(_){return`
  .block-interactivity-`.concat(_,` {pointer-events: none;}
  .allow-interactivity-`).concat(_,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(_){var T=reactExports.useRef([]),R=reactExports.useRef([0,0]),P=reactExports.useRef(),O=reactExports.useState(idCounter++)[0],I=reactExports.useState(styleSingleton)[0],L=reactExports.useRef(_);reactExports.useEffect(function(){L.current=_},[_]),reactExports.useEffect(function(){if(_.inert){document.body.classList.add("block-interactivity-".concat(O));var te=__spreadArray([_.lockRef.current],(_.shards||[]).map(extractRef),!0).filter(Boolean);return te.forEach(function(ie){return ie.classList.add("allow-interactivity-".concat(O))}),function(){document.body.classList.remove("block-interactivity-".concat(O)),te.forEach(function(ie){return ie.classList.remove("allow-interactivity-".concat(O))})}}},[_.inert,_.lockRef.current,_.shards]);var U=reactExports.useCallback(function(te,ie){if("touches"in te&&te.touches.length===2||te.type==="wheel"&&te.ctrlKey)return!L.current.allowPinchZoom;var oe=getTouchXY(te),ae=R.current,ce="deltaX"in te?te.deltaX:ae[0]-oe[0],le="deltaY"in te?te.deltaY:ae[1]-oe[1],he,me=te.target,fe=Math.abs(ce)>Math.abs(le)?"h":"v";if("touches"in te&&fe==="h"&&me.type==="range")return!1;var ue=window.getSelection(),pe=ue&&ue.anchorNode,ge=pe?pe===me||pe.contains(me):!1;if(ge)return!1;var _e=locationCouldBeScrolled(fe,me);if(!_e)return!0;if(_e?he=fe:(he=fe==="v"?"h":"v",_e=locationCouldBeScrolled(fe,me)),!_e)return!1;if(!P.current&&"changedTouches"in te&&(ce||le)&&(P.current=he),!he)return!0;var we=P.current||he;return handleScroll(we,ie,te,we==="h"?ce:le)},[]),G=reactExports.useCallback(function(te){var ie=te;if(!(!lockStack.length||lockStack[lockStack.length-1]!==I)){var oe="deltaY"in ie?getDeltaXY(ie):getTouchXY(ie),ae=T.current.filter(function(he){return he.name===ie.type&&(he.target===ie.target||ie.target===he.shadowParent)&&deltaCompare(he.delta,oe)})[0];if(ae&&ae.should){ie.cancelable&&ie.preventDefault();return}if(!ae){var ce=(L.current.shards||[]).map(extractRef).filter(Boolean).filter(function(he){return he.contains(ie.target)}),le=ce.length>0?U(ie,ce[0]):!L.current.noIsolation;le&&ie.cancelable&&ie.preventDefault()}}},[]),V=reactExports.useCallback(function(te,ie,oe,ae){var ce={name:te,delta:ie,target:oe,should:ae,shadowParent:getOutermostShadowParent(oe)};T.current.push(ce),setTimeout(function(){T.current=T.current.filter(function(le){return le!==ce})},1)},[]),Z=reactExports.useCallback(function(te){R.current=getTouchXY(te),P.current=void 0},[]),Y=reactExports.useCallback(function(te){V(te.type,getDeltaXY(te),te.target,U(te,_.lockRef.current))},[]),W=reactExports.useCallback(function(te){V(te.type,getTouchXY(te),te.target,U(te,_.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(I),_.setCallbacks({onScrollCapture:Y,onWheelCapture:Y,onTouchMoveCapture:W}),document.addEventListener("wheel",G,nonPassive),document.addEventListener("touchmove",G,nonPassive),document.addEventListener("touchstart",Z,nonPassive),function(){lockStack=lockStack.filter(function(te){return te!==I}),document.removeEventListener("wheel",G,nonPassive),document.removeEventListener("touchmove",G,nonPassive),document.removeEventListener("touchstart",Z,nonPassive)}},[]);var J=_.removeScrollBar,ee=_.inert;return reactExports.createElement(reactExports.Fragment,null,ee?reactExports.createElement(I,{styles:generateStyle(O)}):null,J?reactExports.createElement(RemoveScrollBar,{noRelative:_.noRelative,gapMode:_.gapMode}):null)}function getOutermostShadowParent(_){for(var T=null;_!==null;)_ instanceof ShadowRoot&&(T=_.host,_=_.host),_=_.parentNode;return T}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(_,T){return reactExports.createElement(RemoveScroll,__assign({},_,{ref:T,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection$3,useCollection$3,createCollectionScope$3]=createCollection(SELECT_NAME),[createSelectContext]=createContextScope$1(SELECT_NAME,[createCollectionScope$3,createPopperScope]),usePopperScope=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$1=_=>{const{__scopeSelect:T,children:R,open:P,defaultOpen:O,onOpenChange:I,value:L,defaultValue:U,onValueChange:G,dir:V,name:Z,autoComplete:Y,disabled:W,required:J,form:ee}=_,te=usePopperScope(T),[ie,oe]=reactExports.useState(null),[ae,ce]=reactExports.useState(null),[le,he]=reactExports.useState(!1),me=useDirection(V),[fe,ue]=useControllableState({prop:P,defaultProp:O??!1,onChange:I,caller:SELECT_NAME}),[pe,ge]=useControllableState({prop:L,defaultProp:U,onChange:G,caller:SELECT_NAME}),_e=reactExports.useRef(null),we=ie?ee||!!ie.closest("form"):!0,[be,Ce]=reactExports.useState(new Set),Ee=Array.from(be).map(ye=>ye.props.value).join(";");return jsxRuntimeExports.jsx(Root2$2,{...te,children:jsxRuntimeExports.jsxs(SelectProvider,{required:J,scope:T,trigger:ie,onTriggerChange:oe,valueNode:ae,onValueNodeChange:ce,valueNodeHasChildren:le,onValueNodeHasChildrenChange:he,contentId:useId(),value:pe,onValueChange:ge,open:fe,onOpenChange:ue,dir:me,triggerPointerDownPosRef:_e,disabled:W,children:[jsxRuntimeExports.jsx(Collection$3.Provider,{scope:T,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:_.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(ye=>{Ce(Se=>new Set(Se).add(ye))},[]),onNativeOptionRemove:reactExports.useCallback(ye=>{Ce(Se=>{const Te=new Set(Se);return Te.delete(ye),Te})},[]),children:R})}),we?jsxRuntimeExports.jsxs(SelectBubbleInput,{"aria-hidden":!0,required:J,tabIndex:-1,name:Z,autoComplete:Y,value:pe,onChange:ye=>ge(ye.target.value),disabled:W,form:ee,children:[pe===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(be)]},Ee):null]})})};Select$1.displayName=SELECT_NAME;var TRIGGER_NAME$3="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,disabled:P=!1,...O}=_,I=usePopperScope(R),L=useSelectContext(TRIGGER_NAME$3,R),U=L.disabled||P,G=useComposedRefs(T,L.onTriggerChange),V=useCollection$3(R),Z=reactExports.useRef("touch"),[Y,W,J]=useTypeaheadSearch(te=>{const ie=V().filter(ce=>!ce.disabled),oe=ie.find(ce=>ce.value===L.value),ae=findNextItem(ie,te,oe);ae!==void 0&&L.onValueChange(ae.value)}),ee=te=>{U||(L.onOpenChange(!0),J()),te&&(L.triggerPointerDownPosRef.current={x:Math.round(te.pageX),y:Math.round(te.pageY)})};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...I,children:jsxRuntimeExports.jsx(Primitive$2.button,{type:"button",role:"combobox","aria-controls":L.contentId,"aria-expanded":L.open,"aria-required":L.required,"aria-autocomplete":"none",dir:L.dir,"data-state":L.open?"open":"closed",disabled:U,"data-disabled":U?"":void 0,"data-placeholder":shouldShowPlaceholder(L.value)?"":void 0,...O,ref:G,onClick:composeEventHandlers(O.onClick,te=>{te.currentTarget.focus(),Z.current!=="mouse"&&ee(te)}),onPointerDown:composeEventHandlers(O.onPointerDown,te=>{Z.current=te.pointerType;const ie=te.target;ie.hasPointerCapture(te.pointerId)&&ie.releasePointerCapture(te.pointerId),te.button===0&&te.ctrlKey===!1&&te.pointerType==="mouse"&&(ee(te),te.preventDefault())}),onKeyDown:composeEventHandlers(O.onKeyDown,te=>{const ie=Y.current!=="";!(te.ctrlKey||te.altKey||te.metaKey)&&te.key.length===1&&W(te.key),!(ie&&te.key===" ")&&OPEN_KEYS.includes(te.key)&&(ee(),te.preventDefault())})})})});SelectTrigger$1.displayName=TRIGGER_NAME$3;var VALUE_NAME="SelectValue",SelectValue$1=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,className:P,style:O,children:I,placeholder:L="",...U}=_,G=useSelectContext(VALUE_NAME,R),{onValueNodeHasChildrenChange:V}=G,Z=I!==void 0,Y=useComposedRefs(T,G.onValueNodeChange);return useLayoutEffect2(()=>{V(Z)},[V,Z]),jsxRuntimeExports.jsx(Primitive$2.span,{...U,ref:Y,style:{pointerEvents:"none"},children:shouldShowPlaceholder(G.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:L}):I})});SelectValue$1.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,children:P,...O}=_;return jsxRuntimeExports.jsx(Primitive$2.span,{"aria-hidden":!0,...O,ref:T,children:P||""})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME="SelectPortal",SelectPortal=_=>jsxRuntimeExports.jsx(Portal$1,{asChild:!0,..._});SelectPortal.displayName=PORTAL_NAME;var CONTENT_NAME$3="SelectContent",SelectContent$1=reactExports.forwardRef((_,T)=>{const R=useSelectContext(CONTENT_NAME$3,_.__scopeSelect),[P,O]=reactExports.useState();if(useLayoutEffect2(()=>{O(new DocumentFragment)},[]),!R.open){const I=P;return I?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:_.__scopeSelect,children:jsxRuntimeExports.jsx(Collection$3.Slot,{scope:_.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:_.children})})}),I):null}return jsxRuntimeExports.jsx(SelectContentImpl,{..._,ref:T})});SelectContent$1.displayName=CONTENT_NAME$3;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME$3),CONTENT_IMPL_NAME="SelectContentImpl",Slot=createSlot("SelectContent.RemoveScroll"),SelectContentImpl=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,position:P="item-aligned",onCloseAutoFocus:O,onEscapeKeyDown:I,onPointerDownOutside:L,side:U,sideOffset:G,align:V,alignOffset:Z,arrowPadding:Y,collisionBoundary:W,collisionPadding:J,sticky:ee,hideWhenDetached:te,avoidCollisions:ie,...oe}=_,ae=useSelectContext(CONTENT_NAME$3,R),[ce,le]=reactExports.useState(null),[he,me]=reactExports.useState(null),fe=useComposedRefs(T,Oe=>le(Oe)),[ue,pe]=reactExports.useState(null),[ge,_e]=reactExports.useState(null),we=useCollection$3(R),[be,Ce]=reactExports.useState(!1),Ee=reactExports.useRef(!1);reactExports.useEffect(()=>{if(ce)return hideOthers(ce)},[ce]),useFocusGuards();const ye=reactExports.useCallback(Oe=>{const[Ve,...ke]=we().map(Pe=>Pe.ref.current),[Fe]=ke.slice(-1),He=document.activeElement;for(const Pe of Oe)if(Pe===He||(Pe?.scrollIntoView({block:"nearest"}),Pe===Ve&&he&&(he.scrollTop=0),Pe===Fe&&he&&(he.scrollTop=he.scrollHeight),Pe?.focus(),document.activeElement!==He))return},[we,he]),Se=reactExports.useCallback(()=>ye([ue,ce]),[ye,ue,ce]);reactExports.useEffect(()=>{be&&Se()},[be,Se]);const{onOpenChange:Te,triggerPointerDownPosRef:Ae}=ae;reactExports.useEffect(()=>{if(ce){let Oe={x:0,y:0};const Ve=Fe=>{Oe={x:Math.abs(Math.round(Fe.pageX)-(Ae.current?.x??0)),y:Math.abs(Math.round(Fe.pageY)-(Ae.current?.y??0))}},ke=Fe=>{Oe.x<=10&&Oe.y<=10?Fe.preventDefault():ce.contains(Fe.target)||Te(!1),document.removeEventListener("pointermove",Ve),Ae.current=null};return Ae.current!==null&&(document.addEventListener("pointermove",Ve),document.addEventListener("pointerup",ke,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ve),document.removeEventListener("pointerup",ke,{capture:!0})}}},[ce,Te,Ae]),reactExports.useEffect(()=>{const Oe=()=>Te(!1);return window.addEventListener("blur",Oe),window.addEventListener("resize",Oe),()=>{window.removeEventListener("blur",Oe),window.removeEventListener("resize",Oe)}},[Te]);const[Be,ve]=useTypeaheadSearch(Oe=>{const Ve=we().filter(He=>!He.disabled),ke=Ve.find(He=>He.ref.current===document.activeElement),Fe=findNextItem(Ve,Oe,ke);Fe&&setTimeout(()=>Fe.ref.current.focus())}),Re=reactExports.useCallback((Oe,Ve,ke)=>{const Fe=!Ee.current&&!ke;(ae.value!==void 0&&ae.value===Ve||Fe)&&(pe(Oe),Fe&&(Ee.current=!0))},[ae.value]),Me=reactExports.useCallback(()=>ce?.focus(),[ce]),ze=reactExports.useCallback((Oe,Ve,ke)=>{const Fe=!Ee.current&&!ke;(ae.value!==void 0&&ae.value===Ve||Fe)&&_e(Oe)},[ae.value]),qe=P==="popper"?SelectPopperPosition:SelectItemAlignedPosition,We=qe===SelectPopperPosition?{side:U,sideOffset:G,align:V,alignOffset:Z,arrowPadding:Y,collisionBoundary:W,collisionPadding:J,sticky:ee,hideWhenDetached:te,avoidCollisions:ie}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:R,content:ce,viewport:he,onViewportChange:me,itemRefCallback:Re,selectedItem:ue,onItemLeave:Me,itemTextRefCallback:ze,focusSelectedItem:Se,selectedItemText:ge,position:P,isPositioned:be,searchRef:Be,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:ae.open,onMountAutoFocus:Oe=>{Oe.preventDefault()},onUnmountAutoFocus:composeEventHandlers(O,Oe=>{ae.trigger?.focus({preventScroll:!0}),Oe.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:I,onPointerDownOutside:L,onFocusOutside:Oe=>Oe.preventDefault(),onDismiss:()=>ae.onOpenChange(!1),children:jsxRuntimeExports.jsx(qe,{role:"listbox",id:ae.contentId,"data-state":ae.open?"open":"closed",dir:ae.dir,onContextMenu:Oe=>Oe.preventDefault(),...oe,...We,onPlaced:()=>Ce(!0),ref:fe,style:{display:"flex",flexDirection:"column",outline:"none",...oe.style},onKeyDown:composeEventHandlers(oe.onKeyDown,Oe=>{const Ve=Oe.ctrlKey||Oe.altKey||Oe.metaKey;if(Oe.key==="Tab"&&Oe.preventDefault(),!Ve&&Oe.key.length===1&&ve(Oe.key),["ArrowUp","ArrowDown","Home","End"].includes(Oe.key)){let Fe=we().filter(He=>!He.disabled).map(He=>He.ref.current);if(["ArrowUp","End"].includes(Oe.key)&&(Fe=Fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Oe.key)){const He=Oe.target,Pe=Fe.indexOf(He);Fe=Fe.slice(Pe+1)}setTimeout(()=>ye(Fe)),Oe.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,onPlaced:P,...O}=_,I=useSelectContext(CONTENT_NAME$3,R),L=useSelectContentContext(CONTENT_NAME$3,R),[U,G]=reactExports.useState(null),[V,Z]=reactExports.useState(null),Y=useComposedRefs(T,fe=>Z(fe)),W=useCollection$3(R),J=reactExports.useRef(!1),ee=reactExports.useRef(!0),{viewport:te,selectedItem:ie,selectedItemText:oe,focusSelectedItem:ae}=L,ce=reactExports.useCallback(()=>{if(I.trigger&&I.valueNode&&U&&V&&te&&ie&&oe){const fe=I.trigger.getBoundingClientRect(),ue=V.getBoundingClientRect(),pe=I.valueNode.getBoundingClientRect(),ge=oe.getBoundingClientRect();if(I.dir!=="rtl"){const He=ge.left-ue.left,Pe=pe.left-He,Je=fe.left-Pe,Ke=fe.width+Je,Ze=Math.max(Ke,ue.width),Qe=window.innerWidth-CONTENT_MARGIN,at=clamp$1(Pe,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,Qe-Ze)]);U.style.minWidth=Ke+"px",U.style.left=at+"px"}else{const He=ue.right-ge.right,Pe=window.innerWidth-pe.right-He,Je=window.innerWidth-fe.right-Pe,Ke=fe.width+Je,Ze=Math.max(Ke,ue.width),Qe=window.innerWidth-CONTENT_MARGIN,at=clamp$1(Pe,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,Qe-Ze)]);U.style.minWidth=Ke+"px",U.style.right=at+"px"}const _e=W(),we=window.innerHeight-CONTENT_MARGIN*2,be=te.scrollHeight,Ce=window.getComputedStyle(V),Ee=parseInt(Ce.borderTopWidth,10),ye=parseInt(Ce.paddingTop,10),Se=parseInt(Ce.borderBottomWidth,10),Te=parseInt(Ce.paddingBottom,10),Ae=Ee+ye+be+Te+Se,Be=Math.min(ie.offsetHeight*5,Ae),ve=window.getComputedStyle(te),Re=parseInt(ve.paddingTop,10),Me=parseInt(ve.paddingBottom,10),ze=fe.top+fe.height/2-CONTENT_MARGIN,qe=we-ze,We=ie.offsetHeight/2,Oe=ie.offsetTop+We,Ve=Ee+ye+Oe,ke=Ae-Ve;if(Ve<=ze){const He=_e.length>0&&ie===_e[_e.length-1].ref.current;U.style.bottom="0px";const Pe=V.clientHeight-te.offsetTop-te.offsetHeight,Je=Math.max(qe,We+(He?Me:0)+Pe+Se),Ke=Ve+Je;U.style.height=Ke+"px"}else{const He=_e.length>0&&ie===_e[0].ref.current;U.style.top="0px";const Je=Math.max(ze,Ee+te.offsetTop+(He?Re:0)+We)+ke;U.style.height=Je+"px",te.scrollTop=Ve-ze+te.offsetTop}U.style.margin=`${CONTENT_MARGIN}px 0`,U.style.minHeight=Be+"px",U.style.maxHeight=we+"px",P?.(),requestAnimationFrame(()=>J.current=!0)}},[W,I.trigger,I.valueNode,U,V,te,ie,oe,I.dir,P]);useLayoutEffect2(()=>ce(),[ce]);const[le,he]=reactExports.useState();useLayoutEffect2(()=>{V&&he(window.getComputedStyle(V).zIndex)},[V]);const me=reactExports.useCallback(fe=>{fe&&ee.current===!0&&(ce(),ae?.(),ee.current=!1)},[ce,ae]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:R,contentWrapper:U,shouldExpandOnScrollRef:J,onScrollButtonChange:me,children:jsxRuntimeExports.jsx("div",{ref:G,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:le},children:jsxRuntimeExports.jsx(Primitive$2.div,{...O,ref:Y,style:{boxSizing:"border-box",maxHeight:"100%",...O.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,align:P="start",collisionPadding:O=CONTENT_MARGIN,...I}=_,L=usePopperScope(R);return jsxRuntimeExports.jsx(Content$2,{...L,...I,ref:T,align:P,collisionPadding:O,style:{boxSizing:"border-box",...I.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME$3,{}),VIEWPORT_NAME$1="SelectViewport",SelectViewport=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,nonce:P,...O}=_,I=useSelectContentContext(VIEWPORT_NAME$1,R),L=useSelectViewportContext(VIEWPORT_NAME$1,R),U=useComposedRefs(T,I.onViewportChange),G=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:P}),jsxRuntimeExports.jsx(Collection$3.Slot,{scope:R,children:jsxRuntimeExports.jsx(Primitive$2.div,{"data-radix-select-viewport":"",role:"presentation",...O,ref:U,style:{position:"relative",flex:1,overflow:"hidden auto",...O.style},onScroll:composeEventHandlers(O.onScroll,V=>{const Z=V.currentTarget,{contentWrapper:Y,shouldExpandOnScrollRef:W}=L;if(W?.current&&Y){const J=Math.abs(G.current-Z.scrollTop);if(J>0){const ee=window.innerHeight-CONTENT_MARGIN*2,te=parseFloat(Y.style.minHeight),ie=parseFloat(Y.style.height),oe=Math.max(te,ie);if(oe<ee){const ae=oe+J,ce=Math.min(ee,ae),le=ae-ce;Y.style.height=ce+"px",Y.style.bottom==="0px"&&(Z.scrollTop=le>0?le:0,Y.style.justifyContent="flex-end")}}}G.current=Z.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME$1;var GROUP_NAME$1="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME$1),SelectGroup=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,...P}=_,O=useId();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:R,id:O,children:jsxRuntimeExports.jsx(Primitive$2.div,{role:"group","aria-labelledby":O,...P,ref:T})})});SelectGroup.displayName=GROUP_NAME$1;var LABEL_NAME="SelectLabel",SelectLabel$1=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,...P}=_,O=useSelectGroupContext(LABEL_NAME,R);return jsxRuntimeExports.jsx(Primitive$2.div,{id:O.id,...P,ref:T})});SelectLabel$1.displayName=LABEL_NAME;var ITEM_NAME$2="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME$2),SelectItem$1=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,value:P,disabled:O=!1,textValue:I,...L}=_,U=useSelectContext(ITEM_NAME$2,R),G=useSelectContentContext(ITEM_NAME$2,R),V=U.value===P,[Z,Y]=reactExports.useState(I??""),[W,J]=reactExports.useState(!1),ee=useComposedRefs(T,ae=>G.itemRefCallback?.(ae,P,O)),te=useId(),ie=reactExports.useRef("touch"),oe=()=>{O||(U.onValueChange(P),U.onOpenChange(!1))};if(P==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:R,value:P,disabled:O,textId:te,isSelected:V,onItemTextChange:reactExports.useCallback(ae=>{Y(ce=>ce||(ae?.textContent??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection$3.ItemSlot,{scope:R,value:P,disabled:O,textValue:Z,children:jsxRuntimeExports.jsx(Primitive$2.div,{role:"option","aria-labelledby":te,"data-highlighted":W?"":void 0,"aria-selected":V&&W,"data-state":V?"checked":"unchecked","aria-disabled":O||void 0,"data-disabled":O?"":void 0,tabIndex:O?void 0:-1,...L,ref:ee,onFocus:composeEventHandlers(L.onFocus,()=>J(!0)),onBlur:composeEventHandlers(L.onBlur,()=>J(!1)),onClick:composeEventHandlers(L.onClick,()=>{ie.current!=="mouse"&&oe()}),onPointerUp:composeEventHandlers(L.onPointerUp,()=>{ie.current==="mouse"&&oe()}),onPointerDown:composeEventHandlers(L.onPointerDown,ae=>{ie.current=ae.pointerType}),onPointerMove:composeEventHandlers(L.onPointerMove,ae=>{ie.current=ae.pointerType,O?G.onItemLeave?.():ie.current==="mouse"&&ae.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers(L.onPointerLeave,ae=>{ae.currentTarget===document.activeElement&&G.onItemLeave?.()}),onKeyDown:composeEventHandlers(L.onKeyDown,ae=>{G.searchRef?.current!==""&&ae.key===" "||(SELECTION_KEYS.includes(ae.key)&&oe(),ae.key===" "&&ae.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME$2;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,className:P,style:O,...I}=_,L=useSelectContext(ITEM_TEXT_NAME,R),U=useSelectContentContext(ITEM_TEXT_NAME,R),G=useSelectItemContext(ITEM_TEXT_NAME,R),V=useSelectNativeOptionsContext(ITEM_TEXT_NAME,R),[Z,Y]=reactExports.useState(null),W=useComposedRefs(T,oe=>Y(oe),G.onItemTextChange,oe=>U.itemTextRefCallback?.(oe,G.value,G.disabled)),J=Z?.textContent,ee=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:G.value,disabled:G.disabled,children:J},G.value),[G.disabled,G.value,J]),{onNativeOptionAdd:te,onNativeOptionRemove:ie}=V;return useLayoutEffect2(()=>(te(ee),()=>ie(ee)),[te,ie,ee]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive$2.span,{id:G.textId,...I,ref:W}),G.isSelected&&L.valueNode&&!L.valueNodeHasChildren?reactDomExports.createPortal(I.children,L.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,...P}=_;return useSelectItemContext(ITEM_INDICATOR_NAME,R).isSelected?jsxRuntimeExports.jsx(Primitive$2.span,{"aria-hidden":!0,...P,ref:T}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton$1=reactExports.forwardRef((_,T)=>{const R=useSelectContentContext(SCROLL_UP_BUTTON_NAME,_.__scopeSelect),P=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,_.__scopeSelect),[O,I]=reactExports.useState(!1),L=useComposedRefs(T,P.onScrollButtonChange);return useLayoutEffect2(()=>{if(R.viewport&&R.isPositioned){let U=function(){const V=G.scrollTop>0;I(V)};const G=R.viewport;return U(),G.addEventListener("scroll",U),()=>G.removeEventListener("scroll",U)}},[R.viewport,R.isPositioned]),O?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._,ref:L,onAutoScroll:()=>{const{viewport:U,selectedItem:G}=R;U&&G&&(U.scrollTop=U.scrollTop-G.offsetHeight)}}):null});SelectScrollUpButton$1.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton$1=reactExports.forwardRef((_,T)=>{const R=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,_.__scopeSelect),P=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,_.__scopeSelect),[O,I]=reactExports.useState(!1),L=useComposedRefs(T,P.onScrollButtonChange);return useLayoutEffect2(()=>{if(R.viewport&&R.isPositioned){let U=function(){const V=G.scrollHeight-G.clientHeight,Z=Math.ceil(G.scrollTop)<V;I(Z)};const G=R.viewport;return U(),G.addEventListener("scroll",U),()=>G.removeEventListener("scroll",U)}},[R.viewport,R.isPositioned]),O?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._,ref:L,onAutoScroll:()=>{const{viewport:U,selectedItem:G}=R;U&&G&&(U.scrollTop=U.scrollTop+G.offsetHeight)}}):null});SelectScrollDownButton$1.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,onAutoScroll:P,...O}=_,I=useSelectContentContext("SelectScrollButton",R),L=reactExports.useRef(null),U=useCollection$3(R),G=reactExports.useCallback(()=>{L.current!==null&&(window.clearInterval(L.current),L.current=null)},[]);return reactExports.useEffect(()=>()=>G(),[G]),useLayoutEffect2(()=>{U().find(Z=>Z.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[U]),jsxRuntimeExports.jsx(Primitive$2.div,{"aria-hidden":!0,...O,ref:T,style:{flexShrink:0,...O.style},onPointerDown:composeEventHandlers(O.onPointerDown,()=>{L.current===null&&(L.current=window.setInterval(P,50))}),onPointerMove:composeEventHandlers(O.onPointerMove,()=>{I.onItemLeave?.(),L.current===null&&(L.current=window.setInterval(P,50))}),onPointerLeave:composeEventHandlers(O.onPointerLeave,()=>{G()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator$1=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,...P}=_;return jsxRuntimeExports.jsx(Primitive$2.div,{"aria-hidden":!0,...P,ref:T})});SelectSeparator$1.displayName=SEPARATOR_NAME;var ARROW_NAME="SelectArrow",SelectArrow=reactExports.forwardRef((_,T)=>{const{__scopeSelect:R,...P}=_,O=usePopperScope(R),I=useSelectContext(ARROW_NAME,R),L=useSelectContentContext(ARROW_NAME,R);return I.open&&L.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...O,...P,ref:T}):null});SelectArrow.displayName=ARROW_NAME;var BUBBLE_INPUT_NAME$1="SelectBubbleInput",SelectBubbleInput=reactExports.forwardRef(({__scopeSelect:_,value:T,...R},P)=>{const O=reactExports.useRef(null),I=useComposedRefs(P,O),L=usePrevious(T);return reactExports.useEffect(()=>{const U=O.current;if(!U)return;const G=window.HTMLSelectElement.prototype,Z=Object.getOwnPropertyDescriptor(G,"value").set;if(L!==T&&Z){const Y=new Event("change",{bubbles:!0});Z.call(U,T),U.dispatchEvent(Y)}},[L,T]),jsxRuntimeExports.jsx(Primitive$2.select,{...R,style:{...VISUALLY_HIDDEN_STYLES,...R.style},ref:I,defaultValue:T})});SelectBubbleInput.displayName=BUBBLE_INPUT_NAME$1;function shouldShowPlaceholder(_){return _===""||_===void 0}function useTypeaheadSearch(_){const T=useCallbackRef$1(_),R=reactExports.useRef(""),P=reactExports.useRef(0),O=reactExports.useCallback(L=>{const U=R.current+L;T(U),(function G(V){R.current=V,window.clearTimeout(P.current),V!==""&&(P.current=window.setTimeout(()=>G(""),1e3))})(U)},[T]),I=reactExports.useCallback(()=>{R.current="",window.clearTimeout(P.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(P.current),[]),[R,O,I]}function findNextItem(_,T,R){const O=T.length>1&&Array.from(T).every(V=>V===T[0])?T[0]:T,I=R?_.indexOf(R):-1;let L=wrapArray$1(_,Math.max(I,0));O.length===1&&(L=L.filter(V=>V!==R));const G=L.find(V=>V.textValue.toLowerCase().startsWith(O.toLowerCase()));return G!==R?G:void 0}function wrapArray$1(_,T){return _.map((R,P)=>_[(T+P)%_.length])}var Root2$1=Select$1,Trigger$2=SelectTrigger$1,Value=SelectValue$1,Icon=SelectIcon,Portal=SelectPortal,Content2$1=SelectContent$1,Viewport$1=SelectViewport,Label=SelectLabel$1,Item$2=SelectItem$1,ItemText=SelectItemText,ItemIndicator=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton$1,ScrollDownButton=SelectScrollDownButton$1,Separator$2=SelectSeparator$1;const Select=Root2$1,SelectValue=Value,SelectTrigger=reactExports.forwardRef(({className:_,children:T,...R},P)=>jsxRuntimeExports.jsxs(Trigger$2,{ref:P,className:cn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",_),...R,children:[T,jsxRuntimeExports.jsx(Icon,{asChild:!0,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 opacity-50"})})]}));SelectTrigger.displayName=Trigger$2.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(ScrollUpButton,{ref:R,className:cn("flex cursor-default items-center justify-center py-1",_),...T,children:jsxRuntimeExports.jsx(ChevronUp,{className:"h-4 w-4"})}));SelectScrollUpButton.displayName=ScrollUpButton.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(ScrollDownButton,{ref:R,className:cn("flex cursor-default items-center justify-center py-1",_),...T,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})}));SelectScrollDownButton.displayName=ScrollDownButton.displayName;const SelectContent=reactExports.forwardRef(({className:_,children:T,position:R="popper",...P},O)=>jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs(Content2$1,{ref:O,className:cn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden bg-secondary rounded-md border text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",R==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",_),position:R,...P,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx(Viewport$1,{className:cn("p-1",R==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:T}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})}));SelectContent.displayName=Content2$1.displayName;const SelectLabel=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(Label,{ref:R,className:cn("py-1.5 pl-8 pr-2 text-sm font-semibold",_),...T}));SelectLabel.displayName=Label.displayName;const SelectItem=reactExports.forwardRef(({className:_,children:T,...R},P)=>jsxRuntimeExports.jsxs(Item$2,{ref:P,className:cn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_),...R,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(ItemText,{children:T})]}));SelectItem.displayName=Item$2.displayName;const SelectSeparator=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(Separator$2,{ref:R,className:cn("-mx-1 my-1 h-px bg-muted",_),...T}));SelectSeparator.displayName=Separator$2.displayName;function ComboBox({label:_,value:T,options:R,onChange:P,disabled:O,placeholder:I}){return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs w-32 shrink-0",children:_}),jsxRuntimeExports.jsxs(Select,{value:T,onValueChange:P,disabled:O,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"h-7 text-xs w-32",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:I??"Select..."})}),jsxRuntimeExports.jsx(SelectContent,{children:R.map(L=>jsxRuntimeExports.jsx(SelectItem,{value:L.value,className:"text-xs",children:L.label},L.value))})]})]})}function EHTParametersTab({params:_,onChange:T,disabled:R}){const P=(I,L)=>{const U=structuredClone(_);U.general[I]=L,T(U)},O=_.general;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"General"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(NumberInput,{label:"End Time (h)",value:O.t_end,onChange:I=>P("t_end",I),disabled:R,min:0}),jsxRuntimeExports.jsx(IntegerInput,{label:"Random Seed",value:O.random_seed,onChange:I=>P("random_seed",I),disabled:R}),jsxRuntimeExports.jsx(NumberInput,{label:"Out-of-plane Division Prob.",value:O.p_div_out,onChange:I=>P("p_div_out",I),disabled:R,min:0,max:1})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Geometry"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(BoolInput,{label:"Full Circle",value:O.full_circle,onChange:I=>P("full_circle",I),disabled:R}),jsxRuntimeExports.jsx(NumberInput,{label:"Initial Width",value:O.w_init,onChange:I=>P("w_init",I),disabled:R,min:0}),jsxRuntimeExports.jsx(NumberInput,{label:"Initial Height",value:O.h_init,onChange:I=>P("h_init",I),disabled:R,min:0}),jsxRuntimeExports.jsx(NumberInput,{label:"Perimeter",value:O.perimeter,onChange:I=>P("perimeter",I),disabled:R,min:1}),jsxRuntimeExports.jsx(NumberInput,{label:"Aspect (0=line, b/a)",value:O.aspect_ratio,onChange:I=>P("aspect_ratio",I),disabled:R})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Model Parameters"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(BoolInput,{label:"Hard Sphere Nuclei",value:O.hard_sphere_nuclei,onChange:I=>P("hard_sphere_nuclei",I),disabled:R}),jsxRuntimeExports.jsx(NumberInput,{label:"Friction (mu)",value:O.mu,onChange:I=>P("mu",I),disabled:R,min:0})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Display"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(IntegerInput,{label:"Screen Width",value:O.w_screen,onChange:I=>P("w_screen",I),disabled:R,min:10}),jsxRuntimeExports.jsx(IntegerInput,{label:"Screen Height",value:O.h_screen,onChange:I=>P("h_screen",I),disabled:R,min:10})]})]})]})}const buttonVariants=cva("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-play text-play-foreground hover:bg-play/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Button=reactExports.forwardRef(({className:_,variant:T,size:R,asChild:P=!1,...O},I)=>{const L=P?Slot$1:"button";return jsxRuntimeExports.jsx(L,{className:cn(buttonVariants({variant:T,size:R,className:_})),ref:I,...O})});Button.displayName="Button";const SECTIONS=[{key:"initial",label:"Initial Setup",fields:["N_init","location"]},{key:"geometry",label:"Geometry",fields:["R_hard","R_hard_div","R_soft"]},{key:"appearance",label:"Appearance",fields:["color"]},{key:"stiffness",label:"Stiffness",fields:["k_apical_junction","k_cytos","stiffness_apical_apical","stiffness_apical_apical_div","stiffness_nuclei_apical","stiffness_nuclei_basal","stiffness_repulsion","stiffness_straightness"]},{key:"division",label:"Division & Lifecycle",fields:["lifespan_start","lifespan_end","dur_G2","dur_mitosis","INM"]},{key:"cellTypeProps",label:"Cell-Type Properties",fields:["diffusion","basal_damping_ratio","max_basal_junction_dist","cytos_init","basal_membrane_repulsion","apical_junction_init","max_cytoskeleton_length"]},{key:"events",label:"EMT Events (time ranges)",fields:["hetero","events"]},{key:"running",label:"Running Behavior",fields:["run","running_speed","running_mode"]}];function CellTypeRow({label:_,tooltip:T,children:R}){return jsxRuntimeExports.jsxs("tr",{className:"border-b border-border/50 hover:bg-muted/30",children:[jsxRuntimeExports.jsx("td",{className:"py-1.5 px-2 text-xs font-medium w-36",title:T,children:_}),R]})}function NumberCell({value:_,onChange:T,disabled:R,step:P,min:O,max:I}){const L=U=>{const G=parseFloat(U.target.value);if(!isNaN(G)){let V=G;O!==void 0&&(V=Math.max(O,V)),I!==void 0&&(V=Math.min(I,V)),T(V)}};return jsxRuntimeExports.jsx("td",{className:"py-1 px-1",children:jsxRuntimeExports.jsx(Input,{type:"number",value:_,onChange:L,disabled:R,step:P,min:O,max:I,className:"h-6 text-xs w-20"})})}function StringCell({value:_,onChange:T,disabled:R}){const P=O=>{T(O.target.value)};return jsxRuntimeExports.jsx("td",{className:"py-1 px-1",children:jsxRuntimeExports.jsx(Input,{type:"text",value:_,onChange:P,disabled:R,className:"h-6 text-xs w-24"})})}function SplitRangeCell({valueStart:_,valueEnd:T,onChangeStart:R,onChangeEnd:P,disabled:O,label:I}){const L=isFinite(_),U=isFinite(T),G=J=>{I==="start"?R(J?0:1/0):P(J?1:1/0)},V=J=>{const ee=parseFloat(J.target.value);J.target.value===""?I==="start"?R(1/0):P(1/0):isNaN(ee)||(I==="start"?R(ee):P(ee))},Z=I==="start"?L:U,Y=I==="start"?_:T,W=isFinite(Y)?Y:"";return jsxRuntimeExports.jsx("td",{className:"py-1 px-1",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Checkbox,{checked:Z,onCheckedChange:G,disabled:O,title:"Active (enabled when checked)"}),Z?jsxRuntimeExports.jsx(Input,{type:"number",value:W,onChange:V,disabled:O,className:"h-6 text-xs w-20"}):jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground w-20",children:"-"})]})})}function BoolCell({value:_,onChange:T,disabled:R}){return jsxRuntimeExports.jsx("td",{className:"py-1 px-1",children:jsxRuntimeExports.jsx(Checkbox,{checked:_,onCheckedChange:P=>T(P===!0),disabled:R})})}function rgbToHex$1(_){const T=_.r>1?_.r:Math.round(_.r*255),R=_.g>1?_.g:Math.round(_.g*255),P=_.b>1?_.b:Math.round(_.b*255);return`#${T.toString(16).padStart(2,"0")}${R.toString(16).padStart(2,"0")}${P.toString(16).padStart(2,"0")}`}function hexToRgb(_){const T=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(_);return T?{r:parseInt(T[1],16),g:parseInt(T[2],16),b:parseInt(T[3],16)}:{r:0,g:0,b:0}}function ColorCell({value:_,onChange:T,disabled:R}){const P=rgbToHex$1(_),O=I=>{const L=hexToRgb(I.target.value);T(L)};return jsxRuntimeExports.jsx("td",{className:"py-1 px-1",children:jsxRuntimeExports.jsx(Input,{type:"color",value:P,onChange:O,disabled:R,className:"h-6 w-10 p-0.5 cursor-pointer"})})}function SectionHeader({section:_,cellTypeKeys:T,disabled:R,params:P,onChange:O}){const[I,L]=reactExports.useState({}),U=reactExports.useCallback(Y=>{if(Y===1/0)return"Infinity";if(Y===-1/0)return"-Infinity";if(typeof Y=="object"&&Y!==null){if(Array.isArray(Y))return Y.map(U);const W={};for(const[J,ee]of Object.entries(Y))W[J]=U(ee);return W}return Y},[]),G=reactExports.useCallback(Y=>{if(Y==="Infinity")return 1/0;if(Y==="-Infinity")return-1/0;if(typeof Y=="object"&&Y!==null){if(Array.isArray(Y))return Y.map(G);const W={};for(const[J,ee]of Object.entries(Y))W[J]=G(ee);return W}return Y},[]),V=reactExports.useCallback(async Y=>{const W=P.cell_types[Y],J={};for(const te of _.fields)J[te]=U(structuredClone(W[te]));const ee=JSON.stringify({section:_.key,cellType:Y,data:J},null,2);await navigator.clipboard.writeText(ee)},[P.cell_types,_,U]),Z=reactExports.useCallback(async Y=>{try{const W=await navigator.clipboard.readText(),J=JSON.parse(W);if(J.section!==_.key||!J.data){L(ie=>({...ie,[Y]:"error"})),setTimeout(()=>L(ie=>({...ie,[Y]:"idle"})),2e3);return}const ee=structuredClone(P),te=ee.cell_types[Y];for(const ie of _.fields)ie in J.data&&(te[ie]=G(structuredClone(J.data[ie])));O(ee),L(ie=>({...ie,[Y]:"success"})),setTimeout(()=>L(ie=>({...ie,[Y]:"idle"})),2e3)}catch{L(W=>({...W,[Y]:"error"})),setTimeout(()=>L(W=>({...W,[Y]:"idle"})),2e3)}},[P,_,O,G]);return jsxRuntimeExports.jsxs("tr",{className:"bg-muted/50",children:[jsxRuntimeExports.jsx("td",{className:"py-1 px-2",children:jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold text-muted-foreground",children:_.label})}),T.map(Y=>jsxRuntimeExports.jsx("td",{className:"py-1 px-1",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-0.5",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:()=>V(Y),disabled:R,className:"h-5 w-5",title:`Copy ${_.label} from ${Y}`,children:jsxRuntimeExports.jsx(Copy,{className:"h-3 w-3"})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:()=>Z(Y),disabled:R,className:`h-5 w-5 ${I[Y]==="success"?"text-green-500":I[Y]==="error"?"text-red-500":""}`,title:`Paste ${_.label} to ${Y}`,children:jsxRuntimeExports.jsx(ClipboardPaste,{className:"h-3 w-3"})})]})},Y))]})}function EHTCellTypesTab({params:_,onChange:T,disabled:R}){const[P,O]=reactExports.useState(""),I=Object.keys(_.cell_types),L=(ee,te,ie)=>{const oe=structuredClone(_);oe.cell_types[ee][te]=ie,T(oe)},U=(ee,te,ie)=>{const oe=structuredClone(_);oe.cell_types[ee].events[`${te}_start`]=ie,T(oe)},G=(ee,te,ie)=>{const oe=structuredClone(_);oe.cell_types[ee].events[`${te}_end`]=ie,T(oe)},V=reactExports.useCallback(ee=>{const te=structuredClone(_);let ie=1,oe=`type_${ie}`;for(;te.cell_types[oe];)ie++,oe=`type_${ie}`;if(ee&&_.cell_types[ee]){const ae=_.cell_types[ee],ce={...structuredClone(ae),N_init:0,color:{r:Math.floor(Math.random()*200)+50,g:Math.floor(Math.random()*200)+50,b:Math.floor(Math.random()*200)+50}};te.cell_types[oe]=ce}else{const ae={...structuredClone(DEFAULT_CONTROL_CELL),N_init:0,location:"",color:{r:Math.floor(Math.random()*200)+50,g:Math.floor(Math.random()*200)+50,b:Math.floor(Math.random()*200)+50}};te.cell_types[oe]=ae}T(te)},[_,T]),Z=ee=>{if(I.length<=1)return;const te=structuredClone(_);delete te.cell_types[ee],T(te)},Y=(ee,te)=>{if(!te.trim()||te===ee||_.cell_types[te])return;const ie=structuredClone(_);ie.cell_types[te]=ie.cell_types[ee],delete ie.cell_types[ee],T(ie)},W=ee=>_.cell_types[ee],J=reactExports.useCallback(()=>{V(P==="__new__"?void 0:P),O("__new__")},[V,P]);return jsxRuntimeExports.jsxs("div",{className:"overflow-x-auto overflow-y-auto max-h-[600px]",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-end items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground",children:"Copy from:"}),jsxRuntimeExports.jsxs(Select,{value:P||"__new__",onValueChange:O,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"h-7 w-28 text-xs",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"(new)"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"__new__",children:"(new)"}),I.map(ee=>jsxRuntimeExports.jsx(SelectItem,{value:ee,children:ee},ee))]})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:J,disabled:R,className:"gap-1",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4"}),"Add Cell Type"]})]}),jsxRuntimeExports.jsxs("table",{className:"min-w-full text-xs",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"border-b-2 border-border",children:[jsxRuntimeExports.jsx("th",{className:"py-2 px-2 text-left font-semibold",children:"Parameter"}),I.map(ee=>jsxRuntimeExports.jsx("th",{className:"py-2 px-1 text-left",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Input,{defaultValue:ee,onBlur:te=>Y(ee,te.target.value),onKeyDown:te=>{te.key==="Enter"&&(Y(ee,te.currentTarget.value),te.currentTarget.blur())},disabled:R,className:"h-6 text-xs font-semibold w-24"}),I.length>1&&jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:()=>Z(ee),disabled:R,className:"h-6 w-6 text-muted-foreground hover:text-destructive",children:jsxRuntimeExports.jsx(Trash2,{className:"h-3 w-3"})})]})},ee))]})}),jsxRuntimeExports.jsxs("tbody",{children:[jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[0],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"N Init",tooltip:"Initial number of cells of this type",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).N_init,onChange:te=>L(ee,"N_init",Math.round(te)),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Location",tooltip:'Predefined location along basal membrane: "top", "bottom", "rest" or numeric value in [-1, 1]',children:I.map(ee=>jsxRuntimeExports.jsx(StringCell,{value:W(ee).location,onChange:te=>L(ee,"location",te),disabled:R},ee))}),jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[1],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"R Hard",tooltip:"Hard sphere radius",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).R_hard,onChange:te=>L(ee,"R_hard",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"R Hard (div)",tooltip:"Hard sphere radius during division",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).R_hard_div,onChange:te=>L(ee,"R_hard_div",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"R Soft",tooltip:"Soft interaction radius",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).R_soft,onChange:te=>L(ee,"R_soft",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[2],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Color",children:I.map(ee=>jsxRuntimeExports.jsx(ColorCell,{value:W(ee).color,onChange:te=>L(ee,"color",te),disabled:R},ee))}),jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[3],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"k Apical Junction",tooltip:"Apical junction spring constant",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).k_apical_junction,onChange:te=>L(ee,"k_apical_junction",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"k Cytos",tooltip:"Cytoskeleton relaxation rate",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).k_cytos,onChange:te=>L(ee,"k_cytos",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Stiff Apical-Apical",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).stiffness_apical_apical,onChange:te=>L(ee,"stiffness_apical_apical",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Stiff A-A (div)",tooltip:"Apical-Apical stiffness during division",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).stiffness_apical_apical_div,onChange:te=>L(ee,"stiffness_apical_apical_div",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Stiff Nuclei-Apical",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).stiffness_nuclei_apical,onChange:te=>L(ee,"stiffness_nuclei_apical",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Stiff Nuclei-Basal",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).stiffness_nuclei_basal,onChange:te=>L(ee,"stiffness_nuclei_basal",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Stiff Repulsion",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).stiffness_repulsion,onChange:te=>L(ee,"stiffness_repulsion",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Stiff Straightness",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).stiffness_straightness,onChange:te=>L(ee,"stiffness_straightness",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[4],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Lifespan (start)",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:W(ee).lifespan_start,valueEnd:W(ee).lifespan_end,onChangeStart:te=>L(ee,"lifespan_start",te),onChangeEnd:te=>L(ee,"lifespan_end",te),disabled:R,label:"start"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Lifespan (end)",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:W(ee).lifespan_start,valueEnd:W(ee).lifespan_end,onChangeStart:te=>L(ee,"lifespan_start",te),onChangeEnd:te=>L(ee,"lifespan_end",te),disabled:R,label:"end"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"G2 Duration",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).dur_G2,onChange:te=>L(ee,"dur_G2",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Mitosis Duration",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).dur_mitosis,onChange:te=>L(ee,"dur_mitosis",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"INM",tooltip:"Interkinetic nuclear migration probability",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).INM,onChange:te=>L(ee,"INM",te),disabled:R,min:0,max:1},ee))}),jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[5],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Diffusion",tooltip:"Diffusion coefficient",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).diffusion,onChange:te=>L(ee,"diffusion",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Basal Damping",tooltip:"Basal damping ratio",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).basal_damping_ratio,onChange:te=>L(ee,"basal_damping_ratio",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Max Basal Junc Dist",tooltip:"Maximum basal junction distance",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).max_basal_junction_dist,onChange:te=>L(ee,"max_basal_junction_dist",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Cytos Init",tooltip:"Initial cytoskeleton length",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).cytos_init,onChange:te=>L(ee,"cytos_init",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Basal Repulsion",tooltip:"Basal membrane repulsion strength",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).basal_membrane_repulsion,onChange:te=>L(ee,"basal_membrane_repulsion",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Apical Junc Init",tooltip:"Initial apical junction distance",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).apical_junction_init,onChange:te=>L(ee,"apical_junction_init",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Max Cytos Length",tooltip:"Maximum cytoskeleton length",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).max_cytoskeleton_length,onChange:te=>L(ee,"max_cytoskeleton_length",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[6],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Heterogeneous",children:I.map(ee=>jsxRuntimeExports.jsx(BoolCell,{value:W(ee).hetero,onChange:te=>L(ee,"hetero",te),disabled:R},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time A start",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:W(ee).events.time_A_start,valueEnd:W(ee).events.time_A_end,onChangeStart:te=>U(ee,"time_A",te),onChangeEnd:te=>G(ee,"time_A",te),disabled:R,label:"start"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time A end",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:W(ee).events.time_A_start,valueEnd:W(ee).events.time_A_end,onChangeStart:te=>U(ee,"time_A",te),onChangeEnd:te=>G(ee,"time_A",te),disabled:R,label:"end"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time B start",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:W(ee).events.time_B_start,valueEnd:W(ee).events.time_B_end,onChangeStart:te=>U(ee,"time_B",te),onChangeEnd:te=>G(ee,"time_B",te),disabled:R,label:"start"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time B end",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:W(ee).events.time_B_start,valueEnd:W(ee).events.time_B_end,onChangeStart:te=>U(ee,"time_B",te),onChangeEnd:te=>G(ee,"time_B",te),disabled:R,label:"end"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time S start",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:W(ee).events.time_S_start,valueEnd:W(ee).events.time_S_end,onChangeStart:te=>U(ee,"time_S",te),onChangeEnd:te=>G(ee,"time_S",te),disabled:R,label:"start"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time S end",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:W(ee).events.time_S_start,valueEnd:W(ee).events.time_S_end,onChangeStart:te=>U(ee,"time_S",te),onChangeEnd:te=>G(ee,"time_S",te),disabled:R,label:"end"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time P start",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:W(ee).events.time_P_start,valueEnd:W(ee).events.time_P_end,onChangeStart:te=>U(ee,"time_P",te),onChangeEnd:te=>G(ee,"time_P",te),disabled:R,label:"start"},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Time P end",children:I.map(ee=>jsxRuntimeExports.jsx(SplitRangeCell,{valueStart:W(ee).events.time_P_start,valueEnd:W(ee).events.time_P_end,onChangeStart:te=>U(ee,"time_P",te),onChangeEnd:te=>G(ee,"time_P",te),disabled:R,label:"end"},ee))}),jsxRuntimeExports.jsx(SectionHeader,{section:SECTIONS[7],cellTypeKeys:I,disabled:R,params:_,onChange:T}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Run Probability",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).run,onChange:te=>L(ee,"run",te),disabled:R,min:0,max:1},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Running Speed",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).running_speed,onChange:te=>L(ee,"running_speed",te),disabled:R,min:0},ee))}),jsxRuntimeExports.jsx(CellTypeRow,{label:"Running Mode",tooltip:"0: none, 1: after extrusion, 2: retain length, 3: immediate",children:I.map(ee=>jsxRuntimeExports.jsx(NumberCell,{value:W(ee).running_mode,onChange:te=>L(ee,"running_mode",Math.round(te)),disabled:R,min:0,max:3},ee))})]})]})]})}function EHTSimulationTab({params:_,onChange:T,disabled:R}){const P=(I,L)=>{const U=structuredClone(_);U.general[I]=L,T(U)},O=_.general;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Time Stepping"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(NumberInput,{label:"Time Step (dt)",value:O.dt,onChange:I=>P("dt",I),disabled:R,step:.01,min:.001}),jsxRuntimeExports.jsx(NumberInput,{label:"Algo Time Step",value:O.alg_dt,onChange:I=>P("alg_dt",I),disabled:R,step:.001,min:1e-4}),jsxRuntimeExports.jsx(IntegerInput,{label:"Substeps",value:O.n_substeps,onChange:I=>P("n_substeps",I),disabled:R,min:1})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-muted/50 rounded-md text-xs text-muted-foreground",children:[jsxRuntimeExports.jsx("p",{className:"font-medium mb-1",children:"Notes:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-0.5",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"dt"}),": Output time step (visualization/export interval)"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"alg_dt"}),": Internal algorithm time step for physics"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"n_substeps"}),": Number of physics steps per output step"]}),jsxRuntimeExports.jsx("li",{children:"Effective physics dt = alg_dt, run n_substeps times per dt"})]})]})]})}function EHTWarningBanner({params:_,onChange:T,disabled:R}){const P=_.general,{totalNInit:O,avgMaxBasalJunctionDist:I}=reactExports.useMemo(()=>{const G=Object.values(_.cell_types),V=G.reduce((W,J)=>W+J.N_init,0),Z=G.reduce((W,J)=>W+J.N_init*J.max_basal_junction_dist,0),Y=V>0?Z/V:G.length>0?G.reduce((W,J)=>W+J.max_basal_junction_dist,0)/G.length:4;return{totalNInit:V,avgMaxBasalJunctionDist:Y}},[_.cell_types]),L=reactExports.useMemo(()=>{if(P.perimeter>0&&P.full_circle){const G=O*I;if(G<=P.perimeter)return{message:`Perimeter constraint violated: total cells (${O})  avg max_basal_junction_dist (${I.toFixed(1)}) = ${G.toFixed(1)}  perimeter (${P.perimeter.toFixed(1)}). Cells may not cover the membrane.`,maxCoverage:G}}return null},[O,P.perimeter,P.full_circle,I]),U=reactExports.useCallback(()=>{if(!T||!L)return;const G=P.perimeter+5,V=L.maxCoverage;if(V<=0)return;const Z=G/V,Y=structuredClone(_);for(const W of Object.keys(Y.cell_types))Y.cell_types[W].max_basal_junction_dist*=Z;T(Y)},[T,L,_,P.perimeter]);return L?jsxRuntimeExports.jsxs("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-md text-xs text-yellow-600 dark:text-yellow-400 flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"flex-1",children:L.message}),T&&jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:U,disabled:R,className:"shrink-0 text-xs h-6 px-2",children:"Fix"})]}):null}const ehtUI={WarningBanner:EHTWarningBanner,ParametersTab:EHTParametersTab,CellTypesTab:EHTCellTypesTab,SimulationTab:EHTSimulationTab};function ramanujanPerimeter(_,T){if(_===0&&T===0)return 0;if(_===T)return 2*Math.PI*_;const R=_+T,P=_-T,O=P*P/(R*R);return Math.PI*R*(1+3*O/(10+Math.sqrt(4-3*O)))}function computeEllipseFromPerimeter(_,T){if(T===0)return{a:1/0,b:1/0,curvature_1:0,curvature_2:0};const R=Math.sign(T),P=Math.abs(T),O=1,I=P,L=ramanujanPerimeter(O,I),U=_/L,G=U*O,V=U*I,Z=G>0?R/G:0,Y=V>0?R/V:0;return{a:G,b:V,curvature_1:Z,curvature_2:Y}}function createCell(_,T,R,P,O,I,L){const{basalPoint:U,apicalPoint:G,nucleusPosition:V}=P,Z=_.general.h_init,Y=R.random(O.lifespan_start,O.lifespan_end),W=T.cells.length>0?Math.max(...T.cells.map(J=>J.id))+1:0;if(L===void 0){const J=T.t-R.random(0,Y);let ee=R.random(O.events.time_A_start,O.events.time_A_end),te=R.random(O.events.time_B_start,O.events.time_B_end),ie=R.random(O.events.time_S_start,O.events.time_S_end);const oe=R.random()<=O.run?te:1/0;return O.hetero&&(R.random()>.7&&(ee=1/0),R.random()>.7&&(te=1/0),R.random()>.7&&(ie=1/0)),{id:W,typeIndex:I,pos:V.toObject(),A:G.toObject(),B:U.toObject(),R_soft:O.R_soft,R_hard:O.R_hard,eta_A:Z/2,eta_B:Z/2,has_A:!0,has_B:!0,phase:CellPhase.G1,birth_time:J,division_time:J+Y,is_running:!1,running_mode:O.running_mode,has_inm:R.random()<=O.INM,time_A:ee,time_B:te,time_S:ie,time_P:oe,stiffness_apical_apical:O.stiffness_apical_apical,stiffness_straightness:O.stiffness_straightness,stiffness_nuclei_apical:O.stiffness_nuclei_apical,stiffness_nuclei_basal:O.stiffness_nuclei_basal}}else return{id:W,typeIndex:I,pos:V.toObject(),A:G.toObject(),B:U.toObject(),R_soft:O.R_soft,R_hard:O.R_hard,eta_A:L.eta_A,eta_B:L.eta_B,has_A:L.has_A,has_B:L.has_B,phase:CellPhase.G1,birth_time:T.t,division_time:T.t+Y,is_running:L.is_running,running_mode:L.running_mode,has_inm:L.has_inm,time_A:L.time_A,time_B:L.time_B,time_S:L.time_S,time_P:L.time_P,stiffness_apical_apical:O.stiffness_apical_apical,stiffness_straightness:L.stiffness_straightness,stiffness_nuclei_apical:L.stiffness_nuclei_apical,stiffness_nuclei_basal:L.stiffness_nuclei_basal}}function getCellType(_,T){return _.cell_types[T.typeIndex]||_.cell_types.control}function updateCellPhase(_,T,R){const P=_.division_time,O=P-T.dur_G2-T.dur_mitosis,I=P-T.dur_mitosis;R<O?_.phase=CellPhase.G1:R<I?_.phase=CellPhase.G2:R<P?_.phase=CellPhase.Mitosis:_.phase=CellPhase.Division}function initializeEHTSimulation(_,T,R){const P=_.general,O=computeEllipseFromPerimeter(P.perimeter,P.aspect_ratio);T.geometry={curvature_1:O.curvature_1,curvature_2:O.curvature_2};const{curvature_1:I,curvature_2:L}=T.geometry;T.basalGeometry=createBasalGeometry(I,L,360);const U=Object.entries(_.cell_types),G=U.reduce((ae,[,ce])=>ae+ce.N_init,0),V=[];for(let ae=0;ae<G;ae++)V.push([-1+2*ae/G,""]);U.sort((ae,ce)=>{const le=ae[1].location!==""?1:0;return(ce[1].location!==""?1:0)-le});for(const[ae,ce]of U)if(ce.location!==""){let le;ce.location==="top"?le=1:ce.location==="bottom"?le=0:(le=parseFloat(ce.location),(isNaN(le)||le<-1||le>1)&&(le=0)),V.sort((me,fe)=>Math.min(Math.abs(me[0]-le),Math.abs(me[0]+2-le))-Math.min(Math.abs(fe[0]-le),Math.abs(fe[0]+2-le)));let he=0;for(let me=0;me<V.length&&he<ce.N_init;me++)V[me][1]===""&&(V[me]=[V[me][0],ae],he++)}V.sort((ae,ce)=>ae[0]-ce[0]);let Z=0;for(let ae=0;ae<V.length;ae++)if(V[ae][1]==="")for(;Z<U.length;){const[ce,le]=U[Z];if(V.filter(me=>me[1]===ce).length<le.N_init){V[ae]=[V[ae][0],ce];break}else Z++}V.sort((ae,ce)=>ae[0]-ce[0]);const Y=I===0&&L===0,W=Y?P.w_init*4:ramanujanPerimeter(Math.abs(1/I),Math.abs(1/L)),J=P.full_circle?W:P.w_init,ee=P.h_init,te=P.aspect_ratio<0?-1:1,ie=[],oe=[];for(let ae=0;ae<G;ae++){const ce=Y?V[ae][0]*(J/2):V[ae][0]*(J/2)+W/4,le=T.basalGeometry.getPointAtArcLength(ce),he=T.basalGeometry.getNormal(le).scale(te),me=le.add(he.scale(ee)),fe=R.random(ee/3,2*ee/3),ue=le.add(he.scale(fe));ie.push({basalPoint:le,apicalPoint:me,nucleusPosition:ue}),oe.push(V[ae][1])}T.cells=[];for(let ae=0;ae<ie.length;ae++){const ce=oe[ae],le=_.cell_types[ce];if(!le){console.warn("No cell type found for key",ce);continue}const he=createCell(_,T,R,ie[ae],le,ce);T.cells.push(he)}for(let ae=0;ae<T.cells.length-1;ae++){const ce=_.cell_types[T.cells[ae].typeIndex],le=_.cell_types[T.cells[ae+1].typeIndex],he=(ce.apical_junction_init+le.apical_junction_init)/2;T.ap_links.push({l:ae,r:ae+1,rl:he}),T.ba_links.push({l:ae,r:ae+1})}if(P.full_circle&&T.cells.length>2){const ae=T.cells.length-1,ce=_.cell_types[T.cells[ae].typeIndex],le=_.cell_types[T.cells[0].typeIndex],he=(ce.apical_junction_init+le.apical_junction_init)/2;T.ap_links.push({l:ae,r:0,rl:he}),T.ba_links.push({l:ae,r:0})}}function zeroForces(){return{f:Vector2.zero(),fA:Vector2.zero(),fB:Vector2.zero()}}function calcRepulsionForces(_,T,R){const P=_.cells,O=P.length;for(let I=0;I<O;I++){const L=P[I],U=getCellType(T,L),G=Vector2.from(L.pos);for(let V=0;V<I;V++){const Z=P[V];if(Math.abs(L.pos.x-Z.pos.x)>=2)continue;const Y=getCellType(T,Z),J=Vector2.from(Z.pos).sub(G),ee=J.mag(),te=L.R_soft+Z.R_soft,ie=U.stiffness_repulsion+Y.stiffness_repulsion;if(ee<te&&ee>te/20){const oe=-ie*(te-ee)/(ee*te*te),ae=J.scale(oe);R[I].f=R[I].f.add(ae),R[V].f=R[V].f.sub(ae)}}}}function calcApicalNucleiForces(_,T,R){const P=_.cells,O=T.general.hard_sphere_nuclei;for(let I=0;I<P.length;I++){const L=P[I],U=Vector2.from(L.pos),G=Vector2.from(L.A),V=U.sub(G),Z=V.mag();if(Z>0){const Y=O?L.R_hard:L.R_soft,W=L.eta_A+Y,ee=2*L.stiffness_nuclei_apical*(Z-W)/(Z*W*W),te=V.scale(ee);R[I].f=R[I].f.sub(te),R[I].fA=R[I].fA.add(te)}}}function calcBasalNucleiForces(_,T,R){const P=_.cells,O=T.general.hard_sphere_nuclei;for(let I=0;I<P.length;I++){const L=P[I],U=Vector2.from(L.pos),G=Vector2.from(L.B),V=U.sub(G),Z=V.mag();if(Z>0){const Y=O?L.R_hard:L.R_soft,W=L.eta_B+Y,ee=2*L.stiffness_nuclei_basal*(Z-W)/(Z*W*W),te=V.scale(ee);R[I].f=R[I].f.sub(te),R[I].fB=R[I].fB.add(te)}}}function calcStraightnessForces(_,T,R){const P=_.cells;for(let O=0;O<P.length;O++){const I=P[O],L=Vector2.from(I.pos),U=Vector2.from(I.A),G=Vector2.from(I.B),V=L.sub(U),Z=L.sub(G),Y=V.mag(),W=Z.mag(),J=V.dot(Z);if(J!==0&&Y>0&&W>0){const ee=I.stiffness_straightness/(Y*W),te=Z.scale(-1).add(V.scale(J/(Y*Y))).scale(ee),ie=V.scale(-1).add(Z.scale(J/(W*W))).scale(ee);R[O].fA=R[O].fA.sub(te),R[O].f=R[O].f.add(te),R[O].f=R[O].f.add(ie),R[O].fB=R[O].fB.sub(ie)}}}function calcApicalJunctionForces(_,T,R){const P=_.cells,O=_.ap_links;for(const I of O){const L=P[I.l],U=P[I.r],G=Vector2.from(L.A),V=Vector2.from(U.A),Z=G.sub(V),Y=Z.mag();if(Y>1e-6){const W=.5*(L.stiffness_apical_apical+U.stiffness_apical_apical),J=Z.scale(.25*W*(Y-I.rl)/Y);R[I.l].fA=R[I.l].fA.sub(J),R[I.r].fA=R[I.r].fA.add(J)}}}function calcAllForces(_,T){const R=_.cells.map(()=>zeroForces());return calcRepulsionForces(_,T,R),calcApicalNucleiForces(_,T,R),calcBasalNucleiForces(_,T,R),calcStraightnessForces(_,T,R),calcApicalJunctionForces(_,T,R),R}function projectHardSphereConstraints(_,T){const R=_.cells,P=R.length;for(let O=0;O<P;O++){const I=R[O];for(let L=0;L<O;L++){const U=R[L],G=I.R_hard+U.R_hard,V=Vector2.from(I.pos),Z=Vector2.from(U.pos),Y=V.dist(Z)-G;if(Y<0&&Y!==-G){const J=V.sub(Z).scale(.5*Y/(Y+G));I.pos.x-=J.x,I.pos.y-=J.y,U.pos.x+=J.x,U.pos.y+=J.y}}}}function projectBasalOrderingConstraints(_,T){const R=_.cells,P=_.ba_links,O=_.geometry?.curvature_1??0,I=_.geometry?.curvature_2??0;for(const L of P){const U=R[L.l],G=R[L.r],V=Vector2.from(U.B),Z=Vector2.from(G.B);_.basalGeometry.getArcLength(V),_.basalGeometry.getArcLength(Z),T.general.full_circle}}function projectMaxBasalDistanceConstraints(_,T){const R=_.cells,P=_.ba_links;for(const O of P){const I=R[O.l],L=R[O.r],U=getCellType(T,I),G=getCellType(T,L),V=(U.max_basal_junction_dist+G.max_basal_junction_dist)/2,Z=Vector2.from(I.B),Y=Vector2.from(L.B),W=Z.dist(Y);if(W>V){const J=W-V,te=Y.sub(Z).normalize().scale(J/2);I.B.x+=te.x,I.B.y+=te.y,L.B.x-=te.x,L.B.y-=te.y}}}function projectBasalCurveConstraints(_,T){const R=_.cells;for(const P of R){if(!P.has_B)continue;const O=Vector2.from(P.B),I=_.basalGeometry.projectPoint(O);P.B.x=I.x,P.B.y=I.y}}function applyAllConstraints(_,T){projectHardSphereConstraints(_),projectBasalOrderingConstraints(_,T),projectMaxBasalDistanceConstraints(_,T),projectBasalCurveConstraints(_)}function processLoseApicalAdhesion(_,T){const R=_.cells[T];R.has_A=!1,R.stiffness_nuclei_apical*=.1;const P=[];let O={l:0,r:0,rl:0};for(let I=0;I<_.ap_links.length;I++){const L=_.ap_links[I];L.l===T&&(P.push(I),O.r=L.r),L.r===T&&(P.push(I),O.l=L.l)}if(P.length===1)_.ap_links.splice(P[0],1);else if(P.length===2){P.sort((U,G)=>G-U),_.ap_links.splice(P[0],1),_.ap_links.splice(P[1],1);const I=_.cells[O.l],L=_.cells[O.r];O.rl=Vector2.from(I.A).dist(Vector2.from(L.A)),_.ap_links.push(O)}}function processLoseBasalAdhesion(_,T){const R=_.cells[T];R.has_B=!1,R.stiffness_nuclei_basal*=.1;const P=[];let O={l:0,r:0};for(let I=0;I<_.ba_links.length;I++){const L=_.ba_links[I];L.l===T&&(P.push(I),O.r=L.r),L.r===T&&(P.push(I),O.l=L.l)}P.length===1?_.ba_links.splice(P[0],1):P.length===2&&(P.sort((I,L)=>L-I),_.ba_links.splice(P[0],1),_.ba_links.splice(P[1],1),_.ba_links.push(O))}function processLoseStraightness(_,T){const R=_.cells[T];R.stiffness_straightness=1}function processStartRunning(_,T){const R=_.cells[T];R.running_mode=3}function updateRunningState(_){_.is_running=!_.has_B&&_.B.y>-2&&(_.running_mode>=3||_.B.y<0&&_.running_mode>=1)}function processEMTEvents(_,T,R){const P=_.t;for(let O=0;O<_.cells.length;O++){const I=_.cells[O];P<=I.time_A&&P+R>I.time_A&&processLoseApicalAdhesion(_,O),P<=I.time_B&&P+R>I.time_B&&(console.log("Event B"),processLoseBasalAdhesion(_,O)),P<=I.time_S&&P+R>I.time_S&&processLoseStraightness(_,O),(I.time_P>I.time_B&&P<=I.time_P&&P+R>I.time_P||I.time_P<=I.time_B&&P<=I.time_B&&P+R>I.time_B)&&processStartRunning(_,O),updateRunningState(I)}}function processCellDivisions(_,T,R){let P=0;for(let O=0;O<_.cells.length;O++){const I=_.cells[O];if(I.phase!==CellPhase.Division)continue;const L=getCellType(T,I),U={basalPoint:Vector2.from(I.B),apicalPoint:Vector2.from(I.A),nucleusPosition:Vector2.from(I.pos)};if(I.typeIndex==="emt"){const G=createCell(T,_,R,U,L,I.typeIndex,I);G.id=I.id,_.cells[O]=G}else if(R.random()<T.general.p_div_out){const V=createCell(T,_,R,U,L,I.typeIndex,I);V.id=I.id,_.cells[O]=V}else{P++;const V=createCell(T,_,R,U,L,I.typeIndex,I);V.id=I.id,_.cells[O]=V;const Z=createCell(T,_,R,U,L,I.typeIndex,V),Y=.05*V.R_soft;V.pos.x-=Y,Z.pos.x+=Y,V.A.x-=Y,Z.A.x+=Y,V.B.x-=Y,Z.B.x+=Y;const W=_.cells.length;_.cells.push(Z),updateApicalLinksAfterDivision(_,T,O,W),updateBasalLinksAfterDivision(_,T,O,W)}}return P}function updateApicalLinksAfterDivision(_,T,R,P){for(const I of _.ap_links)I.l===R&&(I.l=P);const O=getCellType(T,_.cells[R]);_.ap_links.push({l:R,r:P,rl:O.apical_junction_init})}function updateBasalLinksAfterDivision(_,T,R,P){for(const O of _.ba_links)O.l===R&&(O.l=P);_.ba_links.push({l:R,r:P})}function updateCytoskeleton(_,T,R){for(const P of _.cells){const O=getCellType(T,P),I=Vector2.from(P.pos),L=Vector2.from(P.A),U=Vector2.from(P.B),G=I.dist(L),V=I.dist(U);let Z=0,Y=0;switch(P.phase+(P.has_inm?0:10)){case CellPhase.G2:case CellPhase.Mitosis:const ee=L.dist(U);Z=0,Y=Math.max(0,ee-2*P.R_soft);break;default:Z=Math.max(0,G-P.R_soft),Y=Math.max(0,V-P.R_soft)}P.phase===CellPhase.G2&&(P.stiffness_apical_apical=O.stiffness_apical_apical_div),P.phase===CellPhase.Mitosis&&(P.R_hard=O.R_hard_div),P.has_A||(Z=0),P.has_B||(Y=0);const J=Math.exp(-R*O.k_cytos);if(P.eta_A=J*(P.eta_A-Z)+Z,P.has_B?P.eta_B=J*(P.eta_B-Y)+Y:P.running_mode>=2&&P.B.y>0?P.eta_B=Vector2.from(P.B).dist(I)-P.R_soft:P.eta_B=J*(P.eta_B-Y)+Y,!P.is_running||P.has_B){const ee=O.max_cytoskeleton_length,te=P.eta_A+P.eta_B-ee;if(ee>0&&te>1){const ie=P.eta_A+P.eta_B,oe=P.eta_A*ee/ie,ae=P.eta_B*ee/ie;P.eta_A=J*(P.eta_A-oe)+oe,P.eta_B=J*(P.eta_B-ae)+ae}}}}function updateApicalJunctions(_,T,R){for(const P of _.ap_links){const O=_.cells[P.l],I=_.cells[P.r],L=getCellType(T,O),U=getCellType(T,I),G=.5*L.k_apical_junction+.5*U.k_apical_junction;P.rl=P.rl*Math.exp(-R*G)}}function integrateForces(_,T,R,P,O){const I=T.general.mu,L=Math.sqrt(O);for(let U=0;U<_.cells.length;U++){const G=_.cells[U],V=getCellType(T,G),Z=R[U],Y=V.diffusion;if(G.pos.x+=L*Y*P.gaussian(),G.pos.y+=L*Y*P.gaussian(),G.pos.x+=O*Z.f.x/I,G.pos.y+=O*Z.f.y/I,G.A.x+=O*Z.fA.x/I,G.A.y+=O*Z.fA.y/I,G.is_running){const W=Vector2.from(G.B),J=Vector2.from(G.pos);if(W.dist(J)<5){const ee=W.sub(J).normalize();G.B.x+=O*ee.x*V.running_speed,G.B.y+=O*ee.y*V.running_speed}}else G.B.x+=O*Z.fB.x/I,G.B.y+=O*Z.fB.y/I,G.has_B||(G.B.y+=O*Z.fB.y/I)}}function performTimestep(_,T,R){const P=T.general,O=P.dt;for(const U of _.cells){const G=getCellType(T,U);updateCellPhase(U,G,_.t)}const I=processCellDivisions(_,T,R);processEMTEvents(_,T,O),updateCytoskeleton(_,T,O),updateApicalJunctions(_,T,O);const L=O/P.n_substeps;for(let U=0;U<P.n_substeps;U++){_.t+=L;const G=calcAllForces(_,T);integrateForces(_,T,G,R,L),applyAllConstraints(_,T)}return _.step_count++,I}function getCurvatures(_,T){if(_?.geometry)return _.geometry;const R=computeEllipseFromPerimeter(T.general.perimeter,T.general.aspect_ratio);return{curvature_1:R.curvature_1,curvature_2:R.curvature_2}}const LIGHT_THEME$1={apicalPoint:9835540,basalPoint:0,apicalLink:6553600,basalLink:0,cytoskeleton:6566400,membrane:13421772},DARK_THEME$1={apicalPoint:16748431,basalPoint:16777215,apicalLink:16739179,basalLink:15658734,cytoskeleton:13935988,membrane:6710886};function rgbToHex(_,T,R){return _<<16|T<<8|R}function drawBasalCurve(_,T,R,P,O){if(T===0&&R===0){const I=P/2+5;_.moveTo(-I,0),_.lineTo(I,0),_.stroke({color:O.membrane,alpha:.5,width:.05})}else{const I=shapeCenter(T,R),L=T!==0?Math.abs(1/T):20,U=R!==0?Math.abs(1/R):20;_.ellipse(I.x,I.y,L,U),_.stroke({color:O.membrane,alpha:.5,width:.05})}}function drawCells$1(_,T,R,P){for(const O of T.cells){const L=(R.cell_types[O.typeIndex]??R.cell_types.control).color;_.circle(O.pos.x,O.pos.y,O.R_soft),_.fill({color:rgbToHex(L.r,L.g,L.b),alpha:.4}),_.circle(O.pos.x,O.pos.y,O.R_hard),_.fill({color:rgbToHex(L.r,L.g,L.b),alpha:1}),_.circle(O.A.x,O.A.y,.1),_.fill({color:P.apicalPoint,alpha:1}),_.circle(O.B.x,O.B.y,.1),_.fill({color:P.basalPoint,alpha:1}),_.moveTo(O.A.x,O.A.y),_.lineTo(O.pos.x,O.pos.y),_.lineTo(O.B.x,O.B.y),_.stroke({color:P.cytoskeleton,alpha:.5,width:.05})}}function drawApicalLinks(_,T,R){for(const P of T.ap_links){const O=T.cells[P.l],I=T.cells[P.r];O&&I&&(_.moveTo(O.A.x,O.A.y),_.lineTo(I.A.x,I.A.y))}_.stroke({color:R.apicalLink,alpha:1,width:.05})}function drawBasalLinks(_,T,R){for(const P of T.ba_links){const O=T.cells[P.l],I=T.cells[P.r];O&&I&&(_.moveTo(O.B.x,O.B.y),_.lineTo(I.B.x,I.B.y))}_.stroke({color:R.basalLink,alpha:1,width:.05})}const ehtRenderer={getBoundingBox(_,T){const{curvature_1:R,curvature_2:P}=getCurvatures(T,_),O=_.general.h_init,I=_.general.w_init,L=_.general.w_screen,U=_.general.h_screen;let G,V,Z,Y;if(R===0&&P===0){const ae=I/2+2;G=-ae,V=ae,Z=-2,Y=O+2}else{const ae=shapeCenter(R,P),ce=R!==0?Math.abs(1/R):20,le=P!==0?Math.abs(1/P):20;G=ae.x-ce,V=ae.x+ce;const he=ae.y-le,me=ae.y+le;Z=Math.min(he,0)-2,Y=Math.max(me,O)+2}const W=V-G,J=Y-Z,ee=(G+V)/2,te=(Z+Y)/2,ie=Math.max(W,L),oe=Math.max(J,U);return{minX:ee-ie/2,maxX:ee+ie/2,minY:te-oe/2,maxY:te+oe/2}},render(_,T,R){const P=_.isDark?DARK_THEME$1:LIGHT_THEME$1,O=_.graphics.cells,I=_.graphics.links,{curvature_1:L,curvature_2:U}=getCurvatures(T,R);drawBasalCurve(I,L,U,R.general.w_init,P),drawBasalLinks(I,T,P),drawApicalLinks(I,T,P),drawCells$1(O,T,R,P)},getBackgroundColor(_){return _?1120295:16777215}};function getNeighborIds(_,T,R){const P=[];for(const O of T)O.l===_?P.push(O.r):O.r===_&&P.push(O.l);return P.map(O=>R[O]?.id??O).join(";")}function getSnapshot(_){const T=[];for(let R=0;R<_.cells.length;R++){const P=_.cells[R];T.push({id:P.id,typeIndex:P.typeIndex,t:_.t,step_count:_.step_count,pos_x:P.pos.x,pos_y:P.pos.y,A_x:P.A.x,A_y:P.A.y,B_x:P.B.x,B_y:P.B.y,has_A:P.has_A,has_B:P.has_B,phase:P.phase,age:_.t-P.birth_time,is_running:P.is_running,running_mode:P.running_mode,has_inm:P.has_inm,eta_A:P.eta_A,eta_B:P.eta_B,R_soft:P.R_soft,R_hard:P.R_hard,time_A:P.time_A,time_B:P.time_B,time_S:P.time_S,time_P:P.time_P,apical_neighbors:getNeighborIds(R,_.ap_links,_.cells),basal_neighbors:getNeighborIds(R,_.ba_links,_.cells),curvature_1:_.geometry?.curvature_1??0,curvature_2:_.geometry?.curvature_2??0})}return T}function loadSnapshot(_,T){if(_.length===0)return{cells:[],ap_links:[],ba_links:[],t:0,step_count:0,basalGeometry:createBasalGeometry(0,0,360),rngSeed:String(T.general.random_seed)};const R=_[0],P=Number(R.t),O=Number(R.step_count),I=Number(R.curvature_1),L=Number(R.curvature_2),U={cells:[],ap_links:[],ba_links:[],t:P,step_count:O,geometry:{curvature_1:I,curvature_2:L},basalGeometry:createBasalGeometry(I,L,360),rngSeed:String(T.general.random_seed)},G=new Map;for(let V=0;V<_.length;V++){const Z=_[V],Y=Number(Z.id);G.set(Y,V);const W={id:Y,typeIndex:String(Z.typeIndex),pos:{x:Number(Z.pos_x),y:Number(Z.pos_y)},A:{x:Number(Z.A_x),y:Number(Z.A_y)},B:{x:Number(Z.B_x),y:Number(Z.B_y)},has_A:!!Z.has_A,has_B:!!Z.has_B,phase:Number(Z.phase),birth_time:P-Number(Z.age),division_time:0,is_running:!!Z.is_running,running_mode:Number(Z.running_mode),has_inm:!!Z.has_inm,eta_A:Number(Z.eta_A),eta_B:Number(Z.eta_B),R_soft:Number(Z.R_soft),R_hard:Number(Z.R_hard),time_A:Number(Z.time_A),time_B:Number(Z.time_B),time_S:Number(Z.time_S),time_P:Number(Z.time_P),stiffness_apical_apical:1,stiffness_straightness:Number(Z.time_S)<P?1:100,stiffness_nuclei_apical:Z.has_A?1:.1,stiffness_nuclei_basal:Z.has_B?1:.1},J=T.cell_types[W.typeIndex]||T.cell_types.control;W.stiffness_apical_apical=J.stiffness_apical_apical,Z.has_A?W.stiffness_nuclei_apical=J.stiffness_nuclei_apical:W.stiffness_nuclei_apical=J.stiffness_nuclei_apical*.1,Z.has_B?W.stiffness_nuclei_basal=J.stiffness_nuclei_basal:W.stiffness_nuclei_basal=J.stiffness_nuclei_basal*.1,W.time_S&&P>W.time_S?W.stiffness_straightness=1:W.stiffness_straightness=J.stiffness_straightness,W.division_time=W.birth_time+(J.lifespan_end+J.lifespan_start)/2,U.cells.push(W)}for(let V=0;V<_.length;V++){const Z=_[V],Y=V,W=String(Z.apical_neighbors||"").split(";").filter(ee=>ee!=="");for(const ee of W){const te=Number(ee),ie=G.get(te);if(ie!==void 0&&ie>Y){const oe=U.cells[Y],ae=U.cells[ie],ce=Math.sqrt(Math.pow(oe.A.x-ae.A.x,2)+Math.pow(oe.A.y-ae.A.y,2));U.ap_links.push({l:Y,r:ie,rl:ce})}}const J=String(Z.basal_neighbors||"").split(";").filter(ee=>ee!=="");for(const ee of J){const te=Number(ee),ie=G.get(te);ie!==void 0&&ie>Y&&U.ba_links.push({l:Y,r:ie})}}return U}const EHTModel={id:"EHT",name:"Epithelial-to-Hematopoietic Transition",version:"1.0.0",description:"Simulates cell mechanics, division, and EMT events in curved epithelial tissue.",defaultParams:DEFAULT_EHT_PARAMS,validateParams(_){return ehtParamsSchema.parse(_)},init:(_,T)=>{const R=T??String(_.general.random_seed),P=new SeededRandom(R),O=createInitialEHTState(R);return initializeEHTSimulation(_,O,P),O},step:(_,T,R)=>{const P=new SeededRandom(`${_.rngSeed}_step_${_.step_count}`);return performTimestep(_,R,P),_},getSnapshot:_=>getSnapshot(_),loadSnapshot:(_,T)=>loadSnapshot(_,T),computeStats:(_,T)=>computeEHTStatistics(_,T),statistics:generateEHTStatistics(DEFAULT_EHT_PARAMS),generateStatistics:_=>generateEHTStatistics(_),generateBatchParameters:_=>generateEHTBatchParameters(_),batchParameters:EHT_BATCH_PARAMETERS,renderer:ehtRenderer,ui:ehtUI},boundaryTypeSchema=_enum(["periodic","box","none"]),toyGeneralSchema=object$1({N:number$5().int().positive(),soft_radius:number$5().positive(),repulsion_strength:number$5().nonnegative(),running_speed:number$5().nonnegative(),tumble_speed:number$5().nonnegative(),running_duration:number$5().positive(),tumbling_duration:number$5().positive(),tumbling_period:number$5().positive(),boundary_type:boundaryTypeSchema,domain_size:tuple([number$5().positive(),number$5().positive()]),t_end:number$5().positive(),dt:number$5().positive(),random_seed:number$5().int(),mu:number$5().positive(),n_substeps:number$5().int().positive(),N_max:number$5().int().positive(),w_screen:number$5().positive(),h_screen:number$5().positive()}),metadataSchema=object$1({model:literal("Toy"),version:string$1()}),toyParamsSchema=object$1({metadata:metadataSchema,general:toyGeneralSchema}),DEFAULT_TOY_GENERAL={N:20,soft_radius:5,repulsion_strength:10,running_speed:2,tumble_speed:.5,running_duration:5,tumbling_duration:2,tumbling_period:.5,boundary_type:"box",domain_size:[100,100],t_end:60,dt:.1,random_seed:42,mu:1,n_substeps:1,w_screen:100,h_screen:100},DEFAULT_TOY_PARAMS={metadata:{model:"Toy",version:"1.0.0"},general:DEFAULT_TOY_GENERAL};function mean$1(_){return _.length===0?0:_.reduce((T,R)=>T+R,0)/_.length}const TOY_STATISTICS=[{id:"n_cells",label:"Cell Count",description:"Total number of cells",compute:_=>_.cells.length},{id:"running_fraction",label:"Running Fraction",description:"Fraction of cells currently in running phase",compute:_=>_.cells.filter(T=>T.phase==="running").length/(_.cells.length||1)},{id:"avg_x",label:"Avg X Position",description:"Average X position of all cells",compute:_=>mean$1(_.cells.map(T=>T.position.x))},{id:"avg_y",label:"Avg Y Position",description:"Average Y position of all cells",compute:_=>mean$1(_.cells.map(T=>T.position.y))}];function generateToyStatistics(_){return TOY_STATISTICS}function computeToyStatistics(_,T){const R={};for(const P of TOY_STATISTICS)R[P.id]=P.compute(_);return R}const BOUNDARY_OPTIONS=[{value:"periodic",label:"Periodic"},{value:"box",label:"Box"},{value:"none",label:"None"}];function ToyParametersTab({params:_,onChange:T,disabled:R}){const P=(L,U)=>{const G=structuredClone(_);G.general[L]=U,T(G)},O=(L,U)=>{const G=structuredClone(_);G.general.domain_size[L]=U,T(G)},I=_.general;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Cell Population"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(IntegerInput,{label:"Number of Cells",value:I.N,onChange:L=>P("N",L),disabled:R,min:1}),jsxRuntimeExports.jsx(NumberInput,{label:"Soft Radius",value:I.soft_radius,onChange:L=>P("soft_radius",L),disabled:R,step:.5,min:0}),jsxRuntimeExports.jsx(NumberInput,{label:"Repulsion",value:I.repulsion_strength,onChange:L=>P("repulsion_strength",L),disabled:R,step:1,min:0})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Movement"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(NumberInput,{label:"Running Speed",value:I.running_speed,onChange:L=>P("running_speed",L),disabled:R,step:.1,min:0}),jsxRuntimeExports.jsx(NumberInput,{label:"Tumble Speed",value:I.tumble_speed,onChange:L=>P("tumble_speed",L),disabled:R,step:.1,min:0}),jsxRuntimeExports.jsx(NumberInput,{label:"Run Duration",value:I.running_duration,onChange:L=>P("running_duration",L),disabled:R,step:.5,min:0}),jsxRuntimeExports.jsx(NumberInput,{label:"Tumble Duration",value:I.tumbling_duration,onChange:L=>P("tumbling_duration",L),disabled:R,step:.5,min:0}),jsxRuntimeExports.jsx(NumberInput,{label:"Tumble Period",value:I.tumbling_period,onChange:L=>P("tumbling_period",L),disabled:R,step:.1,min:0})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Domain"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(ComboBox,{label:"Boundary Type",value:I.boundary_type,options:BOUNDARY_OPTIONS,onChange:L=>P("boundary_type",L),disabled:R}),jsxRuntimeExports.jsx(NumberInput,{label:"Domain Width",value:I.domain_size[0],onChange:L=>O(0,L),disabled:R,step:10,min:1}),jsxRuntimeExports.jsx(NumberInput,{label:"Domain Height",value:I.domain_size[1],onChange:L=>O(1,L),disabled:R,step:10,min:1})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Physics"}),jsxRuntimeExports.jsx("div",{className:"space-y-2 pl-2",children:jsxRuntimeExports.jsx(NumberInput,{label:"Friction (mu)",value:I.mu,onChange:L=>P("mu",L),disabled:R,step:.1,min:0})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"General"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(NumberInput,{label:"End Time",value:I.t_end,onChange:L=>P("t_end",L),disabled:R,step:1,min:0}),jsxRuntimeExports.jsx(IntegerInput,{label:"Random Seed",value:I.random_seed,onChange:L=>P("random_seed",L),disabled:R})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Display"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(IntegerInput,{label:"Screen Width",value:I.w_screen,onChange:L=>P("w_screen",L),disabled:R,min:10}),jsxRuntimeExports.jsx(IntegerInput,{label:"Screen Height",value:I.h_screen,onChange:L=>P("h_screen",L),disabled:R,min:10})]})]})]})}function ToySimulationTab({params:_,onChange:T,disabled:R}){const P=(I,L)=>{const U=structuredClone(_);U.general[I]=L,T(U)},O=_.general;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Time Stepping"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 pl-2",children:[jsxRuntimeExports.jsx(NumberInput,{label:"Time Step (dt)",value:O.dt,onChange:I=>P("dt",I),disabled:R,step:.01,min:.001}),jsxRuntimeExports.jsx(IntegerInput,{label:"Substeps",value:O.n_substeps,onChange:I=>P("n_substeps",I),disabled:R,min:1})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-muted/50 rounded-md text-xs text-muted-foreground",children:[jsxRuntimeExports.jsx("p",{className:"font-medium mb-1",children:"Notes:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-0.5",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"dt"}),": Time step for physics integration"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"n_substeps"}),": Number of physics steps per output step"]})]})]})]})}const toyUI={ParametersTab:ToyParametersTab,SimulationTab:ToySimulationTab},LIGHT_THEME={cellFill:4886745,cellStroke:2904706,polarityRunning:4766584,polarityTumbling:15567158,boundary:13421772},DARK_THEME={cellFill:6534125,cellStroke:9489908,polarityRunning:6869905,polarityTumbling:16503693,boundary:6710886};function drawBoundary(_,T,R){const{boundary_type:P,domain_size:O}=T.general,[I,L]=O;P!=="none"&&(_.rect(0,0,I,L),P==="periodic"?_.stroke({color:R.boundary,alpha:.5,width:.1}):_.stroke({color:R.boundary,alpha:.8,width:.15}))}function drawCells(_,T,R,P){const{soft_radius:O}=R.general;for(const I of T.cells){const U=I.phase==="running"?P.polarityRunning:P.polarityTumbling;_.circle(I.position.x,I.position.y,O),_.fill({color:P.cellFill,alpha:.6}),_.stroke({color:P.cellStroke,alpha:1,width:.05});const G=O*.8,V=I.position.x+I.polarity.x*G,Z=I.position.y+I.polarity.y*G;_.moveTo(I.position.x,I.position.y),_.lineTo(V,Z),_.stroke({color:U,alpha:1,width:.1});const Y=O*.3,W=Math.atan2(I.polarity.y,I.polarity.x),J=Math.PI/6;_.moveTo(V,Z),_.lineTo(V-Y*Math.cos(W-J),Z-Y*Math.sin(W-J)),_.moveTo(V,Z),_.lineTo(V-Y*Math.cos(W+J),Z-Y*Math.sin(W+J)),_.stroke({color:U,alpha:1,width:.1})}}const toyRenderer={getBoundingBox(_,T){const[R,P]=_.general.domain_size,O=_.general.soft_radius*2;return{minX:-O,maxX:R+O,minY:-O,maxY:P+O}},render(_,T,R){const P=_.isDark?DARK_THEME:LIGHT_THEME,O=_.graphics.cells,I=_.graphics.links;drawBoundary(I,R,P),drawCells(O,T,R,P)},getBackgroundColor(_){return _?1120295:16777215}},ToyModel={id:"Toy",name:"Run & Tumble (Toy)",version:"1.0.0",description:"Simple run-and-tumble model for demonstration purposes.",defaultParams:DEFAULT_TOY_PARAMS,validateParams(_){return toyParamsSchema.parse(_)},init:(_,T)=>{const R=T??String(_.general.random_seed),P=new SeededRandom(R),{N:O,domain_size:I}=_.general,[L,U]=I,G=[];for(let V=0;V<O;V++){const Z=P.random(L),Y=P.random(U),W=P.random(2*Math.PI),J=P.random()>.5?"running":"tumbling";G.push({id:V,position:new Vector2(Z,Y),prevPosition:new Vector2(Z,Y),polarity:new Vector2(Math.cos(W),Math.sin(W)),phase:J,phaseTime:0,timeSinceLastTumble:0})}return{time:0,cells:G,stepCount:0,rngSeed:R}},step:(_,T,R)=>{const P=new SeededRandom(`${_.rngSeed}_step_${_.stepCount}`),{soft_radius:O,repulsion_strength:I,running_speed:L,tumble_speed:U,mu:G,boundary_type:V,domain_size:Z,running_duration:Y,tumbling_duration:W,tumbling_period:J}=R.general,[ee,te]=Z,ie=_.cells;for(const ae of ie)if(ae.phaseTime+=T,ae.phase==="running"){if(ae.phaseTime>=Y){ae.phase="tumbling",ae.phaseTime=0,ae.timeSinceLastTumble=0;const ce=P.random(2*Math.PI);ae.polarity=new Vector2(Math.cos(ce),Math.sin(ce))}}else{if(ae.timeSinceLastTumble+=T,ae.timeSinceLastTumble>=J){const ce=P.random(2*Math.PI);ae.polarity=new Vector2(Math.cos(ce),Math.sin(ce)),ae.timeSinceLastTumble=0}ae.phaseTime>=W&&(ae.phase="running",ae.phaseTime=0)}const oe=ie.map(()=>Vector2.zero());for(let ae=0;ae<ie.length;ae++)for(let ce=ae+1;ce<ie.length;ce++){const le=ie[ae],he=ie[ce],me=le.position.x-he.position.x,fe=le.position.y-he.position.y,ue=me*me+fe*fe,pe=O;if(ue<pe*pe&&ue>0){const ge=Math.sqrt(ue),_e=pe-ge,we=I*_e*me/ge,be=I*_e*fe/ge,Ce=new Vector2(we,be);oe[ae]=oe[ae].add(Ce),oe[ce]=oe[ce].sub(Ce)}}for(let ae=0;ae<ie.length;ae++){const ce=ie[ae],le=ce.phase==="running"?L:U,he=ce.polarity.mult(le*G);oe[ae]=oe[ae].add(he)}for(let ae=0;ae<ie.length;ae++){const ce=ie[ae],le=oe[ae];ce.prevPosition=ce.position;const he=le.x*T/G,me=le.y*T/G;ce.position=new Vector2(ce.position.x+he,ce.position.y+me),V==="periodic"?ce.position=new Vector2((ce.position.x%ee+ee)%ee,(ce.position.y%te+te)%te):V==="box"&&(ce.position=new Vector2(Math.max(0,Math.min(ee,ce.position.x)),Math.max(0,Math.min(te,ce.position.y))))}return _.time+=T,_.stepCount+=1,_},getSnapshot:_=>_.cells.map(T=>({id:T.id,t:_.time,pos_x:T.position.x,pos_y:T.position.y,phase:T.phase,pol_x:T.polarity.x,pol_y:T.polarity.y})),loadSnapshot:(_,T)=>{if(_.length===0)return{time:0,cells:[],stepCount:0,rngSeed:String(T.general.random_seed)};const R=Number(_[0].t),P=_.map(I=>({id:Number(I.id),position:new Vector2(Number(I.pos_x),Number(I.pos_y)),prevPosition:new Vector2(Number(I.pos_x),Number(I.pos_y)),polarity:new Vector2(Number(I.pol_x),Number(I.pol_y)),phase:I.phase,phaseTime:0,timeSinceLastTumble:0})),O=Math.round(R/T.general.dt);return{time:R,cells:P,stepCount:O,rngSeed:String(T.general.random_seed)}},computeStats:(_,T)=>computeToyStatistics(_),statistics:TOY_STATISTICS,generateStatistics:_=>generateToyStatistics(),renderer:toyRenderer,ui:toyUI};console.log("[Models] Loading index");modelRegistry.register(EHTModel);modelRegistry.register(ToyModel);modelRegistry.setDefault(EHTModel.id);const ModelContext=reactExports.createContext(void 0);function ModelProvider({children:_}){const T=modelRegistry.getModelNames(),R=modelRegistry.getDefault()||(T.length>0?modelRegistry.get(T[0]):void 0);if(!R)throw new Error("No models registered. Import @/models to register models.");const[P,O]=reactExports.useState(R),[I,L]=reactExports.useState(R.defaultParams),U=reactExports.useCallback(V=>{const Z=modelRegistry.get(V);Z?(O(Z),L(Z.defaultParams)):console.warn(`Model "${V}" not found in registry`)},[]),G=reactExports.useCallback(V=>{L(V)},[]);return jsxRuntimeExports.jsx(ModelContext.Provider,{value:{currentModel:P,currentParams:I,setModel:U,setParams:G,availableModels:T},children:_})}function useModel(){const _=reactExports.useContext(ModelContext);if(!_)throw new Error("useModel must be used within a ModelProvider");return _}function ModelSelector(){const{currentModel:_,setModel:T,availableModels:R}=useModel();return R.length<=1?null:jsxRuntimeExports.jsxs(Select,{value:_.id,onValueChange:T,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-[180px]",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select model"})}),jsxRuntimeExports.jsx(SelectContent,{children:R.map(P=>{const O=modelRegistry.get(P),I=O?O.version:"",L=O?.name||P;return jsxRuntimeExports.jsxs(SelectItem,{value:P,children:[L," ",I&&`v${I}`]},P)})})]})}function Header$1({isDark:_,onToggleTheme:T}){return jsxRuntimeExports.jsx("header",{className:"border-b bg-card",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold",children:"EHT Simulator"}),jsxRuntimeExports.jsx(ModelSelector,{})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",onClick:T,"aria-label":"Toggle theme",children:_?jsxRuntimeExports.jsx(Sun,{className:"h-5 w-5"}):jsxRuntimeExports.jsx(Moon,{className:"h-5 w-5"})})]})})}const ThemeContext=reactExports.createContext(void 0);function ThemeProvider({children:_}){const[T,R]=reactExports.useState(()=>typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!1);reactExports.useEffect(()=>{document.documentElement.classList.toggle("dark",T)},[T]);const P=()=>R(O=>!O);return jsxRuntimeExports.jsx(ThemeContext.Provider,{value:{isDark:T,toggleTheme:P},children:_})}function useTheme(){const _=reactExports.useContext(ThemeContext);if(!_)throw new Error("useTheme must be used within a ThemeProvider");return _}const MessagesContext=reactExports.createContext(null);let messageIdCounter=0;function MessagesProvider({children:_}){const[T,R]=reactExports.useState([]),P=reactExports.useCallback((I,L="info")=>{const U={id:messageIdCounter++,type:L,text:I,timestamp:new Date};R(G=>[...G,U])},[]),O=reactExports.useCallback(()=>{R([])},[]);return jsxRuntimeExports.jsx(MessagesContext.Provider,{value:{messages:T,addMessage:P,clearMessages:O},children:_})}function useMessages(){const _=reactExports.useContext(MessagesContext);if(!_)throw new Error("useMessages must be used within a MessagesProvider");return _}function AppLayoutInner({children:_}){const{isDark:T,toggleTheme:R}=useTheme();return jsxRuntimeExports.jsxs("div",{className:"min-h-screen flex flex-col bg-background text-foreground",children:[jsxRuntimeExports.jsx(Header$1,{isDark:T,onToggleTheme:R}),jsxRuntimeExports.jsx("main",{className:"flex-1 container mx-auto px-4 py-4",children:_})]})}function AppLayout({children:_}){return jsxRuntimeExports.jsx(ThemeProvider,{children:jsxRuntimeExports.jsx(AppLayoutInner,{children:_})})}const scriptRel="modulepreload",assetsURL=function(_){return"/"+_},seen={},__vitePreload=function(T,R,P){let O=Promise.resolve();if(R&&R.length>0){let G=function(V){return Promise.all(V.map(Z=>Promise.resolve(Z).then(Y=>({status:"fulfilled",value:Y}),Y=>({status:"rejected",reason:Y}))))};document.getElementsByTagName("link");const L=document.querySelector("meta[property=csp-nonce]"),U=L?.nonce||L?.getAttribute("nonce");O=G(R.map(V=>{if(V=assetsURL(V),V in seen)return;seen[V]=!0;const Z=V.endsWith(".css"),Y=Z?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${V}"]${Y}`))return;const W=document.createElement("link");if(W.rel=Z?"stylesheet":scriptRel,Z||(W.as="script"),W.crossOrigin="",W.href=V,U&&W.setAttribute("nonce",U),document.head.appendChild(W),Z)return new Promise((J,ee)=>{W.addEventListener("load",J),W.addEventListener("error",()=>ee(new Error(`Unable to preload CSS for ${V}`)))})}))}function I(L){const U=new Event("vite:preloadError",{cancelable:!0});if(U.payload=L,window.dispatchEvent(U),!U.defaultPrevented)throw L}return O.then(L=>{for(const U of L||[])U.status==="rejected"&&I(U.reason);return T().catch(I)})};var ExtensionType=(_=>(_.Application="application",_.WebGLPipes="webgl-pipes",_.WebGLPipesAdaptor="webgl-pipes-adaptor",_.WebGLSystem="webgl-system",_.WebGPUPipes="webgpu-pipes",_.WebGPUPipesAdaptor="webgpu-pipes-adaptor",_.WebGPUSystem="webgpu-system",_.CanvasSystem="canvas-system",_.CanvasPipesAdaptor="canvas-pipes-adaptor",_.CanvasPipes="canvas-pipes",_.Asset="asset",_.LoadParser="load-parser",_.ResolveParser="resolve-parser",_.CacheParser="cache-parser",_.DetectionParser="detection-parser",_.MaskEffect="mask-effect",_.BlendMode="blend-mode",_.TextureSource="texture-source",_.Environment="environment",_.ShapeBuilder="shape-builder",_.Batcher="batcher",_))(ExtensionType||{});const normalizeExtension=_=>{if(typeof _=="function"||typeof _=="object"&&_.extension){if(!_.extension)throw new Error("Extension class must have an extension object");_={...typeof _.extension!="object"?{type:_.extension}:_.extension,ref:_}}if(typeof _=="object")_={..._};else throw new Error("Invalid extension type");return typeof _.type=="string"&&(_.type=[_.type]),_},normalizeExtensionPriority=(_,T)=>normalizeExtension(_).priority??T,extensions={_addHandlers:{},_removeHandlers:{},_queue:{},remove(..._){return _.map(normalizeExtension).forEach(T=>{T.type.forEach(R=>this._removeHandlers[R]?.(T))}),this},add(..._){return _.map(normalizeExtension).forEach(T=>{T.type.forEach(R=>{const P=this._addHandlers,O=this._queue;P[R]?P[R]?.(T):(O[R]=O[R]||[],O[R]?.push(T))})}),this},handle(_,T,R){const P=this._addHandlers,O=this._removeHandlers;if(P[_]||O[_])throw new Error(`Extension type ${_} already has a handler`);P[_]=T,O[_]=R;const I=this._queue;return I[_]&&(I[_]?.forEach(L=>T(L)),delete I[_]),this},handleByMap(_,T){return this.handle(_,R=>{R.name&&(T[R.name]=R.ref)},R=>{R.name&&delete T[R.name]})},handleByNamedList(_,T,R=-1){return this.handle(_,P=>{T.findIndex(I=>I.name===P.name)>=0||(T.push({name:P.name,value:P.ref}),T.sort((I,L)=>normalizeExtensionPriority(L.value,R)-normalizeExtensionPriority(I.value,R)))},P=>{const O=T.findIndex(I=>I.name===P.name);O!==-1&&T.splice(O,1)})},handleByList(_,T,R=-1){return this.handle(_,P=>{T.includes(P.ref)||(T.push(P.ref),T.sort((O,I)=>normalizeExtensionPriority(I,R)-normalizeExtensionPriority(O,R)))},P=>{const O=T.indexOf(P.ref);O!==-1&&T.splice(O,1)})},mixin(_,...T){for(const R of T)Object.defineProperties(_.prototype,Object.getOwnPropertyDescriptors(R))}},browserExt={extension:{type:ExtensionType.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await __vitePreload(()=>import("./browserAll-DpxGOc4a.js"),__vite__mapDeps([0,1,2]))}},webworkerExt={extension:{type:ExtensionType.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await __vitePreload(()=>import("./webworkerAll-BAz5mTGW.js"),__vite__mapDeps([1,2]))}};class ObservablePoint{constructor(T,R,P){this._x=R||0,this._y=P||0,this._observer=T}clone(T){return new ObservablePoint(T??this._observer,this._x,this._y)}set(T=0,R=T){return(this._x!==T||this._y!==R)&&(this._x=T,this._y=R,this._observer._onUpdate(this)),this}copyFrom(T){return(this._x!==T.x||this._y!==T.y)&&(this._x=T.x,this._y=T.y,this._observer._onUpdate(this)),this}copyTo(T){return T.set(this._x,this._y),T}equals(T){return T.x===this._x&&T.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(T){this._x!==T&&(this._x=T,this._observer._onUpdate(this))}get y(){return this._y}set y(T){this._y!==T&&(this._y=T,this._observer._onUpdate(this))}}var eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,(function(_){var T=Object.prototype.hasOwnProperty,R="~";function P(){}Object.create&&(P.prototype=Object.create(null),new P().__proto__||(R=!1));function O(G,V,Z){this.fn=G,this.context=V,this.once=Z||!1}function I(G,V,Z,Y,W){if(typeof Z!="function")throw new TypeError("The listener must be a function");var J=new O(Z,Y||G,W),ee=R?R+V:V;return G._events[ee]?G._events[ee].fn?G._events[ee]=[G._events[ee],J]:G._events[ee].push(J):(G._events[ee]=J,G._eventsCount++),G}function L(G,V){--G._eventsCount===0?G._events=new P:delete G._events[V]}function U(){this._events=new P,this._eventsCount=0}U.prototype.eventNames=function(){var V=[],Z,Y;if(this._eventsCount===0)return V;for(Y in Z=this._events)T.call(Z,Y)&&V.push(R?Y.slice(1):Y);return Object.getOwnPropertySymbols?V.concat(Object.getOwnPropertySymbols(Z)):V},U.prototype.listeners=function(V){var Z=R?R+V:V,Y=this._events[Z];if(!Y)return[];if(Y.fn)return[Y.fn];for(var W=0,J=Y.length,ee=new Array(J);W<J;W++)ee[W]=Y[W].fn;return ee},U.prototype.listenerCount=function(V){var Z=R?R+V:V,Y=this._events[Z];return Y?Y.fn?1:Y.length:0},U.prototype.emit=function(V,Z,Y,W,J,ee){var te=R?R+V:V;if(!this._events[te])return!1;var ie=this._events[te],oe=arguments.length,ae,ce;if(ie.fn){switch(ie.once&&this.removeListener(V,ie.fn,void 0,!0),oe){case 1:return ie.fn.call(ie.context),!0;case 2:return ie.fn.call(ie.context,Z),!0;case 3:return ie.fn.call(ie.context,Z,Y),!0;case 4:return ie.fn.call(ie.context,Z,Y,W),!0;case 5:return ie.fn.call(ie.context,Z,Y,W,J),!0;case 6:return ie.fn.call(ie.context,Z,Y,W,J,ee),!0}for(ce=1,ae=new Array(oe-1);ce<oe;ce++)ae[ce-1]=arguments[ce];ie.fn.apply(ie.context,ae)}else{var le=ie.length,he;for(ce=0;ce<le;ce++)switch(ie[ce].once&&this.removeListener(V,ie[ce].fn,void 0,!0),oe){case 1:ie[ce].fn.call(ie[ce].context);break;case 2:ie[ce].fn.call(ie[ce].context,Z);break;case 3:ie[ce].fn.call(ie[ce].context,Z,Y);break;case 4:ie[ce].fn.call(ie[ce].context,Z,Y,W);break;default:if(!ae)for(he=1,ae=new Array(oe-1);he<oe;he++)ae[he-1]=arguments[he];ie[ce].fn.apply(ie[ce].context,ae)}}return!0},U.prototype.on=function(V,Z,Y){return I(this,V,Z,Y,!1)},U.prototype.once=function(V,Z,Y){return I(this,V,Z,Y,!0)},U.prototype.removeListener=function(V,Z,Y,W){var J=R?R+V:V;if(!this._events[J])return this;if(!Z)return L(this,J),this;var ee=this._events[J];if(ee.fn)ee.fn===Z&&(!W||ee.once)&&(!Y||ee.context===Y)&&L(this,J);else{for(var te=0,ie=[],oe=ee.length;te<oe;te++)(ee[te].fn!==Z||W&&!ee[te].once||Y&&ee[te].context!==Y)&&ie.push(ee[te]);ie.length?this._events[J]=ie.length===1?ie[0]:ie:L(this,J)}return this},U.prototype.removeAllListeners=function(V){var Z;return V?(Z=R?R+V:V,this._events[Z]&&L(this,Z)):(this._events=new P,this._eventsCount=0),this},U.prototype.off=U.prototype.removeListener,U.prototype.addListener=U.prototype.on,U.prefixed=R,U.EventEmitter=U,_.exports=U})(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports),PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180;class Point{constructor(T=0,R=0){this.x=0,this.y=0,this.x=T,this.y=R}clone(){return new Point(this.x,this.y)}copyFrom(T){return this.set(T.x,T.y),this}copyTo(T){return T.set(this.x,this.y),T}equals(T){return T.x===this.x&&T.y===this.y}set(T=0,R=T){return this.x=T,this.y=R,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return tempPoint.x=0,tempPoint.y=0,tempPoint}}const tempPoint=new Point;class Matrix{constructor(T=1,R=0,P=0,O=1,I=0,L=0){this.array=null,this.a=T,this.b=R,this.c=P,this.d=O,this.tx=I,this.ty=L}fromArray(T){this.a=T[0],this.b=T[1],this.c=T[3],this.d=T[4],this.tx=T[2],this.ty=T[5]}set(T,R,P,O,I,L){return this.a=T,this.b=R,this.c=P,this.d=O,this.tx=I,this.ty=L,this}toArray(T,R){this.array||(this.array=new Float32Array(9));const P=R||this.array;return T?(P[0]=this.a,P[1]=this.b,P[2]=0,P[3]=this.c,P[4]=this.d,P[5]=0,P[6]=this.tx,P[7]=this.ty,P[8]=1):(P[0]=this.a,P[1]=this.c,P[2]=this.tx,P[3]=this.b,P[4]=this.d,P[5]=this.ty,P[6]=0,P[7]=0,P[8]=1),P}apply(T,R){R=R||new Point;const P=T.x,O=T.y;return R.x=this.a*P+this.c*O+this.tx,R.y=this.b*P+this.d*O+this.ty,R}applyInverse(T,R){R=R||new Point;const P=this.a,O=this.b,I=this.c,L=this.d,U=this.tx,G=this.ty,V=1/(P*L+I*-O),Z=T.x,Y=T.y;return R.x=L*V*Z+-I*V*Y+(G*I-U*L)*V,R.y=P*V*Y+-O*V*Z+(-G*P+U*O)*V,R}translate(T,R){return this.tx+=T,this.ty+=R,this}scale(T,R){return this.a*=T,this.d*=R,this.c*=T,this.b*=R,this.tx*=T,this.ty*=R,this}rotate(T){const R=Math.cos(T),P=Math.sin(T),O=this.a,I=this.c,L=this.tx;return this.a=O*R-this.b*P,this.b=O*P+this.b*R,this.c=I*R-this.d*P,this.d=I*P+this.d*R,this.tx=L*R-this.ty*P,this.ty=L*P+this.ty*R,this}append(T){const R=this.a,P=this.b,O=this.c,I=this.d;return this.a=T.a*R+T.b*O,this.b=T.a*P+T.b*I,this.c=T.c*R+T.d*O,this.d=T.c*P+T.d*I,this.tx=T.tx*R+T.ty*O+this.tx,this.ty=T.tx*P+T.ty*I+this.ty,this}appendFrom(T,R){const P=T.a,O=T.b,I=T.c,L=T.d,U=T.tx,G=T.ty,V=R.a,Z=R.b,Y=R.c,W=R.d;return this.a=P*V+O*Y,this.b=P*Z+O*W,this.c=I*V+L*Y,this.d=I*Z+L*W,this.tx=U*V+G*Y+R.tx,this.ty=U*Z+G*W+R.ty,this}setTransform(T,R,P,O,I,L,U,G,V){return this.a=Math.cos(U+V)*I,this.b=Math.sin(U+V)*I,this.c=-Math.sin(U-G)*L,this.d=Math.cos(U-G)*L,this.tx=T-(P*this.a+O*this.c),this.ty=R-(P*this.b+O*this.d),this}prepend(T){const R=this.tx;if(T.a!==1||T.b!==0||T.c!==0||T.d!==1){const P=this.a,O=this.c;this.a=P*T.a+this.b*T.c,this.b=P*T.b+this.b*T.d,this.c=O*T.a+this.d*T.c,this.d=O*T.b+this.d*T.d}return this.tx=R*T.a+this.ty*T.c+T.tx,this.ty=R*T.b+this.ty*T.d+T.ty,this}decompose(T){const R=this.a,P=this.b,O=this.c,I=this.d,L=T.pivot,U=-Math.atan2(-O,I),G=Math.atan2(P,R),V=Math.abs(U+G);return V<1e-5||Math.abs(PI_2-V)<1e-5?(T.rotation=G,T.skew.x=T.skew.y=0):(T.rotation=0,T.skew.x=U,T.skew.y=G),T.scale.x=Math.sqrt(R*R+P*P),T.scale.y=Math.sqrt(O*O+I*I),T.position.x=this.tx+(L.x*R+L.y*O),T.position.y=this.ty+(L.x*P+L.y*I),T}invert(){const T=this.a,R=this.b,P=this.c,O=this.d,I=this.tx,L=T*O-R*P;return this.a=O/L,this.b=-R/L,this.c=-P/L,this.d=T/L,this.tx=(P*this.ty-O*I)/L,this.ty=-(T*this.ty-R*I)/L,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const T=new Matrix;return T.a=this.a,T.b=this.b,T.c=this.c,T.d=this.d,T.tx=this.tx,T.ty=this.ty,T}copyTo(T){return T.a=this.a,T.b=this.b,T.c=this.c,T.d=this.d,T.tx=this.tx,T.ty=this.ty,T}copyFrom(T){return this.a=T.a,this.b=T.b,this.c=T.c,this.d=T.d,this.tx=T.tx,this.ty=T.ty,this}equals(T){return T.a===this.a&&T.b===this.b&&T.c===this.c&&T.d===this.d&&T.tx===this.tx&&T.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return identityMatrix$1.identity()}static get shared(){return tempMatrix$3.identity()}}const tempMatrix$3=new Matrix,identityMatrix$1=new Matrix,ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init$1(){for(let _=0;_<16;_++){const T=[];rotationCayley.push(T);for(let R=0;R<16;R++){const P=signum(ux[_]*ux[R]+vx[_]*uy[R]),O=signum(uy[_]*ux[R]+vy[_]*uy[R]),I=signum(ux[_]*vx[R]+vx[_]*vy[R]),L=signum(uy[_]*vx[R]+vy[_]*vy[R]);for(let U=0;U<16;U++)if(ux[U]===P&&uy[U]===O&&vx[U]===I&&vy[U]===L){T.push(U);break}}}for(let _=0;_<16;_++){const T=new Matrix;T.set(ux[_],uy[_],vx[_],vy[_],0,0),rotationMatrices.push(T)}}init$1();const groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:_=>ux[_],uY:_=>uy[_],vX:_=>vx[_],vY:_=>vy[_],inv:_=>_&8?_&15:-_&7,add:(_,T)=>rotationCayley[_][T],sub:(_,T)=>rotationCayley[_][groupD8.inv(T)],rotate180:_=>_^4,isVertical:_=>(_&3)===2,byDirection:(_,T)=>Math.abs(_)*2<=Math.abs(T)?T>=0?groupD8.S:groupD8.N:Math.abs(T)*2<=Math.abs(_)?_>0?groupD8.E:groupD8.W:T>0?_>0?groupD8.SE:groupD8.SW:_>0?groupD8.NE:groupD8.NW,matrixAppendRotationInv:(_,T,R=0,P=0)=>{const O=rotationMatrices[groupD8.inv(T)];O.tx=R,O.ty=P,_.append(O)},transformRectCoords:(_,T,R,P)=>{const{x:O,y:I,width:L,height:U}=_,{x:G,y:V,width:Z,height:Y}=T;return R===groupD8.E?(P.set(O+G,I+V,L,U),P):R===groupD8.S?P.set(Z-I-U+G,O+V,U,L):R===groupD8.W?P.set(Z-O-L+G,Y-I-U+V,L,U):R===groupD8.N?P.set(I+G,Y-O-L+V,U,L):P.set(O+G,I+V,L,U)}},tempPoints=[new Point,new Point,new Point,new Point];class Rectangle{constructor(T=0,R=0,P=0,O=0){this.type="rectangle",this.x=Number(T),this.y=Number(R),this.width=Number(P),this.height=Number(O)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Rectangle(0,0,0,0)}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}copyFromBounds(T){return this.x=T.minX,this.y=T.minY,this.width=T.maxX-T.minX,this.height=T.maxY-T.minY,this}copyFrom(T){return this.x=T.x,this.y=T.y,this.width=T.width,this.height=T.height,this}copyTo(T){return T.copyFrom(this),T}contains(T,R){return this.width<=0||this.height<=0?!1:T>=this.x&&T<this.x+this.width&&R>=this.y&&R<this.y+this.height}strokeContains(T,R,P,O=.5){const{width:I,height:L}=this;if(I<=0||L<=0)return!1;const U=this.x,G=this.y,V=P*(1-O),Z=P-V,Y=U-V,W=U+I+V,J=G-V,ee=G+L+V,te=U+Z,ie=U+I-Z,oe=G+Z,ae=G+L-Z;return T>=Y&&T<=W&&R>=J&&R<=ee&&!(T>te&&T<ie&&R>oe&&R<ae)}intersects(T,R){if(!R){const ue=this.x<T.x?T.x:this.x;if((this.right>T.right?T.right:this.right)<=ue)return!1;const ge=this.y<T.y?T.y:this.y;return(this.bottom>T.bottom?T.bottom:this.bottom)>ge}const P=this.left,O=this.right,I=this.top,L=this.bottom;if(O<=P||L<=I)return!1;const U=tempPoints[0].set(T.left,T.top),G=tempPoints[1].set(T.left,T.bottom),V=tempPoints[2].set(T.right,T.top),Z=tempPoints[3].set(T.right,T.bottom);if(V.x<=U.x||G.y<=U.y)return!1;const Y=Math.sign(R.a*R.d-R.b*R.c);if(Y===0||(R.apply(U,U),R.apply(G,G),R.apply(V,V),R.apply(Z,Z),Math.max(U.x,G.x,V.x,Z.x)<=P||Math.min(U.x,G.x,V.x,Z.x)>=O||Math.max(U.y,G.y,V.y,Z.y)<=I||Math.min(U.y,G.y,V.y,Z.y)>=L))return!1;const W=Y*(G.y-U.y),J=Y*(U.x-G.x),ee=W*P+J*I,te=W*O+J*I,ie=W*P+J*L,oe=W*O+J*L;if(Math.max(ee,te,ie,oe)<=W*U.x+J*U.y||Math.min(ee,te,ie,oe)>=W*Z.x+J*Z.y)return!1;const ae=Y*(U.y-V.y),ce=Y*(V.x-U.x),le=ae*P+ce*I,he=ae*O+ce*I,me=ae*P+ce*L,fe=ae*O+ce*L;return!(Math.max(le,he,me,fe)<=ae*U.x+ce*U.y||Math.min(le,he,me,fe)>=ae*Z.x+ce*Z.y)}pad(T=0,R=T){return this.x-=T,this.y-=R,this.width+=T*2,this.height+=R*2,this}fit(T){const R=Math.max(this.x,T.x),P=Math.min(this.x+this.width,T.x+T.width),O=Math.max(this.y,T.y),I=Math.min(this.y+this.height,T.y+T.height);return this.x=R,this.width=Math.max(P-R,0),this.y=O,this.height=Math.max(I-O,0),this}ceil(T=1,R=.001){const P=Math.ceil((this.x+this.width-R)*T)/T,O=Math.ceil((this.y+this.height-R)*T)/T;return this.x=Math.floor((this.x+R)*T)/T,this.y=Math.floor((this.y+R)*T)/T,this.width=P-this.x,this.height=O-this.y,this}scale(T,R=T){return this.x*=T,this.y*=R,this.width*=T,this.height*=R,this}enlarge(T){const R=Math.min(this.x,T.x),P=Math.max(this.x+this.width,T.x+T.width),O=Math.min(this.y,T.y),I=Math.max(this.y+this.height,T.y+T.height);return this.x=R,this.width=P-R,this.y=O,this.height=I-O,this}getBounds(T){return T||(T=new Rectangle),T.copyFrom(this),T}containsRect(T){if(this.width<=0||this.height<=0)return!1;const R=T.x,P=T.y,O=T.x+T.width,I=T.y+T.height;return R>=this.x&&R<this.x+this.width&&P>=this.y&&P<this.y+this.height&&O>=this.x&&O<this.x+this.width&&I>=this.y&&I<this.y+this.height}set(T,R,P,O){return this.x=T,this.y=R,this.width=P,this.height=O,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const uidCache={default:-1};function uid(_="default"){return uidCache[_]===void 0&&(uidCache[_]=-1),++uidCache[_]}const warnings$1=new Set,v8_0_0="8.0.0",v8_3_4="8.3.4",deprecationState={quiet:!1,noColor:!1},deprecation=(_,T,R=3)=>{if(deprecationState.quiet||warnings$1.has(T))return;let P=new Error().stack;const O=`${T}
Deprecated since v${_}`,I=typeof console.groupCollapsed=="function"&&!deprecationState.noColor;typeof P>"u"?console.warn("PixiJS Deprecation Warning: ",O):(P=P.split(`
`).splice(R).join(`
`),I?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",O),console.warn(P),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",O),console.warn(P))),warnings$1.add(T)};Object.defineProperties(deprecation,{quiet:{get:()=>deprecationState.quiet,set:_=>{deprecationState.quiet=_},enumerable:!0,configurable:!1},noColor:{get:()=>deprecationState.noColor,set:_=>{deprecationState.noColor=_},enumerable:!0,configurable:!1}});const NOOP=()=>{};function nextPow2(_){return _+=_===0?1:0,--_,_|=_>>>1,_|=_>>>2,_|=_>>>4,_|=_>>>8,_|=_>>>16,_+1}function isPow2(_){return!(_&_-1)&&!!_}function definedProps(_){const T={};for(const R in _)_[R]!==void 0&&(T[R]=_[R]);return T}const idHash$1=Object.create(null);function createResourceIdFromString(_){const T=idHash$1[_];return T===void 0&&(idHash$1[_]=uid("resource")),T}const _TextureStyle=class fh extends EventEmitter{constructor(T={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,T={...fh.defaultOptions,...T},this.addressMode=T.addressMode,this.addressModeU=T.addressModeU??this.addressModeU,this.addressModeV=T.addressModeV??this.addressModeV,this.addressModeW=T.addressModeW??this.addressModeW,this.scaleMode=T.scaleMode,this.magFilter=T.magFilter??this.magFilter,this.minFilter=T.minFilter??this.minFilter,this.mipmapFilter=T.mipmapFilter??this.mipmapFilter,this.lodMinClamp=T.lodMinClamp,this.lodMaxClamp=T.lodMaxClamp,this.compare=T.compare,this.maxAnisotropy=T.maxAnisotropy??1}set addressMode(T){this.addressModeU=T,this.addressModeV=T,this.addressModeW=T}get addressMode(){return this.addressModeU}set wrapMode(T){deprecation(v8_0_0,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=T}get wrapMode(){return this.addressMode}set scaleMode(T){this.magFilter=T,this.minFilter=T,this.mipmapFilter=T}get scaleMode(){return this.magFilter}set maxAnisotropy(T){this._maxAnisotropy=Math.min(T,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const T=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=createResourceIdFromString(T),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};_TextureStyle.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let TextureStyle=_TextureStyle;const _TextureSource=class dh extends EventEmitter{constructor(T={}){super(),this.options=T,this.uid=uid("textureSource"),this._resourceType="textureSource",this._resourceId=uid("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,T={...dh.defaultOptions,...T},this.label=T.label??"",this.resource=T.resource,this.autoGarbageCollect=T.autoGarbageCollect,this._resolution=T.resolution,T.width?this.pixelWidth=T.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,T.height?this.pixelHeight=T.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=T.format,this.dimension=T.dimensions,this.mipLevelCount=T.mipLevelCount,this.autoGenerateMipmaps=T.autoGenerateMipmaps,this.sampleCount=T.sampleCount,this.antialias=T.antialias,this.alphaMode=T.alphaMode,this.style=new TextureStyle(definedProps(T)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(T){this.style!==T&&(this._style?.off("change",this._onStyleChange,this),this._style=T,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(T){this._style.maxAnisotropy=T}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(T){this._style.addressMode=T}get repeatMode(){return this._style.addressMode}set repeatMode(T){this._style.addressMode=T}get magFilter(){return this._style.magFilter}set magFilter(T){this._style.magFilter=T}get minFilter(){return this._style.minFilter}set minFilter(T){this._style.minFilter=T}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(T){this._style.mipmapFilter=T}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(T){this._style.lodMinClamp=T}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(T){this._style.lodMaxClamp=T}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const T=this._resolution;if(this.resize(this.resourceWidth/T,this.resourceHeight/T))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=uid("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:T}=this;return T.naturalWidth||T.videoWidth||T.displayWidth||T.width}get resourceHeight(){const{resource:T}=this;return T.naturalHeight||T.videoHeight||T.displayHeight||T.height}get resolution(){return this._resolution}set resolution(T){this._resolution!==T&&(this._resolution=T,this.width=this.pixelWidth/T,this.height=this.pixelHeight/T)}resize(T,R,P){P||(P=this._resolution),T||(T=this.width),R||(R=this.height);const O=Math.round(T*P),I=Math.round(R*P);return this.width=O/P,this.height=I/P,this._resolution=P,this.pixelWidth===O&&this.pixelHeight===I?!1:(this._refreshPOT(),this.pixelWidth=O,this.pixelHeight=I,this.emit("resize",this),this._resourceId=uid("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(T){this._style.wrapMode=T}get wrapMode(){return this._style.wrapMode}set scaleMode(T){this._style.scaleMode=T}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=isPow2(this.pixelWidth)&&isPow2(this.pixelHeight)}static test(T){throw new Error("Unimplemented")}};_TextureSource.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let TextureSource=_TextureSource;class BufferImageSource extends TextureSource{constructor(T){const R=T.resource||new Float32Array(T.width*T.height*4);let P=T.format;P||(R instanceof Float32Array?P="rgba32float":R instanceof Int32Array||R instanceof Uint32Array?P="rgba32uint":R instanceof Int16Array||R instanceof Uint16Array?P="rgba16uint":(R instanceof Int8Array,P="bgra8unorm")),super({...T,resource:R,format:P}),this.uploadMethodId="buffer"}static test(T){return T instanceof Int8Array||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array}}BufferImageSource.extension=ExtensionType.TextureSource;const tempMat=new Matrix;class TextureMatrix{constructor(T,R){this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof R>"u"?this.clampMargin=T.width<10?0:.5:this.clampMargin=R,this.isSimple=!1,this.texture=T}get texture(){return this._texture}set texture(T){this.texture!==T&&(this._texture?.removeListener("update",this.update,this),this._texture=T,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(T,R){R===void 0&&(R=T);const P=this.mapCoord;for(let O=0;O<T.length;O+=2){const I=T[O],L=T[O+1];R[O]=I*P.a+L*P.c+P.tx,R[O+1]=I*P.b+L*P.d+P.ty}return R}update(){const T=this._texture;this._updateID++;const R=T.uvs;this.mapCoord.set(R.x1-R.x0,R.y1-R.y0,R.x3-R.x0,R.y3-R.y0,R.x0,R.y0);const P=T.orig,O=T.trim;O&&(tempMat.set(P.width/O.width,0,0,P.height/O.height,-O.x/O.width,-O.y/O.height),this.mapCoord.append(tempMat));const I=T.source,L=this.uClampFrame,U=this.clampMargin/I._resolution,G=this.clampOffset/I._resolution;return L[0]=(T.frame.x+U+G)/I.width,L[1]=(T.frame.y+U+G)/I.height,L[2]=(T.frame.x+T.frame.width-U+G)/I.width,L[3]=(T.frame.y+T.frame.height-U+G)/I.height,this.uClampOffset[0]=this.clampOffset/I.pixelWidth,this.uClampOffset[1]=this.clampOffset/I.pixelHeight,this.isSimple=T.frame.width===I.width&&T.frame.height===I.height&&T.rotate===0,!0}}class Texture extends EventEmitter{constructor({source:T,label:R,frame:P,orig:O,trim:I,defaultAnchor:L,defaultBorders:U,rotate:G,dynamic:V}={}){if(super(),this.uid=uid("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Rectangle,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=R,this.source=T?.source??new TextureSource,this.noFrame=!P,P)this.frame.copyFrom(P);else{const{width:Z,height:Y}=this._source;this.frame.width=Z,this.frame.height=Y}this.orig=O||this.frame,this.trim=I,this.rotate=G??0,this.defaultAnchor=L,this.defaultBorders=U,this.destroyed=!1,this.dynamic=V||!1,this.updateUvs()}set source(T){this._source&&this._source.off("resize",this.update,this),this._source=T,T.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new TextureMatrix(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:T,frame:R}=this,{width:P,height:O}=this._source,I=R.x/P,L=R.y/O,U=R.width/P,G=R.height/O;let V=this.rotate;if(V){const Z=U/2,Y=G/2,W=I+Z,J=L+Y;V=groupD8.add(V,groupD8.NW),T.x0=W+Z*groupD8.uX(V),T.y0=J+Y*groupD8.uY(V),V=groupD8.add(V,2),T.x1=W+Z*groupD8.uX(V),T.y1=J+Y*groupD8.uY(V),V=groupD8.add(V,2),T.x2=W+Z*groupD8.uX(V),T.y2=J+Y*groupD8.uY(V),V=groupD8.add(V,2),T.x3=W+Z*groupD8.uX(V),T.y3=J+Y*groupD8.uY(V)}else T.x0=I,T.y0=L,T.x1=I+U,T.y1=L,T.x2=I+U,T.y2=L+G,T.x3=I,T.y3=L+G}destroy(T=!1){this._source&&(this._source.off("resize",this.update,this),T&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return deprecation(v8_0_0,"Texture.baseTexture is now Texture.source"),this._source}}Texture.EMPTY=new Texture({label:"EMPTY",source:new TextureSource({label:"EMPTY"})});Texture.EMPTY.destroy=NOOP;Texture.WHITE=new Texture({source:new BufferImageSource({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Texture.WHITE.destroy=NOOP;function updateQuadBounds(_,T,R){const{width:P,height:O}=R.orig,I=R.trim;if(I){const L=I.width,U=I.height;_.minX=I.x-T._x*P,_.maxX=_.minX+L,_.minY=I.y-T._y*O,_.maxY=_.minY+U}else _.minX=-T._x*P,_.maxX=_.minX+P,_.minY=-T._y*O,_.maxY=_.minY+O}const defaultMatrix=new Matrix;class Bounds{constructor(T=1/0,R=1/0,P=-1/0,O=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=defaultMatrix,this.minX=T,this.minY=R,this.maxX=P,this.maxY=O}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Rectangle);const T=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(T.x=0,T.y=0,T.width=0,T.height=0):T.copyFromBounds(this),T}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=defaultMatrix,this}set(T,R,P,O){this.minX=T,this.minY=R,this.maxX=P,this.maxY=O}addFrame(T,R,P,O,I){I||(I=this.matrix);const L=I.a,U=I.b,G=I.c,V=I.d,Z=I.tx,Y=I.ty;let W=this.minX,J=this.minY,ee=this.maxX,te=this.maxY,ie=L*T+G*R+Z,oe=U*T+V*R+Y;ie<W&&(W=ie),oe<J&&(J=oe),ie>ee&&(ee=ie),oe>te&&(te=oe),ie=L*P+G*R+Z,oe=U*P+V*R+Y,ie<W&&(W=ie),oe<J&&(J=oe),ie>ee&&(ee=ie),oe>te&&(te=oe),ie=L*T+G*O+Z,oe=U*T+V*O+Y,ie<W&&(W=ie),oe<J&&(J=oe),ie>ee&&(ee=ie),oe>te&&(te=oe),ie=L*P+G*O+Z,oe=U*P+V*O+Y,ie<W&&(W=ie),oe<J&&(J=oe),ie>ee&&(ee=ie),oe>te&&(te=oe),this.minX=W,this.minY=J,this.maxX=ee,this.maxY=te}addRect(T,R){this.addFrame(T.x,T.y,T.x+T.width,T.y+T.height,R)}addBounds(T,R){this.addFrame(T.minX,T.minY,T.maxX,T.maxY,R)}addBoundsMask(T){this.minX=this.minX>T.minX?this.minX:T.minX,this.minY=this.minY>T.minY?this.minY:T.minY,this.maxX=this.maxX<T.maxX?this.maxX:T.maxX,this.maxY=this.maxY<T.maxY?this.maxY:T.maxY}applyMatrix(T){const R=this.minX,P=this.minY,O=this.maxX,I=this.maxY,{a:L,b:U,c:G,d:V,tx:Z,ty:Y}=T;let W=L*R+G*P+Z,J=U*R+V*P+Y;this.minX=W,this.minY=J,this.maxX=W,this.maxY=J,W=L*O+G*P+Z,J=U*O+V*P+Y,this.minX=W<this.minX?W:this.minX,this.minY=J<this.minY?J:this.minY,this.maxX=W>this.maxX?W:this.maxX,this.maxY=J>this.maxY?J:this.maxY,W=L*R+G*I+Z,J=U*R+V*I+Y,this.minX=W<this.minX?W:this.minX,this.minY=J<this.minY?J:this.minY,this.maxX=W>this.maxX?W:this.maxX,this.maxY=J>this.maxY?J:this.maxY,W=L*O+G*I+Z,J=U*O+V*I+Y,this.minX=W<this.minX?W:this.minX,this.minY=J<this.minY?J:this.minY,this.maxX=W>this.maxX?W:this.maxX,this.maxY=J>this.maxY?J:this.maxY}fit(T){return this.minX<T.left&&(this.minX=T.left),this.maxX>T.right&&(this.maxX=T.right),this.minY<T.top&&(this.minY=T.top),this.maxY>T.bottom&&(this.maxY=T.bottom),this}fitBounds(T,R,P,O){return this.minX<T&&(this.minX=T),this.maxX>R&&(this.maxX=R),this.minY<P&&(this.minY=P),this.maxY>O&&(this.maxY=O),this}pad(T,R=T){return this.minX-=T,this.maxX+=T,this.minY-=R,this.maxY+=R,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Bounds(this.minX,this.minY,this.maxX,this.maxY)}scale(T,R=T){return this.minX*=T,this.minY*=R,this.maxX*=T,this.maxY*=R,this}get x(){return this.minX}set x(T){const R=this.maxX-this.minX;this.minX=T,this.maxX=T+R}get y(){return this.minY}set y(T){const R=this.maxY-this.minY;this.minY=T,this.maxY=T+R}get width(){return this.maxX-this.minX}set width(T){this.maxX=this.minX+T}get height(){return this.maxY-this.minY}set height(T){this.maxY=this.minY+T}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(T,R,P,O){let I=this.minX,L=this.minY,U=this.maxX,G=this.maxY;O||(O=this.matrix);const V=O.a,Z=O.b,Y=O.c,W=O.d,J=O.tx,ee=O.ty;for(let te=R;te<P;te+=2){const ie=T[te],oe=T[te+1],ae=V*ie+Y*oe+J,ce=Z*ie+W*oe+ee;I=ae<I?ae:I,L=ce<L?ce:L,U=ae>U?ae:U,G=ce>G?ce:G}this.minX=I,this.minY=L,this.maxX=U,this.maxY=G}containsPoint(T,R){return this.minX<=T&&this.minY<=R&&this.maxX>=T&&this.maxY>=R}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(T){return this.minX=T.minX,this.minY=T.minY,this.maxX=T.maxX,this.maxY=T.maxY,this}}var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(_){return typeof _=="string"?_.length>0:typeof _=="number"},n=function(_,T,R){return T===void 0&&(T=0),R===void 0&&(R=Math.pow(10,T)),Math.round(R*_)/R+0},e=function(_,T,R){return T===void 0&&(T=0),R===void 0&&(R=1),_>R?R:_>T?_:T},u=function(_){return(_=isFinite(_)?_%360:0)>0?_:_+360},a$1=function(_){return{r:e(_.r,0,255),g:e(_.g,0,255),b:e(_.b,0,255),a:e(_.a)}},o=function(_){return{r:n(_.r),g:n(_.g),b:n(_.b),a:n(_.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s$1=function(_){var T=_.toString(16);return T.length<2?"0"+T:T},h=function(_){var T=_.r,R=_.g,P=_.b,O=_.a,I=Math.max(T,R,P),L=I-Math.min(T,R,P),U=L?I===T?(R-P)/L:I===R?2+(P-T)/L:4+(T-R)/L:0;return{h:60*(U<0?U+6:U),s:I?L/I*100:0,v:I/255*100,a:O}},b=function(_){var T=_.h,R=_.s,P=_.v,O=_.a;T=T/360*6,R/=100,P/=100;var I=Math.floor(T),L=P*(1-R),U=P*(1-(T-I)*R),G=P*(1-(1-T+I)*R),V=I%6;return{r:255*[P,U,L,L,G,P][V],g:255*[G,P,P,U,L,L][V],b:255*[L,L,G,P,P,U][V],a:O}},g=function(_){return{h:u(_.h),s:e(_.s,0,100),l:e(_.l,0,100),a:e(_.a)}},d=function(_){return{h:n(_.h),s:n(_.s),l:n(_.l),a:n(_.a,3)}},f=function(_){return b((R=(T=_).s,{h:T.h,s:(R*=((P=T.l)<50?P:100-P)/100)>0?2*R/(P+R)*100:0,v:P+R,a:T.a}));var T,R,P},c$3=function(_){return{h:(T=h(_)).h,s:(O=(200-(R=T.s))*(P=T.v)/100)>0&&O<200?R*P/100/(O<=100?O:200-O)*100:0,l:O/2,a:T.a};var T,R,P,O},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y$1={string:[[function(_){var T=i.exec(_);return T?(_=T[1]).length<=4?{r:parseInt(_[0]+_[0],16),g:parseInt(_[1]+_[1],16),b:parseInt(_[2]+_[2],16),a:_.length===4?n(parseInt(_[3]+_[3],16)/255,2):1}:_.length===6||_.length===8?{r:parseInt(_.substr(0,2),16),g:parseInt(_.substr(2,2),16),b:parseInt(_.substr(4,2),16),a:_.length===8?n(parseInt(_.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(_){var T=v.exec(_)||m.exec(_);return T?T[2]!==T[4]||T[4]!==T[6]?null:a$1({r:Number(T[1])/(T[2]?100/255:1),g:Number(T[3])/(T[4]?100/255:1),b:Number(T[5])/(T[6]?100/255:1),a:T[7]===void 0?1:Number(T[7])/(T[8]?100:1)}):null},"rgb"],[function(_){var T=l.exec(_)||p.exec(_);if(!T)return null;var R,P,O=g({h:(R=T[1],P=T[2],P===void 0&&(P="deg"),Number(R)*(r[P]||1)),s:Number(T[3]),l:Number(T[4]),a:T[5]===void 0?1:Number(T[5])/(T[6]?100:1)});return f(O)},"hsl"]],object:[[function(_){var T=_.r,R=_.g,P=_.b,O=_.a,I=O===void 0?1:O;return t(T)&&t(R)&&t(P)?a$1({r:Number(T),g:Number(R),b:Number(P),a:Number(I)}):null},"rgb"],[function(_){var T=_.h,R=_.s,P=_.l,O=_.a,I=O===void 0?1:O;if(!t(T)||!t(R)||!t(P))return null;var L=g({h:Number(T),s:Number(R),l:Number(P),a:Number(I)});return f(L)},"hsl"],[function(_){var T=_.h,R=_.s,P=_.v,O=_.a,I=O===void 0?1:O;if(!t(T)||!t(R)||!t(P))return null;var L=(function(U){return{h:u(U.h),s:e(U.s,0,100),v:e(U.v,0,100),a:e(U.a)}})({h:Number(T),s:Number(R),v:Number(P),a:Number(I)});return b(L)},"hsv"]]},N=function(_,T){for(var R=0;R<T.length;R++){var P=T[R][0](_);if(P)return[P,T[R][1]]}return[null,void 0]},x$1=function(_){return typeof _=="string"?N(_.trim(),y$1.string):typeof _=="object"&&_!==null?N(_,y$1.object):[null,void 0]},M$1=function(_,T){var R=c$3(_);return{h:R.h,s:e(R.s+100*T,0,100),l:R.l,a:R.a}},H=function(_){return(299*_.r+587*_.g+114*_.b)/1e3/255},$=function(_,T){var R=c$3(_);return{h:R.h,s:R.s,l:e(R.l+100*T,0,100),a:R.a}},j=(function(){function _(T){this.parsed=x$1(T)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return _.prototype.isValid=function(){return this.parsed!==null},_.prototype.brightness=function(){return n(H(this.rgba),2)},_.prototype.isDark=function(){return H(this.rgba)<.5},_.prototype.isLight=function(){return H(this.rgba)>=.5},_.prototype.toHex=function(){return T=o(this.rgba),R=T.r,P=T.g,O=T.b,L=(I=T.a)<1?s$1(n(255*I)):"","#"+s$1(R)+s$1(P)+s$1(O)+L;var T,R,P,O,I,L},_.prototype.toRgb=function(){return o(this.rgba)},_.prototype.toRgbString=function(){return T=o(this.rgba),R=T.r,P=T.g,O=T.b,(I=T.a)<1?"rgba("+R+", "+P+", "+O+", "+I+")":"rgb("+R+", "+P+", "+O+")";var T,R,P,O,I},_.prototype.toHsl=function(){return d(c$3(this.rgba))},_.prototype.toHslString=function(){return T=d(c$3(this.rgba)),R=T.h,P=T.s,O=T.l,(I=T.a)<1?"hsla("+R+", "+P+"%, "+O+"%, "+I+")":"hsl("+R+", "+P+"%, "+O+"%)";var T,R,P,O,I},_.prototype.toHsv=function(){return T=h(this.rgba),{h:n(T.h),s:n(T.s),v:n(T.v),a:n(T.a,3)};var T},_.prototype.invert=function(){return w({r:255-(T=this.rgba).r,g:255-T.g,b:255-T.b,a:T.a});var T},_.prototype.saturate=function(T){return T===void 0&&(T=.1),w(M$1(this.rgba,T))},_.prototype.desaturate=function(T){return T===void 0&&(T=.1),w(M$1(this.rgba,-T))},_.prototype.grayscale=function(){return w(M$1(this.rgba,-1))},_.prototype.lighten=function(T){return T===void 0&&(T=.1),w($(this.rgba,T))},_.prototype.darken=function(T){return T===void 0&&(T=.1),w($(this.rgba,-T))},_.prototype.rotate=function(T){return T===void 0&&(T=15),this.hue(this.hue()+T)},_.prototype.alpha=function(T){return typeof T=="number"?w({r:(R=this.rgba).r,g:R.g,b:R.b,a:T}):n(this.rgba.a,3);var R},_.prototype.hue=function(T){var R=c$3(this.rgba);return typeof T=="number"?w({h:T,s:R.s,l:R.l,a:R.a}):n(R.h)},_.prototype.isEqual=function(T){return this.toHex()===w(T).toHex()},_})(),w=function(_){return _ instanceof j?_:new j(_)},S=[],k$1=function(_){_.forEach(function(T){S.indexOf(T)<0&&(T(j,y$1),S.push(T))})};function namesPlugin(_,T){var R={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},P={};for(var O in R)P[R[O]]=O;var I={};_.prototype.toName=function(L){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var U,G,V=P[this.toHex()];if(V)return V;if(L?.closest){var Z=this.toRgb(),Y=1/0,W="black";if(!I.length)for(var J in R)I[J]=new _(R[J]).toRgb();for(var ee in R){var te=(U=Z,G=I[ee],Math.pow(U.r-G.r,2)+Math.pow(U.g-G.g,2)+Math.pow(U.b-G.b,2));te<Y&&(Y=te,W=ee)}return W}},T.string.push([function(L){var U=L.toLowerCase(),G=U==="transparent"?"#0000":R[U];return G?new _(G).toRgb():null},"name"])}k$1([namesPlugin]);const _Color=class Ms{constructor(T=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=T}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(T){return this.value=T,this}set value(T){if(T instanceof Ms)this._value=this._cloneSource(T._value),this._int=T._int,this._components.set(T._components);else{if(T===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,T))&&(this._value=this._cloneSource(T),this._normalize(this._value))}}get value(){return this._value}_cloneSource(T){return typeof T=="string"||typeof T=="number"||T instanceof Number||T===null?T:Array.isArray(T)||ArrayBuffer.isView(T)?T.slice(0):typeof T=="object"&&T!==null?{...T}:T}_isSourceEqual(T,R){const P=typeof T;if(P!==typeof R)return!1;if(P==="number"||P==="string"||T instanceof Number)return T===R;if(Array.isArray(T)&&Array.isArray(R)||ArrayBuffer.isView(T)&&ArrayBuffer.isView(R))return T.length!==R.length?!1:T.every((I,L)=>I===R[L]);if(T!==null&&R!==null){const I=Object.keys(T),L=Object.keys(R);return I.length!==L.length?!1:I.every(U=>T[U]===R[U])}return T===R}toRgba(){const[T,R,P,O]=this._components;return{r:T,g:R,b:P,a:O}}toRgb(){const[T,R,P]=this._components;return{r:T,g:R,b:P}}toRgbaString(){const[T,R,P]=this.toUint8RgbArray();return`rgba(${T},${R},${P},${this.alpha})`}toUint8RgbArray(T){const[R,P,O]=this._components;return this._arrayRgb||(this._arrayRgb=[]),T||(T=this._arrayRgb),T[0]=Math.round(R*255),T[1]=Math.round(P*255),T[2]=Math.round(O*255),T}toArray(T){this._arrayRgba||(this._arrayRgba=[]),T||(T=this._arrayRgba);const[R,P,O,I]=this._components;return T[0]=R,T[1]=P,T[2]=O,T[3]=I,T}toRgbArray(T){this._arrayRgb||(this._arrayRgb=[]),T||(T=this._arrayRgb);const[R,P,O]=this._components;return T[0]=R,T[1]=P,T[2]=O,T}toNumber(){return this._int}toBgrNumber(){const[T,R,P]=this.toUint8RgbArray();return(P<<16)+(R<<8)+T}toLittleEndianNumber(){const T=this._int;return(T>>16)+(T&65280)+((T&255)<<16)}multiply(T){const[R,P,O,I]=Ms._temp.setValue(T)._components;return this._components[0]*=R,this._components[1]*=P,this._components[2]*=O,this._components[3]*=I,this._refreshInt(),this._value=null,this}premultiply(T,R=!0){return R&&(this._components[0]*=T,this._components[1]*=T,this._components[2]*=T),this._components[3]=T,this._refreshInt(),this._value=null,this}toPremultiplied(T,R=!0){if(T===1)return(255<<24)+this._int;if(T===0)return R?0:this._int;let P=this._int>>16&255,O=this._int>>8&255,I=this._int&255;return R&&(P=P*T+.5|0,O=O*T+.5|0,I=I*T+.5|0),(T*255<<24)+(P<<16)+(O<<8)+I}toHex(){const T=this._int.toString(16);return`#${"000000".substring(0,6-T.length)+T}`}toHexa(){const R=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-R.length)+R}setAlpha(T){return this._components[3]=this._clamp(T),this}_normalize(T){let R,P,O,I;if((typeof T=="number"||T instanceof Number)&&T>=0&&T<=16777215){const L=T;R=(L>>16&255)/255,P=(L>>8&255)/255,O=(L&255)/255,I=1}else if((Array.isArray(T)||T instanceof Float32Array)&&T.length>=3&&T.length<=4)T=this._clamp(T),[R,P,O,I=1]=T;else if((T instanceof Uint8Array||T instanceof Uint8ClampedArray)&&T.length>=3&&T.length<=4)T=this._clamp(T,0,255),[R,P,O,I=255]=T,R/=255,P/=255,O/=255,I/=255;else if(typeof T=="string"||typeof T=="object"){if(typeof T=="string"){const U=Ms.HEX_PATTERN.exec(T);U&&(T=`#${U[2]}`)}const L=w(T);L.isValid()&&({r:R,g:P,b:O,a:I}=L.rgba,R/=255,P/=255,O/=255)}if(R!==void 0)this._components[0]=R,this._components[1]=P,this._components[2]=O,this._components[3]=I,this._refreshInt();else throw new Error(`Unable to convert color ${T}`)}_refreshInt(){this._clamp(this._components);const[T,R,P]=this._components;this._int=(T*255<<16)+(R*255<<8)+(P*255|0)}_clamp(T,R=0,P=1){return typeof T=="number"?Math.min(Math.max(T,R),P):(T.forEach((O,I)=>{T[I]=Math.min(Math.max(O,R),P)}),T)}static isColorLike(T){return typeof T=="number"||typeof T=="string"||T instanceof Number||T instanceof Ms||Array.isArray(T)||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Float32Array||T.r!==void 0&&T.g!==void 0&&T.b!==void 0||T.r!==void 0&&T.g!==void 0&&T.b!==void 0&&T.a!==void 0||T.h!==void 0&&T.s!==void 0&&T.l!==void 0||T.h!==void 0&&T.s!==void 0&&T.l!==void 0&&T.a!==void 0||T.h!==void 0&&T.s!==void 0&&T.v!==void 0||T.h!==void 0&&T.s!==void 0&&T.v!==void 0&&T.a!==void 0}};_Color.shared=new _Color;_Color._temp=new _Color;_Color.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Color$1=_Color;const cullingMixin={cullArea:null,cullable:!1,cullableChildren:!0};let warnCount=0;const maxWarnings=500;function warn$1(..._){warnCount!==maxWarnings&&(warnCount++,warnCount===maxWarnings?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",..._))}const GlobalResourceRegistry={_registeredResources:new Set,register(_){this._registeredResources.add(_)},unregister(_){this._registeredResources.delete(_)},release(){this._registeredResources.forEach(_=>_.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(_){return this._registeredResources.has(_)},reset(){this._registeredResources.clear()}};class Pool{constructor(T,R){this._pool=[],this._count=0,this._index=0,this._classType=T,R&&this.prepopulate(R)}prepopulate(T){for(let R=0;R<T;R++)this._pool[this._index++]=new this._classType;this._count+=T}get(T){let R;return this._index>0?R=this._pool[--this._index]:(R=new this._classType,this._count++),R.init?.(T),R}return(T){T.reset?.(),this._pool[this._index++]=T}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let T=0;T<this._index;T++)this._pool[T].destroy();this._pool.length=0,this._count=0,this._index=0}}class PoolGroupClass{constructor(){this._poolsByClass=new Map}prepopulate(T,R){this.getPool(T).prepopulate(R)}get(T,R){return this.getPool(T).get(R)}return(T){this.getPool(T.constructor).return(T)}getPool(T){return this._poolsByClass.has(T)||this._poolsByClass.set(T,new Pool(T)),this._poolsByClass.get(T)}stats(){const T={};return this._poolsByClass.forEach(R=>{const P=T[R._classType.name]?R._classType.name+R._classType.ID:R._classType.name;T[P]={free:R.totalFree,used:R.totalUsed,size:R.totalSize}}),T}clear(){this._poolsByClass.forEach(T=>T.clear()),this._poolsByClass.clear()}}const BigPool=new PoolGroupClass;GlobalResourceRegistry.register(BigPool);const cacheAsTextureMixin={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(_){typeof _=="boolean"&&_===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(_===!0?{}:_))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(_){deprecation("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(_)}};function removeItems(_,T,R){const P=_.length;let O;if(T>=P||R===0)return;R=T+R>P?P-T:R;const I=P-R;for(O=T;O<I;++O)_[O]=_[O+R];_.length=I}const childrenHelperMixin={allowChildren:!0,removeChildren(_=0,T){const R=T??this.children.length,P=R-_,O=[];if(P>0&&P<=R){for(let L=R-1;L>=_;L--){const U=this.children[L];U&&(O.push(U),U.parent=null)}removeItems(this.children,_,R);const I=this.renderGroup||this.parentRenderGroup;I&&I.removeChildren(O);for(let L=0;L<O.length;++L){const U=O[L];U.parentRenderLayer?.detach(U),this.emit("childRemoved",U,this,L),O[L].emit("removed",this)}return O.length>0&&this._didViewChangeTick++,O}else if(P===0&&this.children.length===0)return O;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(_){const T=this.getChildAt(_);return this.removeChild(T)},getChildAt(_){if(_<0||_>=this.children.length)throw new Error(`getChildAt: Index (${_}) does not exist.`);return this.children[_]},setChildIndex(_,T){if(T<0||T>=this.children.length)throw new Error(`The index ${T} supplied is out of bounds ${this.children.length}`);this.getChildIndex(_),this.addChildAt(_,T)},getChildIndex(_){const T=this.children.indexOf(_);if(T===-1)throw new Error("The supplied Container must be a child of the caller");return T},addChildAt(_,T){this.allowChildren||deprecation(v8_0_0,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:R}=this;if(T<0||T>R.length)throw new Error(`${_}addChildAt: The index ${T} supplied is out of bounds ${R.length}`);if(_.parent){const O=_.parent.children.indexOf(_);if(_.parent===this&&O===T)return _;O!==-1&&_.parent.children.splice(O,1)}T===R.length?R.push(_):R.splice(T,0,_),_.parent=this,_.didChange=!0,_._updateFlags=15;const P=this.renderGroup||this.parentRenderGroup;return P&&P.addChild(_),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",_,this,T),_.emit("added",this),_},swapChildren(_,T){if(_===T)return;const R=this.getChildIndex(_),P=this.getChildIndex(T);this.children[R]=T,this.children[P]=_;const O=this.renderGroup||this.parentRenderGroup;O&&(O.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(..._){return _.length===1?this.reparentChildAt(_[0],this.children.length):(_.forEach(T=>this.reparentChildAt(T,this.children.length)),_[0])},reparentChildAt(_,T){if(_.parent===this)return this.setChildIndex(_,T),_;const R=_.worldTransform.clone();_.removeFromParent(),this.addChildAt(_,T);const P=this.worldTransform.clone();return P.invert(),R.prepend(P),_.setFromMatrix(R),_},replaceChild(_,T){_.updateLocalTransform(),this.addChildAt(T,this.getChildIndex(_)),T.setFromMatrix(_.localTransform),T.updateLocalTransform(),this.removeChild(_)}},collectRenderablesMixin={collectRenderables(_,T,R){this.parentRenderLayer&&this.parentRenderLayer!==R||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(_,T,R):this.renderGroup?T.renderPipes.renderGroup.addRenderGroup(this.renderGroup,_):this.collectRenderablesWithEffects(_,T,R))},collectRenderablesSimple(_,T,R){const P=this.children,O=P.length;for(let I=0;I<O;I++)P[I].collectRenderables(_,T,R)},collectRenderablesWithEffects(_,T,R){const{renderPipes:P}=T;for(let O=0;O<this.effects.length;O++){const I=this.effects[O];P[I.pipe].push(I,this,_)}this.collectRenderablesSimple(_,T,R);for(let O=this.effects.length-1;O>=0;O--){const I=this.effects[O];P[I.pipe].pop(I,this,_)}}};class FilterEffect{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let T=0;T<this.filters.length;T++)this.filters[T].destroy();this.filters=null,this.filterArea=null}}class MaskEffectManagerClass{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(T=>{this.add({test:T.test,maskClass:T})}))}add(T){this._tests.push(T)}getMaskEffect(T){this._initialized||this.init();for(let R=0;R<this._tests.length;R++){const P=this._tests[R];if(P.test(T))return BigPool.get(P.maskClass,T)}return T}returnMaskEffect(T){BigPool.return(T)}}const MaskEffectManager=new MaskEffectManagerClass;extensions.handleByList(ExtensionType.MaskEffect,MaskEffectManager._effectClasses);const effectsMixin={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const _=this.renderGroup||this.parentRenderGroup;_&&(_.structureDidChange=!0)},addEffect(_){this.effects.indexOf(_)===-1&&(this.effects.push(_),this.effects.sort((R,P)=>R.priority-P.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(_){const T=this.effects.indexOf(_);T!==-1&&(this.effects.splice(T,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(_){const T=this._maskEffect;T?.mask!==_&&(T&&(this.removeEffect(T),MaskEffectManager.returnMaskEffect(T),this._maskEffect=null),_!=null&&(this._maskEffect=MaskEffectManager.getMaskEffect(_),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(_){this._maskOptions={...this._maskOptions,..._},_.mask&&(this.mask=_.mask),this._markStructureAsChanged()},set filters(_){!Array.isArray(_)&&_&&(_=[_]);const T=this._filterEffect||(this._filterEffect=new FilterEffect);_=_;const R=_?.length>0,P=T.filters?.length>0,O=R!==P;_=Array.isArray(_)?_.slice(0):_,T.filters=Object.freeze(_),O&&(R?this.addEffect(T):(this.removeEffect(T),T.filters=_??null))},get filters(){return this._filterEffect?.filters},set filterArea(_){this._filterEffect||(this._filterEffect=new FilterEffect),this._filterEffect.filterArea=_},get filterArea(){return this._filterEffect?.filterArea}},findMixin={label:null,get name(){return deprecation(v8_0_0,"Container.name property has been removed, use Container.label instead"),this.label},set name(_){deprecation(v8_0_0,"Container.name property has been removed, use Container.label instead"),this.label=_},getChildByName(_,T=!1){return this.getChildByLabel(_,T)},getChildByLabel(_,T=!1){const R=this.children;for(let P=0;P<R.length;P++){const O=R[P];if(O.label===_||_ instanceof RegExp&&_.test(O.label))return O}if(T)for(let P=0;P<R.length;P++){const I=R[P].getChildByLabel(_,!0);if(I)return I}return null},getChildrenByLabel(_,T=!1,R=[]){const P=this.children;for(let O=0;O<P.length;O++){const I=P[O];(I.label===_||_ instanceof RegExp&&_.test(I.label))&&R.push(I)}if(T)for(let O=0;O<P.length;O++)P[O].getChildrenByLabel(_,!0,R);return R}},matrixPool=BigPool.getPool(Matrix),boundsPool=BigPool.getPool(Bounds),tempMatrix$2=new Matrix,getFastGlobalBoundsMixin={getFastGlobalBounds(_,T){T||(T=new Bounds),T.clear(),this._getGlobalBoundsRecursive(!!_,T,this.parentRenderLayer),T.isValid||T.set(0,0,0,0);const R=this.renderGroup||this.parentRenderGroup;return T.applyMatrix(R.worldTransform),T},_getGlobalBoundsRecursive(_,T,R){let P=T;if(_&&this.parentRenderLayer&&this.parentRenderLayer!==R||this.localDisplayStatus!==7||!this.measurable)return;const O=!!this.effects.length;if((this.renderGroup||O)&&(P=boundsPool.get().clear()),this.boundsArea)T.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const L=this.bounds;P.addFrame(L.minX,L.minY,L.maxX,L.maxY,this.groupTransform)}const I=this.children;for(let L=0;L<I.length;L++)I[L]._getGlobalBoundsRecursive(_,P,R)}if(O){let I=!1;const L=this.renderGroup||this.parentRenderGroup;for(let U=0;U<this.effects.length;U++)this.effects[U].addBounds&&(I||(I=!0,P.applyMatrix(L.worldTransform)),this.effects[U].addBounds(P,!0));I&&P.applyMatrix(L.worldTransform.copyTo(tempMatrix$2).invert()),T.addBounds(P),boundsPool.return(P)}else this.renderGroup&&(T.addBounds(P,this.relativeGroupTransform),boundsPool.return(P))}};function getGlobalBounds(_,T,R){R.clear();let P,O;return _.parent?T?P=_.parent.worldTransform:(O=matrixPool.get().identity(),P=updateTransformBackwards(_,O)):P=Matrix.IDENTITY,_getGlobalBounds(_,R,P,T),O&&matrixPool.return(O),R.isValid||R.set(0,0,0,0),R}function _getGlobalBounds(_,T,R,P){if(!_.visible||!_.measurable)return;let O;P?O=_.worldTransform:(_.updateLocalTransform(),O=matrixPool.get(),O.appendFrom(_.localTransform,R));const I=T,L=!!_.effects.length;if(L&&(T=boundsPool.get().clear()),_.boundsArea)T.addRect(_.boundsArea,O);else{const U=_.bounds;U&&!U.isEmpty()&&(T.matrix=O,T.addBounds(U));for(let G=0;G<_.children.length;G++)_getGlobalBounds(_.children[G],T,O,P)}if(L){for(let U=0;U<_.effects.length;U++)_.effects[U].addBounds?.(T);I.addBounds(T,Matrix.IDENTITY),boundsPool.return(T)}P||matrixPool.return(O)}function updateTransformBackwards(_,T){const R=_.parent;return R&&(updateTransformBackwards(R,T),R.updateLocalTransform(),T.append(R.localTransform)),T}function multiplyHexColors(_,T){if(_===16777215||!T)return T;if(T===16777215||!_)return _;const R=_>>16&255,P=_>>8&255,O=_&255,I=T>>16&255,L=T>>8&255,U=T&255,G=R*I/255|0,V=P*L/255|0,Z=O*U/255|0;return(G<<16)+(V<<8)+Z}const WHITE_BGR=16777215;function multiplyColors(_,T){return _===WHITE_BGR?T:T===WHITE_BGR?_:multiplyHexColors(_,T)}function bgr2rgb(_){return((_&255)<<16)+(_&65280)+(_>>16&255)}const getGlobalMixin={getGlobalAlpha(_){if(_)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let T=this.alpha,R=this.parent;for(;R;)T*=R.alpha,R=R.parent;return T},getGlobalTransform(_=new Matrix,T){if(T)return _.copyFrom(this.worldTransform);this.updateLocalTransform();const R=updateTransformBackwards(this,matrixPool.get().identity());return _.appendFrom(this.localTransform,R),matrixPool.return(R),_},getGlobalTint(_){if(_)return this.renderGroup?bgr2rgb(this.renderGroup.worldColor):this.parentRenderGroup?bgr2rgb(multiplyColors(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let T=this.localColor,R=this.parent;for(;R;)T=multiplyColors(T,R.localColor),R=R.parent;return bgr2rgb(T)}};function getLocalBounds(_,T,R){return T.clear(),R||(R=Matrix.IDENTITY),_getLocalBounds(_,T,R,_,!0),T.isValid||T.set(0,0,0,0),T}function _getLocalBounds(_,T,R,P,O){let I;if(O)I=matrixPool.get(),I=R.copyTo(I);else{if(!_.visible||!_.measurable)return;_.updateLocalTransform();const G=_.localTransform;I=matrixPool.get(),I.appendFrom(G,R)}const L=T,U=!!_.effects.length;if(U&&(T=boundsPool.get().clear()),_.boundsArea)T.addRect(_.boundsArea,I);else{_.renderPipeId&&(T.matrix=I,T.addBounds(_.bounds));const G=_.children;for(let V=0;V<G.length;V++)_getLocalBounds(G[V],T,I,P,!1)}if(U){for(let G=0;G<_.effects.length;G++)_.effects[G].addLocalBounds?.(T,P);L.addBounds(T,Matrix.IDENTITY),boundsPool.return(T)}matrixPool.return(I)}function checkChildrenDidChange(_,T){const R=_.children;for(let P=0;P<R.length;P++){const O=R[P],I=O.uid,L=(O._didViewChangeTick&65535)<<16|O._didContainerChangeTick&65535,U=T.index;(T.data[U]!==I||T.data[U+1]!==L)&&(T.data[T.index]=I,T.data[T.index+1]=L,T.didChange=!0),T.index=U+2,O.children.length&&checkChildrenDidChange(O,T)}return T.didChange}const tempMatrix$1=new Matrix,measureMixin={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(_,T){const R=Math.sign(this.scale.x)||1;T!==0?this.scale.x=_/T*R:this.scale.x=R},_setHeight(_,T){const R=Math.sign(this.scale.y)||1;T!==0?this.scale.y=_/T*R:this.scale.y=R},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Bounds});const _=this._localBoundsCacheData;return _.index=1,_.didChange=!1,_.data[0]!==this._didViewChangeTick&&(_.didChange=!0,_.data[0]=this._didViewChangeTick),checkChildrenDidChange(this,_),_.didChange&&getLocalBounds(this,_.localBounds,tempMatrix$1),_.localBounds},getBounds(_,T){return getGlobalBounds(this,_,T||new Bounds)}},onRenderMixin={_onRender:null,set onRender(_){const T=this.renderGroup||this.parentRenderGroup;if(!_){this._onRender&&T?.removeOnRender(this),this._onRender=null;return}this._onRender||T?.addOnRender(this),this._onRender=_},get onRender(){return this._onRender}},sortMixin={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(_){this._zIndex!==_&&(this._zIndex=_,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(sortChildren))}};function sortChildren(_,T){return _._zIndex-T._zIndex}const toLocalGlobalMixin={getGlobalPosition(_=new Point,T=!1){return this.parent?this.parent.toGlobal(this._position,_,T):(_.x=this._position.x,_.y=this._position.y),_},toGlobal(_,T,R=!1){const P=this.getGlobalTransform(matrixPool.get(),R);return T=P.apply(_,T),matrixPool.return(P),T},toLocal(_,T,R,P){T&&(_=T.toGlobal(_,R,P));const O=this.getGlobalTransform(matrixPool.get(),P);return R=O.applyInverse(_,R),matrixPool.return(O),R}};class InstructionSet{constructor(){this.uid=uid("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(T){this.instructions[this.instructionSize++]=T}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let count$1=0;class TexturePoolClass{constructor(T){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=T||{},this.enableFullScreen=!1,this.textureStyle=new TextureStyle(this.textureOptions)}createTexture(T,R,P){const O=new TextureSource({...this.textureOptions,width:T,height:R,resolution:1,antialias:P,autoGarbageCollect:!1});return new Texture({source:O,label:`texturePool_${count$1++}`})}getOptimalTexture(T,R,P=1,O){let I=Math.ceil(T*P-1e-6),L=Math.ceil(R*P-1e-6);I=nextPow2(I),L=nextPow2(L);const U=(I<<17)+(L<<1)+(O?1:0);this._texturePool[U]||(this._texturePool[U]=[]);let G=this._texturePool[U].pop();return G||(G=this.createTexture(I,L,O)),G.source._resolution=P,G.source.width=I/P,G.source.height=L/P,G.source.pixelWidth=I,G.source.pixelHeight=L,G.frame.x=0,G.frame.y=0,G.frame.width=T,G.frame.height=R,G.updateUvs(),this._poolKeyHash[G.uid]=U,G}getSameSizeTexture(T,R=!1){const P=T.source;return this.getOptimalTexture(T.width,T.height,P._resolution,R)}returnTexture(T,R=!1){const P=this._poolKeyHash[T.uid];R&&(T.source.style=this.textureStyle),this._texturePool[P].push(T)}clear(T){if(T=T!==!1,T)for(const R in this._texturePool){const P=this._texturePool[R];if(P)for(let O=0;O<P.length;O++)P[O].destroy(!0)}this._texturePool={}}}const TexturePool=new TexturePoolClass;GlobalResourceRegistry.register(TexturePool);class RenderGroup{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Matrix,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new InstructionSet,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(T){this.root=T,T._onRender&&this.addOnRender(T),T.didChange=!0;const R=T.children;for(let P=0;P<R.length;P++){const O=R[P];O._updateFlags=15,this.addChild(O)}}enableCacheAsTexture(T={}){this.textureOptions=T,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(TexturePool.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const T=this._parentCacheAsTextureRenderGroup;T&&!T.textureNeedsUpdate&&T.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const T in this.childrenToUpdate){const R=this.childrenToUpdate[T];R.list.fill(null),R.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(T){T.renderGroupParent&&T.renderGroupParent._removeRenderGroupChild(T),T.renderGroupParent=this,this.renderGroupChildren.push(T)}_removeRenderGroupChild(T){const R=this.renderGroupChildren.indexOf(T);R>-1&&this.renderGroupChildren.splice(R,1),T.renderGroupParent=null}addChild(T){if(this.structureDidChange=!0,T.parentRenderGroup=this,T.updateTick=-1,T.parent===this.root?T.relativeRenderGroupDepth=1:T.relativeRenderGroupDepth=T.parent.relativeRenderGroupDepth+1,T.didChange=!0,this.onChildUpdate(T),T.renderGroup){this.addRenderGroupChild(T.renderGroup);return}T._onRender&&this.addOnRender(T);const R=T.children;for(let P=0;P<R.length;P++)this.addChild(R[P])}removeChild(T){if(this.structureDidChange=!0,T._onRender&&(T.renderGroup||this.removeOnRender(T)),T.parentRenderGroup=null,T.renderGroup){this._removeRenderGroupChild(T.renderGroup);return}const R=T.children;for(let P=0;P<R.length;P++)this.removeChild(R[P])}removeChildren(T){for(let R=0;R<T.length;R++)this.removeChild(T[R])}onChildUpdate(T){let R=this.childrenToUpdate[T.relativeRenderGroupDepth];R||(R=this.childrenToUpdate[T.relativeRenderGroupDepth]={index:0,list:[]}),R.list[R.index++]=T}updateRenderable(T){T.globalDisplayStatus<7||(this.instructionSet.renderPipes[T.renderPipeId].updateRenderable(T),T.didViewUpdate=!1)}onChildViewUpdate(T){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=T}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(T){this._onRenderContainers.push(T)}removeOnRender(T){this._onRenderContainers.splice(this._onRenderContainers.indexOf(T),1)}runOnRender(T){for(let R=0;R<this._onRenderContainers.length;R++)this._onRenderContainers[R]._onRender(T)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(T=[]){const R=this.root.children;for(let P=0;P<R.length;P++)this._getChildren(R[P],T);return T}_getChildren(T,R=[]){if(R.push(T),T.renderGroup)return R;const P=T.children;for(let O=0;O<P.length;O++)this._getChildren(P[O],R);return R}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Matrix),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Matrix),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const T=this._parentCacheAsTextureRenderGroup;return T?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Matrix),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(T.inverseWorldTransform).translate(-T._textureBounds.x,-T._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function assignWithIgnore(_,T,R={}){for(const P in T)!R[P]&&T[P]!==void 0&&(_[P]=T[P])}const defaultSkew=new ObservablePoint(null),defaultPivot=new ObservablePoint(null),defaultScale=new ObservablePoint(null,1,1),defaultOrigin=new ObservablePoint(null),UPDATE_COLOR=1,UPDATE_BLEND=2,UPDATE_VISIBLE=4;class Container extends EventEmitter{constructor(T={}){super(),this.uid=uid("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Matrix,this.relativeGroupTransform=new Matrix,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new ObservablePoint(this,0,0),this._scale=defaultScale,this._pivot=defaultPivot,this._origin=defaultOrigin,this._skew=defaultSkew,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],assignWithIgnore(this,T,{children:!0,parent:!0,effects:!0}),T.children?.forEach(R=>this.addChild(R)),T.parent?.addChild(this)}static mixin(T){deprecation("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),extensions.mixin(Container,T)}set _didChangeId(T){this._didViewChangeTick=T>>12&4095,this._didContainerChangeTick=T&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...T){if(this.allowChildren||deprecation(v8_0_0,"addChild: Only Containers will be allowed to add children in v8.0.0"),T.length>1){for(let O=0;O<T.length;O++)this.addChild(T[O]);return T[0]}const R=T[0],P=this.renderGroup||this.parentRenderGroup;return R.parent===this?(this.children.splice(this.children.indexOf(R),1),this.children.push(R),P&&(P.structureDidChange=!0),R):(R.parent&&R.parent.removeChild(R),this.children.push(R),this.sortableChildren&&(this.sortDirty=!0),R.parent=this,R.didChange=!0,R._updateFlags=15,P&&P.addChild(R),this.emit("childAdded",R,this,this.children.length-1),R.emit("added",this),this._didViewChangeTick++,R._zIndex!==0&&R.depthOfChildModified(),R)}removeChild(...T){if(T.length>1){for(let O=0;O<T.length;O++)this.removeChild(T[O]);return T[0]}const R=T[0],P=this.children.indexOf(R);return P>-1&&(this._didViewChangeTick++,this.children.splice(P,1),this.renderGroup?this.renderGroup.removeChild(R):this.parentRenderGroup&&this.parentRenderGroup.removeChild(R),R.parentRenderLayer&&R.parentRenderLayer.detach(R),R.parent=null,this.emit("childRemoved",R,this,P),R.emit("removed",this)),R}_onUpdate(T){T&&T===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(T){!!this.renderGroup!==T&&(T?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const T=this.parentRenderGroup;T?.removeChild(this),this.renderGroup=BigPool.get(RenderGroup,this),this.groupTransform=Matrix.IDENTITY,T?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const T=this.parentRenderGroup;T?.removeChild(this),BigPool.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,T?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Matrix),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(T){this._position.x=T}get y(){return this._position.y}set y(T){this._position.y=T}get position(){return this._position}set position(T){this._position.copyFrom(T)}get rotation(){return this._rotation}set rotation(T){this._rotation!==T&&(this._rotation=T,this._onUpdate(this._skew))}get angle(){return this.rotation*RAD_TO_DEG}set angle(T){this.rotation=T*DEG_TO_RAD}get pivot(){return this._pivot===defaultPivot&&(this._pivot=new ObservablePoint(this,0,0)),this._pivot}set pivot(T){this._pivot===defaultPivot&&(this._pivot=new ObservablePoint(this,0,0),this._origin!==defaultOrigin&&warn$1("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof T=="number"?this._pivot.set(T):this._pivot.copyFrom(T)}get skew(){return this._skew===defaultSkew&&(this._skew=new ObservablePoint(this,0,0)),this._skew}set skew(T){this._skew===defaultSkew&&(this._skew=new ObservablePoint(this,0,0)),this._skew.copyFrom(T)}get scale(){return this._scale===defaultScale&&(this._scale=new ObservablePoint(this,1,1)),this._scale}set scale(T){this._scale===defaultScale&&(this._scale=new ObservablePoint(this,0,0)),typeof T=="string"&&(T=parseFloat(T)),typeof T=="number"?this._scale.set(T):this._scale.copyFrom(T)}get origin(){return this._origin===defaultOrigin&&(this._origin=new ObservablePoint(this,0,0)),this._origin}set origin(T){this._origin===defaultOrigin&&(this._origin=new ObservablePoint(this,0,0),this._pivot!==defaultPivot&&warn$1("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof T=="number"?this._origin.set(T):this._origin.copyFrom(T)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(T){const R=this.getLocalBounds().width;this._setWidth(T,R)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(T){const R=this.getLocalBounds().height;this._setHeight(T,R)}getSize(T){T||(T={});const R=this.getLocalBounds();return T.width=Math.abs(this.scale.x*R.width),T.height=Math.abs(this.scale.y*R.height),T}setSize(T,R){const P=this.getLocalBounds();typeof T=="object"?(R=T.height??T.width,T=T.width):R??(R=T),T!==void 0&&this._setWidth(T,P.width),R!==void 0&&this._setHeight(R,P.height)}_updateSkew(){const T=this._rotation,R=this._skew;this._cx=Math.cos(T+R._y),this._sx=Math.sin(T+R._y),this._cy=-Math.sin(T-R._x),this._sy=Math.cos(T-R._x)}updateTransform(T){return this.position.set(typeof T.x=="number"?T.x:this.position.x,typeof T.y=="number"?T.y:this.position.y),this.scale.set(typeof T.scaleX=="number"?T.scaleX||1:this.scale.x,typeof T.scaleY=="number"?T.scaleY||1:this.scale.y),this.rotation=typeof T.rotation=="number"?T.rotation:this.rotation,this.skew.set(typeof T.skewX=="number"?T.skewX:this.skew.x,typeof T.skewY=="number"?T.skewY:this.skew.y),this.pivot.set(typeof T.pivotX=="number"?T.pivotX:this.pivot.x,typeof T.pivotY=="number"?T.pivotY:this.pivot.y),this.origin.set(typeof T.originX=="number"?T.originX:this.origin.x,typeof T.originY=="number"?T.originY:this.origin.y),this}setFromMatrix(T){T.decompose(this)}updateLocalTransform(){const T=this._didContainerChangeTick;if(this._didLocalTransformChangeId===T)return;this._didLocalTransformChangeId=T;const R=this.localTransform,P=this._scale,O=this._pivot,I=this._origin,L=this._position,U=P._x,G=P._y,V=O._x,Z=O._y,Y=-I._x,W=-I._y;R.a=this._cx*U,R.b=this._sx*U,R.c=this._cy*G,R.d=this._sy*G,R.tx=L._x-(V*R.a+Z*R.c)+(Y*R.a+W*R.c)-Y,R.ty=L._y-(V*R.b+Z*R.d)+(Y*R.b+W*R.d)-W}set alpha(T){T!==this.localAlpha&&(this.localAlpha=T,this._updateFlags|=UPDATE_COLOR,this._onUpdate())}get alpha(){return this.localAlpha}set tint(T){const P=Color$1.shared.setValue(T??16777215).toBgrNumber();P!==this.localColor&&(this.localColor=P,this._updateFlags|=UPDATE_COLOR,this._onUpdate())}get tint(){return bgr2rgb(this.localColor)}set blendMode(T){this.localBlendMode!==T&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=UPDATE_BLEND,this.localBlendMode=T,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(T){const R=T?2:0;(this.localDisplayStatus&2)!==R&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=UPDATE_VISIBLE,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(T){const R=T?0:4;(this.localDisplayStatus&4)!==R&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=UPDATE_VISIBLE,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(T){const R=T?1:0;(this.localDisplayStatus&1)!==R&&(this._updateFlags|=UPDATE_VISIBLE,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(T=!1){if(this.destroyed)return;this.destroyed=!0;let R;if(this.children.length&&(R=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof T=="boolean"?T:T?.children)&&R)for(let O=0;O<R.length;++O)R[O].destroy(T);this.renderGroup?.destroy(),this.renderGroup=null}}extensions.mixin(Container,childrenHelperMixin,getFastGlobalBoundsMixin,toLocalGlobalMixin,onRenderMixin,measureMixin,effectsMixin,findMixin,sortMixin,cullingMixin,cacheAsTextureMixin,getGlobalMixin,collectRenderablesMixin);class ViewContainer extends Container{constructor(T){super(T),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new Bounds(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(T){this._roundPixels=T?1:0}containsPoint(T){const R=this.bounds,{x:P,y:O}=T;return P>=R.minX&&P<=R.maxX&&O>=R.minY&&O<=R.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const T=this.renderGroup||this.parentRenderGroup;T&&T.onChildViewUpdate(this)}destroy(T){super.destroy(T),this._bounds=null;for(const R in this._gpuData)this._gpuData[R].destroy?.();this._gpuData=null}collectRenderablesSimple(T,R,P){const{renderPipes:O}=R;O.blendMode.pushBlendMode(this,this.groupBlendMode,T),O[this.renderPipeId].addRenderable(this,T),this.didViewUpdate=!1;const L=this.children,U=L.length;for(let G=0;G<U;G++)L[G].collectRenderables(T,R,P);O.blendMode.popBlendMode(T)}}class Sprite extends ViewContainer{constructor(T=Texture.EMPTY){T instanceof Texture&&(T={texture:T});const{texture:R=Texture.EMPTY,anchor:P,roundPixels:O,width:I,height:L,...U}=T;super({label:"Sprite",...U}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new ObservablePoint({_onUpdate:()=>{this.onViewUpdate()}}),P?this.anchor=P:R.defaultAnchor&&(this.anchor=R.defaultAnchor),this.texture=R,this.allowChildren=!1,this.roundPixels=O??!1,I!==void 0&&(this.width=I),L!==void 0&&(this.height=L)}static from(T,R=!1){return T instanceof Texture?new Sprite(T):new Sprite(Texture.from(T,R))}set texture(T){T||(T=Texture.EMPTY);const R=this._texture;R!==T&&(R&&R.dynamic&&R.off("update",this.onViewUpdate,this),T.dynamic&&T.on("update",this.onViewUpdate,this),this._texture=T,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return updateQuadBounds(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return deprecation("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const T=this._anchor,R=this._texture,P=this._bounds,{width:O,height:I}=R.orig;P.minX=-T._x*O,P.maxX=P.minX+O,P.minY=-T._y*I,P.maxY=P.minY+I}destroy(T=!1){if(super.destroy(T),typeof T=="boolean"?T:T?.texture){const P=typeof T=="boolean"?T:T?.textureSource;this._texture.destroy(P)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(T){typeof T=="number"?this._anchor.set(T):this._anchor.copyFrom(T)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(T){this._setWidth(T,this._texture.orig.width),this._width=T}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(T){this._setHeight(T,this._texture.orig.height),this._height=T}getSize(T){return T||(T={}),T.width=Math.abs(this.scale.x)*this._texture.orig.width,T.height=Math.abs(this.scale.y)*this._texture.orig.height,T}setSize(T,R){typeof T=="object"?(R=T.height??T.width,T=T.width):R??(R=T),T!==void 0&&this._setWidth(T,this._texture.orig.width),R!==void 0&&this._setHeight(R,this._texture.orig.height)}}const tempBounds=new Bounds;function addMaskBounds(_,T,R){const P=tempBounds;_.measurable=!0,getGlobalBounds(_,R,P),T.addBoundsMask(P),_.measurable=!1}function addMaskLocalBounds(_,T,R){const P=boundsPool.get();_.measurable=!0;const O=matrixPool.get().identity(),I=getMatrixRelativeToParent(_,R,O);getLocalBounds(_,P,I),_.measurable=!1,T.addBoundsMask(P),matrixPool.return(O),boundsPool.return(P)}function getMatrixRelativeToParent(_,T,R){return _?(_!==T&&(getMatrixRelativeToParent(_.parent,T,R),_.updateLocalTransform(),R.append(_.localTransform)),R):(warn$1("Mask bounds, renderable is not inside the root container"),R)}class AlphaMask{constructor(T){this.priority=0,this.inverse=!1,this.pipe="alphaMask",T?.mask&&this.init(T.mask)}init(T){this.mask=T,this.renderMaskToTexture=!(T instanceof Sprite),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(T,R){this.inverse||addMaskBounds(this.mask,T,R)}addLocalBounds(T,R){addMaskLocalBounds(this.mask,T,R)}containsPoint(T,R){const P=this.mask;return R(P,T)}destroy(){this.reset()}static test(T){return T instanceof Sprite}}AlphaMask.extension=ExtensionType.MaskEffect;class ColorMask{constructor(T){this.priority=0,this.pipe="colorMask",T?.mask&&this.init(T.mask)}init(T){this.mask=T}destroy(){}static test(T){return typeof T=="number"}}ColorMask.extension=ExtensionType.MaskEffect;class StencilMask{constructor(T){this.priority=0,this.pipe="stencilMask",T?.mask&&this.init(T.mask)}init(T){this.mask=T,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(T,R){addMaskBounds(this.mask,T,R)}addLocalBounds(T,R){addMaskLocalBounds(this.mask,T,R)}containsPoint(T,R){const P=this.mask;return R(P,T)}destroy(){this.reset()}static test(T){return T instanceof Container}}StencilMask.extension=ExtensionType.MaskEffect;const BrowserAdapter={createCanvas:(_,T)=>{const R=document.createElement("canvas");return R.width=_,R.height=T,R},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(_,T)=>fetch(_,T),parseXML:_=>new DOMParser().parseFromString(_,"text/xml")};let currentAdapter=BrowserAdapter;const DOMAdapter={get(){return currentAdapter},set(_){currentAdapter=_}};class CanvasSource extends TextureSource{constructor(T){T.resource||(T.resource=DOMAdapter.get().createCanvas()),T.width||(T.width=T.resource.width,T.autoDensity||(T.width/=T.resolution)),T.height||(T.height=T.resource.height,T.autoDensity||(T.height/=T.resolution)),super(T),this.uploadMethodId="image",this.autoDensity=T.autoDensity,this.resizeCanvas(),this.transparent=!!T.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(T=this.width,R=this.height,P=this._resolution){const O=super.resize(T,R,P);return O&&this.resizeCanvas(),O}static test(T){return globalThis.HTMLCanvasElement&&T instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&T instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}CanvasSource.extension=ExtensionType.TextureSource;class ImageSource extends TextureSource{constructor(T){super(T),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(T){return globalThis.HTMLImageElement&&T instanceof HTMLImageElement||typeof ImageBitmap<"u"&&T instanceof ImageBitmap||globalThis.VideoFrame&&T instanceof VideoFrame}}ImageSource.extension=ExtensionType.TextureSource;var UPDATE_PRIORITY=(_=>(_[_.INTERACTION=50]="INTERACTION",_[_.HIGH=25]="HIGH",_[_.NORMAL=0]="NORMAL",_[_.LOW=-25]="LOW",_[_.UTILITY=-50]="UTILITY",_))(UPDATE_PRIORITY||{});class TickerListener{constructor(T,R=null,P=0,O=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=T,this._context=R,this.priority=P,this._once=O}match(T,R=null){return this._fn===T&&this._context===R}emit(T){this._fn&&(this._context?this._fn.call(this._context,T):this._fn(T));const R=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),R}connect(T){this.previous=T,T.next&&(T.next.previous=this),this.next=T.next,T.next=this}destroy(T=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const R=this.next;return this.next=T?null:R,this.previous=null,R}}const _Ticker=class Sn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/Sn.targetFPMS,this.elapsedMS=1/Sn.targetFPMS,this._tick=T=>{this._requestId=null,this.started&&(this.update(T),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(T,R,P=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(T,R,P))}addOnce(T,R,P=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(T,R,P,!0))}_addListener(T){let R=this._head.next,P=this._head;if(!R)T.connect(P);else{for(;R;){if(T.priority>R.priority){T.connect(P);break}P=R,R=R.next}T.previous||T.connect(P)}return this._startIfPossible(),this}remove(T,R){let P=this._head.next;for(;P;)P.match(T,R)?P=P.destroy():P=P.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let T=0,R=this._head;for(;R=R.next;)T++;return T}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let T=this._head.next;for(;T;)T=T.destroy(!0);this._head.destroy(),this._head=null}}update(T=performance.now()){let R;if(T>this.lastTime){if(R=this.elapsedMS=T-this.lastTime,R>this._maxElapsedMS&&(R=this._maxElapsedMS),R*=this.speed,this._minElapsedMS){const I=T-this._lastFrame|0;if(I<this._minElapsedMS)return;this._lastFrame=T-I%this._minElapsedMS}this.deltaMS=R,this.deltaTime=this.deltaMS*Sn.targetFPMS;const P=this._head;let O=P.next;for(;O;)O=O.emit(this);P.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=T}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(T){const R=Math.min(this.maxFPS,T),P=Math.min(Math.max(0,R)/1e3,Sn.targetFPMS);this._maxElapsedMS=1/P}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(T){if(T===0)this._minElapsedMS=0;else{const R=Math.max(this.minFPS,T);this._minElapsedMS=1/(R/1e3)}}static get shared(){if(!Sn._shared){const T=Sn._shared=new Sn;T.autoStart=!0,T._protected=!0}return Sn._shared}static get system(){if(!Sn._system){const T=Sn._system=new Sn;T.autoStart=!0,T._protected=!0}return Sn._system}};_Ticker.targetFPMS=.06;let Ticker=_Ticker,promise;async function detectVideoAlphaMode(){return promise??(promise=(async()=>{const T=DOMAdapter.get().createCanvas(1,1).getContext("webgl");if(!T)return"premultiply-alpha-on-upload";const R=await new Promise(L=>{const U=document.createElement("video");U.onloadeddata=()=>L(U),U.onerror=()=>L(null),U.autoplay=!1,U.crossOrigin="anonymous",U.preload="auto",U.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",U.load()});if(!R)return"premultiply-alpha-on-upload";const P=T.createTexture();T.bindTexture(T.TEXTURE_2D,P);const O=T.createFramebuffer();T.bindFramebuffer(T.FRAMEBUFFER,O),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,P,0),T.pixelStorei(T.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),T.pixelStorei(T.UNPACK_COLORSPACE_CONVERSION_WEBGL,T.NONE),T.texImage2D(T.TEXTURE_2D,0,T.RGBA,T.RGBA,T.UNSIGNED_BYTE,R);const I=new Uint8Array(4);return T.readPixels(0,0,1,1,T.RGBA,T.UNSIGNED_BYTE,I),T.deleteFramebuffer(O),T.deleteTexture(P),T.getExtension("WEBGL_lose_context")?.loseContext(),I[0]<=I[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),promise}const _VideoSource=class hh extends TextureSource{constructor(T){super(T),this.isReady=!1,this.uploadMethodId="video",T={...hh.defaultOptions,...T},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=T.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=T.autoPlay!==!1,this.alphaMode=T.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),T.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const T=Ticker.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-T)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const T=this.resource,R=this.options;return(T.readyState===T.HAVE_ENOUGH_DATA||T.readyState===T.HAVE_FUTURE_DATA)&&T.width&&T.height&&(T.complete=!0),T.addEventListener("play",this._onPlayStart),T.addEventListener("pause",this._onPlayStop),T.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(R.preload||T.addEventListener("canplay",this._onCanPlay),T.addEventListener("canplaythrough",this._onCanPlayThrough),T.addEventListener("error",this._onError,!0)),this.alphaMode=await detectVideoAlphaMode(),this._load=new Promise((P,O)=>{this.isValid?P(this):(this._resolve=P,this._reject=O,R.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${R.preloadTimeoutMs}ms`))})),T.load())}),this._load}_onError(T){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",T),this._reject&&(this._reject(T),this._reject=null,this._resolve=null)}_isSourcePlaying(){const T=this.resource;return!T.paused&&!T.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const T=this.resource;this.isValid&&(this.isReady=!0,this.resize(T.videoWidth,T.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const T=this.resource;T&&(T.removeEventListener("play",this._onPlayStart),T.removeEventListener("pause",this._onPlayStop),T.removeEventListener("seeked",this._onSeeked),T.removeEventListener("canplay",this._onCanPlay),T.removeEventListener("canplaythrough",this._onCanPlayThrough),T.removeEventListener("error",this._onError,!0),T.pause(),T.src="",T.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(T){T!==this._autoUpdate&&(this._autoUpdate=T,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(T){T!==this._updateFPS&&(this._updateFPS=T,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ticker.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ticker.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ticker.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(T){return globalThis.HTMLVideoElement&&T instanceof HTMLVideoElement}};_VideoSource.extension=ExtensionType.TextureSource;_VideoSource.defaultOptions={...TextureSource.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};_VideoSource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let VideoSource=_VideoSource;const convertToList=(_,T,R=!1)=>(Array.isArray(_)||(_=[_]),T?_.map(P=>typeof P=="string"||R?T(P):P):_);class CacheClass{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(T){return this._cache.has(T)}get(T){const R=this._cache.get(T);return R||warn$1(`[Assets] Asset id ${T} was not found in the Cache`),R}set(T,R){const P=convertToList(T);let O;for(let G=0;G<this.parsers.length;G++){const V=this.parsers[G];if(V.test(R)){O=V.getCacheableAssets(P,R);break}}const I=new Map(Object.entries(O||{}));O||P.forEach(G=>{I.set(G,R)});const L=[...I.keys()],U={cacheKeys:L,keys:P};P.forEach(G=>{this._cacheMap.set(G,U)}),L.forEach(G=>{const V=O?O[G]:R;this._cache.has(G)&&this._cache.get(G)!==V&&warn$1("[Cache] already has key:",G),this._cache.set(G,I.get(G))})}remove(T){if(!this._cacheMap.has(T)){warn$1(`[Assets] Asset id ${T} was not found in the Cache`);return}const R=this._cacheMap.get(T);R.cacheKeys.forEach(O=>{this._cache.delete(O)}),R.keys.forEach(O=>{this._cacheMap.delete(O)})}get parsers(){return this._parsers}}const Cache=new CacheClass,sources=[];extensions.handleByList(ExtensionType.TextureSource,sources);function textureSourceFrom(_={}){const T=_&&_.resource,R=T?_.resource:_,P=T?_:{resource:_};for(let O=0;O<sources.length;O++){const I=sources[O];if(I.test(R))return new I(P)}throw new Error(`Could not find a source type for resource: ${P.resource}`)}function resourceToTexture(_={},T=!1){const R=_&&_.resource,P=R?_.resource:_,O=R?_:{resource:_};if(!T&&Cache.has(P))return Cache.get(P);const I=new Texture({source:textureSourceFrom(O)});return I.on("destroy",()=>{Cache.has(P)&&Cache.remove(P)}),T||Cache.set(P,I),I}function textureFrom(_,T=!1){return typeof _=="string"?Cache.get(_):_ instanceof TextureSource?new Texture({source:_}):resourceToTexture(_,T)}Texture.from=textureFrom;TextureSource.from=textureSourceFrom;extensions.add(AlphaMask,ColorMask,StencilMask,VideoSource,ImageSource,CanvasSource,BufferImageSource);var LoaderParserPriority=(_=>(_[_.Low=0]="Low",_[_.Normal=1]="Normal",_[_.High=2]="High",_))(LoaderParserPriority||{});function assertPath(_){if(typeof _!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(_)}`)}function removeUrlParams(_){return _.split("?")[0].split("#")[0]}function escapeRegExp(_){return _.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(_,T,R){return _.replace(new RegExp(escapeRegExp(T),"g"),R)}function normalizeStringPosix(_,T){let R="",P=0,O=-1,I=0,L=-1;for(let U=0;U<=_.length;++U){if(U<_.length)L=_.charCodeAt(U);else{if(L===47)break;L=47}if(L===47){if(!(O===U-1||I===1))if(O!==U-1&&I===2){if(R.length<2||P!==2||R.charCodeAt(R.length-1)!==46||R.charCodeAt(R.length-2)!==46){if(R.length>2){const G=R.lastIndexOf("/");if(G!==R.length-1){G===-1?(R="",P=0):(R=R.slice(0,G),P=R.length-1-R.lastIndexOf("/")),O=U,I=0;continue}}else if(R.length===2||R.length===1){R="",P=0,O=U,I=0;continue}}}else R.length>0?R+=`/${_.slice(O+1,U)}`:R=_.slice(O+1,U),P=U-O-1;O=U,I=0}else L===46&&I!==-1?++I:I=-1}return R}const path={toPosix(_){return replaceAll(_,"\\","/")},isUrl(_){return/^https?:/.test(this.toPosix(_))},isDataUrl(_){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(_)},isBlobUrl(_){return _.startsWith("blob:")},hasProtocol(_){return/^[^/:]+:/.test(this.toPosix(_))},getProtocol(_){assertPath(_),_=this.toPosix(_);const T=/^file:\/\/\//.exec(_);if(T)return T[0];const R=/^[^/:]+:\/{0,2}/.exec(_);return R?R[0]:""},toAbsolute(_,T,R){if(assertPath(_),this.isDataUrl(_)||this.isBlobUrl(_))return _;const P=removeUrlParams(this.toPosix(T??DOMAdapter.get().getBaseUrl())),O=removeUrlParams(this.toPosix(R??this.rootname(P)));return _=this.toPosix(_),_.startsWith("/")?path.join(O,_.slice(1)):this.isAbsolute(_)?_:this.join(P,_)},normalize(_){if(assertPath(_),_.length===0)return".";if(this.isDataUrl(_)||this.isBlobUrl(_))return _;_=this.toPosix(_);let T="";const R=_.startsWith("/");this.hasProtocol(_)&&(T=this.rootname(_),_=_.slice(T.length));const P=_.endsWith("/");return _=normalizeStringPosix(_),_.length>0&&P&&(_+="/"),R?`/${_}`:T+_},isAbsolute(_){return assertPath(_),_=this.toPosix(_),this.hasProtocol(_)?!0:_.startsWith("/")},join(..._){if(_.length===0)return".";let T;for(let R=0;R<_.length;++R){const P=_[R];if(assertPath(P),P.length>0)if(T===void 0)T=P;else{const O=_[R-1]??"";this.joinExtensions.includes(this.extname(O).toLowerCase())?T+=`/../${P}`:T+=`/${P}`}}return T===void 0?".":this.normalize(T)},dirname(_){if(assertPath(_),_.length===0)return".";_=this.toPosix(_);let T=_.charCodeAt(0);const R=T===47;let P=-1,O=!0;const I=this.getProtocol(_),L=_;_=_.slice(I.length);for(let U=_.length-1;U>=1;--U)if(T=_.charCodeAt(U),T===47){if(!O){P=U;break}}else O=!1;return P===-1?R?"/":this.isUrl(L)?I+_:I:R&&P===1?"//":I+_.slice(0,P)},rootname(_){assertPath(_),_=this.toPosix(_);let T="";if(_.startsWith("/")?T="/":T=this.getProtocol(_),this.isUrl(_)){const R=_.indexOf("/",T.length);R!==-1?T=_.slice(0,R):T=_,T.endsWith("/")||(T+="/")}return T},basename(_,T){assertPath(_),T&&assertPath(T),_=removeUrlParams(this.toPosix(_));let R=0,P=-1,O=!0,I;if(T!==void 0&&T.length>0&&T.length<=_.length){if(T.length===_.length&&T===_)return"";let L=T.length-1,U=-1;for(I=_.length-1;I>=0;--I){const G=_.charCodeAt(I);if(G===47){if(!O){R=I+1;break}}else U===-1&&(O=!1,U=I+1),L>=0&&(G===T.charCodeAt(L)?--L===-1&&(P=I):(L=-1,P=U))}return R===P?P=U:P===-1&&(P=_.length),_.slice(R,P)}for(I=_.length-1;I>=0;--I)if(_.charCodeAt(I)===47){if(!O){R=I+1;break}}else P===-1&&(O=!1,P=I+1);return P===-1?"":_.slice(R,P)},extname(_){assertPath(_),_=removeUrlParams(this.toPosix(_));let T=-1,R=0,P=-1,O=!0,I=0;for(let L=_.length-1;L>=0;--L){const U=_.charCodeAt(L);if(U===47){if(!O){R=L+1;break}continue}P===-1&&(O=!1,P=L+1),U===46?T===-1?T=L:I!==1&&(I=1):T!==-1&&(I=-1)}return T===-1||P===-1||I===0||I===1&&T===P-1&&T===R+1?"":_.slice(T,P)},parse(_){assertPath(_);const T={root:"",dir:"",base:"",ext:"",name:""};if(_.length===0)return T;_=removeUrlParams(this.toPosix(_));let R=_.charCodeAt(0);const P=this.isAbsolute(_);let O;T.root=this.rootname(_),P||this.hasProtocol(_)?O=1:O=0;let I=-1,L=0,U=-1,G=!0,V=_.length-1,Z=0;for(;V>=O;--V){if(R=_.charCodeAt(V),R===47){if(!G){L=V+1;break}continue}U===-1&&(G=!1,U=V+1),R===46?I===-1?I=V:Z!==1&&(Z=1):I!==-1&&(Z=-1)}return I===-1||U===-1||Z===0||Z===1&&I===U-1&&I===L+1?U!==-1&&(L===0&&P?T.base=T.name=_.slice(1,U):T.base=T.name=_.slice(L,U)):(L===0&&P?(T.name=_.slice(1,I),T.base=_.slice(1,U)):(T.name=_.slice(L,I),T.base=_.slice(L,U)),T.ext=_.slice(I,U)),T.dir=this.dirname(_),T},sep:"/",delimiter:":",joinExtensions:[".html"]};function processX(_,T,R,P,O){const I=T[R];for(let L=0;L<I.length;L++){const U=I[L];R<T.length-1?processX(_.replace(P[R],U),T,R+1,P,O):O.push(_.replace(P[R],U))}}function createStringVariations(_){const T=/\{(.*?)\}/g,R=_.match(T),P=[];if(R){const O=[];R.forEach(I=>{const L=I.substring(1,I.length-1).split(",");O.push(L)}),processX(_,O,0,R,P)}else P.push(_);return P}const isSingleItem=_=>!Array.isArray(_);class Resolver{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(T,R)=>`${T}${this._bundleIdConnector}${R}`,extractAssetIdFromBundle:(T,R)=>R.replace(`${T}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(T){if(this._bundleIdConnector=T.connector??this._bundleIdConnector,this._createBundleAssetId=T.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=T.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...T){T.forEach(R=>{this._preferredOrder.push(R),R.priority||(R.priority=Object.keys(R.params))}),this._resolverHash={}}set basePath(T){this._basePath=T}get basePath(){return this._basePath}set rootPath(T){this._rootPath=T}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(T){if(typeof T=="string")this._defaultSearchParams=T;else{const R=T;this._defaultSearchParams=Object.keys(R).map(P=>`${encodeURIComponent(P)}=${encodeURIComponent(R[P])}`).join("&")}}getAlias(T){const{alias:R,src:P}=T;return convertToList(R||P,I=>typeof I=="string"?I:Array.isArray(I)?I.map(L=>L?.src??L):I?.src?I.src:I,!0)}addManifest(T){this._manifest&&warn$1("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=T,T.bundles.forEach(R=>{this.addBundle(R.name,R.assets)})}addBundle(T,R){const P=[];let O=R;Array.isArray(R)||(O=Object.entries(R).map(([I,L])=>typeof L=="string"||Array.isArray(L)?{alias:I,src:L}:{alias:I,...L})),O.forEach(I=>{const L=I.src,U=I.alias;let G;if(typeof U=="string"){const V=this._createBundleAssetId(T,U);P.push(V),G=[U,V]}else{const V=U.map(Z=>this._createBundleAssetId(T,Z));P.push(...V),G=[...U,...V]}this.add({...I,alias:G,src:L})}),this._bundles[T]=P}add(T){const R=[];Array.isArray(T)?R.push(...T):R.push(T);let P;P=I=>{this.hasKey(I)&&warn$1(`[Resolver] already has key: ${I} overwriting`)},convertToList(R).forEach(I=>{const{src:L}=I;let{data:U,format:G,loadParser:V,parser:Z}=I;const Y=convertToList(L).map(te=>typeof te=="string"?createStringVariations(te):Array.isArray(te)?te:[te]),W=this.getAlias(I);Array.isArray(W)?W.forEach(P):P(W);const J=[],ee=te=>({...this._parsers.find(oe=>oe.test(te))?.parse(te),src:te});Y.forEach(te=>{te.forEach(ie=>{let oe={};if(typeof ie!="object"?oe=ee(ie):(U=ie.data??U,G=ie.format??G,(ie.loadParser||ie.parser)&&(V=ie.loadParser??V,Z=ie.parser??Z),oe={...ee(ie.src),...ie}),!W)throw new Error(`[Resolver] alias is undefined for this asset: ${oe.src}`);oe=this._buildResolvedAsset(oe,{aliases:W,data:U,format:G,loadParser:V,parser:Z,progressSize:I.progressSize}),J.push(oe)})}),W.forEach(te=>{this._assetMap[te]=J})})}resolveBundle(T){const R=isSingleItem(T);T=convertToList(T);const P={};return T.forEach(O=>{const I=this._bundles[O];if(I){const L=this.resolve(I),U={};for(const G in L){const V=L[G];U[this._extractAssetIdFromBundle(O,G)]=V}P[O]=U}}),R?P[T[0]]:P}resolveUrl(T){const R=this.resolve(T);if(typeof T!="string"){const P={};for(const O in R)P[O]=R[O].src;return P}return R.src}resolve(T){const R=isSingleItem(T);T=convertToList(T);const P={};return T.forEach(O=>{if(!this._resolverHash[O])if(this._assetMap[O]){let I=this._assetMap[O];const L=this._getPreferredOrder(I);L?.priority.forEach(U=>{L.params[U].forEach(G=>{const V=I.filter(Z=>Z[U]?Z[U]===G:!1);V.length&&(I=V)})}),this._resolverHash[O]=I[0]}else this._resolverHash[O]=this._buildResolvedAsset({alias:[O],src:O},{});P[O]=this._resolverHash[O]}),R?P[T[0]]:P}hasKey(T){return!!this._assetMap[T]}hasBundle(T){return!!this._bundles[T]}_getPreferredOrder(T){for(let R=0;R<T.length;R++){const P=T[R],O=this._preferredOrder.find(I=>I.params.format.includes(P.format));if(O)return O}return this._preferredOrder[0]}_appendDefaultSearchParams(T){if(!this._defaultSearchParams)return T;const R=/\?/.test(T)?"&":"?";return`${T}${R}${this._defaultSearchParams}`}_buildResolvedAsset(T,R){const{aliases:P,data:O,loadParser:I,parser:L,format:U,progressSize:G}=R;return(this._basePath||this._rootPath)&&(T.src=path.toAbsolute(T.src,this._basePath,this._rootPath)),T.alias=P??T.alias??[T.src],T.src=this._appendDefaultSearchParams(T.src),T.data={...O||{},...T.data},T.loadParser=I??T.loadParser,T.parser=L??T.parser,T.format=U??T.format??getUrlExtension(T.src),G!==void 0&&(T.progressSize=G),T}}Resolver.RETINA_PREFIX=/@([0-9\.]+)x/;function getUrlExtension(_){return _.split(".").pop().split("?").shift().split("#").shift()}const copySearchParams=(_,T)=>{const R=T.split("?")[1];return R&&(_+=`?${R}`),_},_Spritesheet=class Ns{constructor(T,R){this.linkedSheets=[];let P=T;T?.source instanceof TextureSource&&(P={texture:T,data:R});const{texture:O,data:I,cachePrefix:L=""}=P;this.cachePrefix=L,this._texture=O instanceof Texture?O:null,this.textureSource=O.source,this.textures={},this.animations={},this.data=I;const U=parseFloat(I.meta.scale);U?(this.resolution=U,O.source.resolution=this.resolution):this.resolution=O.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(T=>{this._callback=T,this._batchIndex=0,this._frameKeys.length<=Ns.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(T){let R=T;const P=Ns.BATCH_SIZE;for(;R-T<P&&R<this._frameKeys.length;){const O=this._frameKeys[R],I=this._frames[O],L=I.frame;if(L){let U=null,G=null;const V=I.trimmed!==!1&&I.sourceSize?I.sourceSize:I.frame,Z=new Rectangle(0,0,Math.floor(V.w)/this.resolution,Math.floor(V.h)/this.resolution);I.rotated?U=new Rectangle(Math.floor(L.x)/this.resolution,Math.floor(L.y)/this.resolution,Math.floor(L.h)/this.resolution,Math.floor(L.w)/this.resolution):U=new Rectangle(Math.floor(L.x)/this.resolution,Math.floor(L.y)/this.resolution,Math.floor(L.w)/this.resolution,Math.floor(L.h)/this.resolution),I.trimmed!==!1&&I.spriteSourceSize&&(G=new Rectangle(Math.floor(I.spriteSourceSize.x)/this.resolution,Math.floor(I.spriteSourceSize.y)/this.resolution,Math.floor(L.w)/this.resolution,Math.floor(L.h)/this.resolution)),this.textures[O]=new Texture({source:this.textureSource,frame:U,orig:Z,trim:G,rotate:I.rotated?2:0,defaultAnchor:I.anchor,defaultBorders:I.borders,label:O.toString()})}R++}}_processAnimations(){const T=this.data.animations||{};for(const R in T){this.animations[R]=[];for(let P=0;P<T[R].length;P++){const O=T[R][P];this.animations[R].push(this.textures[O])}}}_parseComplete(){const T=this._callback;this._callback=null,this._batchIndex=0,T.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Ns.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Ns.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(T=!1){for(const R in this.textures)this.textures[R].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,T&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};_Spritesheet.BATCH_SIZE=1e3;let Spritesheet=_Spritesheet;const validImages=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function getCacheableAssets(_,T,R){const P={};if(_.forEach(O=>{P[O]=T}),Object.keys(T.textures).forEach(O=>{P[`${T.cachePrefix}${O}`]=T.textures[O]}),!R){const O=path.dirname(_[0]);T.linkedSheets.forEach((I,L)=>{const U=getCacheableAssets([`${O}/${T.data.meta.related_multi_packs[L]}`],I,!0);Object.assign(P,U)})}return P}const spritesheetAsset={extension:ExtensionType.Asset,cache:{test:_=>_ instanceof Spritesheet,getCacheableAssets:(_,T)=>getCacheableAssets(_,T,!1)},resolver:{extension:{type:ExtensionType.ResolveParser,name:"resolveSpritesheet"},test:_=>{const R=_.split("?")[0].split("."),P=R.pop(),O=R.pop();return P==="json"&&validImages.includes(O)},parse:_=>{const T=_.split(".");return{resolution:parseFloat(Resolver.RETINA_PREFIX.exec(_)?.[1]??"1"),format:T[T.length-2],src:_}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal,name:"spritesheetLoader"},async testParse(_,T){return path.extname(T.src).toLowerCase()===".json"&&!!_.frames},async parse(_,T,R){const{texture:P,imageFilename:O,textureOptions:I,cachePrefix:L}=T?.data??{};let U=path.dirname(T.src);U&&U.lastIndexOf("/")!==U.length-1&&(U+="/");let G;if(P instanceof Texture)G=P;else{const Y=copySearchParams(U+(O??_.meta.image),T.src);G=(await R.load([{src:Y,data:I}]))[Y]}const V=new Spritesheet({texture:G.source,data:_,cachePrefix:L});await V.parse();const Z=_?.meta?.related_multi_packs;if(Array.isArray(Z)){const Y=[];for(const J of Z){if(typeof J!="string")continue;let ee=U+J;T.data?.ignoreMultiPack||(ee=copySearchParams(ee,T.src),Y.push(R.load({src:ee,data:{textureOptions:I,ignoreMultiPack:!0}})))}const W=await Promise.all(Y);V.linkedSheets=W,W.forEach(J=>{J.linkedSheets=[V].concat(V.linkedSheets.filter(ee=>ee!==J))})}return V},async unload(_,T,R){await R.unload(_.textureSource._sourceOrigin),_.destroy(!1)}}};extensions.add(spritesheetAsset);const idCounts=Object.create(null),idHash=Object.create(null);function createIdFromString(_,T){let R=idHash[_];return R===void 0&&(idCounts[T]===void 0&&(idCounts[T]=1),idHash[_]=R=idCounts[T]++),R}let context;function getTestContext(){return(!context||context?.isContextLost())&&(context=DOMAdapter.get().createCanvas().getContext("webgl",{})),context}let maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision="mediump";const _=getTestContext();_&&_.getShaderPrecisionFormat&&(maxFragmentPrecision=_.getShaderPrecisionFormat(_.FRAGMENT_SHADER,_.HIGH_FLOAT).precision?"highp":"mediump")}return maxFragmentPrecision}function addProgramDefines(_,T,R){return T?_:R?(_=_.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${_}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${_}
        `}function ensurePrecision(_,T,R){const P=R?T.maxSupportedFragmentPrecision:T.maxSupportedVertexPrecision;if(_.substring(0,9)!=="precision"){let O=R?T.requestedFragmentPrecision:T.requestedVertexPrecision;return O==="highp"&&P!=="highp"&&(O="mediump"),`precision ${O} float;
${_}`}else if(P!=="highp"&&_.substring(0,15)==="precision highp")return _.replace("precision highp","precision mediump");return _}function insertVersion(_,T){return T?`#version 300 es
${_}`:_}const fragmentNameCache={},VertexNameCache={};function setProgramName(_,{name:T="pixi-program"},R=!0){T=T.replace(/\s+/g,"-"),T+=R?"-fragment":"-vertex";const P=R?fragmentNameCache:VertexNameCache;return P[T]?(P[T]++,T+=`-${P[T]}`):P[T]=1,_.indexOf("#define SHADER_NAME")!==-1?_:`${`#define SHADER_NAME ${T}`}
${_}`}function stripVersion(_,T){return T?_.replace("#version 300 es",""):_}const processes={stripVersion,ensurePrecision,addProgramDefines,setProgramName,insertVersion},programCache$1=Object.create(null),_GlProgram=class cc{constructor(T){T={...cc.defaultOptions,...T};const R=T.fragment.indexOf("#version 300 es")!==-1,P={stripVersion:R,ensurePrecision:{requestedFragmentPrecision:T.preferredFragmentPrecision,requestedVertexPrecision:T.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:getMaxFragmentPrecision()},setProgramName:{name:T.name},addProgramDefines:R,insertVersion:R};let O=T.fragment,I=T.vertex;Object.keys(processes).forEach(L=>{const U=P[L];O=processes[L](O,U,!0),I=processes[L](I,U,!1)}),this.fragment=O,this.vertex=I,this.transformFeedbackVaryings=T.transformFeedbackVaryings,this._key=createIdFromString(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,programCache$1[this._cacheKey]=null}static from(T){const R=`${T.vertex}:${T.fragment}`;return programCache$1[R]||(programCache$1[R]=new cc(T),programCache$1[R]._cacheKey=R),programCache$1[R]}};_GlProgram.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let GlProgram=_GlProgram;const attributeFormatData={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function getAttributeInfoFromFormat(_){return attributeFormatData[_]??attributeFormatData.float32}const WGSL_TO_VERTEX_TYPES={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function extractAttributesFromGpuProgram({source:_,entryPoint:T}){const R={},P=_.indexOf(`fn ${T}`);if(P!==-1){const O=_.indexOf("->",P);if(O!==-1){const I=_.substring(P,O),L=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let U;for(;(U=L.exec(I))!==null;){const G=WGSL_TO_VERTEX_TYPES[U[3]]??"float32";R[U[2]]={location:parseInt(U[1],10),format:G,stride:getAttributeInfoFromFormat(G).stride,offset:0,instance:!1,start:0}}}}return R}function extractStructAndGroups(_){const T=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,R=/@group\((\d+)\)/,P=/@binding\((\d+)\)/,O=/var(<[^>]+>)? (\w+)/,I=/:\s*(\w+)/,L=/struct\s+(\w+)\s*{([^}]+)}/g,U=/(\w+)\s*:\s*([\w\<\>]+)/g,G=/struct\s+(\w+)/,V=_.match(T)?.map(Y=>({group:parseInt(Y.match(R)[1],10),binding:parseInt(Y.match(P)[1],10),name:Y.match(O)[2],isUniform:Y.match(O)[1]==="<uniform>",type:Y.match(I)[1]}));if(!V)return{groups:[],structs:[]};const Z=_.match(L)?.map(Y=>{const W=Y.match(G)[1],J=Y.match(U).reduce((ee,te)=>{const[ie,oe]=te.split(":");return ee[ie.trim()]=oe.trim(),ee},{});return J?{name:W,members:J}:null}).filter(({name:Y})=>V.some(W=>W.type===Y))??[];return{groups:V,structs:Z}}var ShaderStage=(_=>(_[_.VERTEX=1]="VERTEX",_[_.FRAGMENT=2]="FRAGMENT",_[_.COMPUTE=4]="COMPUTE",_))(ShaderStage||{});function generateGpuLayoutGroups({groups:_}){const T=[];for(let R=0;R<_.length;R++){const P=_[R];T[P.group]||(T[P.group]=[]),P.isUniform?T[P.group].push({binding:P.binding,visibility:ShaderStage.VERTEX|ShaderStage.FRAGMENT,buffer:{type:"uniform"}}):P.type==="sampler"?T[P.group].push({binding:P.binding,visibility:ShaderStage.FRAGMENT,sampler:{type:"filtering"}}):P.type==="texture_2d"&&T[P.group].push({binding:P.binding,visibility:ShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return T}function generateLayoutHash({groups:_}){const T=[];for(let R=0;R<_.length;R++){const P=_[R];T[P.group]||(T[P.group]={}),T[P.group][P.name]=P.binding}return T}function removeStructAndGroupDuplicates(_,T){const R=new Set,P=new Set,O=[..._.structs,...T.structs].filter(L=>R.has(L.name)?!1:(R.add(L.name),!0)),I=[..._.groups,...T.groups].filter(L=>{const U=`${L.name}-${L.binding}`;return P.has(U)?!1:(P.add(U),!0)});return{structs:O,groups:I}}const programCache=Object.create(null);class GpuProgram{constructor(T){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:R,vertex:P,layout:O,gpuLayout:I,name:L}=T;if(this.name=L,this.fragment=R,this.vertex=P,R.source===P.source){const U=extractStructAndGroups(R.source);this.structsAndGroups=U}else{const U=extractStructAndGroups(P.source),G=extractStructAndGroups(R.source);this.structsAndGroups=removeStructAndGroupDuplicates(U,G)}this.layout=O??generateLayoutHash(this.structsAndGroups),this.gpuLayout=I??generateGpuLayoutGroups(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:T,fragment:R}=this,P=T.source+R.source+T.entryPoint+R.entryPoint;this._layoutKey=createIdFromString(P,"program")}get attributeData(){return this._attributeData??(this._attributeData=extractAttributesFromGpuProgram(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,programCache[this._cacheKey]=null}static from(T){const R=`${T.vertex.source}:${T.fragment.source}:${T.fragment.entryPoint}:${T.vertex.entryPoint}`;return programCache[R]||(programCache[R]=new GpuProgram(T),programCache[R]._cacheKey=R),programCache[R]}}const UNIFORM_TYPES_VALUES=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],UNIFORM_TYPES_MAP=UNIFORM_TYPES_VALUES.reduce((_,T)=>(_[T]=!0,_),{});function getDefaultUniformValue(_,T){switch(_){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*T);case"vec3<f32>":return new Float32Array(3*T);case"vec4<f32>":return new Float32Array(4*T);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const _UniformGroup=class ph{constructor(T,R){this._touched=0,this.uid=uid("uniform"),this._resourceType="uniformGroup",this._resourceId=uid("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,R={...ph.defaultOptions,...R},this.uniformStructures=T;const P={};for(const O in T){const I=T[O];if(I.name=O,I.size=I.size??1,!UNIFORM_TYPES_MAP[I.type]){const L=I.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(L){const[,U,G]=L;throw new Error(`Uniform type ${I.type} is not supported. Use type: '${U}', size: ${G} instead.`)}throw new Error(`Uniform type ${I.type} is not supported. Supported uniform types are: ${UNIFORM_TYPES_VALUES.join(", ")}`)}I.value??(I.value=getDefaultUniformValue(I.type,I.size)),P[O]=I.value}this.uniforms=P,this._dirtyId=1,this.ubo=R.ubo,this.isStatic=R.isStatic,this._signature=createIdFromString(Object.keys(P).map(O=>`${O}-${T[O].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};_UniformGroup.defaultOptions={ubo:!1,isStatic:!1};let UniformGroup=_UniformGroup;class BindGroup{constructor(T){this.resources=Object.create(null),this._dirty=!0;let R=0;for(const P in T){const O=T[P];this.setResource(O,R++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const T=[];let R=0;for(const P in this.resources)T[R++]=this.resources[P]._resourceId;this._key=T.join("|")}setResource(T,R){const P=this.resources[R];T!==P&&(P&&T.off?.("change",this.onResourceChange,this),T.on?.("change",this.onResourceChange,this),this.resources[R]=T,this._dirty=!0)}getResource(T){return this.resources[T]}_touch(T){const R=this.resources;for(const P in R)R[P]._touched=T}destroy(){const T=this.resources;for(const R in T)T[R]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(T){if(this._dirty=!0,T.destroyed){const R=this.resources;for(const P in R)R[P]===T&&(R[P]=null)}else this._updateKey()}}var RendererType=(_=>(_[_.WEBGL=1]="WEBGL",_[_.WEBGPU=2]="WEBGPU",_[_.BOTH=3]="BOTH",_))(RendererType||{});class Shader extends EventEmitter{constructor(T){super(),this.uid=uid("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:R,glProgram:P,groups:O,resources:I,compatibleRenderers:L,groupMap:U}=T;this.gpuProgram=R,this.glProgram=P,L===void 0&&(L=0,R&&(L|=RendererType.WEBGPU),P&&(L|=RendererType.WEBGL)),this.compatibleRenderers=L;const G={};if(!I&&!O&&(I={}),I&&O)throw new Error("[Shader] Cannot have both resources and groups");if(!R&&O&&!U)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!R&&O&&U)for(const V in U)for(const Z in U[V]){const Y=U[V][Z];G[Y]={group:V,binding:Z,name:Y}}else if(R&&O&&!U){const V=R.structsAndGroups.groups;U={},V.forEach(Z=>{U[Z.group]=U[Z.group]||{},U[Z.group][Z.binding]=Z.name,G[Z.name]=Z})}else if(I){O={},U={},R&&R.structsAndGroups.groups.forEach(Y=>{U[Y.group]=U[Y.group]||{},U[Y.group][Y.binding]=Y.name,G[Y.name]=Y});let V=0;for(const Z in I)G[Z]||(O[99]||(O[99]=new BindGroup,this._ownedBindGroups.push(O[99])),G[Z]={group:99,binding:V,name:Z},U[99]=U[99]||{},U[99][V]=Z,V++);for(const Z in I){const Y=Z;let W=I[Z];!W.source&&!W._resourceType&&(W=new UniformGroup(W));const J=G[Y];J&&(O[J.group]||(O[J.group]=new BindGroup,this._ownedBindGroups.push(O[J.group])),O[J.group].setResource(W,J.binding))}}this.groups=O,this._uniformBindMap=U,this.resources=this._buildResourceAccessor(O,G)}addResource(T,R,P){var O,I;(O=this._uniformBindMap)[R]||(O[R]={}),(I=this._uniformBindMap[R])[P]||(I[P]=T),this.groups[R]||(this.groups[R]=new BindGroup,this._ownedBindGroups.push(this.groups[R]))}_buildResourceAccessor(T,R){const P={};for(const O in R){const I=R[O];Object.defineProperty(P,I.name,{get(){return T[I.group].getResource(I.binding)},set(L){T[I.group].setResource(L,I.binding)}})}return P}destroy(T=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),T&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(R=>{R.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(T){const{gpu:R,gl:P,...O}=T;let I,L;return R&&(I=GpuProgram.from(R)),P&&(L=GlProgram.from(P)),new Shader({gpuProgram:I,glProgram:L,...O})}}const environments=[];extensions.handleByNamedList(ExtensionType.Environment,environments);async function loadEnvironmentExtensions(_){if(!_)for(let T=0;T<environments.length;T++){const R=environments[T];if(R.value.test()){await R.value.load();return}}}let unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{unsafeEval=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}function earcut$1(_,T,R=2){const P=T&&T.length,O=P?T[0]*R:_.length;let I=linkedList(_,0,O,R,!0);const L=[];if(!I||I.next===I.prev)return L;let U,G,V;if(P&&(I=eliminateHoles(_,T,I,R)),_.length>80*R){U=_[0],G=_[1];let Z=U,Y=G;for(let W=R;W<O;W+=R){const J=_[W],ee=_[W+1];J<U&&(U=J),ee<G&&(G=ee),J>Z&&(Z=J),ee>Y&&(Y=ee)}V=Math.max(Z-U,Y-G),V=V!==0?32767/V:0}return earcutLinked(I,L,R,U,G,V,0),L}function linkedList(_,T,R,P,O){let I;if(O===signedArea(_,T,R,P)>0)for(let L=T;L<R;L+=P)I=insertNode(L/P|0,_[L],_[L+1],I);else for(let L=R-P;L>=T;L-=P)I=insertNode(L/P|0,_[L],_[L+1],I);return I&&equals(I,I.next)&&(removeNode(I),I=I.next),I}function filterPoints(_,T){if(!_)return _;T||(T=_);let R=_,P;do if(P=!1,!R.steiner&&(equals(R,R.next)||area(R.prev,R,R.next)===0)){if(removeNode(R),R=T=R.prev,R===R.next)break;P=!0}else R=R.next;while(P||R!==T);return T}function earcutLinked(_,T,R,P,O,I,L){if(!_)return;!L&&I&&indexCurve(_,P,O,I);let U=_;for(;_.prev!==_.next;){const G=_.prev,V=_.next;if(I?isEarHashed(_,P,O,I):isEar(_)){T.push(G.i,_.i,V.i),removeNode(_),_=V.next,U=V.next;continue}if(_=V,_===U){L?L===1?(_=cureLocalIntersections(filterPoints(_),T),earcutLinked(_,T,R,P,O,I,2)):L===2&&splitEarcut(_,T,R,P,O,I):earcutLinked(filterPoints(_),T,R,P,O,I,1);break}}}function isEar(_){const T=_.prev,R=_,P=_.next;if(area(T,R,P)>=0)return!1;const O=T.x,I=R.x,L=P.x,U=T.y,G=R.y,V=P.y,Z=Math.min(O,I,L),Y=Math.min(U,G,V),W=Math.max(O,I,L),J=Math.max(U,G,V);let ee=P.next;for(;ee!==T;){if(ee.x>=Z&&ee.x<=W&&ee.y>=Y&&ee.y<=J&&pointInTriangleExceptFirst(O,U,I,G,L,V,ee.x,ee.y)&&area(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function isEarHashed(_,T,R,P){const O=_.prev,I=_,L=_.next;if(area(O,I,L)>=0)return!1;const U=O.x,G=I.x,V=L.x,Z=O.y,Y=I.y,W=L.y,J=Math.min(U,G,V),ee=Math.min(Z,Y,W),te=Math.max(U,G,V),ie=Math.max(Z,Y,W),oe=zOrder(J,ee,T,R,P),ae=zOrder(te,ie,T,R,P);let ce=_.prevZ,le=_.nextZ;for(;ce&&ce.z>=oe&&le&&le.z<=ae;){if(ce.x>=J&&ce.x<=te&&ce.y>=ee&&ce.y<=ie&&ce!==O&&ce!==L&&pointInTriangleExceptFirst(U,Z,G,Y,V,W,ce.x,ce.y)&&area(ce.prev,ce,ce.next)>=0||(ce=ce.prevZ,le.x>=J&&le.x<=te&&le.y>=ee&&le.y<=ie&&le!==O&&le!==L&&pointInTriangleExceptFirst(U,Z,G,Y,V,W,le.x,le.y)&&area(le.prev,le,le.next)>=0))return!1;le=le.nextZ}for(;ce&&ce.z>=oe;){if(ce.x>=J&&ce.x<=te&&ce.y>=ee&&ce.y<=ie&&ce!==O&&ce!==L&&pointInTriangleExceptFirst(U,Z,G,Y,V,W,ce.x,ce.y)&&area(ce.prev,ce,ce.next)>=0)return!1;ce=ce.prevZ}for(;le&&le.z<=ae;){if(le.x>=J&&le.x<=te&&le.y>=ee&&le.y<=ie&&le!==O&&le!==L&&pointInTriangleExceptFirst(U,Z,G,Y,V,W,le.x,le.y)&&area(le.prev,le,le.next)>=0)return!1;le=le.nextZ}return!0}function cureLocalIntersections(_,T){let R=_;do{const P=R.prev,O=R.next.next;!equals(P,O)&&intersects(P,R,R.next,O)&&locallyInside(P,O)&&locallyInside(O,P)&&(T.push(P.i,R.i,O.i),removeNode(R),removeNode(R.next),R=_=O),R=R.next}while(R!==_);return filterPoints(R)}function splitEarcut(_,T,R,P,O,I){let L=_;do{let U=L.next.next;for(;U!==L.prev;){if(L.i!==U.i&&isValidDiagonal(L,U)){let G=splitPolygon(L,U);L=filterPoints(L,L.next),G=filterPoints(G,G.next),earcutLinked(L,T,R,P,O,I,0),earcutLinked(G,T,R,P,O,I,0);return}U=U.next}L=L.next}while(L!==_)}function eliminateHoles(_,T,R,P){const O=[];for(let I=0,L=T.length;I<L;I++){const U=T[I]*P,G=I<L-1?T[I+1]*P:_.length,V=linkedList(_,U,G,P,!1);V===V.next&&(V.steiner=!0),O.push(getLeftmost(V))}O.sort(compareXYSlope);for(let I=0;I<O.length;I++)R=eliminateHole(O[I],R);return R}function compareXYSlope(_,T){let R=_.x-T.x;if(R===0&&(R=_.y-T.y,R===0)){const P=(_.next.y-_.y)/(_.next.x-_.x),O=(T.next.y-T.y)/(T.next.x-T.x);R=P-O}return R}function eliminateHole(_,T){const R=findHoleBridge(_,T);if(!R)return T;const P=splitPolygon(R,_);return filterPoints(P,P.next),filterPoints(R,R.next)}function findHoleBridge(_,T){let R=T;const P=_.x,O=_.y;let I=-1/0,L;if(equals(_,R))return R;do{if(equals(_,R.next))return R.next;if(O<=R.y&&O>=R.next.y&&R.next.y!==R.y){const Y=R.x+(O-R.y)*(R.next.x-R.x)/(R.next.y-R.y);if(Y<=P&&Y>I&&(I=Y,L=R.x<R.next.x?R:R.next,Y===P))return L}R=R.next}while(R!==T);if(!L)return null;const U=L,G=L.x,V=L.y;let Z=1/0;R=L;do{if(P>=R.x&&R.x>=G&&P!==R.x&&pointInTriangle(O<V?P:I,O,G,V,O<V?I:P,O,R.x,R.y)){const Y=Math.abs(O-R.y)/(P-R.x);locallyInside(R,_)&&(Y<Z||Y===Z&&(R.x>L.x||R.x===L.x&&sectorContainsSector(L,R)))&&(L=R,Z=Y)}R=R.next}while(R!==U);return L}function sectorContainsSector(_,T){return area(_.prev,_,T.prev)<0&&area(T.next,_,_.next)<0}function indexCurve(_,T,R,P){let O=_;do O.z===0&&(O.z=zOrder(O.x,O.y,T,R,P)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next;while(O!==_);O.prevZ.nextZ=null,O.prevZ=null,sortLinked(O)}function sortLinked(_){let T,R=1;do{let P=_,O;_=null;let I=null;for(T=0;P;){T++;let L=P,U=0;for(let V=0;V<R&&(U++,L=L.nextZ,!!L);V++);let G=R;for(;U>0||G>0&&L;)U!==0&&(G===0||!L||P.z<=L.z)?(O=P,P=P.nextZ,U--):(O=L,L=L.nextZ,G--),I?I.nextZ=O:_=O,O.prevZ=I,I=O;P=L}I.nextZ=null,R*=2}while(T>1);return _}function zOrder(_,T,R,P,O){return _=(_-R)*O|0,T=(T-P)*O|0,_=(_|_<<8)&16711935,_=(_|_<<4)&252645135,_=(_|_<<2)&858993459,_=(_|_<<1)&1431655765,T=(T|T<<8)&16711935,T=(T|T<<4)&252645135,T=(T|T<<2)&858993459,T=(T|T<<1)&1431655765,_|T<<1}function getLeftmost(_){let T=_,R=_;do(T.x<R.x||T.x===R.x&&T.y<R.y)&&(R=T),T=T.next;while(T!==_);return R}function pointInTriangle(_,T,R,P,O,I,L,U){return(O-L)*(T-U)>=(_-L)*(I-U)&&(_-L)*(P-U)>=(R-L)*(T-U)&&(R-L)*(I-U)>=(O-L)*(P-U)}function pointInTriangleExceptFirst(_,T,R,P,O,I,L,U){return!(_===L&&T===U)&&pointInTriangle(_,T,R,P,O,I,L,U)}function isValidDiagonal(_,T){return _.next.i!==T.i&&_.prev.i!==T.i&&!intersectsPolygon(_,T)&&(locallyInside(_,T)&&locallyInside(T,_)&&middleInside(_,T)&&(area(_.prev,_,T.prev)||area(_,T.prev,T))||equals(_,T)&&area(_.prev,_,_.next)>0&&area(T.prev,T,T.next)>0)}function area(_,T,R){return(T.y-_.y)*(R.x-T.x)-(T.x-_.x)*(R.y-T.y)}function equals(_,T){return _.x===T.x&&_.y===T.y}function intersects(_,T,R,P){const O=sign$2(area(_,T,R)),I=sign$2(area(_,T,P)),L=sign$2(area(R,P,_)),U=sign$2(area(R,P,T));return!!(O!==I&&L!==U||O===0&&onSegment(_,R,T)||I===0&&onSegment(_,P,T)||L===0&&onSegment(R,_,P)||U===0&&onSegment(R,T,P))}function onSegment(_,T,R){return T.x<=Math.max(_.x,R.x)&&T.x>=Math.min(_.x,R.x)&&T.y<=Math.max(_.y,R.y)&&T.y>=Math.min(_.y,R.y)}function sign$2(_){return _>0?1:_<0?-1:0}function intersectsPolygon(_,T){let R=_;do{if(R.i!==_.i&&R.next.i!==_.i&&R.i!==T.i&&R.next.i!==T.i&&intersects(R,R.next,_,T))return!0;R=R.next}while(R!==_);return!1}function locallyInside(_,T){return area(_.prev,_,_.next)<0?area(_,T,_.next)>=0&&area(_,_.prev,T)>=0:area(_,T,_.prev)<0||area(_,_.next,T)<0}function middleInside(_,T){let R=_,P=!1;const O=(_.x+T.x)/2,I=(_.y+T.y)/2;do R.y>I!=R.next.y>I&&R.next.y!==R.y&&O<(R.next.x-R.x)*(I-R.y)/(R.next.y-R.y)+R.x&&(P=!P),R=R.next;while(R!==_);return P}function splitPolygon(_,T){const R=createNode(_.i,_.x,_.y),P=createNode(T.i,T.x,T.y),O=_.next,I=T.prev;return _.next=T,T.prev=_,R.next=O,O.prev=R,P.next=R,R.prev=P,I.next=P,P.prev=I,P}function insertNode(_,T,R,P){const O=createNode(_,T,R);return P?(O.next=P.next,O.prev=P,P.next.prev=O,P.next=O):(O.prev=O,O.next=O),O}function removeNode(_){_.next.prev=_.prev,_.prev.next=_.next,_.prevZ&&(_.prevZ.nextZ=_.nextZ),_.nextZ&&(_.nextZ.prevZ=_.prevZ)}function createNode(_,T,R){return{i:_,x:T,y:R,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function signedArea(_,T,R,P){let O=0;for(let I=T,L=R-P;I<R;I+=P)O+=(_[L]-_[I])*(_[I+1]+_[L+1]),L=I;return O}const earcut=earcut$1.default||earcut$1;var CLEAR=(_=>(_[_.NONE=0]="NONE",_[_.COLOR=16384]="COLOR",_[_.STENCIL=1024]="STENCIL",_[_.DEPTH=256]="DEPTH",_[_.COLOR_DEPTH=16640]="COLOR_DEPTH",_[_.COLOR_STENCIL=17408]="COLOR_STENCIL",_[_.DEPTH_STENCIL=1280]="DEPTH_STENCIL",_[_.ALL=17664]="ALL",_))(CLEAR||{});class SystemRunner{constructor(T){this.items=[],this._name=T}emit(T,R,P,O,I,L,U,G){const{name:V,items:Z}=this;for(let Y=0,W=Z.length;Y<W;Y++)Z[Y][V](T,R,P,O,I,L,U,G);return this}add(T){return T[this._name]&&(this.remove(T),this.items.push(T)),this}remove(T){const R=this.items.indexOf(T);return R!==-1&&this.items.splice(R,1),this}contains(T){return this.items.indexOf(T)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const defaultRunners=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],_AbstractRenderer=class mh extends EventEmitter{constructor(T){super(),this.uid=uid("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=T.type,this.name=T.name,this.config=T;const R=[...defaultRunners,...this.config.runners??[]];this._addRunners(...R),this._unsafeEvalCheck()}async init(T={}){const R=T.skipExtensionImports===!0?!0:T.manageImports===!1;await loadEnvironmentExtensions(R),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const P in this._systemsHash)T={...this._systemsHash[P].constructor.defaultOptions,...T};T={...mh.defaultOptions,...T},this._roundPixels=T.roundPixels?1:0;for(let P=0;P<this.runners.init.items.length;P++)await this.runners.init.items[P].init(T);this._initOptions=T}render(T,R){let P=T;if(P instanceof Container&&(P={container:P},R&&(deprecation(v8_0_0,"passing a second argument is deprecated, please use render options instead"),P.target=R.renderTexture)),P.target||(P.target=this.view.renderTarget),P.target===this.view.renderTarget&&(this._lastObjectRendered=P.container,P.clearColor??(P.clearColor=this.background.colorRgba),P.clear??(P.clear=this.background.clearBeforeRender)),P.clearColor){const O=Array.isArray(P.clearColor)&&P.clearColor.length===4;P.clearColor=O?P.clearColor:Color$1.shared.setValue(P.clearColor).toArray()}P.transform||(P.container.updateLocalTransform(),P.transform=P.container.localTransform),P.container.visible&&(P.container.enableRenderGroup(),this.runners.prerender.emit(P),this.runners.renderStart.emit(P),this.runners.render.emit(P),this.runners.renderEnd.emit(P),this.runners.postrender.emit(P))}resize(T,R,P){const O=this.view.resolution;this.view.resize(T,R,P),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),P!==void 0&&P!==O&&this.runners.resolutionChange.emit(P)}clear(T={}){const R=this;T.target||(T.target=R.renderTarget.renderTarget),T.clearColor||(T.clearColor=this.background.colorRgba),T.clear??(T.clear=CLEAR.ALL);const{clear:P,clearColor:O,target:I}=T;Color$1.shared.setValue(O??this.background.colorRgba),R.renderTarget.clear(I,P,Color$1.shared.toArray())}get resolution(){return this.view.resolution}set resolution(T){this.view.resolution=T,this.runners.resolutionChange.emit(T)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...T){T.forEach(R=>{this.runners[R]=new SystemRunner(R)})}_addSystems(T){let R;for(R in T){const P=T[R];this._addSystem(P.value,P.name)}}_addSystem(T,R){const P=new T(this);if(this[R])throw new Error(`Whoops! The name "${R}" is already in use`);this[R]=P,this._systemsHash[R]=P;for(const O in this.runners)this.runners[O].add(P);return this}_addPipes(T,R){const P=R.reduce((O,I)=>(O[I.name]=I.value,O),{});T.forEach(O=>{const I=O.value,L=O.name,U=P[L];this.renderPipes[L]=new I(this,U?new U:null),this.runners.destroy.add(this.renderPipes[L])})}destroy(T=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(T),(T===!0||typeof T=="object"&&T.releaseGlobalResources)&&GlobalResourceRegistry.release(),Object.values(this.runners).forEach(R=>{R.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(T){return this.textureGenerator.generateTexture(T)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};_AbstractRenderer.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let AbstractRenderer=_AbstractRenderer,_isWebGLSupported;function isWebGLSupported(_){return _isWebGLSupported!==void 0||(_isWebGLSupported=(()=>{const T={stencil:!0,failIfMajorPerformanceCaveat:_??AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat};try{if(!DOMAdapter.get().getWebGLRenderingContext())return!1;let P=DOMAdapter.get().createCanvas().getContext("webgl",T);const O=!!P?.getContextAttributes()?.stencil;if(P){const I=P.getExtension("WEBGL_lose_context");I&&I.loseContext()}return P=null,O}catch{return!1}})()),_isWebGLSupported}let _isWebGPUSupported;async function isWebGPUSupported(_={}){return _isWebGPUSupported!==void 0||(_isWebGPUSupported=await(async()=>{const T=DOMAdapter.get().getNavigator().gpu;if(!T)return!1;try{return await(await T.requestAdapter(_)).requestDevice(),!0}catch{return!1}})()),_isWebGPUSupported}const renderPriority=["webgl","webgpu","canvas"];async function autoDetectRenderer(_){let T=[];_.preference?(T.push(_.preference),renderPriority.forEach(I=>{I!==_.preference&&T.push(I)})):T=renderPriority.slice();let R,P={};for(let I=0;I<T.length;I++){const L=T[I];if(L==="webgpu"&&await isWebGPUSupported()){const{WebGPURenderer:U}=await __vitePreload(async()=>{const{WebGPURenderer:G}=await import("./WebGPURenderer-DJloQg5I.js");return{WebGPURenderer:G}},__vite__mapDeps([3,2,4]));R=U,P={..._,..._.webgpu};break}else if(L==="webgl"&&isWebGLSupported(_.failIfMajorPerformanceCaveat??AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:U}=await __vitePreload(async()=>{const{WebGLRenderer:G}=await import("./WebGLRenderer-B1ycQgGg.js");return{WebGLRenderer:G}},__vite__mapDeps([5,2,4]));R=U,P={..._,..._.webgl};break}else if(L==="canvas")throw P={..._},new Error("CanvasRenderer is not yet implemented")}if(delete P.webgpu,delete P.webgl,!R)throw new Error("No available renderer for the current environment");const O=new R;return await O.init(P),O}const VERSION="8.14.3";class ApplicationInitHook{static init(){globalThis.__PIXI_APP_INIT__?.(this,VERSION)}static destroy(){}}ApplicationInitHook.extension=ExtensionType.Application;class RendererInitHook{constructor(T){this._renderer=T}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,VERSION)}destroy(){this._renderer=null}}RendererInitHook.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem],name:"initHook",priority:-10};const _Application=class uc{constructor(...T){this.stage=new Container,T[0]!==void 0&&deprecation(v8_0_0,"Application constructor options are deprecated, please use Application.init() instead.")}async init(T){T={...T},this.stage||(this.stage=new Container),this.renderer=await autoDetectRenderer(T),uc._plugins.forEach(R=>{R.init.call(this,T)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return deprecation(v8_0_0,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(T=!1,R=!1){const P=uc._plugins.slice(0);P.reverse(),P.forEach(O=>{O.destroy.call(this)}),this.stage.destroy(R),this.stage=null,this.renderer.destroy(T),this.renderer=null}};_Application._plugins=[];let Application=_Application;extensions.handleByList(ExtensionType.Application,Application._plugins);extensions.add(ApplicationInitHook);class LRU{constructor(T=0,R=0,P=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=T,this.resetTtl=P,this.size=0,this.ttl=R}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(T){if(this.has(T)){const R=this.items[T];delete this.items[T],this.size--,R.prev!==null&&(R.prev.next=R.next),R.next!==null&&(R.next.prev=R.prev),this.first===R&&(this.first=R.next),this.last===R&&(this.last=R.prev)}return this}entries(T=this.keys()){return T.map(R=>[R,this.get(R)])}evict(T=!1){if(T||this.size>0){const R=this.first;delete this.items[R.key],--this.size===0?(this.first=null,this.last=null):(this.first=R.next,this.first.prev=null)}return this}expiresAt(T){let R;return this.has(T)&&(R=this.items[T].expiry),R}get(T){const R=this.items[T];if(R!==void 0){if(this.ttl>0&&R.expiry<=Date.now()){this.delete(T);return}return this.moveToEnd(R),R.value}}has(T){return T in this.items}moveToEnd(T){this.last!==T&&(T.prev!==null&&(T.prev.next=T.next),T.next!==null&&(T.next.prev=T.prev),this.first===T&&(this.first=T.next),T.prev=this.last,T.next=null,this.last!==null&&(this.last.next=T),this.last=T,this.first===null&&(this.first=T))}keys(){const T=[];let R=this.first;for(;R!==null;)T.push(R.key),R=R.next;return T}setWithEvicted(T,R,P=this.resetTtl){let O=null;if(this.has(T))this.set(T,R,!0,P);else{this.max>0&&this.size===this.max&&(O={...this.first},this.evict(!0));let I=this.items[T]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:T,prev:this.last,next:null,value:R};++this.size===1?this.first=I:this.last.next=I,this.last=I}return O}set(T,R,P=!1,O=this.resetTtl){let I=this.items[T];return P||I!==void 0?(I.value=R,P===!1&&O&&(I.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(I)):(this.max>0&&this.size===this.max&&this.evict(!0),I=this.items[T]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:T,prev:this.last,next:null,value:R},++this.size===1?this.first=I:this.last.next=I,this.last=I),this}values(T=this.keys()){return T.map(R=>this.get(R))}}function lru(_=1e3,T=0,R=!1){if(isNaN(_)||_<0)throw new TypeError("Invalid max value");if(isNaN(T)||T<0)throw new TypeError("Invalid ttl value");if(typeof R!="boolean")throw new TypeError("Invalid resetTtl value");return new LRU(_,T,R)}const genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function fontStringFromTextStyle(_){const T=typeof _.fontSize=="number"?`${_.fontSize}px`:_.fontSize;let R=_.fontFamily;Array.isArray(_.fontFamily)||(R=_.fontFamily.split(","));for(let P=R.length-1;P>=0;P--){let O=R[P].trim();!/([\"\'])[^\'\"]+\1/.test(O)&&!genericFontFamilies.includes(O)&&(O=`"${O}"`),R[P]=O}return`${_.fontStyle} ${_.fontVariant} ${_.fontWeight} ${T} ${R.join(",")}`}const contextSettings={willReadFrequently:!0},_CanvasTextMetrics=class rt{static get experimentalLetterSpacingSupported(){let T=rt._experimentalLetterSpacingSupported;if(T===void 0){const R=DOMAdapter.get().getCanvasRenderingContext2D().prototype;T=rt._experimentalLetterSpacingSupported="letterSpacing"in R||"textLetterSpacing"in R}return T}constructor(T,R,P,O,I,L,U,G,V){this.text=T,this.style=R,this.width=P,this.height=O,this.lines=I,this.lineWidths=L,this.lineHeight=U,this.maxLineWidth=G,this.fontProperties=V}static measureText(T=" ",R,P=rt._canvas,O=R.wordWrap){const I=`${T}-${R.styleKey}-wordWrap-${O}`;if(rt._measurementCache.has(I))return rt._measurementCache.get(I);const L=fontStringFromTextStyle(R),U=rt.measureFont(L);U.fontSize===0&&(U.fontSize=R.fontSize,U.ascent=R.fontSize);const G=rt.__context;G.font=L;const Z=(O?rt._wordWrap(T,R,P):T).split(/(?:\r\n|\r|\n)/),Y=new Array(Z.length);let W=0;for(let ae=0;ae<Z.length;ae++){const ce=rt._measureText(Z[ae],R.letterSpacing,G);Y[ae]=ce,W=Math.max(W,ce)}const J=R._stroke?.width||0;let ee=W+J;R.dropShadow&&(ee+=R.dropShadow.distance);const te=R.lineHeight||U.fontSize;let ie=Math.max(te,U.fontSize+J)+(Z.length-1)*(te+R.leading);R.dropShadow&&(ie+=R.dropShadow.distance);const oe=new rt(T,R,ee,ie,Z,Y,te+R.leading,W,U);return rt._measurementCache.set(I,oe),oe}static _measureText(T,R,P){let O=!1;rt.experimentalLetterSpacingSupported&&(rt.experimentalLetterSpacing?(P.letterSpacing=`${R}px`,P.textLetterSpacing=`${R}px`,O=!0):(P.letterSpacing="0px",P.textLetterSpacing="0px"));const I=P.measureText(T);let L=I.width;const U=-I.actualBoundingBoxLeft;let V=I.actualBoundingBoxRight-U;if(L>0)if(O)L-=R,V-=R;else{const Z=(rt.graphemeSegmenter(T).length-1)*R;L+=Z,V+=Z}return Math.max(L,V)}static _wordWrap(T,R,P=rt._canvas){const O=P.getContext("2d",contextSettings);let I=0,L="",U="";const G=Object.create(null),{letterSpacing:V,whiteSpace:Z}=R,Y=rt._collapseSpaces(Z),W=rt._collapseNewlines(Z);let J=!Y;const ee=R.wordWrapWidth+V,te=rt._tokenize(T);for(let ie=0;ie<te.length;ie++){let oe=te[ie];if(rt._isNewline(oe)){if(!W){U+=rt._addLine(L),J=!Y,L="",I=0;continue}oe=" "}if(Y){const ce=rt.isBreakingSpace(oe),le=rt.isBreakingSpace(L[L.length-1]);if(ce&&le)continue}const ae=rt._getFromCache(oe,V,G,O);if(ae>ee)if(L!==""&&(U+=rt._addLine(L),L="",I=0),rt.canBreakWords(oe,R.breakWords)){const ce=rt.wordWrapSplit(oe);for(let le=0;le<ce.length;le++){let he=ce[le],me=he,fe=1;for(;ce[le+fe];){const pe=ce[le+fe];if(!rt.canBreakChars(me,pe,oe,le,R.breakWords))he+=pe;else break;me=pe,fe++}le+=fe-1;const ue=rt._getFromCache(he,V,G,O);ue+I>ee&&(U+=rt._addLine(L),J=!1,L="",I=0),L+=he,I+=ue}}else{L.length>0&&(U+=rt._addLine(L),L="",I=0);const ce=ie===te.length-1;U+=rt._addLine(oe,!ce),J=!1,L="",I=0}else ae+I>ee&&(J=!1,U+=rt._addLine(L),L="",I=0),(L.length>0||!rt.isBreakingSpace(oe)||J)&&(L+=oe,I+=ae)}return U+=rt._addLine(L,!1),U}static _addLine(T,R=!0){return T=rt._trimRight(T),T=R?`${T}
`:T,T}static _getFromCache(T,R,P,O){let I=P[T];return typeof I!="number"&&(I=rt._measureText(T,R,O)+R,P[T]=I),I}static _collapseSpaces(T){return T==="normal"||T==="pre-line"}static _collapseNewlines(T){return T==="normal"}static _trimRight(T){if(typeof T!="string")return"";for(let R=T.length-1;R>=0;R--){const P=T[R];if(!rt.isBreakingSpace(P))break;T=T.slice(0,-1)}return T}static _isNewline(T){return typeof T!="string"?!1:rt._newlines.includes(T.charCodeAt(0))}static isBreakingSpace(T,R){return typeof T!="string"?!1:rt._breakingSpaces.includes(T.charCodeAt(0))}static _tokenize(T){const R=[];let P="";if(typeof T!="string")return R;for(let O=0;O<T.length;O++){const I=T[O],L=T[O+1];if(rt.isBreakingSpace(I,L)||rt._isNewline(I)){P!==""&&(R.push(P),P=""),I==="\r"&&L===`
`?(R.push(`\r
`),O++):R.push(I);continue}P+=I}return P!==""&&R.push(P),R}static canBreakWords(T,R){return R}static canBreakChars(T,R,P,O,I){return!0}static wordWrapSplit(T){return rt.graphemeSegmenter(T)}static measureFont(T){if(rt._fonts[T])return rt._fonts[T];const R=rt._context;R.font=T;const P=R.measureText(rt.METRICS_STRING+rt.BASELINE_SYMBOL),O={ascent:P.actualBoundingBoxAscent,descent:P.actualBoundingBoxDescent,fontSize:P.actualBoundingBoxAscent+P.actualBoundingBoxDescent};return rt._fonts[T]=O,O}static clearMetrics(T=""){T?delete rt._fonts[T]:rt._fonts={}}static get _canvas(){if(!rt.__canvas){let T;try{const R=new OffscreenCanvas(0,0);if(R.getContext("2d",contextSettings)?.measureText)return rt.__canvas=R,R;T=DOMAdapter.get().createCanvas()}catch{T=DOMAdapter.get().createCanvas()}T.width=T.height=10,rt.__canvas=T}return rt.__canvas}static get _context(){return rt.__context||(rt.__context=rt._canvas.getContext("2d",contextSettings)),rt.__context}};_CanvasTextMetrics.METRICS_STRING="|q";_CanvasTextMetrics.BASELINE_SYMBOL="M";_CanvasTextMetrics.BASELINE_MULTIPLIER=1.4;_CanvasTextMetrics.HEIGHT_MULTIPLIER=2;_CanvasTextMetrics.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const _=new Intl.Segmenter;return T=>{const R=_.segment(T),P=[];let O=0;for(const I of R)P[O++]=I.segment;return P}}return _=>[..._]})();_CanvasTextMetrics.experimentalLetterSpacing=!1;_CanvasTextMetrics._fonts={};_CanvasTextMetrics._newlines=[10,13];_CanvasTextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];_CanvasTextMetrics._measurementCache=lru(1e3);let CanvasTextMetrics=_CanvasTextMetrics;const emptyColorStops=[{offset:0,color:"white"},{offset:1,color:"black"}],_FillGradient=class fc{constructor(...T){this.uid=uid("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let R=ensureGradientOptions(T);R={...R.type==="radial"?fc.defaultRadialOptions:fc.defaultLinearOptions,...definedProps(R)},this._textureSize=R.textureSize,this._wrapMode=R.wrapMode,R.type==="radial"?(this.center=R.center,this.outerCenter=R.outerCenter??this.center,this.innerRadius=R.innerRadius,this.outerRadius=R.outerRadius,this.scale=R.scale,this.rotation=R.rotation):(this.start=R.start,this.end=R.end),this.textureSpace=R.textureSpace,this.type=R.type,R.colorStops.forEach(O=>{this.addColorStop(O.offset,O.color)})}addColorStop(T,R){return this.colorStops.push({offset:T,color:Color$1.shared.setValue(R).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:T,y:R}=this.start,{x:P,y:O}=this.end,I=P-T,L=O-R;const U=I<0||L<0;if(this._wrapMode==="clamp-to-edge"){if(I<0){const ie=T;T=P,P=ie,I*=-1}if(L<0){const ie=R;R=O,O=ie,L*=-1}}const G=this.colorStops.length?this.colorStops:emptyColorStops,V=this._textureSize,{canvas:Z,context:Y}=getCanvas(V,1),W=U?Y.createLinearGradient(this._textureSize,0,0,0):Y.createLinearGradient(0,0,this._textureSize,0);addColorStops(W,G),Y.fillStyle=W,Y.fillRect(0,0,V,1),this.texture=new Texture({source:new ImageSource({resource:Z,addressMode:this._wrapMode})});const J=Math.sqrt(I*I+L*L),ee=Math.atan2(L,I),te=new Matrix;te.scale(J/V,1),te.rotate(ee),te.translate(T,R),this.textureSpace==="local"&&te.scale(V,V),this.transform=te}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const T=this.colorStops.length?this.colorStops:emptyColorStops,R=this._textureSize,{canvas:P,context:O}=getCanvas(R,R),{x:I,y:L}=this.center,{x:U,y:G}=this.outerCenter,V=this.innerRadius,Z=this.outerRadius,Y=U-Z,W=G-Z,J=R/(Z*2),ee=(I-Y)*J,te=(L-W)*J,ie=O.createRadialGradient(ee,te,V*J,(U-Y)*J,(G-W)*J,Z*J);addColorStops(ie,T),O.fillStyle=T[T.length-1].color,O.fillRect(0,0,R,R),O.fillStyle=ie,O.translate(ee,te),O.rotate(this.rotation),O.scale(1,this.scale),O.translate(-ee,-te),O.fillRect(0,0,R,R),this.texture=new Texture({source:new ImageSource({resource:P,addressMode:this._wrapMode})});const oe=new Matrix;oe.scale(1/J,1/J),oe.translate(Y,W),this.textureSpace==="local"&&oe.scale(R,R),this.transform=oe}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};_FillGradient.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};_FillGradient.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let FillGradient=_FillGradient;function addColorStops(_,T){for(let R=0;R<T.length;R++){const P=T[R];_.addColorStop(P.offset,P.color)}}function getCanvas(_,T){const R=DOMAdapter.get().createCanvas(_,T),P=R.getContext("2d");return{canvas:R,context:P}}function ensureGradientOptions(_){let T=_[0]??{};return(typeof T=="number"||_[1])&&(deprecation("8.5.2","use options object instead"),T={type:"linear",start:{x:_[0],y:_[1]},end:{x:_[2],y:_[3]},textureSpace:_[4],textureSize:_[5]??FillGradient.defaultLinearOptions.textureSize}),T}const repetitionMap={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class FillPattern{constructor(T,R){this.uid=uid("fillPattern"),this._tick=0,this.transform=new Matrix,this.texture=T,this.transform.scale(1/T.frame.width,1/T.frame.height),R&&(T.source.style.addressModeU=repetitionMap[R].addressModeU,T.source.style.addressModeV=repetitionMap[R].addressModeV)}setTransform(T){const R=this.texture;this.transform.copyFrom(T),this.transform.invert(),this.transform.scale(1/R.frame.width,1/R.frame.height),this._tick++}get texture(){return this._texture}set texture(T){this._texture!==T&&(this._texture=T,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var parseSvgPath,hasRequiredParseSvgPath;function requireParseSvgPath(){if(hasRequiredParseSvgPath)return parseSvgPath;hasRequiredParseSvgPath=1,parseSvgPath=R;var _={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},T=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function R(I){var L=[];return I.replace(T,function(U,G,V){var Z=G.toLowerCase();for(V=O(V),Z=="m"&&V.length>2&&(L.push([G].concat(V.splice(0,2))),Z="l",G=G=="m"?"l":"L");;){if(V.length==_[Z])return V.unshift(G),L.push(V);if(V.length<_[Z])throw new Error("malformed path data");L.push([G].concat(V.splice(0,_[Z])))}}),L}var P=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function O(I){var L=I.match(P);return L?L.map(Number):[]}return parseSvgPath}var parseSvgPathExports=requireParseSvgPath();const parse$2=getDefaultExportFromCjs(parseSvgPathExports);function parseSVGPath(_,T){const R=parse$2(_),P=[];let O=null,I=0,L=0;for(let U=0;U<R.length;U++){const G=R[U],V=G[0],Z=G;switch(V){case"M":I=Z[1],L=Z[2],T.moveTo(I,L);break;case"m":I+=Z[1],L+=Z[2],T.moveTo(I,L);break;case"H":I=Z[1],T.lineTo(I,L);break;case"h":I+=Z[1],T.lineTo(I,L);break;case"V":L=Z[1],T.lineTo(I,L);break;case"v":L+=Z[1],T.lineTo(I,L);break;case"L":I=Z[1],L=Z[2],T.lineTo(I,L);break;case"l":I+=Z[1],L+=Z[2],T.lineTo(I,L);break;case"C":I=Z[5],L=Z[6],T.bezierCurveTo(Z[1],Z[2],Z[3],Z[4],I,L);break;case"c":T.bezierCurveTo(I+Z[1],L+Z[2],I+Z[3],L+Z[4],I+Z[5],L+Z[6]),I+=Z[5],L+=Z[6];break;case"S":I=Z[3],L=Z[4],T.bezierCurveToShort(Z[1],Z[2],I,L);break;case"s":T.bezierCurveToShort(I+Z[1],L+Z[2],I+Z[3],L+Z[4]),I+=Z[3],L+=Z[4];break;case"Q":I=Z[3],L=Z[4],T.quadraticCurveTo(Z[1],Z[2],I,L);break;case"q":T.quadraticCurveTo(I+Z[1],L+Z[2],I+Z[3],L+Z[4]),I+=Z[3],L+=Z[4];break;case"T":I=Z[1],L=Z[2],T.quadraticCurveToShort(I,L);break;case"t":I+=Z[1],L+=Z[2],T.quadraticCurveToShort(I,L);break;case"A":I=Z[6],L=Z[7],T.arcToSvg(Z[1],Z[2],Z[3],Z[4],Z[5],I,L);break;case"a":I+=Z[6],L+=Z[7],T.arcToSvg(Z[1],Z[2],Z[3],Z[4],Z[5],I,L);break;case"Z":case"z":T.closePath(),P.length>0&&(O=P.pop(),O?(I=O.startX,L=O.startY):(I=0,L=0)),O=null;break;default:warn$1(`Unknown SVG path command: ${V}`)}V!=="Z"&&V!=="z"&&O===null&&(O={startX:I,startY:L},P.push(O))}return T}class Circle{constructor(T=0,R=0,P=0){this.type="circle",this.x=T,this.y=R,this.radius=P}clone(){return new Circle(this.x,this.y,this.radius)}contains(T,R){if(this.radius<=0)return!1;const P=this.radius*this.radius;let O=this.x-T,I=this.y-R;return O*=O,I*=I,O+I<=P}strokeContains(T,R,P,O=.5){if(this.radius===0)return!1;const I=this.x-T,L=this.y-R,U=this.radius,G=(1-O)*P,V=Math.sqrt(I*I+L*L);return V<=U+G&&V>U-(P-G)}getBounds(T){return T||(T=new Rectangle),T.x=this.x-this.radius,T.y=this.y-this.radius,T.width=this.radius*2,T.height=this.radius*2,T}copyFrom(T){return this.x=T.x,this.y=T.y,this.radius=T.radius,this}copyTo(T){return T.copyFrom(this),T}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Ellipse{constructor(T=0,R=0,P=0,O=0){this.type="ellipse",this.x=T,this.y=R,this.halfWidth=P,this.halfHeight=O}clone(){return new Ellipse(this.x,this.y,this.halfWidth,this.halfHeight)}contains(T,R){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let P=(T-this.x)/this.halfWidth,O=(R-this.y)/this.halfHeight;return P*=P,O*=O,P+O<=1}strokeContains(T,R,P,O=.5){const{halfWidth:I,halfHeight:L}=this;if(I<=0||L<=0)return!1;const U=P*(1-O),G=P-U,V=I-G,Z=L-G,Y=I+U,W=L+U,J=T-this.x,ee=R-this.y,te=J*J/(V*V)+ee*ee/(Z*Z),ie=J*J/(Y*Y)+ee*ee/(W*W);return te>1&&ie<=1}getBounds(T){return T||(T=new Rectangle),T.x=this.x-this.halfWidth,T.y=this.y-this.halfHeight,T.width=this.halfWidth*2,T.height=this.halfHeight*2,T}copyFrom(T){return this.x=T.x,this.y=T.y,this.halfWidth=T.halfWidth,this.halfHeight=T.halfHeight,this}copyTo(T){return T.copyFrom(this),T}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function squaredDistanceToLineSegment(_,T,R,P,O,I){const L=_-R,U=T-P,G=O-R,V=I-P,Z=L*G+U*V,Y=G*G+V*V;let W=-1;Y!==0&&(W=Z/Y);let J,ee;W<0?(J=R,ee=P):W>1?(J=O,ee=I):(J=R+W*G,ee=P+W*V);const te=_-J,ie=T-ee;return te*te+ie*ie}let tempRect$3,tempRect2;class Polygon{constructor(...T){this.type="polygon";let R=Array.isArray(T[0])?T[0]:T;if(typeof R[0]!="number"){const P=[];for(let O=0,I=R.length;O<I;O++)P.push(R[O].x,R[O].y);R=P}this.points=R,this.closePath=!0}isClockwise(){let T=0;const R=this.points,P=R.length;for(let O=0;O<P;O+=2){const I=R[O],L=R[O+1],U=R[(O+2)%P],G=R[(O+3)%P];T+=(U-I)*(G+L)}return T<0}containsPolygon(T){const R=this.getBounds(tempRect$3),P=T.getBounds(tempRect2);if(!R.containsRect(P))return!1;const O=T.points;for(let I=0;I<O.length;I+=2){const L=O[I],U=O[I+1];if(!this.contains(L,U))return!1}return!0}clone(){const T=this.points.slice(),R=new Polygon(T);return R.closePath=this.closePath,R}contains(T,R){let P=!1;const O=this.points.length/2;for(let I=0,L=O-1;I<O;L=I++){const U=this.points[I*2],G=this.points[I*2+1],V=this.points[L*2],Z=this.points[L*2+1];G>R!=Z>R&&T<(V-U)*((R-G)/(Z-G))+U&&(P=!P)}return P}strokeContains(T,R,P,O=.5){const I=P*P,L=I*(1-O),U=I-L,{points:G}=this,V=G.length-(this.closePath?0:2);for(let Z=0;Z<V;Z+=2){const Y=G[Z],W=G[Z+1],J=G[(Z+2)%G.length],ee=G[(Z+3)%G.length],te=squaredDistanceToLineSegment(T,R,Y,W,J,ee),ie=Math.sign((J-Y)*(R-W)-(ee-W)*(T-Y));if(te<=(ie<0?U:L))return!0}return!1}getBounds(T){T||(T=new Rectangle);const R=this.points;let P=1/0,O=-1/0,I=1/0,L=-1/0;for(let U=0,G=R.length;U<G;U+=2){const V=R[U],Z=R[U+1];P=V<P?V:P,O=V>O?V:O,I=Z<I?Z:I,L=Z>L?Z:L}return T.x=P,T.width=O-P,T.y=I,T.height=L-I,T}copyFrom(T){return this.points=T.points.slice(),this.closePath=T.closePath,this}copyTo(T){return T.copyFrom(this),T}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((T,R)=>`${T}, ${R}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return deprecation("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return deprecation("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const isCornerWithinStroke=(_,T,R,P,O,I,L)=>{const U=_-R,G=T-P,V=Math.sqrt(U*U+G*G);return V>=O-I&&V<=O+L};class RoundedRectangle{constructor(T=0,R=0,P=0,O=0,I=20){this.type="roundedRectangle",this.x=T,this.y=R,this.width=P,this.height=O,this.radius=I}getBounds(T){return T||(T=new Rectangle),T.x=this.x,T.y=this.y,T.width=this.width,T.height=this.height,T}clone(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)}copyFrom(T){return this.x=T.x,this.y=T.y,this.width=T.width,this.height=T.height,this}copyTo(T){return T.copyFrom(this),T}contains(T,R){if(this.width<=0||this.height<=0)return!1;if(T>=this.x&&T<=this.x+this.width&&R>=this.y&&R<=this.y+this.height){const P=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(R>=this.y+P&&R<=this.y+this.height-P||T>=this.x+P&&T<=this.x+this.width-P)return!0;let O=T-(this.x+P),I=R-(this.y+P);const L=P*P;if(O*O+I*I<=L||(O=T-(this.x+this.width-P),O*O+I*I<=L)||(I=R-(this.y+this.height-P),O*O+I*I<=L)||(O=T-(this.x+P),O*O+I*I<=L))return!0}return!1}strokeContains(T,R,P,O=.5){const{x:I,y:L,width:U,height:G,radius:V}=this,Z=P*(1-O),Y=P-Z,W=I+V,J=L+V,ee=U-V*2,te=G-V*2,ie=I+U,oe=L+G;return(T>=I-Z&&T<=I+Y||T>=ie-Y&&T<=ie+Z)&&R>=J&&R<=J+te||(R>=L-Z&&R<=L+Y||R>=oe-Y&&R<=oe+Z)&&T>=W&&T<=W+ee?!0:T<W&&R<J&&isCornerWithinStroke(T,R,W,J,V,Y,Z)||T>ie-V&&R<J&&isCornerWithinStroke(T,R,ie-V,J,V,Y,Z)||T>ie-V&&R>oe-V&&isCornerWithinStroke(T,R,ie-V,oe-V,V,Y,Z)||T<W&&R>oe-V&&isCornerWithinStroke(T,R,W,oe-V,V,Y,Z)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const cachedGroups={};function getTextureBatchBindGroup(_,T,R){let P=2166136261;for(let O=0;O<T;O++)P^=_[O].uid,P=Math.imul(P,16777619),P>>>=0;return cachedGroups[P]||generateTextureBatchBindGroup(_,T,P,R)}function generateTextureBatchBindGroup(_,T,R,P){const O={};let I=0;for(let U=0;U<P;U++){const G=U<T?_[U]:Texture.EMPTY.source;O[I++]=G.source,O[I++]=G.style}const L=new BindGroup(O);return cachedGroups[R]=L,L}class ViewableBuffer{constructor(T){typeof T=="number"?this.rawBinaryData=new ArrayBuffer(T):T instanceof Uint8Array?this.rawBinaryData=T.buffer:this.rawBinaryData=T,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(T){return this[`${T}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(T){switch(T){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${T} isn't a valid view type`)}}}function fastCopy(_,T){const R=_.byteLength/8|0,P=new Float64Array(_,0,R);new Float64Array(T,0,R).set(P);const I=_.byteLength-R*8;if(I>0){const L=new Uint8Array(_,R*8,I);new Uint8Array(T,R*8,I).set(L)}}const BLEND_TO_NPM={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var STENCIL_MODES=(_=>(_[_.DISABLED=0]="DISABLED",_[_.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",_[_.MASK_ACTIVE=2]="MASK_ACTIVE",_[_.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",_[_.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",_[_.NONE=5]="NONE",_))(STENCIL_MODES||{});function getAdjustedBlendModeBlend(_,T){return T.alphaMode==="no-premultiply-alpha"&&BLEND_TO_NPM[_]||_}const fragTemplate=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(_){let T="";for(let R=0;R<_;++R)R>0&&(T+=`
else `),R<_-1&&(T+=`if(test == ${R}.0){}`);return T}function checkMaxIfStatementsInShader(_,T){if(_===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const R=T.createShader(T.FRAGMENT_SHADER);try{for(;;){const P=fragTemplate.replace(/%forloop%/gi,generateIfTestSrc(_));if(T.shaderSource(R,P),T.compileShader(R),!T.getShaderParameter(R,T.COMPILE_STATUS))_=_/2|0;else break}}finally{T.deleteShader(R)}return _}let maxTexturesPerBatchCache=null;function getMaxTexturesPerBatch(){if(maxTexturesPerBatchCache)return maxTexturesPerBatchCache;const _=getTestContext();return maxTexturesPerBatchCache=_.getParameter(_.MAX_TEXTURE_IMAGE_UNITS),maxTexturesPerBatchCache=checkMaxIfStatementsInShader(maxTexturesPerBatchCache,_),_.getExtension("WEBGL_lose_context")?.loseContext(),maxTexturesPerBatchCache}class BatchTextureArray{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let T=0;T<this.count;T++){const R=this.textures[T];this.textures[T]=null,this.ids[R.uid]=null}this.count=0}}class Batch{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new BatchTextureArray,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const batchPool=[];let batchPoolIndex=0;GlobalResourceRegistry.register({clear:()=>{if(batchPool.length>0)for(const _ of batchPool)_&&_.destroy();batchPool.length=0,batchPoolIndex=0}});function getBatchFromPool(){return batchPoolIndex>0?batchPool[--batchPoolIndex]:new Batch}function returnBatchToPool(_){batchPool[batchPoolIndex++]=_}let BATCH_TICK=0;const _Batcher=class gh{constructor(T){this.uid=uid("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],T={...gh.defaultOptions,...T},T.maxTextures||(deprecation("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),T.maxTextures=getMaxTexturesPerBatch());const{maxTextures:R,attributesInitialSize:P,indicesInitialSize:O}=T;this.attributeBuffer=new ViewableBuffer(P*4),this.indexBuffer=new Uint16Array(O),this.maxTextures=R}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let T=0;T<this.batchIndex;T++)returnBatchToPool(this.batches[T]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(T){this._elements[this.elementSize++]=T,T._indexStart=this.indexSize,T._attributeStart=this.attributeSize,T._batcher=this,this.indexSize+=T.indexSize,this.attributeSize+=T.attributeSize*this.vertexSize}checkAndUpdateTexture(T,R){const P=T._batch.textures.ids[R._source.uid];return!P&&P!==0?!1:(T._textureId=P,T.texture=R,!0)}updateElement(T){this.dirty=!0;const R=this.attributeBuffer;T.packAsQuad?this.packQuadAttributes(T,R.float32View,R.uint32View,T._attributeStart,T._textureId):this.packAttributes(T,R.float32View,R.uint32View,T._attributeStart,T._textureId)}break(T){const R=this._elements;if(!R[this.elementStart])return;let P=getBatchFromPool(),O=P.textures;O.clear();const I=R[this.elementStart];let L=getAdjustedBlendModeBlend(I.blendMode,I.texture._source),U=I.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const G=this.attributeBuffer.float32View,V=this.attributeBuffer.uint32View,Z=this.indexBuffer;let Y=this._batchIndexSize,W=this._batchIndexStart,J="startBatch";const ee=this.maxTextures;for(let te=this.elementStart;te<this.elementSize;++te){const ie=R[te];R[te]=null;const ae=ie.texture._source,ce=getAdjustedBlendModeBlend(ie.blendMode,ae),le=L!==ce||U!==ie.topology;if(ae._batchTick===BATCH_TICK&&!le){ie._textureId=ae._textureBindLocation,Y+=ie.indexSize,ie.packAsQuad?(this.packQuadAttributes(ie,G,V,ie._attributeStart,ie._textureId),this.packQuadIndex(Z,ie._indexStart,ie._attributeStart/this.vertexSize)):(this.packAttributes(ie,G,V,ie._attributeStart,ie._textureId),this.packIndex(ie,Z,ie._indexStart,ie._attributeStart/this.vertexSize)),ie._batch=P;continue}ae._batchTick=BATCH_TICK,(O.count>=ee||le)&&(this._finishBatch(P,W,Y-W,O,L,U,T,J),J="renderBatch",W=Y,L=ce,U=ie.topology,P=getBatchFromPool(),O=P.textures,O.clear(),++BATCH_TICK),ie._textureId=ae._textureBindLocation=O.count,O.ids[ae.uid]=O.count,O.textures[O.count++]=ae,ie._batch=P,Y+=ie.indexSize,ie.packAsQuad?(this.packQuadAttributes(ie,G,V,ie._attributeStart,ie._textureId),this.packQuadIndex(Z,ie._indexStart,ie._attributeStart/this.vertexSize)):(this.packAttributes(ie,G,V,ie._attributeStart,ie._textureId),this.packIndex(ie,Z,ie._indexStart,ie._attributeStart/this.vertexSize))}O.count>0&&(this._finishBatch(P,W,Y-W,O,L,U,T,J),W=Y,++BATCH_TICK),this.elementStart=this.elementSize,this._batchIndexStart=W,this._batchIndexSize=Y}_finishBatch(T,R,P,O,I,L,U,G){T.gpuBindGroup=null,T.bindGroup=null,T.action=G,T.batcher=this,T.textures=O,T.blendMode=I,T.topology=L,T.start=R,T.size=P,++BATCH_TICK,this.batches[this.batchIndex++]=T,U.add(T)}finish(T){this.break(T)}ensureAttributeBuffer(T){T*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(T*4)}ensureIndexBuffer(T){T<=this.indexBuffer.length||this._resizeIndexBuffer(T)}_resizeAttributeBuffer(T){const R=Math.max(T,this.attributeBuffer.size*2),P=new ViewableBuffer(R);fastCopy(this.attributeBuffer.rawBinaryData,P.rawBinaryData),this.attributeBuffer=P}_resizeIndexBuffer(T){const R=this.indexBuffer;let P=Math.max(T,R.length*1.5);P+=P%2;const O=P>65535?new Uint32Array(P):new Uint16Array(P);if(O.BYTES_PER_ELEMENT!==R.BYTES_PER_ELEMENT)for(let I=0;I<R.length;I++)O[I]=R[I];else fastCopy(R.buffer,O.buffer);this.indexBuffer=O}packQuadIndex(T,R,P){T[R]=P+0,T[R+1]=P+1,T[R+2]=P+2,T[R+3]=P+0,T[R+4]=P+2,T[R+5]=P+3}packIndex(T,R,P,O){const I=T.indices,L=T.indexSize,U=T.indexOffset,G=T.attributeOffset;for(let V=0;V<L;V++)R[P++]=O+I[V+U]-G}destroy(T={}){if(this.batches!==null){for(let R=0;R<this.batches.length;R++)returnBatchToPool(this.batches[R]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,T.shader&&(this.shader?.destroy(),this.shader=null);for(let R=0;R<this._elements.length;R++)this._elements[R]&&(this._elements[R]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};_Batcher.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let Batcher=_Batcher;var BufferUsage=(_=>(_[_.MAP_READ=1]="MAP_READ",_[_.MAP_WRITE=2]="MAP_WRITE",_[_.COPY_SRC=4]="COPY_SRC",_[_.COPY_DST=8]="COPY_DST",_[_.INDEX=16]="INDEX",_[_.VERTEX=32]="VERTEX",_[_.UNIFORM=64]="UNIFORM",_[_.STORAGE=128]="STORAGE",_[_.INDIRECT=256]="INDIRECT",_[_.QUERY_RESOLVE=512]="QUERY_RESOLVE",_[_.STATIC=1024]="STATIC",_))(BufferUsage||{});let Buffer$2=class extends EventEmitter{constructor(T){let{data:R,size:P}=T;const{usage:O,label:I,shrinkToFit:L}=T;super(),this.uid=uid("buffer"),this._resourceType="buffer",this._resourceId=uid("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,R instanceof Array&&(R=new Float32Array(R)),this._data=R,P??(P=R?.byteLength);const U=!!R;this.descriptor={size:P,usage:O,mappedAtCreation:U,label:I},this.shrinkToFit=L??!0}get data(){return this._data}set data(T){this.setDataWithSize(T,T.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&BufferUsage.STATIC)}set static(T){T?this.descriptor.usage|=BufferUsage.STATIC:this.descriptor.usage&=~BufferUsage.STATIC}setDataWithSize(T,R,P){if(this._updateID++,this._updateSize=R*T.BYTES_PER_ELEMENT,this._data===T){P&&this.emit("update",this);return}const O=this._data;if(this._data=T,this._dataInt32=null,!O||O.length!==T.length){!this.shrinkToFit&&O&&T.byteLength<O.byteLength?P&&this.emit("update",this):(this.descriptor.size=T.byteLength,this._resourceId=uid("resource"),this.emit("change",this));return}P&&this.emit("update",this)}update(T){this._updateSize=T??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function ensureIsBuffer(_,T){if(!(_ instanceof Buffer$2)){let R=T?BufferUsage.INDEX:BufferUsage.VERTEX;_ instanceof Array&&(T?(_=new Uint32Array(_),R=BufferUsage.INDEX|BufferUsage.COPY_DST):(_=new Float32Array(_),R=BufferUsage.VERTEX|BufferUsage.COPY_DST)),_=new Buffer$2({data:_,label:T?"index-mesh-buffer":"vertex-mesh-buffer",usage:R})}return _}function getGeometryBounds(_,T,R){const P=_.getAttribute(T);if(!P)return R.minX=0,R.minY=0,R.maxX=0,R.maxY=0,R;const O=P.buffer.data;let I=1/0,L=1/0,U=-1/0,G=-1/0;const V=O.BYTES_PER_ELEMENT,Z=(P.offset||0)/V,Y=(P.stride||8)/V;for(let W=Z;W<O.length;W+=Y){const J=O[W],ee=O[W+1];J>U&&(U=J),ee>G&&(G=ee),J<I&&(I=J),ee<L&&(L=ee)}return R.minX=I,R.minY=L,R.maxX=U,R.maxY=G,R}function ensureIsAttribute(_){return(_ instanceof Buffer$2||Array.isArray(_)||_.BYTES_PER_ELEMENT)&&(_={buffer:_}),_.buffer=ensureIsBuffer(_.buffer,!1),_}class Geometry extends EventEmitter{constructor(T={}){super(),this.uid=uid("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Bounds,this._boundsDirty=!0;const{attributes:R,indexBuffer:P,topology:O}=T;if(this.buffers=[],this.attributes={},R)for(const I in R)this.addAttribute(I,R[I]);this.instanceCount=T.instanceCount??1,P&&this.addIndex(P),this.topology=O||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(T){return this.attributes[T]}getIndex(){return this.indexBuffer}getBuffer(T){return this.getAttribute(T).buffer}getSize(){for(const T in this.attributes){const R=this.attributes[T];return R.buffer.data.length/(R.stride/4||R.size)}return 0}addAttribute(T,R){const P=ensureIsAttribute(R);this.buffers.indexOf(P.buffer)===-1&&(this.buffers.push(P.buffer),P.buffer.on("update",this.onBufferUpdate,this),P.buffer.on("change",this.onBufferUpdate,this)),this.attributes[T]=P}addIndex(T){this.indexBuffer=ensureIsBuffer(T,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,getGeometryBounds(this,"aPosition",this._bounds)):this._bounds}destroy(T=!1){this.emit("destroy",this),this.removeAllListeners(),T&&this.buffers.forEach(R=>R.destroy()),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const placeHolderBufferData=new Float32Array(1),placeHolderIndexData=new Uint32Array(1);class BatchGeometry extends Geometry{constructor(){const R=new Buffer$2({data:placeHolderBufferData,label:"attribute-batch-buffer",usage:BufferUsage.VERTEX|BufferUsage.COPY_DST,shrinkToFit:!1}),P=new Buffer$2({data:placeHolderIndexData,label:"index-batch-buffer",usage:BufferUsage.INDEX|BufferUsage.COPY_DST,shrinkToFit:!1}),O=24;super({attributes:{aPosition:{buffer:R,format:"float32x2",stride:O,offset:0},aUV:{buffer:R,format:"float32x2",stride:O,offset:8},aColor:{buffer:R,format:"unorm8x4",stride:O,offset:16},aTextureIdAndRound:{buffer:R,format:"uint16x2",stride:O,offset:20}},indexBuffer:P})}}function addBits(_,T,R){if(_)for(const P in _){const O=P.toLocaleLowerCase(),I=T[O];if(I){let L=_[P];P==="header"&&(L=L.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),R&&I.push(`//----${R}----//`),I.push(L)}else warn$1(`${P} placement hook does not exist in shader`)}}const findHooksRx=/\{\{(.*?)\}\}/g;function compileHooks(_){const T={};return(_.match(findHooksRx)?.map(P=>P.replace(/[{()}]/g,""))??[]).forEach(P=>{T[P]=[]}),T}function extractInputs(_,T){let R;const P=/@in\s+([^;]+);/g;for(;(R=P.exec(_))!==null;)T.push(R[1])}function compileInputs(_,T,R=!1){const P=[];extractInputs(T,P),_.forEach(U=>{U.header&&extractInputs(U.header,P)});const O=P;R&&O.sort();const I=O.map((U,G)=>`       @location(${G}) ${U},`).join(`
`);let L=T.replace(/@in\s+[^;]+;\s*/g,"");return L=L.replace("{{in}}",`
${I}
`),L}function extractOutputs(_,T){let R;const P=/@out\s+([^;]+);/g;for(;(R=P.exec(_))!==null;)T.push(R[1])}function extractVariableName(_){const R=/\b(\w+)\s*:/g.exec(_);return R?R[1]:""}function stripVariable(_){const T=/@.*?\s+/g;return _.replace(T,"")}function compileOutputs(_,T){const R=[];extractOutputs(T,R),_.forEach(G=>{G.header&&extractOutputs(G.header,R)});let P=0;const O=R.sort().map(G=>G.indexOf("builtin")>-1?G:`@location(${P++}) ${G}`).join(`,
`),I=R.sort().map(G=>`       var ${stripVariable(G)};`).join(`
`),L=`return VSOutput(
            ${R.sort().map(G=>` ${extractVariableName(G)}`).join(`,
`)});`;let U=T.replace(/@out\s+[^;]+;\s*/g,"");return U=U.replace("{{struct}}",`
${O}
`),U=U.replace("{{start}}",`
${I}
`),U=U.replace("{{return}}",`
${L}
`),U}function injectBits(_,T){let R=_;for(const P in T){const O=T[P];O.join(`
`).length?R=R.replace(`{{${P}}}`,`//-----${P} START-----//
${O.join(`
`)}
//----${P} FINISH----//`):R=R.replace(`{{${P}}}`,"")}return R}const cacheMap=Object.create(null),bitCacheMap=new Map;let CACHE_UID=0;function compileHighShader({template:_,bits:T}){const R=generateCacheId(_,T);if(cacheMap[R])return cacheMap[R];const{vertex:P,fragment:O}=compileInputsAndOutputs(_,T);return cacheMap[R]=compileBits(P,O,T),cacheMap[R]}function compileHighShaderGl({template:_,bits:T}){const R=generateCacheId(_,T);return cacheMap[R]||(cacheMap[R]=compileBits(_.vertex,_.fragment,T)),cacheMap[R]}function compileInputsAndOutputs(_,T){const R=T.map(L=>L.vertex).filter(L=>!!L),P=T.map(L=>L.fragment).filter(L=>!!L);let O=compileInputs(R,_.vertex,!0);O=compileOutputs(R,O);const I=compileInputs(P,_.fragment,!0);return{vertex:O,fragment:I}}function generateCacheId(_,T){return T.map(R=>(bitCacheMap.has(R)||bitCacheMap.set(R,CACHE_UID++),bitCacheMap.get(R))).sort((R,P)=>R-P).join("-")+_.vertex+_.fragment}function compileBits(_,T,R){const P=compileHooks(_),O=compileHooks(T);return R.forEach(I=>{addBits(I.vertex,P,I.name),addBits(I.fragment,O,I.name)}),{vertex:injectBits(_,P),fragment:injectBits(T,O)}}const vertexGPUTemplate=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,fragmentGPUTemplate=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,vertexGlTemplate=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,fragmentGlTemplate=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,globalUniformsBit={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},globalUniformsBitGl={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function compileHighShaderGpuProgram({bits:_,name:T}){const R=compileHighShader({template:{fragment:fragmentGPUTemplate,vertex:vertexGPUTemplate},bits:[globalUniformsBit,..._]});return GpuProgram.from({name:T,vertex:{source:R.vertex,entryPoint:"main"},fragment:{source:R.fragment,entryPoint:"main"}})}function compileHighShaderGlProgram({bits:_,name:T}){return new GlProgram({name:T,...compileHighShaderGl({template:{vertex:vertexGlTemplate,fragment:fragmentGlTemplate},bits:[globalUniformsBitGl,..._]})})}const colorBit={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},colorBitGl={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},textureBatchBitGpuCache={};function generateBindingSrc(_){const T=[];if(_===1)T.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),T.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let R=0;for(let P=0;P<_;P++)T.push(`@group(1) @binding(${R++}) var textureSource${P+1}: texture_2d<f32>;`),T.push(`@group(1) @binding(${R++}) var textureSampler${P+1}: sampler;`)}return T.join(`
`)}function generateSampleSrc(_){const T=[];if(_===1)T.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{T.push("switch vTextureId {");for(let R=0;R<_;R++)R===_-1?T.push("  default:{"):T.push(`  case ${R}:{`),T.push(`      outColor = textureSampleGrad(textureSource${R+1}, textureSampler${R+1}, vUV, uvDx, uvDy);`),T.push("      break;}");T.push("}")}return T.join(`
`)}function generateTextureBatchBit(_){return textureBatchBitGpuCache[_]||(textureBatchBitGpuCache[_]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${generateBindingSrc(_)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${generateSampleSrc(_)}
            `}}),textureBatchBitGpuCache[_]}const textureBatchBitGlCache={};function generateSampleGlSrc(_){const T=[];for(let R=0;R<_;R++)R>0&&T.push("else"),R<_-1&&T.push(`if(vTextureId < ${R}.5)`),T.push("{"),T.push(`	outColor = texture(uTextures[${R}], vUV);`),T.push("}");return T.join(`
`)}function generateTextureBatchBitGl(_){return textureBatchBitGlCache[_]||(textureBatchBitGlCache[_]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${_}];

            `,main:`

                ${generateSampleGlSrc(_)}
            `}}),textureBatchBitGlCache[_]}const roundPixelsBit={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},roundPixelsBitGl={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},batchSamplersUniformGroupHash={};function getBatchSamplersUniformGroup(_){let T=batchSamplersUniformGroupHash[_];if(T)return T;const R=new Int32Array(_);for(let P=0;P<_;P++)R[P]=P;return T=batchSamplersUniformGroupHash[_]=new UniformGroup({uTextures:{value:R,type:"i32",size:_}},{isStatic:!0}),T}class DefaultShader extends Shader{constructor(T){const R=compileHighShaderGlProgram({name:"batch",bits:[colorBitGl,generateTextureBatchBitGl(T),roundPixelsBitGl]}),P=compileHighShaderGpuProgram({name:"batch",bits:[colorBit,generateTextureBatchBit(T),roundPixelsBit]});super({glProgram:R,gpuProgram:P,resources:{batchSamplers:getBatchSamplersUniformGroup(T)}}),this.maxTextures=T}}let defaultShader=null;const _DefaultBatcher=class _h extends Batcher{constructor(T){super(T),this.geometry=new BatchGeometry,this.name=_h.extension.name,this.vertexSize=6,defaultShader??(defaultShader=new DefaultShader(T.maxTextures)),this.shader=defaultShader}packAttributes(T,R,P,O,I){const L=I<<16|T.roundPixels&65535,U=T.transform,G=U.a,V=U.b,Z=U.c,Y=U.d,W=U.tx,J=U.ty,{positions:ee,uvs:te}=T,ie=T.color,oe=T.attributeOffset,ae=oe+T.attributeSize;for(let ce=oe;ce<ae;ce++){const le=ce*2,he=ee[le],me=ee[le+1];R[O++]=G*he+Z*me+W,R[O++]=Y*me+V*he+J,R[O++]=te[le],R[O++]=te[le+1],P[O++]=ie,P[O++]=L}}packQuadAttributes(T,R,P,O,I){const L=T.texture,U=T.transform,G=U.a,V=U.b,Z=U.c,Y=U.d,W=U.tx,J=U.ty,ee=T.bounds,te=ee.maxX,ie=ee.minX,oe=ee.maxY,ae=ee.minY,ce=L.uvs,le=T.color,he=I<<16|T.roundPixels&65535;R[O+0]=G*ie+Z*ae+W,R[O+1]=Y*ae+V*ie+J,R[O+2]=ce.x0,R[O+3]=ce.y0,P[O+4]=le,P[O+5]=he,R[O+6]=G*te+Z*ae+W,R[O+7]=Y*ae+V*te+J,R[O+8]=ce.x1,R[O+9]=ce.y1,P[O+10]=le,P[O+11]=he,R[O+12]=G*te+Z*oe+W,R[O+13]=Y*oe+V*te+J,R[O+14]=ce.x2,R[O+15]=ce.y2,P[O+16]=le,P[O+17]=he,R[O+18]=G*ie+Z*oe+W,R[O+19]=Y*oe+V*ie+J,R[O+20]=ce.x3,R[O+21]=ce.y3,P[O+22]=le,P[O+23]=he}_updateMaxTextures(T){this.shader.maxTextures!==T&&(defaultShader=new DefaultShader(T),this.shader=defaultShader)}destroy(){this.shader=null,super.destroy()}};_DefaultBatcher.extension={type:[ExtensionType.Batcher],name:"default"};let DefaultBatcher=_DefaultBatcher;function buildUvs(_,T,R,P,O,I,L,U=null){let G=0;R*=T,O*=I;const V=U.a,Z=U.b,Y=U.c,W=U.d,J=U.tx,ee=U.ty;for(;G<L;){const te=_[R],ie=_[R+1];P[O]=V*te+Y*ie+J,P[O+1]=Z*te+W*ie+ee,O+=I,R+=T,G++}}function buildSimpleUvs(_,T,R,P){let O=0;for(T*=R;O<P;)_[T]=0,_[T+1]=0,T+=R,O++}function transformVertices(_,T,R,P,O){const I=T.a,L=T.b,U=T.c,G=T.d,V=T.tx,Z=T.ty;R||(R=0),P||(P=2),O||(O=_.length/P-R);let Y=R*P;for(let W=0;W<O;W++){const J=_[Y],ee=_[Y+1];_[Y]=I*J+U*ee+V,_[Y+1]=L*J+G*ee+Z,Y+=P}}const identityMatrix=new Matrix;class BatchableGraphics{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const T=this.baseColor,R=T>>16|T&65280|(T&255)<<16,P=this.renderable;return P?multiplyHexColors(R,P.groupColor)+(this.alpha*P.groupAlpha*255<<24):R+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||identityMatrix}copyTo(T){T.indexOffset=this.indexOffset,T.indexSize=this.indexSize,T.attributeOffset=this.attributeOffset,T.attributeSize=this.attributeSize,T.baseColor=this.baseColor,T.alpha=this.alpha,T.texture=this.texture,T.geometryData=this.geometryData,T.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const buildCircle={extension:{type:ExtensionType.ShapeBuilder,name:"circle"},build(_,T){let R,P,O,I,L,U;if(_.type==="circle"){const le=_;if(L=U=le.radius,L<=0)return!1;R=le.x,P=le.y,O=I=0}else if(_.type==="ellipse"){const le=_;if(L=le.halfWidth,U=le.halfHeight,L<=0||U<=0)return!1;R=le.x,P=le.y,O=I=0}else{const le=_,he=le.width/2,me=le.height/2;R=le.x+he,P=le.y+me,L=U=Math.max(0,Math.min(le.radius,Math.min(he,me))),O=he-L,I=me-U}if(O<0||I<0)return!1;const G=Math.ceil(2.3*Math.sqrt(L+U)),V=G*8+(O?4:0)+(I?4:0);if(V===0)return!1;if(G===0)return T[0]=T[6]=R+O,T[1]=T[3]=P+I,T[2]=T[4]=R-O,T[5]=T[7]=P-I,!0;let Z=0,Y=G*4+(O?2:0)+2,W=Y,J=V,ee=O+L,te=I,ie=R+ee,oe=R-ee,ae=P+te;if(T[Z++]=ie,T[Z++]=ae,T[--Y]=ae,T[--Y]=oe,I){const le=P-te;T[W++]=oe,T[W++]=le,T[--J]=le,T[--J]=ie}for(let le=1;le<G;le++){const he=Math.PI/2*(le/G),me=O+Math.cos(he)*L,fe=I+Math.sin(he)*U,ue=R+me,pe=R-me,ge=P+fe,_e=P-fe;T[Z++]=ue,T[Z++]=ge,T[--Y]=ge,T[--Y]=pe,T[W++]=pe,T[W++]=_e,T[--J]=_e,T[--J]=ue}ee=O,te=I+U,ie=R+ee,oe=R-ee,ae=P+te;const ce=P-te;return T[Z++]=ie,T[Z++]=ae,T[--J]=ce,T[--J]=ie,O&&(T[Z++]=oe,T[Z++]=ae,T[--J]=ce,T[--J]=oe),!0},triangulate(_,T,R,P,O,I){if(_.length===0)return;let L=0,U=0;for(let Z=0;Z<_.length;Z+=2)L+=_[Z],U+=_[Z+1];L/=_.length/2,U/=_.length/2;let G=P;T[G*R]=L,T[G*R+1]=U;const V=G++;for(let Z=0;Z<_.length;Z+=2)T[G*R]=_[Z],T[G*R+1]=_[Z+1],Z>0&&(O[I++]=G,O[I++]=V,O[I++]=G-1),G++;O[I++]=V+1,O[I++]=V,O[I++]=G-1}},buildEllipse={...buildCircle,extension:{...buildCircle.extension,name:"ellipse"}},buildRoundedRectangle={...buildCircle,extension:{...buildCircle.extension,name:"roundedRectangle"}},closePointEps=1e-4,curveEps=1e-4;function getOrientationOfPoints(_){const T=_.length;if(T<6)return 1;let R=0;for(let P=0,O=_[T-2],I=_[T-1];P<T;P+=2){const L=_[P],U=_[P+1];R+=(L-O)*(U+I),O=L,I=U}return R<0?-1:1}function square(_,T,R,P,O,I,L,U){const G=_-R*O,V=T-P*O,Z=_+R*I,Y=T+P*I;let W,J;L?(W=P,J=-R):(W=-P,J=R);const ee=G+W,te=V+J,ie=Z+W,oe=Y+J;return U.push(ee,te),U.push(ie,oe),2}function round(_,T,R,P,O,I,L,U){const G=R-_,V=P-T;let Z=Math.atan2(G,V),Y=Math.atan2(O-_,I-T);U&&Z<Y?Z+=Math.PI*2:!U&&Z>Y&&(Y+=Math.PI*2);let W=Z;const J=Y-Z,ee=Math.abs(J),te=Math.sqrt(G*G+V*V),ie=(15*ee*Math.sqrt(te)/Math.PI>>0)+1,oe=J/ie;if(W+=oe,U){L.push(_,T),L.push(R,P);for(let ae=1,ce=W;ae<ie;ae++,ce+=oe)L.push(_,T),L.push(_+Math.sin(ce)*te,T+Math.cos(ce)*te);L.push(_,T),L.push(O,I)}else{L.push(R,P),L.push(_,T);for(let ae=1,ce=W;ae<ie;ae++,ce+=oe)L.push(_+Math.sin(ce)*te,T+Math.cos(ce)*te),L.push(_,T);L.push(O,I),L.push(_,T)}return ie*2}function buildLine(_,T,R,P,O,I){const L=closePointEps;if(_.length===0)return;const U=T;let G=U.alignment;if(T.alignment!==.5){let Ae=getOrientationOfPoints(_);G=(G-.5)*Ae+.5}const V=new Point(_[0],_[1]),Z=new Point(_[_.length-2],_[_.length-1]),Y=P,W=Math.abs(V.x-Z.x)<L&&Math.abs(V.y-Z.y)<L;if(Y){_=_.slice(),W&&(_.pop(),_.pop(),Z.set(_[_.length-2],_[_.length-1]));const Ae=(V.x+Z.x)*.5,Be=(Z.y+V.y)*.5;_.unshift(Ae,Be),_.push(Ae,Be)}const J=O,ee=_.length/2;let te=_.length;const ie=J.length/2,oe=U.width/2,ae=oe*oe,ce=U.miterLimit*U.miterLimit;let le=_[0],he=_[1],me=_[2],fe=_[3],ue=0,pe=0,ge=-(he-fe),_e=le-me,we=0,be=0,Ce=Math.sqrt(ge*ge+_e*_e);ge/=Ce,_e/=Ce,ge*=oe,_e*=oe;const Ee=G,ye=(1-Ee)*2,Se=Ee*2;Y||(U.cap==="round"?te+=round(le-ge*(ye-Se)*.5,he-_e*(ye-Se)*.5,le-ge*ye,he-_e*ye,le+ge*Se,he+_e*Se,J,!0)+2:U.cap==="square"&&(te+=square(le,he,ge,_e,ye,Se,!0,J))),J.push(le-ge*ye,he-_e*ye),J.push(le+ge*Se,he+_e*Se);for(let Ae=1;Ae<ee-1;++Ae){le=_[(Ae-1)*2],he=_[(Ae-1)*2+1],me=_[Ae*2],fe=_[Ae*2+1],ue=_[(Ae+1)*2],pe=_[(Ae+1)*2+1],ge=-(he-fe),_e=le-me,Ce=Math.sqrt(ge*ge+_e*_e),ge/=Ce,_e/=Ce,ge*=oe,_e*=oe,we=-(fe-pe),be=me-ue,Ce=Math.sqrt(we*we+be*be),we/=Ce,be/=Ce,we*=oe,be*=oe;const Be=me-le,ve=he-fe,Re=me-ue,Me=pe-fe,ze=Be*Re+ve*Me,qe=ve*Re-Me*Be,We=qe<0;if(Math.abs(qe)<.001*Math.abs(ze)){J.push(me-ge*ye,fe-_e*ye),J.push(me+ge*Se,fe+_e*Se),ze>=0&&(U.join==="round"?te+=round(me,fe,me-ge*ye,fe-_e*ye,me-we*ye,fe-be*ye,J,!1)+4:te+=2,J.push(me-we*Se,fe-be*Se),J.push(me+we*ye,fe+be*ye));continue}const Oe=(-ge+le)*(-_e+fe)-(-ge+me)*(-_e+he),Ve=(-we+ue)*(-be+fe)-(-we+me)*(-be+pe),ke=(Be*Ve-Re*Oe)/qe,Fe=(Me*Oe-ve*Ve)/qe,He=(ke-me)*(ke-me)+(Fe-fe)*(Fe-fe),Pe=me+(ke-me)*ye,Je=fe+(Fe-fe)*ye,Ke=me-(ke-me)*Se,Ze=fe-(Fe-fe)*Se,Qe=Math.min(Be*Be+ve*ve,Re*Re+Me*Me),at=We?ye:Se,et=Qe+at*at*ae;He<=et?U.join==="bevel"||He/ae>ce?(We?(J.push(Pe,Je),J.push(me+ge*Se,fe+_e*Se),J.push(Pe,Je),J.push(me+we*Se,fe+be*Se)):(J.push(me-ge*ye,fe-_e*ye),J.push(Ke,Ze),J.push(me-we*ye,fe-be*ye),J.push(Ke,Ze)),te+=2):U.join==="round"?We?(J.push(Pe,Je),J.push(me+ge*Se,fe+_e*Se),te+=round(me,fe,me+ge*Se,fe+_e*Se,me+we*Se,fe+be*Se,J,!0)+4,J.push(Pe,Je),J.push(me+we*Se,fe+be*Se)):(J.push(me-ge*ye,fe-_e*ye),J.push(Ke,Ze),te+=round(me,fe,me-ge*ye,fe-_e*ye,me-we*ye,fe-be*ye,J,!1)+4,J.push(me-we*ye,fe-be*ye),J.push(Ke,Ze)):(J.push(Pe,Je),J.push(Ke,Ze)):(J.push(me-ge*ye,fe-_e*ye),J.push(me+ge*Se,fe+_e*Se),U.join==="round"?We?te+=round(me,fe,me+ge*Se,fe+_e*Se,me+we*Se,fe+be*Se,J,!0)+2:te+=round(me,fe,me-ge*ye,fe-_e*ye,me-we*ye,fe-be*ye,J,!1)+2:U.join==="miter"&&He/ae<=ce&&(We?(J.push(Ke,Ze),J.push(Ke,Ze)):(J.push(Pe,Je),J.push(Pe,Je)),te+=2),J.push(me-we*ye,fe-be*ye),J.push(me+we*Se,fe+be*Se),te+=2)}le=_[(ee-2)*2],he=_[(ee-2)*2+1],me=_[(ee-1)*2],fe=_[(ee-1)*2+1],ge=-(he-fe),_e=le-me,Ce=Math.sqrt(ge*ge+_e*_e),ge/=Ce,_e/=Ce,ge*=oe,_e*=oe,J.push(me-ge*ye,fe-_e*ye),J.push(me+ge*Se,fe+_e*Se),Y||(U.cap==="round"?te+=round(me-ge*(ye-Se)*.5,fe-_e*(ye-Se)*.5,me-ge*ye,fe-_e*ye,me+ge*Se,fe+_e*Se,J,!1)+2:U.cap==="square"&&(te+=square(me,fe,ge,_e,ye,Se,!1,J)));const Te=curveEps*curveEps;for(let Ae=ie;Ae<te+ie-2;++Ae)le=J[Ae*2],he=J[Ae*2+1],me=J[(Ae+1)*2],fe=J[(Ae+1)*2+1],ue=J[(Ae+2)*2],pe=J[(Ae+2)*2+1],!(Math.abs(le*(fe-pe)+me*(pe-he)+ue*(he-fe))<Te)&&I.push(Ae,Ae+1,Ae+2)}function buildPixelLine(_,T,R,P){const O=closePointEps;if(_.length===0)return;const I=_[0],L=_[1],U=_[_.length-2],G=_[_.length-1],V=T||Math.abs(I-U)<O&&Math.abs(L-G)<O,Z=R,Y=_.length/2,W=Z.length/2;for(let J=0;J<Y;J++)Z.push(_[J*2]),Z.push(_[J*2+1]);for(let J=0;J<Y-1;J++)P.push(W+J,W+J+1);V&&P.push(W+Y-1,W)}function triangulateWithHoles(_,T,R,P,O,I,L){const U=earcut(_,T,2);if(!U)return;for(let V=0;V<U.length;V+=3)I[L++]=U[V]+O,I[L++]=U[V+1]+O,I[L++]=U[V+2]+O;let G=O*P;for(let V=0;V<_.length;V+=2)R[G]=_[V],R[G+1]=_[V+1],G+=P}const emptyArray=[],buildPolygon={extension:{type:ExtensionType.ShapeBuilder,name:"polygon"},build(_,T){for(let R=0;R<_.points.length;R++)T[R]=_.points[R];return!0},triangulate(_,T,R,P,O,I){triangulateWithHoles(_,emptyArray,T,R,P,O,I)}},buildRectangle={extension:{type:ExtensionType.ShapeBuilder,name:"rectangle"},build(_,T){const R=_,P=R.x,O=R.y,I=R.width,L=R.height;return I>0&&L>0?(T[0]=P,T[1]=O,T[2]=P+I,T[3]=O,T[4]=P+I,T[5]=O+L,T[6]=P,T[7]=O+L,!0):!1},triangulate(_,T,R,P,O,I){let L=0;P*=R,T[P+L]=_[0],T[P+L+1]=_[1],L+=R,T[P+L]=_[2],T[P+L+1]=_[3],L+=R,T[P+L]=_[6],T[P+L+1]=_[7],L+=R,T[P+L]=_[4],T[P+L+1]=_[5],L+=R;const U=P/R;O[I++]=U,O[I++]=U+1,O[I++]=U+2,O[I++]=U+1,O[I++]=U+3,O[I++]=U+2}},buildTriangle={extension:{type:ExtensionType.ShapeBuilder,name:"triangle"},build(_,T){return T[0]=_.x,T[1]=_.y,T[2]=_.x2,T[3]=_.y2,T[4]=_.x3,T[5]=_.y3,!0},triangulate(_,T,R,P,O,I){let L=0;P*=R,T[P+L]=_[0],T[P+L+1]=_[1],L+=R,T[P+L]=_[2],T[P+L+1]=_[3],L+=R,T[P+L]=_[4],T[P+L+1]=_[5];const U=P/R;O[I++]=U,O[I++]=U+1,O[I++]=U+2}},tempTextureMatrix$1=new Matrix,tempRect$2=new Rectangle;function generateTextureMatrix(_,T,R,P){const O=T.matrix?_.copyFrom(T.matrix).invert():_.identity();if(T.textureSpace==="local"){const L=R.getBounds(tempRect$2);T.width&&L.pad(T.width);const{x:U,y:G}=L,V=1/L.width,Z=1/L.height,Y=-U*V,W=-G*Z,J=O.a,ee=O.b,te=O.c,ie=O.d;O.a*=V,O.b*=V,O.c*=Z,O.d*=Z,O.tx=Y*J+W*te+O.tx,O.ty=Y*ee+W*ie+O.ty}else O.translate(T.texture.frame.x,T.texture.frame.y),O.scale(1/T.texture.source.width,1/T.texture.source.height);const I=T.texture.source.style;return!(T.fill instanceof FillGradient)&&I.addressMode==="clamp-to-edge"&&(I.addressMode="repeat",I.update()),P&&O.append(tempTextureMatrix$1.copyFrom(P).invert()),O}const shapeBuilders={};extensions.handleByMap(ExtensionType.ShapeBuilder,shapeBuilders);extensions.add(buildRectangle,buildPolygon,buildTriangle,buildCircle,buildEllipse,buildRoundedRectangle);const tempRect$1=new Rectangle,tempTextureMatrix=new Matrix;function buildContextBatches(_,T){const{geometryData:R,batches:P}=T;P.length=0,R.indices.length=0,R.vertices.length=0,R.uvs.length=0;for(let O=0;O<_.instructions.length;O++){const I=_.instructions[O];if(I.action==="texture")addTextureToGeometryData(I.data,P,R);else if(I.action==="fill"||I.action==="stroke"){const L=I.action==="stroke",U=I.data.path.shapePath,G=I.data.style,V=I.data.hole;L&&V&&addShapePathToGeometryData(V.shapePath,G,!0,P,R),V&&(U.shapePrimitives[U.shapePrimitives.length-1].holes=V.shapePath.shapePrimitives),addShapePathToGeometryData(U,G,L,P,R)}}}function addTextureToGeometryData(_,T,R){const P=[],O=shapeBuilders.rectangle,I=tempRect$1;I.x=_.dx,I.y=_.dy,I.width=_.dw,I.height=_.dh;const L=_.transform;if(!O.build(I,P))return;const{vertices:U,uvs:G,indices:V}=R,Z=V.length,Y=U.length/2;L&&transformVertices(P,L),O.triangulate(P,U,2,Y,V,Z);const W=_.image,J=W.uvs;G.push(J.x0,J.y0,J.x1,J.y1,J.x3,J.y3,J.x2,J.y2);const ee=BigPool.get(BatchableGraphics);ee.indexOffset=Z,ee.indexSize=V.length-Z,ee.attributeOffset=Y,ee.attributeSize=U.length/2-Y,ee.baseColor=_.style,ee.alpha=_.alpha,ee.texture=W,ee.geometryData=R,T.push(ee)}function addShapePathToGeometryData(_,T,R,P,O){const{vertices:I,uvs:L,indices:U}=O;_.shapePrimitives.forEach(({shape:G,transform:V,holes:Z})=>{const Y=[],W=shapeBuilders[G.type];if(!W.build(G,Y))return;const J=U.length,ee=I.length/2;let te="triangle-list";if(V&&transformVertices(Y,V),R){const ce=G.closePath??!0,le=T;le.pixelLine?(buildPixelLine(Y,ce,I,U),te="line-list"):buildLine(Y,le,!1,ce,I,U)}else if(Z){const ce=[],le=Y.slice();getHoleArrays(Z).forEach(me=>{ce.push(le.length/2),le.push(...me)}),triangulateWithHoles(le,ce,I,2,ee,U,J)}else W.triangulate(Y,I,2,ee,U,J);const ie=L.length/2,oe=T.texture;if(oe!==Texture.WHITE){const ce=generateTextureMatrix(tempTextureMatrix,T,G,V);buildUvs(I,2,ee,L,ie,2,I.length/2-ee,ce)}else buildSimpleUvs(L,ie,2,I.length/2-ee);const ae=BigPool.get(BatchableGraphics);ae.indexOffset=J,ae.indexSize=U.length-J,ae.attributeOffset=ee,ae.attributeSize=I.length/2-ee,ae.baseColor=T.color,ae.alpha=T.alpha,ae.texture=oe,ae.geometryData=O,ae.topology=te,P.push(ae)})}function getHoleArrays(_){const T=[];for(let R=0;R<_.length;R++){const P=_[R].shape,O=[];shapeBuilders[P.type].build(P,O)&&T.push(O)}return T}class GpuGraphicsContext{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class GraphicsContextRenderData{constructor(){this.instructions=new InstructionSet}init(T){const R=T.maxTextures;this.batcher?this.batcher._updateMaxTextures(R):this.batcher=new DefaultBatcher({maxTextures:R}),this.instructions.reset()}get geometry(){return deprecation(v8_3_4,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const _GraphicsContextSystem=class dc{constructor(T){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=T,T.renderableGC.addManagedHash(this,"_gpuContextHash"),T.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(T){dc.defaultOptions.bezierSmoothness=T?.bezierSmoothness??dc.defaultOptions.bezierSmoothness}getContextRenderData(T){return this._graphicsDataContextHash[T.uid]||this._initContextRenderData(T)}updateGpuContext(T){let R=this._gpuContextHash[T.uid]||this._initContext(T);if(T.dirty){R?this._cleanGraphicsContextData(T):R=this._initContext(T),buildContextBatches(T,R);const P=T.batchMode;T.customShader||P==="no-batch"?R.isBatchable=!1:P==="auto"?R.isBatchable=R.geometryData.vertices.length<400:R.isBatchable=!0,T.dirty=!1}return R}getGpuContext(T){return this._gpuContextHash[T.uid]||this._initContext(T)}_initContextRenderData(T){const R=BigPool.get(GraphicsContextRenderData,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:P,geometryData:O}=this._gpuContextHash[T.uid],I=O.vertices.length,L=O.indices.length;for(let Z=0;Z<P.length;Z++)P[Z].applyTransform=!1;const U=R.batcher;U.ensureAttributeBuffer(I),U.ensureIndexBuffer(L),U.begin();for(let Z=0;Z<P.length;Z++){const Y=P[Z];U.add(Y)}U.finish(R.instructions);const G=U.geometry;G.indexBuffer.setDataWithSize(U.indexBuffer,U.indexSize,!0),G.buffers[0].setDataWithSize(U.attributeBuffer.float32View,U.attributeSize,!0);const V=U.batches;for(let Z=0;Z<V.length;Z++){const Y=V[Z];Y.bindGroup=getTextureBatchBindGroup(Y.textures.textures,Y.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[T.uid]=R,R}_initContext(T){const R=new GpuGraphicsContext;return R.context=T,this._gpuContextHash[T.uid]=R,T.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[T.uid]}onGraphicsContextDestroy(T){this._cleanGraphicsContextData(T),T.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[T.uid]=null}_cleanGraphicsContextData(T){const R=this._gpuContextHash[T.uid];R.isBatchable||this._graphicsDataContextHash[T.uid]&&(BigPool.return(this.getContextRenderData(T)),this._graphicsDataContextHash[T.uid]=null),R.batches&&R.batches.forEach(P=>{BigPool.return(P)})}destroy(){for(const T in this._gpuContextHash)this._gpuContextHash[T]&&this.onGraphicsContextDestroy(this._gpuContextHash[T].context);this._gpuContextHash={},this._graphicsDataContextHash={},this._renderer=null}};_GraphicsContextSystem.extension={type:[ExtensionType.WebGLSystem,ExtensionType.WebGPUSystem,ExtensionType.CanvasSystem],name:"graphicsContext"};_GraphicsContextSystem.defaultOptions={bezierSmoothness:.5};let GraphicsContextSystem=_GraphicsContextSystem;const RECURSION_LIMIT$1=8,FLT_EPSILON$1=11920929e-14,PATH_DISTANCE_EPSILON$1=1;function buildAdaptiveBezier(_,T,R,P,O,I,L,U,G,V){const Y=Math.min(.99,Math.max(0,V??GraphicsContextSystem.defaultOptions.bezierSmoothness));let W=(PATH_DISTANCE_EPSILON$1-Y)/1;return W*=W,begin$1(T,R,P,O,I,L,U,G,_,W),_}function begin$1(_,T,R,P,O,I,L,U,G,V){recursive$1(_,T,R,P,O,I,L,U,G,V,0),G.push(L,U)}function recursive$1(_,T,R,P,O,I,L,U,G,V,Z){if(Z>RECURSION_LIMIT$1)return;const Y=(_+R)/2,W=(T+P)/2,J=(R+O)/2,ee=(P+I)/2,te=(O+L)/2,ie=(I+U)/2,oe=(Y+J)/2,ae=(W+ee)/2,ce=(J+te)/2,le=(ee+ie)/2,he=(oe+ce)/2,me=(ae+le)/2;if(Z>0){let fe=L-_,ue=U-T;const pe=Math.abs((R-L)*ue-(P-U)*fe),ge=Math.abs((O-L)*ue-(I-U)*fe);if(pe>FLT_EPSILON$1&&ge>FLT_EPSILON$1){if((pe+ge)*(pe+ge)<=V*(fe*fe+ue*ue)){G.push(he,me);return}}else if(pe>FLT_EPSILON$1){if(pe*pe<=V*(fe*fe+ue*ue)){G.push(he,me);return}}else if(ge>FLT_EPSILON$1){if(ge*ge<=V*(fe*fe+ue*ue)){G.push(he,me);return}}else if(fe=he-(_+L)/2,ue=me-(T+U)/2,fe*fe+ue*ue<=V){G.push(he,me);return}}recursive$1(_,T,Y,W,oe,ae,he,me,G,V,Z+1),recursive$1(he,me,ce,le,te,ie,L,U,G,V,Z+1)}const RECURSION_LIMIT=8,FLT_EPSILON=11920929e-14,PATH_DISTANCE_EPSILON=1;function buildAdaptiveQuadratic(_,T,R,P,O,I,L,U){const V=Math.min(.99,Math.max(0,U??GraphicsContextSystem.defaultOptions.bezierSmoothness));let Z=(PATH_DISTANCE_EPSILON-V)/1;return Z*=Z,begin(T,R,P,O,I,L,_,Z),_}function begin(_,T,R,P,O,I,L,U){recursive(L,_,T,R,P,O,I,U,0),L.push(O,I)}function recursive(_,T,R,P,O,I,L,U,G){if(G>RECURSION_LIMIT)return;const V=(T+P)/2,Z=(R+O)/2,Y=(P+I)/2,W=(O+L)/2,J=(V+Y)/2,ee=(Z+W)/2;let te=I-T,ie=L-R;const oe=Math.abs((P-I)*ie-(O-L)*te);if(oe>FLT_EPSILON){if(oe*oe<=U*(te*te+ie*ie)){_.push(J,ee);return}}else if(te=J-(T+I)/2,ie=ee-(R+L)/2,te*te+ie*ie<=U){_.push(J,ee);return}recursive(_,T,R,V,Z,J,ee,U,G+1),recursive(_,J,ee,Y,W,I,L,U,G+1)}function buildArc(_,T,R,P,O,I,L,U){let G=Math.abs(O-I);(!L&&O>I||L&&I>O)&&(G=2*Math.PI-G),U||(U=Math.max(6,Math.floor(6*Math.pow(P,1/3)*(G/Math.PI)))),U=Math.max(U,3);let V=G/U,Z=O;V*=L?-1:1;for(let Y=0;Y<U+1;Y++){const W=Math.cos(Z),J=Math.sin(Z),ee=T+W*P,te=R+J*P;_.push(ee,te),Z+=V}}function buildArcTo(_,T,R,P,O,I){const L=_[_.length-2],G=_[_.length-1]-R,V=L-T,Z=O-R,Y=P-T,W=Math.abs(G*Y-V*Z);if(W<1e-8||I===0){(_[_.length-2]!==T||_[_.length-1]!==R)&&_.push(T,R);return}const J=G*G+V*V,ee=Z*Z+Y*Y,te=G*Z+V*Y,ie=I*Math.sqrt(J)/W,oe=I*Math.sqrt(ee)/W,ae=ie*te/J,ce=oe*te/ee,le=ie*Y+oe*V,he=ie*Z+oe*G,me=V*(oe+ae),fe=G*(oe+ae),ue=Y*(ie+ce),pe=Z*(ie+ce),ge=Math.atan2(fe-he,me-le),_e=Math.atan2(pe-he,ue-le);buildArc(_,le+T,he+R,I,ge,_e,V*Z>Y*G)}const TAU=Math.PI*2,out={centerX:0,centerY:0,ang1:0,ang2:0},mapToEllipse=({x:_,y:T},R,P,O,I,L,U,G)=>{_*=R,T*=P;const V=O*_-I*T,Z=I*_+O*T;return G.x=V+L,G.y=Z+U,G};function approxUnitArc(_,T){const R=T===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(T/4),P=T===1.5707963267948966?.551915024494:R,O=Math.cos(_),I=Math.sin(_),L=Math.cos(_+T),U=Math.sin(_+T);return[{x:O-I*P,y:I+O*P},{x:L+U*P,y:U-L*P},{x:L,y:U}]}const vectorAngle=(_,T,R,P)=>{const O=_*P-T*R<0?-1:1;let I=_*R+T*P;return I>1&&(I=1),I<-1&&(I=-1),O*Math.acos(I)},getArcCenter=(_,T,R,P,O,I,L,U,G,V,Z,Y,W)=>{const J=Math.pow(O,2),ee=Math.pow(I,2),te=Math.pow(Z,2),ie=Math.pow(Y,2);let oe=J*ee-J*ie-ee*te;oe<0&&(oe=0),oe/=J*ie+ee*te,oe=Math.sqrt(oe)*(L===U?-1:1);const ae=oe*O/I*Y,ce=oe*-I/O*Z,le=V*ae-G*ce+(_+R)/2,he=G*ae+V*ce+(T+P)/2,me=(Z-ae)/O,fe=(Y-ce)/I,ue=(-Z-ae)/O,pe=(-Y-ce)/I,ge=vectorAngle(1,0,me,fe);let _e=vectorAngle(me,fe,ue,pe);U===0&&_e>0&&(_e-=TAU),U===1&&_e<0&&(_e+=TAU),W.centerX=le,W.centerY=he,W.ang1=ge,W.ang2=_e};function buildArcToSvg(_,T,R,P,O,I,L,U=0,G=0,V=0){if(I===0||L===0)return;const Z=Math.sin(U*TAU/360),Y=Math.cos(U*TAU/360),W=Y*(T-P)/2+Z*(R-O)/2,J=-Z*(T-P)/2+Y*(R-O)/2;if(W===0&&J===0)return;I=Math.abs(I),L=Math.abs(L);const ee=Math.pow(W,2)/Math.pow(I,2)+Math.pow(J,2)/Math.pow(L,2);ee>1&&(I*=Math.sqrt(ee),L*=Math.sqrt(ee)),getArcCenter(T,R,P,O,I,L,G,V,Z,Y,W,J,out);let{ang1:te,ang2:ie}=out;const{centerX:oe,centerY:ae}=out;let ce=Math.abs(ie)/(TAU/4);Math.abs(1-ce)<1e-7&&(ce=1);const le=Math.max(Math.ceil(ce),1);ie/=le;let he=_[_.length-2],me=_[_.length-1];const fe={x:0,y:0};for(let ue=0;ue<le;ue++){const pe=approxUnitArc(te,ie),{x:ge,y:_e}=mapToEllipse(pe[0],I,L,Y,Z,oe,ae,fe),{x:we,y:be}=mapToEllipse(pe[1],I,L,Y,Z,oe,ae,fe),{x:Ce,y:Ee}=mapToEllipse(pe[2],I,L,Y,Z,oe,ae,fe);buildAdaptiveBezier(_,he,me,ge,_e,we,be,Ce,Ee),he=Ce,me=Ee,te+=ie}}function roundedShapeArc(_,T,R){const P=(L,U)=>{const G=U.x-L.x,V=U.y-L.y,Z=Math.sqrt(G*G+V*V),Y=G/Z,W=V/Z;return{len:Z,nx:Y,ny:W}},O=(L,U)=>{L===0?_.moveTo(U.x,U.y):_.lineTo(U.x,U.y)};let I=T[T.length-1];for(let L=0;L<T.length;L++){const U=T[L%T.length],G=U.radius??R;if(G<=0){O(L,U),I=U;continue}const V=T[(L+1)%T.length],Z=P(U,I),Y=P(U,V);if(Z.len<1e-4||Y.len<1e-4){O(L,U),I=U;continue}let W=Math.asin(Z.nx*Y.ny-Z.ny*Y.nx),J=1,ee=!1;Z.nx*Y.nx-Z.ny*-Y.ny<0?W<0?W=Math.PI+W:(W=Math.PI-W,J=-1,ee=!0):W>0&&(J=-1,ee=!0);const te=W/2;let ie,oe=Math.abs(Math.cos(te)*G/Math.sin(te));oe>Math.min(Z.len/2,Y.len/2)?(oe=Math.min(Z.len/2,Y.len/2),ie=Math.abs(oe*Math.sin(te)/Math.cos(te))):ie=G;const ae=U.x+Y.nx*oe+-Y.ny*ie*J,ce=U.y+Y.ny*oe+Y.nx*ie*J,le=Math.atan2(Z.ny,Z.nx)+Math.PI/2*J,he=Math.atan2(Y.ny,Y.nx)-Math.PI/2*J;L===0&&_.moveTo(ae+Math.cos(le)*ie,ce+Math.sin(le)*ie),_.arc(ae,ce,ie,le,he,ee),I=U}}function roundedShapeQuadraticCurve(_,T,R,P){const O=(U,G)=>Math.sqrt((U.x-G.x)**2+(U.y-G.y)**2),I=(U,G,V)=>({x:U.x+(G.x-U.x)*V,y:U.y+(G.y-U.y)*V}),L=T.length;for(let U=0;U<L;U++){const G=T[(U+1)%L],V=G.radius??R;if(V<=0){U===0?_.moveTo(G.x,G.y):_.lineTo(G.x,G.y);continue}const Z=T[U],Y=T[(U+2)%L],W=O(Z,G);let J;if(W<1e-4)J=G;else{const ie=Math.min(W/2,V);J=I(G,Z,ie/W)}const ee=O(Y,G);let te;if(ee<1e-4)te=G;else{const ie=Math.min(ee/2,V);te=I(G,Y,ie/ee)}U===0?_.moveTo(J.x,J.y):_.lineTo(J.x,J.y),_.quadraticCurveTo(G.x,G.y,te.x,te.y,P)}}const tempRectangle=new Rectangle;class ShapePath{constructor(T){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Bounds,this._graphicsPath2D=T,this.signed=T.checkForHoles}moveTo(T,R){return this.startPoly(T,R),this}lineTo(T,R){this._ensurePoly();const P=this._currentPoly.points,O=P[P.length-2],I=P[P.length-1];return(O!==T||I!==R)&&P.push(T,R),this}arc(T,R,P,O,I,L){this._ensurePoly(!1);const U=this._currentPoly.points;return buildArc(U,T,R,P,O,I,L),this}arcTo(T,R,P,O,I){this._ensurePoly();const L=this._currentPoly.points;return buildArcTo(L,T,R,P,O,I),this}arcToSvg(T,R,P,O,I,L,U){const G=this._currentPoly.points;return buildArcToSvg(G,this._currentPoly.lastX,this._currentPoly.lastY,L,U,T,R,P,O,I),this}bezierCurveTo(T,R,P,O,I,L,U){this._ensurePoly();const G=this._currentPoly;return buildAdaptiveBezier(this._currentPoly.points,G.lastX,G.lastY,T,R,P,O,I,L,U),this}quadraticCurveTo(T,R,P,O,I){this._ensurePoly();const L=this._currentPoly;return buildAdaptiveQuadratic(this._currentPoly.points,L.lastX,L.lastY,T,R,P,O,I),this}closePath(){return this.endPoly(!0),this}addPath(T,R){this.endPoly(),R&&!R.isIdentity()&&(T=T.clone(!0),T.transform(R));const P=this.shapePrimitives,O=P.length;for(let I=0;I<T.instructions.length;I++){const L=T.instructions[I];this[L.action](...L.data)}if(T.checkForHoles&&P.length-O>1){let I=null;for(let L=O;L<P.length;L++){const U=P[L];if(U.shape.type==="polygon"){const G=U.shape,V=I?.shape;V&&V.containsPolygon(G)?(I.holes||(I.holes=[]),I.holes.push(U),P.copyWithin(L,L+1),P.length--,L--):I=U}}}return this}finish(T=!1){this.endPoly(T)}rect(T,R,P,O,I){return this.drawShape(new Rectangle(T,R,P,O),I),this}circle(T,R,P,O){return this.drawShape(new Circle(T,R,P),O),this}poly(T,R,P){const O=new Polygon(T);return O.closePath=R,this.drawShape(O,P),this}regularPoly(T,R,P,O,I=0,L){O=Math.max(O|0,3);const U=-1*Math.PI/2+I,G=Math.PI*2/O,V=[];for(let Z=0;Z<O;Z++){const Y=U-Z*G;V.push(T+P*Math.cos(Y),R+P*Math.sin(Y))}return this.poly(V,!0,L),this}roundPoly(T,R,P,O,I,L=0,U){if(O=Math.max(O|0,3),I<=0)return this.regularPoly(T,R,P,O,L);const G=P*Math.sin(Math.PI/O)-.001;I=Math.min(I,G);const V=-1*Math.PI/2+L,Z=Math.PI*2/O,Y=(O-2)*Math.PI/O/2;for(let W=0;W<O;W++){const J=W*Z+V,ee=T+P*Math.cos(J),te=R+P*Math.sin(J),ie=J+Math.PI+Y,oe=J-Math.PI-Y,ae=ee+I*Math.cos(ie),ce=te+I*Math.sin(ie),le=ee+I*Math.cos(oe),he=te+I*Math.sin(oe);W===0?this.moveTo(ae,ce):this.lineTo(ae,ce),this.quadraticCurveTo(ee,te,le,he,U)}return this.closePath()}roundShape(T,R,P=!1,O){return T.length<3?this:(P?roundedShapeQuadraticCurve(this,T,R,O):roundedShapeArc(this,T,R),this.closePath())}filletRect(T,R,P,O,I){if(I===0)return this.rect(T,R,P,O);const L=Math.min(P,O)/2,U=Math.min(L,Math.max(-L,I)),G=T+P,V=R+O,Z=U<0?-U:0,Y=Math.abs(U);return this.moveTo(T,R+Y).arcTo(T+Z,R+Z,T+Y,R,Y).lineTo(G-Y,R).arcTo(G-Z,R+Z,G,R+Y,Y).lineTo(G,V-Y).arcTo(G-Z,V-Z,T+P-Y,V,Y).lineTo(T+Y,V).arcTo(T+Z,V-Z,T,V-Y,Y).closePath()}chamferRect(T,R,P,O,I,L){if(I<=0)return this.rect(T,R,P,O);const U=Math.min(I,Math.min(P,O)/2),G=T+P,V=R+O,Z=[T+U,R,G-U,R,G,R+U,G,V-U,G-U,V,T+U,V,T,V-U,T,R+U];for(let Y=Z.length-1;Y>=2;Y-=2)Z[Y]===Z[Y-2]&&Z[Y-1]===Z[Y-3]&&Z.splice(Y-1,2);return this.poly(Z,!0,L)}ellipse(T,R,P,O,I){return this.drawShape(new Ellipse(T,R,P,O),I),this}roundRect(T,R,P,O,I,L){return this.drawShape(new RoundedRectangle(T,R,P,O,I),L),this}drawShape(T,R){return this.endPoly(),this.shapePrimitives.push({shape:T,transform:R}),this}startPoly(T,R){let P=this._currentPoly;return P&&this.endPoly(),P=new Polygon,P.points.push(T,R),this._currentPoly=P,this}endPoly(T=!1){const R=this._currentPoly;return R&&R.points.length>2&&(R.closePath=T,this.shapePrimitives.push({shape:R})),this._currentPoly=null,this}_ensurePoly(T=!0){if(!this._currentPoly&&(this._currentPoly=new Polygon,T)){const R=this.shapePrimitives[this.shapePrimitives.length-1];if(R){let P=R.shape.x,O=R.shape.y;if(R.transform&&!R.transform.isIdentity()){const I=R.transform,L=P;P=I.a*P+I.c*O+I.tx,O=I.b*L+I.d*O+I.ty}this._currentPoly.points.push(P,O)}else this._currentPoly.points.push(0,0)}}buildPath(){const T=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let R=0;R<T.instructions.length;R++){const P=T.instructions[R];this[P.action](...P.data)}this.finish()}get bounds(){const T=this._bounds;T.clear();const R=this.shapePrimitives;for(let P=0;P<R.length;P++){const O=R[P],I=O.shape.getBounds(tempRectangle);O.transform?T.addRect(I,O.transform):T.addRect(I)}return T}}class GraphicsPath{constructor(T,R=!1){this.instructions=[],this.uid=uid("graphicsPath"),this._dirty=!0,this.checkForHoles=R,typeof T=="string"?parseSVGPath(T,this):this.instructions=T?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new ShapePath(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(T,R){return T=T.clone(),this.instructions.push({action:"addPath",data:[T,R]}),this._dirty=!0,this}arc(...T){return this.instructions.push({action:"arc",data:T}),this._dirty=!0,this}arcTo(...T){return this.instructions.push({action:"arcTo",data:T}),this._dirty=!0,this}arcToSvg(...T){return this.instructions.push({action:"arcToSvg",data:T}),this._dirty=!0,this}bezierCurveTo(...T){return this.instructions.push({action:"bezierCurveTo",data:T}),this._dirty=!0,this}bezierCurveToShort(T,R,P,O,I){const L=this.instructions[this.instructions.length-1],U=this.getLastPoint(Point.shared);let G=0,V=0;if(!L||L.action!=="bezierCurveTo")G=U.x,V=U.y;else{G=L.data[2],V=L.data[3];const Z=U.x,Y=U.y;G=Z+(Z-G),V=Y+(Y-V)}return this.instructions.push({action:"bezierCurveTo",data:[G,V,T,R,P,O,I]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...T){return this.instructions.push({action:"ellipse",data:T}),this._dirty=!0,this}lineTo(...T){return this.instructions.push({action:"lineTo",data:T}),this._dirty=!0,this}moveTo(...T){return this.instructions.push({action:"moveTo",data:T}),this}quadraticCurveTo(...T){return this.instructions.push({action:"quadraticCurveTo",data:T}),this._dirty=!0,this}quadraticCurveToShort(T,R,P){const O=this.instructions[this.instructions.length-1],I=this.getLastPoint(Point.shared);let L=0,U=0;if(!O||O.action!=="quadraticCurveTo")L=I.x,U=I.y;else{L=O.data[0],U=O.data[1];const G=I.x,V=I.y;L=G+(G-L),U=V+(V-U)}return this.instructions.push({action:"quadraticCurveTo",data:[L,U,T,R,P]}),this._dirty=!0,this}rect(T,R,P,O,I){return this.instructions.push({action:"rect",data:[T,R,P,O,I]}),this._dirty=!0,this}circle(T,R,P,O){return this.instructions.push({action:"circle",data:[T,R,P,O]}),this._dirty=!0,this}roundRect(...T){return this.instructions.push({action:"roundRect",data:T}),this._dirty=!0,this}poly(...T){return this.instructions.push({action:"poly",data:T}),this._dirty=!0,this}regularPoly(...T){return this.instructions.push({action:"regularPoly",data:T}),this._dirty=!0,this}roundPoly(...T){return this.instructions.push({action:"roundPoly",data:T}),this._dirty=!0,this}roundShape(...T){return this.instructions.push({action:"roundShape",data:T}),this._dirty=!0,this}filletRect(...T){return this.instructions.push({action:"filletRect",data:T}),this._dirty=!0,this}chamferRect(...T){return this.instructions.push({action:"chamferRect",data:T}),this._dirty=!0,this}star(T,R,P,O,I,L,U){I||(I=O/2);const G=-1*Math.PI/2+L,V=P*2,Z=Math.PI*2/V,Y=[];for(let W=0;W<V;W++){const J=W%2?I:O,ee=W*Z+G;Y.push(T+J*Math.cos(ee),R+J*Math.sin(ee))}return this.poly(Y,!0,U),this}clone(T=!1){const R=new GraphicsPath;if(R.checkForHoles=this.checkForHoles,!T)R.instructions=this.instructions.slice();else for(let P=0;P<this.instructions.length;P++){const O=this.instructions[P];R.instructions.push({action:O.action,data:O.data.slice()})}return R}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(T){if(T.isIdentity())return this;const R=T.a,P=T.b,O=T.c,I=T.d,L=T.tx,U=T.ty;let G=0,V=0,Z=0,Y=0,W=0,J=0,ee=0,te=0;for(let ie=0;ie<this.instructions.length;ie++){const oe=this.instructions[ie],ae=oe.data;switch(oe.action){case"moveTo":case"lineTo":G=ae[0],V=ae[1],ae[0]=R*G+O*V+L,ae[1]=P*G+I*V+U;break;case"bezierCurveTo":Z=ae[0],Y=ae[1],W=ae[2],J=ae[3],G=ae[4],V=ae[5],ae[0]=R*Z+O*Y+L,ae[1]=P*Z+I*Y+U,ae[2]=R*W+O*J+L,ae[3]=P*W+I*J+U,ae[4]=R*G+O*V+L,ae[5]=P*G+I*V+U;break;case"quadraticCurveTo":Z=ae[0],Y=ae[1],G=ae[2],V=ae[3],ae[0]=R*Z+O*Y+L,ae[1]=P*Z+I*Y+U,ae[2]=R*G+O*V+L,ae[3]=P*G+I*V+U;break;case"arcToSvg":G=ae[5],V=ae[6],ee=ae[0],te=ae[1],ae[0]=R*ee+O*te,ae[1]=P*ee+I*te,ae[5]=R*G+O*V+L,ae[6]=P*G+I*V+U;break;case"circle":ae[4]=adjustTransform(ae[3],T);break;case"rect":ae[4]=adjustTransform(ae[4],T);break;case"ellipse":ae[8]=adjustTransform(ae[8],T);break;case"roundRect":ae[5]=adjustTransform(ae[5],T);break;case"addPath":ae[0].transform(T);break;case"poly":ae[2]=adjustTransform(ae[2],T);break;default:warn$1("unknown transform action",oe.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(T){let R=this.instructions.length-1,P=this.instructions[R];if(!P)return T.x=0,T.y=0,T;for(;P.action==="closePath";){if(R--,R<0)return T.x=0,T.y=0,T;P=this.instructions[R]}switch(P.action){case"moveTo":case"lineTo":T.x=P.data[0],T.y=P.data[1];break;case"quadraticCurveTo":T.x=P.data[2],T.y=P.data[3];break;case"bezierCurveTo":T.x=P.data[4],T.y=P.data[5];break;case"arc":case"arcToSvg":T.x=P.data[5],T.y=P.data[6];break;case"addPath":P.data[0].getLastPoint(T);break}return T}}function adjustTransform(_,T){return _?_.prepend(T):T.clone()}function parseSVGFloatAttribute(_,T,R){const P=_.getAttribute(T);return P?Number(P):R}function parseSVGDefinitions(_,T){const R=_.querySelectorAll("defs");for(let P=0;P<R.length;P++){const O=R[P];for(let I=0;I<O.children.length;I++){const L=O.children[I];switch(L.nodeName.toLowerCase()){case"lineargradient":T.defs[L.id]=parseLinearGradient(L);break;case"radialgradient":T.defs[L.id]=parseRadialGradient();break}}}}function parseLinearGradient(_){const T=parseSVGFloatAttribute(_,"x1",0),R=parseSVGFloatAttribute(_,"y1",0),P=parseSVGFloatAttribute(_,"x2",1),O=parseSVGFloatAttribute(_,"y2",0),I=_.getAttribute("gradientUnits")||"objectBoundingBox",L=new FillGradient(T,R,P,O,I==="objectBoundingBox"?"local":"global");for(let U=0;U<_.children.length;U++){const G=_.children[U],V=parseSVGFloatAttribute(G,"offset",0),Z=Color$1.shared.setValue(G.getAttribute("stop-color")).toNumber();L.addColorStop(V,Z)}return L}function parseRadialGradient(_){return warn$1("[SVG Parser] Radial gradients are not yet supported"),new FillGradient(0,0,1,0)}function extractSvgUrlId(_){const T=_.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return T?T[1]:""}const styleAttributes={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function parseSVGStyle(_,T){const R=_.getAttribute("style"),P={},O={},I={strokeStyle:P,fillStyle:O,useFill:!1,useStroke:!1};for(const L in styleAttributes){const U=_.getAttribute(L);U&&parseAttribute(T,I,L,U.trim())}if(R){const L=R.split(";");for(let U=0;U<L.length;U++){const G=L[U].trim(),[V,Z]=G.split(":");styleAttributes[V]&&parseAttribute(T,I,V,Z.trim())}}return{strokeStyle:I.useStroke?P:null,fillStyle:I.useFill?O:null,useFill:I.useFill,useStroke:I.useStroke}}function parseAttribute(_,T,R,P){switch(R){case"stroke":if(P!=="none"){if(P.startsWith("url(")){const O=extractSvgUrlId(P);T.strokeStyle.fill=_.defs[O]}else T.strokeStyle.color=Color$1.shared.setValue(P).toNumber();T.useStroke=!0}break;case"stroke-width":T.strokeStyle.width=Number(P);break;case"fill":if(P!=="none"){if(P.startsWith("url(")){const O=extractSvgUrlId(P);T.fillStyle.fill=_.defs[O]}else T.fillStyle.color=Color$1.shared.setValue(P).toNumber();T.useFill=!0}break;case"fill-opacity":T.fillStyle.alpha=Number(P);break;case"stroke-opacity":T.strokeStyle.alpha=Number(P);break;case"opacity":T.fillStyle.alpha=Number(P),T.strokeStyle.alpha=Number(P);break}}function checkForNestedPattern(_){if(_.length<=2)return!0;const T=_.map(U=>U.area).sort((U,G)=>G-U),[R,P]=T,O=T[T.length-1],I=R/P,L=P/O;return!(I>3&&L<2)}function extractSubpaths(_){return _.split(/(?=[Mm])/).filter(P=>P.trim().length>0)}function calculatePathArea(_){const T=_.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!T||T.length<4)return 0;const R=T.map(Number),P=[],O=[];for(let Z=0;Z<R.length;Z+=2)Z+1<R.length&&(P.push(R[Z]),O.push(R[Z+1]));if(P.length===0||O.length===0)return 0;const I=Math.min(...P),L=Math.max(...P),U=Math.min(...O),G=Math.max(...O);return(L-I)*(G-U)}function appendSVGPath(_,T){const R=new GraphicsPath(_,!1);for(const P of R.instructions)T.instructions.push(P)}function SVGParser(_,T){if(typeof _=="string"){const L=document.createElement("div");L.innerHTML=_.trim(),_=L.querySelector("svg")}const R={context:T,defs:{},path:new GraphicsPath};parseSVGDefinitions(_,R);const P=_.children,{fillStyle:O,strokeStyle:I}=parseSVGStyle(_,R);for(let L=0;L<P.length;L++){const U=P[L];U.nodeName.toLowerCase()!=="defs"&&renderChildren(U,R,O,I)}return T}function renderChildren(_,T,R,P){const O=_.children,{fillStyle:I,strokeStyle:L}=parseSVGStyle(_,T);I&&R?R={...R,...I}:I&&(R=I),L&&P?P={...P,...L}:L&&(P=L);const U=!R&&!P;U&&(R={color:0});let G,V,Z,Y,W,J,ee,te,ie,oe,ae,ce,le,he,me,fe,ue;switch(_.nodeName.toLowerCase()){case"path":{he=_.getAttribute("d");const pe=_.getAttribute("fill-rule"),ge=extractSubpaths(he),_e=pe==="evenodd",we=ge.length>1;if(_e&&we){const Ce=ge.map(ye=>({path:ye,area:calculatePathArea(ye)}));if(Ce.sort((ye,Se)=>Se.area-ye.area),ge.length>3||!checkForNestedPattern(Ce))for(let ye=0;ye<Ce.length;ye++){const Se=Ce[ye],Te=ye===0;T.context.beginPath();const Ae=new GraphicsPath(void 0,!0);appendSVGPath(Se.path,Ae),T.context.path(Ae),Te?(R&&T.context.fill(R),P&&T.context.stroke(P)):T.context.cut()}else for(let ye=0;ye<Ce.length;ye++){const Se=Ce[ye],Te=ye%2===1;T.context.beginPath();const Ae=new GraphicsPath(void 0,!0);appendSVGPath(Se.path,Ae),T.context.path(Ae),Te?T.context.cut():(R&&T.context.fill(R),P&&T.context.stroke(P))}}else{const Ce=pe?pe==="evenodd":!0;me=new GraphicsPath(he,Ce),T.context.path(me),R&&T.context.fill(R),P&&T.context.stroke(P)}break}case"circle":ee=parseSVGFloatAttribute(_,"cx",0),te=parseSVGFloatAttribute(_,"cy",0),ie=parseSVGFloatAttribute(_,"r",0),T.context.ellipse(ee,te,ie,ie),R&&T.context.fill(R),P&&T.context.stroke(P);break;case"rect":G=parseSVGFloatAttribute(_,"x",0),V=parseSVGFloatAttribute(_,"y",0),fe=parseSVGFloatAttribute(_,"width",0),ue=parseSVGFloatAttribute(_,"height",0),oe=parseSVGFloatAttribute(_,"rx",0),ae=parseSVGFloatAttribute(_,"ry",0),oe||ae?T.context.roundRect(G,V,fe,ue,oe||ae):T.context.rect(G,V,fe,ue),R&&T.context.fill(R),P&&T.context.stroke(P);break;case"ellipse":ee=parseSVGFloatAttribute(_,"cx",0),te=parseSVGFloatAttribute(_,"cy",0),oe=parseSVGFloatAttribute(_,"rx",0),ae=parseSVGFloatAttribute(_,"ry",0),T.context.beginPath(),T.context.ellipse(ee,te,oe,ae),R&&T.context.fill(R),P&&T.context.stroke(P);break;case"line":Z=parseSVGFloatAttribute(_,"x1",0),Y=parseSVGFloatAttribute(_,"y1",0),W=parseSVGFloatAttribute(_,"x2",0),J=parseSVGFloatAttribute(_,"y2",0),T.context.beginPath(),T.context.moveTo(Z,Y),T.context.lineTo(W,J),P&&T.context.stroke(P);break;case"polygon":le=_.getAttribute("points"),ce=le.match(/\d+/g).map(pe=>parseInt(pe,10)),T.context.poly(ce,!0),R&&T.context.fill(R),P&&T.context.stroke(P);break;case"polyline":le=_.getAttribute("points"),ce=le.match(/\d+/g).map(pe=>parseInt(pe,10)),T.context.poly(ce,!1),P&&T.context.stroke(P);break;case"g":case"svg":break;default:{warn$1(`[SVG parser] <${_.nodeName}> elements unsupported`);break}}U&&(R=null);for(let pe=0;pe<O.length;pe++)renderChildren(O[pe],T,R,P)}function isColorLike(_){return Color$1.isColorLike(_)}function isFillPattern(_){return _ instanceof FillPattern}function isFillGradient(_){return _ instanceof FillGradient}function isTexture(_){return _ instanceof Texture}function handleColorLike(_,T,R){const P=Color$1.shared.setValue(T??0);return _.color=P.toNumber(),_.alpha=P.alpha===1?R.alpha:P.alpha,_.texture=Texture.WHITE,{...R,..._}}function handleTexture(_,T,R){return _.texture=T,{...R,..._}}function handleFillPattern(_,T,R){return _.fill=T,_.color=16777215,_.texture=T.texture,_.matrix=T.transform,{...R,..._}}function handleFillGradient(_,T,R){return T.buildGradient(),_.fill=T,_.color=16777215,_.texture=T.texture,_.matrix=T.transform,_.textureSpace=T.textureSpace,{...R,..._}}function handleFillObject(_,T){const R={...T,..._},P=Color$1.shared.setValue(R.color);return R.alpha*=P.alpha,R.color=P.toNumber(),R}function toFillStyle(_,T){if(_==null)return null;const R={},P=_;return isColorLike(_)?handleColorLike(R,_,T):isTexture(_)?handleTexture(R,_,T):isFillPattern(_)?handleFillPattern(R,_,T):isFillGradient(_)?handleFillGradient(R,_,T):P.fill&&isFillPattern(P.fill)?handleFillPattern(P,P.fill,T):P.fill&&isFillGradient(P.fill)?handleFillGradient(P,P.fill,T):handleFillObject(P,T)}function toStrokeStyle(_,T){const{width:R,alignment:P,miterLimit:O,cap:I,join:L,pixelLine:U,...G}=T,V=toFillStyle(_,G);return V?{width:R,alignment:P,miterLimit:O,cap:I,join:L,pixelLine:U,...V}:null}const tmpPoint=new Point,tempMatrix=new Matrix,_GraphicsContext=class Un extends EventEmitter{constructor(){super(...arguments),this.uid=uid("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new GraphicsPath,this._transform=new Matrix,this._fillStyle={...Un.defaultFillStyle},this._strokeStyle={...Un.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Bounds,this._boundsDirty=!0}clone(){const T=new Un;return T.batchMode=this.batchMode,T.instructions=this.instructions.slice(),T._activePath=this._activePath.clone(),T._transform=this._transform.clone(),T._fillStyle={...this._fillStyle},T._strokeStyle={...this._strokeStyle},T._stateStack=this._stateStack.slice(),T._bounds=this._bounds.clone(),T._boundsDirty=!0,T}get fillStyle(){return this._fillStyle}set fillStyle(T){this._fillStyle=toFillStyle(T,Un.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(T){this._strokeStyle=toStrokeStyle(T,Un.defaultStrokeStyle)}setFillStyle(T){return this._fillStyle=toFillStyle(T,Un.defaultFillStyle),this}setStrokeStyle(T){return this._strokeStyle=toFillStyle(T,Un.defaultStrokeStyle),this}texture(T,R,P,O,I,L){return this.instructions.push({action:"texture",data:{image:T,dx:P||0,dy:O||0,dw:I||T.frame.width,dh:L||T.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:R?Color$1.shared.setValue(R).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new GraphicsPath,this}fill(T,R){let P;const O=this.instructions[this.instructions.length-1];return this._tick===0&&O?.action==="stroke"?P=O.data.path:P=this._activePath.clone(),P?(T!=null&&(R!==void 0&&typeof T=="number"&&(deprecation(v8_0_0,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),T={color:T,alpha:R}),this._fillStyle=toFillStyle(T,Un.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:P}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:T,y:R}=this._activePath.getLastPoint(Point.shared);this._activePath.clear(),this._activePath.moveTo(T,R)}stroke(T){let R;const P=this.instructions[this.instructions.length-1];return this._tick===0&&P?.action==="fill"?R=P.data.path:R=this._activePath.clone(),R?(T!=null&&(this._strokeStyle=toStrokeStyle(T,Un.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:R}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let T=0;T<2;T++){const R=this.instructions[this.instructions.length-1-T],P=this._activePath.clone();if(R&&(R.action==="stroke"||R.action==="fill"))if(R.data.hole)R.data.hole.addPath(P);else{R.data.hole=P;break}}return this._initNextPathLocation(),this}arc(T,R,P,O,I,L){this._tick++;const U=this._transform;return this._activePath.arc(U.a*T+U.c*R+U.tx,U.b*T+U.d*R+U.ty,P,O,I,L),this}arcTo(T,R,P,O,I){this._tick++;const L=this._transform;return this._activePath.arcTo(L.a*T+L.c*R+L.tx,L.b*T+L.d*R+L.ty,L.a*P+L.c*O+L.tx,L.b*P+L.d*O+L.ty,I),this}arcToSvg(T,R,P,O,I,L,U){this._tick++;const G=this._transform;return this._activePath.arcToSvg(T,R,P,O,I,G.a*L+G.c*U+G.tx,G.b*L+G.d*U+G.ty),this}bezierCurveTo(T,R,P,O,I,L,U){this._tick++;const G=this._transform;return this._activePath.bezierCurveTo(G.a*T+G.c*R+G.tx,G.b*T+G.d*R+G.ty,G.a*P+G.c*O+G.tx,G.b*P+G.d*O+G.ty,G.a*I+G.c*L+G.tx,G.b*I+G.d*L+G.ty,U),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(T,R,P,O){return this._tick++,this._activePath.ellipse(T,R,P,O,this._transform.clone()),this}circle(T,R,P){return this._tick++,this._activePath.circle(T,R,P,this._transform.clone()),this}path(T){return this._tick++,this._activePath.addPath(T,this._transform.clone()),this}lineTo(T,R){this._tick++;const P=this._transform;return this._activePath.lineTo(P.a*T+P.c*R+P.tx,P.b*T+P.d*R+P.ty),this}moveTo(T,R){this._tick++;const P=this._transform,O=this._activePath.instructions,I=P.a*T+P.c*R+P.tx,L=P.b*T+P.d*R+P.ty;return O.length===1&&O[0].action==="moveTo"?(O[0].data[0]=I,O[0].data[1]=L,this):(this._activePath.moveTo(I,L),this)}quadraticCurveTo(T,R,P,O,I){this._tick++;const L=this._transform;return this._activePath.quadraticCurveTo(L.a*T+L.c*R+L.tx,L.b*T+L.d*R+L.ty,L.a*P+L.c*O+L.tx,L.b*P+L.d*O+L.ty,I),this}rect(T,R,P,O){return this._tick++,this._activePath.rect(T,R,P,O,this._transform.clone()),this}roundRect(T,R,P,O,I){return this._tick++,this._activePath.roundRect(T,R,P,O,I,this._transform.clone()),this}poly(T,R){return this._tick++,this._activePath.poly(T,R,this._transform.clone()),this}regularPoly(T,R,P,O,I=0,L){return this._tick++,this._activePath.regularPoly(T,R,P,O,I,L),this}roundPoly(T,R,P,O,I,L){return this._tick++,this._activePath.roundPoly(T,R,P,O,I,L),this}roundShape(T,R,P,O){return this._tick++,this._activePath.roundShape(T,R,P,O),this}filletRect(T,R,P,O,I){return this._tick++,this._activePath.filletRect(T,R,P,O,I),this}chamferRect(T,R,P,O,I,L){return this._tick++,this._activePath.chamferRect(T,R,P,O,I,L),this}star(T,R,P,O,I=0,L=0){return this._tick++,this._activePath.star(T,R,P,O,I,L,this._transform.clone()),this}svg(T){return this._tick++,SVGParser(T,this),this}restore(){const T=this._stateStack.pop();return T&&(this._transform=T.transform,this._fillStyle=T.fillStyle,this._strokeStyle=T.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(T){return this._transform.rotate(T),this}scale(T,R=T){return this._transform.scale(T,R),this}setTransform(T,R,P,O,I,L){return T instanceof Matrix?(this._transform.set(T.a,T.b,T.c,T.d,T.tx,T.ty),this):(this._transform.set(T,R,P,O,I,L),this)}transform(T,R,P,O,I,L){return T instanceof Matrix?(this._transform.append(T),this):(tempMatrix.set(T,R,P,O,I,L),this._transform.append(tempMatrix),this)}translate(T,R=T){return this._transform.translate(T,R),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const T=this._bounds;T.clear();for(let R=0;R<this.instructions.length;R++){const P=this.instructions[R],O=P.action;if(O==="fill"){const I=P.data;T.addBounds(I.path.bounds)}else if(O==="texture"){const I=P.data;T.addFrame(I.dx,I.dy,I.dx+I.dw,I.dy+I.dh,I.transform)}if(O==="stroke"){const I=P.data,L=I.style.alignment,U=I.style.width*(1-L),G=I.path.bounds;T.addFrame(G.minX-U,G.minY-U,G.maxX+U,G.maxY+U)}}return T}containsPoint(T){if(!this.bounds.containsPoint(T.x,T.y))return!1;const R=this.instructions;let P=!1;for(let O=0;O<R.length;O++){const I=R[O],L=I.data,U=L.path;if(!I.action||!U)continue;const G=L.style,V=U.shapePath.shapePrimitives;for(let Z=0;Z<V.length;Z++){const Y=V[Z].shape;if(!G||!Y)continue;const W=V[Z].transform,J=W?W.applyInverse(T,tmpPoint):T;if(I.action==="fill")P=Y.contains(J.x,J.y);else{const te=G;P=Y.strokeContains(J.x,J.y,te.width,te.alignment)}const ee=L.hole;if(ee){const te=ee.shapePath?.shapePrimitives;if(te)for(let ie=0;ie<te.length;ie++)te[ie].shape.contains(J.x,J.y)&&(P=!1)}if(P)return!0}}return P}destroy(T=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof T=="boolean"?T:T?.texture){const P=typeof T=="boolean"?T:T?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(P)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(P))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};_GraphicsContext.defaultFillStyle={color:16777215,alpha:1,texture:Texture.WHITE,matrix:null,fill:null,textureSpace:"local"};_GraphicsContext.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Texture.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let GraphicsContext=_GraphicsContext;const _TextStyle=class Li extends EventEmitter{constructor(T={}){super(),this.uid=uid("textStyle"),this._tick=0,convertV7Tov8Style(T);const R={...Li.defaultTextStyle,...T};for(const P in R){const O=P;this[O]=R[P]}this.update(),this._tick=0}get align(){return this._align}set align(T){this._align!==T&&(this._align=T,this.update())}get breakWords(){return this._breakWords}set breakWords(T){this._breakWords!==T&&(this._breakWords=T,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(T){this._dropShadow!==T&&(T!==null&&typeof T=="object"?this._dropShadow=this._createProxy({...Li.defaultDropShadow,...T}):this._dropShadow=T?this._createProxy({...Li.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(T){this._fontFamily!==T&&(this._fontFamily=T,this.update())}get fontSize(){return this._fontSize}set fontSize(T){this._fontSize!==T&&(typeof T=="string"?this._fontSize=parseInt(T,10):this._fontSize=T,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(T){this._fontStyle!==T&&(this._fontStyle=T.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(T){this._fontVariant!==T&&(this._fontVariant=T,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(T){this._fontWeight!==T&&(this._fontWeight=T,this.update())}get leading(){return this._leading}set leading(T){this._leading!==T&&(this._leading=T,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(T){this._letterSpacing!==T&&(this._letterSpacing=T,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(T){this._lineHeight!==T&&(this._lineHeight=T,this.update())}get padding(){return this._padding}set padding(T){this._padding!==T&&(this._padding=T,this.update())}get filters(){return this._filters}set filters(T){this._filters!==T&&(this._filters=Object.freeze(T),this.update())}get trim(){return this._trim}set trim(T){this._trim!==T&&(this._trim=T,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(T){this._textBaseline!==T&&(this._textBaseline=T,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(T){this._whiteSpace!==T&&(this._whiteSpace=T,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(T){this._wordWrap!==T&&(this._wordWrap=T,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(T){this._wordWrapWidth!==T&&(this._wordWrapWidth=T,this.update())}get fill(){return this._originalFill}set fill(T){T!==this._originalFill&&(this._originalFill=T,this._isFillStyle(T)&&(this._originalFill=this._createProxy({...GraphicsContext.defaultFillStyle,...T},()=>{this._fill=toFillStyle({...this._originalFill},GraphicsContext.defaultFillStyle)})),this._fill=toFillStyle(T===0?"black":T,GraphicsContext.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(T){T!==this._originalStroke&&(this._originalStroke=T,this._isFillStyle(T)&&(this._originalStroke=this._createProxy({...GraphicsContext.defaultStrokeStyle,...T},()=>{this._stroke=toStrokeStyle({...this._originalStroke},GraphicsContext.defaultStrokeStyle)})),this._stroke=toStrokeStyle(T,GraphicsContext.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const T=Li.defaultTextStyle;for(const R in T)this[R]=T[R]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new Li({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let T=0;if(this._filters)for(let R=0;R<this._filters.length;R++)T+=this._filters[R].padding;return Math.max(this._padding,T)}destroy(T=!1){if(this.removeAllListeners(),typeof T=="boolean"?T:T?.texture){const P=typeof T=="boolean"?T:T?.textureSource;this._fill?.texture&&this._fill.texture.destroy(P),this._originalFill?.texture&&this._originalFill.texture.destroy(P),this._stroke?.texture&&this._stroke.texture.destroy(P),this._originalStroke?.texture&&this._originalStroke.texture.destroy(P)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(T,R){return new Proxy(T,{set:(P,O,I)=>(P[O]===I||(P[O]=I,R?.(O,I),this.update()),!0)})}_isFillStyle(T){return(T??null)!==null&&!(Color$1.isColorLike(T)||T instanceof FillGradient||T instanceof FillPattern)}};_TextStyle.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};_TextStyle.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let TextStyle=_TextStyle;function convertV7Tov8Style(_){const T=_;if(typeof T.dropShadow=="boolean"&&T.dropShadow){const R=TextStyle.defaultDropShadow;_.dropShadow={alpha:T.dropShadowAlpha??R.alpha,angle:T.dropShadowAngle??R.angle,blur:T.dropShadowBlur??R.blur,color:T.dropShadowColor??R.color,distance:T.dropShadowDistance??R.distance}}if(T.strokeThickness!==void 0){deprecation(v8_0_0,"strokeThickness is now a part of stroke");const R=T.stroke;let P={};if(Color$1.isColorLike(R))P.color=R;else if(R instanceof FillGradient||R instanceof FillPattern)P.fill=R;else if(Object.hasOwnProperty.call(R,"color")||Object.hasOwnProperty.call(R,"fill"))P=R;else throw new Error("Invalid stroke value.");_.stroke={...P,width:T.strokeThickness}}if(Array.isArray(T.fillGradientStops)){if(deprecation(v8_0_0,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(T.fill)||T.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");T.fill.length!==T.fillGradientStops.length&&warn$1("The number of fill colors must match the number of fill gradient stops.");const R=new FillGradient({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),P=T.fillGradientStops.slice(),O=T.fill.map(I=>Color$1.shared.setValue(I).toNumber());P.forEach((I,L)=>{R.addColorStop(I,O[L])}),_.fill={fill:R}}}class CanvasPoolClass{constructor(T){this._canvasPool=Object.create(null),this.canvasOptions=T||{},this.enableFullScreen=!1}_createCanvasAndContext(T,R){const P=DOMAdapter.get().createCanvas();P.width=T,P.height=R;const O=P.getContext("2d");return{canvas:P,context:O}}getOptimalCanvasAndContext(T,R,P=1){T=Math.ceil(T*P-1e-6),R=Math.ceil(R*P-1e-6),T=nextPow2(T),R=nextPow2(R);const O=(T<<17)+(R<<1);this._canvasPool[O]||(this._canvasPool[O]=[]);let I=this._canvasPool[O].pop();return I||(I=this._createCanvasAndContext(T,R)),I}returnCanvasAndContext(T){const R=T.canvas,{width:P,height:O}=R,I=(P<<17)+(O<<1);T.context.resetTransform(),T.context.clearRect(0,0,P,O),this._canvasPool[I].push(T)}clear(){this._canvasPool={}}}const CanvasPool=new CanvasPoolClass;GlobalResourceRegistry.register(CanvasPool);const PRECISION=1e5;function getCanvasFillStyle(_,T,R,P=0){if(_.texture===Texture.WHITE&&!_.fill)return Color$1.shared.setValue(_.color).setAlpha(_.alpha??1).toHexa();if(_.fill){if(_.fill instanceof FillPattern){const O=_.fill,I=T.createPattern(O.texture.source.resource,"repeat"),L=O.transform.copyTo(Matrix.shared);return L.scale(O.texture.frame.width,O.texture.frame.height),I.setTransform(L),I}else if(_.fill instanceof FillGradient){const O=_.fill,I=O.type==="linear",L=O.textureSpace==="local";let U=1,G=1;L&&R&&(U=R.width+P,G=R.height+P);let V,Z=!1;if(I){const{start:Y,end:W}=O;V=T.createLinearGradient(Y.x*U,Y.y*G,W.x*U,W.y*G),Z=Math.abs(W.x-Y.x)<Math.abs((W.y-Y.y)*.1)}else{const{center:Y,innerRadius:W,outerCenter:J,outerRadius:ee}=O;V=T.createRadialGradient(Y.x*U,Y.y*G,W*U,J.x*U,J.y*G,ee*U)}if(Z&&L&&R){const Y=R.lineHeight/G;for(let W=0;W<R.lines.length;W++){const J=(W*R.lineHeight+P/2)/G;O.colorStops.forEach(ee=>{const te=J+ee.offset*Y;V.addColorStop(Math.floor(te*PRECISION)/PRECISION,Color$1.shared.setValue(ee.color).toHex())})}}else O.colorStops.forEach(Y=>{V.addColorStop(Y.offset,Color$1.shared.setValue(Y.color).toHex())});return V}}else{const O=T.createPattern(_.texture.source.resource,"repeat"),I=_.matrix.copyTo(Matrix.shared);return I.scale(_.texture.frame.width,_.texture.frame.height),O.setTransform(I),O}return warn$1("FillStyle not recognised",_),"red"}class Graphics extends ViewContainer{constructor(T){T instanceof GraphicsContext&&(T={context:T});const{context:R,roundPixels:P,...O}=T||{};super({label:"Graphics",...O}),this.renderPipeId="graphics",R?this._context=R:this._context=this._ownedContext=new GraphicsContext,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=P??!1}set context(T){T!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=T,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(T){return this._context.containsPoint(T)}destroy(T){this._ownedContext&&!T?this._ownedContext.destroy(T):(T===!0||T?.context===!0)&&this._context.destroy(T),this._ownedContext=null,this._context=null,super.destroy(T)}_callContextMethod(T,R){return this.context[T](...R),this}setFillStyle(...T){return this._callContextMethod("setFillStyle",T)}setStrokeStyle(...T){return this._callContextMethod("setStrokeStyle",T)}fill(...T){return this._callContextMethod("fill",T)}stroke(...T){return this._callContextMethod("stroke",T)}texture(...T){return this._callContextMethod("texture",T)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...T){return this._callContextMethod("arc",T)}arcTo(...T){return this._callContextMethod("arcTo",T)}arcToSvg(...T){return this._callContextMethod("arcToSvg",T)}bezierCurveTo(...T){return this._callContextMethod("bezierCurveTo",T)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...T){return this._callContextMethod("ellipse",T)}circle(...T){return this._callContextMethod("circle",T)}path(...T){return this._callContextMethod("path",T)}lineTo(...T){return this._callContextMethod("lineTo",T)}moveTo(...T){return this._callContextMethod("moveTo",T)}quadraticCurveTo(...T){return this._callContextMethod("quadraticCurveTo",T)}rect(...T){return this._callContextMethod("rect",T)}roundRect(...T){return this._callContextMethod("roundRect",T)}poly(...T){return this._callContextMethod("poly",T)}regularPoly(...T){return this._callContextMethod("regularPoly",T)}roundPoly(...T){return this._callContextMethod("roundPoly",T)}roundShape(...T){return this._callContextMethod("roundShape",T)}filletRect(...T){return this._callContextMethod("filletRect",T)}chamferRect(...T){return this._callContextMethod("chamferRect",T)}star(...T){return this._callContextMethod("star",T)}svg(...T){return this._callContextMethod("svg",T)}restore(...T){return this._callContextMethod("restore",T)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...T){return this._callContextMethod("rotate",T)}scaleTransform(...T){return this._callContextMethod("scale",T)}setTransform(...T){return this._callContextMethod("setTransform",T)}transform(...T){return this._callContextMethod("transform",T)}translateTransform(...T){return this._callContextMethod("translate",T)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(T){this._context.fillStyle=T}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(T){this._context.strokeStyle=T}clone(T=!1){return T?new Graphics(this._context.clone()):(this._ownedContext=null,new Graphics(this._context))}lineStyle(T,R,P){deprecation(v8_0_0,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const O={};return T&&(O.width=T),R&&(O.color=R),P&&(O.alpha=P),this.context.strokeStyle=O,this}beginFill(T,R){deprecation(v8_0_0,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const P={};return T!==void 0&&(P.color=T),R!==void 0&&(P.alpha=R),this.context.fillStyle=P,this}endFill(){deprecation(v8_0_0,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const T=this.context.strokeStyle;return(T.width!==GraphicsContext.defaultStrokeStyle.width||T.color!==GraphicsContext.defaultStrokeStyle.color||T.alpha!==GraphicsContext.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...T){return deprecation(v8_0_0,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",T)}drawEllipse(...T){return deprecation(v8_0_0,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",T)}drawPolygon(...T){return deprecation(v8_0_0,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",T)}drawRect(...T){return deprecation(v8_0_0,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",T)}drawRoundedRect(...T){return deprecation(v8_0_0,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",T)}drawStar(...T){return deprecation(v8_0_0,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",T)}}class AbstractText extends ViewContainer{constructor(T,R){const{text:P,resolution:O,style:I,anchor:L,width:U,height:G,roundPixels:V,...Z}=T;super({...Z}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=R,this.text=P??"",this.style=I,this.resolution=O??null,this.allowChildren=!1,this._anchor=new ObservablePoint({_onUpdate:()=>{this.onViewUpdate()}}),L&&(this.anchor=L),this.roundPixels=V??!1,U!==void 0&&(this.width=U),G!==void 0&&(this.height=G)}get anchor(){return this._anchor}set anchor(T){typeof T=="number"?this._anchor.set(T):this._anchor.copyFrom(T)}set text(T){T=T.toString(),this._text!==T&&(this._text=T,this.onViewUpdate())}get text(){return this._text}set resolution(T){this._autoResolution=T===null,this._resolution=T,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(T){T||(T={}),this._style?.off("update",this.onViewUpdate,this),T instanceof this._styleClass?this._style=T:this._style=new this._styleClass(T),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(T){this._setWidth(T,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(T){this._setHeight(T,this.bounds.height)}getSize(T){return T||(T={}),T.width=Math.abs(this.scale.x)*this.bounds.width,T.height=Math.abs(this.scale.y)*this.bounds.height,T}setSize(T,R){typeof T=="object"?(R=T.height??T.width,T=T.width):R??(R=T),T!==void 0&&this._setWidth(T,this.bounds.width),R!==void 0&&this._setHeight(R,this.bounds.height)}containsPoint(T){const R=this.bounds.width,P=this.bounds.height,O=-R*this.anchor.x;let I=0;return T.x>=O&&T.x<=O+R&&(I=-P*this.anchor.y,T.y>=I&&T.y<=I+P)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(T=!1){super.destroy(T),this.owner=null,this._bounds=null,this._anchor=null,(typeof T=="boolean"?T:T?.style)&&this._style.destroy(T),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function ensureTextOptions(_,T){let R=_[0]??{};return(typeof R=="string"||_[1])&&(deprecation(v8_0_0,`use new ${T}({ text: "hi!", style }) instead`),R={text:R,style:_[1]}),R}let _internalCanvas=null,_internalContext=null;function ensureInternalCanvas(_,T){_internalCanvas||(_internalCanvas=DOMAdapter.get().createCanvas(256,128),_internalContext=_internalCanvas.getContext("2d",{willReadFrequently:!0}),_internalContext.globalCompositeOperation="copy",_internalContext.globalAlpha=1),(_internalCanvas.width<_||_internalCanvas.height<T)&&(_internalCanvas.width=nextPow2(_),_internalCanvas.height=nextPow2(T))}function checkRow(_,T,R){for(let P=0,O=4*R*T;P<T;++P,O+=4)if(_[O+3]!==0)return!1;return!0}function checkColumn(_,T,R,P,O){const I=4*T;for(let L=P,U=P*I+4*R;L<=O;++L,U+=I)if(_[U+3]!==0)return!1;return!0}function getCanvasBoundingBox(..._){let T=_[0];T.canvas||(T={canvas:_[0],resolution:_[1]});const{canvas:R}=T,P=Math.min(T.resolution??1,1),O=T.width??R.width,I=T.height??R.height;let L=T.output;if(ensureInternalCanvas(O,I),!_internalContext)throw new TypeError("Failed to get canvas 2D context");_internalContext.drawImage(R,0,0,O,I,0,0,O*P,I*P);const G=_internalContext.getImageData(0,0,O,I).data;let V=0,Z=0,Y=O-1,W=I-1;for(;Z<I&&checkRow(G,O,Z);)++Z;if(Z===I)return Rectangle.EMPTY;for(;checkRow(G,O,W);)--W;for(;checkColumn(G,O,V,Z,W);)++V;for(;checkColumn(G,O,Y,Z,W);)--Y;return++Y,++W,_internalContext.globalCompositeOperation="source-over",_internalContext.strokeRect(V,Z,Y-V,W-Z),_internalContext.globalCompositeOperation="copy",L??(L=new Rectangle),L.set(V/P,Z/P,(Y-V)/P,(W-Z)/P),L}const tempRect=new Rectangle;class CanvasTextGeneratorClass{getCanvasAndContext(T){const{text:R,style:P,resolution:O=1}=T,I=P._getFinalPadding(),L=CanvasTextMetrics.measureText(R||" ",P),U=Math.ceil(Math.ceil(Math.max(1,L.width)+I*2)*O),G=Math.ceil(Math.ceil(Math.max(1,L.height)+I*2)*O),V=CanvasPool.getOptimalCanvasAndContext(U,G);this._renderTextToCanvas(R,P,I,O,V);const Z=P.trim?getCanvasBoundingBox({canvas:V.canvas,width:U,height:G,resolution:1,output:tempRect}):tempRect.set(0,0,U,G);return{canvasAndContext:V,frame:Z}}returnCanvasAndContext(T){CanvasPool.returnCanvasAndContext(T)}_renderTextToCanvas(T,R,P,O,I){const{canvas:L,context:U}=I,G=fontStringFromTextStyle(R),V=CanvasTextMetrics.measureText(T||" ",R),Z=V.lines,Y=V.lineHeight,W=V.lineWidths,J=V.maxLineWidth,ee=V.fontProperties,te=L.height;if(U.resetTransform(),U.scale(O,O),U.textBaseline=R.textBaseline,R._stroke?.width){const ce=R._stroke;U.lineWidth=ce.width,U.miterLimit=ce.miterLimit,U.lineJoin=ce.join,U.lineCap=ce.cap}U.font=G;let ie,oe;const ae=R.dropShadow?2:1;for(let ce=0;ce<ae;++ce){const le=R.dropShadow&&ce===0,he=le?Math.ceil(Math.max(1,te)+P*2):0,me=he*O;if(le){U.fillStyle="black",U.strokeStyle="black";const pe=R.dropShadow,ge=pe.color,_e=pe.alpha;U.shadowColor=Color$1.shared.setValue(ge).setAlpha(_e).toRgbaString();const we=pe.blur*O,be=pe.distance*O;U.shadowBlur=we,U.shadowOffsetX=Math.cos(pe.angle)*be,U.shadowOffsetY=Math.sin(pe.angle)*be+me}else{if(U.fillStyle=R._fill?getCanvasFillStyle(R._fill,U,V,P*2):null,R._stroke?.width){const pe=R._stroke.width*.5+P*2;U.strokeStyle=getCanvasFillStyle(R._stroke,U,V,pe)}U.shadowColor="black"}let fe=(Y-ee.fontSize)/2;Y-ee.fontSize<0&&(fe=0);const ue=R._stroke?.width??0;for(let pe=0;pe<Z.length;pe++)ie=ue/2,oe=ue/2+pe*Y+ee.ascent+fe,R.align==="right"?ie+=J-W[pe]:R.align==="center"&&(ie+=(J-W[pe])/2),R._stroke?.width&&this._drawLetterSpacing(Z[pe],R,I,ie+P,oe+P-he,!0),R._fill!==void 0&&this._drawLetterSpacing(Z[pe],R,I,ie+P,oe+P-he)}}_drawLetterSpacing(T,R,P,O,I,L=!1){const{context:U}=P,G=R.letterSpacing;let V=!1;if(CanvasTextMetrics.experimentalLetterSpacingSupported&&(CanvasTextMetrics.experimentalLetterSpacing?(U.letterSpacing=`${G}px`,U.textLetterSpacing=`${G}px`,V=!0):(U.letterSpacing="0px",U.textLetterSpacing="0px")),G===0||V){L?U.strokeText(T,O,I):U.fillText(T,O,I);return}let Z=O;const Y=CanvasTextMetrics.graphemeSegmenter(T);let W=U.measureText(T).width,J=0;for(let ee=0;ee<Y.length;++ee){const te=Y[ee];L?U.strokeText(te,Z,I):U.fillText(te,Z,I);let ie="";for(let oe=ee+1;oe<Y.length;++oe)ie+=Y[oe];J=U.measureText(ie).width,Z+=W-J+G,W=J}}}const CanvasTextGenerator=new CanvasTextGeneratorClass;let Text$1=class extends AbstractText{constructor(...T){const R=ensureTextOptions(T,"Text");super(R,TextStyle),this.renderPipeId="text",R.textureStyle&&(this.textureStyle=R.textureStyle instanceof TextureStyle?R.textureStyle:new TextureStyle(R.textureStyle))}updateBounds(){const T=this._bounds,R=this._anchor;let P=0,O=0;if(this._style.trim){const{frame:I,canvasAndContext:L}=CanvasTextGenerator.getCanvasAndContext({text:this.text,style:this._style,resolution:1});CanvasTextGenerator.returnCanvasAndContext(L),P=I.width,O=I.height}else{const I=CanvasTextMetrics.measureText(this._text,this._style);P=I.width,O=I.height}T.minX=-R._x*P,T.maxX=T.minX+P,T.minY=-R._y*O,T.maxY=T.minY+O}};extensions.add(browserExt,webworkerExt);class SimulationRenderer{app;mainContainer;cellsContainer;linksContainer;overlayContainer;uiContainer;isDark;showScaleBar;model=null;params=null;scale=1;centerX=0;centerY=0;constructor(T){this.isDark=T.isDark??!1,this.showScaleBar=T.showScaleBar??!0,this.app=new Application,this.linksContainer=new Container,this.cellsContainer=new Container,this.overlayContainer=new Container,this.mainContainer=new Container,this.uiContainer=new Container,this.mainContainer.addChild(this.linksContainer),this.mainContainer.addChild(this.cellsContainer),this.mainContainer.addChild(this.overlayContainer)}async init(T){const R=this.model?.renderer.getBackgroundColor(this.isDark)??16777215;await this.app.init({canvas:T,width:T.width,height:T.height,backgroundColor:R,antialias:!0,resolution:window.devicePixelRatio||1,autoDensity:!0,preserveDrawingBuffer:!0}),this.app.stage.addChild(this.mainContainer),this.app.stage.addChild(this.uiContainer)}setModel(T){this.model=T;const R=T.renderer.getBackgroundColor(this.isDark);this.app.renderer&&(this.app.renderer.background.color=R)}setParams(T){this.params=T,this.updateViewport()}setDarkMode(T){if(this.isDark=T,this.model&&this.app.renderer){const R=this.model.renderer.getBackgroundColor(T);this.app.renderer.background.color=R}}resize(T,R){this.app.renderer&&(this.app.renderer.resize(T,R),this.updateViewport())}updateViewport(){if(!this.model||!this.params||!this.app.renderer)return;const T=this.app.renderer.width,R=this.app.renderer.height,P=this.model.renderer.getBoundingBox(this.params,void 0),O=.1,I=(P.maxX-P.minX)*(1+2*O),L=(P.maxY-P.minY)*(1+2*O);this.centerX=(P.minX+P.maxX)/2,this.centerY=(P.minY+P.maxY)/2;const U=T/I,G=R/L;this.scale=Math.min(U,G),this.mainContainer.scale.set(this.scale,-this.scale),this.mainContainer.position.set(T/2-this.centerX*this.scale,R/2+this.centerY*this.scale)}render(T){if(!this.model||!this.params)return;this.cellsContainer.removeChildren(),this.linksContainer.removeChildren(),this.overlayContainer.removeChildren(),this.uiContainer.removeChildren();const R=new Graphics,P=new Graphics,O=new Graphics;this.cellsContainer.addChild(R),this.linksContainer.addChild(P),this.overlayContainer.addChild(O);const I={graphics:{cells:R,links:P,overlay:O},isDark:this.isDark,scale:this.scale};this.model.renderer.render(I,T,this.params),this.showScaleBar&&this.drawScaleBar()}drawScaleBar(){if(!this.app.renderer)return;const T=this.app.renderer.width,R=this.app.renderer.height,O=2*this.scale,I=20,L=T-I-O,U=R-I-10,G=this.isDark?11579600:6579300,V=this.isDark?11581695:5263520,Z=new Graphics;Z.moveTo(L,U),Z.lineTo(L+O,U),Z.stroke({color:G,alpha:1,width:2}),Z.moveTo(L,U-5),Z.lineTo(L,U+5),Z.moveTo(L+O,U-5),Z.lineTo(L+O,U+5),Z.stroke({color:G,alpha:1,width:2}),this.uiContainer.addChild(Z);const Y=new TextStyle({fontFamily:"monospace",fontSize:12,fill:V}),W=new Text$1({text:"10 m",style:Y});W.anchor.set(.5,0),W.position.set(L+O/2,U+8),this.uiContainer.addChild(W)}getApp(){return this.app}destroy(){this.app.destroy(!0)}}const SimulationCanvas=reactExports.forwardRef(({state:_,params:T,minHeight:R=350,aspectRatio:P=1,className:O,style:I},L)=>{const U=reactExports.useRef(null),G=reactExports.useRef(null),V=reactExports.useRef(null),Z=reactExports.useRef(null),Y=reactExports.useRef([]),[W,J]=reactExports.useState(!1),[ee,te]=reactExports.useState({width:800,height:R}),{isDark:ie}=useTheme(),{currentModel:oe}=useModel();reactExports.useImperativeHandle(L,()=>({getScreenshot:()=>G.current?G.current.toDataURL("image/png"):null,startRecording:()=>{if(!G.current||Z.current)return;const ce=G.current.captureStream(30),le=MediaRecorder.isTypeSupported("video/webm;codecs=vp9")?"video/webm;codecs=vp9":"video/webm",he=new MediaRecorder(ce,{mimeType:le});Y.current=[],he.ondataavailable=me=>{me.data.size>0&&Y.current.push(me.data)},Z.current=he,he.start(100)},stopRecording:()=>new Promise(ce=>{const le=Z.current;if(!le){ce(null);return}le.onstop=()=>{const he=new Blob(Y.current,{type:"video/webm"});Y.current=[],Z.current=null,ce(he)},le.stop()}),isRecording:()=>Z.current?.state==="recording"}),[]);const ae=reactExports.useCallback(()=>{if(U.current){const ce=U.current.getBoundingClientRect(),le=Math.floor(ce.width),he=Math.floor(le/P),me=Math.max(R,he);le>0&&me>0&&te({width:le,height:me})}},[R,P]);return reactExports.useEffect(()=>{const ce=U.current;if(!ce)return;ae();const le=new ResizeObserver(()=>{ae()});return le.observe(ce),window.addEventListener("resize",ae),()=>{le.disconnect(),window.removeEventListener("resize",ae)}},[ae]),reactExports.useEffect(()=>{const ce=G.current;if(!ce)return;let le=!0;return(async()=>{const me=new SimulationRenderer({width:ee.width,height:ee.height,isDark:ie});await me.init(ce),le&&(V.current=me,me.setModel(oe),me.setParams(T),J(!0))})(),()=>{le=!1,V.current&&(V.current.destroy(),V.current=null),J(!1)}},[]),reactExports.useEffect(()=>{V.current&&W&&(V.current.setParams(T),_&&V.current.render(_))},[T,W,_]),reactExports.useEffect(()=>{V.current&&W&&ee.width>0&&ee.height>0&&(V.current.resize(ee.width,ee.height),_&&V.current.render(_))},[ee.width,ee.height,W,_]),reactExports.useEffect(()=>{V.current&&_&&W&&V.current.render(_)},[_,W]),reactExports.useEffect(()=>{V.current&&W&&(V.current.setDarkMode(ie),_&&V.current.render(_))},[ie,W,_]),reactExports.useEffect(()=>{V.current&&W&&(V.current.setModel(oe),V.current.setParams(T),_&&V.current.render(_))},[oe,W,_,T]),jsxRuntimeExports.jsx("div",{ref:U,className:O,style:{width:"100%",minHeight:`${R}px`,...I},children:jsxRuntimeExports.jsx("canvas",{ref:G,width:ee.width,height:ee.height,style:{display:"block",width:"100%",height:"100%"}})})});SimulationCanvas.displayName="SimulationCanvas";var PAGE_KEYS=["PageUp","PageDown"],ARROW_KEYS=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],BACK_KEYS={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},SLIDER_NAME="Slider",[Collection$2,useCollection$2,createCollectionScope$2]=createCollection(SLIDER_NAME),[createSliderContext]=createContextScope$1(SLIDER_NAME,[createCollectionScope$2]),[SliderProvider,useSliderContext]=createSliderContext(SLIDER_NAME),Slider$1=reactExports.forwardRef((_,T)=>{const{name:R,min:P=0,max:O=100,step:I=1,orientation:L="horizontal",disabled:U=!1,minStepsBetweenThumbs:G=0,defaultValue:V=[P],value:Z,onValueChange:Y=()=>{},onValueCommit:W=()=>{},inverted:J=!1,form:ee,...te}=_,ie=reactExports.useRef(new Set),oe=reactExports.useRef(0),ce=L==="horizontal"?SliderHorizontal:SliderVertical,[le=[],he]=useControllableState({prop:Z,defaultProp:V,onChange:_e=>{[...ie.current][oe.current]?.focus(),Y(_e)}}),me=reactExports.useRef(le);function fe(_e){const we=getClosestValueIndex(le,_e);ge(_e,we)}function ue(_e){ge(_e,oe.current)}function pe(){const _e=me.current[oe.current];le[oe.current]!==_e&&W(le)}function ge(_e,we,{commit:be}={commit:!1}){const Ce=getDecimalCount(I),Ee=roundValue(Math.round((_e-P)/I)*I+P,Ce),ye=clamp$1(Ee,[P,O]);he((Se=[])=>{const Te=getNextSortedValues(Se,ye,we);if(hasMinStepsBetweenValues(Te,G*I)){oe.current=Te.indexOf(ye);const Ae=String(Te)!==String(Se);return Ae&&be&&W(Te),Ae?Te:Se}else return Se})}return jsxRuntimeExports.jsx(SliderProvider,{scope:_.__scopeSlider,name:R,disabled:U,min:P,max:O,valueIndexToChangeRef:oe,thumbs:ie.current,values:le,orientation:L,form:ee,children:jsxRuntimeExports.jsx(Collection$2.Provider,{scope:_.__scopeSlider,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:_.__scopeSlider,children:jsxRuntimeExports.jsx(ce,{"aria-disabled":U,"data-disabled":U?"":void 0,...te,ref:T,onPointerDown:composeEventHandlers(te.onPointerDown,()=>{U||(me.current=le)}),min:P,max:O,inverted:J,onSlideStart:U?void 0:fe,onSlideMove:U?void 0:ue,onSlideEnd:U?void 0:pe,onHomeKeyDown:()=>!U&&ge(P,0,{commit:!0}),onEndKeyDown:()=>!U&&ge(O,le.length-1,{commit:!0}),onStepKeyDown:({event:_e,direction:we})=>{if(!U){const Ee=PAGE_KEYS.includes(_e.key)||_e.shiftKey&&ARROW_KEYS.includes(_e.key)?10:1,ye=oe.current,Se=le[ye],Te=I*Ee*we;ge(Se+Te,ye,{commit:!0})}}})})})})});Slider$1.displayName=SLIDER_NAME;var[SliderOrientationProvider,useSliderOrientationContext]=createSliderContext(SLIDER_NAME,{startEdge:"left",endEdge:"right",size:"width",direction:1}),SliderHorizontal=reactExports.forwardRef((_,T)=>{const{min:R,max:P,dir:O,inverted:I,onSlideStart:L,onSlideMove:U,onSlideEnd:G,onStepKeyDown:V,...Z}=_,[Y,W]=reactExports.useState(null),J=useComposedRefs(T,ce=>W(ce)),ee=reactExports.useRef(void 0),te=useDirection(O),ie=te==="ltr",oe=ie&&!I||!ie&&I;function ae(ce){const le=ee.current||Y.getBoundingClientRect(),he=[0,le.width],fe=linearScale$1(he,oe?[R,P]:[P,R]);return ee.current=le,fe(ce-le.left)}return jsxRuntimeExports.jsx(SliderOrientationProvider,{scope:_.__scopeSlider,startEdge:oe?"left":"right",endEdge:oe?"right":"left",direction:oe?1:-1,size:"width",children:jsxRuntimeExports.jsx(SliderImpl,{dir:te,"data-orientation":"horizontal",...Z,ref:J,style:{...Z.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:ce=>{const le=ae(ce.clientX);L?.(le)},onSlideMove:ce=>{const le=ae(ce.clientX);U?.(le)},onSlideEnd:()=>{ee.current=void 0,G?.()},onStepKeyDown:ce=>{const he=BACK_KEYS[oe?"from-left":"from-right"].includes(ce.key);V?.({event:ce,direction:he?-1:1})}})})}),SliderVertical=reactExports.forwardRef((_,T)=>{const{min:R,max:P,inverted:O,onSlideStart:I,onSlideMove:L,onSlideEnd:U,onStepKeyDown:G,...V}=_,Z=reactExports.useRef(null),Y=useComposedRefs(T,Z),W=reactExports.useRef(void 0),J=!O;function ee(te){const ie=W.current||Z.current.getBoundingClientRect(),oe=[0,ie.height],ce=linearScale$1(oe,J?[P,R]:[R,P]);return W.current=ie,ce(te-ie.top)}return jsxRuntimeExports.jsx(SliderOrientationProvider,{scope:_.__scopeSlider,startEdge:J?"bottom":"top",endEdge:J?"top":"bottom",size:"height",direction:J?1:-1,children:jsxRuntimeExports.jsx(SliderImpl,{"data-orientation":"vertical",...V,ref:Y,style:{...V.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:te=>{const ie=ee(te.clientY);I?.(ie)},onSlideMove:te=>{const ie=ee(te.clientY);L?.(ie)},onSlideEnd:()=>{W.current=void 0,U?.()},onStepKeyDown:te=>{const oe=BACK_KEYS[J?"from-bottom":"from-top"].includes(te.key);G?.({event:te,direction:oe?-1:1})}})})}),SliderImpl=reactExports.forwardRef((_,T)=>{const{__scopeSlider:R,onSlideStart:P,onSlideMove:O,onSlideEnd:I,onHomeKeyDown:L,onEndKeyDown:U,onStepKeyDown:G,...V}=_,Z=useSliderContext(SLIDER_NAME,R);return jsxRuntimeExports.jsx(Primitive$2.span,{...V,ref:T,onKeyDown:composeEventHandlers(_.onKeyDown,Y=>{Y.key==="Home"?(L(Y),Y.preventDefault()):Y.key==="End"?(U(Y),Y.preventDefault()):PAGE_KEYS.concat(ARROW_KEYS).includes(Y.key)&&(G(Y),Y.preventDefault())}),onPointerDown:composeEventHandlers(_.onPointerDown,Y=>{const W=Y.target;W.setPointerCapture(Y.pointerId),Y.preventDefault(),Z.thumbs.has(W)?W.focus():P(Y)}),onPointerMove:composeEventHandlers(_.onPointerMove,Y=>{Y.target.hasPointerCapture(Y.pointerId)&&O(Y)}),onPointerUp:composeEventHandlers(_.onPointerUp,Y=>{const W=Y.target;W.hasPointerCapture(Y.pointerId)&&(W.releasePointerCapture(Y.pointerId),I(Y))})})}),TRACK_NAME="SliderTrack",SliderTrack=reactExports.forwardRef((_,T)=>{const{__scopeSlider:R,...P}=_,O=useSliderContext(TRACK_NAME,R);return jsxRuntimeExports.jsx(Primitive$2.span,{"data-disabled":O.disabled?"":void 0,"data-orientation":O.orientation,...P,ref:T})});SliderTrack.displayName=TRACK_NAME;var RANGE_NAME="SliderRange",SliderRange=reactExports.forwardRef((_,T)=>{const{__scopeSlider:R,...P}=_,O=useSliderContext(RANGE_NAME,R),I=useSliderOrientationContext(RANGE_NAME,R),L=reactExports.useRef(null),U=useComposedRefs(T,L),G=O.values.length,V=O.values.map(W=>convertValueToPercentage(W,O.min,O.max)),Z=G>1?Math.min(...V):0,Y=100-Math.max(...V);return jsxRuntimeExports.jsx(Primitive$2.span,{"data-orientation":O.orientation,"data-disabled":O.disabled?"":void 0,...P,ref:U,style:{..._.style,[I.startEdge]:Z+"%",[I.endEdge]:Y+"%"}})});SliderRange.displayName=RANGE_NAME;var THUMB_NAME$1="SliderThumb",SliderThumb=reactExports.forwardRef((_,T)=>{const R=useCollection$2(_.__scopeSlider),[P,O]=reactExports.useState(null),I=useComposedRefs(T,U=>O(U)),L=reactExports.useMemo(()=>P?R().findIndex(U=>U.ref.current===P):-1,[R,P]);return jsxRuntimeExports.jsx(SliderThumbImpl,{..._,ref:I,index:L})}),SliderThumbImpl=reactExports.forwardRef((_,T)=>{const{__scopeSlider:R,index:P,name:O,...I}=_,L=useSliderContext(THUMB_NAME$1,R),U=useSliderOrientationContext(THUMB_NAME$1,R),[G,V]=reactExports.useState(null),Z=useComposedRefs(T,ae=>V(ae)),Y=G?L.form||!!G.closest("form"):!0,W=useSize(G),J=L.values[P],ee=J===void 0?0:convertValueToPercentage(J,L.min,L.max),te=getLabel(P,L.values.length),ie=W?.[U.size],oe=ie?getThumbInBoundsOffset(ie,ee,U.direction):0;return reactExports.useEffect(()=>{if(G)return L.thumbs.add(G),()=>{L.thumbs.delete(G)}},[G,L.thumbs]),jsxRuntimeExports.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[U.startEdge]:`calc(${ee}% + ${oe}px)`},children:[jsxRuntimeExports.jsx(Collection$2.ItemSlot,{scope:_.__scopeSlider,children:jsxRuntimeExports.jsx(Primitive$2.span,{role:"slider","aria-label":_["aria-label"]||te,"aria-valuemin":L.min,"aria-valuenow":J,"aria-valuemax":L.max,"aria-orientation":L.orientation,"data-orientation":L.orientation,"data-disabled":L.disabled?"":void 0,tabIndex:L.disabled?void 0:0,...I,ref:Z,style:J===void 0?{display:"none"}:_.style,onFocus:composeEventHandlers(_.onFocus,()=>{L.valueIndexToChangeRef.current=P})})}),Y&&jsxRuntimeExports.jsx(SliderBubbleInput,{name:O??(L.name?L.name+(L.values.length>1?"[]":""):void 0),form:L.form,value:J},P)]})});SliderThumb.displayName=THUMB_NAME$1;var BUBBLE_INPUT_NAME="RadioBubbleInput",SliderBubbleInput=reactExports.forwardRef(({__scopeSlider:_,value:T,...R},P)=>{const O=reactExports.useRef(null),I=useComposedRefs(O,P),L=usePrevious(T);return reactExports.useEffect(()=>{const U=O.current;if(!U)return;const G=window.HTMLInputElement.prototype,Z=Object.getOwnPropertyDescriptor(G,"value").set;if(L!==T&&Z){const Y=new Event("input",{bubbles:!0});Z.call(U,T),U.dispatchEvent(Y)}},[L,T]),jsxRuntimeExports.jsx(Primitive$2.input,{style:{display:"none"},...R,ref:I,defaultValue:T})});SliderBubbleInput.displayName=BUBBLE_INPUT_NAME;function getNextSortedValues(_=[],T,R){const P=[..._];return P[R]=T,P.sort((O,I)=>O-I)}function convertValueToPercentage(_,T,R){const I=100/(R-T)*(_-T);return clamp$1(I,[0,100])}function getLabel(_,T){return T>2?`Value ${_+1} of ${T}`:T===2?["Minimum","Maximum"][_]:void 0}function getClosestValueIndex(_,T){if(_.length===1)return 0;const R=_.map(O=>Math.abs(O-T)),P=Math.min(...R);return R.indexOf(P)}function getThumbInBoundsOffset(_,T,R){const P=_/2,I=linearScale$1([0,50],[0,P]);return(P-I(T)*R)*R}function getStepsBetweenValues(_){return _.slice(0,-1).map((T,R)=>_[R+1]-T)}function hasMinStepsBetweenValues(_,T){if(T>0){const R=getStepsBetweenValues(_);return Math.min(...R)>=T}return!0}function linearScale$1(_,T){return R=>{if(_[0]===_[1]||T[0]===T[1])return T[0];const P=(T[1]-T[0])/(_[1]-_[0]);return T[0]+P*(R-_[0])}}function getDecimalCount(_){return(String(_).split(".")[1]||"").length}function roundValue(_,T){const R=Math.pow(10,T);return Math.round(_*R)/R}var Root$5=Slider$1,Track=SliderTrack,Range=SliderRange,Thumb=SliderThumb;const Slider=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsxs(Root$5,{ref:R,className:cn("relative flex w-full touch-none select-none items-center",_),...T,children:[jsxRuntimeExports.jsx(Track,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:jsxRuntimeExports.jsx(Range,{className:"absolute h-full bg-primary"})}),jsxRuntimeExports.jsx(Thumb,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Slider.displayName=Root$5.displayName;function SimulationControls({isRunning:_,time:T,endTime:R,maxSimulatedTime:P,isCatchingUp:O,onStart:I,onPause:L,onReset:U,onStep:G,onSeek:V,paramChangeBehavior:Z,onParamChangeBehaviorChange:Y,onSaveScreenshot:W,onSaveMovie:J,onExportCSV:ee,isRecording:te=!1}){const ie=R>0?P/R*100:0,oe=ae=>{const ce=ae[0];V(ce)};return jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap items-center",children:[_||O?jsxRuntimeExports.jsxs(Button,{onClick:L,variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(Pause,{className:"h-4 w-4 mr-1"}),"Pause"]}):jsxRuntimeExports.jsxs(Button,{onClick:I,size:"sm",children:[O?jsxRuntimeExports.jsx(LoaderCircle,{className:"h-4 w-4 mr-1 animate-spin"}):jsxRuntimeExports.jsx(Play,{className:"h-4 w-4 mr-1"}),"Start"]}),jsxRuntimeExports.jsxs(Button,{onClick:G,disabled:_||O,variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(SkipForward,{className:"h-4 w-4 mr-1"}),"Step"]}),jsxRuntimeExports.jsxs(Button,{onClick:U,variant:"outline",size:"sm",disabled:O,children:[jsxRuntimeExports.jsx(RotateCcw,{className:"h-4 w-4 mr-1"}),"Reset"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:"On param change:"}),jsxRuntimeExports.jsxs(Select,{value:Z,onValueChange:ae=>Y(ae),children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"h-7 w-28 text-xs",children:jsxRuntimeExports.jsx(SelectValue,{})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"run",children:"Run"}),jsxRuntimeExports.jsx(SelectItem,{value:"init",children:"Init"}),jsxRuntimeExports.jsx(SelectItem,{value:"step",children:"One step"})]})]})]}),jsxRuntimeExports.jsxs("span",{className:"ml-auto text-sm text-muted-foreground self-center",children:[T.toFixed(2),"h / ",R,"h"]})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 h-2 bg-muted/50 rounded-full pointer-events-none",style:{width:`${ie}%`}}),jsxRuntimeExports.jsx(Slider,{value:[T],min:0,max:R,step:R/1e3,onValueChange:oe,disabled:O,className:"cursor-pointer"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 flex-wrap items-center pt-1 border-t border-border/40",children:[W&&jsxRuntimeExports.jsxs(Button,{onClick:W,variant:"outline",size:"sm",className:"text-xs",children:[jsxRuntimeExports.jsx(Camera,{className:"h-3.5 w-3.5 mr-1"}),"Screenshot"]}),J&&jsxRuntimeExports.jsxs(Button,{onClick:J,variant:te?"destructive":"outline",size:"sm",className:"text-xs",children:[jsxRuntimeExports.jsx(Video,{className:"h-3.5 w-3.5 mr-1"}),te?"Stop Recording":"Record"]}),ee&&jsxRuntimeExports.jsxs(Button,{onClick:ee,variant:"outline",size:"sm",className:"text-xs",children:[jsxRuntimeExports.jsx(FileDown,{className:"h-3.5 w-3.5 mr-1"}),"Export CSV"]})]})]})}const Card=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx("div",{ref:R,className:cn("rounded-lg border bg-card text-card-foreground shadow-sm",_),...T}));Card.displayName="Card";const CardHeader=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx("div",{ref:R,className:cn("flex flex-col space-y-1.5 p-6",_),...T}));CardHeader.displayName="CardHeader";const CardTitle=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx("h3",{ref:R,className:cn("text-2xl font-semibold leading-none tracking-tight",_),...T}));CardTitle.displayName="CardTitle";const CardDescription=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx("p",{ref:R,className:cn("text-sm text-muted-foreground",_),...T}));CardDescription.displayName="CardDescription";const CardContent=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx("div",{ref:R,className:cn("p-6 pt-0",_),...T}));CardContent.displayName="CardContent";const CardFooter=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx("div",{ref:R,className:cn("flex items-center p-6 pt-0",_),...T}));CardFooter.displayName="CardFooter";var NODES$1=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive$1=NODES$1.reduce((_,T)=>{const R=createSlot$3(`Primitive.${T}`),P=reactExports.forwardRef((O,I)=>{const{asChild:L,...U}=O,G=L?R:T;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(G,{...U,ref:I})});return P.displayName=`Primitive.${T}`,{..._,[T]:P}},{}),NAME$1="Separator",DEFAULT_ORIENTATION="horizontal",ORIENTATIONS=["horizontal","vertical"],Separator$1=reactExports.forwardRef((_,T)=>{const{decorative:R,orientation:P=DEFAULT_ORIENTATION,...O}=_,I=isValidOrientation(P)?P:DEFAULT_ORIENTATION,U=R?{role:"none"}:{"aria-orientation":I==="vertical"?I:void 0,role:"separator"};return jsxRuntimeExports.jsx(Primitive$1.div,{"data-orientation":I,...U,...O,ref:T})});Separator$1.displayName=NAME$1;function isValidOrientation(_){return ORIENTATIONS.includes(_)}var Root$4=Separator$1;const Separator=reactExports.forwardRef(({className:_,orientation:T="horizontal",decorative:R=!0,...P},O)=>jsxRuntimeExports.jsx(Root$4,{ref:O,decorative:R,orientation:T,className:cn("shrink-0 bg-border",T==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",_),...P}));Separator.displayName=Root$4.displayName;class SimulationEngine{model;state;params;snapshots=[];onSnapshot;snapshotInterval;constructor(T){this.model=T.model,this.params=T.params,this.onSnapshot=T.onSnapshot,this.snapshotInterval=T.snapshotInterval??1,this.init()}init(){this.state=this.model.init(this.params),this.snapshots=[],this.recordSnapshot()}step(){let T=1;const R=this.params;R.general&&typeof R.general.dt=="number"&&(T=R.general.dt),this.state=this.model.step(this.state,T,this.params);const P=this.state;(typeof P.step_count=="number"?P.step_count:this.snapshots.length)%this.snapshotInterval===0&&this.recordSnapshot()}isComplete(){const T=this.params,R=this.state,P=R.t??R.time;return T.general&&typeof T.general.t_end=="number"&&typeof P=="number"?P>=T.general.t_end:!1}getState(){return this.state}getParams(){return this.params}resetWithParams(T){this.params=T,this.init()}recordSnapshot(){const T=this.model.getSnapshot(this.state);this.snapshots.push(T),this.onSnapshot&&this.onSnapshot(T)}getStats(){return this.model.computeStats(this.state,this.params)}}function cloneState(_){return typeof _=="object"&&_!==null?structuredClone(_):_}function getStateTime(_){return _?.t??_?.time??0}function useSimulation(_){const{model:T,params:R,autoInit:P=!0,paramChangeBehavior:O="init"}=_,[I,L]=reactExports.useState(R),[U,G]=reactExports.useState(null),[V,Z]=reactExports.useState(!1),[Y,W]=reactExports.useState(!1),[J,ee]=reactExports.useState(0),te=reactExports.useRef(null),ie=reactExports.useRef(null),oe=reactExports.useRef(!0),ae=reactExports.useRef([]),ce=reactExports.useRef(null);reactExports.useEffect(()=>{if(te.current=new SimulationEngine({model:T,params:R}),P){te.current.init();const we=te.current.getState(),be=cloneState(we);ae.current=[be],ee(0),G(be)}return()=>{ie.current&&cancelAnimationFrame(ie.current)}},[]),reactExports.useEffect(()=>{if(oe.current){oe.current=!1;return}L(R),Z(!1),W(!1),ce.current=null,te.current=new SimulationEngine({model:T,params:R});const we=te.current.getState(),be=cloneState(we);if(ae.current=[be],ee(0),G(be),O==="step"){te.current.step();const Ce=cloneState(te.current.getState());ae.current.push(Ce),ee(1),G(Ce)}else O==="run"&&Z(!0)},[T,R,O]),reactExports.useEffect(()=>{if(!(V||Y)||!te.current)return;let be=performance.now();const Ce=40,Ee=0,ye=Se=>{if(!te.current)return;if(Se-be>=(Y?Ee:Ce)){if(be=Se,Y&&ce.current!==null){const Be=ae.current;if((Be.length>0?getStateTime(Be[Be.length-1]):0)>=ce.current||te.current.isComplete()){const ze=ce.current;let qe=Be.length-1;for(let We=0;We<Be.length;We++)if(getStateTime(Be[We])>=ze){qe=We;break}ee(qe),G(Be[qe]),W(!1),ce.current=null;return}te.current.step();const Re=cloneState(te.current.getState());ae.current.push(Re);const Me=ae.current.length-1;ee(Me),G(Re)}else if(V){const Be=ae.current,ve=J+1;if(ve<Be.length)ee(ve),G(Be[ve]);else if(te.current.isComplete())Z(!1);else{te.current.step();const Re=cloneState(te.current.getState());ae.current.push(Re),ee(ae.current.length-1),G(Re)}}}ie.current=requestAnimationFrame(ye)};return ie.current=requestAnimationFrame(ye),()=>{ie.current&&cancelAnimationFrame(ie.current)}},[V,Y,J]);const le=reactExports.useCallback(()=>{W(!1),ce.current=null,Z(!0)},[]),he=reactExports.useCallback(()=>{Z(!1),W(!1),ce.current=null},[]),me=reactExports.useCallback(()=>{Z(!1),W(!1),ce.current=null;const we=ae.current;we.length>0&&(ee(0),G(we[0]))},[]),fe=reactExports.useCallback(()=>{if(!te.current)return;const we=ae.current,be=J+1;if(be<we.length)ee(be),G(we[be]);else if(!te.current.isComplete()){te.current.step();const Ce=cloneState(te.current.getState());ae.current.push(Ce),ee(ae.current.length-1),G(Ce)}},[J]),ue=reactExports.useCallback(we=>{const be=ae.current;if(be.length===0)return;const Ee=I?.general?.t_end??1/0;we=Math.max(0,Math.min(we,Ee));const ye=getStateTime(be[be.length-1]);if(we<=ye){let Se=0,Te=1/0;for(let Ae=0;Ae<be.length;Ae++){const Be=getStateTime(be[Ae]),ve=Math.abs(Be-we);if(ve<Te&&(Te=ve,Se=Ae),Be>we)break}Z(!1),W(!1),ce.current=null,ee(Se),G(be[Se])}else Z(!1),ce.current=we,W(!0)},[I]),pe=reactExports.useCallback(we=>{if(Z(!1),W(!1),ce.current=null,L(we),te.current){te.current.resetWithParams(we);const be=cloneState(te.current.getState());ae.current=[be],ee(0),G(be)}},[]),ge=ae.current,_e=ge.length>0?getStateTime(ge[ge.length-1]):0;return{state:U,params:I,isRunning:V,isComplete:te.current?.isComplete()??!1,time:U?.t??0,stepCount:U?.step_count??0,maxSimulatedTime:_e,isCatchingUp:Y,start:le,pause:he,reset:me,step:fe,seekTo:ue,setParams:pe,engine:te.current}}function formatTime(_){return _.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}function MessageLine({message:_}){const T={info:"text-muted-foreground",warning:"text-amber-600 dark:text-amber-400",error:"text-red-600 dark:text-red-400"}[_.type],R={info:"",warning:"[WARN] ",error:"[ERROR] "}[_.type];return jsxRuntimeExports.jsxs("div",{className:cn("font-mono text-xs leading-relaxed",T),children:[jsxRuntimeExports.jsxs("span",{className:"text-muted-foreground/60",children:["[",formatTime(_.timestamp),"]"]})," ",R,_.text]})}function SimulationTerminal(){const{messages:_}=useMessages(),T=reactExports.useRef(null);return reactExports.useEffect(()=>{T.current&&(T.current.scrollTop=T.current.scrollHeight)},[_]),jsxRuntimeExports.jsx("div",{ref:T,className:cn("h-[5lh] overflow-y-auto","bg-muted/30 rounded-md border","px-2 py-1","font-mono text-xs"),children:_.length===0?jsxRuntimeExports.jsx("div",{className:"text-muted-foreground/50 italic",children:"No messages"}):_.map(R=>jsxRuntimeExports.jsx(MessageLine,{message:R},R.id))})}function SingleSimulationTab(){const{currentModel:_}=useModel();return jsxRuntimeExports.jsx(SingleSimulationTabInner,{},_.name)}function SingleSimulationTabInner(){const[_,T]=reactExports.useState("run"),[R,P]=reactExports.useState(!1),{currentModel:O,currentParams:I}=useModel(),L=reactExports.useRef(null),{state:U,isRunning:G,time:V,maxSimulatedTime:Z,isCatchingUp:Y,start:W,pause:J,reset:ee,step:te,seekTo:ie}=useSimulation({model:O,params:I,paramChangeBehavior:_}),oe=reactExports.useCallback(()=>{const le=L.current?.getScreenshot();if(le){const he=document.createElement("a");he.download=`simulation_${V.toFixed(2)}h.png`,he.href=le,he.click()}},[V]),ae=reactExports.useCallback(async()=>{if(R){P(!1);const le=await L.current?.stopRecording();if(le){const he=document.createElement("a");he.download=`simulation_${V.toFixed(2)}h.webm`,he.href=URL.createObjectURL(le),he.click(),URL.revokeObjectURL(he.href)}}else L.current?.startRecording(),P(!0)},[R,V]),ce=reactExports.useCallback(()=>{if(!U)return;const le=O.getSnapshot(U);if(le.length===0)return;const he=Object.keys(le[0]),fe=[he.join("	"),...le.map(ge=>he.map(_e=>ge[_e]??"").join("	"))].join(`
`),ue=new Blob([fe],{type:"text/tab-separated-values"}),pe=document.createElement("a");pe.download=`simulation_state_${V.toFixed(2)}h.tsv`,pe.href=URL.createObjectURL(ue),pe.click(),URL.revokeObjectURL(pe.href)},[U,O,V]);return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(Card,{className:"overflow-hidden",children:jsxRuntimeExports.jsx(SimulationCanvas,{ref:L,state:U,params:I,minHeight:350})}),jsxRuntimeExports.jsx(SimulationControls,{isRunning:G,time:V,endTime:I.general.t_end,maxSimulatedTime:Z,isCatchingUp:Y,onStart:W,onPause:J,onReset:ee,onStep:te,onSeek:ie,paramChangeBehavior:_,onParamChangeBehaviorChange:T,onSaveScreenshot:oe,onSaveMovie:ae,onExportCSV:ce,isRecording:R}),jsxRuntimeExports.jsx(SimulationTerminal,{})]})}function getNestedValue(_,T){const R=T.split(".");let P=_;for(const O of R){if(P==null||typeof P!="object")return;P=P[O]}return typeof P=="number"?P:void 0}function ParameterRangeList({ranges:_,onChange:T,baseParams:R,disabled:P}){const{currentModel:O}=useModel(),I=React.useMemo(()=>O.generateBatchParameters&&R?O.generateBatchParameters(R):O.batchParameters||[],[O,R]),L=new Set(_.map(Y=>Y.path)),U=I.filter(Y=>!L.has(Y.path)),G=Y=>{const W=getNestedValue(R,Y)??0;T([..._,{path:Y,min:W,max:W,steps:3}])},V=Y=>{T(_.filter((W,J)=>J!==Y))},Z=(Y,W,J)=>{const ee=[..._];W==="path"?ee[Y]={...ee[Y],[W]:J}:ee[Y]={...ee[Y],[W]:Number(J)},T(ee)};return jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Parameter Ranges"}),jsxRuntimeExports.jsxs(Select,{onValueChange:G,disabled:P||U.length===0,children:[jsxRuntimeExports.jsxs(SelectTrigger,{className:"w-[200px] h-8",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-1"}),jsxRuntimeExports.jsx(SelectValue,{placeholder:"Add parameter"})]}),jsxRuntimeExports.jsx(SelectContent,{children:U.map(Y=>jsxRuntimeExports.jsx(SelectItem,{value:Y.path,children:Y.label},Y.path))})]})]}),_.length===0?jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"No parameter ranges defined. Add parameters to sweep."}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:_.map((Y,W)=>{const J=I.find(oe=>oe.path===Y.path),ee=getNestedValue(R,Y.path),ie=J?.isInteger??!1?1:.01;return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 p-2 border rounded-md bg-muted/50",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium flex-1 truncate",title:Y.path,children:J?.label??Y.path}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs text-muted-foreground",children:"Base:"}),jsxRuntimeExports.jsx("span",{className:"w-16 h-7 text-xs flex items-center justify-center bg-muted rounded border text-muted-foreground",children:ee??""})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs text-muted-foreground",children:"Min:"}),jsxRuntimeExports.jsx(Input,{type:"number",value:Y.min,onChange:oe=>Z(W,"min",oe.target.value),disabled:P,className:"w-16 h-7 text-xs",step:ie})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs text-muted-foreground",children:"Max:"}),jsxRuntimeExports.jsx(Input,{type:"number",value:Y.max,onChange:oe=>Z(W,"max",oe.target.value),disabled:P,className:"w-16 h-7 text-xs",step:ie})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-xs text-muted-foreground",children:"Steps:"}),jsxRuntimeExports.jsx(Input,{type:"number",value:Y.steps,onChange:oe=>Z(W,"steps",oe.target.value),disabled:P,className:"w-14 h-7 text-xs",min:1,step:1})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>V(W),disabled:P,children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})})]},Y.path)})})]})}function TimeSampleConfig({config:_,onChange:T,disabled:R}){const P=(I,L)=>{T({..._,[I]:parseFloat(L)||0})},O=Math.max(0,Math.floor((_.end-_.start)/_.step)+1);return jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Time Samples"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"time-start",className:"text-xs text-muted-foreground",children:"Start (h)"}),jsxRuntimeExports.jsx(Input,{id:"time-start",type:"number",value:_.start,onChange:I=>P("start",I.target.value),disabled:R,className:"h-8",min:0,step:.01})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"time-end",className:"text-xs text-muted-foreground",children:"End (h)"}),jsxRuntimeExports.jsx(Input,{id:"time-end",type:"number",value:_.end,onChange:I=>P("end",I.target.value),disabled:R,className:"h-8",min:0,step:.01})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"time-step",className:"text-xs text-muted-foreground",children:"Step (h)"}),jsxRuntimeExports.jsx(Input,{id:"time-step",type:"number",value:_.step,onChange:I=>P("step",I.target.value),disabled:R,className:"h-8",min:.01,step:.01})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:[O," time point",O!==1?"s":"",": ",_.start,"h",O>1&&`  ${_.end}h`]})]})}function useStateMachine(_,T){return reactExports.useReducer((R,P)=>T[R][P]??R,_)}var SCROLL_AREA_NAME="ScrollArea",[createScrollAreaContext]=createContextScope$1(SCROLL_AREA_NAME),[ScrollAreaProvider,useScrollAreaContext]=createScrollAreaContext(SCROLL_AREA_NAME),ScrollArea$1=reactExports.forwardRef((_,T)=>{const{__scopeScrollArea:R,type:P="hover",dir:O,scrollHideDelay:I=600,...L}=_,[U,G]=reactExports.useState(null),[V,Z]=reactExports.useState(null),[Y,W]=reactExports.useState(null),[J,ee]=reactExports.useState(null),[te,ie]=reactExports.useState(null),[oe,ae]=reactExports.useState(0),[ce,le]=reactExports.useState(0),[he,me]=reactExports.useState(!1),[fe,ue]=reactExports.useState(!1),pe=useComposedRefs(T,_e=>G(_e)),ge=useDirection(O);return jsxRuntimeExports.jsx(ScrollAreaProvider,{scope:R,type:P,dir:ge,scrollHideDelay:I,scrollArea:U,viewport:V,onViewportChange:Z,content:Y,onContentChange:W,scrollbarX:J,onScrollbarXChange:ee,scrollbarXEnabled:he,onScrollbarXEnabledChange:me,scrollbarY:te,onScrollbarYChange:ie,scrollbarYEnabled:fe,onScrollbarYEnabledChange:ue,onCornerWidthChange:ae,onCornerHeightChange:le,children:jsxRuntimeExports.jsx(Primitive$2.div,{dir:ge,...L,ref:pe,style:{position:"relative","--radix-scroll-area-corner-width":oe+"px","--radix-scroll-area-corner-height":ce+"px",..._.style}})})});ScrollArea$1.displayName=SCROLL_AREA_NAME;var VIEWPORT_NAME="ScrollAreaViewport",ScrollAreaViewport=reactExports.forwardRef((_,T)=>{const{__scopeScrollArea:R,children:P,nonce:O,...I}=_,L=useScrollAreaContext(VIEWPORT_NAME,R),U=reactExports.useRef(null),G=useComposedRefs(T,U,L.onViewportChange);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:O}),jsxRuntimeExports.jsx(Primitive$2.div,{"data-radix-scroll-area-viewport":"",...I,ref:G,style:{overflowX:L.scrollbarXEnabled?"scroll":"hidden",overflowY:L.scrollbarYEnabled?"scroll":"hidden",..._.style},children:jsxRuntimeExports.jsx("div",{ref:L.onContentChange,style:{minWidth:"100%",display:"table"},children:P})})]})});ScrollAreaViewport.displayName=VIEWPORT_NAME;var SCROLLBAR_NAME="ScrollAreaScrollbar",ScrollAreaScrollbar=reactExports.forwardRef((_,T)=>{const{forceMount:R,...P}=_,O=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),{onScrollbarXEnabledChange:I,onScrollbarYEnabledChange:L}=O,U=_.orientation==="horizontal";return reactExports.useEffect(()=>(U?I(!0):L(!0),()=>{U?I(!1):L(!1)}),[U,I,L]),O.type==="hover"?jsxRuntimeExports.jsx(ScrollAreaScrollbarHover,{...P,ref:T,forceMount:R}):O.type==="scroll"?jsxRuntimeExports.jsx(ScrollAreaScrollbarScroll,{...P,ref:T,forceMount:R}):O.type==="auto"?jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{...P,ref:T,forceMount:R}):O.type==="always"?jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{...P,ref:T}):null});ScrollAreaScrollbar.displayName=SCROLLBAR_NAME;var ScrollAreaScrollbarHover=reactExports.forwardRef((_,T)=>{const{forceMount:R,...P}=_,O=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),[I,L]=reactExports.useState(!1);return reactExports.useEffect(()=>{const U=O.scrollArea;let G=0;if(U){const V=()=>{window.clearTimeout(G),L(!0)},Z=()=>{G=window.setTimeout(()=>L(!1),O.scrollHideDelay)};return U.addEventListener("pointerenter",V),U.addEventListener("pointerleave",Z),()=>{window.clearTimeout(G),U.removeEventListener("pointerenter",V),U.removeEventListener("pointerleave",Z)}}},[O.scrollArea,O.scrollHideDelay]),jsxRuntimeExports.jsx(Presence,{present:R||I,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{"data-state":I?"visible":"hidden",...P,ref:T})})}),ScrollAreaScrollbarScroll=reactExports.forwardRef((_,T)=>{const{forceMount:R,...P}=_,O=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),I=_.orientation==="horizontal",L=useDebounceCallback(()=>G("SCROLL_END"),100),[U,G]=useStateMachine("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return reactExports.useEffect(()=>{if(U==="idle"){const V=window.setTimeout(()=>G("HIDE"),O.scrollHideDelay);return()=>window.clearTimeout(V)}},[U,O.scrollHideDelay,G]),reactExports.useEffect(()=>{const V=O.viewport,Z=I?"scrollLeft":"scrollTop";if(V){let Y=V[Z];const W=()=>{const J=V[Z];Y!==J&&(G("SCROLL"),L()),Y=J};return V.addEventListener("scroll",W),()=>V.removeEventListener("scroll",W)}},[O.viewport,I,G,L]),jsxRuntimeExports.jsx(Presence,{present:R||U!=="hidden",children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":U==="hidden"?"hidden":"visible",...P,ref:T,onPointerEnter:composeEventHandlers(_.onPointerEnter,()=>G("POINTER_ENTER")),onPointerLeave:composeEventHandlers(_.onPointerLeave,()=>G("POINTER_LEAVE"))})})}),ScrollAreaScrollbarAuto=reactExports.forwardRef((_,T)=>{const R=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),{forceMount:P,...O}=_,[I,L]=reactExports.useState(!1),U=_.orientation==="horizontal",G=useDebounceCallback(()=>{if(R.viewport){const V=R.viewport.offsetWidth<R.viewport.scrollWidth,Z=R.viewport.offsetHeight<R.viewport.scrollHeight;L(U?V:Z)}},10);return useResizeObserver(R.viewport,G),useResizeObserver(R.content,G),jsxRuntimeExports.jsx(Presence,{present:P||I,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":I?"visible":"hidden",...O,ref:T})})}),ScrollAreaScrollbarVisible=reactExports.forwardRef((_,T)=>{const{orientation:R="vertical",...P}=_,O=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),I=reactExports.useRef(null),L=reactExports.useRef(0),[U,G]=reactExports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),V=getThumbRatio(U.viewport,U.content),Z={...P,sizes:U,onSizesChange:G,hasThumb:V>0&&V<1,onThumbChange:W=>I.current=W,onThumbPointerUp:()=>L.current=0,onThumbPointerDown:W=>L.current=W};function Y(W,J){return getScrollPositionFromPointer(W,L.current,U,J)}return R==="horizontal"?jsxRuntimeExports.jsx(ScrollAreaScrollbarX,{...Z,ref:T,onThumbPositionChange:()=>{if(O.viewport&&I.current){const W=O.viewport.scrollLeft,J=getThumbOffsetFromScroll(W,U,O.dir);I.current.style.transform=`translate3d(${J}px, 0, 0)`}},onWheelScroll:W=>{O.viewport&&(O.viewport.scrollLeft=W)},onDragScroll:W=>{O.viewport&&(O.viewport.scrollLeft=Y(W,O.dir))}}):R==="vertical"?jsxRuntimeExports.jsx(ScrollAreaScrollbarY,{...Z,ref:T,onThumbPositionChange:()=>{if(O.viewport&&I.current){const W=O.viewport.scrollTop,J=getThumbOffsetFromScroll(W,U);I.current.style.transform=`translate3d(0, ${J}px, 0)`}},onWheelScroll:W=>{O.viewport&&(O.viewport.scrollTop=W)},onDragScroll:W=>{O.viewport&&(O.viewport.scrollTop=Y(W))}}):null}),ScrollAreaScrollbarX=reactExports.forwardRef((_,T)=>{const{sizes:R,onSizesChange:P,...O}=_,I=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),[L,U]=reactExports.useState(),G=reactExports.useRef(null),V=useComposedRefs(T,G,I.onScrollbarXChange);return reactExports.useEffect(()=>{G.current&&U(getComputedStyle(G.current))},[G]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"horizontal",...O,ref:V,sizes:R,style:{bottom:0,left:I.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:I.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":getThumbSize(R)+"px",..._.style},onThumbPointerDown:Z=>_.onThumbPointerDown(Z.x),onDragScroll:Z=>_.onDragScroll(Z.x),onWheelScroll:(Z,Y)=>{if(I.viewport){const W=I.viewport.scrollLeft+Z.deltaX;_.onWheelScroll(W),isScrollingWithinScrollbarBounds(W,Y)&&Z.preventDefault()}},onResize:()=>{G.current&&I.viewport&&L&&P({content:I.viewport.scrollWidth,viewport:I.viewport.offsetWidth,scrollbar:{size:G.current.clientWidth,paddingStart:toInt(L.paddingLeft),paddingEnd:toInt(L.paddingRight)}})}})}),ScrollAreaScrollbarY=reactExports.forwardRef((_,T)=>{const{sizes:R,onSizesChange:P,...O}=_,I=useScrollAreaContext(SCROLLBAR_NAME,_.__scopeScrollArea),[L,U]=reactExports.useState(),G=reactExports.useRef(null),V=useComposedRefs(T,G,I.onScrollbarYChange);return reactExports.useEffect(()=>{G.current&&U(getComputedStyle(G.current))},[G]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"vertical",...O,ref:V,sizes:R,style:{top:0,right:I.dir==="ltr"?0:void 0,left:I.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":getThumbSize(R)+"px",..._.style},onThumbPointerDown:Z=>_.onThumbPointerDown(Z.y),onDragScroll:Z=>_.onDragScroll(Z.y),onWheelScroll:(Z,Y)=>{if(I.viewport){const W=I.viewport.scrollTop+Z.deltaY;_.onWheelScroll(W),isScrollingWithinScrollbarBounds(W,Y)&&Z.preventDefault()}},onResize:()=>{G.current&&I.viewport&&L&&P({content:I.viewport.scrollHeight,viewport:I.viewport.offsetHeight,scrollbar:{size:G.current.clientHeight,paddingStart:toInt(L.paddingTop),paddingEnd:toInt(L.paddingBottom)}})}})}),[ScrollbarProvider,useScrollbarContext]=createScrollAreaContext(SCROLLBAR_NAME),ScrollAreaScrollbarImpl=reactExports.forwardRef((_,T)=>{const{__scopeScrollArea:R,sizes:P,hasThumb:O,onThumbChange:I,onThumbPointerUp:L,onThumbPointerDown:U,onThumbPositionChange:G,onDragScroll:V,onWheelScroll:Z,onResize:Y,...W}=_,J=useScrollAreaContext(SCROLLBAR_NAME,R),[ee,te]=reactExports.useState(null),ie=useComposedRefs(T,pe=>te(pe)),oe=reactExports.useRef(null),ae=reactExports.useRef(""),ce=J.viewport,le=P.content-P.viewport,he=useCallbackRef$1(Z),me=useCallbackRef$1(G),fe=useDebounceCallback(Y,10);function ue(pe){if(oe.current){const ge=pe.clientX-oe.current.left,_e=pe.clientY-oe.current.top;V({x:ge,y:_e})}}return reactExports.useEffect(()=>{const pe=ge=>{const _e=ge.target;ee?.contains(_e)&&he(ge,le)};return document.addEventListener("wheel",pe,{passive:!1}),()=>document.removeEventListener("wheel",pe,{passive:!1})},[ce,ee,le,he]),reactExports.useEffect(me,[P,me]),useResizeObserver(ee,fe),useResizeObserver(J.content,fe),jsxRuntimeExports.jsx(ScrollbarProvider,{scope:R,scrollbar:ee,hasThumb:O,onThumbChange:useCallbackRef$1(I),onThumbPointerUp:useCallbackRef$1(L),onThumbPositionChange:me,onThumbPointerDown:useCallbackRef$1(U),children:jsxRuntimeExports.jsx(Primitive$2.div,{...W,ref:ie,style:{position:"absolute",...W.style},onPointerDown:composeEventHandlers(_.onPointerDown,pe=>{pe.button===0&&(pe.target.setPointerCapture(pe.pointerId),oe.current=ee.getBoundingClientRect(),ae.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",J.viewport&&(J.viewport.style.scrollBehavior="auto"),ue(pe))}),onPointerMove:composeEventHandlers(_.onPointerMove,ue),onPointerUp:composeEventHandlers(_.onPointerUp,pe=>{const ge=pe.target;ge.hasPointerCapture(pe.pointerId)&&ge.releasePointerCapture(pe.pointerId),document.body.style.webkitUserSelect=ae.current,J.viewport&&(J.viewport.style.scrollBehavior=""),oe.current=null})})})}),THUMB_NAME="ScrollAreaThumb",ScrollAreaThumb=reactExports.forwardRef((_,T)=>{const{forceMount:R,...P}=_,O=useScrollbarContext(THUMB_NAME,_.__scopeScrollArea);return jsxRuntimeExports.jsx(Presence,{present:R||O.hasThumb,children:jsxRuntimeExports.jsx(ScrollAreaThumbImpl,{ref:T,...P})})}),ScrollAreaThumbImpl=reactExports.forwardRef((_,T)=>{const{__scopeScrollArea:R,style:P,...O}=_,I=useScrollAreaContext(THUMB_NAME,R),L=useScrollbarContext(THUMB_NAME,R),{onThumbPositionChange:U}=L,G=useComposedRefs(T,Y=>L.onThumbChange(Y)),V=reactExports.useRef(void 0),Z=useDebounceCallback(()=>{V.current&&(V.current(),V.current=void 0)},100);return reactExports.useEffect(()=>{const Y=I.viewport;if(Y){const W=()=>{if(Z(),!V.current){const J=addUnlinkedScrollListener(Y,U);V.current=J,U()}};return U(),Y.addEventListener("scroll",W),()=>Y.removeEventListener("scroll",W)}},[I.viewport,Z,U]),jsxRuntimeExports.jsx(Primitive$2.div,{"data-state":L.hasThumb?"visible":"hidden",...O,ref:G,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...P},onPointerDownCapture:composeEventHandlers(_.onPointerDownCapture,Y=>{const J=Y.target.getBoundingClientRect(),ee=Y.clientX-J.left,te=Y.clientY-J.top;L.onThumbPointerDown({x:ee,y:te})}),onPointerUp:composeEventHandlers(_.onPointerUp,L.onThumbPointerUp)})});ScrollAreaThumb.displayName=THUMB_NAME;var CORNER_NAME="ScrollAreaCorner",ScrollAreaCorner=reactExports.forwardRef((_,T)=>{const R=useScrollAreaContext(CORNER_NAME,_.__scopeScrollArea),P=!!(R.scrollbarX&&R.scrollbarY);return R.type!=="scroll"&&P?jsxRuntimeExports.jsx(ScrollAreaCornerImpl,{..._,ref:T}):null});ScrollAreaCorner.displayName=CORNER_NAME;var ScrollAreaCornerImpl=reactExports.forwardRef((_,T)=>{const{__scopeScrollArea:R,...P}=_,O=useScrollAreaContext(CORNER_NAME,R),[I,L]=reactExports.useState(0),[U,G]=reactExports.useState(0),V=!!(I&&U);return useResizeObserver(O.scrollbarX,()=>{const Z=O.scrollbarX?.offsetHeight||0;O.onCornerHeightChange(Z),G(Z)}),useResizeObserver(O.scrollbarY,()=>{const Z=O.scrollbarY?.offsetWidth||0;O.onCornerWidthChange(Z),L(Z)}),V?jsxRuntimeExports.jsx(Primitive$2.div,{...P,ref:T,style:{width:I,height:U,position:"absolute",right:O.dir==="ltr"?0:void 0,left:O.dir==="rtl"?0:void 0,bottom:0,..._.style}}):null});function toInt(_){return _?parseInt(_,10):0}function getThumbRatio(_,T){const R=_/T;return isNaN(R)?0:R}function getThumbSize(_){const T=getThumbRatio(_.viewport,_.content),R=_.scrollbar.paddingStart+_.scrollbar.paddingEnd,P=(_.scrollbar.size-R)*T;return Math.max(P,18)}function getScrollPositionFromPointer(_,T,R,P="ltr"){const O=getThumbSize(R),I=O/2,L=T||I,U=O-L,G=R.scrollbar.paddingStart+L,V=R.scrollbar.size-R.scrollbar.paddingEnd-U,Z=R.content-R.viewport,Y=P==="ltr"?[0,Z]:[Z*-1,0];return linearScale([G,V],Y)(_)}function getThumbOffsetFromScroll(_,T,R="ltr"){const P=getThumbSize(T),O=T.scrollbar.paddingStart+T.scrollbar.paddingEnd,I=T.scrollbar.size-O,L=T.content-T.viewport,U=I-P,G=R==="ltr"?[0,L]:[L*-1,0],V=clamp$1(_,G);return linearScale([0,L],[0,U])(V)}function linearScale(_,T){return R=>{if(_[0]===_[1]||T[0]===T[1])return T[0];const P=(T[1]-T[0])/(_[1]-_[0]);return T[0]+P*(R-_[0])}}function isScrollingWithinScrollbarBounds(_,T){return _>0&&_<T}var addUnlinkedScrollListener=(_,T=()=>{})=>{let R={left:_.scrollLeft,top:_.scrollTop},P=0;return(function O(){const I={left:_.scrollLeft,top:_.scrollTop},L=R.left!==I.left,U=R.top!==I.top;(L||U)&&T(),R=I,P=window.requestAnimationFrame(O)})(),()=>window.cancelAnimationFrame(P)};function useDebounceCallback(_,T){const R=useCallbackRef$1(_),P=reactExports.useRef(0);return reactExports.useEffect(()=>()=>window.clearTimeout(P.current),[]),reactExports.useCallback(()=>{window.clearTimeout(P.current),P.current=window.setTimeout(R,T)},[R,T])}function useResizeObserver(_,T){const R=useCallbackRef$1(T);useLayoutEffect2(()=>{let P=0;if(_){const O=new ResizeObserver(()=>{cancelAnimationFrame(P),P=window.requestAnimationFrame(R)});return O.observe(_),()=>{window.cancelAnimationFrame(P),O.unobserve(_)}}},[_,R])}var Root$3=ScrollArea$1,Viewport=ScrollAreaViewport,Corner=ScrollAreaCorner;const ScrollArea=reactExports.forwardRef(({className:_,children:T,...R},P)=>jsxRuntimeExports.jsxs(Root$3,{ref:P,className:cn("relative overflow-hidden",_),...R,children:[jsxRuntimeExports.jsx(Viewport,{className:"h-full w-full rounded-[inherit]",children:T}),jsxRuntimeExports.jsx(ScrollBar,{}),jsxRuntimeExports.jsx(Corner,{})]}));ScrollArea.displayName=Root$3.displayName;const ScrollBar=reactExports.forwardRef(({className:_,orientation:T="vertical",...R},P)=>jsxRuntimeExports.jsx(ScrollAreaScrollbar,{ref:P,orientation:T,className:cn("flex touch-none select-none transition-colors",T==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",T==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",_),...R,children:jsxRuntimeExports.jsx(ScrollAreaThumb,{className:"relative flex-1 rounded-full bg-border"})}));ScrollBar.displayName=ScrollAreaScrollbar.displayName;function ResultsTable({columns:_,rows:T,onRunRow:R}){if(_.length===0||T.length===0)return jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No results to display. Run batch or compute statistics."});const P=!!R;return jsxRuntimeExports.jsx(ScrollArea,{className:"h-[300px] border rounded-md",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-sm",children:[jsxRuntimeExports.jsx("thead",{className:"sticky top-0 bg-muted",children:jsxRuntimeExports.jsxs("tr",{children:[P&&jsxRuntimeExports.jsx("th",{className:"text-left px-2 py-2 font-medium border-b whitespace-nowrap w-12",children:"Run"}),_.map((O,I)=>jsxRuntimeExports.jsx("th",{className:"text-left px-3 py-2 font-medium border-b whitespace-nowrap",children:O},I))]})}),jsxRuntimeExports.jsx("tbody",{children:T.map((O,I)=>jsxRuntimeExports.jsxs("tr",{className:"border-b last:border-0 hover:bg-muted/50",children:[P&&jsxRuntimeExports.jsx("td",{className:"px-2 py-1",children:jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>R(I),title:"Open simulation with these parameters",children:jsxRuntimeExports.jsx(Play,{className:"h-3 w-3"})})}),O.map((L,U)=>jsxRuntimeExports.jsx("td",{className:"px-3 py-1.5 whitespace-nowrap font-mono text-xs",children:typeof L=="number"?L.toFixed(4):L},U))]},I))})]})})}function createContextScope(_,T=[]){let R=[];function P(I,L){const U=reactExports.createContext(L);U.displayName=I+"Context";const G=R.length;R=[...R,L];const V=Y=>{const{scope:W,children:J,...ee}=Y,te=W?.[_]?.[G]||U,ie=reactExports.useMemo(()=>ee,Object.values(ee));return jsxRuntimeExports.jsx(te.Provider,{value:ie,children:J})};V.displayName=I+"Provider";function Z(Y,W){const J=W?.[_]?.[G]||U,ee=reactExports.useContext(J);if(ee)return ee;if(L!==void 0)return L;throw new Error(`\`${Y}\` must be used within \`${I}\``)}return[V,Z]}const O=()=>{const I=R.map(L=>reactExports.createContext(L));return function(U){const G=U?.[_]||I;return reactExports.useMemo(()=>({[`__scope${_}`]:{...U,[_]:G}}),[U,G])}};return O.scopeName=_,[P,composeContextScopes(O,...T)]}function composeContextScopes(..._){const T=_[0];if(_.length===1)return T;const R=()=>{const P=_.map(O=>({useScope:O(),scopeName:O.scopeName}));return function(I){const L=P.reduce((U,{useScope:G,scopeName:V})=>{const Y=G(I)[`__scope${V}`];return{...U,...Y}},{});return reactExports.useMemo(()=>({[`__scope${T.scopeName}`]:L}),[L])}};return R.scopeName=T.scopeName,R}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive=NODES.reduce((_,T)=>{const R=createSlot$3(`Primitive.${T}`),P=reactExports.forwardRef((O,I)=>{const{asChild:L,...U}=O,G=L?R:T;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(G,{...U,ref:I})});return P.displayName=`Primitive.${T}`,{..._,[T]:P}},{}),PROGRESS_NAME="Progress",DEFAULT_MAX=100,[createProgressContext]=createContextScope(PROGRESS_NAME),[ProgressProvider,useProgressContext]=createProgressContext(PROGRESS_NAME),Progress$1=reactExports.forwardRef((_,T)=>{const{__scopeProgress:R,value:P=null,max:O,getValueLabel:I=defaultGetValueLabel,...L}=_;(O||O===0)&&!isValidMaxNumber(O)&&console.error(getInvalidMaxError(`${O}`,"Progress"));const U=isValidMaxNumber(O)?O:DEFAULT_MAX;P!==null&&!isValidValueNumber(P,U)&&console.error(getInvalidValueError(`${P}`,"Progress"));const G=isValidValueNumber(P,U)?P:null,V=isNumber(G)?I(G,U):void 0;return jsxRuntimeExports.jsx(ProgressProvider,{scope:R,value:G,max:U,children:jsxRuntimeExports.jsx(Primitive.div,{"aria-valuemax":U,"aria-valuemin":0,"aria-valuenow":isNumber(G)?G:void 0,"aria-valuetext":V,role:"progressbar","data-state":getProgressState(G,U),"data-value":G??void 0,"data-max":U,...L,ref:T})})});Progress$1.displayName=PROGRESS_NAME;var INDICATOR_NAME="ProgressIndicator",ProgressIndicator=reactExports.forwardRef((_,T)=>{const{__scopeProgress:R,...P}=_,O=useProgressContext(INDICATOR_NAME,R);return jsxRuntimeExports.jsx(Primitive.div,{"data-state":getProgressState(O.value,O.max),"data-value":O.value??void 0,"data-max":O.max,...P,ref:T})});ProgressIndicator.displayName=INDICATOR_NAME;function defaultGetValueLabel(_,T){return`${Math.round(_/T*100)}%`}function getProgressState(_,T){return _==null?"indeterminate":_===T?"complete":"loading"}function isNumber(_){return typeof _=="number"}function isValidMaxNumber(_){return isNumber(_)&&!isNaN(_)&&_>0}function isValidValueNumber(_,T){return isNumber(_)&&!isNaN(_)&&_<=T&&_>=0}function getInvalidMaxError(_,T){return`Invalid prop \`max\` of value \`${_}\` supplied to \`${T}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${DEFAULT_MAX}\`.`}function getInvalidValueError(_,T){return`Invalid prop \`value\` of value \`${_}\` supplied to \`${T}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${DEFAULT_MAX} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Root$2=Progress$1,Indicator=ProgressIndicator;const Progress=reactExports.forwardRef(({className:_,value:T,...R},P)=>jsxRuntimeExports.jsx(Root$2,{ref:P,className:cn("relative h-4 w-full overflow-hidden rounded-full bg-secondary",_),...R,children:jsxRuntimeExports.jsx(Indicator,{className:"h-full w-full flex-1 bg-play transition-all",style:{transform:`translateX(-${100-(T||0)}%)`}})}));Progress.displayName=Root$2.displayName;function ascending$1(_,T){return _==null||T==null?NaN:_<T?-1:_>T?1:_>=T?0:NaN}function descending(_,T){return _==null||T==null?NaN:T<_?-1:T>_?1:T>=_?0:NaN}function bisector(_){let T,R,P;_.length!==2?(T=ascending$1,R=(U,G)=>ascending$1(_(U),G),P=(U,G)=>_(U)-G):(T=_===ascending$1||_===descending?_:zero$3,R=_,P=_);function O(U,G,V=0,Z=U.length){if(V<Z){if(T(G,G)!==0)return Z;do{const Y=V+Z>>>1;R(U[Y],G)<0?V=Y+1:Z=Y}while(V<Z)}return V}function I(U,G,V=0,Z=U.length){if(V<Z){if(T(G,G)!==0)return Z;do{const Y=V+Z>>>1;R(U[Y],G)<=0?V=Y+1:Z=Y}while(V<Z)}return V}function L(U,G,V=0,Z=U.length){const Y=O(U,G,V,Z-1);return Y>V&&P(U[Y-1],G)>-P(U[Y],G)?Y-1:Y}return{left:O,center:L,right:I}}function zero$3(){return 0}function number$4(_){return _===null?NaN:+_}function*numbers(_,T){if(T===void 0)for(let R of _)R!=null&&(R=+R)>=R&&(yield R);else{let R=-1;for(let P of _)(P=T(P,++R,_))!=null&&(P=+P)>=P&&(yield P)}}const ascendingBisect=bisector(ascending$1),bisectRight=ascendingBisect.right;bisector(number$4).center;function count(_,T){let R=0;for(let P of _)P!=null&&(P=+P)>=P&&++R;return R}function length$1(_){return _.length|0}function empty$1(_){return!(_>0)}function arrayify$1(_){return typeof _!="object"||"length"in _?_:Array.from(_)}function reducer(_){return T=>_(...T)}function cross(..._){const T=typeof _[_.length-1]=="function"&&reducer(_.pop());_=_.map(arrayify$1);const R=_.map(length$1),P=_.length-1,O=new Array(P+1).fill(0),I=[];if(P<0||R.some(empty$1))return I;for(;;){I.push(O.map((U,G)=>_[G][U]));let L=P;for(;++O[L]===R[L];){if(L===0)return T?I.map(T):I;O[L--]=0}}}function cumsum(_,T){var R=0;return Float64Array.from(_,P=>R+=+P||0)}function variance(_,T){let R=0,P,O=0,I=0;if(T===void 0)for(let L of _)L!=null&&(L=+L)>=L&&(P=L-O,O+=P/++R,I+=P*(L-O));else{let L=-1;for(let U of _)(U=T(U,++L,_))!=null&&(U=+U)>=U&&(P=U-O,O+=P/++R,I+=P*(U-O))}if(R>1)return I/(R-1)}function deviation(_,T){const R=variance(_,T);return R&&Math.sqrt(R)}function extent$1(_,T){let R,P;if(T===void 0)for(const O of _)O!=null&&(R===void 0?O>=O&&(R=P=O):(R>O&&(R=O),P<O&&(P=O)));else{let O=-1;for(let I of _)(I=T(I,++O,_))!=null&&(R===void 0?I>=I&&(R=P=I):(R>I&&(R=I),P<I&&(P=I)))}return[R,P]}class Adder{constructor(){this._partials=new Float64Array(32),this._n=0}add(T){const R=this._partials;let P=0;for(let O=0;O<this._n&&O<32;O++){const I=R[O],L=T+I,U=Math.abs(T)<Math.abs(I)?T-(L-I):I-(L-T);U&&(R[P++]=U),T=L}return R[P]=T,this._n=P+1,this}valueOf(){const T=this._partials;let R=this._n,P,O,I,L=0;if(R>0){for(L=T[--R];R>0&&(P=L,O=T[--R],L=P+O,I=O-(L-P),!I););R>0&&(I<0&&T[R-1]<0||I>0&&T[R-1]>0)&&(O=I*2,P=L+O,O==P-L&&(L=P))}return L}}class InternMap extends Map{constructor(T,R=keyof$1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:R}}),T!=null)for(const[P,O]of T)this.set(P,O)}get(T){return super.get(intern_get(this,T))}has(T){return super.has(intern_get(this,T))}set(T,R){return super.set(intern_set(this,T),R)}delete(T){return super.delete(intern_delete(this,T))}}class InternSet extends Set{constructor(T,R=keyof$1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:R}}),T!=null)for(const P of T)this.add(P)}has(T){return super.has(intern_get(this,T))}add(T){return super.add(intern_set(this,T))}delete(T){return super.delete(intern_delete(this,T))}}function intern_get({_intern:_,_key:T},R){const P=T(R);return _.has(P)?_.get(P):R}function intern_set({_intern:_,_key:T},R){const P=T(R);return _.has(P)?_.get(P):(_.set(P,R),R)}function intern_delete({_intern:_,_key:T},R){const P=T(R);return _.has(P)&&(R=_.get(P),_.delete(P)),R}function keyof$1(_){return _!==null&&typeof _=="object"?_.valueOf():_}function identity$9(_){return _}function group(_,...T){return nest(_,identity$9,identity$9,T)}function rollup(_,T,...R){return nest(_,identity$9,T,R)}function rollups(_,T,...R){return nest(_,Array.from,T,R)}function nest(_,T,R,P){return(function O(I,L){if(L>=P.length)return R(I);const U=new InternMap,G=P[L++];let V=-1;for(const Z of I){const Y=G(Z,++V,I),W=U.get(Y);W?W.push(Z):U.set(Y,[Z])}for(const[Z,Y]of U)U.set(Z,O(Y,L));return T(U)})(_,0)}function permute(_,T){return Array.from(T,R=>_[R])}function sort$1(_,...T){if(typeof _[Symbol.iterator]!="function")throw new TypeError("values is not iterable");_=Array.from(_);let[R]=T;if(R&&R.length!==2||T.length>1){const P=Uint32Array.from(_,(O,I)=>I);return T.length>1?(T=T.map(O=>_.map(O)),P.sort((O,I)=>{for(const L of T){const U=ascendingDefined$1(L[O],L[I]);if(U)return U}})):(R=_.map(R),P.sort((O,I)=>ascendingDefined$1(R[O],R[I]))),permute(_,P)}return _.sort(compareDefined(R))}function compareDefined(_=ascending$1){if(_===ascending$1)return ascendingDefined$1;if(typeof _!="function")throw new TypeError("compare is not a function");return(T,R)=>{const P=_(T,R);return P||P===0?P:(_(R,R)===0)-(_(T,T)===0)}}function ascendingDefined$1(_,T){return(_==null||!(_>=_))-(T==null||!(T>=T))||(_<T?-1:_>T?1:0)}function groupSort(_,T,R){return(T.length!==2?sort$1(rollup(_,T,R),(([P,O],[I,L])=>ascending$1(O,L)||ascending$1(P,I))):sort$1(group(_,R),(([P,O],[I,L])=>T(O,L)||ascending$1(P,I)))).map(([P])=>P)}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(_,T,R){const P=(T-_)/Math.max(0,R),O=Math.floor(Math.log10(P)),I=P/Math.pow(10,O),L=I>=e10?10:I>=e5?5:I>=e2?2:1;let U,G,V;return O<0?(V=Math.pow(10,-O)/L,U=Math.round(_*V),G=Math.round(T*V),U/V<_&&++U,G/V>T&&--G,V=-V):(V=Math.pow(10,O)*L,U=Math.round(_/V),G=Math.round(T/V),U*V<_&&++U,G*V>T&&--G),G<U&&.5<=R&&R<2?tickSpec(_,T,R*2):[U,G,V]}function ticks(_,T,R){if(T=+T,_=+_,R=+R,!(R>0))return[];if(_===T)return[_];const P=T<_,[O,I,L]=P?tickSpec(T,_,R):tickSpec(_,T,R);if(!(I>=O))return[];const U=I-O+1,G=new Array(U);if(P)if(L<0)for(let V=0;V<U;++V)G[V]=(I-V)/-L;else for(let V=0;V<U;++V)G[V]=(I-V)*L;else if(L<0)for(let V=0;V<U;++V)G[V]=(O+V)/-L;else for(let V=0;V<U;++V)G[V]=(O+V)*L;return G}function tickIncrement(_,T,R){return T=+T,_=+_,R=+R,tickSpec(_,T,R)[2]}function tickStep(_,T,R){T=+T,_=+_,R=+R;const P=T<_,O=P?tickIncrement(T,_,R):tickIncrement(_,T,R);return(P?-1:1)*(O<0?1/-O:O)}function thresholdSturges(_){return Math.max(1,Math.ceil(Math.log(count(_))/Math.LN2)+1)}function max(_,T){let R;if(T===void 0)for(const P of _)P!=null&&(R<P||R===void 0&&P>=P)&&(R=P);else{let P=-1;for(let O of _)(O=T(O,++P,_))!=null&&(R<O||R===void 0&&O>=O)&&(R=O)}return R}function maxIndex(_,T){let R,P=-1,O=-1;if(T===void 0)for(const I of _)++O,I!=null&&(R<I||R===void 0&&I>=I)&&(R=I,P=O);else for(let I of _)(I=T(I,++O,_))!=null&&(R<I||R===void 0&&I>=I)&&(R=I,P=O);return P}function min$1(_,T){let R;if(T===void 0)for(const P of _)P!=null&&(R>P||R===void 0&&P>=P)&&(R=P);else{let P=-1;for(let O of _)(O=T(O,++P,_))!=null&&(R>O||R===void 0&&O>=O)&&(R=O)}return R}function minIndex(_,T){let R,P=-1,O=-1;if(T===void 0)for(const I of _)++O,I!=null&&(R>I||R===void 0&&I>=I)&&(R=I,P=O);else for(let I of _)(I=T(I,++O,_))!=null&&(R>I||R===void 0&&I>=I)&&(R=I,P=O);return P}function quickselect(_,T,R=0,P=1/0,O){if(T=Math.floor(T),R=Math.floor(Math.max(0,R)),P=Math.floor(Math.min(_.length-1,P)),!(R<=T&&T<=P))return _;for(O=O===void 0?ascendingDefined$1:compareDefined(O);P>R;){if(P-R>600){const G=P-R+1,V=T-R+1,Z=Math.log(G),Y=.5*Math.exp(2*Z/3),W=.5*Math.sqrt(Z*Y*(G-Y)/G)*(V-G/2<0?-1:1),J=Math.max(R,Math.floor(T-V*Y/G+W)),ee=Math.min(P,Math.floor(T+(G-V)*Y/G+W));quickselect(_,T,J,ee,O)}const I=_[T];let L=R,U=P;for(swap(_,R,T),O(_[P],I)>0&&swap(_,R,P);L<U;){for(swap(_,L,U),++L,--U;O(_[L],I)<0;)++L;for(;O(_[U],I)>0;)--U}O(_[R],I)===0?swap(_,R,U):(++U,swap(_,U,P)),U<=T&&(R=U+1),T<=U&&(P=U-1)}return _}function swap(_,T,R){const P=_[T];_[T]=_[R],_[R]=P}function greatest(_,T=ascending$1){let R,P=!1;if(T.length===1){let O;for(const I of _){const L=T(I);(P?ascending$1(L,O)>0:ascending$1(L,L)===0)&&(R=I,O=L,P=!0)}}else for(const O of _)(P?T(O,R)>0:T(O,O)===0)&&(R=O,P=!0);return R}function quantile$1(_,T,R){if(_=Float64Array.from(numbers(_,R)),!(!(P=_.length)||isNaN(T=+T))){if(T<=0||P<2)return min$1(_);if(T>=1)return max(_);var P,O=(P-1)*T,I=Math.floor(O),L=max(quickselect(_,I).subarray(0,I+1)),U=min$1(_.subarray(I+1));return L+(U-L)*(O-I)}}function quantileSorted(_,T,R=number$4){if(!(!(P=_.length)||isNaN(T=+T))){if(T<=0||P<2)return+R(_[0],0,_);if(T>=1)return+R(_[P-1],P-1,_);var P,O=(P-1)*T,I=Math.floor(O),L=+R(_[I],I,_),U=+R(_[I+1],I+1,_);return L+(U-L)*(O-I)}}function thresholdFreedmanDiaconis(_,T,R){const P=count(_),O=quantile$1(_,.75)-quantile$1(_,.25);return P&&O?Math.ceil((R-T)/(2*O*Math.pow(P,-1/3))):1}function thresholdScott(_,T,R){const P=count(_),O=deviation(_);return P&&O?Math.ceil((R-T)*Math.cbrt(P)/(3.49*O)):1}function mean(_,T){let R=0,P=0;if(T===void 0)for(let O of _)O!=null&&(O=+O)>=O&&(++R,P+=O);else{let O=-1;for(let I of _)(I=T(I,++O,_))!=null&&(I=+I)>=I&&(++R,P+=I)}if(R)return P/R}function median(_,T){return quantile$1(_,.5,T)}function*flatten(_){for(const T of _)yield*T}function merge(_){return Array.from(flatten(_))}function mode(_,T){const R=new InternMap;if(T===void 0)for(let I of _)I!=null&&I>=I&&R.set(I,(R.get(I)||0)+1);else{let I=-1;for(let L of _)(L=T(L,++I,_))!=null&&L>=L&&R.set(L,(R.get(L)||0)+1)}let P,O=0;for(const[I,L]of R)L>O&&(O=L,P=I);return P}function pairs(_,T=pair){const R=[];let P,O=!1;for(const I of _)O&&R.push(T(P,I)),P=I,O=!0;return R}function pair(_,T){return[_,T]}function range$1(_,T,R){_=+_,T=+T,R=(O=arguments.length)<2?(T=_,_=0,1):O<3?1:+R;for(var P=-1,O=Math.max(0,Math.ceil((T-_)/R))|0,I=new Array(O);++P<O;)I[P]=_+P*R;return I}function sum(_,T){let R=0;if(T===void 0)for(let P of _)(P=+P)&&(R+=P);else{let P=-1;for(let O of _)(O=+T(O,++P,_))&&(R+=O)}return R}function reverse(_){if(typeof _[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(_).reverse()}function identity$8(_){return _}var bottom=3,epsilon$3=1e-6;function translateX(_){return"translate("+_+",0)"}function number$3(_){return T=>+_(T)}function center(_,T){return T=Math.max(0,_.bandwidth()-T*2)/2,_.round()&&(T=Math.round(T)),R=>+_(R)+T}function entering(){return!this.__axis}function axis(_,T){var R=[],P=null,O=null,I=6,L=6,U=3,G=typeof window<"u"&&window.devicePixelRatio>1?0:.5,V=1,Z="y",Y=translateX;function W(J){var ee=P??(T.ticks?T.ticks.apply(T,R):T.domain()),te=O??(T.tickFormat?T.tickFormat.apply(T,R):identity$8),ie=Math.max(I,0)+U,oe=T.range(),ae=+oe[0]+G,ce=+oe[oe.length-1]+G,le=(T.bandwidth?center:number$3)(T.copy(),G),he=J.selection?J.selection():J,me=he.selectAll(".domain").data([null]),fe=he.selectAll(".tick").data(ee,T).order(),ue=fe.exit(),pe=fe.enter().append("g").attr("class","tick"),ge=fe.select("line"),_e=fe.select("text");me=me.merge(me.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),fe=fe.merge(pe),ge=ge.merge(pe.append("line").attr("stroke","currentColor").attr(Z+"2",V*I)),_e=_e.merge(pe.append("text").attr("fill","currentColor").attr(Z,V*ie).attr("dy","0.71em")),J!==he&&(me=me.transition(J),fe=fe.transition(J),ge=ge.transition(J),_e=_e.transition(J),ue=ue.transition(J).attr("opacity",epsilon$3).attr("transform",function(we){return isFinite(we=le(we))?Y(we+G):this.getAttribute("transform")}),pe.attr("opacity",epsilon$3).attr("transform",function(we){var be=this.parentNode.__axis;return Y((be&&isFinite(be=be(we))?be:le(we))+G)})),ue.remove(),me.attr("d",L?"M"+ae+","+V*L+"V"+G+"H"+ce+"V"+V*L:"M"+ae+","+G+"H"+ce),fe.attr("opacity",1).attr("transform",function(we){return Y(le(we)+G)}),ge.attr(Z+"2",V*I),_e.attr(Z,V*ie).text(te),he.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),he.each(function(){this.__axis=le})}return W.scale=function(J){return arguments.length?(T=J,W):T},W.ticks=function(){return R=Array.from(arguments),W},W.tickArguments=function(J){return arguments.length?(R=J==null?[]:Array.from(J),W):R.slice()},W.tickValues=function(J){return arguments.length?(P=J==null?null:Array.from(J),W):P&&P.slice()},W.tickFormat=function(J){return arguments.length?(O=J,W):O},W.tickSize=function(J){return arguments.length?(I=L=+J,W):I},W.tickSizeInner=function(J){return arguments.length?(I=+J,W):I},W.tickSizeOuter=function(J){return arguments.length?(L=+J,W):L},W.tickPadding=function(J){return arguments.length?(U=+J,W):U},W.offset=function(J){return arguments.length?(G=+J,W):G},W}function axisBottom(_){return axis(bottom,_)}var noop$2={value:()=>{}};function dispatch(){for(var _=0,T=arguments.length,R={},P;_<T;++_){if(!(P=arguments[_]+"")||P in R||/[\s.]/.test(P))throw new Error("illegal type: "+P);R[P]=[]}return new Dispatch(R)}function Dispatch(_){this._=_}function parseTypenames$1(_,T){return _.trim().split(/^|\s+/).map(function(R){var P="",O=R.indexOf(".");if(O>=0&&(P=R.slice(O+1),R=R.slice(0,O)),R&&!T.hasOwnProperty(R))throw new Error("unknown type: "+R);return{type:R,name:P}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(_,T){var R=this._,P=parseTypenames$1(_+"",R),O,I=-1,L=P.length;if(arguments.length<2){for(;++I<L;)if((O=(_=P[I]).type)&&(O=get$1(R[O],_.name)))return O;return}if(T!=null&&typeof T!="function")throw new Error("invalid callback: "+T);for(;++I<L;)if(O=(_=P[I]).type)R[O]=set$1(R[O],_.name,T);else if(T==null)for(O in R)R[O]=set$1(R[O],_.name,null);return this},copy:function(){var _={},T=this._;for(var R in T)_[R]=T[R].slice();return new Dispatch(_)},call:function(_,T){if((O=arguments.length-2)>0)for(var R=new Array(O),P=0,O,I;P<O;++P)R[P]=arguments[P+2];if(!this._.hasOwnProperty(_))throw new Error("unknown type: "+_);for(I=this._[_],P=0,O=I.length;P<O;++P)I[P].value.apply(T,R)},apply:function(_,T,R){if(!this._.hasOwnProperty(_))throw new Error("unknown type: "+_);for(var P=this._[_],O=0,I=P.length;O<I;++O)P[O].value.apply(T,R)}};function get$1(_,T){for(var R=0,P=_.length,O;R<P;++R)if((O=_[R]).name===T)return O.value}function set$1(_,T,R){for(var P=0,O=_.length;P<O;++P)if(_[P].name===T){_[P]=noop$2,_=_.slice(0,P).concat(_.slice(P+1));break}return R!=null&&_.push({name:T,value:R}),_}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(_){var T=_+="",R=T.indexOf(":");return R>=0&&(T=_.slice(0,R))!=="xmlns"&&(_=_.slice(R+1)),namespaces.hasOwnProperty(T)?{space:namespaces[T],local:_}:_}function creatorInherit(_){return function(){var T=this.ownerDocument,R=this.namespaceURI;return R===xhtml&&T.documentElement.namespaceURI===xhtml?T.createElement(_):T.createElementNS(R,_)}}function creatorFixed(_){return function(){return this.ownerDocument.createElementNS(_.space,_.local)}}function creator(_){var T=namespace(_);return(T.local?creatorFixed:creatorInherit)(T)}function none(){}function selector(_){return _==null?none:function(){return this.querySelector(_)}}function selection_select(_){typeof _!="function"&&(_=selector(_));for(var T=this._groups,R=T.length,P=new Array(R),O=0;O<R;++O)for(var I=T[O],L=I.length,U=P[O]=new Array(L),G,V,Z=0;Z<L;++Z)(G=I[Z])&&(V=_.call(G,G.__data__,Z,I))&&("__data__"in G&&(V.__data__=G.__data__),U[Z]=V);return new Selection$1(P,this._parents)}function array$1(_){return _==null?[]:Array.isArray(_)?_:Array.from(_)}function empty(){return[]}function selectorAll(_){return _==null?empty:function(){return this.querySelectorAll(_)}}function arrayAll(_){return function(){return array$1(_.apply(this,arguments))}}function selection_selectAll(_){typeof _=="function"?_=arrayAll(_):_=selectorAll(_);for(var T=this._groups,R=T.length,P=[],O=[],I=0;I<R;++I)for(var L=T[I],U=L.length,G,V=0;V<U;++V)(G=L[V])&&(P.push(_.call(G,G.__data__,V,L)),O.push(G));return new Selection$1(P,O)}function matcher(_){return function(){return this.matches(_)}}function childMatcher(_){return function(T){return T.matches(_)}}var find=Array.prototype.find;function childFind(_){return function(){return find.call(this.children,_)}}function childFirst(){return this.firstElementChild}function selection_selectChild(_){return this.select(_==null?childFirst:childFind(typeof _=="function"?_:childMatcher(_)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(_){return function(){return filter.call(this.children,_)}}function selection_selectChildren(_){return this.selectAll(_==null?children:childrenFilter(typeof _=="function"?_:childMatcher(_)))}function selection_filter(_){typeof _!="function"&&(_=matcher(_));for(var T=this._groups,R=T.length,P=new Array(R),O=0;O<R;++O)for(var I=T[O],L=I.length,U=P[O]=[],G,V=0;V<L;++V)(G=I[V])&&_.call(G,G.__data__,V,I)&&U.push(G);return new Selection$1(P,this._parents)}function sparse(_){return new Array(_.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(_,T){this.ownerDocument=_.ownerDocument,this.namespaceURI=_.namespaceURI,this._next=null,this._parent=_,this.__data__=T}EnterNode.prototype={constructor:EnterNode,appendChild:function(_){return this._parent.insertBefore(_,this._next)},insertBefore:function(_,T){return this._parent.insertBefore(_,T)},querySelector:function(_){return this._parent.querySelector(_)},querySelectorAll:function(_){return this._parent.querySelectorAll(_)}};function constant$4(_){return function(){return _}}function bindIndex(_,T,R,P,O,I){for(var L=0,U,G=T.length,V=I.length;L<V;++L)(U=T[L])?(U.__data__=I[L],P[L]=U):R[L]=new EnterNode(_,I[L]);for(;L<G;++L)(U=T[L])&&(O[L]=U)}function bindKey(_,T,R,P,O,I,L){var U,G,V=new Map,Z=T.length,Y=I.length,W=new Array(Z),J;for(U=0;U<Z;++U)(G=T[U])&&(W[U]=J=L.call(G,G.__data__,U,T)+"",V.has(J)?O[U]=G:V.set(J,G));for(U=0;U<Y;++U)J=L.call(_,I[U],U,I)+"",(G=V.get(J))?(P[U]=G,G.__data__=I[U],V.delete(J)):R[U]=new EnterNode(_,I[U]);for(U=0;U<Z;++U)(G=T[U])&&V.get(W[U])===G&&(O[U]=G)}function datum(_){return _.__data__}function selection_data(_,T){if(!arguments.length)return Array.from(this,datum);var R=T?bindKey:bindIndex,P=this._parents,O=this._groups;typeof _!="function"&&(_=constant$4(_));for(var I=O.length,L=new Array(I),U=new Array(I),G=new Array(I),V=0;V<I;++V){var Z=P[V],Y=O[V],W=Y.length,J=arraylike(_.call(Z,Z&&Z.__data__,V,P)),ee=J.length,te=U[V]=new Array(ee),ie=L[V]=new Array(ee),oe=G[V]=new Array(W);R(Z,Y,te,ie,oe,J,T);for(var ae=0,ce=0,le,he;ae<ee;++ae)if(le=te[ae]){for(ae>=ce&&(ce=ae+1);!(he=ie[ce])&&++ce<ee;);le._next=he||null}}return L=new Selection$1(L,P),L._enter=U,L._exit=G,L}function arraylike(_){return typeof _=="object"&&"length"in _?_:Array.from(_)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(_,T,R){var P=this.enter(),O=this,I=this.exit();return typeof _=="function"?(P=_(P),P&&(P=P.selection())):P=P.append(_+""),T!=null&&(O=T(O),O&&(O=O.selection())),R==null?I.remove():R(I),P&&O?P.merge(O).order():O}function selection_merge(_){for(var T=_.selection?_.selection():_,R=this._groups,P=T._groups,O=R.length,I=P.length,L=Math.min(O,I),U=new Array(O),G=0;G<L;++G)for(var V=R[G],Z=P[G],Y=V.length,W=U[G]=new Array(Y),J,ee=0;ee<Y;++ee)(J=V[ee]||Z[ee])&&(W[ee]=J);for(;G<O;++G)U[G]=R[G];return new Selection$1(U,this._parents)}function selection_order(){for(var _=this._groups,T=-1,R=_.length;++T<R;)for(var P=_[T],O=P.length-1,I=P[O],L;--O>=0;)(L=P[O])&&(I&&L.compareDocumentPosition(I)^4&&I.parentNode.insertBefore(L,I),I=L);return this}function selection_sort(_){_||(_=ascending);function T(Y,W){return Y&&W?_(Y.__data__,W.__data__):!Y-!W}for(var R=this._groups,P=R.length,O=new Array(P),I=0;I<P;++I){for(var L=R[I],U=L.length,G=O[I]=new Array(U),V,Z=0;Z<U;++Z)(V=L[Z])&&(G[Z]=V);G.sort(T)}return new Selection$1(O,this._parents).order()}function ascending(_,T){return _<T?-1:_>T?1:_>=T?0:NaN}function selection_call(){var _=arguments[0];return arguments[0]=this,_.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var _=this._groups,T=0,R=_.length;T<R;++T)for(var P=_[T],O=0,I=P.length;O<I;++O){var L=P[O];if(L)return L}return null}function selection_size(){let _=0;for(const T of this)++_;return _}function selection_empty(){return!this.node()}function selection_each(_){for(var T=this._groups,R=0,P=T.length;R<P;++R)for(var O=T[R],I=0,L=O.length,U;I<L;++I)(U=O[I])&&_.call(U,U.__data__,I,O);return this}function attrRemove$1(_){return function(){this.removeAttribute(_)}}function attrRemoveNS$1(_){return function(){this.removeAttributeNS(_.space,_.local)}}function attrConstant$1(_,T){return function(){this.setAttribute(_,T)}}function attrConstantNS$1(_,T){return function(){this.setAttributeNS(_.space,_.local,T)}}function attrFunction$1(_,T){return function(){var R=T.apply(this,arguments);R==null?this.removeAttribute(_):this.setAttribute(_,R)}}function attrFunctionNS$1(_,T){return function(){var R=T.apply(this,arguments);R==null?this.removeAttributeNS(_.space,_.local):this.setAttributeNS(_.space,_.local,R)}}function selection_attr(_,T){var R=namespace(_);if(arguments.length<2){var P=this.node();return R.local?P.getAttributeNS(R.space,R.local):P.getAttribute(R)}return this.each((T==null?R.local?attrRemoveNS$1:attrRemove$1:typeof T=="function"?R.local?attrFunctionNS$1:attrFunction$1:R.local?attrConstantNS$1:attrConstant$1)(R,T))}function defaultView(_){return _.ownerDocument&&_.ownerDocument.defaultView||_.document&&_||_.defaultView}function styleRemove$1(_){return function(){this.style.removeProperty(_)}}function styleConstant$1(_,T,R){return function(){this.style.setProperty(_,T,R)}}function styleFunction$1(_,T,R){return function(){var P=T.apply(this,arguments);P==null?this.style.removeProperty(_):this.style.setProperty(_,P,R)}}function selection_style(_,T,R){return arguments.length>1?this.each((T==null?styleRemove$1:typeof T=="function"?styleFunction$1:styleConstant$1)(_,T,R??"")):styleValue(this.node(),_)}function styleValue(_,T){return _.style.getPropertyValue(T)||defaultView(_).getComputedStyle(_,null).getPropertyValue(T)}function propertyRemove(_){return function(){delete this[_]}}function propertyConstant(_,T){return function(){this[_]=T}}function propertyFunction(_,T){return function(){var R=T.apply(this,arguments);R==null?delete this[_]:this[_]=R}}function selection_property(_,T){return arguments.length>1?this.each((T==null?propertyRemove:typeof T=="function"?propertyFunction:propertyConstant)(_,T)):this.node()[_]}function classArray(_){return _.trim().split(/^|\s+/)}function classList(_){return _.classList||new ClassList(_)}function ClassList(_){this._node=_,this._names=classArray(_.getAttribute("class")||"")}ClassList.prototype={add:function(_){var T=this._names.indexOf(_);T<0&&(this._names.push(_),this._node.setAttribute("class",this._names.join(" ")))},remove:function(_){var T=this._names.indexOf(_);T>=0&&(this._names.splice(T,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(_){return this._names.indexOf(_)>=0}};function classedAdd(_,T){for(var R=classList(_),P=-1,O=T.length;++P<O;)R.add(T[P])}function classedRemove(_,T){for(var R=classList(_),P=-1,O=T.length;++P<O;)R.remove(T[P])}function classedTrue(_){return function(){classedAdd(this,_)}}function classedFalse(_){return function(){classedRemove(this,_)}}function classedFunction(_,T){return function(){(T.apply(this,arguments)?classedAdd:classedRemove)(this,_)}}function selection_classed(_,T){var R=classArray(_+"");if(arguments.length<2){for(var P=classList(this.node()),O=-1,I=R.length;++O<I;)if(!P.contains(R[O]))return!1;return!0}return this.each((typeof T=="function"?classedFunction:T?classedTrue:classedFalse)(R,T))}function textRemove(){this.textContent=""}function textConstant$1(_){return function(){this.textContent=_}}function textFunction$1(_){return function(){var T=_.apply(this,arguments);this.textContent=T??""}}function selection_text(_){return arguments.length?this.each(_==null?textRemove:(typeof _=="function"?textFunction$1:textConstant$1)(_)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(_){return function(){this.innerHTML=_}}function htmlFunction(_){return function(){var T=_.apply(this,arguments);this.innerHTML=T??""}}function selection_html(_){return arguments.length?this.each(_==null?htmlRemove:(typeof _=="function"?htmlFunction:htmlConstant)(_)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(_){var T=typeof _=="function"?_:creator(_);return this.select(function(){return this.appendChild(T.apply(this,arguments))})}function constantNull(){return null}function selection_insert(_,T){var R=typeof _=="function"?_:creator(_),P=T==null?constantNull:typeof T=="function"?T:selector(T);return this.select(function(){return this.insertBefore(R.apply(this,arguments),P.apply(this,arguments)||null)})}function remove(){var _=this.parentNode;_&&_.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var _=this.cloneNode(!1),T=this.parentNode;return T?T.insertBefore(_,this.nextSibling):_}function selection_cloneDeep(){var _=this.cloneNode(!0),T=this.parentNode;return T?T.insertBefore(_,this.nextSibling):_}function selection_clone(_){return this.select(_?selection_cloneDeep:selection_cloneShallow)}function selection_datum(_){return arguments.length?this.property("__data__",_):this.node().__data__}function contextListener(_){return function(T){_.call(this,T,this.__data__)}}function parseTypenames(_){return _.trim().split(/^|\s+/).map(function(T){var R="",P=T.indexOf(".");return P>=0&&(R=T.slice(P+1),T=T.slice(0,P)),{type:T,name:R}})}function onRemove(_){return function(){var T=this.__on;if(T){for(var R=0,P=-1,O=T.length,I;R<O;++R)I=T[R],(!_.type||I.type===_.type)&&I.name===_.name?this.removeEventListener(I.type,I.listener,I.options):T[++P]=I;++P?T.length=P:delete this.__on}}}function onAdd(_,T,R){return function(){var P=this.__on,O,I=contextListener(T);if(P){for(var L=0,U=P.length;L<U;++L)if((O=P[L]).type===_.type&&O.name===_.name){this.removeEventListener(O.type,O.listener,O.options),this.addEventListener(O.type,O.listener=I,O.options=R),O.value=T;return}}this.addEventListener(_.type,I,R),O={type:_.type,name:_.name,value:T,listener:I,options:R},P?P.push(O):this.__on=[O]}}function selection_on(_,T,R){var P=parseTypenames(_+""),O,I=P.length,L;if(arguments.length<2){var U=this.node().__on;if(U){for(var G=0,V=U.length,Z;G<V;++G)for(O=0,Z=U[G];O<I;++O)if((L=P[O]).type===Z.type&&L.name===Z.name)return Z.value}return}for(U=T?onAdd:onRemove,O=0;O<I;++O)this.each(U(P[O],T,R));return this}function dispatchEvent(_,T,R){var P=defaultView(_),O=P.CustomEvent;typeof O=="function"?O=new O(T,R):(O=P.document.createEvent("Event"),R?(O.initEvent(T,R.bubbles,R.cancelable),O.detail=R.detail):O.initEvent(T,!1,!1)),_.dispatchEvent(O)}function dispatchConstant(_,T){return function(){return dispatchEvent(this,_,T)}}function dispatchFunction(_,T){return function(){return dispatchEvent(this,_,T.apply(this,arguments))}}function selection_dispatch(_,T){return this.each((typeof T=="function"?dispatchFunction:dispatchConstant)(_,T))}function*selection_iterator(){for(var _=this._groups,T=0,R=_.length;T<R;++T)for(var P=_[T],O=0,I=P.length,L;O<I;++O)(L=P[O])&&(yield L)}var root$1=[null];function Selection$1(_,T){this._groups=_,this._parents=T}function selection(){return new Selection$1([[document.documentElement]],root$1)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(_){return typeof _=="string"?new Selection$1([[document.querySelector(_)]],[document.documentElement]):new Selection$1([[_]],root$1)}function sourceEvent(_){let T;for(;T=_.sourceEvent;)_=T;return _}function pointof(_,T){if(_=sourceEvent(_),T===void 0&&(T=_.currentTarget),T){var R=T.ownerSVGElement||T;if(R.createSVGPoint){var P=R.createSVGPoint();return P.x=_.clientX,P.y=_.clientY,P=P.matrixTransform(T.getScreenCTM().inverse()),[P.x,P.y]}if(T.getBoundingClientRect){var O=T.getBoundingClientRect();return[_.clientX-O.left-T.clientLeft,_.clientY-O.top-T.clientTop]}}return[_.pageX,_.pageY]}function define(_,T,R){_.prototype=T.prototype=R,R.constructor=_}function extend(_,T){var R=Object.create(_.prototype);for(var P in T)R[P]=T[P];return R}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named$1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color$1,{copy(_){return Object.assign(new this.constructor,this,_)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$1(_){var T,R;return _=(_+"").trim().toLowerCase(),(T=reHex.exec(_))?(R=T[1].length,T=parseInt(T[1],16),R===6?rgbn(T):R===3?new Rgb(T>>8&15|T>>4&240,T>>4&15|T&240,(T&15)<<4|T&15,1):R===8?rgba(T>>24&255,T>>16&255,T>>8&255,(T&255)/255):R===4?rgba(T>>12&15|T>>8&240,T>>8&15|T>>4&240,T>>4&15|T&240,((T&15)<<4|T&15)/255):null):(T=reRgbInteger.exec(_))?new Rgb(T[1],T[2],T[3],1):(T=reRgbPercent.exec(_))?new Rgb(T[1]*255/100,T[2]*255/100,T[3]*255/100,1):(T=reRgbaInteger.exec(_))?rgba(T[1],T[2],T[3],T[4]):(T=reRgbaPercent.exec(_))?rgba(T[1]*255/100,T[2]*255/100,T[3]*255/100,T[4]):(T=reHslPercent.exec(_))?hsla(T[1],T[2]/100,T[3]/100,1):(T=reHslaPercent.exec(_))?hsla(T[1],T[2]/100,T[3]/100,T[4]):named$1.hasOwnProperty(_)?rgbn(named$1[_]):_==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(_){return new Rgb(_>>16&255,_>>8&255,_&255,1)}function rgba(_,T,R,P){return P<=0&&(_=T=R=NaN),new Rgb(_,T,R,P)}function rgbConvert(_){return _ instanceof Color||(_=color$1(_)),_?(_=_.rgb(),new Rgb(_.r,_.g,_.b,_.opacity)):new Rgb}function rgb(_,T,R,P){return arguments.length===1?rgbConvert(_):new Rgb(_,T,R,P??1)}function Rgb(_,T,R,P){this.r=+_,this.g=+T,this.b=+R,this.opacity=+P}define(Rgb,rgb,extend(Color,{brighter(_){return _=_==null?brighter:Math.pow(brighter,_),new Rgb(this.r*_,this.g*_,this.b*_,this.opacity)},darker(_){return _=_==null?darker:Math.pow(darker,_),new Rgb(this.r*_,this.g*_,this.b*_,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const _=clampa(this.opacity);return`${_===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${_===1?")":`, ${_})`}`}function clampa(_){return isNaN(_)?1:Math.max(0,Math.min(1,_))}function clampi(_){return Math.max(0,Math.min(255,Math.round(_)||0))}function hex(_){return _=clampi(_),(_<16?"0":"")+_.toString(16)}function hsla(_,T,R,P){return P<=0?_=T=R=NaN:R<=0||R>=1?_=T=NaN:T<=0&&(_=NaN),new Hsl(_,T,R,P)}function hslConvert(_){if(_ instanceof Hsl)return new Hsl(_.h,_.s,_.l,_.opacity);if(_ instanceof Color||(_=color$1(_)),!_)return new Hsl;if(_ instanceof Hsl)return _;_=_.rgb();var T=_.r/255,R=_.g/255,P=_.b/255,O=Math.min(T,R,P),I=Math.max(T,R,P),L=NaN,U=I-O,G=(I+O)/2;return U?(T===I?L=(R-P)/U+(R<P)*6:R===I?L=(P-T)/U+2:L=(T-R)/U+4,U/=G<.5?I+O:2-I-O,L*=60):U=G>0&&G<1?0:L,new Hsl(L,U,G,_.opacity)}function hsl$1(_,T,R,P){return arguments.length===1?hslConvert(_):new Hsl(_,T,R,P??1)}function Hsl(_,T,R,P){this.h=+_,this.s=+T,this.l=+R,this.opacity=+P}define(Hsl,hsl$1,extend(Color,{brighter(_){return _=_==null?brighter:Math.pow(brighter,_),new Hsl(this.h,this.s,this.l*_,this.opacity)},darker(_){return _=_==null?darker:Math.pow(darker,_),new Hsl(this.h,this.s,this.l*_,this.opacity)},rgb(){var _=this.h%360+(this.h<0)*360,T=isNaN(_)||isNaN(this.s)?0:this.s,R=this.l,P=R+(R<.5?R:1-R)*T,O=2*R-P;return new Rgb(hsl2rgb(_>=240?_-240:_+120,O,P),hsl2rgb(_,O,P),hsl2rgb(_<120?_+240:_-120,O,P),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const _=clampa(this.opacity);return`${_===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${_===1?")":`, ${_})`}`}}));function clamph(_){return _=(_||0)%360,_<0?_+360:_}function clampt(_){return Math.max(0,Math.min(1,_||0))}function hsl2rgb(_,T,R){return(_<60?T+(R-T)*_/60:_<180?R:_<240?T+(R-T)*(240-_)/60:T)*255}const radians$2=Math.PI/180,degrees$2=180/Math.PI,K=18,Xn=.96422,Yn=1,Zn=.82521,t0$1=4/29,t1$1=6/29,t2=3*t1$1*t1$1,t3=t1$1*t1$1*t1$1;function labConvert(_){if(_ instanceof Lab)return new Lab(_.l,_.a,_.b,_.opacity);if(_ instanceof Hcl)return hcl2lab(_);_ instanceof Rgb||(_=rgbConvert(_));var T=rgb2lrgb(_.r),R=rgb2lrgb(_.g),P=rgb2lrgb(_.b),O=xyz2lab((.2225045*T+.7168786*R+.0606169*P)/Yn),I,L;return T===R&&R===P?I=L=O:(I=xyz2lab((.4360747*T+.3850649*R+.1430804*P)/Xn),L=xyz2lab((.0139322*T+.0971045*R+.7141733*P)/Zn)),new Lab(116*O-16,500*(I-O),200*(O-L),_.opacity)}function lab$1(_,T,R,P){return arguments.length===1?labConvert(_):new Lab(_,T,R,P??1)}function Lab(_,T,R,P){this.l=+_,this.a=+T,this.b=+R,this.opacity=+P}define(Lab,lab$1,extend(Color,{brighter(_){return new Lab(this.l+K*(_??1),this.a,this.b,this.opacity)},darker(_){return new Lab(this.l-K*(_??1),this.a,this.b,this.opacity)},rgb(){var _=(this.l+16)/116,T=isNaN(this.a)?_:_+this.a/500,R=isNaN(this.b)?_:_-this.b/200;return T=Xn*lab2xyz(T),_=Yn*lab2xyz(_),R=Zn*lab2xyz(R),new Rgb(lrgb2rgb(3.1338561*T-1.6168667*_-.4906146*R),lrgb2rgb(-.9787684*T+1.9161415*_+.033454*R),lrgb2rgb(.0719453*T-.2289914*_+1.4052427*R),this.opacity)}}));function xyz2lab(_){return _>t3?Math.pow(_,1/3):_/t2+t0$1}function lab2xyz(_){return _>t1$1?_*_*_:t2*(_-t0$1)}function lrgb2rgb(_){return 255*(_<=.0031308?12.92*_:1.055*Math.pow(_,1/2.4)-.055)}function rgb2lrgb(_){return(_/=255)<=.04045?_/12.92:Math.pow((_+.055)/1.055,2.4)}function hclConvert(_){if(_ instanceof Hcl)return new Hcl(_.h,_.c,_.l,_.opacity);if(_ instanceof Lab||(_=labConvert(_)),_.a===0&&_.b===0)return new Hcl(NaN,0<_.l&&_.l<100?0:NaN,_.l,_.opacity);var T=Math.atan2(_.b,_.a)*degrees$2;return new Hcl(T<0?T+360:T,Math.sqrt(_.a*_.a+_.b*_.b),_.l,_.opacity)}function hcl$1(_,T,R,P){return arguments.length===1?hclConvert(_):new Hcl(_,T,R,P??1)}function Hcl(_,T,R,P){this.h=+_,this.c=+T,this.l=+R,this.opacity=+P}function hcl2lab(_){if(isNaN(_.h))return new Lab(_.l,0,0,_.opacity);var T=_.h*radians$2;return new Lab(_.l,Math.cos(T)*_.c,Math.sin(T)*_.c,_.opacity)}define(Hcl,hcl$1,extend(Color,{brighter(_){return new Hcl(this.h,this.c,this.l+K*(_??1),this.opacity)},darker(_){return new Hcl(this.h,this.c,this.l-K*(_??1),this.opacity)},rgb(){return hcl2lab(this).rgb()}}));var A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelixConvert(_){if(_ instanceof Cubehelix)return new Cubehelix(_.h,_.s,_.l,_.opacity);_ instanceof Rgb||(_=rgbConvert(_));var T=_.r/255,R=_.g/255,P=_.b/255,O=(BC_DA*P+ED*T-EB*R)/(BC_DA+ED-EB),I=P-O,L=(E*(R-O)-C*I)/D,U=Math.sqrt(L*L+I*I)/(E*O*(1-O)),G=U?Math.atan2(L,I)*degrees$2-120:NaN;return new Cubehelix(G<0?G+360:G,U,O,_.opacity)}function cubehelix$1(_,T,R,P){return arguments.length===1?cubehelixConvert(_):new Cubehelix(_,T,R,P??1)}function Cubehelix(_,T,R,P){this.h=+_,this.s=+T,this.l=+R,this.opacity=+P}define(Cubehelix,cubehelix$1,extend(Color,{brighter(_){return _=_==null?brighter:Math.pow(brighter,_),new Cubehelix(this.h,this.s,this.l*_,this.opacity)},darker(_){return _=_==null?darker:Math.pow(darker,_),new Cubehelix(this.h,this.s,this.l*_,this.opacity)},rgb(){var _=isNaN(this.h)?0:(this.h+120)*radians$2,T=+this.l,R=isNaN(this.s)?0:this.s*T*(1-T),P=Math.cos(_),O=Math.sin(_);return new Rgb(255*(T+R*(A*P+B*O)),255*(T+R*(C*P+D*O)),255*(T+R*(E*P)),this.opacity)}}));function basis(_,T,R,P,O){var I=_*_,L=I*_;return((1-3*_+3*I-L)*T+(4-6*I+3*L)*R+(1+3*_+3*I-3*L)*P+L*O)/6}function basis$1(_){var T=_.length-1;return function(R){var P=R<=0?R=0:R>=1?(R=1,T-1):Math.floor(R*T),O=_[P],I=_[P+1],L=P>0?_[P-1]:2*O-I,U=P<T-1?_[P+2]:2*I-O;return basis((R-P/T)*T,L,O,I,U)}}const constant$3=_=>()=>_;function linear$1(_,T){return function(R){return _+R*T}}function exponential(_,T,R){return _=Math.pow(_,R),T=Math.pow(T,R)-_,R=1/R,function(P){return Math.pow(_+P*T,R)}}function hue(_,T){var R=T-_;return R?linear$1(_,R>180||R<-180?R-360*Math.round(R/360):R):constant$3(isNaN(_)?T:_)}function gamma(_){return(_=+_)==1?nogamma:function(T,R){return R-T?exponential(T,R,_):constant$3(isNaN(T)?R:T)}}function nogamma(_,T){var R=T-_;return R?linear$1(_,R):constant$3(isNaN(_)?T:_)}const interpolateRgb=(function _(T){var R=gamma(T);function P(O,I){var L=R((O=rgb(O)).r,(I=rgb(I)).r),U=R(O.g,I.g),G=R(O.b,I.b),V=nogamma(O.opacity,I.opacity);return function(Z){return O.r=L(Z),O.g=U(Z),O.b=G(Z),O.opacity=V(Z),O+""}}return P.gamma=_,P})(1);function rgbSpline(_){return function(T){var R=T.length,P=new Array(R),O=new Array(R),I=new Array(R),L,U;for(L=0;L<R;++L)U=rgb(T[L]),P[L]=U.r||0,O[L]=U.g||0,I[L]=U.b||0;return P=_(P),O=_(O),I=_(I),U.opacity=1,function(G){return U.r=P(G),U.g=O(G),U.b=I(G),U+""}}}var rgbBasis=rgbSpline(basis$1);function numberArray(_,T){T||(T=[]);var R=_?Math.min(T.length,_.length):0,P=T.slice(),O;return function(I){for(O=0;O<R;++O)P[O]=_[O]*(1-I)+T[O]*I;return P}}function isNumberArray$1(_){return ArrayBuffer.isView(_)&&!(_ instanceof DataView)}function genericArray(_,T){var R=T?T.length:0,P=_?Math.min(R,_.length):0,O=new Array(P),I=new Array(R),L;for(L=0;L<P;++L)O[L]=interpolate$1(_[L],T[L]);for(;L<R;++L)I[L]=T[L];return function(U){for(L=0;L<P;++L)I[L]=O[L](U);return I}}function date$1(_,T){var R=new Date;return _=+_,T=+T,function(P){return R.setTime(_*(1-P)+T*P),R}}function interpolateNumber(_,T){return _=+_,T=+T,function(R){return _*(1-R)+T*R}}function object(_,T){var R={},P={},O;(_===null||typeof _!="object")&&(_={}),(T===null||typeof T!="object")&&(T={});for(O in T)O in _?R[O]=interpolate$1(_[O],T[O]):P[O]=T[O];return function(I){for(O in R)P[O]=R[O](I);return P}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero$2(_){return function(){return _}}function one$1(_){return function(T){return _(T)+""}}function interpolateString(_,T){var R=reA.lastIndex=reB.lastIndex=0,P,O,I,L=-1,U=[],G=[];for(_=_+"",T=T+"";(P=reA.exec(_))&&(O=reB.exec(T));)(I=O.index)>R&&(I=T.slice(R,I),U[L]?U[L]+=I:U[++L]=I),(P=P[0])===(O=O[0])?U[L]?U[L]+=O:U[++L]=O:(U[++L]=null,G.push({i:L,x:interpolateNumber(P,O)})),R=reB.lastIndex;return R<T.length&&(I=T.slice(R),U[L]?U[L]+=I:U[++L]=I),U.length<2?G[0]?one$1(G[0].x):zero$2(T):(T=G.length,function(V){for(var Z=0,Y;Z<T;++Z)U[(Y=G[Z]).i]=Y.x(V);return U.join("")})}function interpolate$1(_,T){var R=typeof T,P;return T==null||R==="boolean"?constant$3(T):(R==="number"?interpolateNumber:R==="string"?(P=color$1(T))?(T=P,interpolateRgb):interpolateString:T instanceof color$1?interpolateRgb:T instanceof Date?date$1:isNumberArray$1(T)?numberArray:Array.isArray(T)?genericArray:typeof T.valueOf!="function"&&typeof T.toString!="function"||isNaN(T)?object:interpolateNumber)(_,T)}function interpolateRound(_,T){return _=+_,T=+T,function(R){return Math.round(_*(1-R)+T*R)}}var degrees$1=180/Math.PI,identity$7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(_,T,R,P,O,I){var L,U,G;return(L=Math.sqrt(_*_+T*T))&&(_/=L,T/=L),(G=_*R+T*P)&&(R-=_*G,P-=T*G),(U=Math.sqrt(R*R+P*P))&&(R/=U,P/=U,G/=U),_*P<T*R&&(_=-_,T=-T,G=-G,L=-L),{translateX:O,translateY:I,rotate:Math.atan2(T,_)*degrees$1,skewX:Math.atan(G)*degrees$1,scaleX:L,scaleY:U}}var svgNode;function parseCss(_){const T=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(_+"");return T.isIdentity?identity$7:decompose(T.a,T.b,T.c,T.d,T.e,T.f)}function parseSvg(_){return _==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",_),!(_=svgNode.transform.baseVal.consolidate()))?identity$7:(_=_.matrix,decompose(_.a,_.b,_.c,_.d,_.e,_.f))}function interpolateTransform(_,T,R,P){function O(V){return V.length?V.pop()+" ":""}function I(V,Z,Y,W,J,ee){if(V!==Y||Z!==W){var te=J.push("translate(",null,T,null,R);ee.push({i:te-4,x:interpolateNumber(V,Y)},{i:te-2,x:interpolateNumber(Z,W)})}else(Y||W)&&J.push("translate("+Y+T+W+R)}function L(V,Z,Y,W){V!==Z?(V-Z>180?Z+=360:Z-V>180&&(V+=360),W.push({i:Y.push(O(Y)+"rotate(",null,P)-2,x:interpolateNumber(V,Z)})):Z&&Y.push(O(Y)+"rotate("+Z+P)}function U(V,Z,Y,W){V!==Z?W.push({i:Y.push(O(Y)+"skewX(",null,P)-2,x:interpolateNumber(V,Z)}):Z&&Y.push(O(Y)+"skewX("+Z+P)}function G(V,Z,Y,W,J,ee){if(V!==Y||Z!==W){var te=J.push(O(J)+"scale(",null,",",null,")");ee.push({i:te-4,x:interpolateNumber(V,Y)},{i:te-2,x:interpolateNumber(Z,W)})}else(Y!==1||W!==1)&&J.push(O(J)+"scale("+Y+","+W+")")}return function(V,Z){var Y=[],W=[];return V=_(V),Z=_(Z),I(V.translateX,V.translateY,Z.translateX,Z.translateY,Y,W),L(V.rotate,Z.rotate,Y,W),U(V.skewX,Z.skewX,Y,W),G(V.scaleX,V.scaleY,Z.scaleX,Z.scaleY,Y,W),V=Z=null,function(J){for(var ee=-1,te=W.length,ie;++ee<te;)Y[(ie=W[ee]).i]=ie.x(J);return Y.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")");function hsl(_){return function(T,R){var P=_((T=hsl$1(T)).h,(R=hsl$1(R)).h),O=nogamma(T.s,R.s),I=nogamma(T.l,R.l),L=nogamma(T.opacity,R.opacity);return function(U){return T.h=P(U),T.s=O(U),T.l=I(U),T.opacity=L(U),T+""}}}const interpolateHsl=hsl(hue);function lab(_,T){var R=nogamma((_=lab$1(_)).l,(T=lab$1(T)).l),P=nogamma(_.a,T.a),O=nogamma(_.b,T.b),I=nogamma(_.opacity,T.opacity);return function(L){return _.l=R(L),_.a=P(L),_.b=O(L),_.opacity=I(L),_+""}}function hcl(_){return function(T,R){var P=_((T=hcl$1(T)).h,(R=hcl$1(R)).h),O=nogamma(T.c,R.c),I=nogamma(T.l,R.l),L=nogamma(T.opacity,R.opacity);return function(U){return T.h=P(U),T.c=O(U),T.l=I(U),T.opacity=L(U),T+""}}}const interpolateHcl=hcl(hue);function cubehelix(_){return(function T(R){R=+R;function P(O,I){var L=_((O=cubehelix$1(O)).h,(I=cubehelix$1(I)).h),U=nogamma(O.s,I.s),G=nogamma(O.l,I.l),V=nogamma(O.opacity,I.opacity);return function(Z){return O.h=L(Z),O.s=U(Z),O.l=G(Math.pow(Z,R)),O.opacity=V(Z),O+""}}return P.gamma=T,P})(1)}cubehelix(hue);var cubehelixLong=cubehelix(nogamma);function piecewise(_,T){T===void 0&&(T=_,_=interpolate$1);for(var R=0,P=T.length-1,O=T[0],I=new Array(P<0?0:P);R<P;)I[R]=_(O,O=T[++R]);return function(L){var U=Math.max(0,Math.min(P-1,Math.floor(L*=P)));return I[U](L-U)}}function quantize(_,T){for(var R=new Array(T),P=0;P<T;++P)R[P]=_(P/(T-1));return R}var frame$1=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(_){setTimeout(_,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(_,T,R){if(typeof _!="function")throw new TypeError("callback is not a function");R=(R==null?now():+R)+(T==null?0:+T),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=_,this._time=R,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(_,T,R){var P=new Timer;return P.restart(_,T,R),P}function timerFlush(){now(),++frame$1;for(var _=taskHead,T;_;)(T=clockNow-_._time)>=0&&_._call.call(void 0,T),_=_._next;--frame$1}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame$1=timeout$1=0;try{timerFlush()}finally{frame$1=0,nap(),clockNow=0}}function poke(){var _=clock.now(),T=_-clockLast;T>pokeDelay&&(clockSkew-=T,clockLast=_)}function nap(){for(var _,T=taskHead,R,P=1/0;T;)T._call?(P>T._time&&(P=T._time),_=T,T=T._next):(R=T._next,T._next=null,T=_?_._next=R:taskHead=R);taskTail=_,sleep(P)}function sleep(_){if(!frame$1){timeout$1&&(timeout$1=clearTimeout(timeout$1));var T=_-clockNow;T>24?(_<1/0&&(timeout$1=setTimeout(wake,_-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame$1=1,setFrame(wake))}}function timeout(_,T,R){var P=new Timer;return T=T==null?0:+T,P.restart(O=>{P.stop(),_(O+T)},T,R),P}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(_,T,R,P,O,I){var L=_.__transition;if(!L)_.__transition={};else if(R in L)return;create$1(_,R,{name:T,index:P,group:O,on:emptyOn,tween:emptyTween,time:I.time,delay:I.delay,duration:I.duration,ease:I.ease,timer:null,state:CREATED})}function init(_,T){var R=get(_,T);if(R.state>CREATED)throw new Error("too late; already scheduled");return R}function set(_,T){var R=get(_,T);if(R.state>STARTED)throw new Error("too late; already running");return R}function get(_,T){var R=_.__transition;if(!R||!(R=R[T]))throw new Error("transition not found");return R}function create$1(_,T,R){var P=_.__transition,O;P[T]=R,R.timer=timer(I,0,R.time);function I(V){R.state=SCHEDULED,R.timer.restart(L,R.delay,R.time),R.delay<=V&&L(V-R.delay)}function L(V){var Z,Y,W,J;if(R.state!==SCHEDULED)return G();for(Z in P)if(J=P[Z],J.name===R.name){if(J.state===STARTED)return timeout(L);J.state===RUNNING?(J.state=ENDED,J.timer.stop(),J.on.call("interrupt",_,_.__data__,J.index,J.group),delete P[Z]):+Z<T&&(J.state=ENDED,J.timer.stop(),J.on.call("cancel",_,_.__data__,J.index,J.group),delete P[Z])}if(timeout(function(){R.state===STARTED&&(R.state=RUNNING,R.timer.restart(U,R.delay,R.time),U(V))}),R.state=STARTING,R.on.call("start",_,_.__data__,R.index,R.group),R.state===STARTING){for(R.state=STARTED,O=new Array(W=R.tween.length),Z=0,Y=-1;Z<W;++Z)(J=R.tween[Z].value.call(_,_.__data__,R.index,R.group))&&(O[++Y]=J);O.length=Y+1}}function U(V){for(var Z=V<R.duration?R.ease.call(null,V/R.duration):(R.timer.restart(G),R.state=ENDING,1),Y=-1,W=O.length;++Y<W;)O[Y].call(_,Z);R.state===ENDING&&(R.on.call("end",_,_.__data__,R.index,R.group),G())}function G(){R.state=ENDED,R.timer.stop(),delete P[T];for(var V in P)return;delete _.__transition}}function interrupt(_,T){var R=_.__transition,P,O,I=!0,L;if(R){T=T==null?null:T+"";for(L in R){if((P=R[L]).name!==T){I=!1;continue}O=P.state>STARTING&&P.state<ENDING,P.state=ENDED,P.timer.stop(),P.on.call(O?"interrupt":"cancel",_,_.__data__,P.index,P.group),delete R[L]}I&&delete _.__transition}}function selection_interrupt(_){return this.each(function(){interrupt(this,_)})}function tweenRemove(_,T){var R,P;return function(){var O=set(this,_),I=O.tween;if(I!==R){P=R=I;for(var L=0,U=P.length;L<U;++L)if(P[L].name===T){P=P.slice(),P.splice(L,1);break}}O.tween=P}}function tweenFunction(_,T,R){var P,O;if(typeof R!="function")throw new Error;return function(){var I=set(this,_),L=I.tween;if(L!==P){O=(P=L).slice();for(var U={name:T,value:R},G=0,V=O.length;G<V;++G)if(O[G].name===T){O[G]=U;break}G===V&&O.push(U)}I.tween=O}}function transition_tween(_,T){var R=this._id;if(_+="",arguments.length<2){for(var P=get(this.node(),R).tween,O=0,I=P.length,L;O<I;++O)if((L=P[O]).name===_)return L.value;return null}return this.each((T==null?tweenRemove:tweenFunction)(R,_,T))}function tweenValue(_,T,R){var P=_._id;return _.each(function(){var O=set(this,P);(O.value||(O.value={}))[T]=R.apply(this,arguments)}),function(O){return get(O,P).value[T]}}function interpolate(_,T){var R;return(typeof T=="number"?interpolateNumber:T instanceof color$1?interpolateRgb:(R=color$1(T))?(T=R,interpolateRgb):interpolateString)(_,T)}function attrRemove(_){return function(){this.removeAttribute(_)}}function attrRemoveNS(_){return function(){this.removeAttributeNS(_.space,_.local)}}function attrConstant(_,T,R){var P,O=R+"",I;return function(){var L=this.getAttribute(_);return L===O?null:L===P?I:I=T(P=L,R)}}function attrConstantNS(_,T,R){var P,O=R+"",I;return function(){var L=this.getAttributeNS(_.space,_.local);return L===O?null:L===P?I:I=T(P=L,R)}}function attrFunction(_,T,R){var P,O,I;return function(){var L,U=R(this),G;return U==null?void this.removeAttribute(_):(L=this.getAttribute(_),G=U+"",L===G?null:L===P&&G===O?I:(O=G,I=T(P=L,U)))}}function attrFunctionNS(_,T,R){var P,O,I;return function(){var L,U=R(this),G;return U==null?void this.removeAttributeNS(_.space,_.local):(L=this.getAttributeNS(_.space,_.local),G=U+"",L===G?null:L===P&&G===O?I:(O=G,I=T(P=L,U)))}}function transition_attr(_,T){var R=namespace(_),P=R==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(_,typeof T=="function"?(R.local?attrFunctionNS:attrFunction)(R,P,tweenValue(this,"attr."+_,T)):T==null?(R.local?attrRemoveNS:attrRemove)(R):(R.local?attrConstantNS:attrConstant)(R,P,T))}function attrInterpolate(_,T){return function(R){this.setAttribute(_,T.call(this,R))}}function attrInterpolateNS(_,T){return function(R){this.setAttributeNS(_.space,_.local,T.call(this,R))}}function attrTweenNS(_,T){var R,P;function O(){var I=T.apply(this,arguments);return I!==P&&(R=(P=I)&&attrInterpolateNS(_,I)),R}return O._value=T,O}function attrTween(_,T){var R,P;function O(){var I=T.apply(this,arguments);return I!==P&&(R=(P=I)&&attrInterpolate(_,I)),R}return O._value=T,O}function transition_attrTween(_,T){var R="attr."+_;if(arguments.length<2)return(R=this.tween(R))&&R._value;if(T==null)return this.tween(R,null);if(typeof T!="function")throw new Error;var P=namespace(_);return this.tween(R,(P.local?attrTweenNS:attrTween)(P,T))}function delayFunction(_,T){return function(){init(this,_).delay=+T.apply(this,arguments)}}function delayConstant(_,T){return T=+T,function(){init(this,_).delay=T}}function transition_delay(_){var T=this._id;return arguments.length?this.each((typeof _=="function"?delayFunction:delayConstant)(T,_)):get(this.node(),T).delay}function durationFunction(_,T){return function(){set(this,_).duration=+T.apply(this,arguments)}}function durationConstant(_,T){return T=+T,function(){set(this,_).duration=T}}function transition_duration(_){var T=this._id;return arguments.length?this.each((typeof _=="function"?durationFunction:durationConstant)(T,_)):get(this.node(),T).duration}function easeConstant(_,T){if(typeof T!="function")throw new Error;return function(){set(this,_).ease=T}}function transition_ease(_){var T=this._id;return arguments.length?this.each(easeConstant(T,_)):get(this.node(),T).ease}function easeVarying(_,T){return function(){var R=T.apply(this,arguments);if(typeof R!="function")throw new Error;set(this,_).ease=R}}function transition_easeVarying(_){if(typeof _!="function")throw new Error;return this.each(easeVarying(this._id,_))}function transition_filter(_){typeof _!="function"&&(_=matcher(_));for(var T=this._groups,R=T.length,P=new Array(R),O=0;O<R;++O)for(var I=T[O],L=I.length,U=P[O]=[],G,V=0;V<L;++V)(G=I[V])&&_.call(G,G.__data__,V,I)&&U.push(G);return new Transition(P,this._parents,this._name,this._id)}function transition_merge(_){if(_._id!==this._id)throw new Error;for(var T=this._groups,R=_._groups,P=T.length,O=R.length,I=Math.min(P,O),L=new Array(P),U=0;U<I;++U)for(var G=T[U],V=R[U],Z=G.length,Y=L[U]=new Array(Z),W,J=0;J<Z;++J)(W=G[J]||V[J])&&(Y[J]=W);for(;U<P;++U)L[U]=T[U];return new Transition(L,this._parents,this._name,this._id)}function start(_){return(_+"").trim().split(/^|\s+/).every(function(T){var R=T.indexOf(".");return R>=0&&(T=T.slice(0,R)),!T||T==="start"})}function onFunction(_,T,R){var P,O,I=start(T)?init:set;return function(){var L=I(this,_),U=L.on;U!==P&&(O=(P=U).copy()).on(T,R),L.on=O}}function transition_on(_,T){var R=this._id;return arguments.length<2?get(this.node(),R).on.on(_):this.each(onFunction(R,_,T))}function removeFunction(_){return function(){var T=this.parentNode;for(var R in this.__transition)if(+R!==_)return;T&&T.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(_){var T=this._name,R=this._id;typeof _!="function"&&(_=selector(_));for(var P=this._groups,O=P.length,I=new Array(O),L=0;L<O;++L)for(var U=P[L],G=U.length,V=I[L]=new Array(G),Z,Y,W=0;W<G;++W)(Z=U[W])&&(Y=_.call(Z,Z.__data__,W,U))&&("__data__"in Z&&(Y.__data__=Z.__data__),V[W]=Y,schedule(V[W],T,R,W,V,get(Z,R)));return new Transition(I,this._parents,T,R)}function transition_selectAll(_){var T=this._name,R=this._id;typeof _!="function"&&(_=selectorAll(_));for(var P=this._groups,O=P.length,I=[],L=[],U=0;U<O;++U)for(var G=P[U],V=G.length,Z,Y=0;Y<V;++Y)if(Z=G[Y]){for(var W=_.call(Z,Z.__data__,Y,G),J,ee=get(Z,R),te=0,ie=W.length;te<ie;++te)(J=W[te])&&schedule(J,T,R,te,W,ee);I.push(W),L.push(Z)}return new Transition(I,L,T,R)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(_,T){var R,P,O;return function(){var I=styleValue(this,_),L=(this.style.removeProperty(_),styleValue(this,_));return I===L?null:I===R&&L===P?O:O=T(R=I,P=L)}}function styleRemove(_){return function(){this.style.removeProperty(_)}}function styleConstant(_,T,R){var P,O=R+"",I;return function(){var L=styleValue(this,_);return L===O?null:L===P?I:I=T(P=L,R)}}function styleFunction(_,T,R){var P,O,I;return function(){var L=styleValue(this,_),U=R(this),G=U+"";return U==null&&(G=U=(this.style.removeProperty(_),styleValue(this,_))),L===G?null:L===P&&G===O?I:(O=G,I=T(P=L,U))}}function styleMaybeRemove(_,T){var R,P,O,I="style."+T,L="end."+I,U;return function(){var G=set(this,_),V=G.on,Z=G.value[I]==null?U||(U=styleRemove(T)):void 0;(V!==R||O!==Z)&&(P=(R=V).copy()).on(L,O=Z),G.on=P}}function transition_style(_,T,R){var P=(_+="")=="transform"?interpolateTransformCss:interpolate;return T==null?this.styleTween(_,styleNull(_,P)).on("end.style."+_,styleRemove(_)):typeof T=="function"?this.styleTween(_,styleFunction(_,P,tweenValue(this,"style."+_,T))).each(styleMaybeRemove(this._id,_)):this.styleTween(_,styleConstant(_,P,T),R).on("end.style."+_,null)}function styleInterpolate(_,T,R){return function(P){this.style.setProperty(_,T.call(this,P),R)}}function styleTween(_,T,R){var P,O;function I(){var L=T.apply(this,arguments);return L!==O&&(P=(O=L)&&styleInterpolate(_,L,R)),P}return I._value=T,I}function transition_styleTween(_,T,R){var P="style."+(_+="");if(arguments.length<2)return(P=this.tween(P))&&P._value;if(T==null)return this.tween(P,null);if(typeof T!="function")throw new Error;return this.tween(P,styleTween(_,T,R??""))}function textConstant(_){return function(){this.textContent=_}}function textFunction(_){return function(){var T=_(this);this.textContent=T??""}}function transition_text(_){return this.tween("text",typeof _=="function"?textFunction(tweenValue(this,"text",_)):textConstant(_==null?"":_+""))}function textInterpolate(_){return function(T){this.textContent=_.call(this,T)}}function textTween(_){var T,R;function P(){var O=_.apply(this,arguments);return O!==R&&(T=(R=O)&&textInterpolate(O)),T}return P._value=_,P}function transition_textTween(_){var T="text";if(arguments.length<1)return(T=this.tween(T))&&T._value;if(_==null)return this.tween(T,null);if(typeof _!="function")throw new Error;return this.tween(T,textTween(_))}function transition_transition(){for(var _=this._name,T=this._id,R=newId(),P=this._groups,O=P.length,I=0;I<O;++I)for(var L=P[I],U=L.length,G,V=0;V<U;++V)if(G=L[V]){var Z=get(G,T);schedule(G,_,R,V,L,{time:Z.time+Z.delay+Z.duration,delay:0,duration:Z.duration,ease:Z.ease})}return new Transition(P,this._parents,_,R)}function transition_end(){var _,T,R=this,P=R._id,O=R.size();return new Promise(function(I,L){var U={value:L},G={value:function(){--O===0&&I()}};R.each(function(){var V=set(this,P),Z=V.on;Z!==_&&(T=(_=Z).copy(),T._.cancel.push(U),T._.interrupt.push(U),T._.end.push(G)),V.on=T}),O===0&&I()})}var id=0;function Transition(_,T,R,P){this._groups=_,this._parents=T,this._name=R,this._id=P}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(_){return((_*=2)<=1?_*_*_:(_-=2)*_*_+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit$1(_,T){for(var R;!(R=_.__transition)||!(R=R[T]);)if(!(_=_.parentNode))throw new Error(`transition ${T} not found`);return R}function selection_transition(_){var T,R;_ instanceof Transition?(T=_._id,_=_._name):(T=newId(),(R=defaultTiming).time=now(),_=_==null?null:_+"");for(var P=this._groups,O=P.length,I=0;I<O;++I)for(var L=P[I],U=L.length,G,V=0;V<U;++V)(G=L[V])&&schedule(G,_,T,V,L,R||inherit$1(G,T));return new Transition(P,this._parents,_,T)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const pi$3=Math.PI,tau$3=2*pi$3,epsilon$2=1e-6,tauEpsilon=tau$3-epsilon$2;function append$1(_){this._+=_[0];for(let T=1,R=_.length;T<R;++T)this._+=arguments[T]+_[T]}function appendRound$1(_){let T=Math.floor(_);if(!(T>=0))throw new Error(`invalid digits: ${_}`);if(T>15)return append$1;const R=10**T;return function(P){this._+=P[0];for(let O=1,I=P.length;O<I;++O)this._+=Math.round(arguments[O]*R)/R+P[O]}}class Path{constructor(T){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=T==null?append$1:appendRound$1(T)}moveTo(T,R){this._append`M${this._x0=this._x1=+T},${this._y0=this._y1=+R}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(T,R){this._append`L${this._x1=+T},${this._y1=+R}`}quadraticCurveTo(T,R,P,O){this._append`Q${+T},${+R},${this._x1=+P},${this._y1=+O}`}bezierCurveTo(T,R,P,O,I,L){this._append`C${+T},${+R},${+P},${+O},${this._x1=+I},${this._y1=+L}`}arcTo(T,R,P,O,I){if(T=+T,R=+R,P=+P,O=+O,I=+I,I<0)throw new Error(`negative radius: ${I}`);let L=this._x1,U=this._y1,G=P-T,V=O-R,Z=L-T,Y=U-R,W=Z*Z+Y*Y;if(this._x1===null)this._append`M${this._x1=T},${this._y1=R}`;else if(W>epsilon$2)if(!(Math.abs(Y*G-V*Z)>epsilon$2)||!I)this._append`L${this._x1=T},${this._y1=R}`;else{let J=P-L,ee=O-U,te=G*G+V*V,ie=J*J+ee*ee,oe=Math.sqrt(te),ae=Math.sqrt(W),ce=I*Math.tan((pi$3-Math.acos((te+W-ie)/(2*oe*ae)))/2),le=ce/ae,he=ce/oe;Math.abs(le-1)>epsilon$2&&this._append`L${T+le*Z},${R+le*Y}`,this._append`A${I},${I},0,0,${+(Y*J>Z*ee)},${this._x1=T+he*G},${this._y1=R+he*V}`}}arc(T,R,P,O,I,L){if(T=+T,R=+R,P=+P,L=!!L,P<0)throw new Error(`negative radius: ${P}`);let U=P*Math.cos(O),G=P*Math.sin(O),V=T+U,Z=R+G,Y=1^L,W=L?O-I:I-O;this._x1===null?this._append`M${V},${Z}`:(Math.abs(this._x1-V)>epsilon$2||Math.abs(this._y1-Z)>epsilon$2)&&this._append`L${V},${Z}`,P&&(W<0&&(W=W%tau$3+tau$3),W>tauEpsilon?this._append`A${P},${P},0,1,${Y},${T-U},${R-G}A${P},${P},0,1,${Y},${this._x1=V},${this._y1=Z}`:W>epsilon$2&&this._append`A${P},${P},0,${+(W>=pi$3)},${Y},${this._x1=T+P*Math.cos(I)},${this._y1=R+P*Math.sin(I)}`)}rect(T,R,P,O){this._append`M${this._x0=this._x1=+T},${this._y0=this._y1=+R}h${P=+P}v${+O}h${-P}Z`}toString(){return this._}}function pathRound(_=3){return new Path(+_)}function formatDecimal(_){return Math.abs(_=Math.round(_))>=1e21?_.toLocaleString("en").replace(/,/g,""):_.toString(10)}function formatDecimalParts(_,T){if((R=(_=T?_.toExponential(T-1):_.toExponential()).indexOf("e"))<0)return null;var R,P=_.slice(0,R);return[P.length>1?P[0]+P.slice(2):P,+_.slice(R+1)]}function exponent(_){return _=formatDecimalParts(Math.abs(_)),_?_[1]:NaN}function formatGroup(_,T){return function(R,P){for(var O=R.length,I=[],L=0,U=_[0],G=0;O>0&&U>0&&(G+U+1>P&&(U=Math.max(1,P-G)),I.push(R.substring(O-=U,O+U)),!((G+=U+1)>P));)U=_[L=(L+1)%_.length];return I.reverse().join(T)}}function formatNumerals(_){return function(T){return T.replace(/[0-9]/g,function(R){return _[+R]})}}var re$1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(_){if(!(T=re$1.exec(_)))throw new Error("invalid format: "+_);var T;return new FormatSpecifier({fill:T[1],align:T[2],sign:T[3],symbol:T[4],zero:T[5],width:T[6],comma:T[7],precision:T[8]&&T[8].slice(1),trim:T[9],type:T[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(_){this.fill=_.fill===void 0?" ":_.fill+"",this.align=_.align===void 0?">":_.align+"",this.sign=_.sign===void 0?"-":_.sign+"",this.symbol=_.symbol===void 0?"":_.symbol+"",this.zero=!!_.zero,this.width=_.width===void 0?void 0:+_.width,this.comma=!!_.comma,this.precision=_.precision===void 0?void 0:+_.precision,this.trim=!!_.trim,this.type=_.type===void 0?"":_.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(_){e:for(var T=_.length,R=1,P=-1,O;R<T;++R)switch(_[R]){case".":P=O=R;break;case"0":P===0&&(P=R),O=R;break;default:if(!+_[R])break e;P>0&&(P=0);break}return P>0?_.slice(0,P)+_.slice(O+1):_}var prefixExponent;function formatPrefixAuto(_,T){var R=formatDecimalParts(_,T);if(!R)return _+"";var P=R[0],O=R[1],I=O-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(O/3)))*3)+1,L=P.length;return I===L?P:I>L?P+new Array(I-L+1).join("0"):I>0?P.slice(0,I)+"."+P.slice(I):"0."+new Array(1-I).join("0")+formatDecimalParts(_,Math.max(0,T+I-1))[0]}function formatRounded(_,T){var R=formatDecimalParts(_,T);if(!R)return _+"";var P=R[0],O=R[1];return O<0?"0."+new Array(-O).join("0")+P:P.length>O+1?P.slice(0,O+1)+"."+P.slice(O+1):P+new Array(O-P.length+2).join("0")}const formatTypes={"%":(_,T)=>(_*100).toFixed(T),b:_=>Math.round(_).toString(2),c:_=>_+"",d:formatDecimal,e:(_,T)=>_.toExponential(T),f:(_,T)=>_.toFixed(T),g:(_,T)=>_.toPrecision(T),o:_=>Math.round(_).toString(8),p:(_,T)=>formatRounded(_*100,T),r:formatRounded,s:formatPrefixAuto,X:_=>Math.round(_).toString(16).toUpperCase(),x:_=>Math.round(_).toString(16)};function identity$6(_){return _}var map$1=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(_){var T=_.grouping===void 0||_.thousands===void 0?identity$6:formatGroup(map$1.call(_.grouping,Number),_.thousands+""),R=_.currency===void 0?"":_.currency[0]+"",P=_.currency===void 0?"":_.currency[1]+"",O=_.decimal===void 0?".":_.decimal+"",I=_.numerals===void 0?identity$6:formatNumerals(map$1.call(_.numerals,String)),L=_.percent===void 0?"%":_.percent+"",U=_.minus===void 0?"":_.minus+"",G=_.nan===void 0?"NaN":_.nan+"";function V(Y){Y=formatSpecifier(Y);var W=Y.fill,J=Y.align,ee=Y.sign,te=Y.symbol,ie=Y.zero,oe=Y.width,ae=Y.comma,ce=Y.precision,le=Y.trim,he=Y.type;he==="n"?(ae=!0,he="g"):formatTypes[he]||(ce===void 0&&(ce=12),le=!0,he="g"),(ie||W==="0"&&J==="=")&&(ie=!0,W="0",J="=");var me=te==="$"?R:te==="#"&&/[boxX]/.test(he)?"0"+he.toLowerCase():"",fe=te==="$"?P:/[%p]/.test(he)?L:"",ue=formatTypes[he],pe=/[defgprs%]/.test(he);ce=ce===void 0?6:/[gprs]/.test(he)?Math.max(1,Math.min(21,ce)):Math.max(0,Math.min(20,ce));function ge(_e){var we=me,be=fe,Ce,Ee,ye;if(he==="c")be=ue(_e)+be,_e="";else{_e=+_e;var Se=_e<0||1/_e<0;if(_e=isNaN(_e)?G:ue(Math.abs(_e),ce),le&&(_e=formatTrim(_e)),Se&&+_e==0&&ee!=="+"&&(Se=!1),we=(Se?ee==="("?ee:U:ee==="-"||ee==="("?"":ee)+we,be=(he==="s"?prefixes[8+prefixExponent/3]:"")+be+(Se&&ee==="("?")":""),pe){for(Ce=-1,Ee=_e.length;++Ce<Ee;)if(ye=_e.charCodeAt(Ce),48>ye||ye>57){be=(ye===46?O+_e.slice(Ce+1):_e.slice(Ce))+be,_e=_e.slice(0,Ce);break}}}ae&&!ie&&(_e=T(_e,1/0));var Te=we.length+_e.length+be.length,Ae=Te<oe?new Array(oe-Te+1).join(W):"";switch(ae&&ie&&(_e=T(Ae+_e,Ae.length?oe-be.length:1/0),Ae=""),J){case"<":_e=we+_e+be+Ae;break;case"=":_e=we+Ae+_e+be;break;case"^":_e=Ae.slice(0,Te=Ae.length>>1)+we+_e+be+Ae.slice(Te);break;default:_e=Ae+we+_e+be;break}return I(_e)}return ge.toString=function(){return Y+""},ge}function Z(Y,W){var J=V((Y=formatSpecifier(Y),Y.type="f",Y)),ee=Math.max(-8,Math.min(8,Math.floor(exponent(W)/3)))*3,te=Math.pow(10,-ee),ie=prefixes[8+ee/3];return function(oe){return J(te*oe)+ie}}return{format:V,formatPrefix:Z}}var locale$1,format$1,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(_){return locale$1=formatLocale$1(_),format$1=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(_){return Math.max(0,-exponent(Math.abs(_)))}function precisionPrefix(_,T){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(T)/3)))*3-exponent(Math.abs(_)))}function precisionRound(_,T){return _=Math.abs(_),T=Math.abs(T)-_,Math.max(0,exponent(T)-exponent(_))+1}var epsilon$1=1e-6,epsilon2=1e-12,pi$2=Math.PI,halfPi=pi$2/2,quarterPi=pi$2/4,tau$2=pi$2*2,degrees=180/pi$2,radians$1=pi$2/180,abs=Math.abs,atan=Math.atan,atan2=Math.atan2,cos$1=Math.cos,exp=Math.exp,log$1=Math.log,pow$1=Math.pow,sin$1=Math.sin,sign$1=Math.sign||function(_){return _>0?1:_<0?-1:0},sqrt$1=Math.sqrt,tan=Math.tan;function acos(_){return _>1?0:_<-1?pi$2:Math.acos(_)}function asin(_){return _>1?halfPi:_<-1?-halfPi:Math.asin(_)}function noop$1(){}function streamGeometry(_,T){_&&streamGeometryType.hasOwnProperty(_.type)&&streamGeometryType[_.type](_,T)}var streamObjectType={Feature:function(_,T){streamGeometry(_.geometry,T)},FeatureCollection:function(_,T){for(var R=_.features,P=-1,O=R.length;++P<O;)streamGeometry(R[P].geometry,T)}},streamGeometryType={Sphere:function(_,T){T.sphere()},Point:function(_,T){_=_.coordinates,T.point(_[0],_[1],_[2])},MultiPoint:function(_,T){for(var R=_.coordinates,P=-1,O=R.length;++P<O;)_=R[P],T.point(_[0],_[1],_[2])},LineString:function(_,T){streamLine(_.coordinates,T,0)},MultiLineString:function(_,T){for(var R=_.coordinates,P=-1,O=R.length;++P<O;)streamLine(R[P],T,0)},Polygon:function(_,T){streamPolygon(_.coordinates,T)},MultiPolygon:function(_,T){for(var R=_.coordinates,P=-1,O=R.length;++P<O;)streamPolygon(R[P],T)},GeometryCollection:function(_,T){for(var R=_.geometries,P=-1,O=R.length;++P<O;)streamGeometry(R[P],T)}};function streamLine(_,T,R){var P=-1,O=_.length-R,I;for(T.lineStart();++P<O;)I=_[P],T.point(I[0],I[1],I[2]);T.lineEnd()}function streamPolygon(_,T){var R=-1,P=_.length;for(T.polygonStart();++R<P;)streamLine(_[R],T,1);T.polygonEnd()}function geoStream(_,T){_&&streamObjectType.hasOwnProperty(_.type)?streamObjectType[_.type](_,T):streamGeometry(_,T)}function spherical(_){return[atan2(_[1],_[0]),asin(_[2])]}function cartesian(_){var T=_[0],R=_[1],P=cos$1(R);return[P*cos$1(T),P*sin$1(T),sin$1(R)]}function cartesianDot(_,T){return _[0]*T[0]+_[1]*T[1]+_[2]*T[2]}function cartesianCross(_,T){return[_[1]*T[2]-_[2]*T[1],_[2]*T[0]-_[0]*T[2],_[0]*T[1]-_[1]*T[0]]}function cartesianAddInPlace(_,T){_[0]+=T[0],_[1]+=T[1],_[2]+=T[2]}function cartesianScale(_,T){return[_[0]*T,_[1]*T,_[2]*T]}function cartesianNormalizeInPlace(_){var T=sqrt$1(_[0]*_[0]+_[1]*_[1]+_[2]*_[2]);_[0]/=T,_[1]/=T,_[2]/=T}function compose(_,T){function R(P,O){return P=_(P,O),T(P[0],P[1])}return _.invert&&T.invert&&(R.invert=function(P,O){return P=T.invert(P,O),P&&_.invert(P[0],P[1])}),R}function rotationIdentity(_,T){return abs(_)>pi$2&&(_-=Math.round(_/tau$2)*tau$2),[_,T]}rotationIdentity.invert=rotationIdentity;function rotateRadians(_,T,R){return(_%=tau$2)?T||R?compose(rotationLambda(_),rotationPhiGamma(T,R)):rotationLambda(_):T||R?rotationPhiGamma(T,R):rotationIdentity}function forwardRotationLambda(_){return function(T,R){return T+=_,abs(T)>pi$2&&(T-=Math.round(T/tau$2)*tau$2),[T,R]}}function rotationLambda(_){var T=forwardRotationLambda(_);return T.invert=forwardRotationLambda(-_),T}function rotationPhiGamma(_,T){var R=cos$1(_),P=sin$1(_),O=cos$1(T),I=sin$1(T);function L(U,G){var V=cos$1(G),Z=cos$1(U)*V,Y=sin$1(U)*V,W=sin$1(G),J=W*R+Z*P;return[atan2(Y*O-J*I,Z*R-W*P),asin(J*O+Y*I)]}return L.invert=function(U,G){var V=cos$1(G),Z=cos$1(U)*V,Y=sin$1(U)*V,W=sin$1(G),J=W*O-Y*I;return[atan2(Y*O+W*I,Z*R+J*P),asin(J*R-Z*P)]},L}function rotation(_){_=rotateRadians(_[0]*radians$1,_[1]*radians$1,_.length>2?_[2]*radians$1:0);function T(R){return R=_(R[0]*radians$1,R[1]*radians$1),R[0]*=degrees,R[1]*=degrees,R}return T.invert=function(R){return R=_.invert(R[0]*radians$1,R[1]*radians$1),R[0]*=degrees,R[1]*=degrees,R},T}function circleStream(_,T,R,P,O,I){if(R){var L=cos$1(T),U=sin$1(T),G=P*R;O==null?(O=T+P*tau$2,I=T-G/2):(O=circleRadius(L,O),I=circleRadius(L,I),(P>0?O<I:O>I)&&(O+=P*tau$2));for(var V,Z=O;P>0?Z>I:Z<I;Z-=G)V=spherical([L,-U*cos$1(Z),-U*sin$1(Z)]),_.point(V[0],V[1])}}function circleRadius(_,T){T=cartesian(T),T[0]-=_,cartesianNormalizeInPlace(T);var R=acos(-T[1]);return((-T[2]<0?-R:R)+tau$2-epsilon$1)%tau$2}function clipBuffer(){var _=[],T;return{point:function(R,P,O){T.push([R,P,O])},lineStart:function(){_.push(T=[])},lineEnd:noop$1,rejoin:function(){_.length>1&&_.push(_.pop().concat(_.shift()))},result:function(){var R=_;return _=[],T=null,R}}}function pointEqual(_,T){return abs(_[0]-T[0])<epsilon$1&&abs(_[1]-T[1])<epsilon$1}function Intersection(_,T,R,P){this.x=_,this.z=T,this.o=R,this.e=P,this.v=!1,this.n=this.p=null}function clipRejoin(_,T,R,P,O){var I=[],L=[],U,G;if(_.forEach(function(ee){if(!((te=ee.length-1)<=0)){var te,ie=ee[0],oe=ee[te],ae;if(pointEqual(ie,oe)){if(!ie[2]&&!oe[2]){for(O.lineStart(),U=0;U<te;++U)O.point((ie=ee[U])[0],ie[1]);O.lineEnd();return}oe[0]+=2*epsilon$1}I.push(ae=new Intersection(ie,ee,null,!0)),L.push(ae.o=new Intersection(ie,null,ae,!1)),I.push(ae=new Intersection(oe,ee,null,!1)),L.push(ae.o=new Intersection(oe,null,ae,!0))}}),!!I.length){for(L.sort(T),link$1(I),link$1(L),U=0,G=L.length;U<G;++U)L[U].e=R=!R;for(var V=I[0],Z,Y;;){for(var W=V,J=!0;W.v;)if((W=W.n)===V)return;Z=W.z,O.lineStart();do{if(W.v=W.o.v=!0,W.e){if(J)for(U=0,G=Z.length;U<G;++U)O.point((Y=Z[U])[0],Y[1]);else P(W.x,W.n.x,1,O);W=W.n}else{if(J)for(Z=W.p.z,U=Z.length-1;U>=0;--U)O.point((Y=Z[U])[0],Y[1]);else P(W.x,W.p.x,-1,O);W=W.p}W=W.o,Z=W.z,J=!J}while(!W.v);O.lineEnd()}}}function link$1(_){if(T=_.length){for(var T,R=0,P=_[0],O;++R<T;)P.n=O=_[R],O.p=P,P=O;P.n=O=_[0],O.p=P}}function longitude(_){return abs(_[0])<=pi$2?_[0]:sign$1(_[0])*((abs(_[0])+pi$2)%tau$2-pi$2)}function polygonContains(_,T){var R=longitude(T),P=T[1],O=sin$1(P),I=[sin$1(R),-cos$1(R),0],L=0,U=0,G=new Adder;O===1?P=halfPi+epsilon$1:O===-1&&(P=-halfPi-epsilon$1);for(var V=0,Z=_.length;V<Z;++V)if(W=(Y=_[V]).length)for(var Y,W,J=Y[W-1],ee=longitude(J),te=J[1]/2+quarterPi,ie=sin$1(te),oe=cos$1(te),ae=0;ae<W;++ae,ee=le,ie=me,oe=fe,J=ce){var ce=Y[ae],le=longitude(ce),he=ce[1]/2+quarterPi,me=sin$1(he),fe=cos$1(he),ue=le-ee,pe=ue>=0?1:-1,ge=pe*ue,_e=ge>pi$2,we=ie*me;if(G.add(atan2(we*pe*sin$1(ge),oe*fe+we*cos$1(ge))),L+=_e?ue+pe*tau$2:ue,_e^ee>=R^le>=R){var be=cartesianCross(cartesian(J),cartesian(ce));cartesianNormalizeInPlace(be);var Ce=cartesianCross(I,be);cartesianNormalizeInPlace(Ce);var Ee=(_e^ue>=0?-1:1)*asin(Ce[2]);(P>Ee||P===Ee&&(be[0]||be[1]))&&(U+=_e^ue>=0?1:-1)}}return(L<-epsilon$1||L<epsilon$1&&G<-epsilon2)^U&1}function clip(_,T,R,P){return function(O){var I=T(O),L=clipBuffer(),U=T(L),G=!1,V,Z,Y,W={point:J,lineStart:te,lineEnd:ie,polygonStart:function(){W.point=oe,W.lineStart=ae,W.lineEnd=ce,Z=[],V=[]},polygonEnd:function(){W.point=J,W.lineStart=te,W.lineEnd=ie,Z=merge(Z);var le=polygonContains(V,P);Z.length?(G||(O.polygonStart(),G=!0),clipRejoin(Z,compareIntersection,le,R,O)):le&&(G||(O.polygonStart(),G=!0),O.lineStart(),R(null,null,1,O),O.lineEnd()),G&&(O.polygonEnd(),G=!1),Z=V=null},sphere:function(){O.polygonStart(),O.lineStart(),R(null,null,1,O),O.lineEnd(),O.polygonEnd()}};function J(le,he){_(le,he)&&O.point(le,he)}function ee(le,he){I.point(le,he)}function te(){W.point=ee,I.lineStart()}function ie(){W.point=J,I.lineEnd()}function oe(le,he){Y.push([le,he]),U.point(le,he)}function ae(){U.lineStart(),Y=[]}function ce(){oe(Y[0][0],Y[0][1]),U.lineEnd();var le=U.clean(),he=L.result(),me,fe=he.length,ue,pe,ge;if(Y.pop(),V.push(Y),Y=null,!!fe){if(le&1){if(pe=he[0],(ue=pe.length-1)>0){for(G||(O.polygonStart(),G=!0),O.lineStart(),me=0;me<ue;++me)O.point((ge=pe[me])[0],ge[1]);O.lineEnd()}return}fe>1&&le&2&&he.push(he.pop().concat(he.shift())),Z.push(he.filter(validSegment))}}return W}}function validSegment(_){return _.length>1}function compareIntersection(_,T){return((_=_.x)[0]<0?_[1]-halfPi-epsilon$1:halfPi-_[1])-((T=T.x)[0]<0?T[1]-halfPi-epsilon$1:halfPi-T[1])}const clipAntimeridian=clip(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi$2,-halfPi]);function clipAntimeridianLine(_){var T=NaN,R=NaN,P=NaN,O;return{lineStart:function(){_.lineStart(),O=1},point:function(I,L){var U=I>0?pi$2:-pi$2,G=abs(I-T);abs(G-pi$2)<epsilon$1?(_.point(T,R=(R+L)/2>0?halfPi:-halfPi),_.point(P,R),_.lineEnd(),_.lineStart(),_.point(U,R),_.point(I,R),O=0):P!==U&&G>=pi$2&&(abs(T-P)<epsilon$1&&(T-=P*epsilon$1),abs(I-U)<epsilon$1&&(I-=U*epsilon$1),R=clipAntimeridianIntersect(T,R,I,L),_.point(P,R),_.lineEnd(),_.lineStart(),_.point(U,R),O=0),_.point(T=I,R=L),P=U},lineEnd:function(){_.lineEnd(),T=R=NaN},clean:function(){return 2-O}}}function clipAntimeridianIntersect(_,T,R,P){var O,I,L=sin$1(_-R);return abs(L)>epsilon$1?atan((sin$1(T)*(I=cos$1(P))*sin$1(R)-sin$1(P)*(O=cos$1(T))*sin$1(_))/(O*I*L)):(T+P)/2}function clipAntimeridianInterpolate(_,T,R,P){var O;if(_==null)O=R*halfPi,P.point(-pi$2,O),P.point(0,O),P.point(pi$2,O),P.point(pi$2,0),P.point(pi$2,-O),P.point(0,-O),P.point(-pi$2,-O),P.point(-pi$2,0),P.point(-pi$2,O);else if(abs(_[0]-T[0])>epsilon$1){var I=_[0]<T[0]?pi$2:-pi$2;O=R*I/2,P.point(-I,O),P.point(0,O),P.point(I,O)}else P.point(T[0],T[1])}function clipCircle(_){var T=cos$1(_),R=2*radians$1,P=T>0,O=abs(T)>epsilon$1;function I(Z,Y,W,J){circleStream(J,_,R,W,Z,Y)}function L(Z,Y){return cos$1(Z)*cos$1(Y)>T}function U(Z){var Y,W,J,ee,te;return{lineStart:function(){ee=J=!1,te=1},point:function(ie,oe){var ae=[ie,oe],ce,le=L(ie,oe),he=P?le?0:V(ie,oe):le?V(ie+(ie<0?pi$2:-pi$2),oe):0;if(!Y&&(ee=J=le)&&Z.lineStart(),le!==J&&(ce=G(Y,ae),(!ce||pointEqual(Y,ce)||pointEqual(ae,ce))&&(ae[2]=1)),le!==J)te=0,le?(Z.lineStart(),ce=G(ae,Y),Z.point(ce[0],ce[1])):(ce=G(Y,ae),Z.point(ce[0],ce[1],2),Z.lineEnd()),Y=ce;else if(O&&Y&&P^le){var me;!(he&W)&&(me=G(ae,Y,!0))&&(te=0,P?(Z.lineStart(),Z.point(me[0][0],me[0][1]),Z.point(me[1][0],me[1][1]),Z.lineEnd()):(Z.point(me[1][0],me[1][1]),Z.lineEnd(),Z.lineStart(),Z.point(me[0][0],me[0][1],3)))}le&&(!Y||!pointEqual(Y,ae))&&Z.point(ae[0],ae[1]),Y=ae,J=le,W=he},lineEnd:function(){J&&Z.lineEnd(),Y=null},clean:function(){return te|(ee&&J)<<1}}}function G(Z,Y,W){var J=cartesian(Z),ee=cartesian(Y),te=[1,0,0],ie=cartesianCross(J,ee),oe=cartesianDot(ie,ie),ae=ie[0],ce=oe-ae*ae;if(!ce)return!W&&Z;var le=T*oe/ce,he=-T*ae/ce,me=cartesianCross(te,ie),fe=cartesianScale(te,le),ue=cartesianScale(ie,he);cartesianAddInPlace(fe,ue);var pe=me,ge=cartesianDot(fe,pe),_e=cartesianDot(pe,pe),we=ge*ge-_e*(cartesianDot(fe,fe)-1);if(!(we<0)){var be=sqrt$1(we),Ce=cartesianScale(pe,(-ge-be)/_e);if(cartesianAddInPlace(Ce,fe),Ce=spherical(Ce),!W)return Ce;var Ee=Z[0],ye=Y[0],Se=Z[1],Te=Y[1],Ae;ye<Ee&&(Ae=Ee,Ee=ye,ye=Ae);var Be=ye-Ee,ve=abs(Be-pi$2)<epsilon$1,Re=ve||Be<epsilon$1;if(!ve&&Te<Se&&(Ae=Se,Se=Te,Te=Ae),Re?ve?Se+Te>0^Ce[1]<(abs(Ce[0]-Ee)<epsilon$1?Se:Te):Se<=Ce[1]&&Ce[1]<=Te:Be>pi$2^(Ee<=Ce[0]&&Ce[0]<=ye)){var Me=cartesianScale(pe,(-ge+be)/_e);return cartesianAddInPlace(Me,fe),[Ce,spherical(Me)]}}}function V(Z,Y){var W=P?_:pi$2-_,J=0;return Z<-W?J|=1:Z>W&&(J|=2),Y<-W?J|=4:Y>W&&(J|=8),J}return clip(L,U,I,P?[0,-_]:[-pi$2,_-pi$2])}function clipLine(_,T,R,P,O,I){var L=_[0],U=_[1],G=T[0],V=T[1],Z=0,Y=1,W=G-L,J=V-U,ee;if(ee=R-L,!(!W&&ee>0)){if(ee/=W,W<0){if(ee<Z)return;ee<Y&&(Y=ee)}else if(W>0){if(ee>Y)return;ee>Z&&(Z=ee)}if(ee=O-L,!(!W&&ee<0)){if(ee/=W,W<0){if(ee>Y)return;ee>Z&&(Z=ee)}else if(W>0){if(ee<Z)return;ee<Y&&(Y=ee)}if(ee=P-U,!(!J&&ee>0)){if(ee/=J,J<0){if(ee<Z)return;ee<Y&&(Y=ee)}else if(J>0){if(ee>Y)return;ee>Z&&(Z=ee)}if(ee=I-U,!(!J&&ee<0)){if(ee/=J,J<0){if(ee>Y)return;ee>Z&&(Z=ee)}else if(J>0){if(ee<Z)return;ee<Y&&(Y=ee)}return Z>0&&(_[0]=L+Z*W,_[1]=U+Z*J),Y<1&&(T[0]=L+Y*W,T[1]=U+Y*J),!0}}}}}var clipMax=1e9,clipMin=-clipMax;function clipRectangle(_,T,R,P){function O(V,Z){return _<=V&&V<=R&&T<=Z&&Z<=P}function I(V,Z,Y,W){var J=0,ee=0;if(V==null||(J=L(V,Y))!==(ee=L(Z,Y))||G(V,Z)<0^Y>0)do W.point(J===0||J===3?_:R,J>1?P:T);while((J=(J+Y+4)%4)!==ee);else W.point(Z[0],Z[1])}function L(V,Z){return abs(V[0]-_)<epsilon$1?Z>0?0:3:abs(V[0]-R)<epsilon$1?Z>0?2:1:abs(V[1]-T)<epsilon$1?Z>0?1:0:Z>0?3:2}function U(V,Z){return G(V.x,Z.x)}function G(V,Z){var Y=L(V,1),W=L(Z,1);return Y!==W?Y-W:Y===0?Z[1]-V[1]:Y===1?V[0]-Z[0]:Y===2?V[1]-Z[1]:Z[0]-V[0]}return function(V){var Z=V,Y=clipBuffer(),W,J,ee,te,ie,oe,ae,ce,le,he,me,fe={point:ue,lineStart:we,lineEnd:be,polygonStart:ge,polygonEnd:_e};function ue(Ee,ye){O(Ee,ye)&&Z.point(Ee,ye)}function pe(){for(var Ee=0,ye=0,Se=J.length;ye<Se;++ye)for(var Te=J[ye],Ae=1,Be=Te.length,ve=Te[0],Re,Me,ze=ve[0],qe=ve[1];Ae<Be;++Ae)Re=ze,Me=qe,ve=Te[Ae],ze=ve[0],qe=ve[1],Me<=P?qe>P&&(ze-Re)*(P-Me)>(qe-Me)*(_-Re)&&++Ee:qe<=P&&(ze-Re)*(P-Me)<(qe-Me)*(_-Re)&&--Ee;return Ee}function ge(){Z=Y,W=[],J=[],me=!0}function _e(){var Ee=pe(),ye=me&&Ee,Se=(W=merge(W)).length;(ye||Se)&&(V.polygonStart(),ye&&(V.lineStart(),I(null,null,1,V),V.lineEnd()),Se&&clipRejoin(W,U,Ee,I,V),V.polygonEnd()),Z=V,W=J=ee=null}function we(){fe.point=Ce,J&&J.push(ee=[]),he=!0,le=!1,ae=ce=NaN}function be(){W&&(Ce(te,ie),oe&&le&&Y.rejoin(),W.push(Y.result())),fe.point=ue,le&&Z.lineEnd()}function Ce(Ee,ye){var Se=O(Ee,ye);if(J&&ee.push([Ee,ye]),he)te=Ee,ie=ye,oe=Se,he=!1,Se&&(Z.lineStart(),Z.point(Ee,ye));else if(Se&&le)Z.point(Ee,ye);else{var Te=[ae=Math.max(clipMin,Math.min(clipMax,ae)),ce=Math.max(clipMin,Math.min(clipMax,ce))],Ae=[Ee=Math.max(clipMin,Math.min(clipMax,Ee)),ye=Math.max(clipMin,Math.min(clipMax,ye))];clipLine(Te,Ae,_,T,R,P)?(le||(Z.lineStart(),Z.point(Te[0],Te[1])),Z.point(Ae[0],Ae[1]),Se||Z.lineEnd(),me=!1):Se&&(Z.lineStart(),Z.point(Ee,ye),me=!1)}ae=Ee,ce=ye,le=Se}return fe}}const identity$5=_=>_;var areaSum=new Adder,areaRingSum=new Adder,x00$2,y00$2,x0$3,y0$3,areaStream={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop$1,areaSum.add(abs(areaRingSum)),areaRingSum=new Adder},result:function(){var _=areaSum/2;return areaSum=new Adder,_}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(_,T){areaStream.point=areaPoint,x00$2=x0$3=_,y00$2=y0$3=T}function areaPoint(_,T){areaRingSum.add(y0$3*_-x0$3*T),x0$3=_,y0$3=T}function areaRingEnd(){areaPoint(x00$2,y00$2)}var x0$2=1/0,y0$2=x0$2,x1=-x0$2,y1=x1,boundsStream={point:boundsPoint,lineStart:noop$1,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1,result:function(){var _=[[x0$2,y0$2],[x1,y1]];return x1=y1=-(y0$2=x0$2=1/0),_}};function boundsPoint(_,T){_<x0$2&&(x0$2=_),_>x1&&(x1=_),T<y0$2&&(y0$2=T),T>y1&&(y1=T)}var X0=0,Y0=0,Z0=0,X1=0,Y1=0,Z1=0,X2=0,Y2=0,Z2=0,x00$1,y00$1,x0$1,y0$1,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var _=Z2?[X2/Z2,Y2/Z2]:Z1?[X1/Z1,Y1/Z1]:Z0?[X0/Z0,Y0/Z0]:[NaN,NaN];return X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,_}};function centroidPoint(_,T){X0+=_,Y0+=T,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(_,T){centroidStream.point=centroidPointLine,centroidPoint(x0$1=_,y0$1=T)}function centroidPointLine(_,T){var R=_-x0$1,P=T-y0$1,O=sqrt$1(R*R+P*P);X1+=O*(x0$1+_)/2,Y1+=O*(y0$1+T)/2,Z1+=O,centroidPoint(x0$1=_,y0$1=T)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(_,T){centroidStream.point=centroidPointRing,centroidPoint(x00$1=x0$1=_,y00$1=y0$1=T)}function centroidPointRing(_,T){var R=_-x0$1,P=T-y0$1,O=sqrt$1(R*R+P*P);X1+=O*(x0$1+_)/2,Y1+=O*(y0$1+T)/2,Z1+=O,O=y0$1*_-x0$1*T,X2+=O*(x0$1+_),Y2+=O*(y0$1+T),Z2+=O*3,centroidPoint(x0$1=_,y0$1=T)}function PathContext(_){this._context=_}PathContext.prototype={_radius:4.5,pointRadius:function(_){return this._radius=_,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(_,T){switch(this._point){case 0:{this._context.moveTo(_,T),this._point=1;break}case 1:{this._context.lineTo(_,T);break}default:{this._context.moveTo(_+this._radius,T),this._context.arc(_,T,this._radius,0,tau$2);break}}},result:noop$1};var lengthSum=new Adder,lengthRing,x00,y00,x0,y0,lengthStream={point:noop$1,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(x00,y00),lengthStream.point=noop$1},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var _=+lengthSum;return lengthSum=new Adder,_}};function lengthPointFirst(_,T){lengthStream.point=lengthPoint,x00=x0=_,y00=y0=T}function lengthPoint(_,T){x0-=_,y0-=T,lengthSum.add(sqrt$1(x0*x0+y0*y0)),x0=_,y0=T}let cacheDigits,cacheAppend,cacheRadius,cacheCircle;class PathString{constructor(T){this._append=T==null?append:appendRound(T),this._radius=4.5,this._=""}pointRadius(T){return this._radius=+T,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(T,R){switch(this._point){case 0:{this._append`M${T},${R}`,this._point=1;break}case 1:{this._append`L${T},${R}`;break}default:{if(this._append`M${T},${R}`,this._radius!==cacheRadius||this._append!==cacheAppend){const P=this._radius,O=this._;this._="",this._append`m0,${P}a${P},${P} 0 1,1 0,${-2*P}a${P},${P} 0 1,1 0,${2*P}z`,cacheRadius=P,cacheAppend=this._append,cacheCircle=this._,this._=O}this._+=cacheCircle;break}}}result(){const T=this._;return this._="",T.length?T:null}}function append(_){let T=1;this._+=_[0];for(const R=_.length;T<R;++T)this._+=arguments[T]+_[T]}function appendRound(_){const T=Math.floor(_);if(!(T>=0))throw new RangeError(`invalid digits: ${_}`);if(T>15)return append;if(T!==cacheDigits){const R=10**T;cacheDigits=T,cacheAppend=function(O){let I=1;this._+=O[0];for(const L=O.length;I<L;++I)this._+=Math.round(arguments[I]*R)/R+O[I]}}return cacheAppend}function geoPath(_,T){let R=3,P=4.5,O,I;function L(U){return U&&(typeof P=="function"&&I.pointRadius(+P.apply(this,arguments)),geoStream(U,O(I))),I.result()}return L.area=function(U){return geoStream(U,O(areaStream)),areaStream.result()},L.measure=function(U){return geoStream(U,O(lengthStream)),lengthStream.result()},L.bounds=function(U){return geoStream(U,O(boundsStream)),boundsStream.result()},L.centroid=function(U){return geoStream(U,O(centroidStream)),centroidStream.result()},L.projection=function(U){return arguments.length?(O=U==null?(_=null,identity$5):(_=U).stream,L):_},L.context=function(U){return arguments.length?(I=U==null?(T=null,new PathString(R)):new PathContext(T=U),typeof P!="function"&&I.pointRadius(P),L):T},L.pointRadius=function(U){return arguments.length?(P=typeof U=="function"?U:(I.pointRadius(+U),+U),L):P},L.digits=function(U){if(!arguments.length)return R;if(U==null)R=null;else{const G=Math.floor(U);if(!(G>=0))throw new RangeError(`invalid digits: ${U}`);R=G}return T===null&&(I=new PathString(R)),L},L.projection(_).digits(R).context(T)}function geoTransform(_){return{stream:transformer$2(_)}}function transformer$2(_){return function(T){var R=new TransformStream;for(var P in _)R[P]=_[P];return R.stream=T,R}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(_,T){this.stream.point(_,T)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fit(_,T,R){var P=_.clipExtent&&_.clipExtent();return _.scale(150).translate([0,0]),P!=null&&_.clipExtent(null),geoStream(R,_.stream(boundsStream)),T(boundsStream.result()),P!=null&&_.clipExtent(P),_}function fitExtent(_,T,R){return fit(_,function(P){var O=T[1][0]-T[0][0],I=T[1][1]-T[0][1],L=Math.min(O/(P[1][0]-P[0][0]),I/(P[1][1]-P[0][1])),U=+T[0][0]+(O-L*(P[1][0]+P[0][0]))/2,G=+T[0][1]+(I-L*(P[1][1]+P[0][1]))/2;_.scale(150*L).translate([U,G])},R)}function fitSize(_,T,R){return fitExtent(_,[[0,0],T],R)}function fitWidth(_,T,R){return fit(_,function(P){var O=+T,I=O/(P[1][0]-P[0][0]),L=(O-I*(P[1][0]+P[0][0]))/2,U=-I*P[0][1];_.scale(150*I).translate([L,U])},R)}function fitHeight(_,T,R){return fit(_,function(P){var O=+T,I=O/(P[1][1]-P[0][1]),L=-I*P[0][0],U=(O-I*(P[1][1]+P[0][1]))/2;_.scale(150*I).translate([L,U])},R)}var maxDepth=16,cosMinDistance=cos$1(30*radians$1);function resample(_,T){return+T?resample$1(_,T):resampleNone(_)}function resampleNone(_){return transformer$2({point:function(T,R){T=_(T,R),this.stream.point(T[0],T[1])}})}function resample$1(_,T){function R(P,O,I,L,U,G,V,Z,Y,W,J,ee,te,ie){var oe=V-P,ae=Z-O,ce=oe*oe+ae*ae;if(ce>4*T&&te--){var le=L+W,he=U+J,me=G+ee,fe=sqrt$1(le*le+he*he+me*me),ue=asin(me/=fe),pe=abs(abs(me)-1)<epsilon$1||abs(I-Y)<epsilon$1?(I+Y)/2:atan2(he,le),ge=_(pe,ue),_e=ge[0],we=ge[1],be=_e-P,Ce=we-O,Ee=ae*be-oe*Ce;(Ee*Ee/ce>T||abs((oe*be+ae*Ce)/ce-.5)>.3||L*W+U*J+G*ee<cosMinDistance)&&(R(P,O,I,L,U,G,_e,we,pe,le/=fe,he/=fe,me,te,ie),ie.point(_e,we),R(_e,we,pe,le,he,me,V,Z,Y,W,J,ee,te,ie))}}return function(P){var O,I,L,U,G,V,Z,Y,W,J,ee,te,ie={point:oe,lineStart:ae,lineEnd:le,polygonStart:function(){P.polygonStart(),ie.lineStart=he},polygonEnd:function(){P.polygonEnd(),ie.lineStart=ae}};function oe(ue,pe){ue=_(ue,pe),P.point(ue[0],ue[1])}function ae(){Y=NaN,ie.point=ce,P.lineStart()}function ce(ue,pe){var ge=cartesian([ue,pe]),_e=_(ue,pe);R(Y,W,Z,J,ee,te,Y=_e[0],W=_e[1],Z=ue,J=ge[0],ee=ge[1],te=ge[2],maxDepth,P),P.point(Y,W)}function le(){ie.point=oe,P.lineEnd()}function he(){ae(),ie.point=me,ie.lineEnd=fe}function me(ue,pe){ce(O=ue,pe),I=Y,L=W,U=J,G=ee,V=te,ie.point=ce}function fe(){R(Y,W,Z,J,ee,te,I,L,O,U,G,V,maxDepth,P),ie.lineEnd=le,le()}return ie}}var transformRadians=transformer$2({point:function(_,T){this.stream.point(_*radians$1,T*radians$1)}});function transformRotate(_){return transformer$2({point:function(T,R){var P=_(T,R);return this.stream.point(P[0],P[1])}})}function scaleTranslate(_,T,R,P,O){function I(L,U){return L*=P,U*=O,[T+_*L,R-_*U]}return I.invert=function(L,U){return[(L-T)/_*P,(R-U)/_*O]},I}function scaleTranslateRotate(_,T,R,P,O,I){if(!I)return scaleTranslate(_,T,R,P,O);var L=cos$1(I),U=sin$1(I),G=L*_,V=U*_,Z=L/_,Y=U/_,W=(U*R-L*T)/_,J=(U*T+L*R)/_;function ee(te,ie){return te*=P,ie*=O,[G*te-V*ie+T,R-V*te-G*ie]}return ee.invert=function(te,ie){return[P*(Z*te-Y*ie+W),O*(J-Y*te-Z*ie)]},ee}function projection$1(_){return projectionMutator(function(){return _})()}function projectionMutator(_){var T,R=150,P=480,O=250,I=0,L=0,U=0,G=0,V=0,Z,Y=0,W=1,J=1,ee=null,te=clipAntimeridian,ie=null,oe,ae,ce,le=identity$5,he=.5,me,fe,ue,pe,ge;function _e(Ee){return ue(Ee[0]*radians$1,Ee[1]*radians$1)}function we(Ee){return Ee=ue.invert(Ee[0],Ee[1]),Ee&&[Ee[0]*degrees,Ee[1]*degrees]}_e.stream=function(Ee){return pe&&ge===Ee?pe:pe=transformRadians(transformRotate(Z)(te(me(le(ge=Ee)))))},_e.preclip=function(Ee){return arguments.length?(te=Ee,ee=void 0,Ce()):te},_e.postclip=function(Ee){return arguments.length?(le=Ee,ie=oe=ae=ce=null,Ce()):le},_e.clipAngle=function(Ee){return arguments.length?(te=+Ee?clipCircle(ee=Ee*radians$1):(ee=null,clipAntimeridian),Ce()):ee*degrees},_e.clipExtent=function(Ee){return arguments.length?(le=Ee==null?(ie=oe=ae=ce=null,identity$5):clipRectangle(ie=+Ee[0][0],oe=+Ee[0][1],ae=+Ee[1][0],ce=+Ee[1][1]),Ce()):ie==null?null:[[ie,oe],[ae,ce]]},_e.scale=function(Ee){return arguments.length?(R=+Ee,be()):R},_e.translate=function(Ee){return arguments.length?(P=+Ee[0],O=+Ee[1],be()):[P,O]},_e.center=function(Ee){return arguments.length?(I=Ee[0]%360*radians$1,L=Ee[1]%360*radians$1,be()):[I*degrees,L*degrees]},_e.rotate=function(Ee){return arguments.length?(U=Ee[0]%360*radians$1,G=Ee[1]%360*radians$1,V=Ee.length>2?Ee[2]%360*radians$1:0,be()):[U*degrees,G*degrees,V*degrees]},_e.angle=function(Ee){return arguments.length?(Y=Ee%360*radians$1,be()):Y*degrees},_e.reflectX=function(Ee){return arguments.length?(W=Ee?-1:1,be()):W<0},_e.reflectY=function(Ee){return arguments.length?(J=Ee?-1:1,be()):J<0},_e.precision=function(Ee){return arguments.length?(me=resample(fe,he=Ee*Ee),Ce()):sqrt$1(he)},_e.fitExtent=function(Ee,ye){return fitExtent(_e,Ee,ye)},_e.fitSize=function(Ee,ye){return fitSize(_e,Ee,ye)},_e.fitWidth=function(Ee,ye){return fitWidth(_e,Ee,ye)},_e.fitHeight=function(Ee,ye){return fitHeight(_e,Ee,ye)};function be(){var Ee=scaleTranslateRotate(R,0,0,W,J,Y).apply(null,T(I,L)),ye=scaleTranslateRotate(R,P-Ee[0],O-Ee[1],W,J,Y);return Z=rotateRadians(U,G,V),fe=compose(T,ye),ue=compose(Z,fe),me=resample(fe,he),Ce()}function Ce(){return pe=ge=null,_e}return function(){return T=_.apply(this,arguments),_e.invert=T.invert&&we,be()}}function conicProjection$1(_){var T=0,R=pi$2/3,P=projectionMutator(_),O=P(T,R);return O.parallels=function(I){return arguments.length?P(T=I[0]*radians$1,R=I[1]*radians$1):[T*degrees,R*degrees]},O}function cylindricalEqualAreaRaw(_){var T=cos$1(_);function R(P,O){return[P*T,sin$1(O)/T]}return R.invert=function(P,O){return[P/T,asin(O*T)]},R}function conicEqualAreaRaw(_,T){var R=sin$1(_),P=(R+sin$1(T))/2;if(abs(P)<epsilon$1)return cylindricalEqualAreaRaw(_);var O=1+R*(2*P-R),I=sqrt$1(O)/P;function L(U,G){var V=sqrt$1(O-2*P*sin$1(G))/P;return[V*sin$1(U*=P),I-V*cos$1(U)]}return L.invert=function(U,G){var V=I-G,Z=atan2(U,abs(V))*sign$1(V);return V*P<0&&(Z-=pi$2*sign$1(U)*sign$1(V)),[Z/P,asin((O-(U*U+V*V)*P*P)/(2*P))]},L}function geoConicEqualArea(){return conicProjection$1(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function geoAlbers(){return geoConicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function multiplex(_){var T=_.length;return{point:function(R,P){for(var O=-1;++O<T;)_[O].point(R,P)},sphere:function(){for(var R=-1;++R<T;)_[R].sphere()},lineStart:function(){for(var R=-1;++R<T;)_[R].lineStart()},lineEnd:function(){for(var R=-1;++R<T;)_[R].lineEnd()},polygonStart:function(){for(var R=-1;++R<T;)_[R].polygonStart()},polygonEnd:function(){for(var R=-1;++R<T;)_[R].polygonEnd()}}}function geoAlbersUsa(){var _,T,R=geoAlbers(),P,O=geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),I,L=geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),U,G,V={point:function(W,J){G=[W,J]}};function Z(W){var J=W[0],ee=W[1];return G=null,P.point(J,ee),G||(I.point(J,ee),G)||(U.point(J,ee),G)}Z.invert=function(W){var J=R.scale(),ee=R.translate(),te=(W[0]-ee[0])/J,ie=(W[1]-ee[1])/J;return(ie>=.12&&ie<.234&&te>=-.425&&te<-.214?O:ie>=.166&&ie<.234&&te>=-.214&&te<-.115?L:R).invert(W)},Z.stream=function(W){return _&&T===W?_:_=multiplex([R.stream(T=W),O.stream(W),L.stream(W)])},Z.precision=function(W){return arguments.length?(R.precision(W),O.precision(W),L.precision(W),Y()):R.precision()},Z.scale=function(W){return arguments.length?(R.scale(W),O.scale(W*.35),L.scale(W),Z.translate(R.translate())):R.scale()},Z.translate=function(W){if(!arguments.length)return R.translate();var J=R.scale(),ee=+W[0],te=+W[1];return P=R.translate(W).clipExtent([[ee-.455*J,te-.238*J],[ee+.455*J,te+.238*J]]).stream(V),I=O.translate([ee-.307*J,te+.201*J]).clipExtent([[ee-.425*J+epsilon$1,te+.12*J+epsilon$1],[ee-.214*J-epsilon$1,te+.234*J-epsilon$1]]).stream(V),U=L.translate([ee-.205*J,te+.212*J]).clipExtent([[ee-.214*J+epsilon$1,te+.166*J+epsilon$1],[ee-.115*J-epsilon$1,te+.234*J-epsilon$1]]).stream(V),Y()},Z.fitExtent=function(W,J){return fitExtent(Z,W,J)},Z.fitSize=function(W,J){return fitSize(Z,W,J)},Z.fitWidth=function(W,J){return fitWidth(Z,W,J)},Z.fitHeight=function(W,J){return fitHeight(Z,W,J)};function Y(){return _=T=null,Z}return Z.scale(1070)}function azimuthalRaw(_){return function(T,R){var P=cos$1(T),O=cos$1(R),I=_(P*O);return I===1/0?[2,0]:[I*O*sin$1(T),I*sin$1(R)]}}function azimuthalInvert(_){return function(T,R){var P=sqrt$1(T*T+R*R),O=_(P),I=sin$1(O),L=cos$1(O);return[atan2(T*I,P*L),asin(P&&R*I/P)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(_){return sqrt$1(2/(1+_))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(_){return 2*asin(_/2)});function geoAzimuthalEqualArea(){return projection$1(azimuthalEqualAreaRaw).scale(124.75).clipAngle(180-.001)}var azimuthalEquidistantRaw=azimuthalRaw(function(_){return(_=acos(_))&&_/sin$1(_)});azimuthalEquidistantRaw.invert=azimuthalInvert(function(_){return _});function geoAzimuthalEquidistant(){return projection$1(azimuthalEquidistantRaw).scale(79.4188).clipAngle(180-.001)}function mercatorRaw(_,T){return[_,log$1(tan((halfPi+T)/2))]}mercatorRaw.invert=function(_,T){return[_,2*atan(exp(T))-halfPi]};function geoMercator(){return mercatorProjection(mercatorRaw).scale(961/tau$2)}function mercatorProjection(_){var T=projection$1(_),R=T.center,P=T.scale,O=T.translate,I=T.clipExtent,L=null,U,G,V;T.scale=function(Y){return arguments.length?(P(Y),Z()):P()},T.translate=function(Y){return arguments.length?(O(Y),Z()):O()},T.center=function(Y){return arguments.length?(R(Y),Z()):R()},T.clipExtent=function(Y){return arguments.length?(Y==null?L=U=G=V=null:(L=+Y[0][0],U=+Y[0][1],G=+Y[1][0],V=+Y[1][1]),Z()):L==null?null:[[L,U],[G,V]]};function Z(){var Y=pi$2*P(),W=T(rotation(T.rotate()).invert([0,0]));return I(L==null?[[W[0]-Y,W[1]-Y],[W[0]+Y,W[1]+Y]]:_===mercatorRaw?[[Math.max(W[0]-Y,L),U],[Math.min(W[0]+Y,G),V]]:[[L,Math.max(W[1]-Y,U)],[G,Math.min(W[1]+Y,V)]])}return Z()}function tany(_){return tan((halfPi+_)/2)}function conicConformalRaw(_,T){var R=cos$1(_),P=_===T?sin$1(_):log$1(R/cos$1(T))/log$1(tany(T)/tany(_)),O=R*pow$1(tany(_),P)/P;if(!P)return mercatorRaw;function I(L,U){O>0?U<-halfPi+epsilon$1&&(U=-halfPi+epsilon$1):U>halfPi-epsilon$1&&(U=halfPi-epsilon$1);var G=O/pow$1(tany(U),P);return[G*sin$1(P*L),O-G*cos$1(P*L)]}return I.invert=function(L,U){var G=O-U,V=sign$1(P)*sqrt$1(L*L+G*G),Z=atan2(L,abs(G))*sign$1(G);return G*P<0&&(Z-=pi$2*sign$1(L)*sign$1(G)),[Z/P,2*atan(pow$1(O/V,1/P))-halfPi]},I}function geoConicConformal(){return conicProjection$1(conicConformalRaw).scale(109.5).parallels([30,30])}function equirectangularRaw(_,T){return[_,T]}equirectangularRaw.invert=equirectangularRaw;function geoEquirectangular(){return projection$1(equirectangularRaw).scale(152.63)}function conicEquidistantRaw(_,T){var R=cos$1(_),P=_===T?sin$1(_):(R-cos$1(T))/(T-_),O=R/P+_;if(abs(P)<epsilon$1)return equirectangularRaw;function I(L,U){var G=O-U,V=P*L;return[G*sin$1(V),O-G*cos$1(V)]}return I.invert=function(L,U){var G=O-U,V=atan2(L,abs(G))*sign$1(G);return G*P<0&&(V-=pi$2*sign$1(L)*sign$1(G)),[V/P,O-sign$1(P)*sqrt$1(L*L+G*G)]},I}function geoConicEquidistant(){return conicProjection$1(conicEquidistantRaw).scale(131.154).center([0,13.9389])}var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=sqrt$1(3)/2,iterations=12;function equalEarthRaw(_,T){var R=asin(M*sin$1(T)),P=R*R,O=P*P*P;return[_*cos$1(R)/(M*(A1+3*A2*P+O*(7*A3+9*A4*P))),R*(A1+A2*P+O*(A3+A4*P))]}equalEarthRaw.invert=function(_,T){for(var R=T,P=R*R,O=P*P*P,I=0,L,U,G;I<iterations&&(U=R*(A1+A2*P+O*(A3+A4*P))-T,G=A1+3*A2*P+O*(7*A3+9*A4*P),R-=L=U/G,P=R*R,O=P*P*P,!(abs(L)<epsilon2));++I);return[M*_*(A1+3*A2*P+O*(7*A3+9*A4*P))/cos$1(R),asin(sin$1(R)/M)]};function geoEqualEarth(){return projection$1(equalEarthRaw).scale(177.158)}function gnomonicRaw(_,T){var R=cos$1(T),P=cos$1(_)*R;return[R*sin$1(_)/P,sin$1(T)/P]}gnomonicRaw.invert=azimuthalInvert(atan);function geoGnomonic(){return projection$1(gnomonicRaw).scale(144.049).clipAngle(60)}function orthographicRaw(_,T){return[cos$1(T)*sin$1(_),sin$1(T)]}orthographicRaw.invert=azimuthalInvert(asin);function geoOrthographic(){return projection$1(orthographicRaw).scale(249.5).clipAngle(90+epsilon$1)}function stereographicRaw(_,T){var R=cos$1(T),P=1+cos$1(_)*R;return[R*sin$1(_)/P,sin$1(T)/P]}stereographicRaw.invert=azimuthalInvert(function(_){return 2*atan(_)});function geoStereographic(){return projection$1(stereographicRaw).scale(250).clipAngle(142)}function transverseMercatorRaw(_,T){return[log$1(tan((halfPi+T)/2)),-_]}transverseMercatorRaw.invert=function(_,T){return[-T,2*atan(exp(_))-halfPi]};function geoTransverseMercator(){var _=mercatorProjection(transverseMercatorRaw),T=_.center,R=_.rotate;return _.center=function(P){return arguments.length?T([-P[1],P[0]]):(P=T(),[P[1],-P[0]])},_.rotate=function(P){return arguments.length?R([P[0],P[1],P.length>2?P[2]+90:90]):(P=R(),[P[0],P[1],P[2]-90])},R([0,0,90]).scale(159.155)}function initRange(_,T){switch(arguments.length){case 0:break;case 1:this.range(_);break;default:this.range(T).domain(_);break}return this}function initInterpolator(_,T){switch(arguments.length){case 0:break;case 1:{typeof _=="function"?this.interpolator(_):this.range(_);break}default:{this.domain(_),typeof T=="function"?this.interpolator(T):this.range(T);break}}return this}const implicit=Symbol("implicit");function ordinal(){var _=new InternMap,T=[],R=[],P=implicit;function O(I){let L=_.get(I);if(L===void 0){if(P!==implicit)return P;_.set(I,L=T.push(I)-1)}return R[L%R.length]}return O.domain=function(I){if(!arguments.length)return T.slice();T=[],_=new InternMap;for(const L of I)_.has(L)||_.set(L,T.push(L)-1);return O},O.range=function(I){return arguments.length?(R=Array.from(I),O):R.slice()},O.unknown=function(I){return arguments.length?(P=I,O):P},O.copy=function(){return ordinal(T,R).unknown(P)},initRange.apply(O,arguments),O}function band(){var _=ordinal().unknown(void 0),T=_.domain,R=_.range,P=0,O=1,I,L,U=!1,G=0,V=0,Z=.5;delete _.unknown;function Y(){var W=T().length,J=O<P,ee=J?O:P,te=J?P:O;I=(te-ee)/Math.max(1,W-G+V*2),U&&(I=Math.floor(I)),ee+=(te-ee-I*(W-G))*Z,L=I*(1-G),U&&(ee=Math.round(ee),L=Math.round(L));var ie=range$1(W).map(function(oe){return ee+I*oe});return R(J?ie.reverse():ie)}return _.domain=function(W){return arguments.length?(T(W),Y()):T()},_.range=function(W){return arguments.length?([P,O]=W,P=+P,O=+O,Y()):[P,O]},_.rangeRound=function(W){return[P,O]=W,P=+P,O=+O,U=!0,Y()},_.bandwidth=function(){return L},_.step=function(){return I},_.round=function(W){return arguments.length?(U=!!W,Y()):U},_.padding=function(W){return arguments.length?(G=Math.min(1,V=+W),Y()):G},_.paddingInner=function(W){return arguments.length?(G=Math.min(1,W),Y()):G},_.paddingOuter=function(W){return arguments.length?(V=+W,Y()):V},_.align=function(W){return arguments.length?(Z=Math.max(0,Math.min(1,W)),Y()):Z},_.copy=function(){return band(T(),[P,O]).round(U).paddingInner(G).paddingOuter(V).align(Z)},initRange.apply(Y(),arguments)}function pointish(_){var T=_.copy;return _.padding=_.paddingOuter,delete _.paddingInner,delete _.paddingOuter,_.copy=function(){return pointish(T())},_}function point$4(){return pointish(band.apply(null,arguments).paddingInner(1))}function constants(_){return function(){return _}}function number$2(_){return+_}var unit$1=[0,1];function identity$4(_){return _}function normalize(_,T){return(T-=_=+_)?function(R){return(R-_)/T}:constants(isNaN(T)?NaN:.5)}function clamper(_,T){var R;return _>T&&(R=_,_=T,T=R),function(P){return Math.max(_,Math.min(T,P))}}function bimap(_,T,R){var P=_[0],O=_[1],I=T[0],L=T[1];return O<P?(P=normalize(O,P),I=R(L,I)):(P=normalize(P,O),I=R(I,L)),function(U){return I(P(U))}}function polymap(_,T,R){var P=Math.min(_.length,T.length)-1,O=new Array(P),I=new Array(P),L=-1;for(_[P]<_[0]&&(_=_.slice().reverse(),T=T.slice().reverse());++L<P;)O[L]=normalize(_[L],_[L+1]),I[L]=R(T[L],T[L+1]);return function(U){var G=bisectRight(_,U,1,P)-1;return I[G](O[G](U))}}function copy$1(_,T){return T.domain(_.domain()).range(_.range()).interpolate(_.interpolate()).clamp(_.clamp()).unknown(_.unknown())}function transformer$1(){var _=unit$1,T=unit$1,R=interpolate$1,P,O,I,L=identity$4,U,G,V;function Z(){var W=Math.min(_.length,T.length);return L!==identity$4&&(L=clamper(_[0],_[W-1])),U=W>2?polymap:bimap,G=V=null,Y}function Y(W){return W==null||isNaN(W=+W)?I:(G||(G=U(_.map(P),T,R)))(P(L(W)))}return Y.invert=function(W){return L(O((V||(V=U(T,_.map(P),interpolateNumber)))(W)))},Y.domain=function(W){return arguments.length?(_=Array.from(W,number$2),Z()):_.slice()},Y.range=function(W){return arguments.length?(T=Array.from(W),Z()):T.slice()},Y.rangeRound=function(W){return T=Array.from(W),R=interpolateRound,Z()},Y.clamp=function(W){return arguments.length?(L=W?!0:identity$4,Z()):L!==identity$4},Y.interpolate=function(W){return arguments.length?(R=W,Z()):R},Y.unknown=function(W){return arguments.length?(I=W,Y):I},function(W,J){return P=W,O=J,Z()}}function continuous(){return transformer$1()(identity$4,identity$4)}function tickFormat(_,T,R,P){var O=tickStep(_,T,R),I;switch(P=formatSpecifier(P??",f"),P.type){case"s":{var L=Math.max(Math.abs(_),Math.abs(T));return P.precision==null&&!isNaN(I=precisionPrefix(O,L))&&(P.precision=I),formatPrefix(P,L)}case"":case"e":case"g":case"p":case"r":{P.precision==null&&!isNaN(I=precisionRound(O,Math.max(Math.abs(_),Math.abs(T))))&&(P.precision=I-(P.type==="e"));break}case"f":case"%":{P.precision==null&&!isNaN(I=precisionFixed(O))&&(P.precision=I-(P.type==="%")*2);break}}return format$1(P)}function linearish(_){var T=_.domain;return _.ticks=function(R){var P=T();return ticks(P[0],P[P.length-1],R??10)},_.tickFormat=function(R,P){var O=T();return tickFormat(O[0],O[O.length-1],R??10,P)},_.nice=function(R){R==null&&(R=10);var P=T(),O=0,I=P.length-1,L=P[O],U=P[I],G,V,Z=10;for(U<L&&(V=L,L=U,U=V,V=O,O=I,I=V);Z-- >0;){if(V=tickIncrement(L,U,R),V===G)return P[O]=L,P[I]=U,T(P);if(V>0)L=Math.floor(L/V)*V,U=Math.ceil(U/V)*V;else if(V<0)L=Math.ceil(L*V)/V,U=Math.floor(U*V)/V;else break;G=V}return _},_}function linear(){var _=continuous();return _.copy=function(){return copy$1(_,linear())},initRange.apply(_,arguments),linearish(_)}function identity$3(_){var T;function R(P){return P==null||isNaN(P=+P)?T:P}return R.invert=R,R.domain=R.range=function(P){return arguments.length?(_=Array.from(P,number$2),R):_.slice()},R.unknown=function(P){return arguments.length?(T=P,R):T},R.copy=function(){return identity$3(_).unknown(T)},_=arguments.length?Array.from(_,number$2):[0,1],linearish(R)}function nice(_,T){_=_.slice();var R=0,P=_.length-1,O=_[R],I=_[P],L;return I<O&&(L=R,R=P,P=L,L=O,O=I,I=L),_[R]=T.floor(O),_[P]=T.ceil(I),_}function transformLog$1(_){return Math.log(_)}function transformExp(_){return Math.exp(_)}function transformLogn(_){return-Math.log(-_)}function transformExpn(_){return-Math.exp(-_)}function pow10(_){return isFinite(_)?+("1e"+_):_<0?0:_}function powp(_){return _===10?pow10:_===Math.E?Math.exp:T=>Math.pow(_,T)}function logp(_){return _===Math.E?Math.log:_===10&&Math.log10||_===2&&Math.log2||(_=Math.log(_),T=>Math.log(T)/_)}function reflect(_){return(T,R)=>-_(-T,R)}function loggish(_){const T=_(transformLog$1,transformExp),R=T.domain;let P=10,O,I;function L(){return O=logp(P),I=powp(P),R()[0]<0?(O=reflect(O),I=reflect(I),_(transformLogn,transformExpn)):_(transformLog$1,transformExp),T}return T.base=function(U){return arguments.length?(P=+U,L()):P},T.domain=function(U){return arguments.length?(R(U),L()):R()},T.ticks=U=>{const G=R();let V=G[0],Z=G[G.length-1];const Y=Z<V;Y&&([V,Z]=[Z,V]);let W=O(V),J=O(Z),ee,te;const ie=U==null?10:+U;let oe=[];if(!(P%1)&&J-W<ie){if(W=Math.floor(W),J=Math.ceil(J),V>0){for(;W<=J;++W)for(ee=1;ee<P;++ee)if(te=W<0?ee/I(-W):ee*I(W),!(te<V)){if(te>Z)break;oe.push(te)}}else for(;W<=J;++W)for(ee=P-1;ee>=1;--ee)if(te=W>0?ee/I(-W):ee*I(W),!(te<V)){if(te>Z)break;oe.push(te)}oe.length*2<ie&&(oe=ticks(V,Z,ie))}else oe=ticks(W,J,Math.min(J-W,ie)).map(I);return Y?oe.reverse():oe},T.tickFormat=(U,G)=>{if(U==null&&(U=10),G==null&&(G=P===10?"s":","),typeof G!="function"&&(!(P%1)&&(G=formatSpecifier(G)).precision==null&&(G.trim=!0),G=format$1(G)),U===1/0)return G;const V=Math.max(1,P*U/T.ticks().length);return Z=>{let Y=Z/I(Math.round(O(Z)));return Y*P<P-.5&&(Y*=P),Y<=V?G(Z):""}},T.nice=()=>R(nice(R(),{floor:U=>I(Math.floor(O(U))),ceil:U=>I(Math.ceil(O(U)))})),T}function log(){const _=loggish(transformer$1()).domain([1,10]);return _.copy=()=>copy$1(_,log()).base(_.base()),initRange.apply(_,arguments),_}function transformSymlog$1(_){return function(T){return Math.sign(T)*Math.log1p(Math.abs(T/_))}}function transformSymexp(_){return function(T){return Math.sign(T)*Math.expm1(Math.abs(T))*_}}function symlogish(_){var T=1,R=_(transformSymlog$1(T),transformSymexp(T));return R.constant=function(P){return arguments.length?_(transformSymlog$1(T=+P),transformSymexp(T)):T},linearish(R)}function symlog(){var _=symlogish(transformer$1());return _.copy=function(){return copy$1(_,symlog()).constant(_.constant())},initRange.apply(_,arguments)}function transformPow$1(_){return function(T){return T<0?-Math.pow(-T,_):Math.pow(T,_)}}function transformSqrt$1(_){return _<0?-Math.sqrt(-_):Math.sqrt(_)}function transformSquare(_){return _<0?-_*_:_*_}function powish(_){var T=_(identity$4,identity$4),R=1;function P(){return R===1?_(identity$4,identity$4):R===.5?_(transformSqrt$1,transformSquare):_(transformPow$1(R),transformPow$1(1/R))}return T.exponent=function(O){return arguments.length?(R=+O,P()):R},linearish(T)}function pow(){var _=powish(transformer$1());return _.copy=function(){return copy$1(_,pow()).exponent(_.exponent())},initRange.apply(_,arguments),_}function quantile(){var _=[],T=[],R=[],P;function O(){var L=0,U=Math.max(1,T.length);for(R=new Array(U-1);++L<U;)R[L-1]=quantileSorted(_,L/U);return I}function I(L){return L==null||isNaN(L=+L)?P:T[bisectRight(R,L)]}return I.invertExtent=function(L){var U=T.indexOf(L);return U<0?[NaN,NaN]:[U>0?R[U-1]:_[0],U<R.length?R[U]:_[_.length-1]]},I.domain=function(L){if(!arguments.length)return _.slice();_=[];for(let U of L)U!=null&&!isNaN(U=+U)&&_.push(U);return _.sort(ascending$1),O()},I.range=function(L){return arguments.length?(T=Array.from(L),O()):T.slice()},I.unknown=function(L){return arguments.length?(P=L,I):P},I.quantiles=function(){return R.slice()},I.copy=function(){return quantile().domain(_).range(T).unknown(P)},initRange.apply(I,arguments)}function threshold(){var _=[.5],T=[0,1],R,P=1;function O(I){return I!=null&&I<=I?T[bisectRight(_,I,0,P)]:R}return O.domain=function(I){return arguments.length?(_=Array.from(I),P=Math.min(_.length,T.length-1),O):_.slice()},O.range=function(I){return arguments.length?(T=Array.from(I),P=Math.min(_.length,T.length-1),O):T.slice()},O.invertExtent=function(I){var L=T.indexOf(I);return[_[L-1],_[L]]},O.unknown=function(I){return arguments.length?(R=I,O):R},O.copy=function(){return threshold().domain(_).range(T).unknown(R)},initRange.apply(O,arguments)}const t0=new Date,t1=new Date;function timeInterval$1(_,T,R,P){function O(I){return _(I=arguments.length===0?new Date:new Date(+I)),I}return O.floor=I=>(_(I=new Date(+I)),I),O.ceil=I=>(_(I=new Date(I-1)),T(I,1),_(I),I),O.round=I=>{const L=O(I),U=O.ceil(I);return I-L<U-I?L:U},O.offset=(I,L)=>(T(I=new Date(+I),L==null?1:Math.floor(L)),I),O.range=(I,L,U)=>{const G=[];if(I=O.ceil(I),U=U==null?1:Math.floor(U),!(I<L)||!(U>0))return G;let V;do G.push(V=new Date(+I)),T(I,U),_(I);while(V<I&&I<L);return G},O.filter=I=>timeInterval$1(L=>{if(L>=L)for(;_(L),!I(L);)L.setTime(L-1)},(L,U)=>{if(L>=L)if(U<0)for(;++U<=0;)for(;T(L,-1),!I(L););else for(;--U>=0;)for(;T(L,1),!I(L););}),R&&(O.count=(I,L)=>(t0.setTime(+I),t1.setTime(+L),_(t0),_(t1),Math.floor(R(t0,t1))),O.every=I=>(I=Math.floor(I),!isFinite(I)||!(I>0)?null:I>1?O.filter(P?L=>P(L)%I===0:L=>O.count(0,L)%I===0):O)),O}const millisecond=timeInterval$1(()=>{},(_,T)=>{_.setTime(+_+T)},(_,T)=>T-_);millisecond.every=_=>(_=Math.floor(_),!isFinite(_)||!(_>0)?null:_>1?timeInterval$1(T=>{T.setTime(Math.floor(T/_)*_)},(T,R)=>{T.setTime(+T+R*_)},(T,R)=>(R-T)/_):millisecond);millisecond.range;const durationSecond$1=1e3,durationMinute$1=durationSecond$1*60,durationHour$1=durationMinute$1*60,durationDay$1=durationHour$1*24,durationWeek$1=durationDay$1*7,durationMonth$1=durationDay$1*30,durationYear$1=durationDay$1*365,second$1=timeInterval$1(_=>{_.setTime(_-_.getMilliseconds())},(_,T)=>{_.setTime(+_+T*durationSecond$1)},(_,T)=>(T-_)/durationSecond$1,_=>_.getUTCSeconds());second$1.range;const timeMinute=timeInterval$1(_=>{_.setTime(_-_.getMilliseconds()-_.getSeconds()*durationSecond$1)},(_,T)=>{_.setTime(+_+T*durationMinute$1)},(_,T)=>(T-_)/durationMinute$1,_=>_.getMinutes());timeMinute.range;const utcMinute=timeInterval$1(_=>{_.setUTCSeconds(0,0)},(_,T)=>{_.setTime(+_+T*durationMinute$1)},(_,T)=>(T-_)/durationMinute$1,_=>_.getUTCMinutes());utcMinute.range;const timeHour=timeInterval$1(_=>{_.setTime(_-_.getMilliseconds()-_.getSeconds()*durationSecond$1-_.getMinutes()*durationMinute$1)},(_,T)=>{_.setTime(+_+T*durationHour$1)},(_,T)=>(T-_)/durationHour$1,_=>_.getHours());timeHour.range;const utcHour=timeInterval$1(_=>{_.setUTCMinutes(0,0,0)},(_,T)=>{_.setTime(+_+T*durationHour$1)},(_,T)=>(T-_)/durationHour$1,_=>_.getUTCHours());utcHour.range;const timeDay=timeInterval$1(_=>_.setHours(0,0,0,0),(_,T)=>_.setDate(_.getDate()+T),(_,T)=>(T-_-(T.getTimezoneOffset()-_.getTimezoneOffset())*durationMinute$1)/durationDay$1,_=>_.getDate()-1);timeDay.range;const utcDay=timeInterval$1(_=>{_.setUTCHours(0,0,0,0)},(_,T)=>{_.setUTCDate(_.getUTCDate()+T)},(_,T)=>(T-_)/durationDay$1,_=>_.getUTCDate()-1);utcDay.range;const unixDay=timeInterval$1(_=>{_.setUTCHours(0,0,0,0)},(_,T)=>{_.setUTCDate(_.getUTCDate()+T)},(_,T)=>(T-_)/durationDay$1,_=>Math.floor(_/durationDay$1));unixDay.range;function timeWeekday(_){return timeInterval$1(T=>{T.setDate(T.getDate()-(T.getDay()+7-_)%7),T.setHours(0,0,0,0)},(T,R)=>{T.setDate(T.getDate()+R*7)},(T,R)=>(R-T-(R.getTimezoneOffset()-T.getTimezoneOffset())*durationMinute$1)/durationWeek$1)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(_){return timeInterval$1(T=>{T.setUTCDate(T.getUTCDate()-(T.getUTCDay()+7-_)%7),T.setUTCHours(0,0,0,0)},(T,R)=>{T.setUTCDate(T.getUTCDate()+R*7)},(T,R)=>(R-T)/durationWeek$1)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval$1(_=>{_.setDate(1),_.setHours(0,0,0,0)},(_,T)=>{_.setMonth(_.getMonth()+T)},(_,T)=>T.getMonth()-_.getMonth()+(T.getFullYear()-_.getFullYear())*12,_=>_.getMonth());timeMonth.range;const utcMonth=timeInterval$1(_=>{_.setUTCDate(1),_.setUTCHours(0,0,0,0)},(_,T)=>{_.setUTCMonth(_.getUTCMonth()+T)},(_,T)=>T.getUTCMonth()-_.getUTCMonth()+(T.getUTCFullYear()-_.getUTCFullYear())*12,_=>_.getUTCMonth());utcMonth.range;const timeYear=timeInterval$1(_=>{_.setMonth(0,1),_.setHours(0,0,0,0)},(_,T)=>{_.setFullYear(_.getFullYear()+T)},(_,T)=>T.getFullYear()-_.getFullYear(),_=>_.getFullYear());timeYear.every=_=>!isFinite(_=Math.floor(_))||!(_>0)?null:timeInterval$1(T=>{T.setFullYear(Math.floor(T.getFullYear()/_)*_),T.setMonth(0,1),T.setHours(0,0,0,0)},(T,R)=>{T.setFullYear(T.getFullYear()+R*_)});timeYear.range;const utcYear=timeInterval$1(_=>{_.setUTCMonth(0,1),_.setUTCHours(0,0,0,0)},(_,T)=>{_.setUTCFullYear(_.getUTCFullYear()+T)},(_,T)=>T.getUTCFullYear()-_.getUTCFullYear(),_=>_.getUTCFullYear());utcYear.every=_=>!isFinite(_=Math.floor(_))||!(_>0)?null:timeInterval$1(T=>{T.setUTCFullYear(Math.floor(T.getUTCFullYear()/_)*_),T.setUTCMonth(0,1),T.setUTCHours(0,0,0,0)},(T,R)=>{T.setUTCFullYear(T.getUTCFullYear()+R*_)});utcYear.range;function ticker(_,T,R,P,O,I){const L=[[second$1,1,durationSecond$1],[second$1,5,5*durationSecond$1],[second$1,15,15*durationSecond$1],[second$1,30,30*durationSecond$1],[I,1,durationMinute$1],[I,5,5*durationMinute$1],[I,15,15*durationMinute$1],[I,30,30*durationMinute$1],[O,1,durationHour$1],[O,3,3*durationHour$1],[O,6,6*durationHour$1],[O,12,12*durationHour$1],[P,1,durationDay$1],[P,2,2*durationDay$1],[R,1,durationWeek$1],[T,1,durationMonth$1],[T,3,3*durationMonth$1],[_,1,durationYear$1]];function U(V,Z,Y){const W=Z<V;W&&([V,Z]=[Z,V]);const J=Y&&typeof Y.range=="function"?Y:G(V,Z,Y),ee=J?J.range(V,+Z+1):[];return W?ee.reverse():ee}function G(V,Z,Y){const W=Math.abs(Z-V)/Y,J=bisector(([,,ie])=>ie).right(L,W);if(J===L.length)return _.every(tickStep(V/durationYear$1,Z/durationYear$1,Y));if(J===0)return millisecond.every(Math.max(tickStep(V,Z,Y),1));const[ee,te]=L[W/L[J-1][2]<L[J][2]/W?J-1:J];return ee.every(te)}return[U,G]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(_){if(0<=_.y&&_.y<100){var T=new Date(-1,_.m,_.d,_.H,_.M,_.S,_.L);return T.setFullYear(_.y),T}return new Date(_.y,_.m,_.d,_.H,_.M,_.S,_.L)}function utcDate(_){if(0<=_.y&&_.y<100){var T=new Date(Date.UTC(-1,_.m,_.d,_.H,_.M,_.S,_.L));return T.setUTCFullYear(_.y),T}return new Date(Date.UTC(_.y,_.m,_.d,_.H,_.M,_.S,_.L))}function newDate(_,T,R){return{y:_,m:T,d:R,H:0,M:0,S:0,L:0}}function formatLocale(_){var T=_.dateTime,R=_.date,P=_.time,O=_.periods,I=_.days,L=_.shortDays,U=_.months,G=_.shortMonths,V=formatRe(O),Z=formatLookup(O),Y=formatRe(I),W=formatLookup(I),J=formatRe(L),ee=formatLookup(L),te=formatRe(U),ie=formatLookup(U),oe=formatRe(G),ae=formatLookup(G),ce={a:Se,A:Te,b:Ae,B:Be,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:ve,q:Re,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear$1,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},le={a:Me,A:ze,b:qe,B:We,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:Oe,q:Ve,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},he={a:ge,A:_e,b:we,B:be,c:Ce,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:pe,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:Ee,X:ye,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};ce.x=me(R,ce),ce.X=me(P,ce),ce.c=me(T,ce),le.x=me(R,le),le.X=me(P,le),le.c=me(T,le);function me(ke,Fe){return function(He){var Pe=[],Je=-1,Ke=0,Ze=ke.length,Qe,at,et;for(He instanceof Date||(He=new Date(+He));++Je<Ze;)ke.charCodeAt(Je)===37&&(Pe.push(ke.slice(Ke,Je)),(at=pads[Qe=ke.charAt(++Je)])!=null?Qe=ke.charAt(++Je):at=Qe==="e"?" ":"0",(et=Fe[Qe])&&(Qe=et(He,at)),Pe.push(Qe),Ke=Je+1);return Pe.push(ke.slice(Ke,Je)),Pe.join("")}}function fe(ke,Fe){return function(He){var Pe=newDate(1900,void 0,1),Je=ue(Pe,ke,He+="",0),Ke,Ze;if(Je!=He.length)return null;if("Q"in Pe)return new Date(Pe.Q);if("s"in Pe)return new Date(Pe.s*1e3+("L"in Pe?Pe.L:0));if(Fe&&!("Z"in Pe)&&(Pe.Z=0),"p"in Pe&&(Pe.H=Pe.H%12+Pe.p*12),Pe.m===void 0&&(Pe.m="q"in Pe?Pe.q:0),"V"in Pe){if(Pe.V<1||Pe.V>53)return null;"w"in Pe||(Pe.w=1),"Z"in Pe?(Ke=utcDate(newDate(Pe.y,0,1)),Ze=Ke.getUTCDay(),Ke=Ze>4||Ze===0?utcMonday.ceil(Ke):utcMonday(Ke),Ke=utcDay.offset(Ke,(Pe.V-1)*7),Pe.y=Ke.getUTCFullYear(),Pe.m=Ke.getUTCMonth(),Pe.d=Ke.getUTCDate()+(Pe.w+6)%7):(Ke=localDate(newDate(Pe.y,0,1)),Ze=Ke.getDay(),Ke=Ze>4||Ze===0?timeMonday.ceil(Ke):timeMonday(Ke),Ke=timeDay.offset(Ke,(Pe.V-1)*7),Pe.y=Ke.getFullYear(),Pe.m=Ke.getMonth(),Pe.d=Ke.getDate()+(Pe.w+6)%7)}else("W"in Pe||"U"in Pe)&&("w"in Pe||(Pe.w="u"in Pe?Pe.u%7:"W"in Pe?1:0),Ze="Z"in Pe?utcDate(newDate(Pe.y,0,1)).getUTCDay():localDate(newDate(Pe.y,0,1)).getDay(),Pe.m=0,Pe.d="W"in Pe?(Pe.w+6)%7+Pe.W*7-(Ze+5)%7:Pe.w+Pe.U*7-(Ze+6)%7);return"Z"in Pe?(Pe.H+=Pe.Z/100|0,Pe.M+=Pe.Z%100,utcDate(Pe)):localDate(Pe)}}function ue(ke,Fe,He,Pe){for(var Je=0,Ke=Fe.length,Ze=He.length,Qe,at;Je<Ke;){if(Pe>=Ze)return-1;if(Qe=Fe.charCodeAt(Je++),Qe===37){if(Qe=Fe.charAt(Je++),at=he[Qe in pads?Fe.charAt(Je++):Qe],!at||(Pe=at(ke,He,Pe))<0)return-1}else if(Qe!=He.charCodeAt(Pe++))return-1}return Pe}function pe(ke,Fe,He){var Pe=V.exec(Fe.slice(He));return Pe?(ke.p=Z.get(Pe[0].toLowerCase()),He+Pe[0].length):-1}function ge(ke,Fe,He){var Pe=J.exec(Fe.slice(He));return Pe?(ke.w=ee.get(Pe[0].toLowerCase()),He+Pe[0].length):-1}function _e(ke,Fe,He){var Pe=Y.exec(Fe.slice(He));return Pe?(ke.w=W.get(Pe[0].toLowerCase()),He+Pe[0].length):-1}function we(ke,Fe,He){var Pe=oe.exec(Fe.slice(He));return Pe?(ke.m=ae.get(Pe[0].toLowerCase()),He+Pe[0].length):-1}function be(ke,Fe,He){var Pe=te.exec(Fe.slice(He));return Pe?(ke.m=ie.get(Pe[0].toLowerCase()),He+Pe[0].length):-1}function Ce(ke,Fe,He){return ue(ke,T,Fe,He)}function Ee(ke,Fe,He){return ue(ke,R,Fe,He)}function ye(ke,Fe,He){return ue(ke,P,Fe,He)}function Se(ke){return L[ke.getDay()]}function Te(ke){return I[ke.getDay()]}function Ae(ke){return G[ke.getMonth()]}function Be(ke){return U[ke.getMonth()]}function ve(ke){return O[+(ke.getHours()>=12)]}function Re(ke){return 1+~~(ke.getMonth()/3)}function Me(ke){return L[ke.getUTCDay()]}function ze(ke){return I[ke.getUTCDay()]}function qe(ke){return G[ke.getUTCMonth()]}function We(ke){return U[ke.getUTCMonth()]}function Oe(ke){return O[+(ke.getUTCHours()>=12)]}function Ve(ke){return 1+~~(ke.getUTCMonth()/3)}return{format:function(ke){var Fe=me(ke+="",ce);return Fe.toString=function(){return ke},Fe},parse:function(ke){var Fe=fe(ke+="",!1);return Fe.toString=function(){return ke},Fe},utcFormat:function(ke){var Fe=me(ke+="",le);return Fe.toString=function(){return ke},Fe},utcParse:function(ke){var Fe=fe(ke+="",!0);return Fe.toString=function(){return ke},Fe}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad$1(_,T,R){var P=_<0?"-":"",O=(P?-_:_)+"",I=O.length;return P+(I<R?new Array(R-I+1).join(T)+O:O)}function requote(_){return _.replace(requoteRe,"\\$&")}function formatRe(_){return new RegExp("^(?:"+_.map(requote).join("|")+")","i")}function formatLookup(_){return new Map(_.map((T,R)=>[T.toLowerCase(),R]))}function parseWeekdayNumberSunday(_,T,R){var P=numberRe.exec(T.slice(R,R+1));return P?(_.w=+P[0],R+P[0].length):-1}function parseWeekdayNumberMonday(_,T,R){var P=numberRe.exec(T.slice(R,R+1));return P?(_.u=+P[0],R+P[0].length):-1}function parseWeekNumberSunday(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.U=+P[0],R+P[0].length):-1}function parseWeekNumberISO(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.V=+P[0],R+P[0].length):-1}function parseWeekNumberMonday(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.W=+P[0],R+P[0].length):-1}function parseFullYear(_,T,R){var P=numberRe.exec(T.slice(R,R+4));return P?(_.y=+P[0],R+P[0].length):-1}function parseYear(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.y=+P[0]+(+P[0]>68?1900:2e3),R+P[0].length):-1}function parseZone(_,T,R){var P=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(T.slice(R,R+6));return P?(_.Z=P[1]?0:-(P[2]+(P[3]||"00")),R+P[0].length):-1}function parseQuarter(_,T,R){var P=numberRe.exec(T.slice(R,R+1));return P?(_.q=P[0]*3-3,R+P[0].length):-1}function parseMonthNumber(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.m=P[0]-1,R+P[0].length):-1}function parseDayOfMonth(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.d=+P[0],R+P[0].length):-1}function parseDayOfYear(_,T,R){var P=numberRe.exec(T.slice(R,R+3));return P?(_.m=0,_.d=+P[0],R+P[0].length):-1}function parseHour24(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.H=+P[0],R+P[0].length):-1}function parseMinutes(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.M=+P[0],R+P[0].length):-1}function parseSeconds(_,T,R){var P=numberRe.exec(T.slice(R,R+2));return P?(_.S=+P[0],R+P[0].length):-1}function parseMilliseconds(_,T,R){var P=numberRe.exec(T.slice(R,R+3));return P?(_.L=+P[0],R+P[0].length):-1}function parseMicroseconds(_,T,R){var P=numberRe.exec(T.slice(R,R+6));return P?(_.L=Math.floor(P[0]/1e3),R+P[0].length):-1}function parseLiteralPercent(_,T,R){var P=percentRe.exec(T.slice(R,R+1));return P?R+P[0].length:-1}function parseUnixTimestamp(_,T,R){var P=numberRe.exec(T.slice(R));return P?(_.Q=+P[0],R+P[0].length):-1}function parseUnixTimestampSeconds(_,T,R){var P=numberRe.exec(T.slice(R));return P?(_.s=+P[0],R+P[0].length):-1}function formatDayOfMonth(_,T){return pad$1(_.getDate(),T,2)}function formatHour24(_,T){return pad$1(_.getHours(),T,2)}function formatHour12(_,T){return pad$1(_.getHours()%12||12,T,2)}function formatDayOfYear(_,T){return pad$1(1+timeDay.count(timeYear(_),_),T,3)}function formatMilliseconds(_,T){return pad$1(_.getMilliseconds(),T,3)}function formatMicroseconds(_,T){return formatMilliseconds(_,T)+"000"}function formatMonthNumber(_,T){return pad$1(_.getMonth()+1,T,2)}function formatMinutes(_,T){return pad$1(_.getMinutes(),T,2)}function formatSeconds(_,T){return pad$1(_.getSeconds(),T,2)}function formatWeekdayNumberMonday(_){var T=_.getDay();return T===0?7:T}function formatWeekNumberSunday(_,T){return pad$1(timeSunday.count(timeYear(_)-1,_),T,2)}function dISO(_){var T=_.getDay();return T>=4||T===0?timeThursday(_):timeThursday.ceil(_)}function formatWeekNumberISO(_,T){return _=dISO(_),pad$1(timeThursday.count(timeYear(_),_)+(timeYear(_).getDay()===4),T,2)}function formatWeekdayNumberSunday(_){return _.getDay()}function formatWeekNumberMonday(_,T){return pad$1(timeMonday.count(timeYear(_)-1,_),T,2)}function formatYear$1(_,T){return pad$1(_.getFullYear()%100,T,2)}function formatYearISO(_,T){return _=dISO(_),pad$1(_.getFullYear()%100,T,2)}function formatFullYear(_,T){return pad$1(_.getFullYear()%1e4,T,4)}function formatFullYearISO(_,T){var R=_.getDay();return _=R>=4||R===0?timeThursday(_):timeThursday.ceil(_),pad$1(_.getFullYear()%1e4,T,4)}function formatZone(_){var T=_.getTimezoneOffset();return(T>0?"-":(T*=-1,"+"))+pad$1(T/60|0,"0",2)+pad$1(T%60,"0",2)}function formatUTCDayOfMonth(_,T){return pad$1(_.getUTCDate(),T,2)}function formatUTCHour24(_,T){return pad$1(_.getUTCHours(),T,2)}function formatUTCHour12(_,T){return pad$1(_.getUTCHours()%12||12,T,2)}function formatUTCDayOfYear(_,T){return pad$1(1+utcDay.count(utcYear(_),_),T,3)}function formatUTCMilliseconds(_,T){return pad$1(_.getUTCMilliseconds(),T,3)}function formatUTCMicroseconds(_,T){return formatUTCMilliseconds(_,T)+"000"}function formatUTCMonthNumber(_,T){return pad$1(_.getUTCMonth()+1,T,2)}function formatUTCMinutes(_,T){return pad$1(_.getUTCMinutes(),T,2)}function formatUTCSeconds(_,T){return pad$1(_.getUTCSeconds(),T,2)}function formatUTCWeekdayNumberMonday(_){var T=_.getUTCDay();return T===0?7:T}function formatUTCWeekNumberSunday(_,T){return pad$1(utcSunday.count(utcYear(_)-1,_),T,2)}function UTCdISO(_){var T=_.getUTCDay();return T>=4||T===0?utcThursday(_):utcThursday.ceil(_)}function formatUTCWeekNumberISO(_,T){return _=UTCdISO(_),pad$1(utcThursday.count(utcYear(_),_)+(utcYear(_).getUTCDay()===4),T,2)}function formatUTCWeekdayNumberSunday(_){return _.getUTCDay()}function formatUTCWeekNumberMonday(_,T){return pad$1(utcMonday.count(utcYear(_)-1,_),T,2)}function formatUTCYear(_,T){return pad$1(_.getUTCFullYear()%100,T,2)}function formatUTCYearISO(_,T){return _=UTCdISO(_),pad$1(_.getUTCFullYear()%100,T,2)}function formatUTCFullYear(_,T){return pad$1(_.getUTCFullYear()%1e4,T,4)}function formatUTCFullYearISO(_,T){var R=_.getUTCDay();return _=R>=4||R===0?utcThursday(_):utcThursday.ceil(_),pad$1(_.getUTCFullYear()%1e4,T,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(_){return+_}function formatUnixTimestampSeconds(_){return Math.floor(+_/1e3)}var locale,timeFormat,utcFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(_){return locale=formatLocale(_),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(_){return new Date(_)}function number$1(_){return _ instanceof Date?+_:+new Date(+_)}function calendar(_,T,R,P,O,I,L,U,G,V){var Z=continuous(),Y=Z.invert,W=Z.domain,J=V(".%L"),ee=V(":%S"),te=V("%I:%M"),ie=V("%I %p"),oe=V("%a %d"),ae=V("%b %d"),ce=V("%B"),le=V("%Y");function he(me){return(G(me)<me?J:U(me)<me?ee:L(me)<me?te:I(me)<me?ie:P(me)<me?O(me)<me?oe:ae:R(me)<me?ce:le)(me)}return Z.invert=function(me){return new Date(Y(me))},Z.domain=function(me){return arguments.length?W(Array.from(me,number$1)):W().map(date)},Z.ticks=function(me){var fe=W();return _(fe[0],fe[fe.length-1],me??10)},Z.tickFormat=function(me,fe){return fe==null?he:V(fe)},Z.nice=function(me){var fe=W();return(!me||typeof me.range!="function")&&(me=T(fe[0],fe[fe.length-1],me??10)),me?W(nice(fe,me)):Z},Z.copy=function(){return copy$1(Z,calendar(_,T,R,P,O,I,L,U,G,V))},Z}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second$1,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second$1,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function copy(_,T){return T.domain(_.domain()).interpolator(_.interpolator()).clamp(_.clamp()).unknown(_.unknown())}function transformer(){var _=0,T=.5,R=1,P=1,O,I,L,U,G,V=identity$4,Z,Y=!1,W;function J(te){return isNaN(te=+te)?W:(te=.5+((te=+Z(te))-I)*(P*te<P*I?U:G),V(Y?Math.max(0,Math.min(1,te)):te))}J.domain=function(te){return arguments.length?([_,T,R]=te,O=Z(_=+_),I=Z(T=+T),L=Z(R=+R),U=O===I?0:.5/(I-O),G=I===L?0:.5/(L-I),P=I<O?-1:1,J):[_,T,R]},J.clamp=function(te){return arguments.length?(Y=!!te,J):Y},J.interpolator=function(te){return arguments.length?(V=te,J):V};function ee(te){return function(ie){var oe,ae,ce;return arguments.length?([oe,ae,ce]=ie,V=piecewise(te,[oe,ae,ce]),J):[V(0),V(.5),V(1)]}}return J.range=ee(interpolate$1),J.rangeRound=ee(interpolateRound),J.unknown=function(te){return arguments.length?(W=te,J):W},function(te){return Z=te,O=te(_),I=te(T),L=te(R),U=O===I?0:.5/(I-O),G=I===L?0:.5/(L-I),P=I<O?-1:1,J}}function diverging(){var _=linearish(transformer()(identity$4));return _.copy=function(){return copy(_,diverging())},initInterpolator.apply(_,arguments)}function divergingLog(){var _=loggish(transformer()).domain([.1,1,10]);return _.copy=function(){return copy(_,divergingLog()).base(_.base())},initInterpolator.apply(_,arguments)}function divergingSymlog(){var _=symlogish(transformer());return _.copy=function(){return copy(_,divergingSymlog()).constant(_.constant())},initInterpolator.apply(_,arguments)}function divergingPow(){var _=powish(transformer());return _.copy=function(){return copy(_,divergingPow()).exponent(_.exponent())},initInterpolator.apply(_,arguments)}function colors(_){for(var T=_.length/6|0,R=new Array(T),P=0;P<T;)R[P]="#"+_.slice(P*6,++P*6);return R}const schemeCategory10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),schemeAccent=colors("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),schemeDark2=colors("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),schemeObservable10=colors("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),schemePaired=colors("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),schemePastel1=colors("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),schemePastel2=colors("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),schemeSet1=colors("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),schemeSet2=colors("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),schemeSet3=colors("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),schemeTableau10=colors("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),ramp$1=_=>rgbBasis(_[_.length-1]);var scheme$q=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors);const interpolateBrBG=ramp$1(scheme$q);var scheme$p=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors);const interpolatePRGn=ramp$1(scheme$p);var scheme$o=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors);const interpolatePiYG=ramp$1(scheme$o);var scheme$n=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors);const interpolatePuOr=ramp$1(scheme$n);var scheme$m=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors);const interpolateRdBu=ramp$1(scheme$m);var scheme$l=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors);const interpolateRdGy=ramp$1(scheme$l);var scheme$k=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors);const interpolateRdYlBu=ramp$1(scheme$k);var scheme$j=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors);const interpolateRdYlGn=ramp$1(scheme$j);var scheme$i=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors);const interpolateSpectral=ramp$1(scheme$i);var scheme$h=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors);const interpolateBuGn=ramp$1(scheme$h);var scheme$g=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors);const interpolateBuPu=ramp$1(scheme$g);var scheme$f=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors);const interpolateGnBu=ramp$1(scheme$f);var scheme$e=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors);const interpolateOrRd=ramp$1(scheme$e);var scheme$d=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors);const interpolatePuBuGn=ramp$1(scheme$d);var scheme$c=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors);const interpolatePuBu=ramp$1(scheme$c);var scheme$b=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors);const interpolatePuRd=ramp$1(scheme$b);var scheme$a=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors);const interpolateRdPu=ramp$1(scheme$a);var scheme$9=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors);const interpolateYlGnBu=ramp$1(scheme$9);var scheme$8=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors);const interpolateYlGn=ramp$1(scheme$8);var scheme$7=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors);const interpolateYlOrBr=ramp$1(scheme$7);var scheme$6=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors);const interpolateYlOrRd=ramp$1(scheme$6);var scheme$5=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors);const interpolateBlues=ramp$1(scheme$5);var scheme$4=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors);const interpolateGreens=ramp$1(scheme$4);var scheme$3=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors);const interpolateGreys=ramp$1(scheme$3);var scheme$2=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors);const interpolatePurples=ramp$1(scheme$2);var scheme$1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors);const interpolateReds=ramp$1(scheme$1);var scheme=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors);const interpolateOranges=ramp$1(scheme);function interpolateCividis(_){return _=Math.max(0,Math.min(1,_)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-_*(35.34-_*(2381.73-_*(6402.7-_*(7024.72-_*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+_*(170.73+_*(52.82-_*(131.46-_*(176.58-_*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+_*(442.36-_*(2482.43-_*(6167.24-_*(6614.94-_*2475.67)))))))+")"}const interpolateCubehelixDefault=cubehelixLong(cubehelix$1(300,.5,0),cubehelix$1(-240,.5,1));var warm=cubehelixLong(cubehelix$1(-100,.75,.35),cubehelix$1(80,1.5,.8)),cool=cubehelixLong(cubehelix$1(260,.75,.35),cubehelix$1(80,1.5,.8)),c$2=cubehelix$1();function interpolateRainbow(_){(_<0||_>1)&&(_-=Math.floor(_));var T=Math.abs(_-.5);return c$2.h=360*_-100,c$2.s=1.5-1.5*T,c$2.l=.8-.9*T,c$2+""}var c$1=rgb(),pi_1_3=Math.PI/3,pi_2_3=Math.PI*2/3;function interpolateSinebow(_){var T;return _=(.5-_)*Math.PI,c$1.r=255*(T=Math.sin(_))*T,c$1.g=255*(T=Math.sin(_+pi_1_3))*T,c$1.b=255*(T=Math.sin(_+pi_2_3))*T,c$1+""}function interpolateTurbo(_){return _=Math.max(0,Math.min(1,_)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+_*(1172.33-_*(10793.56-_*(33300.12-_*(38394.49-_*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+_*(557.33+_*(1225.33-_*(3574.96-_*(1073.77+_*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+_*(3211.1-_*(15327.97-_*(27814-_*(22569.18-_*6838.66)))))))+")"}function ramp(_){var T=_.length;return function(R){return _[Math.max(0,Math.min(T-1,Math.floor(R*T)))]}}const interpolateViridis=ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var magma=ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function constant$2(_){return function(){return _}}const cos=Math.cos,min=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon=1e-12,pi$1=Math.PI,tau$1=2*pi$1;function withPath(_){let T=3;return _.digits=function(R){if(!arguments.length)return T;if(R==null)T=null;else{const P=Math.floor(R);if(!(P>=0))throw new RangeError(`invalid digits: ${R}`);T=P}return _},()=>new Path(T)}function array(_){return typeof _=="object"&&"length"in _?_:Array.from(_)}function Linear(_){this._context=_}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1,this._line?this._context.lineTo(_,T):this._context.moveTo(_,T);break;case 1:this._point=2;default:this._context.lineTo(_,T);break}}};function curveLinear(_){return new Linear(_)}function x(_){return _[0]}function y(_){return _[1]}function shapeLine(_,T){var R=constant$2(!0),P=null,O=curveLinear,I=null,L=withPath(U);_=typeof _=="function"?_:_===void 0?x:constant$2(_),T=typeof T=="function"?T:T===void 0?y:constant$2(T);function U(G){var V,Z=(G=array(G)).length,Y,W=!1,J;for(P==null&&(I=O(J=L())),V=0;V<=Z;++V)!(V<Z&&R(Y=G[V],V,G))===W&&((W=!W)?I.lineStart():I.lineEnd()),W&&I.point(+_(Y,V,G),+T(Y,V,G));if(J)return I=null,J+""||null}return U.x=function(G){return arguments.length?(_=typeof G=="function"?G:constant$2(+G),U):_},U.y=function(G){return arguments.length?(T=typeof G=="function"?G:constant$2(+G),U):T},U.defined=function(G){return arguments.length?(R=typeof G=="function"?G:constant$2(!!G),U):R},U.curve=function(G){return arguments.length?(O=G,P!=null&&(I=O(P)),U):O},U.context=function(G){return arguments.length?(G==null?P=I=null:I=O(P=G),U):P},U}function shapeArea(_,T,R){var P=null,O=constant$2(!0),I=null,L=curveLinear,U=null,G=withPath(V);_=typeof _=="function"?_:_===void 0?x:constant$2(+_),T=typeof T=="function"?T:constant$2(T===void 0?0:+T),R=typeof R=="function"?R:R===void 0?y:constant$2(+R);function V(Y){var W,J,ee,te=(Y=array(Y)).length,ie,oe=!1,ae,ce=new Array(te),le=new Array(te);for(I==null&&(U=L(ae=G())),W=0;W<=te;++W){if(!(W<te&&O(ie=Y[W],W,Y))===oe)if(oe=!oe)J=W,U.areaStart(),U.lineStart();else{for(U.lineEnd(),U.lineStart(),ee=W-1;ee>=J;--ee)U.point(ce[ee],le[ee]);U.lineEnd(),U.areaEnd()}oe&&(ce[W]=+_(ie,W,Y),le[W]=+T(ie,W,Y),U.point(P?+P(ie,W,Y):ce[W],R?+R(ie,W,Y):le[W]))}if(ae)return U=null,ae+""||null}function Z(){return shapeLine().defined(O).curve(L).context(I)}return V.x=function(Y){return arguments.length?(_=typeof Y=="function"?Y:constant$2(+Y),P=null,V):_},V.x0=function(Y){return arguments.length?(_=typeof Y=="function"?Y:constant$2(+Y),V):_},V.x1=function(Y){return arguments.length?(P=Y==null?null:typeof Y=="function"?Y:constant$2(+Y),V):P},V.y=function(Y){return arguments.length?(T=typeof Y=="function"?Y:constant$2(+Y),R=null,V):T},V.y0=function(Y){return arguments.length?(T=typeof Y=="function"?Y:constant$2(+Y),V):T},V.y1=function(Y){return arguments.length?(R=Y==null?null:typeof Y=="function"?Y:constant$2(+Y),V):R},V.lineX0=V.lineY0=function(){return Z().x(_).y(T)},V.lineY1=function(){return Z().x(_).y(R)},V.lineX1=function(){return Z().x(P).y(T)},V.defined=function(Y){return arguments.length?(O=typeof Y=="function"?Y:constant$2(!!Y),V):O},V.curve=function(Y){return arguments.length?(L=Y,I!=null&&(U=L(I)),V):L},V.context=function(Y){return arguments.length?(Y==null?I=U=null:U=L(I=Y),V):I},V}class Bump{constructor(T,R){this._context=T,this._x=R}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(T,R){switch(T=+T,R=+R,this._point){case 0:{this._point=1,this._line?this._context.lineTo(T,R):this._context.moveTo(T,R);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+T)/2,this._y0,this._x0,R,T,R):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+R)/2,T,this._y0,T,R);break}}this._x0=T,this._y0=R}}function bumpX(_){return new Bump(_,!0)}function bumpY(_){return new Bump(_,!1)}const sqrt3$3=sqrt(3),symbolAsterisk={draw(_,T){const R=sqrt(T+min(T/28,.75))*.59436,P=R/2,O=P*sqrt3$3;_.moveTo(0,R),_.lineTo(0,-R),_.moveTo(-O,-P),_.lineTo(O,P),_.moveTo(-O,P),_.lineTo(O,-P)}},symbolCircle={draw(_,T){const R=sqrt(T/pi$1);_.moveTo(R,0),_.arc(0,0,R,0,tau$1)}},symbolCross={draw(_,T){const R=sqrt(T/5)/2;_.moveTo(-3*R,-R),_.lineTo(-R,-R),_.lineTo(-R,-3*R),_.lineTo(R,-3*R),_.lineTo(R,-R),_.lineTo(3*R,-R),_.lineTo(3*R,R),_.lineTo(R,R),_.lineTo(R,3*R),_.lineTo(-R,3*R),_.lineTo(-R,R),_.lineTo(-3*R,R),_.closePath()}},tan30=sqrt(1/3),tan30_2=tan30*2,symbolDiamond={draw(_,T){const R=sqrt(T/tan30_2),P=R*tan30;_.moveTo(0,-R),_.lineTo(P,0),_.lineTo(0,R),_.lineTo(-P,0),_.closePath()}},symbolDiamond2={draw(_,T){const R=sqrt(T)*.62625;_.moveTo(0,-R),_.lineTo(R,0),_.lineTo(0,R),_.lineTo(-R,0),_.closePath()}},symbolPlus={draw(_,T){const R=sqrt(T-min(T/7,2))*.87559;_.moveTo(-R,0),_.lineTo(R,0),_.moveTo(0,R),_.lineTo(0,-R)}},symbolSquare={draw(_,T){const R=sqrt(T),P=-R/2;_.rect(P,P,R,R)}},symbolSquare2={draw(_,T){const R=sqrt(T)*.4431;_.moveTo(R,R),_.lineTo(R,-R),_.lineTo(-R,-R),_.lineTo(-R,R),_.closePath()}},ka=.8908130915292852,kr=sin(pi$1/10)/sin(7*pi$1/10),kx=sin(tau$1/10)*kr,ky=-cos(tau$1/10)*kr,symbolStar={draw(_,T){const R=sqrt(T*ka),P=kx*R,O=ky*R;_.moveTo(0,-R),_.lineTo(P,O);for(let I=1;I<5;++I){const L=tau$1*I/5,U=cos(L),G=sin(L);_.lineTo(G*R,-U*R),_.lineTo(U*P-G*O,G*P+U*O)}_.closePath()}},sqrt3$2=sqrt(3),symbolTriangle={draw(_,T){const R=-sqrt(T/(sqrt3$2*3));_.moveTo(0,R*2),_.lineTo(-sqrt3$2*R,-R),_.lineTo(sqrt3$2*R,-R),_.closePath()}},sqrt3$1=sqrt(3),symbolTriangle2={draw(_,T){const R=sqrt(T)*.6824,P=R/2,O=R*sqrt3$1/2;_.moveTo(0,-R),_.lineTo(O,P),_.lineTo(-O,P),_.closePath()}},c=-.5,s=sqrt(3)/2,k=1/sqrt(12),a=(k/2+1)*3,symbolWye={draw(_,T){const R=sqrt(T/a),P=R/2,O=R*k,I=P,L=R*k+R,U=-I,G=L;_.moveTo(P,O),_.lineTo(I,L),_.lineTo(U,G),_.lineTo(c*P-s*O,s*P+c*O),_.lineTo(c*I-s*L,s*I+c*L),_.lineTo(c*U-s*G,s*U+c*G),_.lineTo(c*P+s*O,c*O-s*P),_.lineTo(c*I+s*L,c*L-s*I),_.lineTo(c*U+s*G,c*G-s*U),_.closePath()}},symbolTimes={draw(_,T){const R=sqrt(T-min(T/6,1.7))*.6189;_.moveTo(-R,-R),_.lineTo(R,R),_.moveTo(-R,R),_.lineTo(R,-R)}},symbolsFill=[symbolCircle,symbolCross,symbolDiamond,symbolSquare,symbolStar,symbolTriangle,symbolWye],symbolsStroke=[symbolCircle,symbolPlus,symbolTimes,symbolTriangle2,symbolAsterisk,symbolSquare2,symbolDiamond2];function noop(){}function point$3(_,T,R){_._context.bezierCurveTo((2*_._x0+_._x1)/3,(2*_._y0+_._y1)/3,(_._x0+2*_._x1)/3,(_._y0+2*_._y1)/3,(_._x0+4*_._x1+T)/6,(_._y0+4*_._y1+R)/6)}function Basis(_){this._context=_}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1,this._line?this._context.lineTo(_,T):this._context.moveTo(_,T);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$3(this,_,T);break}this._x0=this._x1,this._x1=_,this._y0=this._y1,this._y1=T}};function curveBasis(_){return new Basis(_)}function BasisClosed(_){this._context=_}BasisClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1,this._x2=_,this._y2=T;break;case 1:this._point=2,this._x3=_,this._y3=T;break;case 2:this._point=3,this._x4=_,this._y4=T,this._context.moveTo((this._x0+4*this._x1+_)/6,(this._y0+4*this._y1+T)/6);break;default:point$3(this,_,T);break}this._x0=this._x1,this._x1=_,this._y0=this._y1,this._y1=T}};function curveBasisClosed(_){return new BasisClosed(_)}function BasisOpen(_){this._context=_}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var R=(this._x0+4*this._x1+_)/6,P=(this._y0+4*this._y1+T)/6;this._line?this._context.lineTo(R,P):this._context.moveTo(R,P);break;case 3:this._point=4;default:point$3(this,_,T);break}this._x0=this._x1,this._x1=_,this._y0=this._y1,this._y1=T}};function curveBasisOpen(_){return new BasisOpen(_)}function Bundle(_,T){this._basis=new Basis(_),this._beta=T}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var _=this._x,T=this._y,R=_.length-1;if(R>0)for(var P=_[0],O=T[0],I=_[R]-P,L=T[R]-O,U=-1,G;++U<=R;)G=U/R,this._basis.point(this._beta*_[U]+(1-this._beta)*(P+G*I),this._beta*T[U]+(1-this._beta)*(O+G*L));this._x=this._y=null,this._basis.lineEnd()},point:function(_,T){this._x.push(+_),this._y.push(+T)}};const curveBundle=(function _(T){function R(P){return T===1?new Basis(P):new Bundle(P,T)}return R.beta=function(P){return _(+P)},R})(.85);function point$2(_,T,R){_._context.bezierCurveTo(_._x1+_._k*(_._x2-_._x0),_._y1+_._k*(_._y2-_._y0),_._x2+_._k*(_._x1-T),_._y2+_._k*(_._y1-R),_._x2,_._y2)}function Cardinal(_,T){this._context=_,this._k=(1-T)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$2(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1,this._line?this._context.lineTo(_,T):this._context.moveTo(_,T);break;case 1:this._point=2,this._x1=_,this._y1=T;break;case 2:this._point=3;default:point$2(this,_,T);break}this._x0=this._x1,this._x1=this._x2,this._x2=_,this._y0=this._y1,this._y1=this._y2,this._y2=T}};const curveCardinal=(function _(T){function R(P){return new Cardinal(P,T)}return R.tension=function(P){return _(+P)},R})(0);function CardinalClosed(_,T){this._context=_,this._k=(1-T)/6}CardinalClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1,this._x3=_,this._y3=T;break;case 1:this._point=2,this._context.moveTo(this._x4=_,this._y4=T);break;case 2:this._point=3,this._x5=_,this._y5=T;break;default:point$2(this,_,T);break}this._x0=this._x1,this._x1=this._x2,this._x2=_,this._y0=this._y1,this._y1=this._y2,this._y2=T}};const curveCardinalClosed=(function _(T){function R(P){return new CardinalClosed(P,T)}return R.tension=function(P){return _(+P)},R})(0);function CardinalOpen(_,T){this._context=_,this._k=(1-T)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,_,T);break}this._x0=this._x1,this._x1=this._x2,this._x2=_,this._y0=this._y1,this._y1=this._y2,this._y2=T}};const curveCardinalOpen=(function _(T){function R(P){return new CardinalOpen(P,T)}return R.tension=function(P){return _(+P)},R})(0);function point$1(_,T,R){var P=_._x1,O=_._y1,I=_._x2,L=_._y2;if(_._l01_a>epsilon){var U=2*_._l01_2a+3*_._l01_a*_._l12_a+_._l12_2a,G=3*_._l01_a*(_._l01_a+_._l12_a);P=(P*U-_._x0*_._l12_2a+_._x2*_._l01_2a)/G,O=(O*U-_._y0*_._l12_2a+_._y2*_._l01_2a)/G}if(_._l23_a>epsilon){var V=2*_._l23_2a+3*_._l23_a*_._l12_a+_._l12_2a,Z=3*_._l23_a*(_._l23_a+_._l12_a);I=(I*V+_._x1*_._l23_2a-T*_._l12_2a)/Z,L=(L*V+_._y1*_._l23_2a-R*_._l12_2a)/Z}_._context.bezierCurveTo(P,O,I,L,_._x2,_._y2)}function CatmullRom(_,T){this._context=_,this._alpha=T}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){if(_=+_,T=+T,this._point){var R=this._x2-_,P=this._y2-T;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(R*R+P*P,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(_,T):this._context.moveTo(_,T);break;case 1:this._point=2;break;case 2:this._point=3;default:point$1(this,_,T);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=_,this._y0=this._y1,this._y1=this._y2,this._y2=T}};const curveCatmullRom=(function _(T){function R(P){return T?new CatmullRom(P,T):new Cardinal(P,0)}return R.alpha=function(P){return _(+P)},R})(.5);function CatmullRomClosed(_,T){this._context=_,this._alpha=T}CatmullRomClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(_,T){if(_=+_,T=+T,this._point){var R=this._x2-_,P=this._y2-T;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(R*R+P*P,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=_,this._y3=T;break;case 1:this._point=2,this._context.moveTo(this._x4=_,this._y4=T);break;case 2:this._point=3,this._x5=_,this._y5=T;break;default:point$1(this,_,T);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=_,this._y0=this._y1,this._y1=this._y2,this._y2=T}};const curveCatmullRomClosed=(function _(T){function R(P){return T?new CatmullRomClosed(P,T):new CardinalClosed(P,0)}return R.alpha=function(P){return _(+P)},R})(.5);function CatmullRomOpen(_,T){this._context=_,this._alpha=T}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){if(_=+_,T=+T,this._point){var R=this._x2-_,P=this._y2-T;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(R*R+P*P,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$1(this,_,T);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=_,this._y0=this._y1,this._y1=this._y2,this._y2=T}};const curveCatmullRomOpen=(function _(T){function R(P){return T?new CatmullRomOpen(P,T):new CardinalOpen(P,0)}return R.alpha=function(P){return _(+P)},R})(.5);function LinearClosed(_){this._context=_}LinearClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(_,T){_=+_,T=+T,this._point?this._context.lineTo(_,T):(this._point=1,this._context.moveTo(_,T))}};function curveLinearClosed(_){return new LinearClosed(_)}function sign(_){return _<0?-1:1}function slope3(_,T,R){var P=_._x1-_._x0,O=T-_._x1,I=(_._y1-_._y0)/(P||O<0&&-0),L=(R-_._y1)/(O||P<0&&-0),U=(I*O+L*P)/(P+O);return(sign(I)+sign(L))*Math.min(Math.abs(I),Math.abs(L),.5*Math.abs(U))||0}function slope2(_,T){var R=_._x1-_._x0;return R?(3*(_._y1-_._y0)/R-T)/2:T}function point(_,T,R){var P=_._x0,O=_._y0,I=_._x1,L=_._y1,U=(I-P)/3;_._context.bezierCurveTo(P+U,O+U*T,I-U,L-U*R,I,L)}function MonotoneX(_){this._context=_}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_,T){var R=NaN;if(_=+_,T=+T,!(_===this._x1&&T===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(_,T):this._context.moveTo(_,T);break;case 1:this._point=2;break;case 2:this._point=3,point(this,slope2(this,R=slope3(this,_,T)),R);break;default:point(this,this._t0,R=slope3(this,_,T));break}this._x0=this._x1,this._x1=_,this._y0=this._y1,this._y1=T,this._t0=R}}};function MonotoneY(_){this._context=new ReflectContext(_)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(_,T){MonotoneX.prototype.point.call(this,T,_)};function ReflectContext(_){this._context=_}ReflectContext.prototype={moveTo:function(_,T){this._context.moveTo(T,_)},closePath:function(){this._context.closePath()},lineTo:function(_,T){this._context.lineTo(T,_)},bezierCurveTo:function(_,T,R,P,O,I){this._context.bezierCurveTo(T,_,P,R,I,O)}};function monotoneX(_){return new MonotoneX(_)}function monotoneY(_){return new MonotoneY(_)}function Natural(_){this._context=_}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var _=this._x,T=this._y,R=_.length;if(R)if(this._line?this._context.lineTo(_[0],T[0]):this._context.moveTo(_[0],T[0]),R===2)this._context.lineTo(_[1],T[1]);else for(var P=controlPoints(_),O=controlPoints(T),I=0,L=1;L<R;++I,++L)this._context.bezierCurveTo(P[0][I],O[0][I],P[1][I],O[1][I],_[L],T[L]);(this._line||this._line!==0&&R===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(_,T){this._x.push(+_),this._y.push(+T)}};function controlPoints(_){var T,R=_.length-1,P,O=new Array(R),I=new Array(R),L=new Array(R);for(O[0]=0,I[0]=2,L[0]=_[0]+2*_[1],T=1;T<R-1;++T)O[T]=1,I[T]=4,L[T]=4*_[T]+2*_[T+1];for(O[R-1]=2,I[R-1]=7,L[R-1]=8*_[R-1]+_[R],T=1;T<R;++T)P=O[T]/I[T-1],I[T]-=P,L[T]-=P*L[T-1];for(O[R-1]=L[R-1]/I[R-1],T=R-2;T>=0;--T)O[T]=(L[T]-O[T+1])/I[T];for(I[R-1]=(_[R]+O[R-1])/2,T=0;T<R-1;++T)I[T]=2*_[T+1]-O[T+1];return[O,I]}function curveNatural(_){return new Natural(_)}function Step(_,T){this._context=_,this._t=T}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(_,T){switch(_=+_,T=+T,this._point){case 0:this._point=1,this._line?this._context.lineTo(_,T):this._context.moveTo(_,T);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,T),this._context.lineTo(_,T);else{var R=this._x*(1-this._t)+_*this._t;this._context.lineTo(R,this._y),this._context.lineTo(R,T)}break}}this._x=_,this._y=T}};function curveStep(_){return new Step(_,.5)}function stepBefore(_){return new Step(_,0)}function stepAfter(_){return new Step(_,1)}function Transform(_,T,R){this.k=_,this.x=T,this.y=R}Transform.prototype={constructor:Transform,scale:function(_){return _===1?this:new Transform(this.k*_,this.x,this.y)},translate:function(_,T){return _===0&T===0?this:new Transform(this.k,this.x+this.k*_,this.y+this.k*T)},apply:function(_){return[_[0]*this.k+this.x,_[1]*this.k+this.y]},applyX:function(_){return _*this.k+this.x},applyY:function(_){return _*this.k+this.y},invert:function(_){return[(_[0]-this.x)/this.k,(_[1]-this.y)/this.k]},invertX:function(_){return(_-this.x)/this.k},invertY:function(_){return(_-this.y)/this.k},rescaleX:function(_){return _.copy().domain(_.range().map(this.invertX,this).map(_.invert,_))},rescaleY:function(_){return _.copy().domain(_.range().map(this.invertY,this).map(_.invert,_))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Transform.prototype;function defined(_){return _!=null&&!Number.isNaN(_)}function ascendingDefined(_,T){return+defined(T)-+defined(_)||ascending$1(_,T)}function descendingDefined(_,T){return+defined(T)-+defined(_)||descending(_,T)}function nonempty(_){return _!=null&&`${_}`!=""}function finite(_){return isFinite(_)?_:NaN}function positive(_){return _>0&&isFinite(_)?_:NaN}function negative(_){return _<0&&isFinite(_)?_:NaN}function format(_,T){if(_ instanceof Date||(_=new Date(+_)),isNaN(_))return typeof T=="function"?T(_):T;const R=_.getUTCHours(),P=_.getUTCMinutes(),O=_.getUTCSeconds(),I=_.getUTCMilliseconds();return`${formatYear(_.getUTCFullYear())}-${pad(_.getUTCMonth()+1,2)}-${pad(_.getUTCDate(),2)}${R||P||O||I?`T${pad(R,2)}:${pad(P,2)}${O||I?`:${pad(O,2)}${I?`.${pad(I,3)}`:""}`:""}Z`:""}`}function formatYear(_){return _<0?`-${pad(-_,6)}`:_>9999?`+${pad(_,6)}`:pad(_,4)}function pad(_,T){return`${_}`.padStart(T,"0")}const re=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function parse$1(_,T){return re.test(_+="")?new Date(_):typeof T=="function"?T(_):T}function orderof(_){if(_==null)return;const T=_[0],R=_[_.length-1];return descending(T,R)}const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,tickIntervals=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",durationSecond],["5 seconds",5*durationSecond],["15 seconds",15*durationSecond],["30 seconds",30*durationSecond],["minute",durationMinute],["5 minutes",5*durationMinute],["15 minutes",15*durationMinute],["30 minutes",30*durationMinute],["hour",durationHour],["3 hours",3*durationHour],["6 hours",6*durationHour],["12 hours",12*durationHour],["day",durationDay],["2 days",2*durationDay],["week",durationWeek],["2 weeks",2*durationWeek],["month",durationMonth],["3 months",3*durationMonth],["6 months",6*durationMonth],["year",durationYear],["2 years",2*durationYear],["5 years",5*durationYear],["10 years",10*durationYear],["20 years",20*durationYear],["50 years",50*durationYear],["100 years",100*durationYear]],durations=new Map([["second",durationSecond],["minute",durationMinute],["hour",durationHour],["day",durationDay],["monday",durationWeek],["tuesday",durationWeek],["wednesday",durationWeek],["thursday",durationWeek],["friday",durationWeek],["saturday",durationWeek],["sunday",durationWeek],["week",durationWeek],["month",durationMonth],["year",durationYear]]),timeIntervals=new Map([["second",second$1],["minute",timeMinute],["hour",timeHour],["day",timeDay],["monday",timeMonday],["tuesday",timeTuesday],["wednesday",timeWednesday],["thursday",timeThursday],["friday",timeFriday],["saturday",timeSaturday],["sunday",timeSunday],["week",timeSunday],["month",timeMonth],["year",timeYear]]),utcIntervals=new Map([["second",second$1],["minute",utcMinute],["hour",utcHour],["day",unixDay],["monday",utcMonday],["tuesday",utcTuesday],["wednesday",utcWednesday],["thursday",utcThursday],["friday",utcFriday],["saturday",utcSaturday],["sunday",utcSunday],["week",utcSunday],["month",utcMonth],["year",utcYear]]),intervalDuration=Symbol("intervalDuration"),intervalType=Symbol("intervalType");for(const[_,T]of timeIntervals)T[intervalDuration]=durations.get(_),T[intervalType]="time";for(const[_,T]of utcIntervals)T[intervalDuration]=durations.get(_),T[intervalType]="utc";const utcFormatIntervals=[["year",utcYear,"utc"],["month",utcMonth,"utc"],["day",unixDay,"utc",6*durationMonth],["hour",utcHour,"utc",3*durationDay],["minute",utcMinute,"utc",6*durationHour],["second",second$1,"utc",30*durationMinute]],timeFormatIntervals=[["year",timeYear,"time"],["month",timeMonth,"time"],["day",timeDay,"time",6*durationMonth],["hour",timeHour,"time",3*durationDay],["minute",timeMinute,"time",6*durationHour],["second",second$1,"time",30*durationMinute]],formatIntervals=[utcFormatIntervals[0],timeFormatIntervals[0],utcFormatIntervals[1],timeFormatIntervals[1],utcFormatIntervals[2],timeFormatIntervals[2],...utcFormatIntervals.slice(3)];function parseTimeInterval(_){let T=`${_}`.toLowerCase();T.endsWith("s")&&(T=T.slice(0,-1));let R=1;const P=/^(?:(\d+)\s+)/.exec(T);switch(P&&(T=T.slice(P[0].length),R=+P[1]),T){case"quarter":T="month",R*=3;break;case"half":T="month",R*=6;break}let O=utcIntervals.get(T);if(!O)throw new Error(`unknown interval: ${_}`);if(R>1&&!O.every)throw new Error(`non-periodic interval: ${T}`);return[T,R]}function timeInterval(_){return asInterval(parseTimeInterval(_),"time")}function utcInterval(_){return asInterval(parseTimeInterval(_),"utc")}function asInterval([_,T],R){let P=(R==="time"?timeIntervals:utcIntervals).get(_);return T>1&&(P=P.every(T),P[intervalDuration]=durations.get(_)*T,P[intervalType]=R),P}function generalizeTimeInterval(_,T){if(!(T>1))return;const R=_[intervalDuration];if(!tickIntervals.some(([,O])=>O===R)||R%durationDay===0&&durationDay<R&&R<durationMonth)return;const[P]=tickIntervals[bisector(([,O])=>Math.log(O)).center(tickIntervals,Math.log(R*T))];return(_[intervalType]==="time"?timeInterval:utcInterval)(P)}function formatTimeInterval(_,T,R){const P=T==="time"?timeFormat:utcFormat;if(R==null)return P(_==="year"?"%Y":_==="month"?"%Y-%m":_==="day"?"%Y-%m-%d":_==="hour"||_==="minute"?"%Y-%m-%dT%H:%M":_==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const O=getTimeTemplate(R);switch(_){case"millisecond":return formatConditional(P(".%L"),P(":%M:%S"),O);case"second":return formatConditional(P(":%S"),P("%-I:%M"),O);case"minute":return formatConditional(P("%-I:%M"),P("%p"),O);case"hour":return formatConditional(P("%-I %p"),P("%b %-d"),O);case"day":return formatConditional(P("%-d"),P("%b"),O);case"month":return formatConditional(P("%b"),P("%Y"),O);case"year":return P("%Y")}throw new Error("unable to format time ticks")}function getTimeTemplate(_){return _==="left"||_==="right"?(T,R)=>`
${T}
${R}`:_==="top"?(T,R)=>`${R}
${T}`:(T,R)=>`${T}
${R}`}function getFormatIntervals(_){return _==="time"?timeFormatIntervals:_==="utc"?utcFormatIntervals:formatIntervals}function inferTimeFormat(_,T,R){const P=max(pairs(T,(O,I)=>Math.abs(I-O)));if(P<1e3)return formatTimeInterval("millisecond","utc",R);for(const[O,I,L,U]of getFormatIntervals(_)){if(P>U||O==="hour"&&!P)break;if(T.every(G=>I.floor(G)>=G))return formatTimeInterval(O,L,R)}}function formatConditional(_,T,R){return(P,O,I)=>{const L=_(P,O),U=T(P,O),G=O-orderof(I);return O!==G&&I[G]!==void 0&&U===T(I[G],G)?L:R(L,U)}}const TypedArray=Object.getPrototypeOf(Uint8Array),objectToString$1=Object.prototype.toString;function isArray$1(_){return _ instanceof Array||_ instanceof TypedArray}function isNumberArray(_){return _ instanceof TypedArray&&!isBigIntArray(_)}function isNumberType(_){return _?.prototype instanceof TypedArray&&!isBigIntType(_)}function isBigIntArray(_){return _ instanceof BigInt64Array||_ instanceof BigUint64Array}function isBigIntType(_){return _===BigInt64Array||_===BigUint64Array}const reindex=Symbol("reindex");function valueof(_,T,R){const P=typeof T;return P==="string"?isArrowTable(_)?maybeTypedArrowify(_.getChild(T),R):maybeTypedMap(_,field(T),R):P==="function"?maybeTypedMap(_,T,R):P==="number"||T instanceof Date||P==="boolean"?map(_,constant$1(T),R):typeof T?.transform=="function"?maybeTypedArrayify(T.transform(_),R):maybeTake(maybeTypedArrayify(T,R),_?.[reindex])}function maybeTake(_,T){return _!=null&&T?take(_,T):_}function maybeTypedMap(_,T,R){return map(_,isNumberType(R)?(P,O)=>coerceNumber(T(P,O)):T,R)}function maybeTypedArrayify(_,T){return T===void 0?arrayify(_):isArrowVector(_)?maybeTypedArrowify(_,T):_ instanceof T?_:T.from(_,isNumberType(T)&&!isNumberArray(_)?coerceNumber:void 0)}function maybeTypedArrowify(_,T){return _==null?_:(T===void 0||T===Array)&&isArrowDateType(_.type)?coerceDates(vectorToArray(_)):maybeTypedArrayify(vectorToArray(_),T)}function vectorToArray(_){return _.nullCount?_.toJSON():_.toArray()}const singleton=[null],field=_=>T=>{const R=T[_];return R===void 0&&T.type==="Feature"?T.properties?.[_]:R},indexOf={transform:range},identity$2={transform:_=>_},one=()=>1,yes=()=>!0,string=_=>_==null?_:`${_}`,number=_=>_==null?_:+_,first=_=>_?_[0]:void 0,second=_=>_?_[1]:void 0,constant$1=_=>()=>_;function percentile(_){const T=+`${_}`.slice(1)/100;return(R,P)=>quantile$1(R,T,P)}function coerceNumbers(_){return isNumberArray(_)?_:map(_,coerceNumber,Float64Array)}function coerceNumber(_){return _==null?NaN:Number(_)}function coerceDates(_){return map(_,coerceDate)}function coerceDate(_){return _ instanceof Date&&!isNaN(_)?_:typeof _=="string"?parse$1(_):_==null||isNaN(_=Number(_))?void 0:new Date(_)}function maybeColorChannel(_,T){return _===void 0&&(_=T),_===null?[void 0,"none"]:isColor(_)?[void 0,_]:[_,void 0]}function maybeNumberChannel(_,T){return _===void 0&&(_=T),_===null||typeof _=="number"?[void 0,_]:[_,void 0]}function maybeKeyword(_,T,R){if(_!=null)return keyword(_,T,R)}function keyword(_,T,R){const P=`${_}`.toLowerCase();if(!R.includes(P))throw new Error(`invalid ${T}: ${_}`);return P}function dataify(_){return isArrowTable(_)?_:arrayify(_)}function arrayify(_){if(_==null||isArray$1(_))return _;if(isArrowVector(_))return maybeTypedArrowify(_);if(isGeoJSON(_))switch(_.type){case"FeatureCollection":return _.features;case"GeometryCollection":return _.geometries;default:return[_]}return Array.from(_)}function isGeoJSON(_){switch(_?.type){case"FeatureCollection":case"GeometryCollection":case"Feature":case"LineString":case"MultiLineString":case"MultiPoint":case"MultiPolygon":case"Point":case"Polygon":case"Sphere":return!0;default:return!1}}function map(_,T,R=Array){return _==null?_:_ instanceof R?_.map(T):R.from(_,T)}function slice(_,T=Array){return _ instanceof T?_.slice():T.from(_)}function hasX({x:_,x1:T,x2:R}){return _!==void 0||T!==void 0||R!==void 0}function hasY({y:_,y1:T,y2:R}){return _!==void 0||T!==void 0||R!==void 0}function hasXY(_){return hasX(_)||hasY(_)||_.interval!==void 0}function isObject$1(_){return _?.toString===objectToString$1}function isScaleOptions(_){return isObject$1(_)&&(_.type!==void 0||_.domain!==void 0)}function isOptions(_){return isObject$1(_)&&typeof _.transform!="function"}function isDomainSort(_){return isOptions(_)&&_.value===void 0&&_.channel===void 0}function maybeZero(_,T,R,P=identity$2){return T===void 0&&R===void 0?(T=0,R=_===void 0?P:_):T===void 0?T=_===void 0?0:_:R===void 0&&(R=_===void 0?0:_),[T,R]}function maybeTuple(_,T){return _===void 0&&T===void 0?[first,second]:[_,T]}function maybeZ({z:_,fill:T,stroke:R}={}){return _===void 0&&([_]=maybeColorChannel(T)),_===void 0&&([_]=maybeColorChannel(R)),_}function lengthof(_){return isArray$1(_)?_.length:_?.numRows}function range(_){const T=lengthof(_),R=new Uint32Array(T);for(let P=0;P<T;++P)R[P]=P;return R}function take(_,T){return isArray$1(_)?map(T,R=>_[R],_.constructor):map(T,R=>_.at(R))}function subarray(_,T,R){return _.subarray?_.subarray(T,R):_.slice(T,R)}function keyof(_){return _!==null&&typeof _=="object"?_.valueOf():_}function maybeInput(_,T){if(T[_]!==void 0)return T[_];switch(_){case"x1":case"x2":_="x";break;case"y1":case"y2":_="y";break}return T[_]}function column(_){let T;return[{transform:()=>T,label:labelof(_)},R=>T=R]}function maybeColumn(_){return _==null?[_]:column(_)}function labelof(_,T){return typeof _=="string"?_:_&&_.label!==void 0?_.label:T}function mid(_,T){return{transform(R){const P=_.transform(R),O=T.transform(R);return isTemporal(P)||isTemporal(O)?map(P,(I,L)=>new Date((+P[L]+ +O[L])/2)):map(P,(I,L)=>(+P[L]+ +O[L])/2,Float64Array)},label:_.label}}function maybeApplyInterval(_,T){const R=maybeIntervalTransform(T?.interval,T?.type);return R?map(_,R):_}function maybeIntervalTransform(_,T){const R=maybeInterval(_,T);return R&&(P=>defined(P)?R.floor(P):P)}function maybeInterval(_,T){if(_!=null){if(typeof _=="number")return numberInterval(_);if(typeof _=="string")return(T==="time"?timeInterval:utcInterval)(_);if(typeof _.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof _.offset!="function")throw new Error("invalid interval; missing offset method");return _}}function numberInterval(_){_=+_,0<_&&_<1&&Number.isInteger(1/_)&&(_=-1/_);const T=Math.abs(_);return _<0?{floor:R=>Math.floor(R*T)/T,offset:(R,P=1)=>(R*T+Math.floor(P))/T,range:(R,P)=>range$1(Math.ceil(R*T),P*T).map(O=>O/T)}:{floor:R=>Math.floor(R/T)*T,offset:(R,P=1)=>R+T*Math.floor(P),range:(R,P)=>range$1(Math.ceil(R/T),P/T).map(O=>O*T)}}function maybeRangeInterval(_,T){if(_=maybeInterval(_,T),_&&typeof _.range!="function")throw new Error("invalid interval: missing range method");return _}function maybeNiceInterval(_,T){if(_=maybeRangeInterval(_,T),_&&typeof _.ceil!="function")throw new Error("invalid interval: missing ceil method");return _}function isTimeInterval(_){return isInterval(_)&&typeof _?.floor=="function"&&_.floor()instanceof Date}function isInterval(_){return typeof _?.range=="function"}function maybeValue(_){return _===void 0||isOptions(_)?_:{value:_}}function numberChannel(_){return _==null?null:{transform:T=>valueof(T,_,Float64Array),label:labelof(_)}}function isIterable(_){return _&&typeof _[Symbol.iterator]=="function"}function isTextual(_){for(const T of _)if(T!=null)return typeof T!="object"||T instanceof Date}function isOrdinal(_){for(const T of _){if(T==null)continue;const R=typeof T;return R==="string"||R==="boolean"}}function isTemporal(_){for(const T of _)if(T!=null)return T instanceof Date}function isTemporalString(_){for(const T of _)if(T!=null)return typeof T=="string"&&isNaN(T)&&parse$1(T)}function isNumericString(_){for(const T of _)if(T!=null){if(typeof T!="string")return!1;if(T.trim())return!isNaN(T)}}function isNumeric(_){for(const T of _)if(T!=null)return typeof T=="number"}function isEvery(_,T){let R;for(const P of _)if(P!=null){if(!T(P))return!1;R=!0}return R}const namedColors=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function isColor(_){return typeof _!="string"?!1:(_=_.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(_)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(_)||namedColors.has(_))}function isOpacity(_){return typeof _=="number"&&(0<=_&&_<=1||isNaN(_))}function isNoneish(_){return _==null||isNone(_)}function isNone(_){return/^\s*none\s*$/i.test(_)}function isRound(_){return/^\s*round\s*$/i.test(_)}function maybeAnchor$1(_,T){return maybeKeyword(_,T,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function maybeFrameAnchor(_="middle"){return maybeAnchor$1(_,"frameAnchor")}function inherit(_={},...T){let R=_;for(const P of T)for(const O in P)if(R[O]===void 0){const I=P[O];R===_?R={...R,[O]:I}:R[O]=I}return R}function named(_){console.warn("named iterables are deprecated; please use an object instead");const T=new Set;return Object.fromEntries(Array.from(_,R=>{const{name:P}=R;if(P==null)throw new Error("missing name");const O=`${P}`;if(O==="__proto__")throw new Error(`illegal name: ${O}`);if(T.has(O))throw new Error(`duplicate name: ${O}`);return T.add(O),[P,R]}))}function maybeNamed(_){return isIterable(_)?named(_):_}function maybeClip(_){return _===!0?_="frame":_===!1?_=null:!isGeoJSON(_)&&_!=null&&(_=keyword(_,"clip",["frame","sphere"]),_==="sphere"&&(_={type:"Sphere"})),_}function isArrowTable(_){return _&&typeof _.getChild=="function"&&typeof _.toArray=="function"&&_.schema&&Array.isArray(_.schema.fields)}function isArrowVector(_){return _&&typeof _.toArray=="function"&&_.type}function isArrowDateType(_){return _&&(_.typeId===8||_.typeId===10)&&_.unit===1}const position=Symbol("position"),color=Symbol("color"),radius=Symbol("radius"),length=Symbol("length"),opacity=Symbol("opacity"),symbol=Symbol("symbol"),projection=Symbol("projection"),registry=new Map([["x",position],["y",position],["fx",position],["fy",position],["r",radius],["color",color],["opacity",opacity],["symbol",symbol],["length",length],["projection",projection]]);function isPosition(_){return _===position||_===projection}function hasNumericRange(_){return _===position||_===radius||_===length||_===opacity}const sqrt3=Math.sqrt(3),sqrt4_3=2/sqrt3,symbolHexagon={draw(_,T){const R=Math.sqrt(T/Math.PI),P=R*sqrt4_3,O=P/2;_.moveTo(0,P),_.lineTo(R,O),_.lineTo(R,-O),_.lineTo(0,-P),_.lineTo(-R,-O),_.lineTo(-R,O),_.closePath()}},symbols=new Map([["asterisk",symbolAsterisk],["circle",symbolCircle],["cross",symbolCross],["diamond",symbolDiamond],["diamond2",symbolDiamond2],["hexagon",symbolHexagon],["plus",symbolPlus],["square",symbolSquare],["square2",symbolSquare2],["star",symbolStar],["times",symbolTimes],["triangle",symbolTriangle],["triangle2",symbolTriangle2],["wye",symbolWye]]);function isSymbolObject(_){return _&&typeof _.draw=="function"}function isSymbol(_){return isSymbolObject(_)?!0:typeof _!="string"?!1:symbols.has(_.toLowerCase())}function maybeSymbol(_){if(_==null||isSymbolObject(_))return _;const T=symbols.get(`${_}`.toLowerCase());if(T)return T;throw new Error(`invalid symbol: ${_}`)}function maybeSymbolChannel(_){if(_==null||isSymbolObject(_))return[void 0,_];if(typeof _=="string"){const T=symbols.get(`${_}`.toLowerCase());if(T)return[void 0,T]}return[_,void 0]}function basic({filter:_,sort:T,reverse:R,transform:P,initializer:O,...I}={},L){if(P===void 0&&(_!=null&&(P=filterTransform(_)),T!=null&&!isDomainSort(T)&&(P=composeTransform(P,sortTransform(T))),R&&(P=composeTransform(P,reverseTransform))),L!=null&&O!=null)throw new Error("transforms cannot be applied after initializers");return{...I,...(T===null||isDomainSort(T))&&{sort:T},transform:composeTransform(P,L)}}function initializer({filter:_,sort:T,reverse:R,initializer:P,...O}={},I){return P===void 0&&(_!=null&&(P=filterTransform(_)),T!=null&&!isDomainSort(T)&&(P=composeInitializer(P,sortTransform(T))),R&&(P=composeInitializer(P,reverseTransform))),{...O,...(T===null||isDomainSort(T))&&{sort:T},initializer:composeInitializer(P,I)}}function composeTransform(_,T){return _==null?T===null?void 0:T:T==null?_===null?void 0:_:function(R,P,O){return{data:R,facets:P}=_.call(this,R,P,O),T.call(this,dataify(R),P,O)}}function composeInitializer(_,T){return _==null?T===null?void 0:T:T==null?_===null?void 0:_:function(R,P,O,...I){let L,U,G,V,Z,Y;return{data:U=R,facets:G=P,channels:L}=_.call(this,R,P,O,...I),{data:Z=U,facets:Y=G,channels:V}=T.call(this,U,G,{...O,...L},...I),{data:Z,facets:Y,channels:{...L,...V}}}}function apply$1(_,T){return(_.initializer!=null?initializer:basic)(_,T)}function filterTransform(_){return(T,R)=>{const P=valueof(T,_);return{data:T,facets:R.map(O=>O.filter(I=>P[I]))}}}function reverseTransform(_,T){return{data:_,facets:T.map(R=>R.slice().reverse())}}function sort(_,{sort:T,...R}={}){return{...(isOptions(_)&&_.channel!==void 0?initializer:apply$1)(R,sortTransform(_)),sort:isDomainSort(T)?T:null}}function sortTransform(_){return(typeof _=="function"&&_.length!==1?sortData:sortValue)(_)}function sortData(_){return(T,R)=>{const P=isArray$1(T)?(O,I)=>_(T[O],T[I]):(O,I)=>_(T.get(O),T.get(I));return{data:T,facets:R.map(O=>O.slice().sort(P))}}}function sortValue(_){let T,R;({channel:T,value:_,order:R}={...maybeValue(_)});const P=T?.startsWith("-");if(P&&(T=T.slice(1)),R===void 0&&(R=P?descendingDefined:ascendingDefined),typeof R!="function")switch(`${R}`.toLowerCase()){case"ascending":R=ascendingDefined;break;case"descending":R=descendingDefined;break;default:throw new Error(`invalid order: ${R}`)}return(O,I,L)=>{let U;if(T===void 0)U=valueof(O,_);else{if(L===void 0)throw new Error("channel sort requires an initializer");if(U=L[T],!U)return{};U=U.value}const G=(V,Z)=>R(U[V],U[Z]);return{data:O,facets:I.map(V=>V.slice().sort(G))}}}function hasOutput(_,...T){for(const{name:R}of _)if(T.includes(R))return!0;return!1}function maybeOutputs(_,T,R=maybeOutput){const P=Object.entries(_);return T.title!=null&&_.title===void 0&&P.push(["title",reduceTitle]),T.href!=null&&_.href===void 0&&P.push(["href",reduceFirst]),P.filter(([,O])=>O!==void 0).map(([O,I])=>I===null?nullOutput(O):R(O,I,T))}function maybeOutput(_,T,R,P=maybeEvaluator){let O;isObject$1(T)&&"reduce"in T&&(O=T.scale,T=T.reduce);const I=P(_,T,R),[L,U]=column(I.label);let G;return{name:_,output:O===void 0?L:{value:L,scale:O},initialize(V){I.initialize(V),G=U([])},scope(V,Z){I.scope(V,Z)},reduce(V,Z){G.push(I.reduce(V,Z))}}}function nullOutput(_){return{name:_,initialize(){},scope(){},reduce(){}}}function maybeEvaluator(_,T,R,P=maybeReduce){const O=maybeInput(_,R),I=P(T,O);let L,U;return{label:labelof(I===reduceCount?null:O,I.label),initialize(G){L=O===void 0?G:valueof(G,O),I.scope==="data"&&(U=I.reduceIndex(range(G),L))},scope(G,V){I.scope===G&&(U=I.reduceIndex(V,L))},reduce(G,V){return I.scope==null?I.reduceIndex(G,L,V):I.reduceIndex(G,L,U,V)}}}function maybeGroup(_,T){return T?group(_,R=>T[R]):[[,_]]}function maybeReduce(_,T,R=invalidReduce){if(_==null)return R(_);if(typeof _.reduceIndex=="function")return _;if(typeof _.reduce=="function"&&isObject$1(_))return reduceReduce(_);if(typeof _=="function")return reduceFunction(_);if(/^p\d{2}$/i.test(_))return reduceAccessor(percentile(_));switch(`${_}`.toLowerCase()){case"first":return reduceFirst;case"last":return reduceLast;case"identity":return reduceIdentity;case"count":return reduceCount;case"distinct":return reduceDistinct;case"sum":return T==null?reduceCount:reduceSum;case"proportion":return reduceProportion(T,"data");case"proportion-facet":return reduceProportion(T,"facet");case"deviation":return reduceAccessor(deviation);case"min":return reduceAccessor(min$1);case"min-index":return reduceAccessor(minIndex);case"max":return reduceAccessor(max);case"max-index":return reduceAccessor(maxIndex);case"mean":return reduceMaybeTemporalAccessor(mean);case"median":return reduceMaybeTemporalAccessor(median);case"variance":return reduceAccessor(variance);case"mode":return reduceAccessor(mode)}return R(_)}function invalidReduce(_){throw new Error(`invalid reduce: ${_}`)}function maybeSubgroup(_,T){for(const R in T){const P=T[R];if(P!==void 0&&!_.some(O=>O.name===R))return P}}function maybeSort(_,T,R){if(T){const P=T.output.transform(),O=(I,L)=>ascendingDefined(P[I],P[L]);_.forEach(I=>I.sort(O))}R&&_.forEach(P=>P.reverse())}function reduceReduce(_){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{..._,reduceIndex:_.reduce.bind(_)}}function reduceFunction(_){return{reduceIndex(T,R,P){return _(take(R,T),P)}}}function reduceAccessor(_){return{reduceIndex(T,R){return _(T,P=>R[P])}}}function reduceMaybeTemporalAccessor(_){return{reduceIndex(T,R){const P=_(T,O=>R[O]);return isTemporal(R)?new Date(P):P}}}const reduceIdentity={reduceIndex(_,T){return take(T,_)}},reduceFirst={reduceIndex(_,T){return T[_[0]]}},reduceTitle={reduceIndex(_,T){const P=sort$1(rollup(_,I=>I.length,I=>T[I]),second),O=P.slice(-5).reverse();if(O.length<P.length){const I=P.slice(0,-4);O[4]=[` ${I.length.toLocaleString("en-US")} more`,sum(I,second)]}return O.map(([I,L])=>`${I} (${L.toLocaleString("en-US")})`).join(`
`)}},reduceLast={reduceIndex(_,T){return T[_[_.length-1]]}},reduceCount={label:"Frequency",reduceIndex(_){return _.length}},reduceDistinct={label:"Distinct",reduceIndex(_,T){const R=new InternSet;for(const P of _)R.add(T[P]);return R.size}},reduceSum=reduceAccessor(sum);function reduceProportion(_,T){return _==null?{scope:T,label:"Frequency",reduceIndex:(R,P,O=1)=>R.length/O}:{scope:T,reduceIndex:(R,P,O=1)=>sum(R,I=>P[I])/O}}const reduceZ={reduceIndex(_,T,{z:R}){return R}};function createChannel(_,{scale:T,type:R,value:P,filter:O,hint:I,label:L=labelof(P)},U){return I===void 0&&typeof P?.transform=="function"&&(I=P.hint),inferChannelScale(U,{scale:T,type:R,value:valueof(_,P),label:L,filter:O,hint:I})}function createChannels(_,T){return Object.fromEntries(Object.entries(_).map(([R,P])=>[R,createChannel(T,P,R)]))}function valueObject(_,T){const R=Object.fromEntries(Object.entries(_).map(([P,{scale:O,value:I}])=>{const L=O==null?null:T[O];return[P,L==null?I:map(I,L)]}));return R.channels=_,R}function inferChannelScale(_,T){const{scale:R,value:P}=T;if(R===!0||R==="auto")switch(_){case"fill":case"stroke":case"color":T.scale=R!==!0&&isEvery(P,isColor)?null:"color",T.defaultScale="color";break;case"fillOpacity":case"strokeOpacity":case"opacity":T.scale=R!==!0&&isEvery(P,isOpacity)?null:"opacity",T.defaultScale="opacity";break;case"symbol":R!==!0&&isEvery(P,isSymbol)?(T.scale=null,T.value=map(P,maybeSymbol)):T.scale="symbol",T.defaultScale="symbol";break;default:T.scale=registry.has(_)?_:null;break}else if(R===!1)T.scale=null;else if(R!=null&&!registry.has(R))throw new Error(`unknown scale: ${R}`);return T}function channelDomain(_,T,R,P,O){const{order:I,reverse:L,reduce:U=!0,limit:G}=O;for(const V in O){if(!registry.has(V))continue;let{value:Z,order:Y=I,reverse:W=L,reduce:J=U,limit:ee=G}=maybeValue(O[V]);const te=Z?.startsWith("-");if(te&&(Z=Z.slice(1)),Y=Y===void 0?te!==(Z==="width"||Z==="height")?descendingGroup:ascendingGroup:maybeOrder$1(Y),J==null||J===!1)continue;const ie=V==="fx"||V==="fy"?reindexFacetChannel(T,P[V]):findScaleChannel(R,V);if(!ie)throw new Error(`missing channel for scale: ${V}`);const oe=ie.value,[ae=0,ce=1/0]=isIterable(ee)?ee:ee<0?[ee]:[0,ee];if(Z==null)ie.domain=()=>{let le=Array.from(new InternSet(oe));return W&&(le=le.reverse()),(ae!==0||ce!==1/0)&&(le=le.slice(ae,ce)),le};else{const le=Z==="data"?_:Z==="height"?difference(R,"y1","y2"):Z==="width"?difference(R,"x1","x2"):values(R,Z,Z==="y"?"y2":Z==="x"?"x2":void 0),he=maybeReduce(J===!0?"max":J,le);ie.domain=()=>{let me=rollups(range(oe),fe=>he.reduceIndex(fe,le),fe=>oe[fe]);return Y&&me.sort(Y),W&&me.reverse(),(ae!==0||ce!==1/0)&&(me=me.slice(ae,ce)),me.map(first)}}}}function findScaleChannel(_,T){for(const R in _){const P=_[R];if(P.scale===T)return P}}function reindexFacetChannel(_,T){const R=_.original;if(R===_)return T;const P=T.value,O=T.value=[];for(let I=0;I<R.length;++I){const L=P[R[I][0]];for(const U of _[I])O[U]=L}return T}function difference(_,T,R){const P=values(_,T),O=values(_,R);return map(O,(I,L)=>Math.abs(I-P[L]),Float64Array)}function values(_,T,R){let P=_[T];if(!P&&R!==void 0&&(P=_[R]),P)return P.value;throw new Error(`missing channel: ${T}`)}function maybeOrder$1(_){if(_==null||typeof _=="function")return _;switch(`${_}`.toLowerCase()){case"ascending":return ascendingGroup;case"descending":return descendingGroup}throw new Error(`invalid order: ${_}`)}function ascendingGroup([_,T],[R,P]){return ascendingDefined(T,P)||ascendingDefined(_,R)}function descendingGroup([_,T],[R,P]){return descendingDefined(T,P)||ascendingDefined(_,R)}function getSource(_,T){let R=_[T];if(R){for(;R.source;)R=R.source;return R.source===null?null:R}}const categoricalSchemes=new Map([["accent",schemeAccent],["category10",schemeCategory10],["dark2",schemeDark2],["observable10",schemeObservable10],["paired",schemePaired],["pastel1",schemePastel1],["pastel2",schemePastel2],["set1",schemeSet1],["set2",schemeSet2],["set3",schemeSet3],["tableau10",schemeTableau10]]);function isCategoricalScheme(_){return _!=null&&categoricalSchemes.has(`${_}`.toLowerCase())}const ordinalSchemes=new Map([...categoricalSchemes,["brbg",scheme11(scheme$q,interpolateBrBG)],["prgn",scheme11(scheme$p,interpolatePRGn)],["piyg",scheme11(scheme$o,interpolatePiYG)],["puor",scheme11(scheme$n,interpolatePuOr)],["rdbu",scheme11(scheme$m,interpolateRdBu)],["rdgy",scheme11(scheme$l,interpolateRdGy)],["rdylbu",scheme11(scheme$k,interpolateRdYlBu)],["rdylgn",scheme11(scheme$j,interpolateRdYlGn)],["spectral",scheme11(scheme$i,interpolateSpectral)],["burd",scheme11r(scheme$m,interpolateRdBu)],["buylrd",scheme11r(scheme$k,interpolateRdYlBu)],["blues",scheme9(scheme$5,interpolateBlues)],["greens",scheme9(scheme$4,interpolateGreens)],["greys",scheme9(scheme$3,interpolateGreys)],["oranges",scheme9(scheme,interpolateOranges)],["purples",scheme9(scheme$2,interpolatePurples)],["reds",scheme9(scheme$1,interpolateReds)],["turbo",schemei(interpolateTurbo)],["viridis",schemei(interpolateViridis)],["magma",schemei(magma)],["inferno",schemei(inferno)],["plasma",schemei(plasma)],["cividis",schemei(interpolateCividis)],["cubehelix",schemei(interpolateCubehelixDefault)],["warm",schemei(warm)],["cool",schemei(cool)],["bugn",scheme9(scheme$h,interpolateBuGn)],["bupu",scheme9(scheme$g,interpolateBuPu)],["gnbu",scheme9(scheme$f,interpolateGnBu)],["orrd",scheme9(scheme$e,interpolateOrRd)],["pubu",scheme9(scheme$c,interpolatePuBu)],["pubugn",scheme9(scheme$d,interpolatePuBuGn)],["purd",scheme9(scheme$b,interpolatePuRd)],["rdpu",scheme9(scheme$a,interpolateRdPu)],["ylgn",scheme9(scheme$8,interpolateYlGn)],["ylgnbu",scheme9(scheme$9,interpolateYlGnBu)],["ylorbr",scheme9(scheme$7,interpolateYlOrBr)],["ylorrd",scheme9(scheme$6,interpolateYlOrRd)],["rainbow",schemeicyclical(interpolateRainbow)],["sinebow",schemeicyclical(interpolateSinebow)]]);function scheme9(_,T){return({length:R})=>R===1?[_[3][1]]:R===2?[_[3][1],_[3][2]]:(R=Math.max(3,Math.floor(R)),R>9?quantize(T,R):_[R])}function scheme11(_,T){return({length:R})=>R===2?[_[3][0],_[3][2]]:(R=Math.max(3,Math.floor(R)),R>11?quantize(T,R):_[R])}function scheme11r(_,T){return({length:R})=>R===2?[_[3][2],_[3][0]]:(R=Math.max(3,Math.floor(R)),R>11?quantize(P=>T(1-P),R):_[R].slice().reverse())}function schemei(_){return({length:T})=>quantize(_,Math.max(2,Math.floor(T)))}function schemeicyclical(_){return({length:T})=>quantize(_,Math.floor(T)+1).slice(0,-1)}function ordinalScheme(_){const T=`${_}`.toLowerCase();if(!ordinalSchemes.has(T))throw new Error(`unknown ordinal scheme: ${T}`);return ordinalSchemes.get(T)}function ordinalRange(_,T){const R=ordinalScheme(_),P=typeof R=="function"?R({length:T}):R;return P.length!==T?P.slice(0,T):P}function maybeBooleanRange(_,T="greys"){const R=new Set,[P,O]=ordinalRange(T,2);for(const I of _)if(I!=null)if(I===!0)R.add(O);else if(I===!1)R.add(P);else return;return[...R]}const quantitativeSchemes=new Map([["brbg",interpolateBrBG],["prgn",interpolatePRGn],["piyg",interpolatePiYG],["puor",interpolatePuOr],["rdbu",interpolateRdBu],["rdgy",interpolateRdGy],["rdylbu",interpolateRdYlBu],["rdylgn",interpolateRdYlGn],["spectral",interpolateSpectral],["burd",_=>interpolateRdBu(1-_)],["buylrd",_=>interpolateRdYlBu(1-_)],["blues",interpolateBlues],["greens",interpolateGreens],["greys",interpolateGreys],["purples",interpolatePurples],["reds",interpolateReds],["oranges",interpolateOranges],["turbo",interpolateTurbo],["viridis",interpolateViridis],["magma",magma],["inferno",inferno],["plasma",plasma],["cividis",interpolateCividis],["cubehelix",interpolateCubehelixDefault],["warm",warm],["cool",cool],["bugn",interpolateBuGn],["bupu",interpolateBuPu],["gnbu",interpolateGnBu],["orrd",interpolateOrRd],["pubugn",interpolatePuBuGn],["pubu",interpolatePuBu],["purd",interpolatePuRd],["rdpu",interpolateRdPu],["ylgnbu",interpolateYlGnBu],["ylgn",interpolateYlGn],["ylorbr",interpolateYlOrBr],["ylorrd",interpolateYlOrRd],["rainbow",interpolateRainbow],["sinebow",interpolateSinebow]]);function quantitativeScheme(_){const T=`${_}`.toLowerCase();if(!quantitativeSchemes.has(T))throw new Error(`unknown quantitative scheme: ${T}`);return quantitativeSchemes.get(T)}const divergingSchemes=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function isDivergingScheme(_){return _!=null&&divergingSchemes.has(`${_}`.toLowerCase())}const flip=_=>T=>_(1-T),unit=[0,1],interpolators=new Map([["number",interpolateNumber],["rgb",interpolateRgb],["hsl",interpolateHsl],["hcl",interpolateHcl],["lab",lab]]);function maybeInterpolator(_){const T=`${_}`.toLowerCase();if(!interpolators.has(T))throw new Error(`unknown interpolator: ${T}`);return interpolators.get(T)}function createScaleQ(_,T,R,{type:P,nice:O,clamp:I,zero:L,domain:U=inferAutoDomain(_,R),unknown:G,round:V,scheme:Z,interval:Y,range:W=registry.get(_)===radius?inferRadialRange(R,U):registry.get(_)===length?inferLengthRange(R,U):registry.get(_)===opacity?unit:void 0,interpolate:J=registry.get(_)===color?Z==null&&W!==void 0?interpolateRgb:quantitativeScheme(Z!==void 0?Z:P==="cyclical"?"rainbow":"turbo"):V?interpolateRound:interpolateNumber,reverse:ee}){if(U=maybeRepeat(U),Y=maybeRangeInterval(Y,P),(P==="cyclical"||P==="sequential")&&(P="linear"),typeof J!="function"&&(J=maybeInterpolator(J)),ee=!!ee,W!==void 0){const te=U.length,ie=(W=maybeRepeat(W)).length;if(te!==ie){if(J.length===1)throw new Error("invalid piecewise interpolator");J=piecewise(J,W),W=void 0}}if(J.length===1?(ee&&(J=flip(J),ee=!1),W===void 0&&(W=Float64Array.from(U,(te,ie)=>ie/(U.length-1)),W.length===2&&(W=unit)),T.interpolate((W===unit?constant$1:interpolatePiecewise)(J))):T.interpolate(J),L){const[te,ie]=extent$1(U);(te>0||ie<0)&&(U=slice(U),(orderof(U)||1)===Math.sign(te)?U[0]=0:U[U.length-1]=0)}return ee&&(U=reverse(U)),T.domain(U).unknown(G),O&&(T.nice(maybeNice(O,P)),U=T.domain()),W!==void 0&&T.range(W),I&&T.clamp(I),{type:P,domain:U,range:W,scale:T,interpolate:J,interval:Y}}function maybeRepeat(_){return _=arrayify(_),_.length>=2?_:[_[0],_[0]]}function maybeNice(_,T){return _===!0?void 0:typeof _=="number"?_:maybeNiceInterval(_,T)}function createScaleLinear(_,T,R){return createScaleQ(_,linear(),T,R)}function createScaleSqrt(_,T,R){return createScalePow(_,T,{...R,exponent:.5})}function createScalePow(_,T,{exponent:R=1,...P}){return createScaleQ(_,pow().exponent(R),T,{...P,type:"pow"})}function createScaleLog(_,T,{base:R=10,domain:P=inferLogDomain(T),...O}){return createScaleQ(_,log().base(R),T,{...O,domain:P})}function createScaleSymlog(_,T,{constant:R=1,...P}){return createScaleQ(_,symlog().constant(R),T,P)}function createScaleQuantile(_,T,{range:R,quantiles:P=R===void 0?5:(R=[...R]).length,n:O=P,scheme:I="rdylbu",domain:L=inferQuantileDomain(T),unknown:U,interpolate:G,reverse:V}){return R===void 0&&(R=G!==void 0?quantize(G,O):registry.get(_)===color?ordinalRange(I,O):void 0),L.length>0&&(L=quantile(L,R===void 0?{length:O}:R).quantiles()),createScaleThreshold(_,T,{domain:L,range:R,reverse:V,unknown:U})}function createScaleQuantize(_,T,{range:R,n:P=R===void 0?5:(R=[...R]).length,scheme:O="rdylbu",domain:I=inferAutoDomain(_,T),unknown:L,interpolate:U,reverse:G}){const[V,Z]=extent$1(I);let Y;return R===void 0?(Y=ticks(V,Z,P),Y[0]<=V&&Y.splice(0,1),Y[Y.length-1]>=Z&&Y.pop(),P=Y.length+1,R=U!==void 0?quantize(U,P):registry.get(_)===color?ordinalRange(O,P):void 0):(Y=quantize(interpolateNumber(V,Z),P+1).slice(1,-1),V instanceof Date&&(Y=Y.map(W=>new Date(W)))),orderof(arrayify(I))<0&&Y.reverse(),createScaleThreshold(_,T,{domain:Y,range:R,reverse:G,unknown:L})}function createScaleThreshold(_,T,{domain:R=[0],unknown:P,scheme:O="rdylbu",interpolate:I,range:L=I!==void 0?quantize(I,R.length+1):registry.get(_)===color?ordinalRange(O,R.length+1):void 0,reverse:U}){R=arrayify(R);const G=orderof(R);if(!isNaN(G)&&!isOrdered(R,G))throw new Error(`the ${_} scale has a non-monotonic domain`);return U&&(L=reverse(L)),{type:"threshold",scale:threshold(G<0?reverse(R):R,L===void 0?[]:L).unknown(P),domain:R,range:L}}function isOrdered(_,T){for(let R=1,P=_.length,O=_[0];R<P;++R){const I=descending(O,O=_[R]);if(I!==0&&I!==T)return!1}return!0}function createScaleIdentity(_){return{type:"identity",scale:hasNumericRange(registry.get(_))?identity$3():T=>T}}function inferDomain$1(_,T=finite){return _.length?[min$1(_,({value:R})=>R===void 0?R:min$1(R,T)),max(_,({value:R})=>R===void 0?R:max(R,T))]:[0,1]}function inferAutoDomain(_,T){const R=registry.get(_);return(R===radius||R===opacity||R===length?inferZeroDomain:inferDomain$1)(T)}function inferZeroDomain(_){return[0,_.length?max(_,({value:T})=>T===void 0?T:max(T,finite)):1]}function inferRadialRange(_,T){const R=_.find(({radius:L})=>L!==void 0);if(R!==void 0)return[0,R.radius];const P=quantile$1(_,.5,({value:L})=>L===void 0?NaN:quantile$1(L,.25,positive)),O=T.map(L=>3*Math.sqrt(L/P)),I=30/max(O);return I<1?O.map(L=>L*I):O}function inferLengthRange(_,T){const R=median(_,({value:I})=>I===void 0?NaN:median(I,Math.abs)),P=T.map(I=>12*I/R),O=60/max(P);return O<1?P.map(I=>I*O):P}function inferLogDomain(_){for(const{value:T}of _)if(T!==void 0)for(let R of T){if(R>0)return inferDomain$1(_,positive);if(R<0)return inferDomain$1(_,negative)}return[1,10]}function inferQuantileDomain(_){const T=[];for(const{value:R}of _)if(R!==void 0)for(const P of R)T.push(P);return T}function interpolatePiecewise(_){return(T,R)=>P=>_(T+P*(R-T))}let warnings=0,lastMessage;function consumeWarnings(){const _=warnings;return warnings=0,lastMessage=void 0,_}function warn(_){_!==lastMessage&&(lastMessage=_,console.warn(_),++warnings)}function createScaleD(_,T,R,P,{type:O,nice:I,clamp:L,domain:U=inferDomain$1(P),unknown:G,pivot:V=0,scheme:Z,range:Y,symmetric:W=!0,interpolate:J=registry.get(_)===color?Z==null&&Y!==void 0?interpolateRgb:quantitativeScheme(Z!==void 0?Z:"rdbu"):interpolateNumber,reverse:ee}){V=+V,U=arrayify(U);let[te,ie]=U;if(U.length>2&&warn(`Warning: the diverging ${_} scale domain contains extra elements.`),descending(te,ie)<0&&([te,ie]=[ie,te],ee=!ee),te=Math.min(te,V),ie=Math.max(ie,V),typeof J!="function"&&(J=maybeInterpolator(J)),Y!==void 0&&(J=J.length===1?interpolatePiecewise(J)(...Y):piecewise(J,Y)),ee&&(J=flip(J)),W){const oe=R.apply(V),ae=oe-R.apply(te),ce=R.apply(ie)-oe;ae<ce?te=R.invert(oe-ce):ae>ce&&(ie=R.invert(oe+ae))}return T.domain([te,V,ie]).unknown(G).interpolator(J),L&&T.clamp(L),I&&T.nice(I),{type:O,domain:[te,ie],pivot:V,interpolate:J,scale:T}}function createScaleDiverging(_,T,R){return createScaleD(_,diverging(),transformIdentity,T,R)}function createScaleDivergingSqrt(_,T,R){return createScaleDivergingPow(_,T,{...R,exponent:.5})}function createScaleDivergingPow(_,T,{exponent:R=1,...P}){return createScaleD(_,divergingPow().exponent(R=+R),transformPow(R),T,{...P,type:"diverging-pow"})}function createScaleDivergingLog(_,T,{base:R=10,pivot:P=1,domain:O=inferDomain$1(T,P<0?negative:positive),...I}){return createScaleD(_,divergingLog().base(R=+R),transformLog,T,{domain:O,pivot:P,...I})}function createScaleDivergingSymlog(_,T,{constant:R=1,...P}){return createScaleD(_,divergingSymlog().constant(R=+R),transformSymlog(R),T,P)}const transformIdentity={apply(_){return _},invert(_){return _}},transformLog={apply:Math.log,invert:Math.exp},transformSqrt={apply(_){return Math.sign(_)*Math.sqrt(Math.abs(_))},invert(_){return Math.sign(_)*(_*_)}};function transformPow(_){return _===.5?transformSqrt:{apply(T){return Math.sign(T)*Math.pow(Math.abs(T),_)},invert(T){return Math.sign(T)*Math.pow(Math.abs(T),1/_)}}}function transformSymlog(_){return{apply(T){return Math.sign(T)*Math.log1p(Math.abs(T/_))},invert(T){return Math.sign(T)*Math.expm1(Math.abs(T))*_}}}function createScaleT(_,T,R,P){return createScaleQ(_,T,R,P)}function createScaleTime(_,T,R){return createScaleT(_,time(),T,R)}function createScaleUtc(_,T,R){return createScaleT(_,utcTime(),T,R)}const ordinalImplicit=Symbol("ordinal");function createScaleO(_,T,R,{type:P,interval:O,domain:I,range:L,reverse:U,hint:G}){return O=maybeRangeInterval(O,P),I===void 0&&(I=inferDomain(R,O,_)),(P==="categorical"||P===ordinalImplicit)&&(P="ordinal"),U&&(I=reverse(I)),I=T.domain(I).domain(),L!==void 0&&(typeof L=="function"&&(L=L(I)),T.range(L)),{type:P,domain:I,range:L,scale:T,hint:G,interval:O}}function createScaleOrdinal(_,T,{type:R,interval:P,domain:O,range:I,scheme:L,unknown:U,...G}){P=maybeRangeInterval(P,R),O===void 0&&(O=inferDomain(T,P,_));let V;if(registry.get(_)===symbol)V=inferSymbolHint(T),I=I===void 0?inferSymbolRange(V):map(I,maybeSymbol);else if(registry.get(_)===color&&(I===void 0&&(R==="ordinal"||R===ordinalImplicit)&&(I=maybeBooleanRange(O,L),I!==void 0&&(L=void 0)),L===void 0&&I===void 0&&(L=R==="ordinal"?"turbo":"observable10"),L!==void 0))if(I!==void 0){const Z=quantitativeScheme(L),Y=I[0],W=I[1]-I[0];I=({length:J})=>quantize(ee=>Z(Y+W*ee),J)}else I=ordinalScheme(L);if(U===implicit)throw new Error(`implicit unknown on ${_} scale is not supported`);return createScaleO(_,ordinal().unknown(U),T,{...G,type:R,domain:O,range:I,hint:V})}function createScalePoint(_,T,{align:R=.5,padding:P=.5,...O}){return maybeRound(point$4().align(R).padding(P),T,O,_)}function createScaleBand(_,T,{align:R=.5,padding:P=.1,paddingInner:O=P,paddingOuter:I=_==="fx"||_==="fy"?0:P,...L}){return maybeRound(band().align(R).paddingInner(O).paddingOuter(I),T,L,_)}function maybeRound(_,T,R,P){let{round:O}=R;return O!==void 0&&_.round(O=!!O),_=createScaleO(P,_,T,R),_.round=O,_}function inferDomain(_,T,R){const P=new InternSet;for(const{value:O,domain:I}of _){if(I!==void 0)return I();if(O!==void 0)for(const L of O)P.add(L)}if(T!==void 0){const[O,I]=extent$1(P).map(T.floor,T);return T.range(O,T.offset(I))}if(P.size>1e4&&registry.get(R)===position)throw new Error(`implicit ordinal domain of ${R} scale has more than 10,000 values`);return sort$1(P,ascendingDefined)}function inferHint(_,T){let R;for(const{hint:P}of _){const O=P?.[T];if(O!==void 0){if(R===void 0)R=O;else if(R!==O)return}}return R}function inferSymbolHint(_){return{fill:inferHint(_,"fill"),stroke:inferHint(_,"stroke")}}function inferSymbolRange(_){return isNoneish(_.fill)?symbolsStroke:symbolsFill}function createScales(_,{label:T,inset:R=0,insetTop:P=R,insetRight:O=R,insetBottom:I=R,insetLeft:L=R,round:U,nice:G,clamp:V,zero:Z,align:Y,padding:W,projection:J,facet:{label:ee=T}={},...te}={}){const ie={};for(const[oe,ae]of _){const ce=te[oe],le=createScale(oe,ae,{round:registry.get(oe)===position?U:void 0,nice:G,clamp:V,zero:Z,align:Y,padding:W,projection:J,...ce});if(le){let{label:he=oe==="fx"||oe==="fy"?ee:T,percent:me,transform:fe,inset:ue,insetTop:pe=ue!==void 0?ue:oe==="y"?P:0,insetRight:ge=ue!==void 0?ue:oe==="x"?O:0,insetBottom:_e=ue!==void 0?ue:oe==="y"?I:0,insetLeft:we=ue!==void 0?ue:oe==="x"?L:0}=ce||{};if(fe==null)fe=void 0;else if(typeof fe!="function")throw new Error("invalid scale transform; not a function");le.percent=!!me,le.label=he===void 0?inferScaleLabel(ae,le):he,le.transform=fe,oe==="x"||oe==="fx"?(le.insetLeft=+we,le.insetRight=+ge):(oe==="y"||oe==="fy")&&(le.insetTop=+pe,le.insetBottom=+_e),ie[oe]=le}}return ie}function createScaleFunctions(_){const T={},R={scales:T};for(const[P,O]of Object.entries(_)){const{scale:I,type:L,interval:U,label:G}=O;T[P]=exposeScale(O),R[P]=I,I.type=L,U!=null&&(I.interval=U),G!=null&&(I.label=G)}return R}function autoScaleRange(_,T){const{x:R,y:P,fx:O,fy:I}=_,L=O||I?outerDimensions(T):T;O&&autoScaleRangeX(O,L),I&&autoScaleRangeY(I,L);const U=O||I?innerDimensions(_,T):T;R&&autoScaleRangeX(R,U),P&&autoScaleRangeY(P,U)}function inferScaleLabel(_=[],T){let R;for(const{label:P}of _)if(P!==void 0){if(R===void 0)R=P;else if(R!==P)return}if(R!==void 0)return!isOrdinalScale(T)&&T.percent&&(R=`${R} (%)`),{inferred:!0,toString:()=>R}}function inferScaleOrder(_){return Math.sign(orderof(_.domain()))*Math.sign(orderof(_.range()))}function outerDimensions(_){const{marginTop:T,marginRight:R,marginBottom:P,marginLeft:O,width:I,height:L,facet:{marginTop:U,marginRight:G,marginBottom:V,marginLeft:Z}}=_;return{marginTop:Math.max(T,U),marginRight:Math.max(R,G),marginBottom:Math.max(P,V),marginLeft:Math.max(O,Z),width:I,height:L}}function innerDimensions({fx:_,fy:T},R){const{marginTop:P,marginRight:O,marginBottom:I,marginLeft:L,width:U,height:G}=outerDimensions(R);return{marginTop:P,marginRight:O,marginBottom:I,marginLeft:L,width:_?_.scale.bandwidth()+L+O:U,height:T?T.scale.bandwidth()+P+I:G,facet:{width:U,height:G}}}function autoScaleRangeX(_,T){if(_.range===void 0){const{insetLeft:R,insetRight:P}=_,{width:O,marginLeft:I=0,marginRight:L=0}=T,U=I+R,G=O-L-P;_.range=[U,Math.max(U,G)],isOrdinalScale(_)||(_.range=piecewiseRange(_)),_.scale.range(_.range)}autoScaleRound(_)}function autoScaleRangeY(_,T){if(_.range===void 0){const{insetTop:R,insetBottom:P}=_,{height:O,marginTop:I=0,marginBottom:L=0}=T,U=I+R,G=O-L-P;_.range=[Math.max(U,G),U],isOrdinalScale(_)?_.range.reverse():_.range=piecewiseRange(_),_.scale.range(_.range)}autoScaleRound(_)}function autoScaleRound(_){_.round===void 0&&isBandScale(_)&&roundError(_)<=30&&_.scale.round(!0)}function roundError({scale:_}){const T=_.domain().length,[R,P]=_.range(),O=_.paddingInner?_.paddingInner():1,I=_.paddingOuter?_.paddingOuter():_.padding(),L=T-O,U=Math.abs(P-R)/Math.max(1,L+I*2);return(U-Math.floor(U))*L}function piecewiseRange(_){const T=_.scale.domain().length+isThresholdScale(_);if(!(T>2))return _.range;const[R,P]=_.range;return Array.from({length:T},(O,I)=>R+I/(T-1)*(P-R))}function createScale(_,T=[],R={}){const P=inferScaleType(_,T,R);if(R.type===void 0&&R.domain===void 0&&R.range===void 0&&R.interval==null&&_!=="fx"&&_!=="fy"&&isOrdinalScale({type:P})){const O=T.map(({value:I})=>I).filter(I=>I!==void 0);O.some(isTemporal)?warn(`Warning: some data associated with the ${_} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${formatScaleType(P)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${_} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${_} scale to "${formatScaleType(P)}".`):O.some(isTemporalString)?warn(`Warning: some data associated with the ${_} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${formatScaleType(P)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${_} scale to "${formatScaleType(P)}".`):O.some(isNumericString)&&warn(`Warning: some data associated with the ${_} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${formatScaleType(P)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${_} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${_} scale to "${formatScaleType(P)}".`)}switch(R.type=P,P){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":R=coerceType(T,R,coerceNumbers);break;case"identity":switch(registry.get(_)){case position:R=coerceType(T,R,coerceNumbers);break;case symbol:R=coerceType(T,R,coerceSymbols);break}break;case"utc":case"time":R=coerceType(T,R,coerceDates);break}switch(P){case"diverging":return createScaleDiverging(_,T,R);case"diverging-sqrt":return createScaleDivergingSqrt(_,T,R);case"diverging-pow":return createScaleDivergingPow(_,T,R);case"diverging-log":return createScaleDivergingLog(_,T,R);case"diverging-symlog":return createScaleDivergingSymlog(_,T,R);case"categorical":case"ordinal":case ordinalImplicit:return createScaleOrdinal(_,T,R);case"cyclical":case"sequential":case"linear":return createScaleLinear(_,T,R);case"sqrt":return createScaleSqrt(_,T,R);case"threshold":return createScaleThreshold(_,T,R);case"quantile":return createScaleQuantile(_,T,R);case"quantize":return createScaleQuantize(_,T,R);case"pow":return createScalePow(_,T,R);case"log":return createScaleLog(_,T,R);case"symlog":return createScaleSymlog(_,T,R);case"utc":return createScaleUtc(_,T,R);case"time":return createScaleTime(_,T,R);case"point":return createScalePoint(_,T,R);case"band":return createScaleBand(_,T,R);case"identity":return createScaleIdentity(_);case void 0:return;default:throw new Error(`unknown scale type: ${P}`)}}function formatScaleType(_){return typeof _=="symbol"?_.description:_}function maybeScaleType(_){return typeof _=="string"?`${_}`.toLowerCase():_}const typeProjection={toString:()=>"projection"};function inferScaleType(_,T,{type:R,domain:P,range:O,scheme:I,pivot:L,projection:U}){if(R=maybeScaleType(R),_==="fx"||_==="fy")return"band";(_==="x"||_==="y")&&U!=null&&(R=typeProjection);for(const Z of T){const Y=maybeScaleType(Z.type);if(Y!==void 0){if(R===void 0)R=Y;else if(R!==Y)throw new Error(`scale incompatible with channel: ${R} !== ${Y}`)}}if(R===typeProjection)return;if(R!==void 0)return R;if(P===void 0&&!T.some(({value:Z})=>Z!==void 0))return;const G=registry.get(_);if(G===radius)return"sqrt";if(G===opacity||G===length)return"linear";if(G===symbol)return"ordinal";const V=(P??O)?.length;if(V<2||V>2)return asOrdinalType(G);if(P!==void 0){if(isOrdinal(P))return asOrdinalType(G);if(isTemporal(P))return"utc"}else{const Z=T.map(({value:Y})=>Y).filter(Y=>Y!==void 0);if(Z.some(isOrdinal))return asOrdinalType(G);if(Z.some(isTemporal))return"utc"}if(G===color){if(L!=null||isDivergingScheme(I))return"diverging";if(isCategoricalScheme(I))return"categorical"}return"linear"}function asOrdinalType(_){switch(_){case position:return"point";case color:return ordinalImplicit;default:return"ordinal"}}function isOrdinalScale({type:_}){return _==="ordinal"||_==="point"||_==="band"||_===ordinalImplicit}function isThresholdScale({type:_}){return _==="threshold"}function isBandScale({type:_}){return _==="point"||_==="band"}function isCollapsed(_){if(_===void 0)return!0;const T=_.domain(),R=_(T[0]);for(let P=1,O=T.length;P<O;++P)if(_(T[P])-R)return!1;return!0}function coerceType(_,{domain:T,...R},P){for(const O of _)O.value!==void 0&&(T===void 0&&(T=O.value?.domain),O.value=P(O.value));return{domain:T===void 0?T:P(T),...R}}function coerceSymbols(_){return map(_,maybeSymbol)}function exposeScales(_){return T=>{if(!registry.has(T=`${T}`))throw new Error(`unknown scale: ${T}`);return _[T]}}function exposeScale({scale:_,type:T,domain:R,range:P,interpolate:O,interval:I,transform:L,percent:U,pivot:G}){if(T==="identity")return{type:"identity",apply:Z=>Z,invert:Z=>Z};const V=_.unknown?_.unknown():void 0;return{type:T,domain:slice(R),...P!==void 0&&{range:slice(P)},...L!==void 0&&{transform:L},...U&&{percent:U},...V!==void 0&&{unknown:V},...I!==void 0&&{interval:I},...O!==void 0&&{interpolate:O},..._.clamp&&{clamp:_.clamp()},...G!==void 0&&{pivot:G,symmetric:!1},..._.base&&{base:_.base()},..._.exponent&&{exponent:_.exponent()},..._.constant&&{constant:_.constant()},..._.align&&{align:_.align(),round:_.round()},..._.padding&&(_.paddingInner?{paddingInner:_.paddingInner(),paddingOuter:_.paddingOuter()}:{padding:_.padding()}),..._.bandwidth&&{bandwidth:_.bandwidth(),step:_.step()},apply:Z=>_(Z),..._.invert&&{invert:Z=>_.invert(Z)}}}function createFacets(_,T){const{fx:R,fy:P}=createScales(_,T),O=R?.scale.domain(),I=P?.scale.domain();return O&&I?cross(O,I).map(([L,U],G)=>({x:L,y:U,i:G})):O?O.map((L,U)=>({x:L,i:U})):I?I.map((L,U)=>({y:L,i:U})):void 0}function recreateFacets(_,{x:T,y:R}){return T&&=facetIndex(T),R&&=facetIndex(R),_.filter(T&&R?P=>T.has(P.x)&&R.has(P.y):T?P=>T.has(P.x):P=>R.has(P.y)).sort(T&&R?(P,O)=>T.get(P.x)-T.get(O.x)||R.get(P.y)-R.get(O.y):T?(P,O)=>T.get(P.x)-T.get(O.x):(P,O)=>R.get(P.y)-R.get(O.y))}function facetGroups(_,{fx:T,fy:R}){const P=range(_),O=T?.value,I=R?.value;return T&&R?rollup(P,L=>(L.fx=O[L[0]],L.fy=I[L[0]],L),L=>O[L],L=>I[L]):T?rollup(P,L=>(L.fx=O[L[0]],L),L=>O[L]):rollup(P,L=>(L.fy=I[L[0]],L),L=>I[L])}function facetTranslator(_,T,{marginTop:R,marginLeft:P}){const O=_?({x:L})=>_(L)-P:()=>0,I=T?({y:L})=>T(L)-R:()=>0;return function(L){this.tagName==="svg"?(this.setAttribute("x",O(L)),this.setAttribute("y",I(L))):this.setAttribute("transform",`translate(${O(L)},${I(L)})`)}}function facetExclude(_){const T=[],R=new Uint32Array(sum(_,P=>P.length));for(const P of _){let O=0;for(const I of _)P!==I&&(R.set(I,O),O+=I.length);T.push(R.slice(0,O))}return T}const facetAnchors=new Map([["top",facetAnchorTop],["right",facetAnchorRight],["bottom",facetAnchorBottom],["left",facetAnchorLeft],["top-left",and(facetAnchorTop,facetAnchorLeft)],["top-right",and(facetAnchorTop,facetAnchorRight)],["bottom-left",and(facetAnchorBottom,facetAnchorLeft)],["bottom-right",and(facetAnchorBottom,facetAnchorRight)],["top-empty",facetAnchorTopEmpty],["right-empty",facetAnchorRightEmpty],["bottom-empty",facetAnchorBottomEmpty],["left-empty",facetAnchorLeftEmpty],["empty",facetAnchorEmpty]]);function maybeFacetAnchor(_){if(_==null)return null;const T=facetAnchors.get(`${_}`.toLowerCase());if(T)return T;throw new Error(`invalid facet anchor: ${_}`)}const indexCache=new WeakMap;function facetIndex(_){let T=indexCache.get(_);return T||indexCache.set(_,T=new InternMap(map(_,(R,P)=>[R,P]))),T}function facetIndexOf(_,T){return facetIndex(_).get(T)}function facetFind(_,T,R){return T=keyof(T),R=keyof(R),_.find(P=>Object.is(keyof(P.x),T)&&Object.is(keyof(P.y),R))}function facetEmpty(_,T,R){return facetFind(_,T,R)?.empty}function facetAnchorTop(_,{y:T},{y:R}){return T?facetIndexOf(T,R)===0:!0}function facetAnchorBottom(_,{y:T},{y:R}){return T?facetIndexOf(T,R)===T.length-1:!0}function facetAnchorLeft(_,{x:T},{x:R}){return T?facetIndexOf(T,R)===0:!0}function facetAnchorRight(_,{x:T},{x:R}){return T?facetIndexOf(T,R)===T.length-1:!0}function facetAnchorTopEmpty(_,{y:T},{x:R,y:P,empty:O}){if(O)return!1;if(!T)return;const I=facetIndexOf(T,P);if(I>0)return facetEmpty(_,R,T[I-1])}function facetAnchorBottomEmpty(_,{y:T},{x:R,y:P,empty:O}){if(O)return!1;if(!T)return;const I=facetIndexOf(T,P);if(I<T.length-1)return facetEmpty(_,R,T[I+1])}function facetAnchorLeftEmpty(_,{x:T},{x:R,y:P,empty:O}){if(O)return!1;if(!T)return;const I=facetIndexOf(T,R);if(I>0)return facetEmpty(_,T[I-1],P)}function facetAnchorRightEmpty(_,{x:T},{x:R,y:P,empty:O}){if(O)return!1;if(!T)return;const I=facetIndexOf(T,R);if(I<T.length-1)return facetEmpty(_,T[I+1],P)}function facetAnchorEmpty(_,T,{empty:R}){return R}function and(_,T){return function(){return _.apply(null,arguments)&&T.apply(null,arguments)}}function facetFilter(_,{channels:{fx:T,fy:R},groups:P}){return T&&R?_.map(({x:O,y:I})=>P.get(O)?.get(I)??[]):T?_.map(({x:O})=>P.get(O)??[]):_.map(({y:O})=>P.get(O)??[])}const pi=Math.PI,tau=2*pi,defaultAspectRatio=.618;function createProjection({projection:_,inset:T=0,insetTop:R=T,insetRight:P=T,insetBottom:O=T,insetLeft:I=T}={},L){if(_==null)return;if(typeof _.stream=="function")return _;let U,G,V="frame";if(isObject$1(_)){let he;if({type:_,domain:G,inset:he,insetTop:R=he!==void 0?he:R,insetRight:P=he!==void 0?he:P,insetBottom:O=he!==void 0?he:O,insetLeft:I=he!==void 0?he:I,clip:V=V,...U}=_,_==null)return}typeof _!="function"&&({type:_}=namedProjection(_));const{width:Z,height:Y,marginLeft:W,marginRight:J,marginTop:ee,marginBottom:te}=L,ie=Z-W-J-I-P,oe=Y-ee-te-R-O;if(_=_?.({width:ie,height:oe,clip:V,...U}),_==null)return;V=maybePostClip(V,W,ee,Z-J,Y-te);let ae=W+I,ce=ee+R,le;if(G!=null){const[[he,me],[fe,ue]]=geoPath(_).bounds(G),pe=Math.min(ie/(fe-he),oe/(ue-me));pe>0?(ae-=(pe*(he+fe)-ie)/2,ce-=(pe*(me+ue)-oe)/2,le=geoTransform({point(ge,_e){this.stream.point(ge*pe+ae,_e*pe+ce)}})):warn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return le??=ae===0&&ce===0?identity$1():geoTransform({point(he,me){this.stream.point(he+ae,me+ce)}}),{stream:he=>_.stream(le.stream(V(he)))}}function namedProjection(_){switch(`${_}`.toLowerCase()){case"albers-usa":return scaleProjection(geoAlbersUsa,.7463,.4673);case"albers":return conicProjection(geoAlbers,.7463,.4673);case"azimuthal-equal-area":return scaleProjection(geoAzimuthalEqualArea,4,4);case"azimuthal-equidistant":return scaleProjection(geoAzimuthalEquidistant,tau,tau);case"conic-conformal":return conicProjection(geoConicConformal,tau,tau);case"conic-equal-area":return conicProjection(geoConicEqualArea,6.1702,2.9781);case"conic-equidistant":return conicProjection(geoConicEquidistant,7.312,3.6282);case"equal-earth":return scaleProjection(geoEqualEarth,5.4133,2.6347);case"equirectangular":return scaleProjection(geoEquirectangular,tau,pi);case"gnomonic":return scaleProjection(geoGnomonic,3.4641,3.4641);case"identity":return{type:identity$1};case"reflect-y":return{type:reflectY};case"mercator":return scaleProjection(geoMercator,tau,tau);case"orthographic":return scaleProjection(geoOrthographic,2,2);case"stereographic":return scaleProjection(geoStereographic,2,2);case"transverse-mercator":return scaleProjection(geoTransverseMercator,tau,tau);default:throw new Error(`unknown projection type: ${_}`)}}function maybePostClip(_,T,R,P,O){if(_===!1||_==null||typeof _=="number")return I=>I;if(_===!0&&(_="frame"),`${_}`.toLowerCase()==="frame")return clipRectangle(T,R,P,O);throw new Error(`unknown projection clip type: ${_}`)}function scaleProjection(_,T,R){return{type:({width:P,height:O,rotate:I,precision:L=.15,clip:U})=>{const G=_();return L!=null&&G.precision?.(L),I!=null&&G.rotate?.(I),typeof U=="number"&&G.clipAngle?.(U),P!=null&&(G.scale(Math.min(P/T,O/R)),G.translate([P/2,O/2])),G},aspectRatio:R/T}}function conicProjection(_,T,R){const{type:P,aspectRatio:O}=scaleProjection(_,T,R);return{type:I=>{const{parallels:L,domain:U,width:G,height:V}=I,Z=P(I);return L!=null&&(Z.parallels(L),U===void 0&&G!=null&&Z.fitSize([G,V],{type:"Sphere"})),Z},aspectRatio:O}}const identity$1=constant$1({stream:_=>_}),reflectY=constant$1(geoTransform({point(_,T){this.stream.point(_,-T)}}));function project(_,T,R,P){const O=R[_],I=R[T],L=O.length,U=R[_]=new Float64Array(L).fill(NaN),G=R[T]=new Float64Array(L).fill(NaN);let V;const Z=P.stream({point(Y,W){U[V]=Y,G[V]=W}});for(V=0;V<L;++V)Z.point(O[V],I[V])}function hasProjection({projection:_}={}){return _==null?!1:typeof _.stream=="function"?!0:(isObject$1(_)&&(_=_.type),_!=null)}function projectionAspectRatio(_){if(typeof _?.stream=="function")return defaultAspectRatio;if(isObject$1(_)){let T,R;if({domain:T,type:_,...R}=_,T!=null&&_!=null){const P=typeof _=="string"?namedProjection(_).type:_,[[O,I],[L,U]]=geoPath(P({...R,width:100,height:100})).bounds(T),G=(U-I)/(L-O);return G&&isFinite(G)?G<.2?.2:G>5?5:G:defaultAspectRatio}}if(_!=null){if(typeof _!="function"){const{aspectRatio:T}=namedProjection(_);if(T)return T}return defaultAspectRatio}}function getGeometryChannels(_){const T=[],R=[],P={scale:"x",value:T},O={scale:"y",value:R},I={point(L,U){T.push(L),R.push(U)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const L of _.value)geoStream(L,I);return[P,O]}function xyProjection({x:_,y:T}){if(_||T)return _??=R=>R,T??=R=>R,geoTransform({point(R,P){this.stream.point(_(R),T(P))}})}function createContext(_={}){const{document:T=typeof window<"u"?window.document:void 0,clip:R}=_;return{document:T,clip:maybeClip(R)}}function create(_,{document:T}){return select(creator(_).call(T.documentElement))}const unset=Symbol("unset");function memoize1(_){return(_.length===1?memoize1Arg:memoize1Args)(_)}function memoize1Arg(_){let T,R=unset;return P=>(Object.is(R,P)||(R=P,T=_(P)),T)}function memoize1Args(_){let T,R;return(...P)=>((R?.length!==P.length||R.some((O,I)=>!Object.is(O,P[I])))&&(R=P,T=_(...P)),T)}const numberFormat=memoize1(_=>new Intl.NumberFormat(_));memoize1((_,T)=>new Intl.DateTimeFormat(_,{timeZone:"UTC",...T&&{month:T}}));memoize1((_,T)=>new Intl.DateTimeFormat(_,{timeZone:"UTC",...T&&{weekday:T}}));function formatNumber(_="en-US"){const T=numberFormat(_);return R=>R!=null&&!isNaN(R)?T.format(R):void 0}function formatIsoDate(_){return format(_,"Invalid Date")}function formatAuto(_="en-US"){const T=formatNumber(_);return R=>(R instanceof Date?formatIsoDate:typeof R=="number"?T:string)(R)}const formatDefault=formatAuto(),offset=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let nextClipId=0;function getClipId(){return`plot-clip-${++nextClipId}`}function styles(_,{title:T,href:R,ariaLabel:P,ariaDescription:O,ariaHidden:I,target:L,fill:U,fillOpacity:G,stroke:V,strokeWidth:Z,strokeOpacity:Y,strokeLinejoin:W,strokeLinecap:J,strokeMiterlimit:ee,strokeDasharray:te,strokeDashoffset:ie,opacity:oe,mixBlendMode:ae,imageFilter:ce,paintOrder:le,pointerEvents:he,shapeRendering:me,channels:fe},{ariaLabel:ue,fill:pe="currentColor",fillOpacity:ge,stroke:_e="none",strokeOpacity:we,strokeWidth:be,strokeLinecap:Ce,strokeLinejoin:Ee,strokeMiterlimit:ye,paintOrder:Se}){pe===null&&(U=null,G=null),_e===null&&(V=null,Y=null),isNoneish(pe)?!isNoneish(_e)&&(!isNoneish(U)||fe?.fill)&&(_e="none"):isNoneish(_e)&&(!isNoneish(V)||fe?.stroke)&&(pe="none");const[Te,Ae]=maybeColorChannel(U,pe),[Be,ve]=maybeNumberChannel(G,ge),[Re,Me]=maybeColorChannel(V,_e),[ze,qe]=maybeNumberChannel(Y,we),[We,Oe]=maybeNumberChannel(oe);isNone(Me)||(Z===void 0&&(Z=be),J===void 0&&(J=Ce),W===void 0&&(W=Ee),ee===void 0&&!isRound(W)&&(ee=ye),!isNone(Ae)&&le===void 0&&(le=Se));const[Ve,ke]=maybeNumberChannel(Z);return pe!==null&&(_.fill=impliedString(Ae,"currentColor"),_.fillOpacity=impliedNumber(ve,1)),_e!==null&&(_.stroke=impliedString(Me,"none"),_.strokeWidth=impliedNumber(ke,1),_.strokeOpacity=impliedNumber(qe,1),_.strokeLinejoin=impliedString(W,"miter"),_.strokeLinecap=impliedString(J,"butt"),_.strokeMiterlimit=impliedNumber(ee,4),_.strokeDasharray=impliedString(te,"none"),_.strokeDashoffset=impliedString(ie,"0")),_.target=string(L),_.ariaLabel=string(ue),_.ariaDescription=string(O),_.ariaHidden=string(I),_.opacity=impliedNumber(Oe,1),_.mixBlendMode=impliedString(ae,"normal"),_.imageFilter=impliedString(ce,"none"),_.paintOrder=impliedString(le,"normal"),_.pointerEvents=impliedString(he,"auto"),_.shapeRendering=impliedString(me,"auto"),{title:{value:T,optional:!0,filter:null},href:{value:R,optional:!0,filter:null},ariaLabel:{value:P,optional:!0,filter:null},fill:{value:Te,scale:"auto",optional:!0},fillOpacity:{value:Be,scale:"auto",optional:!0},stroke:{value:Re,scale:"auto",optional:!0},strokeOpacity:{value:ze,scale:"auto",optional:!0},strokeWidth:{value:Ve,optional:!0},opacity:{value:We,scale:"auto",optional:!0}}}function applyTitle(_,T){T&&_.filter(R=>nonempty(T[R])).append("title").call(applyText,T)}function applyTitleGroup(_,T){T&&_.filter(([R])=>nonempty(T[R])).append("title").call(applyTextGroup,T)}function applyText(_,T){T&&_.text(R=>formatDefault(T[R]))}function applyTextGroup(_,T){T&&_.text(([R])=>formatDefault(T[R]))}function applyChannelStyles(_,{target:T,tip:R},{ariaLabel:P,title:O,fill:I,fillOpacity:L,stroke:U,strokeOpacity:G,strokeWidth:V,opacity:Z,href:Y}){P&&applyAttr(_,"aria-label",W=>P[W]),I&&applyAttr(_,"fill",W=>I[W]),L&&applyAttr(_,"fill-opacity",W=>L[W]),U&&applyAttr(_,"stroke",W=>U[W]),G&&applyAttr(_,"stroke-opacity",W=>G[W]),V&&applyAttr(_,"stroke-width",W=>V[W]),Z&&applyAttr(_,"opacity",W=>Z[W]),Y&&applyHref(_,W=>Y[W],T),R||applyTitle(_,O)}function applyGroupedChannelStyles(_,{target:T,tip:R},{ariaLabel:P,title:O,fill:I,fillOpacity:L,stroke:U,strokeOpacity:G,strokeWidth:V,opacity:Z,href:Y}){P&&applyAttr(_,"aria-label",([W])=>P[W]),I&&applyAttr(_,"fill",([W])=>I[W]),L&&applyAttr(_,"fill-opacity",([W])=>L[W]),U&&applyAttr(_,"stroke",([W])=>U[W]),G&&applyAttr(_,"stroke-opacity",([W])=>G[W]),V&&applyAttr(_,"stroke-width",([W])=>V[W]),Z&&applyAttr(_,"opacity",([W])=>Z[W]),Y&&applyHref(_,([W])=>Y[W],T),R||applyTitleGroup(_,O)}function groupAesthetics({ariaLabel:_,title:T,fill:R,fillOpacity:P,stroke:O,strokeOpacity:I,strokeWidth:L,opacity:U,href:G},{tip:V}){return[_,V?void 0:T,R,P,O,I,L,U,G].filter(Z=>Z!==void 0)}function groupZ(_,T,R){const P=group(_,O=>T[O]);return R===void 0&&P.size>1+_.length>>1&&warn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),P.values()}function*groupIndex(_,T,R,P){const{z:O}=R,{z:I}=P,L=groupAesthetics(P,R),U=[...T,...L];for(const G of I?groupZ(_,I,O):[_]){let V,Z;e:for(const Y of G){for(const W of U)if(!defined(W[Y])){Z&&Z.push(-1);continue e}if(V===void 0){Z&&(yield Z),V=L.map(W=>keyof(W[Y])),Z=[Y];continue}Z.push(Y);for(let W=0;W<L.length;++W)if(keyof(L[W][Y])!==V[W]){yield Z,V=L.map(ee=>keyof(ee[Y])),Z=[Y];continue e}}Z&&(yield Z)}}function applyClip(_,T,R,P){let O;const{clip:I=P.clip}=T;I==="frame"?(_=create("svg:g",P).each(function(){this.appendChild(_.node()),_.node=()=>this}),O=getFrameClip(P,R)):I&&(O=getGeoClip(I,P)),applyAttr(_,"aria-label",T.ariaLabel),applyAttr(_,"aria-description",T.ariaDescription),applyAttr(_,"aria-hidden",T.ariaHidden),applyAttr(_,"clip-path",O)}function memoizeClip(_){const T=new WeakMap;return(R,P)=>{let O=T.get(R);if(!O){const I=getClipId();select(R.ownerSVGElement).append("clipPath").attr("id",I).call(_,R,P),T.set(R,O=`url(#${I})`)}return O}}const getFrameClip=memoizeClip((_,T,R)=>{const{width:P,height:O,marginLeft:I,marginRight:L,marginTop:U,marginBottom:G}=R;_.append("rect").attr("x",I).attr("y",U).attr("width",P-L-I).attr("height",O-U-G)}),geoClipCache=new WeakMap,sphere={type:"Sphere"};function getGeoClip(_,T){let R,P;if((R=geoClipCache.get(T))||geoClipCache.set(T,R=new WeakMap),_.type==="Sphere"&&(_=sphere),!(P=R.get(_))){const O=getClipId();select(T.ownerSVGElement).append("clipPath").attr("id",O).append("path").attr("d",T.path()(_)),R.set(_,P=`url(#${O})`)}return P}function applyIndirectStyles(_,T,R,P){applyClip(_,T,R,P),applyAttr(_,"class",T.className),applyAttr(_,"fill",T.fill),applyAttr(_,"fill-opacity",T.fillOpacity),applyAttr(_,"stroke",T.stroke),applyAttr(_,"stroke-width",T.strokeWidth),applyAttr(_,"stroke-opacity",T.strokeOpacity),applyAttr(_,"stroke-linejoin",T.strokeLinejoin),applyAttr(_,"stroke-linecap",T.strokeLinecap),applyAttr(_,"stroke-miterlimit",T.strokeMiterlimit),applyAttr(_,"stroke-dasharray",T.strokeDasharray),applyAttr(_,"stroke-dashoffset",T.strokeDashoffset),applyAttr(_,"shape-rendering",T.shapeRendering),applyAttr(_,"filter",T.imageFilter),applyAttr(_,"paint-order",T.paintOrder);const{pointerEvents:O=P.pointerSticky===!1?"none":void 0}=T;applyAttr(_,"pointer-events",O)}function applyDirectStyles(_,T){applyStyle(_,"mix-blend-mode",T.mixBlendMode),applyAttr(_,"opacity",T.opacity)}function applyHref(_,T,R){_.each(function(P){const O=T(P);if(O!=null){const I=this.ownerDocument.createElementNS(namespaces.svg,"a");I.setAttribute("fill","inherit"),I.setAttributeNS(namespaces.xlink,"href",O),R!=null&&I.setAttribute("target",R),this.parentNode.insertBefore(I,this).appendChild(this)}})}function applyAttr(_,T,R){R!=null&&_.attr(T,R)}function applyStyle(_,T,R){R!=null&&_.style(T,R)}function applyTransform(_,T,{x:R,y:P},O=offset,I=offset){O+=T.dx,I+=T.dy,R?.bandwidth&&(O+=R.bandwidth()/2),P?.bandwidth&&(I+=P.bandwidth()/2),(O||I)&&_.attr("transform",`translate(${O},${I})`)}function impliedString(_,T){if((_=string(_))!==T)return _}function impliedNumber(_,T){if((_=number(_))!==T)return _}const validClassName=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function maybeClassName(_){if(_===void 0)return"plot-d6a7b5";if(_=`${_}`,!validClassName.test(_))throw new Error(`invalid class name: ${_}`);return _}function applyInlineStyles(_,T){if(typeof T=="string")_.property("style",T);else if(T!=null)for(const R of _)Object.assign(R.style,T)}function applyFrameAnchor({frameAnchor:_},{width:T,height:R,marginTop:P,marginRight:O,marginBottom:I,marginLeft:L}){return[/left$/.test(_)?L:/right$/.test(_)?T-O:(L+T-O)/2,/^top/.test(_)?P:/^bottom/.test(_)?R-I:(P+R-I)/2]}class Mark{constructor(T,R={},P={},O){const{facet:I="auto",facetAnchor:L,fx:U,fy:G,sort:V,dx:Z=0,dy:Y=0,margin:W=0,marginTop:J=W,marginRight:ee=W,marginBottom:te=W,marginLeft:ie=W,className:oe,clip:ae=O?.clip,channels:ce,tip:le,render:he}=P;if(this.data=T,this.sort=isDomainSort(V)?V:null,this.initializer=initializer(P).initializer,this.transform=this.initializer?P.transform:basic(P).transform,I===null||I===!1?this.facet=null:(this.facet=keyword(I===!0?"include":I,"facet",["auto","include","exclude","super"]),this.fx=T===singleton&&typeof U=="string"?[U]:U,this.fy=T===singleton&&typeof G=="string"?[G]:G),this.facetAnchor=maybeFacetAnchor(L),R=maybeNamed(R),ce!==void 0&&(R={...maybeChannels(ce),...R}),O!==void 0&&(R={...styles(this,P,O),...R}),this.channels=Object.fromEntries(Object.entries(R).map(([me,fe])=>{if(isOptions(fe.value)){const{value:ue,label:pe=fe.label,scale:ge=fe.scale}=fe.value;fe={...fe,label:pe,scale:ge,value:ue}}if(T===singleton&&typeof fe.value=="string"){const{value:ue}=fe;fe={...fe,value:[ue]}}return[me,fe]}).filter(([me,{value:fe,optional:ue}])=>{if(fe!=null)return!0;if(ue)return!1;throw new Error(`missing channel value: ${me}`)})),this.dx=+Z,this.dy=+Y,this.marginTop=+J,this.marginRight=+ee,this.marginBottom=+te,this.marginLeft=+ie,this.clip=maybeClip(ae),this.tip=maybeTip(le),this.className=string(oe),this.facet==="super"){if(U||G)throw new Error("super-faceting cannot use fx or fy");for(const me in this.channels){const{scale:fe}=R[me];if(!(fe!=="x"&&fe!=="y"))throw new Error("super-faceting cannot use x or y")}}he!=null&&(this.render=composeRender(he,this.render))}initialize(T,R,P){let O=dataify(this.data);T===void 0&&O!=null&&(T=[range(O)]);const I=T;this.transform!=null&&({facets:T,data:O}=this.transform(O,T,P),O=dataify(O)),T!==void 0&&(T.original=I);const L=createChannels(this.channels,O);return this.sort!=null&&channelDomain(O,T,L,R,this.sort),{data:O,facets:T,channels:L}}filter(T,R,P){for(const O in R){const{filter:I=defined}=R[O];if(I!==null){const L=P[O];T=T.filter(U=>I(L[U]))}}return T}project(T,R,P){for(const O in T)if(T[O].scale==="x"&&/^x|x$/.test(O)){const I=O.replace(/^x|x$/,"y");I in T&&T[I].scale==="y"&&project(O,I,R,P.projection)}}scale(T,R,P){const O=valueObject(T,R);return P.projection&&this.project(T,O,P),O}}function marks(..._){return _.plot=Mark.prototype.plot,_}function composeRender(_,T){if(_==null)return T===null?void 0:T;if(T==null)return _===null?void 0:_;if(typeof _!="function")throw new TypeError(`invalid render transform: ${_}`);if(typeof T!="function")throw new TypeError(`invalid render transform: ${T}`);return function(R,P,O,I,L,U){return _.call(this,R,P,O,I,L,(G,V,Z,Y,W)=>T.call(this,G,V,Z,Y,W,U))}}function maybeChannels(_){return Object.fromEntries(Object.entries(maybeNamed(_)).map(([T,R])=>(R=typeof R=="string"?{value:R,label:T}:maybeValue(R),R.filter===void 0&&R.scale==null&&(R={...R,filter:null}),[T,R])))}function maybeTip(_){return _===!0?"xy":_===!1||_==null?null:typeof _=="string"?keyword(_,"tip",["x","y","xy"]):_}function withTip(_,T){return _?.tip===!0?{..._,tip:T}:isObject$1(_?.tip)&&_.tip.pointer===void 0?{..._,tip:{..._.tip,pointer:T}}:_}function createDimensions(_,T,R={}){let P=.5-offset,O=.5+offset,I=.5+offset,L=.5-offset;for(const{marginTop:te,marginRight:ie,marginBottom:oe,marginLeft:ae}of T)te>P&&(P=te),ie>O&&(O=ie),oe>I&&(I=oe),ae>L&&(L=ae);let{margin:U,marginTop:G=U!==void 0?U:P,marginRight:V=U!==void 0?U:O,marginBottom:Z=U!==void 0?U:I,marginLeft:Y=U!==void 0?U:L}=R;G=+G,V=+V,Z=+Z,Y=+Y;let{width:W=640,height:J=autoHeight(_,R,{width:W,marginTopDefault:P,marginRightDefault:O,marginBottomDefault:I,marginLeftDefault:L})+Math.max(0,G-P+Z-I)}=R;W=+W,J=+J;const ee={width:W,height:J,marginTop:G,marginRight:V,marginBottom:Z,marginLeft:Y};if(_.fx||_.fy){let{margin:te,marginTop:ie=te!==void 0?te:G,marginRight:oe=te!==void 0?te:V,marginBottom:ae=te!==void 0?te:Z,marginLeft:ce=te!==void 0?te:Y}=R.facet??{};ie=+ie,oe=+oe,ae=+ae,ce=+ce,ee.facet={marginTop:ie,marginRight:oe,marginBottom:ae,marginLeft:ce}}return ee}function autoHeight({x:_,y:T,fy:R,fx:P},{projection:O,aspectRatio:I},{width:L,marginTopDefault:U,marginRightDefault:G,marginBottomDefault:V,marginLeftDefault:Z}){const Y=R&&R.scale.domain().length||1,W=projectionAspectRatio(O);if(W){const ee=P?P.scale.domain().length:1,te=(1.1*Y-.1)/(1.1*ee-.1)*W,ie=Math.max(.1,Math.min(10,te));return Math.round((L-Z-G)*ie+U+V)}const J=T?isOrdinalScale(T)?T.scale.domain().length||1:Math.max(7,17/Y):1;if(I!=null){if(I=+I,!(isFinite(I)&&I>0))throw new Error(`invalid aspectRatio: ${I}`);const ee=aspectRatioLength("y",T)/(aspectRatioLength("x",_)*I),te=P?P.scale.bandwidth():1,ie=R?R.scale.bandwidth():1,oe=te*(L-Z-G)-_.insetLeft-_.insetRight;return(ee*oe+T.insetTop+T.insetBottom)/ie+U+V}return!!(T||R)*Math.max(1,Math.min(60,J*Y))*20+!!P*30+60}function aspectRatioLength(_,T){if(!T)throw new Error(`aspectRatio requires ${_} scale`);const{type:R,domain:P}=T;let O;switch(R){case"linear":case"utc":case"time":O=Number;break;case"pow":{const U=T.scale.exponent();O=G=>Math.pow(G,U);break}case"log":O=Math.log;break;case"point":case"band":return P.length;default:throw new Error(`unsupported ${_} scale for aspectRatio: ${R}`)}const[I,L]=extent$1(P);return Math.abs(O(L)-O(I))}const states=new WeakMap;function pointerK(_,T,{x:R,y:P,px:O,py:I,maxRadius:L=40,channels:U,render:G,...V}={}){return L=+L,O!=null&&(R??=null,U={...U,px:{value:O,scale:"x"}}),I!=null&&(P??=null,U={...U,py:{value:I,scale:"y"}}),{x:R,y:P,channels:U,...V,render:composeRender(function(Z,Y,W,J,ee,te){ee={...ee,pointerSticky:!1};const ie=ee.ownerSVGElement,{data:oe}=ee.getMarkState(this);let ae=states.get(ie);ae||states.set(ie,ae={sticky:!1,roots:[],renders:[]});let ce=ae.renders.push(Me)-1;const{x:le,y:he,fx:me,fy:fe}=Y;let ue=me?me(Z.fx)-J.marginLeft:0,pe=fe?fe(Z.fy)-J.marginTop:0;le?.bandwidth&&(ue+=le.bandwidth()/2),he?.bandwidth&&(pe+=he.bandwidth()/2);const ge=Z.fi!=null;let _e;if(ge){let Oe=ae.facetStates;Oe||(ae.facetStates=Oe=new Map),_e=Oe.get(this),_e||Oe.set(this,_e=new Map)}const[we,be]=applyFrameAnchor(this,J),{px:Ce,py:Ee}=W,ye=Ce?Oe=>Ce[Oe]:anchorX$1(W,we),Se=Ee?Oe=>Ee[Oe]:anchorY$1(W,be);let Te,Ae,Be,ve;function Re(Oe,Ve){if(ge)if(ve&&(ve=cancelAnimationFrame(ve)),Oe==null)_e.delete(Z.fi);else{_e.set(Z.fi,Ve),ve=requestAnimationFrame(()=>{ve=null;for(const[ke,Fe]of _e)if(Fe<Ve||Fe===Ve&&ke<Z.fi){Oe=null;break}Me(Oe)});return}Me(Oe)}function Me(Oe){if(Te===Oe&&Be===ae.sticky)return;Te=Oe,Be=ee.pointerSticky=ae.sticky;const Ve=Te==null?[]:[Te];ge&&(Ve.fx=Z.fx,Ve.fy=Z.fy,Ve.fi=Z.fi);const ke=te(Ve,Y,W,J,ee);if(Ae){if(ge){const Fe=Ae.parentNode,He=Ae.getAttribute("transform"),Pe=ke.getAttribute("transform");He?ke.setAttribute("transform",He):ke.removeAttribute("transform"),Pe?Fe.setAttribute("transform",Pe):Fe.removeAttribute("transform"),ke.removeAttribute("aria-label"),ke.removeAttribute("aria-description"),ke.removeAttribute("aria-hidden")}Ae.replaceWith(ke)}if(ae.roots[ce]=Ae=ke,!(Te==null&&_e?.size>1)){const Fe=Te==null?null:isArray$1(oe)?oe[Te]:oe.get(Te);ee.dispatchValue(Fe)}return ke}function ze(Oe){if(ae.sticky||Oe.pointerType==="mouse"&&Oe.buttons===1)return;let[Ve,ke]=pointof(Oe);Ve-=ue,ke-=pe;const Fe=Ve<J.marginLeft||Ve>J.width-J.marginRight?1:_,He=ke<J.marginTop||ke>J.height-J.marginBottom?1:T;let Pe=null,Je=L*L;for(const Ke of Z){const Ze=Fe*(ye(Ke)-Ve),Qe=He*(Se(Ke)-ke),at=Ze*Ze+Qe*Qe;at<=Je&&(Pe=Ke,Je=at)}if(Pe!=null&&(_!==1||T!==1)){const Ke=ye(Pe)-Ve,Ze=Se(Pe)-ke;Je=Ke*Ke+Ze*Ze}Re(Pe,Je)}function qe(Oe){Oe.pointerType==="mouse"&&Te!=null&&(ae.sticky&&ae.roots.some(Ve=>Ve?.contains(Oe.target))||(ae.sticky?(ae.sticky=!1,ae.renders.forEach(Ve=>Ve(null))):(ae.sticky=!0,Me(Te)),Oe.stopImmediatePropagation()))}function We(Oe){Oe.pointerType==="mouse"&&(ae.sticky||Re(null))}return ie.addEventListener("pointerenter",ze),ie.addEventListener("pointermove",ze),ie.addEventListener("pointerdown",qe),ie.addEventListener("pointerleave",We),Me(null)},G)}}function pointer(_){return pointerK(1,1,_)}function pointerX(_){return pointerK(1,.01,_)}function pointerY(_){return pointerK(.01,1,_)}function anchorX$1({x1:_,x2:T,x:R=_},P){return _&&T?O=>(_[O]+T[O])/2:R?O=>R[O]:()=>P}function anchorY$1({y1:_,y2:T,y:R=_},P){return _&&T?O=>(_[O]+T[O])/2:R?O=>R[O]:()=>P}function inferFontVariant$2(_){return isOrdinalScale(_)&&_.interval===void 0?void 0:"tabular-nums"}function legendRamp(_,T){let{label:R=_.label,tickSize:P=6,width:O=240,height:I=44+P,marginTop:L=18,marginRight:U=0,marginBottom:G=16+P,marginLeft:V=0,style:Z,ticks:Y=(O-V-U)/64,tickFormat:W,fontVariant:J=inferFontVariant$2(_),round:ee=!0,opacity:te,className:ie}=T;const oe=createContext(T);ie=maybeClassName(ie),te=maybeNumberChannel(te)[1],W===null&&(W=()=>null);const ae=create("svg",oe).attr("class",`${ie}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",O).attr("height",I).attr("viewBox",`0 0 ${O} ${I}`).call(we=>we.append("style").text(`:where(.${ie}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${ie}-ramp text) {
  white-space: pre;
}`)).call(applyInlineStyles,Z);let ce=we=>we.selectAll(".tick line").attr("y1",L+G-I),le;const he=ee?(we,be)=>we.rangeRound(be):(we,be)=>we.range(be),{type:me,domain:fe,range:ue,interpolate:pe,scale:ge,pivot:_e}=_;if(pe){const we=ue===void 0?pe:piecewise(pe.length===1?interpolatePiecewise(pe):pe,ue);le=he(ge.copy(),quantize(interpolateNumber(V,O-U),Math.min(fe.length+(_e!==void 0),ue===void 0?1/0:ue.length)));const be=256,Ce=oe.document.createElement("canvas");Ce.width=be,Ce.height=1;const Ee=Ce.getContext("2d");for(let ye=0,Se=be-1;ye<be;++ye)Ee.fillStyle=we(ye/Se),Ee.fillRect(ye,0,1,1);ae.append("image").attr("opacity",te).attr("x",V).attr("y",L).attr("width",O-V-U).attr("height",I-L-G).attr("preserveAspectRatio","none").attr("xlink:href",Ce.toDataURL())}else if(me==="threshold"){const we=fe,be=W===void 0?Ce=>Ce:typeof W=="string"?format$1(W):W;le=he(linear().domain([-1,ue.length-1]),[V,O-U]),ae.append("g").attr("fill-opacity",te).selectAll().data(ue).enter().append("rect").attr("x",(Ce,Ee)=>le(Ee-1)).attr("y",L).attr("width",(Ce,Ee)=>le(Ee)-le(Ee-1)).attr("height",I-L-G).attr("fill",Ce=>Ce),Y=map(we,(Ce,Ee)=>Ee),W=Ce=>be(we[Ce],Ce)}else le=he(band().domain(fe),[V,O-U]),ae.append("g").attr("fill-opacity",te).selectAll().data(fe).enter().append("rect").attr("x",le).attr("y",L).attr("width",Math.max(0,le.bandwidth()-1)).attr("height",I-L-G).attr("fill",ge),ce=()=>{};return ae.append("g").attr("transform",`translate(0,${I-G})`).call(axisBottom(le).ticks(Array.isArray(Y)?null:Y,typeof W=="string"?W:void 0).tickFormat(typeof W=="function"?W:void 0).tickSize(P).tickValues(Array.isArray(Y)?Y:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",impliedString(J,"normal")).call(ce).call(we=>we.select(".domain").remove()),R!==void 0&&ae.append("text").attr("x",V).attr("y",L-6).attr("fill","currentColor").attr("font-weight","bold").text(R),ae.node()}const radians=Math.PI/180;function markers(_,{marker:T,markerStart:R=T,markerMid:P=T,markerEnd:O=T}={}){_.markerStart=maybeMarker(R),_.markerMid=maybeMarker(P),_.markerEnd=maybeMarker(O)}function maybeMarker(_){if(_==null||_===!1)return null;if(_===!0)return markerCircleFill;if(typeof _=="function")return _;switch(`${_}`.toLowerCase()){case"none":return null;case"arrow":return markerArrow("auto");case"arrow-reverse":return markerArrow("auto-start-reverse");case"dot":return markerDot;case"circle":case"circle-fill":return markerCircleFill;case"circle-stroke":return markerCircleStroke;case"tick":return markerTick("auto");case"tick-x":return markerTick(90);case"tick-y":return markerTick(0)}throw new Error(`invalid marker: ${_}`)}function markerArrow(_){return(T,R)=>create("svg:marker",R).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",_).attr("fill","none").attr("stroke",T).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(P=>P.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function markerDot(_,T){return create("svg:marker",T).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",_).attr("stroke","none").call(R=>R.append("circle").attr("r",2.5)).node()}function markerCircleFill(_,T){return create("svg:marker",T).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",_).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(R=>R.append("circle").attr("r",3)).node()}function markerCircleStroke(_,T){return create("svg:marker",T).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",_).attr("stroke-width",1.5).call(R=>R.append("circle").attr("r",3)).node()}function markerTick(_){return(T,R)=>create("svg:marker",R).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",_).attr("stroke",T).call(P=>P.append("path").attr("d","M0,-3v6")).node()}let nextMarkerId=0;function applyMarkers(_,T,{stroke:R},P){return applyMarkersColor(_,T,R&&(O=>R[O]),null,P)}function applyGroupedMarkers(_,T,{stroke:R,z:P},O){return applyMarkersColor(_,T,R&&(([I])=>R[I]),P,O)}const START=1,END=2;function getGroupedOrientation(_,T){const R=new Uint8Array(T.length),P=_.data().filter(I=>I.length>1),O=P.length;for(let I=0,L=unset;I<O;++I){const U=P[I];if(U.length>1){const G=U[0];L!==(L=keyof(T[G]))&&(R[G]|=START)}}for(let I=O-1,L=unset;I>=0;--I){const U=P[I];if(U.length>1){const G=U[0];L!==(L=keyof(T[G]))&&(R[G]|=END)}}return([I])=>R[I]}function applyMarkersColor(_,{markerStart:T,markerMid:R,markerEnd:P,stroke:O},I=()=>O,L,U){if(!T&&!R&&!P)return;const G=new Map,V=L&&getGroupedOrientation(_,L);function Z(Y,W,J){return function(ee){if(J&&!J(ee))return;const te=I(ee);let ie=G.get(W);ie||G.set(W,ie=new Map);let oe=ie.get(te);if(!oe){const ae=this.parentNode.insertBefore(W(te,U),this),ce=`plot-marker-${++nextMarkerId}`;ae.setAttribute("id",ce),ie.set(te,oe=`url(#${ce})`)}this.setAttribute(Y,oe)}}T&&_.each(Z("marker-start",T,V&&(Y=>V(Y)&START))),R&&V&&_.each(Z("marker-start",R,Y=>!(V(Y)&START))),R&&_.each(Z("marker-mid",R)),P&&_.each(Z("marker-end",P,V&&(Y=>V(Y)&END)))}function maybeInsetX({inset:_,insetLeft:T,insetRight:R,...P}={}){return[T,R]=maybeInset(_,T,R),{inset:_,insetLeft:T,insetRight:R,...P}}function maybeInsetY({inset:_,insetTop:T,insetBottom:R,...P}={}){return[T,R]=maybeInset(_,T,R),{inset:_,insetTop:T,insetBottom:R,...P}}function maybeInset(_,T,R){return _===void 0&&T===void 0&&R===void 0?offset?[1,0]:[.5,.5]:[T,R]}function maybeIntervalValue(_,{interval:T}){return _={...maybeValue(_)},_.interval=maybeInterval(_.interval===void 0?T:_.interval),_}function maybeIntervalK(_,T,R,P){const{[_]:O,[`${_}1`]:I,[`${_}2`]:L}=R,{value:U,interval:G}=maybeIntervalValue(O,R);if(U==null||G==null&&!P)return R;const V=labelof(O);if(G==null){let J;const ee={transform:te=>J||(J=valueof(te,U)),label:V};return{...R,[_]:void 0,[`${_}1`]:I===void 0?ee:I,[`${_}2`]:L===void 0&&!(I===L&&P)?ee:L}}let Z,Y;function W(J){return Y!==void 0&&J===Z?Y:Y=map(valueof(Z=J,U),ee=>G.floor(ee))}return T({...R,[_]:void 0,[`${_}1`]:I===void 0?{transform:W,label:V}:I,[`${_}2`]:L===void 0?{transform:J=>W(J).map(ee=>G.offset(ee)),label:V}:L})}function maybeIntervalMidK(_,T,R){const{[_]:P}=R,{value:O,interval:I}=maybeIntervalValue(P,R);return O==null||I==null?R:T({...R,[_]:{label:labelof(P),transform:L=>{const U=map(valueof(L,O),V=>I.floor(V)),G=U.map(V=>I.offset(V));return U.map(isTemporal(U)?(V,Z)=>V==null||isNaN(V=+V)||(Z=G[Z],Z==null)||isNaN(Z=+Z)?void 0:new Date((V+Z)/2):(V,Z)=>V==null||(Z=G[Z],Z==null)?NaN:(+V+ +Z)/2)}}})}function maybeIntervalX(_={}){return maybeIntervalK("x",maybeInsetX,_)}function maybeIntervalY(_={}){return maybeIntervalK("y",maybeInsetY,_)}function maybeIntervalMidX(_={}){return maybeIntervalMidK("x",maybeInsetX,_)}function maybeIntervalMidY(_={}){return maybeIntervalMidK("y",maybeInsetY,_)}const defaults$9={ariaLabel:"rule",fill:null,stroke:"currentColor"};class RuleX extends Mark{constructor(T,R={}){const{x:P,y1:O,y2:I,inset:L=0,insetTop:U=L,insetBottom:G=L}=R;super(T,{x:{value:P,scale:"x",optional:!0},y1:{value:O,scale:"y",optional:!0},y2:{value:I,scale:"y",optional:!0}},withTip(R,"x"),defaults$9),this.insetTop=number(U),this.insetBottom=number(G),markers(this,R)}render(T,R,P,O,I){const{x:L,y:U}=R,{x:G,y1:V,y2:Z}=P,{width:Y,height:W,marginTop:J,marginRight:ee,marginLeft:te,marginBottom:ie}=O,{insetTop:oe,insetBottom:ae}=this;return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyTransform,this,{x:G&&L},offset,0).call(ce=>ce.selectAll().data(T).enter().append("line").call(applyDirectStyles,this).attr("x1",G?le=>G[le]:(te+Y-ee)/2).attr("x2",G?le=>G[le]:(te+Y-ee)/2).attr("y1",V&&!isCollapsed(U)?le=>V[le]+oe:J+oe).attr("y2",Z&&!isCollapsed(U)?U.bandwidth?le=>Z[le]+U.bandwidth()-ae:le=>Z[le]-ae:W-ie-ae).call(applyChannelStyles,this,P).call(applyMarkers,this,P,I)).node()}}class RuleY extends Mark{constructor(T,R={}){const{x1:P,x2:O,y:I,inset:L=0,insetRight:U=L,insetLeft:G=L}=R;super(T,{y:{value:I,scale:"y",optional:!0},x1:{value:P,scale:"x",optional:!0},x2:{value:O,scale:"x",optional:!0}},withTip(R,"y"),defaults$9),this.insetRight=number(U),this.insetLeft=number(G),markers(this,R)}render(T,R,P,O,I){const{x:L,y:U}=R,{y:G,x1:V,x2:Z}=P,{width:Y,height:W,marginTop:J,marginRight:ee,marginLeft:te,marginBottom:ie}=O,{insetLeft:oe,insetRight:ae}=this;return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyTransform,this,{y:G&&U},0,offset).call(ce=>ce.selectAll().data(T).enter().append("line").call(applyDirectStyles,this).attr("x1",V&&!isCollapsed(L)?le=>V[le]+oe:te+oe).attr("x2",Z&&!isCollapsed(L)?L.bandwidth?le=>Z[le]+L.bandwidth()-ae:le=>Z[le]-ae:Y-ee-ae).attr("y1",G?le=>G[le]:(J+W-ie)/2).attr("y2",G?le=>G[le]:(J+W-ie)/2).call(applyChannelStyles,this,P).call(applyMarkers,this,P,I)).node()}}function ruleX(_,T){let{x:R=identity$2,y:P,y1:O,y2:I,...L}=maybeIntervalY(T);return[O,I]=maybeOptionalZero(P,O,I),new RuleX(_,{...L,x:R,y1:O,y2:I})}function ruleY(_,T){let{y:R=identity$2,x:P,x1:O,x2:I,...L}=maybeIntervalX(T);return[O,I]=maybeOptionalZero(P,O,I),new RuleY(_,{...L,y:R,x1:O,x2:I})}function maybeOptionalZero(_,T,R){if(_==null){if(T===void 0){if(R!==void 0)return[0,R]}else if(R===void 0)return[0,T]}else{if(T===void 0)return R===void 0?[0,_]:[_,R];if(R===void 0)return[_,T]}return[T,R]}function template(_,...T){let R=T.length;for(let P=0,O=!0;P<R;++P)typeof T[P]!="function"&&(O&&(_=_.slice(),O=!1),_.splice(P,2,_[P]+T[P]+_[P+1]),T.splice(P,1),--P,--R);return P=>{let O=_[0];for(let I=0;I<R;++I)O+=T[I](P)+_[I+1];return O}}const defaults$8={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},softHyphen="";class Text extends Mark{constructor(T,R={}){const{x:P,y:O,text:I=isIterable(T)&&isTextual(T)?identity$2:indexOf,frameAnchor:L,textAnchor:U=/right$/i.test(L)?"end":/left$/i.test(L)?"start":"middle",lineAnchor:G=/^top/i.test(L)?"top":/^bottom/i.test(L)?"bottom":"middle",lineHeight:V=1,lineWidth:Z=1/0,textOverflow:Y,monospace:W,fontFamily:J=W?"ui-monospace, monospace":void 0,fontSize:ee,fontStyle:te,fontVariant:ie,fontWeight:oe,rotate:ae}=R,[ce,le]=maybeNumberChannel(ae,0),[he,me]=maybeFontSizeChannel(ee);if(super(T,{x:{value:P,scale:"x",optional:!0},y:{value:O,scale:"y",optional:!0},fontSize:{value:he,optional:!0},rotate:{value:numberChannel(ce),optional:!0},text:{value:I,filter:nonempty,optional:!0}},R,defaults$8),this.rotate=le,this.textAnchor=impliedString(U,"middle"),this.lineAnchor=keyword(G,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+V,this.lineWidth=+Z,this.textOverflow=maybeTextOverflow(Y),this.monospace=!!W,this.fontFamily=string(J),this.fontSize=me,this.fontStyle=string(te),this.fontVariant=string(ie),this.fontWeight=string(oe),this.frameAnchor=maybeFrameAnchor(L),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${Z}`);this.splitLines=splitter(this),this.clipLine=clipper(this)}render(T,R,P,O,I){const{x:L,y:U}=R,{x:G,y:V,rotate:Z,text:Y,title:W,fontSize:J}=P,{rotate:ee}=this,[te,ie]=applyFrameAnchor(this,O);return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyIndirectTextStyles,this,Y,O).call(applyTransform,this,{x:G&&L,y:V&&U}).call(oe=>oe.selectAll().data(T).enter().append("text").call(applyDirectStyles,this).call(applyMultilineText,this,Y,W).attr("transform",template`translate(${G?ae=>G[ae]:te},${V?ae=>V[ae]:ie})${Z?ae=>` rotate(${Z[ae]})`:ee?` rotate(${ee})`:""}`).call(applyAttr,"font-size",J&&(ae=>J[ae])).call(applyChannelStyles,this,P)).node()}}function maybeTextOverflow(_){return _==null?null:keyword(_,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function applyMultilineText(_,T,R,P){if(!R)return;const{lineAnchor:O,lineHeight:I,textOverflow:L,splitLines:U,clipLine:G}=T;_.each(function(V){const Z=U(formatDefault(R[V])??"").map(G),Y=Z.length,W=O==="top"?.71:O==="bottom"?1-Y:(164-Y*100)/200;if(Y>1){let J=0;for(let ee=0;ee<Y;++ee){if(++J,!Z[ee])continue;const te=this.ownerDocument.createElementNS(namespaces.svg,"tspan");te.setAttribute("x",0),ee===J-1?te.setAttribute("y",`${(W+ee)*I}em`):te.setAttribute("dy",`${J*I}em`),te.textContent=Z[ee],this.appendChild(te),J=0}}else W&&this.setAttribute("y",`${W*I}em`),this.textContent=Z[0];if(L&&!P&&Z[0]!==R[V]){const J=this.ownerDocument.createElementNS(namespaces.svg,"title");J.textContent=R[V],this.appendChild(J)}})}function text(_,{x:T,y:R,...P}={}){return P.frameAnchor===void 0&&([T,R]=maybeTuple(T,R)),new Text(_,{...P,x:T,y:R})}function textX(_,{x:T=identity$2,...R}={}){return new Text(_,maybeIntervalMidY({...R,x:T}))}function textY(_,{y:T=identity$2,...R}={}){return new Text(_,maybeIntervalMidX({...R,y:T}))}function applyIndirectTextStyles(_,T,R){applyAttr(_,"text-anchor",T.textAnchor),applyAttr(_,"font-family",T.fontFamily),applyAttr(_,"font-size",T.fontSize),applyAttr(_,"font-style",T.fontStyle),applyAttr(_,"font-variant",T.fontVariant===void 0?inferFontVariant$1(R):T.fontVariant),applyAttr(_,"font-weight",T.fontWeight)}function inferFontVariant$1(_){return _&&(isNumeric(_)||isTemporal(_))?"tabular-nums":void 0}const fontSizes=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function maybeFontSizeChannel(_){return _==null||typeof _=="number"?[void 0,_]:typeof _!="string"?[_,void 0]:(_=_.trim().toLowerCase(),fontSizes.has(_)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(_)?[void 0,_]:[_,void 0])}function lineWrap(_,T,R){const P=[];let O,I=0;for(const[L,U,G]of lineBreaks(_)){if(O===void 0&&(O=L),I>O&&R(_,O,U)>T&&(P.push(_.slice(O,I)+(_[I-1]===softHyphen?"-":"")),O=L),G){P.push(_.slice(O,U)),O=void 0;continue}I=U}return P}function*lineBreaks(_){let T=0,R=0;const P=_.length;for(;R<P;){let O=1;switch(_[R]){case softHyphen:case"-":++R,yield[T,R,!1],T=R;break;case" ":for(yield[T,R,!1];_[++R]===" ";);T=R;break;case"\r":_[R+1]===`
`&&++O;case`
`:yield[T,R,!0],R+=O,T=R;break;default:++R;break}}yield[T,R,!0]}const defaultWidthMap={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function defaultWidth(_,T=0,R=_.length){let P=0;for(let O=T;O<R;O=readCharacter(_,O))P+=defaultWidthMap[_[O]]??(isPictographic(_,O)?120:defaultWidthMap.e);return P}function monospaceWidth(_,T=0,R=_.length){let P=0;for(let O=T;O<R;O=readCharacter(_,O))P+=isPictographic(_,O)?126:63;return P}function splitter({monospace:_,lineWidth:T,textOverflow:R}){if(R!=null||T==1/0)return I=>I.split(/\r\n?|\n/g);const P=_?monospaceWidth:defaultWidth,O=T*100;return I=>lineWrap(I,O,P)}function clipper({monospace:_,lineWidth:T,textOverflow:R}){if(R==null||T==1/0)return I=>I;const P=_?monospaceWidth:defaultWidth,O=T*100;switch(R){case"clip-start":return I=>clipStart(I,O,P,"");case"clip-end":return I=>clipEnd(I,O,P,"");case"ellipsis-start":return I=>clipStart(I,O,P,ellipsis);case"ellipsis-middle":return I=>clipMiddle(I,O,P,ellipsis);case"ellipsis-end":return I=>clipEnd(I,O,P,ellipsis)}}const ellipsis="";function cut(_,T,R,P){const O=[];let I=0;for(let L=0,U=0,G=_.length;L<G;L=U){U=readCharacter(_,L);const V=R(_,L,U);if(I+V>T){for(I+=P;I>T&&L>0;)U=L,L=O.pop(),I-=R(_,L,U);return[L,T-I]}I+=V,O.push(L)}return[-1,0]}function clipEnd(_,T,R,P){_=_.trim();const O=R(P),[I]=cut(_,T,R,O);return I<0?_:_.slice(0,I).trimEnd()+P}function clipMiddle(_,T,R,P){_=_.trim();const O=R(_);if(O<=T)return _;const I=R(P)/2,[L,U]=cut(_,T/2,R,I),[G]=cut(_,O-T/2-U+I,R,-I);return G<0?P:_.slice(0,L).trimEnd()+P+_.slice(readCharacter(_,G)).trimStart()}function clipStart(_,T,R,P){_=_.trim();const O=R(_);if(O<=T)return _;const I=R(P),[L]=cut(_,O-T+I,R,-I);return L<0?P:P+_.slice(readCharacter(_,L)).trimStart()}const reCombiner=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,rePictographic=new RegExp("\\p{Extended_Pictographic}","uy");function readCharacter(_,T){return T+=isSurrogatePair(_,T)?2:1,isCombiner(_,T)&&(T=reCombiner.lastIndex),isZeroWidthJoiner(_,T)?readCharacter(_,T+1):T}function isAscii(_,T){return _.charCodeAt(T)<128}function isSurrogatePair(_,T){const R=_.charCodeAt(T);if(R>=55296&&R<56320){const P=_.charCodeAt(T+1);return P>=56320&&P<57344}return!1}function isZeroWidthJoiner(_,T){return _.charCodeAt(T)===8205}function isCombiner(_,T){return isAscii(_,T)?!1:(reCombiner.lastIndex=T,reCombiner.test(_))}function isPictographic(_,T){return isAscii(_,T)?!1:(rePictographic.lastIndex=T,rePictographic.test(_))}const defaults$7={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},defaultRadius=3.5,wingRatio=defaultRadius*5,shapeArrow={draw(_,T,R){const P=T*R/wingRatio;_.moveTo(0,0),_.lineTo(0,-T),_.moveTo(-P,P-T),_.lineTo(0,-T),_.lineTo(P,P-T)}},shapeSpike={draw(_,T,R){_.moveTo(-R,0),_.lineTo(0,-T),_.lineTo(R,0)}},shapes=new Map([["arrow",shapeArrow],["spike",shapeSpike]]);function isShapeObject(_){return _&&typeof _.draw=="function"}function maybeShape(_){if(isShapeObject(_))return _;const T=shapes.get(`${_}`.toLowerCase());if(T)return T;throw new Error(`invalid shape: ${_}`)}class Vector extends Mark{constructor(T,R={}){const{x:P,y:O,r:I=defaultRadius,length:L,rotate:U,shape:G=shapeArrow,anchor:V="middle",frameAnchor:Z}=R,[Y,W]=maybeNumberChannel(L,12),[J,ee]=maybeNumberChannel(U,0);super(T,{x:{value:P,scale:"x",optional:!0},y:{value:O,scale:"y",optional:!0},length:{value:Y,scale:"length",optional:!0},rotate:{value:J,optional:!0}},R,defaults$7),this.r=+I,this.length=W,this.rotate=ee,this.shape=maybeShape(G),this.anchor=keyword(V,"anchor",["start","middle","end"]),this.frameAnchor=maybeFrameAnchor(Z)}render(T,R,P,O,I){const{x:L,y:U}=R,{x:G,y:V,length:Z,rotate:Y}=P,{length:W,rotate:J,anchor:ee,shape:te,r:ie}=this,[oe,ae]=applyFrameAnchor(this,O);return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyTransform,this,{x:G&&L,y:V&&U}).call(ce=>ce.selectAll().data(T).enter().append("path").call(applyDirectStyles,this).attr("transform",template`translate(${G?le=>G[le]:oe},${V?le=>V[le]:ae})${Y?le=>` rotate(${Y[le]})`:J?` rotate(${J})`:""}${ee==="start"?"":ee==="end"?Z?le=>` translate(0,${Z[le]})`:` translate(0,${W})`:Z?le=>` translate(0,${Z[le]/2})`:` translate(0,${W/2})`}`).attr("d",Z?le=>{const he=pathRound();return te.draw(he,Z[le],ie),he}:(()=>{const le=pathRound();return te.draw(le,W,ie),le})()).call(applyChannelStyles,this,P)).node()}}function vectorX(_,T={}){const{x:R=identity$2,...P}=T;return new Vector(_,{...P,x:R})}function vectorY(_,T={}){const{y:R=identity$2,...P}=T;return new Vector(_,{...P,y:R})}function maybeData(_,T){return arguments.length<2&&!isIterable(_)&&(T=_,_=null),T===void 0&&(T={}),[_,T]}function maybeAnchor({anchor:_}={},T){return _===void 0?T[0]:keyword(_,"anchor",T)}function anchorY(_){return maybeAnchor(_,["left","right"])}function anchorFy(_){return maybeAnchor(_,["right","left"])}function anchorX(_){return maybeAnchor(_,["bottom","top"])}function anchorFx(_){return maybeAnchor(_,["top","bottom"])}function axisY(){const[_,T]=maybeData(...arguments);return axisKy("y",anchorY(T),_,T)}function axisFy(){const[_,T]=maybeData(...arguments);return axisKy("fy",anchorFy(T),_,T)}function axisX(){const[_,T]=maybeData(...arguments);return axisKx("x",anchorX(T),_,T)}function axisFx(){const[_,T]=maybeData(...arguments);return axisKx("fx",anchorFx(T),_,T)}function axisKy(_,T,R,{color:P="currentColor",opacity:O=1,stroke:I=P,strokeOpacity:L=O,strokeWidth:U=1,fill:G=P,fillOpacity:V=O,textAnchor:Z,textStroke:Y,textStrokeOpacity:W,textStrokeWidth:J,tickSize:ee=_==="y"?6:0,tickPadding:te,tickRotate:ie,x:oe,margin:ae,marginTop:ce=ae===void 0?20:ae,marginRight:le=ae===void 0?T==="right"?40:0:ae,marginBottom:he=ae===void 0?20:ae,marginLeft:me=ae===void 0?T==="left"?40:0:ae,label:fe,labelAnchor:ue,labelArrow:pe,labelOffset:ge,ariaLabel:_e=`${_}-axis`,...we}){return ee=number(ee),te=number(te),ie=number(ie),ue!==void 0&&(ue=keyword(ue,"labelAnchor",["center","top","bottom"])),pe=maybeLabelArrow(pe),marks(ee&&!isNoneish(I)?axisTickKy(_,T,R,{stroke:I,strokeOpacity:L,strokeWidth:U,tickSize:ee,tickPadding:te,tickRotate:ie,x:oe,ariaLabel:_e,...we}):null,isNoneish(G)?null:axisTextKy(_,T,R,{fill:G,fillOpacity:V,stroke:Y,strokeOpacity:W,strokeWidth:J,textAnchor:Z,tickSize:ee,tickPadding:te,tickRotate:ie,x:oe,marginTop:ce,marginRight:le,marginBottom:he,marginLeft:me,ariaLabel:_e,...we}),!isNoneish(G)&&fe!==null?text([],labelOptions({fill:G,fillOpacity:V,...we},function(be,Ce,Ee,ye,Se){const Te=ye[_],{marginTop:Ae,marginRight:Be,marginBottom:ve,marginLeft:Re}=_==="y"&&Se.inset||Se,Me=ue??(Te.bandwidth?"center":"top"),ze=ge??(T==="right"?Be:Re)-3;return Me==="center"?(this.textAnchor=void 0,this.lineAnchor=T==="right"?"bottom":"top",this.frameAnchor=T,this.rotate=-90):(this.textAnchor=T==="right"?"end":"start",this.lineAnchor=Me,this.frameAnchor=`${Me}-${T}`,this.rotate=0),this.dy=Me==="top"?3-Ae:Me==="bottom"?ve-3:0,this.dx=T==="right"?ze:-ze,this.ariaLabel=`${_e} label`,{facets:[[0]],channels:{text:{value:[formatAxisLabel(_,Te,{anchor:T,label:fe,labelAnchor:Me,labelArrow:pe})]}}}})):null)}function axisKx(_,T,R,{color:P="currentColor",opacity:O=1,stroke:I=P,strokeOpacity:L=O,strokeWidth:U=1,fill:G=P,fillOpacity:V=O,textAnchor:Z,textStroke:Y,textStrokeOpacity:W,textStrokeWidth:J,tickSize:ee=_==="x"?6:0,tickPadding:te,tickRotate:ie,y:oe,margin:ae,marginTop:ce=ae===void 0?T==="top"?30:0:ae,marginRight:le=ae===void 0?20:ae,marginBottom:he=ae===void 0?T==="bottom"?30:0:ae,marginLeft:me=ae===void 0?20:ae,label:fe,labelAnchor:ue,labelArrow:pe,labelOffset:ge,ariaLabel:_e=`${_}-axis`,...we}){return ee=number(ee),te=number(te),ie=number(ie),ue!==void 0&&(ue=keyword(ue,"labelAnchor",["center","left","right"])),pe=maybeLabelArrow(pe),marks(ee&&!isNoneish(I)?axisTickKx(_,T,R,{stroke:I,strokeOpacity:L,strokeWidth:U,tickSize:ee,tickPadding:te,tickRotate:ie,y:oe,ariaLabel:_e,...we}):null,isNoneish(G)?null:axisTextKx(_,T,R,{fill:G,fillOpacity:V,stroke:Y,strokeOpacity:W,strokeWidth:J,textAnchor:Z,tickSize:ee,tickPadding:te,tickRotate:ie,y:oe,marginTop:ce,marginRight:le,marginBottom:he,marginLeft:me,ariaLabel:_e,...we}),!isNoneish(G)&&fe!==null?text([],labelOptions({fill:G,fillOpacity:V,...we},function(be,Ce,Ee,ye,Se){const Te=ye[_],{marginTop:Ae,marginRight:Be,marginBottom:ve,marginLeft:Re}=_==="x"&&Se.inset||Se,Me=ue??(Te.bandwidth?"center":"right"),ze=ge??(T==="top"?Ae:ve)-3;return Me==="center"?(this.frameAnchor=T,this.textAnchor=void 0):(this.frameAnchor=`${T}-${Me}`,this.textAnchor=Me==="right"?"end":"start"),this.lineAnchor=T,this.dy=T==="top"?-ze:ze,this.dx=Me==="right"?Be-3:Me==="left"?3-Re:0,this.ariaLabel=`${_e} label`,{facets:[[0]],channels:{text:{value:[formatAxisLabel(_,Te,{anchor:T,label:fe,labelAnchor:Me,labelArrow:pe})]}}}})):null)}function axisTickKy(_,T,R,{strokeWidth:P=1,strokeLinecap:O=null,strokeLinejoin:I=null,facetAnchor:L=T+(_==="y"?"-empty":""),frameAnchor:U=T,tickSize:G,inset:V=0,insetLeft:Z=V,insetRight:Y=V,dx:W=0,y:J=_==="y"?void 0:null,ariaLabel:ee,...te}){return axisMark(vectorY,_,R,{ariaLabel:`${ee} tick`,ariaHidden:!0},{strokeWidth:P,strokeLinecap:O,strokeLinejoin:I,facetAnchor:L,frameAnchor:U,y:J,...te,dx:T==="left"?+W-offset+ +Z:+W+offset-Y,anchor:"start",length:G,shape:T==="left"?shapeTickLeft:shapeTickRight})}function axisTickKx(_,T,R,{strokeWidth:P=1,strokeLinecap:O=null,strokeLinejoin:I=null,facetAnchor:L=T+(_==="x"?"-empty":""),frameAnchor:U=T,tickSize:G,inset:V=0,insetTop:Z=V,insetBottom:Y=V,dy:W=0,x:J=_==="x"?void 0:null,ariaLabel:ee,...te}){return axisMark(vectorX,_,R,{ariaLabel:`${ee} tick`,ariaHidden:!0},{strokeWidth:P,strokeLinejoin:I,strokeLinecap:O,facetAnchor:L,frameAnchor:U,x:J,...te,dy:T==="bottom"?+W-offset-Y:+W+offset+ +Z,anchor:"start",length:G,shape:T==="bottom"?shapeTickBottom:shapeTickTop})}function axisTextKy(_,T,R,{facetAnchor:P=T+(_==="y"?"-empty":""),frameAnchor:O=T,tickSize:I,tickRotate:L=0,tickPadding:U=Math.max(3,9-I)+(Math.abs(L)>60?4*Math.cos(L*radians):0),text:G,textAnchor:V=Math.abs(L)>60?"middle":T==="left"?"end":"start",lineAnchor:Z=L>60?"top":L<-60?"bottom":"middle",fontVariant:Y,inset:W=0,insetLeft:J=W,insetRight:ee=W,dx:te=0,ariaLabel:ie,y:oe=_==="y"?void 0:null,...ae}){return axisMark(textY,_,R,{ariaLabel:`${ie} tick label`},{facetAnchor:P,frameAnchor:O,text:G,textAnchor:V,lineAnchor:Z,fontVariant:Y,rotate:L,y:oe,...ae,dx:T==="left"?+te-I-U+ +J:+te+ +I+ +U-ee},function(ce,le,he,me,fe){Y===void 0&&(this.fontVariant=inferFontVariant(ce)),G===void 0&&(fe.text=inferTextChannel(ce,le,he,me,T))})}function axisTextKx(_,T,R,{facetAnchor:P=T+(_==="x"?"-empty":""),frameAnchor:O=T,tickSize:I,tickRotate:L=0,tickPadding:U=Math.max(3,9-I)+(Math.abs(L)>=10?4*Math.cos(L*radians):0),text:G,textAnchor:V=Math.abs(L)>=10?L<0^T==="bottom"?"start":"end":"middle",lineAnchor:Z=Math.abs(L)>=10?"middle":T==="bottom"?"top":"bottom",fontVariant:Y,inset:W=0,insetTop:J=W,insetBottom:ee=W,dy:te=0,x:ie=_==="x"?void 0:null,ariaLabel:oe,...ae}){return axisMark(textX,_,R,{ariaLabel:`${oe} tick label`},{facetAnchor:P,frameAnchor:O,text:G===void 0?null:G,textAnchor:V,lineAnchor:Z,fontVariant:Y,rotate:L,x:ie,...ae,dy:T==="bottom"?+te+ +I+ +U-ee:+te-I-U+ +J},function(ce,le,he,me,fe){Y===void 0&&(this.fontVariant=inferFontVariant(ce)),G===void 0&&(fe.text=inferTextChannel(ce,le,he,me,T))})}function gridY(){const[_,T]=maybeData(...arguments);return gridKy("y",anchorY(T),_,T)}function gridFy(){const[_,T]=maybeData(...arguments);return gridKy("fy",anchorFy(T),_,T)}function gridX(){const[_,T]=maybeData(...arguments);return gridKx("x",anchorX(T),_,T)}function gridFx(){const[_,T]=maybeData(...arguments);return gridKx("fx",anchorFx(T),_,T)}function gridKy(_,T,R,{y:P=_==="y"?void 0:null,x:O=null,x1:I=T==="left"?O:null,x2:L=T==="right"?O:null,ariaLabel:U=`${_}-grid`,ariaHidden:G=!0,...V}){return axisMark(ruleY,_,R,{ariaLabel:U,ariaHidden:G},{y:P,x1:I,x2:L,...gridDefaults(V)})}function gridKx(_,T,R,{x:P=_==="x"?void 0:null,y:O=null,y1:I=T==="top"?O:null,y2:L=T==="bottom"?O:null,ariaLabel:U=`${_}-grid`,ariaHidden:G=!0,...V}){return axisMark(ruleX,_,R,{ariaLabel:U,ariaHidden:G},{x:P,y1:I,y2:L,...gridDefaults(V)})}function gridDefaults({color:_="currentColor",opacity:T=.1,stroke:R=_,strokeOpacity:P=T,strokeWidth:O=1,...I}){return{stroke:R,strokeOpacity:P,strokeWidth:O,...I}}function labelOptions({fill:_,fillOpacity:T,fontFamily:R,fontSize:P,fontStyle:O,fontVariant:I,fontWeight:L,monospace:U,pointerEvents:G,shapeRendering:V,clip:Z=!1},Y){return[,_]=maybeColorChannel(_),[,T]=maybeNumberChannel(T),{facet:"super",x:null,y:null,fill:_,fillOpacity:T,fontFamily:R,fontSize:P,fontStyle:O,fontVariant:I,fontWeight:L,monospace:U,pointerEvents:G,shapeRendering:V,clip:Z,initializer:Y}}function axisMark(_,T,R,P,O,I){let L;function U(Z,Y,W,J,ee,te){const ie=Z==null&&(T==="fx"||T==="fy"),{[T]:oe}=J;if(!oe)throw new Error(`missing scale: ${T}`);const ae=oe.domain();let{interval:ce,ticks:le,tickFormat:he,tickSpacing:me=T==="x"?80:35}=O;if(typeof le=="string"&&hasTemporalDomain(oe)&&(ce=le,le=void 0),le===void 0&&(le=maybeRangeInterval(ce,oe.type)??inferTickCount(oe,me)),Z==null){if(isIterable(le))Z=arrayify(le);else if(isInterval(le))Z=inclusiveRange(le,...extent$1(ae));else if(oe.interval){let ue=oe.interval;if(oe.ticks){const[pe,ge]=extent$1(ae),_e=(ge-pe)/ue[intervalDuration];ue=generalizeTimeInterval(ue,_e/le)??ue,Z=inclusiveRange(ue,pe,ge)}else{Z=ae;const pe=Z.length;ue=generalizeTimeInterval(ue,pe/le)??ue,ue!==oe.interval&&(Z=inclusiveRange(ue,...extent$1(Z)))}if(ue===oe.interval){const pe=Math.round(Z.length/le);pe>1&&(Z=Z.filter((ge,_e)=>_e%pe===0))}}else oe.ticks?Z=oe.ticks(le):Z=ae;if(!oe.ticks&&Z.length&&Z!==ae){const ue=new InternSet(ae);Z=Z.filter(pe=>ue.has(pe)),Z.length||warn(`Warning: the ${T}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}T==="y"||T==="x"?Y=[range(Z)]:L[T]={scale:T,value:identity$2}}I?.call(this,oe,Z,le,he,L);const fe=Object.fromEntries(Object.entries(L).map(([ue,pe])=>[ue,{...pe,value:valueof(Z,pe.value)}]));return ie&&(Y=te.filterFacets(Z,fe)),{data:Z,facets:Y,channels:fe}}const G=initializer(O).initializer,V=_(R,initializer({...O,initializer:U},G));return R==null?(L=V.channels,V.channels={}):L={},P!==void 0&&Object.assign(V,P),V.clip===void 0&&(V.clip=!1),V}function inferTickCount(_,T){const[R,P]=extent$1(_.range());return(P-R)/T}function inferTextChannel(_,T,R,P,O){return{value:inferTickFormat(_,T,R,P,O)}}function inferTickFormat(_,T,R,P,O){return typeof P=="function"&&!(_.type==="log"&&_.tickFormat)?P:P===void 0&&T&&isTemporal(T)?inferTimeFormat(_.type,T,O)??formatDefault:_.tickFormat?_.tickFormat(typeof R=="number"?R:null,P):typeof P=="string"&&_.domain().length>0?(isTemporal(_.domain())?utcFormat:format$1)(P):P===void 0?formatDefault:constant$1(P)}function inclusiveRange(_,T,R){return _.range(T,_.offset(_.floor(R)))}const shapeTickBottom={draw(_,T){_.moveTo(0,0),_.lineTo(0,T)}},shapeTickTop={draw(_,T){_.moveTo(0,0),_.lineTo(0,-T)}},shapeTickLeft={draw(_,T){_.moveTo(0,0),_.lineTo(-T,0)}},shapeTickRight={draw(_,T){_.moveTo(0,0),_.lineTo(T,0)}};function inferFontVariant(_){return _.bandwidth&&!_.interval?void 0:"tabular-nums"}function formatAxisLabel(_,T,{anchor:R,label:P=T.label,labelAnchor:O,labelArrow:I}={}){if(!(P==null||P.inferred&&hasTemporalDomain(T)&&/^(date|time|year)$/i.test(P))){if(P=String(P),I==="auto"&&(I=(!T.bandwidth||T.interval)&&!/[]/.test(P)),!I)return P;if(I===!0){const L=inferScaleOrder(T);L&&(I=/x$/.test(_)||O==="center"?/x$/.test(_)===L<0?"left":"right":L<0?"up":"down")}switch(I){case"left":return` ${P}`;case"right":return`${P} `;case"up":return R==="right"?`${P} `:` ${P}`;case"down":return R==="right"?`${P} `:` ${P}`}return P}}function maybeLabelArrow(_="auto"){return isNoneish(_)?!1:typeof _=="boolean"?_:keyword(_,"labelArrow",["auto","up","right","down","left"])}function hasTemporalDomain(_){return isTemporal(_.domain())}function maybeScale(_,T){if(T==null)return T;const R=_(T);if(!R)throw new Error(`scale not found: ${T}`);return R}function legendSwatches(_,{opacity:T,...R}={}){if(!isOrdinalScale(_)&&!isThresholdScale(_))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${_.type})`);return legendItems(_,R,(P,O,I,L)=>P.append("svg").attr("width",I).attr("height",L).attr("fill",O.scale).attr("fill-opacity",maybeNumberChannel(T)[1]).append("rect").attr("width","100%").attr("height","100%"))}function legendSymbols(_,{fill:T=_.hint?.fill!==void 0?_.hint.fill:"none",fillOpacity:R=1,stroke:P=_.hint?.stroke!==void 0?_.hint.stroke:isNoneish(T)?"currentColor":"none",strokeOpacity:O=1,strokeWidth:I=1.5,r:L=4.5,...U}={},G){const[V,Z]=maybeColorChannel(T),[Y,W]=maybeColorChannel(P),J=maybeScale(G,V),ee=maybeScale(G,Y),te=L*L*Math.PI;return R=maybeNumberChannel(R)[1],O=maybeNumberChannel(O)[1],I=maybeNumberChannel(I)[1],legendItems(_,U,(ie,oe,ae,ce)=>ie.append("svg").attr("viewBox","-8 -8 16 16").attr("width",ae).attr("height",ce).attr("fill",V==="color"?le=>J.scale(le):Z).attr("fill-opacity",R).attr("stroke",Y==="color"?le=>ee.scale(le):W).attr("stroke-opacity",O).attr("stroke-width",I).append("path").attr("d",le=>{const he=pathRound();return _.scale(le).draw(he,te),he}))}function legendItems(_,T={},R){let{columns:P,tickFormat:O,fontVariant:I=inferFontVariant$2(_),swatchSize:L=15,swatchWidth:U=L,swatchHeight:G=L,marginLeft:V=0,className:Z,style:Y,width:W}=T;const J=createContext(T);Z=maybeClassName(Z),O=inferTickFormat(_.scale,_.domain,void 0,O);const ee=create("div",J).attr("class",`${Z}-swatches ${Z}-swatches-${P!=null?"columns":"wrap"}`);let te;return P!=null?(te=`:where(.${Z}-swatches-columns .${Z}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${Z}-swatches-columns .${Z}-swatch::before) {
  flex-shrink: 0;
}
:where(.${Z}-swatches-columns .${Z}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,ee.style("columns",P).selectAll().data(_.domain).enter().append("div").attr("class",`${Z}-swatch`).call(R,_,U,G).call(ie=>ie.append("div").attr("class",`${Z}-swatch-label`).attr("title",O).text(O))):(te=`:where(.${Z}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${Z}-swatches-wrap .${Z}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,ee.selectAll().data(_.domain).enter().append("span").attr("class",`${Z}-swatch`).call(R,_,U,G).append(function(){return this.ownerDocument.createTextNode(O.apply(this,arguments))})),ee.call(ie=>ie.insert("style","*").text(`:where(.${Z}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${Z}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${te}`)).style("margin-left",V?`${+V}px`:null).style("width",W===void 0?null:`${+W}px`).style("font-variant",impliedString(I,"normal")).call(applyInlineStyles,Y).node()}const legendRegistry=new Map([["symbol",legendSymbols],["color",legendColor],["opacity",legendOpacity]]);function exposeLegends(_,T,R={}){return(P,O)=>{if(!legendRegistry.has(P))throw new Error(`unknown legend type: ${P}`);if(P in _)return legendRegistry.get(P)(_[P],legendOptions(T,R[P],O),I=>_[I])}}function legendOptions({className:_,...T},{label:R,ticks:P,tickFormat:O}={},I){return inherit(I,{className:_,...T},{label:R,ticks:P,tickFormat:O})}function legendColor(_,{legend:T=!0,...R}){if(T===!0&&(T=_.type==="ordinal"?"swatches":"ramp"),_.domain!==void 0)switch(`${T}`.toLowerCase()){case"swatches":return legendSwatches(_,R);case"ramp":return legendRamp(_,R);default:throw new Error(`unknown legend type: ${T}`)}}function legendOpacity({type:_,interpolate:T,...R},{legend:P=!0,color:O=rgb(0,0,0),...I}){if(!T)throw new Error(`${_} opacity scales are not supported`);if(P===!0&&(P="ramp"),`${P}`.toLowerCase()!=="ramp")throw new Error(`${P} opacity legends are not supported`);return legendColor({type:_,...R,interpolate:interpolateOpacity(O)},{legend:P,...I})}function interpolateOpacity(_){const{r:T,g:R,b:P}=rgb(_)||rgb(0,0,0);return O=>`rgba(${T},${R},${P},${O})`}function createLegends(_,T,R){const P=[];for(const[O,I]of legendRegistry){const L=R[O];if(L?.legend&&O in _){const U=I(_[O],legendOptions(T,_[O],L),G=>_[G]);U!=null&&P.push(U)}}return P}function maybeIdentityY(_={},T="y"){return hasY(_)?_:{..._,[T]:identity$2}}function exclusiveFacets(_,T){if(T.length===1)return{data:_,facets:T};const R=lengthof(_),P=new Uint8Array(R);let O=0;for(const U of T)for(const G of U)P[G]&&++O,P[G]=1;if(O===0)return{data:_,facets:T};_=slice(_);const I=_[reindex]=new Uint32Array(R+O);T=T.map(U=>slice(U,Uint32Array));let L=R;P.fill(0);for(const U of T)for(let G=0,V=U.length;G<V;++G){const Z=U[G];P[Z]?(U[G]=L,_[L]=_[Z],I[L]=Z,++L):I[Z]=Z,P[Z]=1}return{data:_,facets:T}}function stackY(_={},T={}){arguments.length===1&&([_,T]=mergeOptions$1(_));const{x1:R,x:P=R,y:O,...I}=T,[L,U,G,V]=stack(P,O,"x","y",_,I);return{...L,x1:R,x:U,y1:G,y2:V,y:mid(G,V)}}function maybeStackY({y:_,y1:T,y2:R,...P}={}){return P=withTip(P,"x"),T===void 0&&R===void 0?stackY({y:_,...P}):([T,R]=maybeZero(_,T,R),{...P,y1:T,y2:R})}function mergeOptions$1(_){const{offset:T,order:R,reverse:P,...O}=_;return[{offset:T,order:R,reverse:P},O]}const lengthy={length:!0};function stack(_,T=one,R,P,{offset:O,order:I,reverse:L},U){if(T===null)throw new Error(`stack requires ${P}`);const G=maybeZ(U),[V,Z]=maybeColumn(_),[Y,W]=column(T),[J,ee]=column(T);return Y.hint=J.hint=lengthy,O=maybeOffset(O),I=maybeOrder(I,O,P),[basic(U,(te,ie,oe)=>{({data:te,facets:ie}=exclusiveFacets(te,ie));const ae=_==null?void 0:Z(maybeApplyInterval(valueof(te,_),oe?.[R])),ce=valueof(te,T,Float64Array),le=valueof(te,G),he=I&&I(te,ae,ce,le),me=lengthof(te),fe=W(new Float64Array(me)),ue=ee(new Float64Array(me)),pe=[];for(const ge of ie){const _e=ae?Array.from(group(ge,we=>ae[we]).values()):[ge];if(he)for(const we of _e)we.sort(he);for(const we of _e){let be=0,Ce=0;L&&we.reverse();for(const Ee of we){const ye=ce[Ee];ye<0?be=ue[Ee]=(fe[Ee]=be)+ye:ye>0?Ce=ue[Ee]=(fe[Ee]=Ce)+ye:ue[Ee]=fe[Ee]=Ce}}pe.push(_e)}return O&&O(pe,fe,ue,le),{data:te,facets:ie}}),V,Y,J]}function maybeOffset(_){if(_!=null){if(typeof _=="function")return _;switch(`${_}`.toLowerCase()){case"expand":case"normalize":return offsetExpand;case"center":case"silhouette":return offsetCenter;case"wiggle":return offsetWiggle}throw new Error(`unknown offset: ${_}`)}}function extent(_,T){let R=0,P=0;for(const O of _){const I=T[O];I<R&&(R=I),I>P&&(P=I)}return[R,P]}function offsetExpand(_,T,R){for(const P of _)for(const O of P){const[I,L]=extent(O,R);for(const U of O){const G=1/(L-I||1);T[U]=G*(T[U]-I),R[U]=G*(R[U]-I)}}}function offsetCenter(_,T,R){for(const P of _){for(const O of P){const[I,L]=extent(O,R);for(const U of O){const G=(L+I)/2;T[U]-=G,R[U]-=G}}offsetZero(P,T,R)}offsetCenterFacets(_,T,R)}function offsetWiggle(_,T,R,P){for(const O of _){const I=new InternMap;let L=0;for(const U of O){let G=-1;const V=U.map(J=>Math.abs(R[J]-T[J])),Z=U.map(J=>{G=P?P[J]:++G;const ee=R[J]-T[J],te=I.has(G)?ee-I.get(G):0;return I.set(G,ee),te}),Y=[0,...cumsum(Z)];for(const J of U)T[J]+=L,R[J]+=L;const W=sum(V);W&&(L-=sum(V,(J,ee)=>(Z[ee]/2+Y[ee])*J)/W)}offsetZero(O,T,R)}offsetCenterFacets(_,T,R)}function offsetZero(_,T,R){const P=min$1(_,O=>min$1(O,I=>T[I]));for(const O of _)for(const I of O)T[I]-=P,R[I]-=P}function offsetCenterFacets(_,T,R){const P=_.length;if(P===1)return;const O=_.map(U=>U.flat()),I=O.map(U=>(min$1(U,G=>T[G])+max(U,G=>R[G]))/2),L=min$1(I);for(let U=0;U<P;U++){const G=L-I[U];for(const V of O[U])T[V]+=G,R[V]+=G}}function maybeOrder(_,T,R){if(_===void 0&&T===offsetWiggle)return orderInsideOut(ascendingDefined);if(_!=null){if(typeof _=="string"){const P=_.startsWith("-"),O=P?descendingDefined:ascendingDefined;switch((P?_.slice(1):_).toLowerCase()){case"value":case R:return orderY(O);case"z":return orderZ(O);case"sum":return orderSum(O);case"appearance":return orderAppearance(O);case"inside-out":return orderInsideOut(O)}return orderAccessor(field(_))}if(typeof _=="function")return(_.length===1?orderAccessor:orderComparator)(_);if(isArray$1(_))return orderGiven(_);throw new Error(`invalid order: ${_}`)}}function orderY(_){return(T,R,P)=>(O,I)=>_(P[O],P[I])}function orderZ(_){return(T,R,P,O)=>(I,L)=>_(O[I],O[L])}function orderSum(_){return orderZDomain(_,(T,R,P,O)=>groupSort(range(T),I=>sum(I,L=>P[L]),I=>O[I]))}function orderAppearance(_){return orderZDomain(_,(T,R,P,O)=>groupSort(range(T),I=>R[greatest(I,L=>P[L])],I=>O[I]))}function orderInsideOut(_){return orderZDomain(_,(T,R,P,O)=>{const I=range(T),L=groupSort(I,Y=>R[greatest(Y,W=>P[W])],Y=>O[Y]),U=rollup(I,Y=>sum(Y,W=>P[W]),Y=>O[Y]),G=[],V=[];let Z=0;for(const Y of L)Z<0?(Z+=U.get(Y),G.push(Y)):(Z-=U.get(Y),V.push(Y));return V.reverse().concat(G)})}function orderAccessor(_){return T=>{const R=valueof(T,_);return(P,O)=>ascendingDefined(R[P],R[O])}}function orderComparator(_){return T=>isArray$1(T)?(R,P)=>_(T[R],T[P]):(R,P)=>_(T.get(R),T.get(P))}function orderGiven(_){return orderZDomain(ascendingDefined,()=>_)}function orderZDomain(_,T){return(R,P,O,I)=>{if(!I)throw new Error("missing channel: z");const L=new InternMap(T(R,P,O,I).map((U,G)=>[U,G]));return(U,G)=>_(L.get(I[U]),L.get(I[G]))}}function rectInsets(_,{inset:T=0,insetTop:R=T,insetRight:P=T,insetBottom:O=T,insetLeft:I=T}={}){_.insetTop=number(R),_.insetRight=number(P),_.insetBottom=number(O),_.insetLeft=number(I)}function rectRadii(_,{r:T,rx:R,ry:P,rx1:O=T,ry1:I=T,rx2:L=T,ry2:U=T,rx1y1:G=O!==void 0?+O:I!==void 0?+I:0,rx1y2:V=O!==void 0?+O:U!==void 0?+U:0,rx2y1:Z=L!==void 0?+L:I!==void 0?+I:0,rx2y2:Y=L!==void 0?+L:U!==void 0?+U:0}={}){G||V||Z||Y?(_.rx1y1=G,_.rx1y2=V,_.rx2y1=Z,_.rx2y2=Y):(_.rx=impliedString(R,"auto"),_.ry=impliedString(P,"auto"))}function applyRoundedRect(_,T,R,P,O,I){const{rx1y1:L,rx1y2:U,rx2y1:G,rx2y2:V}=I;typeof T!="function"&&(T=constant$1(T)),typeof R!="function"&&(R=constant$1(R)),typeof P!="function"&&(P=constant$1(P)),typeof O!="function"&&(O=constant$1(O));const Z=Math.max(Math.abs(L+G),Math.abs(U+V)),Y=Math.max(Math.abs(L+U),Math.abs(G+V));_.attr("d",W=>{const J=T(W),ee=R(W),te=P(W),ie=O(W),oe=J>te,ae=ee>ie,ce=oe?te:J,le=oe?J:te,he=ae?ie:ee,me=ae?ee:ie,fe=Math.min(1,(le-ce)/Z,(me-he)/Y),ue=fe*(oe?ae?V:G:ae?U:L),pe=fe*(oe?ae?U:L:ae?V:G),ge=fe*(oe?ae?L:U:ae?G:V),_e=fe*(oe?ae?G:V:ae?L:U);return`M${ce},${he+biasY(ue,_e)}A${ue},${ue} 0 0 ${ue<0?0:1} ${ce+biasX(ue,_e)},${he}H${le-biasX(pe,ge)}A${pe},${pe} 0 0 ${pe<0?0:1} ${le},${he+biasY(pe,ge)}V${me-biasY(ge,pe)}A${ge},${ge} 0 0 ${ge<0?0:1} ${le-biasX(ge,pe)},${me}H${ce+biasX(_e,ue)}A${_e},${_e} 0 0 ${_e<0?0:1} ${ce},${me-biasY(_e,ue)}Z`})}function biasX(_,T){return T<0?_:Math.abs(_)}function biasY(_,T){return T<0?Math.abs(_):_}const defaults$6={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},lineDefaults={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class Frame extends Mark{constructor(T={}){const{anchor:R=null}=T;super(singleton,void 0,T,R==null?defaults$6:lineDefaults),this.anchor=maybeKeyword(R,"anchor",["top","right","bottom","left"]),rectInsets(this,T),R||rectRadii(this,T)}render(T,R,P,O,I){const{marginTop:L,marginRight:U,marginBottom:G,marginLeft:V,width:Z,height:Y}=O,{anchor:W,insetTop:J,insetRight:ee,insetBottom:te,insetLeft:ie}=this,{rx:oe,ry:ae,rx1y1:ce,rx1y2:le,rx2y1:he,rx2y2:me}=this,fe=V+ie,ue=Z-U-ee,pe=L+J,ge=Y-G-te;return create(W?"svg:line":ce||le||he||me?"svg:path":"svg:rect",I).datum(0).call(applyIndirectStyles,this,O,I).call(applyDirectStyles,this).call(applyChannelStyles,this,P).call(applyTransform,this,{}).call(W==="left"?_e=>_e.attr("x1",fe).attr("x2",fe).attr("y1",pe).attr("y2",ge):W==="right"?_e=>_e.attr("x1",ue).attr("x2",ue).attr("y1",pe).attr("y2",ge):W==="top"?_e=>_e.attr("x1",fe).attr("x2",ue).attr("y1",pe).attr("y2",pe):W==="bottom"?_e=>_e.attr("x1",fe).attr("x2",ue).attr("y1",ge).attr("y2",ge):ce||le||he||me?_e=>_e.call(applyRoundedRect,fe,pe,ue,ge,this):_e=>_e.attr("x",fe).attr("y",pe).attr("width",ue-fe).attr("height",ge-pe).attr("rx",oe).attr("ry",ae)).node()}}function frame(_){return new Frame(_)}const defaults$5={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},ignoreChannels=new Set(["geometry","href","src","ariaLabel","scales"]);class Tip extends Mark{constructor(T,R={}){R.tip&&(R={...R,tip:!1}),R.title===void 0&&isIterable(T)&&isTextual(T)&&(R={...R,title:identity$2});const{x:P,y:O,x1:I,x2:L,y1:U,y2:G,anchor:V,preferredAnchor:Z="bottom",monospace:Y,fontFamily:W=Y?"ui-monospace, monospace":void 0,fontSize:J,fontStyle:ee,fontVariant:te,fontWeight:ie,lineHeight:oe=1,lineWidth:ae=20,frameAnchor:ce,format:le,textAnchor:he="start",textOverflow:me,textPadding:fe=8,title:ue,pointerSize:pe=12,pathFilter:ge="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=R;super(T,{x:{value:I!=null&&L!=null?null:P,scale:"x",optional:!0},y:{value:U!=null&&G!=null?null:O,scale:"y",optional:!0},x1:{value:I,scale:"x",optional:L==null},y1:{value:U,scale:"y",optional:G==null},x2:{value:L,scale:"x",optional:I==null},y2:{value:G,scale:"y",optional:U==null},title:{value:ue,optional:!0}},R,defaults$5),this.anchor=maybeAnchor$1(V,"anchor"),this.preferredAnchor=maybeAnchor$1(Z,"preferredAnchor"),this.frameAnchor=maybeFrameAnchor(ce),this.textAnchor=impliedString(he,"middle"),this.textPadding=+fe,this.pointerSize=+pe,this.pathFilter=string(ge),this.lineHeight=+oe,this.lineWidth=+ae,this.textOverflow=maybeTextOverflow(me),this.monospace=!!Y,this.fontFamily=string(W),this.fontSize=number(J),this.fontStyle=string(ee),this.fontVariant=string(te),this.fontWeight=string(ie);for(const _e in defaults$5)_e in this.channels&&(this[_e]=defaults$5[_e]);this.splitLines=splitter(this),this.clipLine=clipper(this),this.format=typeof le=="string"||typeof le=="function"?{title:le}:{...le}}render(T,R,P,O,I){const L=this,{x:U,y:G,fx:V,fy:Z}=R,{ownerSVGElement:Y,document:W}=I,{anchor:J,monospace:ee,lineHeight:te,lineWidth:ie}=this,{textPadding:oe,pointerSize:ae,pathFilter:ce}=this,{marginTop:le,marginLeft:he}=O,{x1:me,y1:fe,x2:ue,y2:pe,x:ge=me??ue,y:_e=fe??pe}=P,we=V?V(T.fx)-he:0,be=Z?Z(T.fy)-le:0,[Ce,Ee]=applyFrameAnchor(this,O),ye=anchorX$1(P,Ce),Se=anchorY$1(P,Ee),Te=ee?monospaceWidth:defaultWidth,Ae=Te(ellipsis);let Be,ve;"title"in P?(Be=getSourceChannels.call(this,{title:P.channels.title},R),ve=formatTitle):(Be=getSourceChannels.call(this,P.channels,R),ve=formatChannels);const Re=create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyIndirectTextStyles,this).call(applyTransform,this,{x:ge&&U,y:_e&&G}).call(qe=>qe.selectAll().data(T).enter().append("g").attr("transform",We=>`translate(${Math.round(ye(We))},${Math.round(Se(We))})`).call(applyDirectStyles,this).call(We=>We.append("path").attr("filter",ce)).call(We=>We.append("text").each(function(Oe){const Ve=select(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const ke=ve.call(L,Oe,T,Be,R,P);if(typeof ke=="string")for(const Fe of L.splitLines(ke))Me(Ve,{value:L.clipLine(Fe)});else{const Fe=new Set;for(const He of ke){const{label:Pe=""}=He;Pe&&Fe.has(Pe)||(Fe.add(Pe),Me(Ve,He))}}})));function Me(qe,{label:We,value:Oe,color:Ve,opacity:ke}){We??="",Oe??="";const Fe=Ve!=null||ke!=null;let He,Pe=ie*100;const[Je]=cut(We,Pe,Te,Ae);if(Je>=0)We=We.slice(0,Je).trimEnd()+ellipsis,He=Oe.trim(),Oe="";else{(We||!Oe&&!Fe)&&(Oe=" "+Oe);const[Ze]=cut(Oe,Pe-Te(We),Te,Ae);Ze>=0&&(He=Oe.trim(),Oe=Oe.slice(0,Ze).trimEnd()+ellipsis)}const Ke=qe.append("tspan").attr("x",0).attr("dy",`${te}em`).text("");We&&Ke.append("tspan").attr("font-weight","bold").text(We),Oe&&Ke.append(()=>W.createTextNode(Oe)),Fe&&Ke.append("tspan").text(" ").attr("fill",Ve).attr("fill-opacity",ke).style("user-select","none"),He&&Ke.append("title").text(He)}function ze(){const{width:qe,height:We}=O.facet??O;Re.selectChildren().each(function(Oe){let{x:Ve,width:ke,height:Fe}=this.getBBox();ke=Math.round(ke),Fe=Math.round(Fe);let He=J;if(He===void 0){const Ke=ye(Oe)+we,Ze=Se(Oe)+be,Qe=Ke+ke+ae+oe*2<qe,at=Ke-ke-ae-oe*2>0,et=Ze+Fe+ae+oe*2<We,ct=Ze-Fe-ae-oe*2>0;He=Qe&&at?et&&ct?L.preferredAnchor:ct?"bottom":"top":et&&ct?Qe?"left":"right":(Qe||at)&&(et||ct)?`${ct?"bottom":"top"}-${Qe?"left":"right"}`:L.preferredAnchor}const Pe=this.firstChild,Je=this.lastChild;if(Pe.setAttribute("d",getPath(He,ae,oe,ke,Fe)),Ve)for(const Ke of Je.childNodes)Ke.setAttribute("x",-Ve);Je.setAttribute("y",`${+getLineOffset(He,Je.childNodes.length,te).toFixed(6)}em`),Je.setAttribute("transform",`translate(${getTextTranslate(He,ae,oe,ke,Fe)})`)}),Re.attr("visibility",null)}return T.length&&(Re.attr("visibility","hidden"),Y.isConnected?Promise.resolve().then(ze):typeof requestAnimationFrame<"u"&&requestAnimationFrame(ze)),Re.node()}}function tip(_,{x:T,y:R,...P}={}){return P.frameAnchor===void 0&&([T,R]=maybeTuple(T,R)),new Tip(_,{...P,x:T,y:R})}function getLineOffset(_,T,R){return/^top(?:-|$)/.test(_)?.94-R:-.29-T*R}function getTextTranslate(_,T,R,P,O){switch(_){case"middle":return[-P/2,O/2];case"top-left":return[R,T+R];case"top":return[-P/2,T/2+R];case"top-right":return[-P-R,T+R];case"right":return[-T/2-P-R,O/2];case"bottom-left":return[R,-T-R];case"bottom":return[-P/2,-T/2-R];case"bottom-right":return[-P-R,-T-R];case"left":return[R+T/2,O/2]}}function getPath(_,T,R,P,O){const I=P+R*2,L=O+R*2;switch(_){case"middle":return`M${-I/2},${-L/2}h${I}v${L}h${-I}z`;case"top-left":return`M0,0l${T},${T}h${I-T}v${L}h${-I}z`;case"top":return`M0,0l${T/2},${T/2}h${(I-T)/2}v${L}h${-I}v${-L}h${(I-T)/2}z`;case"top-right":return`M0,0l${-T},${T}h${T-I}v${L}h${I}z`;case"right":return`M0,0l${-T/2},${-T/2}v${T/2-L/2}h${-I}v${L}h${I}v${T/2-L/2}z`;case"bottom-left":return`M0,0l${T},${-T}h${I-T}v${-L}h${-I}z`;case"bottom":return`M0,0l${T/2},${-T/2}h${(I-T)/2}v${-L}h${-I}v${L}h${(I-T)/2}z`;case"bottom-right":return`M0,0l${-T},${-T}h${T-I}v${-L}h${I}z`;case"left":return`M0,0l${T/2},${-T/2}v${T/2-L/2}h${I}v${L}h${-I}v${T/2-L/2}z`}}function getSourceChannels(_,T){const R={};let P=this.format;P=maybeExpandPairedFormat(P,_,"x"),P=maybeExpandPairedFormat(P,_,"y"),this.format=P;for(const O in P){const I=P[O];if(!(I===null||I===!1))if(O==="fx"||O==="fy")R[O]=!0;else{const L=getSource(_,O);L&&(R[O]=L)}}for(const O in _){if(O in R||O in P||ignoreChannels.has(O)||(O==="x"||O==="y")&&_.geometry)continue;const I=getSource(_,O);if(I){if(I.scale==null&&I.defaultScale==="color")continue;R[O]=I}}this.facet&&(T.fx&&!("fx"in P)&&(R.fx=!0),T.fy&&!("fy"in P)&&(R.fy=!0));for(const O in R){const I=this.format[O];if(typeof I=="string"){const L=R[O]?.value??T[O]?.domain()??[];this.format[O]=(isTemporal(L)?utcFormat:format$1)(I)}else if(I===void 0||I===!0){const L=T[O];this.format[O]=L?.bandwidth?inferTickFormat(L,L.domain()):formatDefault}}return R}function maybeExpandPairedFormat(_,T,R){if(!(R in _))return _;const P=`${R}1`,O=`${R}2`;if((P in _||!(P in T))&&(O in _||!(O in T)))return _;const I=Object.entries(_),L=_[R];return I.splice(I.findIndex(([U])=>U===R)+1,0,[P,L],[O,L]),Object.fromEntries(I)}function formatTitle(_,T,{title:R}){return this.format.title(R.value[_],_)}function*formatChannels(_,T,R,P,O){for(const I in R){if(I==="fx"||I==="fy"){yield{label:formatLabel(P,R,I),value:this.format[I](T[I],_)};continue}if(I==="x1"&&"x2"in R||I==="y1"&&"y2"in R)continue;const L=R[I];if(I==="x2"&&"x1"in R)yield{label:formatPairLabel(P,R,"x"),value:formatPair(this.format.x2,R.x1,L,_)};else if(I==="y2"&&"y1"in R)yield{label:formatPairLabel(P,R,"y"),value:formatPair(this.format.y2,R.y1,L,_)};else{const U=L.value[_],G=L.scale;if(!defined(U)&&G==null)continue;yield{label:formatLabel(P,R,I),value:this.format[I](U,_),color:G==="color"?O[I][_]:null,opacity:G==="opacity"?O[I][_]:null}}}}function formatPair(_,T,R,P){return R.hint?.length?`${_(R.value[P]-T.value[P],P)}`:`${_(T.value[P],P)}${_(R.value[P],P)}`}function formatPairLabel(_,T,R){const P=formatLabel(_,T,`${R}1`,R),O=formatLabel(_,T,`${R}2`,R);return P===O?P:`${P}${O}`}function formatLabel(_,T,R,P=R){const O=T[R],I=_[O?.scale??R];return String(I?.label??O?.label??P)}function plot(_={}){const{facet:T,style:R,title:P,subtitle:O,caption:I,ariaLabel:L,ariaDescription:U}=_,G=maybeClassName(_.className),V=_.marks===void 0?[]:flatMarks(_.marks);V.push(...inferTips(V));const Z=maybeTopFacet(T,_),Y=new Map;for(const Ae of V){const Be=maybeMarkFacet(Ae,Z,_);Be&&Y.set(Ae,Be)}const W=new Map;Z&&addScaleChannels(W,[Z],_),addScaleChannels(W,Y,_);const J=flatMarks(inferAxes(V,W,_));for(const Ae of J){const Be=maybeMarkFacet(Ae,Z,_);Be&&Y.set(Ae,Be)}V.unshift(...J);let ee=createFacets(W,_);if(ee!==void 0){const Ae=Z?facetFilter(ee,Z):void 0;for(const ve of V){if(ve.facet===null||ve.facet==="super")continue;const Re=Y.get(ve);Re!==void 0&&(Re.facetsIndex=ve.fx!=null||ve.fy!=null?facetFilter(ee,Re):Ae)}const Be=new Set;for(const{facetsIndex:ve}of Y.values())ve?.forEach((Re,Me)=>{Re?.length>0&&Be.add(Me)});ee.forEach(0<Be.size&&Be.size<ee.length?(ve,Re)=>ve.empty=!Be.has(Re):ve=>ve.empty=!1);for(const ve of V)if(ve.facet==="exclude"){const Re=Y.get(ve);Re!==void 0&&(Re.facetsIndex=facetExclude(Re.facetsIndex))}}for(const Ae of registry.keys())isScaleOptions(_[Ae])&&Ae!=="fx"&&Ae!=="fy"&&W.set(Ae,[]);const te=new Map;for(const Ae of V){if(te.has(Ae))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:Be,channels:ve}=Y.get(Ae)??{},{data:Re,facets:Me,channels:ze}=Ae.initialize(Be,ve,_);applyScaleTransforms(ze,_),te.set(Ae,{data:Re,facets:Me,channels:ze})}const ie=createScales(addScaleChannels(W,te,_),_),oe=createDimensions(ie,V,_);autoScaleRange(ie,oe);const ae=createScaleFunctions(ie),{fx:ce,fy:le}=ae,he=ce||le?innerDimensions(ie,oe):oe,me=ce||le?actualDimensions(ae,oe):oe,fe=createContext(_),ue=fe.document,pe=creator("svg").call(ue.documentElement);let ge=pe;fe.ownerSVGElement=pe,fe.className=G,fe.projection=createProjection(_,he),fe.path=function(){return geoPath(this.projection??xyProjection(ae))},fe.filterFacets=(Ae,Be)=>facetFilter(ee,{channels:Be,groups:facetGroups(Ae,Be)}),fe.getMarkState=Ae=>{const Be=te.get(Ae),ve=Y.get(Ae);return{...Be,channels:{...Be.channels,...ve?.channels}}},fe.dispatchValue=Ae=>{ge.value!==Ae&&(ge.value=Ae,ge.dispatchEvent(new fe.document.defaultView.Event("input",{bubbles:!0})))};const _e=new Set;for(const[Ae,Be]of te)if(Ae.initializer!=null){const ve=Ae.facet==="super"?me:he,Re=Ae.initializer(Be.data,Be.facets,Be.channels,ae,ve,fe);if(Re.data!==void 0&&(Be.data=Re.data),Re.facets!==void 0&&(Be.facets=Re.facets),Re.channels!==void 0){const{fx:Me,fy:ze,...qe}=Re.channels;inferChannelScales(qe),Object.assign(Be.channels,qe);for(const We of Object.values(qe)){const{scale:Oe}=We;Oe!=null&&!isPosition(registry.get(Oe))&&(applyScaleTransform(We,_),_e.add(Oe))}(Me!=null||ze!=null)&&Y.set(Ae,!0)}}if(_e.size){const Ae=new Map;addScaleChannels(Ae,te,_,Me=>_e.has(Me)),addScaleChannels(W,te,_,Me=>_e.has(Me));const Be=inheritScaleLabels(createScales(Ae,_),ie),{scales:ve,...Re}=createScaleFunctions(Be);Object.assign(ie,Be),Object.assign(ae,Re),Object.assign(ae.scales,ve)}let we,be;ee!==void 0&&(we={x:ce?.domain(),y:le?.domain()},ee=recreateFacets(ee,we),be=facetTranslator(ce,le,oe));for(const[Ae,Be]of te)Be.values=Ae.scale(Be.channels,ae,fe);const{width:Ce,height:Ee}=oe;select(pe).attr("class",G).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",Ce).attr("height",Ee).attr("viewBox",`0 0 ${Ce} ${Ee}`).attr("aria-label",L).attr("aria-description",U).call(Ae=>Ae.append("style").text(`:where(.${G}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${G} text),
:where(.${G} tspan) {
  white-space: pre;
}`)).call(applyInlineStyles,R);for(const Ae of V){const{channels:Be,values:ve,facets:Re}=te.get(Ae);if(ee===void 0||Ae.facet==="super"){let Me=null;if(Re&&(Me=Re[0],Me=Ae.filter(Me,Be,ve),Me.length===0))continue;const ze=Ae.render(Me,ae,ve,me,fe);if(ze==null)continue;pe.appendChild(ze)}else{let Me;for(const ze of ee){if(!(Ae.facetAnchor?.(ee,we,ze)??!ze.empty))continue;let qe=null;if(Re){const Oe=Y.has(Ae);if(qe=Re[Oe?ze.i:0],qe=Ae.filter(qe,Be,ve),qe.length===0)continue;!Oe&&qe===Re[0]&&(qe=subarray(qe)),qe.fx=ze.x,qe.fy=ze.y,qe.fi=ze.i}const We=Ae.render(qe,ae,ve,he,fe);if(We!=null){(Me??=select(pe).append("g")).append(()=>We).datum(ze);for(const Oe of["aria-label","aria-description","aria-hidden","transform"])We.hasAttribute(Oe)&&(Me.attr(Oe,We.getAttribute(Oe)),We.removeAttribute(Oe))}}Me?.selectChildren().each(be)}}const ye=createLegends(ie,fe,_),{figure:Se=P!=null||O!=null||I!=null||ye.length>0}=_;Se&&(ge=ue.createElement("figure"),ge.className=`${G}-figure`,ge.style.maxWidth="initial",P!=null&&ge.append(createTitleElement(ue,P,"h2")),O!=null&&ge.append(createTitleElement(ue,O,"h3")),ge.append(...ye,pe),I!=null&&ge.append(createFigcaption(ue,I)),"value"in pe&&(ge.value=pe.value,delete pe.value)),ge.scale=exposeScales(ae.scales),ge.legend=exposeLegends(ie,fe,_);const Te=consumeWarnings();return Te>0&&select(pe).append("text").attr("x",Ce).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${Te.toLocaleString("en-US")} warning${Te===1?"":"s"}. Please check the console.`),ge}function createTitleElement(_,T,R){if(T.ownerDocument)return T;const P=_.createElement(R);return P.append(T),P}function createFigcaption(_,T){const R=_.createElement("figcaption");return R.append(T),R}function flatMarks(_){return _.flat(1/0).filter(T=>T!=null).map(markify)}function markify(_){return typeof _.render=="function"?_:new Render(_)}class Render extends Mark{constructor(T){if(typeof T!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=T}render(){}}function applyScaleTransforms(_,T){for(const R in _)applyScaleTransform(_[R],T);return _}function applyScaleTransform(_,T){const{scale:R,transform:P=!0}=_;if(R==null||!P)return;const{type:O,percent:I,interval:L,transform:U=I?G=>G==null?NaN:G*100:maybeIntervalTransform(L,O)}=T[R]??{};U!=null&&(_.value=map(_.value,U),_.transform=!1)}function inferChannelScales(_){for(const T in _)inferChannelScale(T,_[T])}function addScaleChannels(_,T,R,P=yes){for(const{channels:O}of T.values())for(const I in O){const L=O[I],{scale:U}=L;if(U!=null&&P(U))if(U==="projection"){if(!hasProjection(R)){const G=R.x?.domain===void 0,V=R.y?.domain===void 0;if(G||V){const[Z,Y]=getGeometryChannels(L);G&&addScaleChannel(_,"x",Z),V&&addScaleChannel(_,"y",Y)}}}else addScaleChannel(_,U,L)}return _}function addScaleChannel(_,T,R){const P=_.get(T);P!==void 0?P.push(R):_.set(T,[R])}function maybeTopFacet(_,T){if(_==null)return;const{x:R,y:P}=_;if(R==null&&P==null)return;const O=dataify(_.data);if(O==null)throw new Error("missing facet data");const I={};R!=null&&(I.fx=createChannel(O,{value:R,scale:"fx"})),P!=null&&(I.fy=createChannel(O,{value:P,scale:"fy"})),applyScaleTransforms(I,T);const L=facetGroups(O,I);return{channels:I,groups:L,data:_.data}}function maybeMarkFacet(_,T,R){if(_.facet===null||_.facet==="super")return;const{fx:P,fy:O}=_;if(P!=null||O!=null){const G=dataify(_.data??P??O);if(G===void 0)throw new Error(`missing facet data in ${_.ariaLabel}`);if(G===null)return;const V={};return P!=null&&(V.fx=createChannel(G,{value:P,scale:"fx"})),O!=null&&(V.fy=createChannel(G,{value:O,scale:"fy"})),applyScaleTransforms(V,R),{channels:V,groups:facetGroups(G,V)}}if(T===void 0)return;const{channels:I,groups:L,data:U}=T;if(_.facet!=="auto"||_.data===U)return{channels:I,groups:L};U.length>0&&(L.size>1||L.size===1&&I.fx&&I.fy&&[...L][0][1].size>1)&&lengthof(dataify(_.data))===lengthof(U)&&warn(`Warning: the ${_.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function derive(_,T={}){return initializer({...T,x:null,y:null},(R,P,O,I,L,U)=>U.getMarkState(_))}function inferTips(_){const T=[];for(const R of _){let P=R.tip;if(P){P===!0?P={}:typeof P=="string"&&(P={pointer:P});let{pointer:O,preferredAnchor:I}=P;O=/^x$/i.test(O)?pointerX:/^y$/i.test(O)?pointerY:pointer,P=O(derive(R,P)),P.title=null,I===void 0&&(P.preferredAnchor=O===pointerY?"left":"bottom");const L=tip(R.data,P);L.facet=R.facet,L.facetAnchor=R.facetAnchor,T.push(L)}}return T}function inferAxes(_,T,R){let{projection:P,x:O={},y:I={},fx:L={},fy:U={},axis:G,grid:V,facet:Z={},facet:{axis:Y=G,grid:W}=Z,x:{axis:J=G,grid:ee=J===null?null:V}=O,y:{axis:te=G,grid:ie=te===null?null:V}=I,fx:{axis:oe=Y,grid:ae=oe===null?null:W}=L,fy:{axis:ce=Y,grid:le=ce===null?null:W}=U}=R;(P||!isScaleOptions(O)&&!hasPositionChannel("x",_))&&(J=ee=null),(P||!isScaleOptions(I)&&!hasPositionChannel("y",_))&&(te=ie=null),T.has("fx")||(oe=ae=null),T.has("fy")||(ce=le=null),J===void 0&&(J=!hasAxis(_,"x")),te===void 0&&(te=!hasAxis(_,"y")),oe===void 0&&(oe=!hasAxis(_,"fx")),ce===void 0&&(ce=!hasAxis(_,"fy")),J===!0&&(J="bottom"),te===!0&&(te="left"),oe===!0&&(oe=J==="top"||J===null?"bottom":"top"),ce===!0&&(ce=te==="right"||te===null?"left":"right");const he=[];return maybeGrid(he,le,gridFy,U),maybeAxis(he,ce,axisFy,"right","left",Z,U),maybeGrid(he,ae,gridFx,L),maybeAxis(he,oe,axisFx,"top","bottom",Z,L),maybeGrid(he,ie,gridY,I),maybeAxis(he,te,axisY,"left","right",R,I),maybeGrid(he,ee,gridX,O),maybeAxis(he,J,axisX,"bottom","top",R,O),he}function maybeAxis(_,T,R,P,O,I,L){if(!T)return;const U=isBoth(T);L=axisOptions(U?P:T,I,L);const{line:G}=L;(R===axisY||R===axisX)&&G&&!isNone(G)&&_.push(frame(lineOptions(L))),_.push(R(L)),U&&_.push(R({...L,anchor:O,label:null}))}function maybeGrid(_,T,R,P){!T||isNone(T)||_.push(R(gridOptions(T,P)))}function isBoth(_){return/^\s*both\s*$/i.test(_)}function axisOptions(_,T,{line:R=T.line,ticks:P,tickSize:O,tickSpacing:I,tickPadding:L,tickFormat:U,tickRotate:G,fontVariant:V,ariaLabel:Z,ariaDescription:Y,label:W=T.label,labelAnchor:J,labelArrow:ee=T.labelArrow,labelOffset:te}){return{anchor:_,line:R,ticks:P,tickSize:O,tickSpacing:I,tickPadding:L,tickFormat:U,tickRotate:G,fontVariant:V,ariaLabel:Z,ariaDescription:Y,label:W,labelAnchor:J,labelArrow:ee,labelOffset:te}}function lineOptions(_){const{anchor:T,line:R}=_;return{anchor:T,facetAnchor:T+"-empty",stroke:R===!0?void 0:R}}function gridOptions(_,{stroke:T=isColor(_)?_:void 0,ticks:R=isGridTicks(_)?_:void 0,tickSpacing:P,ariaLabel:O,ariaDescription:I}){return{stroke:T,ticks:R,tickSpacing:P,ariaLabel:O,ariaDescription:I}}function isGridTicks(_){switch(typeof _){case"number":return!0;case"string":return!isColor(_)}return isIterable(_)||typeof _?.range=="function"}function hasAxis(_,T){const R=`${T}-axis `;return _.some(P=>P.ariaLabel?.startsWith(R))}function hasPositionChannel(_,T){for(const R of T)for(const P in R.channels){const{scale:O}=R.channels[P];if(O===_||O==="projection")return!0}return!1}function inheritScaleLabels(_,T){for(const R in _){const P=_[R],O=T[R];P.label===void 0&&O&&(P.label=O.label)}return _}function actualDimensions({fx:_,fy:T},R){const{marginTop:P,marginRight:O,marginBottom:I,marginLeft:L,width:U,height:G}=outerDimensions(R),V=_&&outerRange(_),Z=T&&outerRange(T);return{marginTop:T?Z[0]:P,marginRight:_?U-V[1]:O,marginBottom:T?G-Z[1]:I,marginLeft:_?V[0]:L,inset:{marginTop:R.marginTop,marginRight:R.marginRight,marginBottom:R.marginBottom,marginLeft:R.marginLeft},width:U,height:G}}function outerRange(_){const T=_.domain();if(T.length===0)return[0,_.bandwidth()];let R=_(T[0]),P=_(T[T.length-1]);return P<R&&([R,P]=[P,R]),[R,P+_.bandwidth()]}const curves=new Map([["basis",curveBasis],["basis-closed",curveBasisClosed],["basis-open",curveBasisOpen],["bundle",curveBundle],["bump-x",bumpX],["bump-y",bumpY],["cardinal",curveCardinal],["cardinal-closed",curveCardinalClosed],["cardinal-open",curveCardinalOpen],["catmull-rom",curveCatmullRom],["catmull-rom-closed",curveCatmullRomClosed],["catmull-rom-open",curveCatmullRomOpen],["linear",curveLinear],["linear-closed",curveLinearClosed],["monotone-x",monotoneX],["monotone-y",monotoneY],["natural",curveNatural],["step",curveStep],["step-after",stepAfter],["step-before",stepBefore]]);function maybeCurve(_=curveLinear,T){if(typeof _=="function")return _;const R=curves.get(`${_}`.toLowerCase());if(!R)throw new Error(`unknown curve: ${_}`);if(T!==void 0){if("beta"in R)return R.beta(T);if("tension"in R)return R.tension(T);if("alpha"in R)return R.alpha(T)}return R}function maybeCurveAuto(_=curveAuto,T){return typeof _!="function"&&`${_}`.toLowerCase()==="auto"?curveAuto:maybeCurve(_,T)}function curveAuto(_){return curveLinear(_)}function binX(_={y:"count"},T={}){[_,T]=mergeOptions(_,T);const{x:R,y:P}=T;return binn(maybeBinValue(R,T,identity$2),null,null,P,_,maybeInsetX(T))}function maybeDenseInterval(_,T,R={}){if(R?.interval==null)return R;const{reduce:P=reduceFirst}=R,O={filter:null};return R[T]!=null&&(O[T]=P),R[`${T}1`]!=null&&(O[`${T}1`]=P),R[`${T}2`]!=null&&(O[`${T}2`]=P),_(O,R)}function maybeDenseIntervalX(_={}){return maybeDenseInterval(binX,"y",withTip(_,"x"))}function binn(_,T,R,P,{data:O=reduceIdentity,filter:I=reduceCount,sort:L,reverse:U,...G}={},V={}){_=maybeBin(_),T=maybeBin(T),G=maybeBinOutputs(G,V),O=maybeBinReduce(O,identity$2),L=L==null?void 0:maybeBinOutput("sort",L,V),I=I==null?void 0:maybeBinEvaluator("filter",I,V),P!=null&&hasOutput(G,"y","y1","y2")&&(P=null);const[Z,Y]=maybeColumn(_),[W,J]=maybeColumn(_),[ee,te]=maybeColumn(T),[ie,oe]=maybeColumn(T),[ae,ce]=P!=null?[P,"y"]:[],[le,he]=maybeColumn(ae),{x:me,y:fe,z:ue,fill:pe,stroke:ge,x1:_e,x2:we,y1:be,y2:Ce,domain:Ee,cumulative:ye,thresholds:Se,interval:Te,...Ae}=V,[Be,ve]=maybeColumn(ue),[Re]=maybeColorChannel(pe),[Me]=maybeColorChannel(ge),[ze,qe]=maybeColumn(Re),[We,Oe]=maybeColumn(Me);return{..."z"in V&&{z:Be||ue},..."fill"in V&&{fill:ze||pe},..."stroke"in V&&{stroke:We||ge},...basic(Ae,(Ve,ke,Fe)=>{const He=maybeApplyInterval(valueof(Ve,ae),Fe?.[ce]),Pe=valueof(Ve,ue),Je=valueof(Ve,Re),Ke=valueof(Ve,Me),Ze=maybeSubgroup(G,{z:Pe,fill:Je,stroke:Ke}),Qe=[],at=[],et=He&&he([]),ct=Pe&&ve([]),Dt=Je&&qe([]),gt=Ke&&Oe([]),wt=_&&Y([]),Nt=_&&J([]),st=T&&te([]),vt=T&&oe([]),yt=bing(_,T,Ve);let kt=0;for(const Pt of G)Pt.initialize(Ve);L&&L.initialize(Ve),I&&I.initialize(Ve);for(const Pt of ke){const wn=[];for(const tn of G)tn.scope("facet",Pt);L&&L.scope("facet",Pt),I&&I.scope("facet",Pt);for(const[tn,En]of maybeGroup(Pt,Ze))for(const[an,nn]of maybeGroup(En,He))for(const[$t,qt]of yt(nn))if(Ze&&(qt.z=tn),!(I&&!I.reduce($t,qt))){wn.push(kt++),at.push(O.reduceIndex($t,Ve,qt)),He&&et.push(an),Pe&&ct.push(Ze===Pe?tn:Pe[($t.length>0?$t:nn)[0]]),Je&&Dt.push(Ze===Je?tn:Je[($t.length>0?$t:nn)[0]]),Ke&&gt.push(Ze===Ke?tn:Ke[($t.length>0?$t:nn)[0]]),wt&&(wt.push(qt.x1),Nt.push(qt.x2)),st&&(st.push(qt.y1),vt.push(qt.y2));for(const rn of G)rn.reduce($t,qt);L&&L.reduce($t,qt)}Qe.push(wn)}return maybeSort(Qe,L,U),{data:at,facets:Qe}}),...!hasOutput(G,"x")&&(Z?{x1:Z,x2:W,x:mid(Z,W)}:{x:me,x1:_e,x2:we}),...!hasOutput(G,"y")&&(ee?{y1:ee,y2:ie,y:mid(ee,ie)}:{y:fe,y1:be,y2:Ce}),...le&&{[ce]:le},...Object.fromEntries(G.map(({name:Ve,output:ke})=>[Ve,ke]))}}function mergeOptions({cumulative:_,domain:T,thresholds:R,interval:P,...O},I){return[O,{cumulative:_,domain:T,thresholds:R,interval:P,...I}]}function maybeBinValue(_,{cumulative:T,domain:R,thresholds:P,interval:O},I){return _={...maybeValue(_)},_.domain===void 0&&(_.domain=R),_.cumulative===void 0&&(_.cumulative=T),_.thresholds===void 0&&(_.thresholds=P),_.interval===void 0&&(_.interval=O),_.value===void 0&&(_.value=I),_.thresholds=maybeThresholds(_.thresholds,_.interval),_}function maybeBin(_){if(_==null)return;const{value:T,cumulative:R,domain:P=extent$1,thresholds:O}=_,I=L=>{let U=valueof(L,T),G;if(isTemporal(U)||isTimeThresholds(O)){U=map(U,coerceDate,Float64Array);let[Z,Y]=typeof P=="function"?P(U):P,W=typeof O=="function"&&!isInterval(O)?O(U,Z,Y):O;typeof W=="number"&&(W=utcTickInterval(Z,Y,W)),isInterval(W)&&(P===extent$1&&(Z=W.floor(Z),Y=W.offset(W.floor(Y))),W=W.range(Z,W.offset(Y))),G=W}else{U=coerceNumbers(U);let[Z,Y]=typeof P=="function"?P(U):P,W=typeof O=="function"&&!isInterval(O)?O(U,Z,Y):O;if(typeof W=="number")if(P===extent$1){let J=tickIncrement(Z,Y,W);if(isFinite(J))if(J>0){let ee=Math.round(Z/J),te=Math.round(Y/J);ee*J<=Z||--ee,te*J>Y||++te;let ie=te-ee+1;W=new Float64Array(ie);for(let oe=0;oe<ie;++oe)W[oe]=(ee+oe)*J}else if(J<0){J=-J;let ee=Math.round(Z*J),te=Math.round(Y*J);ee/J<=Z||--ee,te/J>Y||++te;let ie=te-ee+1;W=new Float64Array(ie);for(let oe=0;oe<ie;++oe)W[oe]=(ee+oe)/J}else W=[Z];else W=[Z]}else W=ticks(Z,Y,W);else isInterval(W)&&(P===extent$1&&(Z=W.floor(Z),Y=W.offset(W.floor(Y))),W=W.range(Z,W.offset(Y)));G=W}const V=[];if(G.length===1)V.push([G[0],G[0]]);else for(let Z=1;Z<G.length;++Z)V.push([G[Z-1],G[Z]]);return V.bin=(R<0?bin1cn:R>0?bin1cp:bin1)(V,G,U),V};return I.label=labelof(T),I}function maybeThresholds(_,T,R=thresholdAuto){if(_===void 0)return T===void 0?R:maybeRangeInterval(T);if(typeof _=="string"){switch(_.toLowerCase()){case"freedman-diaconis":return thresholdFreedmanDiaconis;case"scott":return thresholdScott;case"sturges":return thresholdSturges;case"auto":return thresholdAuto}return utcInterval(_)}return _}function maybeBinOutputs(_,T){return maybeOutputs(_,T,maybeBinOutput)}function maybeBinOutput(_,T,R){return maybeOutput(_,T,R,maybeBinEvaluator)}function maybeBinEvaluator(_,T,R){return maybeEvaluator(_,T,R,maybeBinReduce)}function maybeBinReduce(_,T){return maybeReduce(_,T,maybeBinReduceFallback)}function maybeBinReduceFallback(_){switch(`${_}`.toLowerCase()){case"x":return reduceX;case"x1":return reduceX1;case"x2":return reduceX2;case"y":return reduceY;case"y1":return reduceY1;case"y2":return reduceY2;case"z":return reduceZ}throw new Error(`invalid bin reduce: ${_}`)}function thresholdAuto(_,T,R){return Math.min(200,thresholdScott(_,T,R))}function isTimeThresholds(_){return isTimeInterval(_)||isIterable(_)&&isTemporal(_)}function bing(_,T,R){const P=_?.(R),O=T?.(R);return P&&O?function*(I){const L=P.bin(I);for(const[U,[G,V]]of P.entries()){const Z=O.bin(L[U]);for(const[Y,[W,J]]of O.entries())yield[Z[Y],{data:R,x1:G,y1:W,x2:V,y2:J}]}}:P?function*(I){const L=P.bin(I);for(const[U,[G,V]]of P.entries())yield[L[U],{data:R,x1:G,x2:V}]}:function*(I){const L=O.bin(I);for(const[U,[G,V]]of O.entries())yield[L[U],{data:R,y1:G,y2:V}]}}function bin1(_,T,R){return T=coerceNumbers(T),P=>{const O=_.map(()=>[]);for(const I of P)O[bisectRight(T,R[I])-1]?.push(I);return O}}function bin1cp(_,T,R){const P=bin1(_,T,R);return O=>{const I=P(O);for(let L=1,U=I.length;L<U;++L){const G=I[L-1],V=I[L];for(const Z of G)V.push(Z)}return I}}function bin1cn(_,T,R){const P=bin1(_,T,R);return O=>{const I=P(O);for(let L=I.length-2;L>=0;--L){const U=I[L+1],G=I[L];for(const V of U)G.push(V)}return I}}function mid1(_,T){const R=(+_+ +T)/2;return _ instanceof Date?new Date(R):R}const reduceX={reduceIndex(_,T,{x1:R,x2:P}){return mid1(R,P)}},reduceY={reduceIndex(_,T,{y1:R,y2:P}){return mid1(R,P)}},reduceX1={reduceIndex(_,T,{x1:R}){return R}},reduceX2={reduceIndex(_,T,{x2:R}){return R}},reduceY1={reduceIndex(_,T,{y1:R}){return R}},reduceY2={reduceIndex(_,T,{y2:R}){return R}},defaults$4={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Area extends Mark{constructor(T,R={}){const{x1:P,y1:O,x2:I,y2:L,z:U,curve:G,tension:V}=R;super(T,{x1:{value:P,scale:"x"},y1:{value:O,scale:"y"},x2:{value:I,scale:"x",optional:!0},y2:{value:L,scale:"y",optional:!0},z:{value:maybeZ(R),optional:!0}},R,defaults$4),this.z=U,this.curve=maybeCurve(G,V)}filter(T){return T}render(T,R,P,O,I){const{x1:L,y1:U,x2:G=L,y2:V=U}=P;return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyTransform,this,R,0,0).call(Z=>Z.selectAll().data(groupIndex(T,[L,U,G,V],this,P)).enter().append("path").call(applyDirectStyles,this).call(applyGroupedChannelStyles,this,P).attr("d",shapeArea().curve(this.curve).defined(Y=>Y>=0).x0(Y=>L[Y]).y0(Y=>U[Y]).x1(Y=>G[Y]).y1(Y=>V[Y]))).node()}}function areaY(_,T){const{x:R=indexOf,...P}=maybeDenseIntervalX(T);return new Area(_,maybeStackY(maybeIdentityY({...P,x1:R,x2:void 0},R===indexOf?"y2":"y")))}const defaults$3={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Link extends Mark{constructor(T,R={}){const{x1:P,y1:O,x2:I,y2:L,curve:U,tension:G}=R;super(T,{x1:{value:P,scale:"x"},y1:{value:O,scale:"y"},x2:{value:I,scale:"x",optional:!0},y2:{value:L,scale:"y",optional:!0}},R,defaults$3),this.curve=maybeCurveAuto(U,G),markers(this,R)}project(T,R,P){this.curve!==curveAuto&&super.project(T,R,P)}render(T,R,P,O,I){const{x1:L,y1:U,x2:G=L,y2:V=U}=P,{curve:Z}=this;return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyTransform,this,R).call(Y=>Y.selectAll().data(T).enter().append("path").call(applyDirectStyles,this).attr("d",Z===curveAuto&&I.projection?sphereLink(I.path(),L,U,G,V):W=>{const J=pathRound(),ee=Z(J);return ee.lineStart(),ee.point(L[W],U[W]),ee.point(G[W],V[W]),ee.lineEnd(),J}).call(applyChannelStyles,this,P).call(applyMarkers,this,P,I)).node()}}function sphereLink(_,T,R,P,O){return T=coerceNumbers(T),R=coerceNumbers(R),P=coerceNumbers(P),O=coerceNumbers(O),I=>_({type:"LineString",coordinates:[[T[I],R[I]],[P[I],O[I]]]})}function link(_,{x:T,x1:R,x2:P,y:O,y1:I,y2:L,...U}={}){return[R,P]=maybeSameValue(T,R,P),[I,L]=maybeSameValue(O,I,L),new Link(_,{...U,x1:R,x2:P,y1:I,y2:L})}function maybeSameValue(_,T,R){if(_===void 0){if(T===void 0){if(R!==void 0)return[R]}else if(R===void 0)return[T]}else{if(T===void 0)return R===void 0?[_]:[_,R];if(R===void 0)return[_,T]}return[T,R]}const barDefaults={ariaLabel:"bar"};class AbstractBar extends Mark{constructor(T,R,P={},O=barDefaults){super(T,R,P,O),rectInsets(this,P),rectRadii(this,P)}render(T,R,P,O,I){const{rx:L,ry:U,rx1y1:G,rx1y2:V,rx2y1:Z,rx2y2:Y}=this,W=this._x(R,P,O),J=this._y(R,P,O),ee=this._width(R,P,O),te=this._height(R,P,O);return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(this._transform,this,R).call(ie=>ie.selectAll().data(T).enter().call(G||V||Z||Y?oe=>oe.append("path").call(applyDirectStyles,this).call(applyRoundedRect,W,J,add(W,ee),add(J,te),this).call(applyChannelStyles,this,P):oe=>oe.append("rect").call(applyDirectStyles,this).attr("x",W).attr("width",ee).attr("y",J).attr("height",te).call(applyAttr,"rx",L).call(applyAttr,"ry",U).call(applyChannelStyles,this,P))).node()}_x(T,{x:R},{marginLeft:P}){const{insetLeft:O}=this;return R?I=>R[I]+O:P+O}_y(T,{y:R},{marginTop:P}){const{insetTop:O}=this;return R?I=>R[I]+O:P+O}_width({x:T},{x:R},{marginRight:P,marginLeft:O,width:I}){const{insetLeft:L,insetRight:U}=this,G=R&&T?T.bandwidth():I-P-O;return Math.max(0,G-L-U)}_height({y:T},{y:R},{marginTop:P,marginBottom:O,height:I}){const{insetTop:L,insetBottom:U}=this,G=R&&T?T.bandwidth():I-P-O;return Math.max(0,G-L-U)}}function add(_,T){return typeof _=="function"&&typeof T=="function"?R=>_(R)+T(R):typeof _=="function"?R=>_(R)+T:typeof T=="function"?R=>_+T(R):_+T}class BarY extends AbstractBar{constructor(T,R={},P){const{x:O,y1:I,y2:L}=R;super(T,{y1:{value:I,scale:"y"},y2:{value:L,scale:"y"},x:{value:O,scale:"x",type:"band",optional:!0}},R,P)}_transform(T,R,{y:P}){T.call(applyTransform,R,{y:P},0,0)}_y({y:T},{y1:R,y2:P},{marginTop:O}){const{insetTop:I}=this;return isCollapsed(T)?O+I:L=>Math.min(R[L],P[L])+I}_height({y:T},{y1:R,y2:P},{marginTop:O,marginBottom:I,height:L}){const{insetTop:U,insetBottom:G}=this;return isCollapsed(T)?L-O-I-U-G:V=>Math.max(0,Math.abs(P[V]-R[V])-U-G)}}function barY(_,T={}){return hasXY(T)||(T={...T,x:indexOf,y2:identity$2}),new BarY(_,maybeStackY(maybeIntervalY(maybeIdentityY(T))))}const defaults$2={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function withDefaultSort(_){return _.sort===void 0&&_.reverse===void 0?sort({channel:"-r"},_):_}class Dot extends Mark{constructor(T,R={}){const{x:P,y:O,r:I,rotate:L,symbol:U=symbolCircle,frameAnchor:G}=R,[V,Z]=maybeNumberChannel(L,0),[Y,W]=maybeSymbolChannel(U),[J,ee]=maybeNumberChannel(I,Y==null?3:4.5);super(T,{x:{value:P,scale:"x",optional:!0},y:{value:O,scale:"y",optional:!0},r:{value:J,scale:"r",filter:positive,optional:!0},rotate:{value:V,optional:!0},symbol:{value:Y,scale:"auto",optional:!0}},withDefaultSort(R),defaults$2),this.r=ee,this.rotate=Z,this.symbol=W,this.frameAnchor=maybeFrameAnchor(G);const{channels:te}=this,{symbol:ie}=te;if(ie){const{fill:oe,stroke:ae}=te;ie.hint={fill:oe?oe.value===ie.value?"color":"currentColor":this.fill??"currentColor",stroke:ae?ae.value===ie.value?"color":"currentColor":this.stroke??"none"}}}render(T,R,P,O,I){const{x:L,y:U}=R,{x:G,y:V,r:Z,rotate:Y,symbol:W}=P,{r:J,rotate:ee,symbol:te}=this,[ie,oe]=applyFrameAnchor(this,O),ae=te===symbolCircle,ce=Z?void 0:J*J*Math.PI;return negative(J)&&(T=[]),create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyTransform,this,{x:G&&L,y:V&&U}).call(le=>le.selectAll().data(T).enter().append(ae?"circle":"path").call(applyDirectStyles,this).call(ae?he=>{he.attr("cx",G?me=>G[me]:ie).attr("cy",V?me=>V[me]:oe).attr("r",Z?me=>Z[me]:J)}:he=>{he.attr("transform",template`translate(${G?me=>G[me]:ie},${V?me=>V[me]:oe})${Y?me=>` rotate(${Y[me]})`:ee?` rotate(${ee})`:""}`).attr("d",Z&&W?me=>{const fe=pathRound();return W[me].draw(fe,Z[me]*Z[me]*Math.PI),fe}:Z?me=>{const fe=pathRound();return te.draw(fe,Z[me]*Z[me]*Math.PI),fe}:W?me=>{const fe=pathRound();return W[me].draw(fe,ce),fe}:(()=>{const me=pathRound();return te.draw(me,ce),me})())}).call(applyChannelStyles,this,P)).node()}}function dot(_,{x:T,y:R,...P}={}){return P.frameAnchor===void 0&&([T,R]=maybeTuple(T,R)),new Dot(_,{...P,x:T,y:R})}const defaults$1={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Line extends Mark{constructor(T,R={}){const{x:P,y:O,z:I,curve:L,tension:U}=R;super(T,{x:{value:P,scale:"x"},y:{value:O,scale:"y"},z:{value:maybeZ(R),optional:!0}},R,defaults$1),this.z=I,this.curve=maybeCurveAuto(L,U),markers(this,R)}filter(T){return T}project(T,R,P){this.curve!==curveAuto&&super.project(T,R,P)}render(T,R,P,O,I){const{x:L,y:U}=P,{curve:G}=this;return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(applyTransform,this,R).call(V=>V.selectAll().data(groupIndex(T,[L,U],this,P)).enter().append("path").call(applyDirectStyles,this).call(applyGroupedChannelStyles,this,P).call(applyGroupedMarkers,this,P,I).attr("d",G===curveAuto&&I.projection?sphereLine(I.path(),L,U):shapeLine().curve(G).defined(Z=>Z>=0).x(Z=>L[Z]).y(Z=>U[Z]))).node()}}function sphereLine(_,T,R){return T=coerceNumbers(T),R=coerceNumbers(R),P=>{let O=[];const I=[O];for(const L of P)L===-1?(O=[],I.push(O)):O.push([T[L],R[L]]);return _({type:"MultiLineString",coordinates:I})}}function line(_,{x:T,y:R,...P}={}){return[T,R]=maybeTuple(T,R),new Line(_,{...P,x:T,y:R})}const defaults={ariaLabel:"tick",fill:null,stroke:"currentColor"};class AbstractTick extends Mark{constructor(T,R,P){super(T,R,P,defaults),markers(this,P)}render(T,R,P,O,I){return create("svg:g",I).call(applyIndirectStyles,this,O,I).call(this._transform,this,R).call(L=>L.selectAll().data(T).enter().append("line").call(applyDirectStyles,this).attr("x1",this._x1(R,P,O)).attr("x2",this._x2(R,P,O)).attr("y1",this._y1(R,P,O)).attr("y2",this._y2(R,P,O)).call(applyChannelStyles,this,P).call(applyMarkers,this,P,I)).node()}}class TickX extends AbstractTick{constructor(T,R={}){const{x:P,y:O,inset:I=0,insetTop:L=I,insetBottom:U=I}=R;super(T,{x:{value:P,scale:"x"},y:{value:O,scale:"y",type:"band",optional:!0}},R),this.insetTop=number(L),this.insetBottom=number(U)}_transform(T,R,{x:P}){T.call(applyTransform,R,{x:P},offset,0)}_x1(T,{x:R}){return P=>R[P]}_x2(T,{x:R}){return P=>R[P]}_y1({y:T},{y:R},{marginTop:P}){const{insetTop:O}=this;return R&&T?I=>R[I]+O:P+O}_y2({y:T},{y:R},{height:P,marginBottom:O}){const{insetBottom:I}=this;return R&&T?L=>R[L]+T.bandwidth()-I:P-O-I}}function tickX(_,{x:T=identity$2,...R}={}){return new TickX(_,{...R,x:T})}Mark.prototype.plot=function({marks:_=[],...T}={}){return plot({...T,marks:[..._,this]})};function BatchPlot({data:_,dataWithCI:T,histogramData:R,xAxisLabel:P="Time (h)",yAxisLabel:O,plotType:I,width:L=640,height:U=400}){const G=reactExports.useRef(null);return reactExports.useEffect(()=>{if(!G.current||I==="line"&&_.length===0||I==="line_ci"&&(!T||T.length===0)||I==="histogram"&&(!R||R.length===0))return;let V,Z={legend:!0},Y={label:P},W={label:O};I==="histogram"&&R?(V=[barY(R,{x:"group",y:"mean",fill:"group"}),link(R.flatMap(ee=>[{group:ee.group,y:ee.lower,y2:ee.upper}]),pointer({x:"group",y1:"y",y2:"y2",stroke:"#666",strokeWidth:2})),...R.flatMap(ee=>[tickX([ee],{x:"group",y:ee.lower,stroke:"#666"}),tickX([ee],{x:"group",y:ee.upper,stroke:"#666"})])],Y={label:"Cell Group"},W={label:O,grid:!0},Z={color:{legend:!0,label:"Cell Group"}}):I==="line_ci"&&T?(V=[areaY(T,{x:"time",y1:"lower",y2:"upper",fill:"cell_group",fillOpacity:.2}),line(T,{x:"time",y:"mean",stroke:"cell_group",strokeWidth:2}),dot(T,{x:"time",y:"mean",fill:"cell_group",r:3})],Z={color:{legend:!0,label:"Cell Group"}}):_.some(te=>te.cell_group!==void 0)?(V=[line(_,{x:"time",y:"value",stroke:"cell_group",strokeWidth:2}),dot(_,{x:"time",y:"value",fill:"cell_group",r:3})],Z={color:{legend:!0,label:"Cell Group"}}):V=[line(_,{x:"time",y:"value",stroke:"steelblue",strokeWidth:2}),dot(_,{x:"time",y:"value",fill:"steelblue",r:3})];const J=plot({width:L,height:U,marginLeft:60,marginBottom:40,marginRight:120,grid:!0,x:Y,y:W,...Z,marks:V});return G.current.appendChild(J),()=>{J.remove()}},[_,T,R,P,O,I,L,U]),jsxRuntimeExports.jsx("div",{ref:G})}function aggregateByTime(_,T,R){const P=_.indexOf("time_h"),O=_.indexOf(R);if(P===-1||O===-1)return[];const I=new Map;for(const U of T){const G=Number(U[P]),V=Number(U[O]);!isNaN(G)&&!isNaN(V)&&(I.has(G)||I.set(G,[]),I.get(G).push(V))}const L=[];for(const[U,G]of I.entries()){const V=G.reduce((Z,Y)=>Z+Y,0)/G.length;L.push({time:U,value:V})}return L.sort((U,G)=>U.time-G.time),L}function aggregateByXAxisWithCI(_,T,R,P){const O=_.indexOf(R),I=_.indexOf(P),L=_.indexOf("cell_group");if(O===-1||I===-1)return[];const U=new Map;for(const V of T){const Z=Number(V[O]),Y=Number(V[I]),W=L!==-1?String(V[L]):"all";if(!isNaN(Z)&&!isNaN(Y)){const J=`${Z}_${W}`;U.has(J)||U.set(J,{time:Z,cell_group:W,values:[]}),U.get(J).values.push(Y)}}const G=[];for(const{time:V,cell_group:Z,values:Y}of U.values()){const W=Y.length,J=Y.reduce((ee,te)=>ee+te,0)/W;if(W>1){const ee=Y.reduce((ae,ce)=>ae+Math.pow(ce-J,2),0)/(W-1),oe=1.96*(Math.sqrt(ee)/Math.sqrt(W));G.push({time:V,mean:J,lower:J-oe,upper:J+oe,n:W,cell_group:Z})}else G.push({time:V,mean:J,lower:J,upper:J,n:W,cell_group:Z})}return G.sort((V,Z)=>V.time!==Z.time?V.time-Z.time:V.cell_group.localeCompare(Z.cell_group)),G}function aggregateForHistogram(_,T,R){const P=_.indexOf(R),O=_.indexOf("cell_group");if(P===-1)return[];const I=new Map;for(const U of T){const G=Number(U[P]),V=O!==-1?String(U[O]):"all";isNaN(G)||(I.has(V)||I.set(V,[]),I.get(V).push(G))}const L=[];for(const[U,G]of I.entries()){const V=G.length,Z=G.reduce((Y,W)=>Y+W,0)/V;if(V>1){const Y=G.reduce((te,ie)=>te+Math.pow(ie-Z,2),0)/(V-1),ee=1.96*(Math.sqrt(Y)/Math.sqrt(V));L.push({group:U,mean:Z,lower:Z-ee,upper:Z+ee,n:V})}else L.push({group:U,mean:Z,lower:Z,upper:Z,n:V})}return L.sort((U,G)=>U.group.localeCompare(G.group)),L}function getTimeSamples(_){const T=[];for(let R=_.start;R<=_.end;R+=_.step)T.push(R);return T}function generateParameterConfigs(_,T,R){return _.length===0?[{}]:T==="grid"?generateGridConfigs(_):generateRandomConfigs(_,R??10)}function generateGridConfigs(_){const T=_.map(O=>{const I=[],L=O.steps>1?(O.max-O.min)/(O.steps-1):0;for(let U=0;U<O.steps;U++)I.push(O.min+U*L);return{path:O.path,values:I}}),R=[];function P(O,I){if(O===T.length){R.push({...I});return}const{path:L,values:U}=T[O];for(const G of U)I[L]=G,P(O+1,I)}return P(0,{}),R}function generateRandomConfigs(_,T){const R=[];for(let P=0;P<T;P++){const O={};for(const I of _)O[I.path]=I.min+Math.random()*(I.max-I.min);R.push(O)}return R}const DEFAULT_TIME_SAMPLES={start:0,end:48,step:12};var freeGlobal=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty,nativeObjectToString$1=objectProto$9.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(_){var T=hasOwnProperty$7.call(_,symToStringTag$1),R=_[symToStringTag$1];try{_[symToStringTag$1]=void 0;var P=!0}catch{}var O=nativeObjectToString$1.call(_);return P&&(T?_[symToStringTag$1]=R:delete _[symToStringTag$1]),O}var objectProto$8=Object.prototype,nativeObjectToString=objectProto$8.toString;function objectToString(_){return nativeObjectToString.call(_)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(_){return _==null?_===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(_)?getRawTag(_):objectToString(_)}function isObjectLike(_){return _!=null&&typeof _=="object"}var isArray=Array.isArray;function isObject(_){var T=typeof _;return _!=null&&(T=="object"||T=="function")}function identity(_){return _}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(_){if(!isObject(_))return!1;var T=baseGetTag(_);return T==funcTag$1||T==genTag||T==asyncTag||T==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=(function(){var _=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""})();function isMasked(_){return!!maskSrcKey&&maskSrcKey in _}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(_){if(_!=null){try{return funcToString$2.call(_)}catch{}try{return _+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$7=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$6=objectProto$7.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$6).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(_){if(!isObject(_)||isMasked(_))return!1;var T=isFunction(_)?reIsNative:reIsHostCtor;return T.test(toSource(_))}function getValue(_,T){return _?.[T]}function getNative(_,T){var R=getValue(_,T);return baseIsNative(R)?R:void 0}var objectCreate=Object.create,baseCreate=(function(){function _(){}return function(T){if(!isObject(T))return{};if(objectCreate)return objectCreate(T);_.prototype=T;var R=new _;return _.prototype=void 0,R}})();function apply(_,T,R){switch(R.length){case 0:return _.call(T);case 1:return _.call(T,R[0]);case 2:return _.call(T,R[0],R[1]);case 3:return _.call(T,R[0],R[1],R[2])}return _.apply(T,R)}function copyArray(_,T){var R=-1,P=_.length;for(T||(T=Array(P));++R<P;)T[R]=_[R];return T}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(_){var T=0,R=0;return function(){var P=nativeNow(),O=HOT_SPAN-(P-R);if(R=P,O>0){if(++T>=HOT_COUNT)return arguments[0]}else T=0;return _.apply(void 0,arguments)}}function constant(_){return function(){return _}}var defineProperty=(function(){try{var _=getNative(Object,"defineProperty");return _({},"",{}),_}catch{}})(),baseSetToString=defineProperty?function(_,T){return defineProperty(_,"toString",{configurable:!0,enumerable:!1,value:constant(T),writable:!0})}:identity,setToString=shortOut(baseSetToString),MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(_,T){var R=typeof _;return T=T??MAX_SAFE_INTEGER$1,!!T&&(R=="number"||R!="symbol"&&reIsUint.test(_))&&_>-1&&_%1==0&&_<T}function baseAssignValue(_,T,R){T=="__proto__"&&defineProperty?defineProperty(_,T,{configurable:!0,enumerable:!0,value:R,writable:!0}):_[T]=R}function eq(_,T){return _===T||_!==_&&T!==T}var objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function assignValue(_,T,R){var P=_[T];(!(hasOwnProperty$5.call(_,T)&&eq(P,R))||R===void 0&&!(T in _))&&baseAssignValue(_,T,R)}function copyObject(_,T,R,P){var O=!R;R||(R={});for(var I=-1,L=T.length;++I<L;){var U=T[I],G=void 0;G===void 0&&(G=_[U]),O?baseAssignValue(R,U,G):assignValue(R,U,G)}return R}var nativeMax=Math.max;function overRest(_,T,R){return T=nativeMax(T===void 0?_.length-1:T,0),function(){for(var P=arguments,O=-1,I=nativeMax(P.length-T,0),L=Array(I);++O<I;)L[O]=P[T+O];O=-1;for(var U=Array(T+1);++O<T;)U[O]=P[O];return U[T]=R(L),apply(_,this,U)}}function baseRest(_,T){return setToString(overRest(_,T,identity),_+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=MAX_SAFE_INTEGER}function isArrayLike(_){return _!=null&&isLength(_.length)&&!isFunction(_)}function isIterateeCall(_,T,R){if(!isObject(R))return!1;var P=typeof T;return(P=="number"?isArrayLike(R)&&isIndex(T,R.length):P=="string"&&T in R)?eq(R[T],_):!1}function createAssigner(_){return baseRest(function(T,R){var P=-1,O=R.length,I=O>1?R[O-1]:void 0,L=O>2?R[2]:void 0;for(I=_.length>3&&typeof I=="function"?(O--,I):void 0,L&&isIterateeCall(R[0],R[1],L)&&(I=O<3?void 0:I,O=1),T=Object(T);++P<O;){var U=R[P];U&&_(T,U,P,I)}return T})}var objectProto$5=Object.prototype;function isPrototype(_){var T=_&&_.constructor,R=typeof T=="function"&&T.prototype||objectProto$5;return _===R}function baseTimes(_,T){for(var R=-1,P=Array(_);++R<_;)P[R]=T(R);return P}var argsTag$1="[object Arguments]";function baseIsArguments(_){return isObjectLike(_)&&baseGetTag(_)==argsTag$1}var objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty,propertyIsEnumerable=objectProto$4.propertyIsEnumerable,isArguments=baseIsArguments((function(){return arguments})())?baseIsArguments:function(_){return isObjectLike(_)&&hasOwnProperty$4.call(_,"callee")&&!propertyIsEnumerable.call(_,"callee")};function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root.Buffer:void 0,nativeIsBuffer=Buffer$1?Buffer$1.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag$1="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag$1]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;function baseIsTypedArray(_){return isObjectLike(_)&&isLength(_.length)&&!!typedArrayTags[baseGetTag(_)]}function baseUnary(_){return function(T){return _(T)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=(function(){try{var _=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return _||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}})(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function arrayLikeKeys(_,T){var R=isArray(_),P=!R&&isArguments(_),O=!R&&!P&&isBuffer(_),I=!R&&!P&&!O&&isTypedArray(_),L=R||P||O||I,U=L?baseTimes(_.length,String):[],G=U.length;for(var V in _)L&&(V=="length"||O&&(V=="offset"||V=="parent")||I&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||isIndex(V,G))||U.push(V);return U}function overArg(_,T){return function(R){return _(T(R))}}function nativeKeysIn(_){var T=[];if(_!=null)for(var R in Object(_))T.push(R);return T}var objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function baseKeysIn(_){if(!isObject(_))return nativeKeysIn(_);var T=isPrototype(_),R=[];for(var P in _)P=="constructor"&&(T||!hasOwnProperty$3.call(_,P))||R.push(P);return R}function keysIn(_){return isArrayLike(_)?arrayLikeKeys(_):baseKeysIn(_)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(_){var T=this.has(_)&&delete this.__data__[_];return this.size-=T?1:0,T}var HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function hashGet(_){var T=this.__data__;if(nativeCreate){var R=T[_];return R===HASH_UNDEFINED$1?void 0:R}return hasOwnProperty$2.call(T,_)?T[_]:void 0}var objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function hashHas(_){var T=this.__data__;return nativeCreate?T[_]!==void 0:hasOwnProperty$1.call(T,_)}var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(_,T){var R=this.__data__;return this.size+=this.has(_)?0:1,R[_]=nativeCreate&&T===void 0?HASH_UNDEFINED:T,this}function Hash(_){var T=-1,R=_==null?0:_.length;for(this.clear();++T<R;){var P=_[T];this.set(P[0],P[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(_,T){for(var R=_.length;R--;)if(eq(_[R][0],T))return R;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(_){var T=this.__data__,R=assocIndexOf(T,_);if(R<0)return!1;var P=T.length-1;return R==P?T.pop():splice.call(T,R,1),--this.size,!0}function listCacheGet(_){var T=this.__data__,R=assocIndexOf(T,_);return R<0?void 0:T[R][1]}function listCacheHas(_){return assocIndexOf(this.__data__,_)>-1}function listCacheSet(_,T){var R=this.__data__,P=assocIndexOf(R,_);return P<0?(++this.size,R.push([_,T])):R[P][1]=T,this}function ListCache(_){var T=-1,R=_==null?0:_.length;for(this.clear();++T<R;){var P=_[T];this.set(P[0],P[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(_){var T=typeof _;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?_!=="__proto__":_===null}function getMapData(_,T){var R=_.__data__;return isKeyable(T)?R[typeof T=="string"?"string":"hash"]:R.map}function mapCacheDelete(_){var T=getMapData(this,_).delete(_);return this.size-=T?1:0,T}function mapCacheGet(_){return getMapData(this,_).get(_)}function mapCacheHas(_){return getMapData(this,_).has(_)}function mapCacheSet(_,T){var R=getMapData(this,_),P=R.size;return R.set(_,T),this.size+=R.size==P?0:1,this}function MapCache(_){var T=-1,R=_==null?0:_.length;for(this.clear();++T<R;){var P=_[T];this.set(P[0],P[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var getPrototype=overArg(Object.getPrototypeOf,Object),objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(_){if(!isObjectLike(_)||baseGetTag(_)!=objectTag)return!1;var T=getPrototype(_);if(T===null)return!0;var R=hasOwnProperty.call(T,"constructor")&&T.constructor;return typeof R=="function"&&R instanceof R&&funcToString.call(R)==objectCtorString}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(_){var T=this.__data__,R=T.delete(_);return this.size=T.size,R}function stackGet(_){return this.__data__.get(_)}function stackHas(_){return this.__data__.has(_)}var LARGE_ARRAY_SIZE=200;function stackSet(_,T){var R=this.__data__;if(R instanceof ListCache){var P=R.__data__;if(!Map$1||P.length<LARGE_ARRAY_SIZE-1)return P.push([_,T]),this.size=++R.size,this;R=this.__data__=new MapCache(P)}return R.set(_,T),this.size=R.size,this}function Stack(_){var T=this.__data__=new ListCache(_);this.size=T.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root.Buffer:void 0;Buffer&&Buffer.allocUnsafe;function cloneBuffer(_,T){return _.slice()}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(_){var T=new _.constructor(_.byteLength);return new Uint8Array$1(T).set(new Uint8Array$1(_)),T}function cloneTypedArray(_,T){var R=cloneArrayBuffer(_.buffer);return new _.constructor(R,_.byteOffset,_.length)}function initCloneObject(_){return typeof _.constructor=="function"&&!isPrototype(_)?baseCreate(getPrototype(_)):{}}function createBaseFor(_){return function(T,R,P){for(var O=-1,I=Object(T),L=P(T),U=L.length;U--;){var G=L[++O];if(R(I[G],G,I)===!1)break}return T}}var baseFor=createBaseFor();function assignMergeValue(_,T,R){(R!==void 0&&!eq(_[T],R)||R===void 0&&!(T in _))&&baseAssignValue(_,T,R)}function isArrayLikeObject(_){return isObjectLike(_)&&isArrayLike(_)}function safeGet(_,T){if(!(T==="constructor"&&typeof _[T]=="function")&&T!="__proto__")return _[T]}function toPlainObject(_){return copyObject(_,keysIn(_))}function baseMergeDeep(_,T,R,P,O,I,L){var U=safeGet(_,R),G=safeGet(T,R),V=L.get(G);if(V){assignMergeValue(_,R,V);return}var Z=I?I(U,G,R+"",_,T,L):void 0,Y=Z===void 0;if(Y){var W=isArray(G),J=!W&&isBuffer(G),ee=!W&&!J&&isTypedArray(G);Z=G,W||J||ee?isArray(U)?Z=U:isArrayLikeObject(U)?Z=copyArray(U):J?(Y=!1,Z=cloneBuffer(G)):ee?(Y=!1,Z=cloneTypedArray(G)):Z=[]:isPlainObject(G)||isArguments(G)?(Z=U,isArguments(U)?Z=toPlainObject(U):(!isObject(U)||isFunction(U))&&(Z=initCloneObject(G))):Y=!1}Y&&(L.set(G,Z),O(Z,G,P,I,L),L.delete(G)),assignMergeValue(_,R,Z)}function baseMerge(_,T,R,P,O){_!==T&&baseFor(T,function(I,L){if(O||(O=new Stack),isObject(I))baseMergeDeep(_,T,L,R,baseMerge,P,O);else{var U=P?P(safeGet(_,L),I,L+"",_,T,O):void 0;U===void 0&&(U=I),assignMergeValue(_,L,U)}},keysIn)}var mergeWith=createAssigner(function(_,T,R,P){baseMerge(_,T,R,P)});function customMerge(_,T){if(T===void 0)return _;if(Array.isArray(T))return T;if(!(isPlainObject(_)&&isPlainObject(T)))return T}function mergeWithDefaults(_,T=DEFAULT_EHT_PARAMS){const R=structuredClone(T);if(_.general&&mergeWith(R.general,_.general,customMerge),_.cell_prop&&mergeWith(R.cell_prop,_.cell_prop,customMerge),_.cell_types)for(const[P,O]of Object.entries(_.cell_types))if(P in R.cell_types)mergeWith(R.cell_types[P],O,customMerge);else{const I=structuredClone(DEFAULT_CONTROL_CELL);mergeWith(I,O,customMerge),R.cell_types[P]=I}return R}function setNestedValue(_,T,R){const P=T.split(".");let O=_;for(let I=0;I<P.length-1;I++){const L=P[I];(!(L in O)||typeof O[L]!="object"||O[L]===null)&&(O[L]={}),O=O[L]}O[P[P.length-1]]=R}var toml={},parse={exports:{}},tomlParser={exports:{}},parser,hasRequiredParser;function requireParser(){if(hasRequiredParser)return parser;hasRequiredParser=1;const _=1114112;class T extends Error{constructor(I,L,U){super("[ParserError] "+I,L,U),this.name="ParserError",this.code="ParserError",Error.captureStackTrace&&Error.captureStackTrace(this,T)}}class R{constructor(I){this.parser=I,this.buf="",this.returned=null,this.result=null,this.resultTable=null,this.resultArr=null}}class P{constructor(){this.pos=0,this.col=0,this.line=0,this.obj={},this.ctx=this.obj,this.stack=[],this._buf="",this.char=null,this.ii=0,this.state=new R(this.parseStart)}parse(I){if(I.length===0||I.length==null)return;this._buf=String(I),this.ii=-1,this.char=-1;let L;for(;L===!1||this.nextChar();)L=this.runOne();this._buf=null}nextChar(){return this.char===10&&(++this.line,this.col=-1),++this.ii,this.char=this._buf.codePointAt(this.ii),++this.pos,++this.col,this.haveBuffer()}haveBuffer(){return this.ii<this._buf.length}runOne(){return this.state.parser.call(this,this.state.returned)}finish(){this.char=_;let I;do I=this.state.parser,this.runOne();while(this.state.parser!==I);return this.ctx=null,this.state=null,this._buf=null,this.obj}next(I){if(typeof I!="function")throw new T("Tried to set state to non-existent state: "+JSON.stringify(I));this.state.parser=I}goto(I){return this.next(I),this.runOne()}call(I,L){L&&this.next(L),this.stack.push(this.state),this.state=new R(I)}callNow(I,L){return this.call(I,L),this.runOne()}return(I){if(this.stack.length===0)throw this.error(new T("Stack underflow"));I===void 0&&(I=this.state.buf),this.state=this.stack.pop(),this.state.returned=I}returnNow(I){return this.return(I),this.runOne()}consume(){if(this.char===_)throw this.error(new T("Unexpected end-of-buffer"));this.state.buf+=this._buf[this.ii]}error(I){return I.line=this.line,I.col=this.col,I.pos=this.pos,I}parseStart(){throw new T("Must declare a parseStart method")}}return P.END=_,P.Error=T,parser=P,parser}var createDatetime,hasRequiredCreateDatetime;function requireCreateDatetime(){return hasRequiredCreateDatetime||(hasRequiredCreateDatetime=1,createDatetime=_=>{const T=new Date(_);if(isNaN(T))throw new TypeError("Invalid Datetime");return T}),createDatetime}var formatNum,hasRequiredFormatNum;function requireFormatNum(){return hasRequiredFormatNum||(hasRequiredFormatNum=1,formatNum=(_,T)=>{for(T=String(T);T.length<_;)T="0"+T;return T}),formatNum}var createDatetimeFloat,hasRequiredCreateDatetimeFloat;function requireCreateDatetimeFloat(){if(hasRequiredCreateDatetimeFloat)return createDatetimeFloat;hasRequiredCreateDatetimeFloat=1;const _=requireFormatNum();class T extends Date{constructor(P){super(P+"Z"),this.isFloating=!0}toISOString(){const P=`${this.getUTCFullYear()}-${_(2,this.getUTCMonth()+1)}-${_(2,this.getUTCDate())}`,O=`${_(2,this.getUTCHours())}:${_(2,this.getUTCMinutes())}:${_(2,this.getUTCSeconds())}.${_(3,this.getUTCMilliseconds())}`;return`${P}T${O}`}}return createDatetimeFloat=R=>{const P=new T(R);if(isNaN(P))throw new TypeError("Invalid Datetime");return P},createDatetimeFloat}var createDate,hasRequiredCreateDate;function requireCreateDate(){if(hasRequiredCreateDate)return createDate;hasRequiredCreateDate=1;const _=requireFormatNum(),T=globalThis.Date;class R extends T{constructor(O){super(O),this.isDate=!0}toISOString(){return`${this.getUTCFullYear()}-${_(2,this.getUTCMonth()+1)}-${_(2,this.getUTCDate())}`}}return createDate=P=>{const O=new R(P);if(isNaN(O))throw new TypeError("Invalid Datetime");return O},createDate}var createTime,hasRequiredCreateTime;function requireCreateTime(){if(hasRequiredCreateTime)return createTime;hasRequiredCreateTime=1;const _=requireFormatNum();class T extends Date{constructor(P){super(`0000-01-01T${P}Z`),this.isTime=!0}toISOString(){return`${_(2,this.getUTCHours())}:${_(2,this.getUTCMinutes())}:${_(2,this.getUTCSeconds())}.${_(3,this.getUTCMilliseconds())}`}}return createTime=R=>{const P=new T(R);if(isNaN(P))throw new TypeError("Invalid Datetime");return P},createTime}var hasRequiredTomlParser;function requireTomlParser(){if(hasRequiredTomlParser)return tomlParser.exports;hasRequiredTomlParser=1,tomlParser.exports=makeParserClass(requireParser()),tomlParser.exports.makeParserClass=makeParserClass;class TomlError extends Error{constructor(T){super(T),this.name="TomlError",Error.captureStackTrace&&Error.captureStackTrace(this,TomlError),this.fromTOML=!0,this.wrapped=null}}TomlError.wrap=_=>{const T=new TomlError(_.message);return T.code=_.code,T.wrapped=_,T},tomlParser.exports.TomlError=TomlError;const createDateTime=requireCreateDatetime(),createDateTimeFloat=requireCreateDatetimeFloat(),createDate=requireCreateDate(),createTime=requireCreateTime(),CTRL_I=9,CTRL_J=10,CTRL_M=13,CTRL_CHAR_BOUNDARY=31,CHAR_SP=32,CHAR_QUOT=34,CHAR_NUM=35,CHAR_APOS=39,CHAR_PLUS=43,CHAR_COMMA=44,CHAR_HYPHEN=45,CHAR_PERIOD=46,CHAR_0=48,CHAR_1=49,CHAR_7=55,CHAR_9=57,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_A=65,CHAR_E=69,CHAR_F=70,CHAR_T=84,CHAR_U=85,CHAR_Z=90,CHAR_LOWBAR=95,CHAR_a=97,CHAR_b=98,CHAR_e=101,CHAR_f=102,CHAR_i=105,CHAR_l=108,CHAR_n=110,CHAR_o=111,CHAR_r=114,CHAR_s=115,CHAR_t=116,CHAR_u=117,CHAR_x=120,CHAR_z=122,CHAR_LCUB=123,CHAR_RCUB=125,CHAR_LSQB=91,CHAR_BSOL=92,CHAR_RSQB=93,CHAR_DEL=127,SURROGATE_FIRST=55296,SURROGATE_LAST=57343,escapes={[CHAR_b]:"\b",[CHAR_t]:"	",[CHAR_n]:`
`,[CHAR_f]:"\f",[CHAR_r]:"\r",[CHAR_QUOT]:'"',[CHAR_BSOL]:"\\"};function isDigit(_){return _>=CHAR_0&&_<=CHAR_9}function isHexit(_){return _>=CHAR_A&&_<=CHAR_F||_>=CHAR_a&&_<=CHAR_f||_>=CHAR_0&&_<=CHAR_9}function isBit(_){return _===CHAR_1||_===CHAR_0}function isOctit(_){return _>=CHAR_0&&_<=CHAR_7}function isAlphaNumQuoteHyphen(_){return _>=CHAR_A&&_<=CHAR_Z||_>=CHAR_a&&_<=CHAR_z||_>=CHAR_0&&_<=CHAR_9||_===CHAR_APOS||_===CHAR_QUOT||_===CHAR_LOWBAR||_===CHAR_HYPHEN}function isAlphaNumHyphen(_){return _>=CHAR_A&&_<=CHAR_Z||_>=CHAR_a&&_<=CHAR_z||_>=CHAR_0&&_<=CHAR_9||_===CHAR_LOWBAR||_===CHAR_HYPHEN}const _type=Symbol("type"),_declared=Symbol("declared"),hasOwnProperty=Object.prototype.hasOwnProperty,defineProperty=Object.defineProperty,descriptor={configurable:!0,enumerable:!0,writable:!0,value:void 0};function hasKey(_,T){return hasOwnProperty.call(_,T)?!0:(T==="__proto__"&&defineProperty(_,"__proto__",descriptor),!1)}const INLINE_TABLE=Symbol("inline-table");function InlineTable(){return Object.defineProperties({},{[_type]:{value:INLINE_TABLE}})}function isInlineTable(_){return _===null||typeof _!="object"?!1:_[_type]===INLINE_TABLE}const TABLE=Symbol("table");function Table(){return Object.defineProperties({},{[_type]:{value:TABLE},[_declared]:{value:!1,writable:!0}})}function isTable(_){return _===null||typeof _!="object"?!1:_[_type]===TABLE}const _contentType=Symbol("content-type"),INLINE_LIST=Symbol("inline-list");function InlineList(_){return Object.defineProperties([],{[_type]:{value:INLINE_LIST},[_contentType]:{value:_}})}function isInlineList(_){return _===null||typeof _!="object"?!1:_[_type]===INLINE_LIST}const LIST=Symbol("list");function List(){return Object.defineProperties([],{[_type]:{value:LIST}})}function isList(_){return _===null||typeof _!="object"?!1:_[_type]===LIST}let _custom;try{const utilInspect=eval("require('util').inspect");_custom=utilInspect.custom}catch(_){}const _inspect=_custom||"inspect";class BoxedBigInt{constructor(T){try{this.value=globalThis.BigInt.asIntN(64,T)}catch{this.value=null}Object.defineProperty(this,_type,{value:INTEGER})}isNaN(){return this.value===null}toString(){return String(this.value)}[_inspect](){return`[BigInt: ${this.toString()}]}`}valueOf(){return this.value}}const INTEGER=Symbol("integer");function Integer(_){let T=Number(_);return Object.is(T,-0)&&(T=0),globalThis.BigInt&&!Number.isSafeInteger(T)?new BoxedBigInt(_):Object.defineProperties(new Number(T),{isNaN:{value:function(){return isNaN(this)}},[_type]:{value:INTEGER},[_inspect]:{value:()=>`[Integer: ${_}]`}})}function isInteger(_){return _===null||typeof _!="object"?!1:_[_type]===INTEGER}const FLOAT=Symbol("float");function Float(_){return Object.defineProperties(new Number(_),{[_type]:{value:FLOAT},[_inspect]:{value:()=>`[Float: ${_}]`}})}function isFloat(_){return _===null||typeof _!="object"?!1:_[_type]===FLOAT}function tomlType(_){const T=typeof _;if(T==="object"){if(_===null)return"null";if(_ instanceof Date)return"datetime";if(_type in _)switch(_[_type]){case INLINE_TABLE:return"inline-table";case INLINE_LIST:return"inline-list";case TABLE:return"table";case LIST:return"list";case FLOAT:return"float";case INTEGER:return"integer"}}return T}function makeParserClass(_){class T extends _{constructor(){super(),this.ctx=this.obj=Table()}atEndOfWord(){return this.char===CHAR_NUM||this.char===CTRL_I||this.char===CHAR_SP||this.atEndOfLine()}atEndOfLine(){return this.char===_.END||this.char===CTRL_J||this.char===CTRL_M}parseStart(){if(this.char===_.END)return null;if(this.char===CHAR_LSQB)return this.call(this.parseTableOrList);if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(isAlphaNumQuoteHyphen(this.char))return this.callNow(this.parseAssignStatement);throw this.error(new TomlError(`Unknown character "${this.char}"`))}parseWhitespaceToEOL(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(this.char===CHAR_NUM)return this.goto(this.parseComment);if(this.char===_.END||this.char===CTRL_J)return this.return();throw this.error(new TomlError("Unexpected character, expected only whitespace or comments till end of line"))}parseAssignStatement(){return this.callNow(this.parseAssign,this.recordAssignStatement)}recordAssignStatement(P){let O=this.ctx,I=P.key.pop();for(let L of P.key){if(hasKey(O,L)&&(!isTable(O[L])||O[L][_declared]))throw this.error(new TomlError("Can't redefine existing key"));O=O[L]=O[L]||Table()}if(hasKey(O,I))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(P.value)||isFloat(P.value)?O[I]=P.value.valueOf():O[I]=P.value,this.goto(this.parseWhitespaceToEOL)}parseAssign(){return this.callNow(this.parseKeyword,this.recordAssignKeyword)}recordAssignKeyword(P){return this.state.resultTable?this.state.resultTable.push(P):this.state.resultTable=[P],this.goto(this.parseAssignKeywordPreDot)}parseAssignKeywordPreDot(){if(this.char===CHAR_PERIOD)return this.next(this.parseAssignKeywordPostDot);if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.goto(this.parseAssignEqual)}parseAssignKeywordPostDot(){if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.callNow(this.parseKeyword,this.recordAssignKeyword)}parseAssignEqual(){if(this.char===CHAR_EQUALS)return this.next(this.parseAssignPreValue);throw this.error(new TomlError('Invalid character, expected "="'))}parseAssignPreValue(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseValue,this.recordAssignValue)}recordAssignValue(P){return this.returnNow({key:this.state.resultTable,value:P})}parseComment(){do if(this.char===_.END||this.char===CTRL_J)return this.return();while(this.nextChar())}parseTableOrList(){if(this.char===CHAR_LSQB)this.next(this.parseList);else return this.goto(this.parseTable)}parseTable(){return this.ctx=this.obj,this.goto(this.parseTableNext)}parseTableNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseTableMore)}parseTableMore(P){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,P)&&(!isTable(this.ctx[P])||this.ctx[P][_declared]))throw this.error(new TomlError("Can't redefine existing key"));return this.ctx=this.ctx[P]=this.ctx[P]||Table(),this.ctx[_declared]=!0,this.next(this.parseWhitespaceToEOL)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,P))this.ctx=this.ctx[P]=Table();else if(isTable(this.ctx[P]))this.ctx=this.ctx[P];else if(isList(this.ctx[P]))this.ctx=this.ctx[P][this.ctx[P].length-1];else throw this.error(new TomlError("Can't redefine existing key"));return this.next(this.parseTableNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseList(){return this.ctx=this.obj,this.goto(this.parseListNext)}parseListNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseListMore)}parseListMore(P){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,P)||(this.ctx[P]=List()),isInlineList(this.ctx[P]))throw this.error(new TomlError("Can't extend an inline array"));if(isList(this.ctx[P])){const O=Table();this.ctx[P].push(O),this.ctx=O}else throw this.error(new TomlError("Can't redefine an existing key"));return this.next(this.parseListEnd)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,P))this.ctx=this.ctx[P]=Table();else{if(isInlineList(this.ctx[P]))throw this.error(new TomlError("Can't extend an inline array"));if(isInlineTable(this.ctx[P]))throw this.error(new TomlError("Can't extend an inline table"));if(isList(this.ctx[P]))this.ctx=this.ctx[P][this.ctx[P].length-1];else if(isTable(this.ctx[P]))this.ctx=this.ctx[P];else throw this.error(new TomlError("Can't redefine an existing key"))}return this.next(this.parseListNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseListEnd(P){if(this.char===CHAR_RSQB)return this.next(this.parseWhitespaceToEOL);throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseValue(){if(this.char===_.END)throw this.error(new TomlError("Key without value"));if(this.char===CHAR_QUOT)return this.next(this.parseDoubleString);if(this.char===CHAR_APOS)return this.next(this.parseSingleString);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)return this.goto(this.parseNumberSign);if(this.char===CHAR_i)return this.next(this.parseInf);if(this.char===CHAR_n)return this.next(this.parseNan);if(isDigit(this.char))return this.goto(this.parseNumberOrDateTime);if(this.char===CHAR_t||this.char===CHAR_f)return this.goto(this.parseBoolean);if(this.char===CHAR_LSQB)return this.call(this.parseInlineList,this.recordValue);if(this.char===CHAR_LCUB)return this.call(this.parseInlineTable,this.recordValue);throw this.error(new TomlError("Unexpected character, expecting string, number, datetime, boolean, inline array or inline table"))}recordValue(P){return this.returnNow(P)}parseInf(){if(this.char===CHAR_n)return this.next(this.parseInf2);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseInf2(){if(this.char===CHAR_f)return this.state.buf==="-"?this.return(-1/0):this.return(1/0);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseNan(){if(this.char===CHAR_a)return this.next(this.parseNan2);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseNan2(){if(this.char===CHAR_n)return this.return(NaN);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseKeyword(){return this.char===CHAR_QUOT?this.next(this.parseBasicString):this.char===CHAR_APOS?this.next(this.parseLiteralString):this.goto(this.parseBareKey)}parseBareKey(){do{if(this.char===_.END)throw this.error(new TomlError("Key ended without value"));if(isAlphaNumHyphen(this.char))this.consume();else{if(this.state.buf.length===0)throw this.error(new TomlError("Empty bare keys are not allowed"));return this.returnNow()}}while(this.nextChar())}parseSingleString(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiStringMaybe):this.goto(this.parseLiteralString)}parseLiteralString(){do{if(this.char===CHAR_APOS)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}parseLiteralMultiStringMaybe(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiString):this.returnNow()}parseLiteralMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseLiteralMultiStringContent):this.goto(this.parseLiteralMultiStringContent)}parseLiteralMultiStringContent(){do{if(this.char===CHAR_APOS)return this.next(this.parseLiteralMultiEnd);if(this.char===_.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}parseLiteralMultiEnd(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd2):(this.state.buf+="'",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd2(){return this.char===CHAR_APOS?this.return():(this.state.buf+="''",this.goto(this.parseLiteralMultiStringContent))}parseDoubleString(){return this.char===CHAR_QUOT?this.next(this.parseMultiStringMaybe):this.goto(this.parseBasicString)}parseBasicString(){do{if(this.char===CHAR_BSOL)return this.call(this.parseEscape,this.recordEscapeReplacement);if(this.char===CHAR_QUOT)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}recordEscapeReplacement(P){return this.state.buf+=P,this.goto(this.parseBasicString)}parseMultiStringMaybe(){return this.char===CHAR_QUOT?this.next(this.parseMultiString):this.returnNow()}parseMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseMultiStringContent):this.goto(this.parseMultiStringContent)}parseMultiStringContent(){do{if(this.char===CHAR_BSOL)return this.call(this.parseMultiEscape,this.recordMultiEscapeReplacement);if(this.char===CHAR_QUOT)return this.next(this.parseMultiEnd);if(this.char===_.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharInString();this.consume()}while(this.nextChar())}errorControlCharInString(){let P="\\u00";return this.char<16&&(P+="0"),P+=this.char.toString(16),this.error(new TomlError(`Control characters (codes < 0x1f and 0x7f) are not allowed in strings, use ${P} instead`))}recordMultiEscapeReplacement(P){return this.state.buf+=P,this.goto(this.parseMultiStringContent)}parseMultiEnd(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd2):(this.state.buf+='"',this.goto(this.parseMultiStringContent))}parseMultiEnd2(){return this.char===CHAR_QUOT?this.return():(this.state.buf+='""',this.goto(this.parseMultiStringContent))}parseMultiEscape(){return this.char===CTRL_M||this.char===CTRL_J?this.next(this.parseMultiTrim):this.char===CHAR_SP||this.char===CTRL_I?this.next(this.parsePreMultiTrim):this.goto(this.parseEscape)}parsePreMultiTrim(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CTRL_M||this.char===CTRL_J)return this.next(this.parseMultiTrim);throw this.error(new TomlError("Can't escape whitespace"))}parseMultiTrim(){return this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M?null:this.returnNow()}parseEscape(){if(this.char in escapes)return this.return(escapes[this.char]);if(this.char===CHAR_u)return this.call(this.parseSmallUnicode,this.parseUnicodeReturn);if(this.char===CHAR_U)return this.call(this.parseLargeUnicode,this.parseUnicodeReturn);throw this.error(new TomlError("Unknown escape character: "+this.char))}parseUnicodeReturn(P){try{const O=parseInt(P,16);if(O>=SURROGATE_FIRST&&O<=SURROGATE_LAST)throw this.error(new TomlError("Invalid unicode, character in range 0xD800 - 0xDFFF is reserved"));return this.returnNow(String.fromCodePoint(O))}catch(O){throw this.error(TomlError.wrap(O))}}parseSmallUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=4)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseLargeUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=8)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseNumberSign(){return this.consume(),this.next(this.parseMaybeSignedInfOrNan)}parseMaybeSignedInfOrNan(){return this.char===CHAR_i?this.next(this.parseInf):this.char===CHAR_n?this.next(this.parseNan):this.callNow(this.parseNoUnder,this.parseNumberIntegerStart)}parseNumberIntegerStart(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberIntegerExponentOrDecimal)):this.goto(this.parseNumberInteger)}parseNumberIntegerExponentOrDecimal(){return this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Integer(this.state.buf))}parseNumberInteger(){if(isDigit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder);if(this.char===CHAR_E||this.char===CHAR_e)return this.consume(),this.next(this.parseNumberExponentSign);if(this.char===CHAR_PERIOD)return this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat);{const P=Integer(this.state.buf);if(P.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(P)}}}parseNoUnder(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD||this.char===CHAR_E||this.char===CHAR_e)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNoUnderHexOctBinLiteral(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNumberFloat(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberFloat);if(isDigit(this.char))this.consume();else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Float(this.state.buf))}parseNumberExponentSign(){if(isDigit(this.char))return this.goto(this.parseNumberExponent);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.call(this.parseNoUnder,this.parseNumberExponent);else throw this.error(new TomlError("Unexpected character, expected -, + or digit"))}parseNumberExponent(){if(isDigit(this.char))this.consume();else return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder):this.returnNow(Float(this.state.buf))}parseNumberOrDateTime(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberBaseOrDateTime)):this.goto(this.parseNumberOrDateTimeOnly)}parseNumberOrDateTimeOnly(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberInteger);if(isDigit(this.char))this.consume(),this.state.buf.length>4&&this.next(this.parseNumberInteger);else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_HYPHEN?this.goto(this.parseDateTime):this.char===CHAR_COLON?this.goto(this.parseOnlyTimeHour):this.returnNow(Integer(this.state.buf))}parseDateTimeOnly(){if(this.state.buf.length<4){if(isDigit(this.char))return this.consume();if(this.char===CHAR_COLON)return this.goto(this.parseOnlyTimeHour);throw this.error(new TomlError("Expected digit while parsing year part of a date"))}else{if(this.char===CHAR_HYPHEN)return this.goto(this.parseDateTime);throw this.error(new TomlError("Expected hyphen (-) while parsing year part of date"))}}parseNumberBaseOrDateTime(){return this.char===CHAR_b?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerBin)):this.char===CHAR_o?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerOct)):this.char===CHAR_x?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerHex)):this.char===CHAR_PERIOD?this.goto(this.parseNumberInteger):isDigit(this.char)?this.goto(this.parseDateTimeOnly):this.returnNow(Integer(this.state.buf))}parseIntegerHex(){if(isHexit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const P=Integer(this.state.buf);if(P.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(P)}}}parseIntegerOct(){if(isOctit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const P=Integer(this.state.buf);if(P.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(P)}}}parseIntegerBin(){if(isBit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const P=Integer(this.state.buf);if(P.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(P)}}}parseDateTime(){if(this.state.buf.length<4)throw this.error(new TomlError("Years less than 1000 must be zero padded to four characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseDateMonth)}parseDateMonth(){if(this.char===CHAR_HYPHEN){if(this.state.buf.length<2)throw this.error(new TomlError("Months less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseDateDay)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseDateDay(){if(this.char===CHAR_T||this.char===CHAR_SP){if(this.state.buf.length<2)throw this.error(new TomlError("Days less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseStartTimeHour)}else{if(this.atEndOfWord())return this.returnNow(createDate(this.state.result+"-"+this.state.buf));if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}}parseStartTimeHour(){return this.atEndOfWord()?this.returnNow(createDate(this.state.result)):this.goto(this.parseTimeHour)}parseTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result+="T"+this.state.buf,this.state.buf="",this.next(this.parseTimeMin)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeSec);throw this.error(new TomlError("Incomplete datetime"))}}parseTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeZoneOrFraction)}else throw this.error(new TomlError("Incomplete datetime"))}parseOnlyTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeMin)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeSec);throw this.error(new TomlError("Incomplete time"))}}parseOnlyTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.next(this.parseOnlyTimeFractionMaybe)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeFractionMaybe(){if(this.state.result+=":"+this.state.buf,this.char===CHAR_PERIOD)this.state.buf="",this.next(this.parseOnlyTimeFraction);else return this.return(createTime(this.state.result))}parseOnlyTimeFraction(){if(isDigit(this.char))this.consume();else if(this.atEndOfWord()){if(this.state.buf.length===0)throw this.error(new TomlError("Expected digit in milliseconds"));return this.returnNow(createTime(this.state.result+"."+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}parseTimeZoneOrFraction(){if(this.char===CHAR_PERIOD)this.consume(),this.next(this.parseDateTimeFraction);else if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}parseDateTimeFraction(){if(isDigit(this.char))this.consume();else{if(this.state.buf.length===1)throw this.error(new TomlError("Expected digit in milliseconds"));if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}}parseTimeZoneHour(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.next(this.parseTimeZoneSep)}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseTimeZoneSep(){if(this.char===CHAR_COLON)this.consume(),this.next(this.parseTimeZoneMin);else throw this.error(new TomlError("Unexpected character in datetime, expected colon"))}parseTimeZoneMin(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.return(createDateTime(this.state.result+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseBoolean(){if(this.char===CHAR_t)return this.consume(),this.next(this.parseTrue_r);if(this.char===CHAR_f)return this.consume(),this.next(this.parseFalse_a)}parseTrue_r(){if(this.char===CHAR_r)return this.consume(),this.next(this.parseTrue_u);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_u(){if(this.char===CHAR_u)return this.consume(),this.next(this.parseTrue_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_e(){if(this.char===CHAR_e)return this.return(!0);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_a(){if(this.char===CHAR_a)return this.consume(),this.next(this.parseFalse_l);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_l(){if(this.char===CHAR_l)return this.consume(),this.next(this.parseFalse_s);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_s(){if(this.char===CHAR_s)return this.consume(),this.next(this.parseFalse_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_e(){if(this.char===CHAR_e)return this.return(!1);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseInlineList(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===_.END)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_NUM?this.call(this.parseComment):this.char===CHAR_RSQB?this.return(this.state.resultArr||InlineList()):this.callNow(this.parseValue,this.recordInlineListValue)}recordInlineListValue(P){if(this.state.resultArr){const O=this.state.resultArr[_contentType],I=tomlType(P);if(O!==I)throw this.error(new TomlError(`Inline lists must be a single type, not a mix of ${O} and ${I}`))}else this.state.resultArr=InlineList(tomlType(P));return isFloat(P)||isInteger(P)?this.state.resultArr.push(P.valueOf()):this.state.resultArr.push(P),this.goto(this.parseInlineListNext)}parseInlineListNext(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CHAR_COMMA)return this.next(this.parseInlineList);if(this.char===CHAR_RSQB)return this.goto(this.parseInlineList);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTable(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===_.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_RCUB?this.return(this.state.resultTable||InlineTable()):(this.state.resultTable||(this.state.resultTable=InlineTable()),this.callNow(this.parseAssign,this.recordInlineTableValue))}recordInlineTableValue(P){let O=this.state.resultTable,I=P.key.pop();for(let L of P.key){if(hasKey(O,L)&&(!isTable(O[L])||O[L][_declared]))throw this.error(new TomlError("Can't redefine existing key"));O=O[L]=O[L]||Table()}if(hasKey(O,I))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(P.value)||isFloat(P.value)?O[I]=P.value.valueOf():O[I]=P.value,this.goto(this.parseInlineTableNext)}parseInlineTableNext(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===_.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)return this.next(this.parseInlineTable);if(this.char===CHAR_RCUB)return this.goto(this.parseInlineTable);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}}return T}return tomlParser.exports}var parsePrettyError,hasRequiredParsePrettyError;function requireParsePrettyError(){if(hasRequiredParsePrettyError)return parsePrettyError;hasRequiredParsePrettyError=1,parsePrettyError=_;function _(T,R){if(T.pos==null||T.line==null)return T;let P=T.message;if(P+=` at row ${T.line+1}, col ${T.col+1}, pos ${T.pos}:
`,R&&R.split){const O=R.split(/\n/),I=String(Math.min(O.length,T.line+3)).length;let L=" ";for(;L.length<I;)L+=" ";for(let U=Math.max(0,T.line-1);U<Math.min(O.length,T.line+2);++U){let G=String(U+1);if(G.length<I&&(G=" "+G),T.line===U){P+=G+"> "+O[U]+`
`,P+=L+"  ";for(let V=0;V<T.col;++V)P+=" ";P+=`^
`}else P+=G+": "+O[U]+`
`}}return T.message=P+`
`,T}return parsePrettyError}var parseString_1,hasRequiredParseString;function requireParseString(){if(hasRequiredParseString)return parseString_1;hasRequiredParseString=1,parseString_1=R;const _=requireTomlParser(),T=requireParsePrettyError();function R(P){globalThis.Buffer&&globalThis.Buffer.isBuffer(P)&&(P=P.toString("utf8"));const O=new _;try{return O.parse(P),O.finish()}catch(I){throw T(I,P)}}return parseString_1}var parseAsync_1,hasRequiredParseAsync;function requireParseAsync(){if(hasRequiredParseAsync)return parseAsync_1;hasRequiredParseAsync=1,parseAsync_1=R;const _=requireTomlParser(),T=requireParsePrettyError();function R(P,O){O||(O={});const I=0,L=O.blocksize||40960,U=new _;return new Promise((V,Z)=>{setImmediate(G,I,L,V,Z)});function G(V,Z,Y,W){if(V>=P.length)try{return Y(U.finish())}catch(J){return W(T(J,P))}try{U.parse(P.slice(V,V+Z)),setImmediate(G,V+Z,Z,Y,W)}catch(J){W(T(J,P))}}}return parseAsync_1}var parseStream_1,hasRequiredParseStream;function requireParseStream(){if(hasRequiredParseStream)return parseStream_1;hasRequiredParseStream=1,parseStream_1=R;const _=require$$0,T=requireTomlParser();function R(I){return I?P(I):O()}function P(I){const L=new T;return I.setEncoding("utf8"),new Promise((U,G)=>{let V,Z=!1,Y=!1;function W(){if(Z=!0,!V)try{U(L.finish())}catch(te){G(te)}}function J(te){Y=!0,G(te)}I.once("end",W),I.once("error",J),ee();function ee(){V=!0;let te;for(;(te=I.read())!==null;)try{L.parse(te)}catch(ie){return J(ie)}if(V=!1,Z)return W();Y||I.once("readable",ee)}})}function O(){const I=new T;return new _.Transform({objectMode:!0,transform(L,U,G){try{I.parse(L.toString(U))}catch(V){this.emit("error",V)}G()},flush(L){try{this.push(I.finish())}catch(U){this.emit("error",U)}L()}})}return parseStream_1}var hasRequiredParse;function requireParse(){return hasRequiredParse||(hasRequiredParse=1,parse.exports=requireParseString(),parse.exports.async=requireParseAsync(),parse.exports.stream=requireParseStream(),parse.exports.prettyError=requireParsePrettyError()),parse.exports}var stringify={exports:{}},hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify.exports;hasRequiredStringify=1,stringify.exports=_,stringify.exports.value=ie;function _(be){if(be===null)throw T("null");if(be===void 0)throw T("undefined");if(typeof be!="object")throw T(typeof be);if(typeof be.toJSON=="function"&&(be=be.toJSON()),be==null)return null;const Ce=G(be);if(Ce!=="table")throw T(Ce);return L("","",be)}function T(be){return new Error("Can only stringify objects, not "+be)}function R(){return new Error("Array values can't have mixed types")}function P(be){return Object.keys(be).filter(Ce=>U(be[Ce]))}function O(be){return Object.keys(be).filter(Ce=>!U(be[Ce]))}function I(be){let Ce=Array.isArray(be)?[]:Object.prototype.hasOwnProperty.call(be,"__proto__")?{["__proto__"]:void 0}:{};for(let Ee of Object.keys(be))be[Ee]&&typeof be[Ee].toJSON=="function"&&!("toISOString"in be[Ee])?Ce[Ee]=be[Ee].toJSON():Ce[Ee]=be[Ee];return Ce}function L(be,Ce,Ee){Ee=I(Ee);var ye,Se;ye=P(Ee),Se=O(Ee);var Te=[],Ae=Ce||"";ye.forEach(ve=>{var Re=G(Ee[ve]);Re!=="undefined"&&Re!=="null"&&Te.push(Ae+V(ve)+" = "+te(Ee[ve],!0))}),Te.length>0&&Te.push("");var Be=be&&ye.length>0?Ce+"  ":"";return Se.forEach(ve=>{Te.push(ge(be,Be,ve,Ee[ve]))}),Te.join(`
`)}function U(be){switch(G(be)){case"undefined":case"null":case"integer":case"nan":case"float":case"boolean":case"string":case"datetime":return!0;case"array":return be.length===0||G(be[0])!=="table";case"table":return Object.keys(be).length===0;default:return!1}}function G(be){return be===void 0?"undefined":be===null?"null":typeof be=="bigint"||Number.isInteger(be)&&!Object.is(be,-0)?"integer":typeof be=="number"?"float":typeof be=="boolean"?"boolean":typeof be=="string"?"string":"toISOString"in be?isNaN(be)?"undefined":"datetime":Array.isArray(be)?"array":"table"}function V(be){var Ce=String(be);return/^[-A-Za-z0-9_]+$/.test(Ce)?Ce:Z(Ce)}function Z(be){return'"'+J(be).replace(/"/g,'\\"')+'"'}function Y(be){return"'"+be+"'"}function W(be,Ce){for(;Ce.length<be;)Ce="0"+Ce;return Ce}function J(be){return be.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/([\u0000-\u001f\u007f])/,Ce=>"\\u"+W(4,Ce.codePointAt(0).toString(16)))}function ee(be){let Ce=be.split(/\n/).map(Ee=>J(Ee).replace(/"(?="")/g,'\\"')).join(`
`);return Ce.slice(-1)==='"'&&(Ce+=`\\
`),`"""
`+Ce+'"""'}function te(be,Ce){let Ee=G(be);return Ee==="string"&&(Ce&&/\n/.test(be)?Ee="string-multiline":!/[\b\t\n\f\r']/.test(be)&&/"/.test(be)&&(Ee="string-literal")),ie(be,Ee)}function ie(be,Ce){switch(Ce||(Ce=G(be)),Ce){case"string-multiline":return ee(be);case"string":return Z(be);case"string-literal":return Y(be);case"integer":return oe(be);case"float":return ae(be);case"boolean":return ce(be);case"datetime":return le(be);case"array":return ue(be.filter(Ee=>G(Ee)!=="null"&&G(Ee)!=="undefined"&&G(Ee)!=="nan"));case"table":return pe(be);default:throw T(Ce)}}function oe(be){return String(be).replace(/\B(?=(\d{3})+(?!\d))/g,"_")}function ae(be){if(be===1/0)return"inf";if(be===-1/0)return"-inf";if(Object.is(be,NaN))return"nan";if(Object.is(be,-0))return"-0.0";var Ce=String(be).split("."),Ee=Ce[0],ye=Ce[1]||0;return oe(Ee)+"."+ye}function ce(be){return String(be)}function le(be){return be.toISOString()}function he(be){return be==="float"||be==="integer"}function me(be){var Ce=G(be[0]);return be.every(Ee=>G(Ee)===Ce)?Ce:be.every(Ee=>he(G(Ee)))?"float":"mixed"}function fe(be){const Ce=me(be);if(Ce==="mixed")throw R();return Ce}function ue(be){be=I(be);const Ce=fe(be);var Ee="[",ye=be.map(Se=>ie(Se,Ce));return ye.join(", ").length>60||/\n/.test(ye)?Ee+=`
  `+ye.join(`,
  `)+`
`:Ee+=" "+ye.join(", ")+(ye.length>0?" ":""),Ee+"]"}function pe(be){be=I(be);var Ce=[];return Object.keys(be).forEach(Ee=>{Ce.push(V(Ee)+" = "+te(be[Ee],!1))}),"{ "+Ce.join(", ")+(Ce.length>0?" ":"")+"}"}function ge(be,Ce,Ee,ye){var Se=G(ye);if(Se==="array")return _e(be,Ce,Ee,ye);if(Se==="table")return we(be,Ce,Ee,ye);throw T(Se)}function _e(be,Ce,Ee,ye){ye=I(ye),fe(ye);var Se=G(ye[0]);if(Se!=="table")throw T(Se);var Te=be+V(Ee),Ae="";return ye.forEach(Be=>{Ae.length>0&&(Ae+=`
`),Ae+=Ce+"[["+Te+`]]
`,Ae+=L(Te+".",Ce,Be)}),Ae}function we(be,Ce,Ee,ye){var Se=be+V(Ee),Te="";return P(ye).length>0&&(Te+=Ce+"["+Se+`]
`),Te+L(Se+".",Ce,ye)}return stringify.exports}var hasRequiredToml;function requireToml(){return hasRequiredToml||(hasRequiredToml=1,toml.parse=requireParse(),toml.stringify=requireStringify()),toml}var tomlExports=requireToml();const TOML=getDefaultExportFromCjs(tomlExports);function replaceInfinityValues(_){if(_===null||typeof _!="object")return _===1/0?1e308:_===-1/0?-1e308:_;if(Array.isArray(_))return _.map(replaceInfinityValues);const T={};for(const[R,P]of Object.entries(_))T[R]=replaceInfinityValues(P);return T}function parseToml(_){return TOML.parse(_)}function parseTomlWithDefaults(_){const T=parseToml(_);return mergeWithDefaults(T)}function toToml(_){const T=replaceInfinityValues(structuredClone(_));return TOML.stringify(T)}function parseSimulationConfigToml(_){const T=TOML.parse(_);let R=[];T.parameter_ranges&&Array.isArray(T.parameter_ranges)&&(R=T.parameter_ranges.map(G=>{const V=G;return{path:String(V.path??""),min:Number(V.min??0),max:Number(V.max??0),steps:Number(V.steps??1)}}),delete T.parameter_ranges);let P={...DEFAULT_TIME_SAMPLES};if(T.time_samples&&typeof T.time_samples=="object"){const G=T.time_samples;P={start:Number(G.start??DEFAULT_TIME_SAMPLES.start),end:Number(G.end??DEFAULT_TIME_SAMPLES.end),step:Number(G.step??DEFAULT_TIME_SAMPLES.step)},delete T.time_samples}const O=T.seeds_per_config,I=typeof O=="number"&&!Number.isNaN(O)?O:1;return"seeds_per_config"in T&&delete T.seeds_per_config,{params:mergeWithDefaults(T),parameterRanges:R,timeSamples:P,seedsPerConfig:I}}function toSimulationConfigToml(_){const T=replaceInfinityValues(structuredClone(_.params));return T.parameter_ranges=_.parameterRanges??[],T.time_samples=_.timeSamples??DEFAULT_TIME_SAMPLES,T.seeds_per_config=_.seedsPerConfig??1,TOML.stringify(T)}const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(_){let T=_.length;for(;--T>=0;)_[T]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(_,T,R,P,O){this.static_tree=_,this.extra_bits=T,this.extra_base=R,this.elems=P,this.max_length=O,this.has_stree=_&&_.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(_,T){this.dyn_tree=_,this.max_code=0,this.stat_desc=T}const d_code=_=>_<256?_dist_code[_]:_dist_code[256+(_>>>7)],put_short=(_,T)=>{_.pending_buf[_.pending++]=T&255,_.pending_buf[_.pending++]=T>>>8&255},send_bits=(_,T,R)=>{_.bi_valid>Buf_size-R?(_.bi_buf|=T<<_.bi_valid&65535,put_short(_,_.bi_buf),_.bi_buf=T>>Buf_size-_.bi_valid,_.bi_valid+=R-Buf_size):(_.bi_buf|=T<<_.bi_valid&65535,_.bi_valid+=R)},send_code=(_,T,R)=>{send_bits(_,R[T*2],R[T*2+1])},bi_reverse=(_,T)=>{let R=0;do R|=_&1,_>>>=1,R<<=1;while(--T>0);return R>>>1},bi_flush=_=>{_.bi_valid===16?(put_short(_,_.bi_buf),_.bi_buf=0,_.bi_valid=0):_.bi_valid>=8&&(_.pending_buf[_.pending++]=_.bi_buf&255,_.bi_buf>>=8,_.bi_valid-=8)},gen_bitlen=(_,T)=>{const R=T.dyn_tree,P=T.max_code,O=T.stat_desc.static_tree,I=T.stat_desc.has_stree,L=T.stat_desc.extra_bits,U=T.stat_desc.extra_base,G=T.stat_desc.max_length;let V,Z,Y,W,J,ee,te=0;for(W=0;W<=MAX_BITS$1;W++)_.bl_count[W]=0;for(R[_.heap[_.heap_max]*2+1]=0,V=_.heap_max+1;V<HEAP_SIZE$1;V++)Z=_.heap[V],W=R[R[Z*2+1]*2+1]+1,W>G&&(W=G,te++),R[Z*2+1]=W,!(Z>P)&&(_.bl_count[W]++,J=0,Z>=U&&(J=L[Z-U]),ee=R[Z*2],_.opt_len+=ee*(W+J),I&&(_.static_len+=ee*(O[Z*2+1]+J)));if(te!==0){do{for(W=G-1;_.bl_count[W]===0;)W--;_.bl_count[W]--,_.bl_count[W+1]+=2,_.bl_count[G]--,te-=2}while(te>0);for(W=G;W!==0;W--)for(Z=_.bl_count[W];Z!==0;)Y=_.heap[--V],!(Y>P)&&(R[Y*2+1]!==W&&(_.opt_len+=(W-R[Y*2+1])*R[Y*2],R[Y*2+1]=W),Z--)}},gen_codes=(_,T,R)=>{const P=new Array(MAX_BITS$1+1);let O=0,I,L;for(I=1;I<=MAX_BITS$1;I++)O=O+R[I-1]<<1,P[I]=O;for(L=0;L<=T;L++){let U=_[L*2+1];U!==0&&(_[L*2]=bi_reverse(P[U]++,U))}},tr_static_init=()=>{let _,T,R,P,O;const I=new Array(MAX_BITS$1+1);for(R=0,P=0;P<LENGTH_CODES$1-1;P++)for(base_length[P]=R,_=0;_<1<<extra_lbits[P];_++)_length_code[R++]=P;for(_length_code[R-1]=P,O=0,P=0;P<16;P++)for(base_dist[P]=O,_=0;_<1<<extra_dbits[P];_++)_dist_code[O++]=P;for(O>>=7;P<D_CODES$1;P++)for(base_dist[P]=O<<7,_=0;_<1<<extra_dbits[P]-7;_++)_dist_code[256+O++]=P;for(T=0;T<=MAX_BITS$1;T++)I[T]=0;for(_=0;_<=143;)static_ltree[_*2+1]=8,_++,I[8]++;for(;_<=255;)static_ltree[_*2+1]=9,_++,I[9]++;for(;_<=279;)static_ltree[_*2+1]=7,_++,I[7]++;for(;_<=287;)static_ltree[_*2+1]=8,_++,I[8]++;for(gen_codes(static_ltree,L_CODES$1+1,I),_=0;_<D_CODES$1;_++)static_dtree[_*2+1]=5,static_dtree[_*2]=bi_reverse(_,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=_=>{let T;for(T=0;T<L_CODES$1;T++)_.dyn_ltree[T*2]=0;for(T=0;T<D_CODES$1;T++)_.dyn_dtree[T*2]=0;for(T=0;T<BL_CODES$1;T++)_.bl_tree[T*2]=0;_.dyn_ltree[END_BLOCK*2]=1,_.opt_len=_.static_len=0,_.sym_next=_.matches=0},bi_windup=_=>{_.bi_valid>8?put_short(_,_.bi_buf):_.bi_valid>0&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0},smaller=(_,T,R,P)=>{const O=T*2,I=R*2;return _[O]<_[I]||_[O]===_[I]&&P[T]<=P[R]},pqdownheap=(_,T,R)=>{const P=_.heap[R];let O=R<<1;for(;O<=_.heap_len&&(O<_.heap_len&&smaller(T,_.heap[O+1],_.heap[O],_.depth)&&O++,!smaller(T,P,_.heap[O],_.depth));)_.heap[R]=_.heap[O],R=O,O<<=1;_.heap[R]=P},compress_block=(_,T,R)=>{let P,O,I=0,L,U;if(_.sym_next!==0)do P=_.pending_buf[_.sym_buf+I++]&255,P+=(_.pending_buf[_.sym_buf+I++]&255)<<8,O=_.pending_buf[_.sym_buf+I++],P===0?send_code(_,O,T):(L=_length_code[O],send_code(_,L+LITERALS$1+1,T),U=extra_lbits[L],U!==0&&(O-=base_length[L],send_bits(_,O,U)),P--,L=d_code(P),send_code(_,L,R),U=extra_dbits[L],U!==0&&(P-=base_dist[L],send_bits(_,P,U)));while(I<_.sym_next);send_code(_,END_BLOCK,T)},build_tree=(_,T)=>{const R=T.dyn_tree,P=T.stat_desc.static_tree,O=T.stat_desc.has_stree,I=T.stat_desc.elems;let L,U,G=-1,V;for(_.heap_len=0,_.heap_max=HEAP_SIZE$1,L=0;L<I;L++)R[L*2]!==0?(_.heap[++_.heap_len]=G=L,_.depth[L]=0):R[L*2+1]=0;for(;_.heap_len<2;)V=_.heap[++_.heap_len]=G<2?++G:0,R[V*2]=1,_.depth[V]=0,_.opt_len--,O&&(_.static_len-=P[V*2+1]);for(T.max_code=G,L=_.heap_len>>1;L>=1;L--)pqdownheap(_,R,L);V=I;do L=_.heap[1],_.heap[1]=_.heap[_.heap_len--],pqdownheap(_,R,1),U=_.heap[1],_.heap[--_.heap_max]=L,_.heap[--_.heap_max]=U,R[V*2]=R[L*2]+R[U*2],_.depth[V]=(_.depth[L]>=_.depth[U]?_.depth[L]:_.depth[U])+1,R[L*2+1]=R[U*2+1]=V,_.heap[1]=V++,pqdownheap(_,R,1);while(_.heap_len>=2);_.heap[--_.heap_max]=_.heap[1],gen_bitlen(_,T),gen_codes(R,G,_.bl_count)},scan_tree=(_,T,R)=>{let P,O=-1,I,L=T[1],U=0,G=7,V=4;for(L===0&&(G=138,V=3),T[(R+1)*2+1]=65535,P=0;P<=R;P++)I=L,L=T[(P+1)*2+1],!(++U<G&&I===L)&&(U<V?_.bl_tree[I*2]+=U:I!==0?(I!==O&&_.bl_tree[I*2]++,_.bl_tree[REP_3_6*2]++):U<=10?_.bl_tree[REPZ_3_10*2]++:_.bl_tree[REPZ_11_138*2]++,U=0,O=I,L===0?(G=138,V=3):I===L?(G=6,V=3):(G=7,V=4))},send_tree=(_,T,R)=>{let P,O=-1,I,L=T[1],U=0,G=7,V=4;for(L===0&&(G=138,V=3),P=0;P<=R;P++)if(I=L,L=T[(P+1)*2+1],!(++U<G&&I===L)){if(U<V)do send_code(_,I,_.bl_tree);while(--U!==0);else I!==0?(I!==O&&(send_code(_,I,_.bl_tree),U--),send_code(_,REP_3_6,_.bl_tree),send_bits(_,U-3,2)):U<=10?(send_code(_,REPZ_3_10,_.bl_tree),send_bits(_,U-3,3)):(send_code(_,REPZ_11_138,_.bl_tree),send_bits(_,U-11,7));U=0,O=I,L===0?(G=138,V=3):I===L?(G=6,V=3):(G=7,V=4)}},build_bl_tree=_=>{let T;for(scan_tree(_,_.dyn_ltree,_.l_desc.max_code),scan_tree(_,_.dyn_dtree,_.d_desc.max_code),build_tree(_,_.bl_desc),T=BL_CODES$1-1;T>=3&&_.bl_tree[bl_order[T]*2+1]===0;T--);return _.opt_len+=3*(T+1)+5+5+4,T},send_all_trees=(_,T,R,P)=>{let O;for(send_bits(_,T-257,5),send_bits(_,R-1,5),send_bits(_,P-4,4),O=0;O<P;O++)send_bits(_,_.bl_tree[bl_order[O]*2+1],3);send_tree(_,_.dyn_ltree,T-1),send_tree(_,_.dyn_dtree,R-1)},detect_data_type=_=>{let T=4093624447,R;for(R=0;R<=31;R++,T>>>=1)if(T&1&&_.dyn_ltree[R*2]!==0)return Z_BINARY;if(_.dyn_ltree[18]!==0||_.dyn_ltree[20]!==0||_.dyn_ltree[26]!==0)return Z_TEXT;for(R=32;R<LITERALS$1;R++)if(_.dyn_ltree[R*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=_=>{static_init_done||(tr_static_init(),static_init_done=!0),_.l_desc=new TreeDesc(_.dyn_ltree,static_l_desc),_.d_desc=new TreeDesc(_.dyn_dtree,static_d_desc),_.bl_desc=new TreeDesc(_.bl_tree,static_bl_desc),_.bi_buf=0,_.bi_valid=0,init_block(_)},_tr_stored_block$1=(_,T,R,P)=>{send_bits(_,(STORED_BLOCK<<1)+(P?1:0),3),bi_windup(_),put_short(_,R),put_short(_,~R),R&&_.pending_buf.set(_.window.subarray(T,T+R),_.pending),_.pending+=R},_tr_align$1=_=>{send_bits(_,STATIC_TREES<<1,3),send_code(_,END_BLOCK,static_ltree),bi_flush(_)},_tr_flush_block$1=(_,T,R,P)=>{let O,I,L=0;_.level>0?(_.strm.data_type===Z_UNKNOWN$1&&(_.strm.data_type=detect_data_type(_)),build_tree(_,_.l_desc),build_tree(_,_.d_desc),L=build_bl_tree(_),O=_.opt_len+3+7>>>3,I=_.static_len+3+7>>>3,I<=O&&(O=I)):O=I=R+5,R+4<=O&&T!==-1?_tr_stored_block$1(_,T,R,P):_.strategy===Z_FIXED$1||I===O?(send_bits(_,(STATIC_TREES<<1)+(P?1:0),3),compress_block(_,static_ltree,static_dtree)):(send_bits(_,(DYN_TREES<<1)+(P?1:0),3),send_all_trees(_,_.l_desc.max_code+1,_.d_desc.max_code+1,L+1),compress_block(_,_.dyn_ltree,_.dyn_dtree)),init_block(_),P&&bi_windup(_)},_tr_tally$1=(_,T,R)=>(_.pending_buf[_.sym_buf+_.sym_next++]=T,_.pending_buf[_.sym_buf+_.sym_next++]=T>>8,_.pending_buf[_.sym_buf+_.sym_next++]=R,T===0?_.dyn_ltree[R*2]++:(_.matches++,T--,_.dyn_ltree[(_length_code[R]+LITERALS$1+1)*2]++,_.dyn_dtree[d_code(T)*2]++),_.sym_next===_.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(_,T,R,P)=>{let O=_&65535|0,I=_>>>16&65535|0,L=0;for(;R!==0;){L=R>2e3?2e3:R,R-=L;do O=O+T[P++]|0,I=I+O|0;while(--L);O%=65521,I%=65521}return O|I<<16|0};var adler32_1=adler32;const makeTable=()=>{let _,T=[];for(var R=0;R<256;R++){_=R;for(var P=0;P<8;P++)_=_&1?3988292384^_>>>1:_>>>1;T[R]=_}return T},crcTable=new Uint32Array(makeTable()),crc32=(_,T,R,P)=>{const O=crcTable,I=P+R;_^=-1;for(let L=P;L<I;L++)_=_>>>8^O[(_^T[L])&255];return _^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(_,T)=>(_.msg=messages[T],T),rank=_=>_*2-(_>4?9:0),zero=_=>{let T=_.length;for(;--T>=0;)_[T]=0},slide_hash=_=>{let T,R,P,O=_.w_size;T=_.hash_size,P=T;do R=_.head[--P],_.head[P]=R>=O?R-O:0;while(--T);T=O,P=T;do R=_.prev[--P],_.prev[P]=R>=O?R-O:0;while(--T)};let HASH_ZLIB=(_,T,R)=>(T<<_.hash_shift^R)&_.hash_mask,HASH=HASH_ZLIB;const flush_pending=_=>{const T=_.state;let R=T.pending;R>_.avail_out&&(R=_.avail_out),R!==0&&(_.output.set(T.pending_buf.subarray(T.pending_out,T.pending_out+R),_.next_out),_.next_out+=R,T.pending_out+=R,_.total_out+=R,_.avail_out-=R,T.pending-=R,T.pending===0&&(T.pending_out=0))},flush_block_only=(_,T)=>{_tr_flush_block(_,_.block_start>=0?_.block_start:-1,_.strstart-_.block_start,T),_.block_start=_.strstart,flush_pending(_.strm)},put_byte=(_,T)=>{_.pending_buf[_.pending++]=T},putShortMSB=(_,T)=>{_.pending_buf[_.pending++]=T>>>8&255,_.pending_buf[_.pending++]=T&255},read_buf=(_,T,R,P)=>{let O=_.avail_in;return O>P&&(O=P),O===0?0:(_.avail_in-=O,T.set(_.input.subarray(_.next_in,_.next_in+O),R),_.state.wrap===1?_.adler=adler32_1(_.adler,T,O,R):_.state.wrap===2&&(_.adler=crc32_1(_.adler,T,O,R)),_.next_in+=O,_.total_in+=O,O)},longest_match=(_,T)=>{let R=_.max_chain_length,P=_.strstart,O,I,L=_.prev_length,U=_.nice_match;const G=_.strstart>_.w_size-MIN_LOOKAHEAD?_.strstart-(_.w_size-MIN_LOOKAHEAD):0,V=_.window,Z=_.w_mask,Y=_.prev,W=_.strstart+MAX_MATCH;let J=V[P+L-1],ee=V[P+L];_.prev_length>=_.good_match&&(R>>=2),U>_.lookahead&&(U=_.lookahead);do if(O=T,!(V[O+L]!==ee||V[O+L-1]!==J||V[O]!==V[P]||V[++O]!==V[P+1])){P+=2,O++;do;while(V[++P]===V[++O]&&V[++P]===V[++O]&&V[++P]===V[++O]&&V[++P]===V[++O]&&V[++P]===V[++O]&&V[++P]===V[++O]&&V[++P]===V[++O]&&V[++P]===V[++O]&&P<W);if(I=MAX_MATCH-(W-P),P=W-MAX_MATCH,I>L){if(_.match_start=T,L=I,I>=U)break;J=V[P+L-1],ee=V[P+L]}}while((T=Y[T&Z])>G&&--R!==0);return L<=_.lookahead?L:_.lookahead},fill_window=_=>{const T=_.w_size;let R,P,O;do{if(P=_.window_size-_.lookahead-_.strstart,_.strstart>=T+(T-MIN_LOOKAHEAD)&&(_.window.set(_.window.subarray(T,T+T-P),0),_.match_start-=T,_.strstart-=T,_.block_start-=T,_.insert>_.strstart&&(_.insert=_.strstart),slide_hash(_),P+=T),_.strm.avail_in===0)break;if(R=read_buf(_.strm,_.window,_.strstart+_.lookahead,P),_.lookahead+=R,_.lookahead+_.insert>=MIN_MATCH)for(O=_.strstart-_.insert,_.ins_h=_.window[O],_.ins_h=HASH(_,_.ins_h,_.window[O+1]);_.insert&&(_.ins_h=HASH(_,_.ins_h,_.window[O+MIN_MATCH-1]),_.prev[O&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=O,O++,_.insert--,!(_.lookahead+_.insert<MIN_MATCH)););}while(_.lookahead<MIN_LOOKAHEAD&&_.strm.avail_in!==0)},deflate_stored=(_,T)=>{let R=_.pending_buf_size-5>_.w_size?_.w_size:_.pending_buf_size-5,P,O,I,L=0,U=_.strm.avail_in;do{if(P=65535,I=_.bi_valid+42>>3,_.strm.avail_out<I||(I=_.strm.avail_out-I,O=_.strstart-_.block_start,P>O+_.strm.avail_in&&(P=O+_.strm.avail_in),P>I&&(P=I),P<R&&(P===0&&T!==Z_FINISH$3||T===Z_NO_FLUSH$2||P!==O+_.strm.avail_in)))break;L=T===Z_FINISH$3&&P===O+_.strm.avail_in?1:0,_tr_stored_block(_,0,0,L),_.pending_buf[_.pending-4]=P,_.pending_buf[_.pending-3]=P>>8,_.pending_buf[_.pending-2]=~P,_.pending_buf[_.pending-1]=~P>>8,flush_pending(_.strm),O&&(O>P&&(O=P),_.strm.output.set(_.window.subarray(_.block_start,_.block_start+O),_.strm.next_out),_.strm.next_out+=O,_.strm.avail_out-=O,_.strm.total_out+=O,_.block_start+=O,P-=O),P&&(read_buf(_.strm,_.strm.output,_.strm.next_out,P),_.strm.next_out+=P,_.strm.avail_out-=P,_.strm.total_out+=P)}while(L===0);return U-=_.strm.avail_in,U&&(U>=_.w_size?(_.matches=2,_.window.set(_.strm.input.subarray(_.strm.next_in-_.w_size,_.strm.next_in),0),_.strstart=_.w_size,_.insert=_.strstart):(_.window_size-_.strstart<=U&&(_.strstart-=_.w_size,_.window.set(_.window.subarray(_.w_size,_.w_size+_.strstart),0),_.matches<2&&_.matches++,_.insert>_.strstart&&(_.insert=_.strstart)),_.window.set(_.strm.input.subarray(_.strm.next_in-U,_.strm.next_in),_.strstart),_.strstart+=U,_.insert+=U>_.w_size-_.insert?_.w_size-_.insert:U),_.block_start=_.strstart),_.high_water<_.strstart&&(_.high_water=_.strstart),L?BS_FINISH_DONE:T!==Z_NO_FLUSH$2&&T!==Z_FINISH$3&&_.strm.avail_in===0&&_.strstart===_.block_start?BS_BLOCK_DONE:(I=_.window_size-_.strstart,_.strm.avail_in>I&&_.block_start>=_.w_size&&(_.block_start-=_.w_size,_.strstart-=_.w_size,_.window.set(_.window.subarray(_.w_size,_.w_size+_.strstart),0),_.matches<2&&_.matches++,I+=_.w_size,_.insert>_.strstart&&(_.insert=_.strstart)),I>_.strm.avail_in&&(I=_.strm.avail_in),I&&(read_buf(_.strm,_.window,_.strstart,I),_.strstart+=I,_.insert+=I>_.w_size-_.insert?_.w_size-_.insert:I),_.high_water<_.strstart&&(_.high_water=_.strstart),I=_.bi_valid+42>>3,I=_.pending_buf_size-I>65535?65535:_.pending_buf_size-I,R=I>_.w_size?_.w_size:I,O=_.strstart-_.block_start,(O>=R||(O||T===Z_FINISH$3)&&T!==Z_NO_FLUSH$2&&_.strm.avail_in===0&&O<=I)&&(P=O>I?I:O,L=T===Z_FINISH$3&&_.strm.avail_in===0&&P===O?1:0,_tr_stored_block(_,_.block_start,P,L),_.block_start+=P,flush_pending(_.strm)),L?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(_,T)=>{let R,P;for(;;){if(_.lookahead<MIN_LOOKAHEAD){if(fill_window(_),_.lookahead<MIN_LOOKAHEAD&&T===Z_NO_FLUSH$2)return BS_NEED_MORE;if(_.lookahead===0)break}if(R=0,_.lookahead>=MIN_MATCH&&(_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),R=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),R!==0&&_.strstart-R<=_.w_size-MIN_LOOKAHEAD&&(_.match_length=longest_match(_,R)),_.match_length>=MIN_MATCH)if(P=_tr_tally(_,_.strstart-_.match_start,_.match_length-MIN_MATCH),_.lookahead-=_.match_length,_.match_length<=_.max_lazy_match&&_.lookahead>=MIN_MATCH){_.match_length--;do _.strstart++,_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),R=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart;while(--_.match_length!==0);_.strstart++}else _.strstart+=_.match_length,_.match_length=0,_.ins_h=_.window[_.strstart],_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+1]);else P=_tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++;if(P&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}return _.insert=_.strstart<MIN_MATCH-1?_.strstart:MIN_MATCH-1,T===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(_,T)=>{let R,P,O;for(;;){if(_.lookahead<MIN_LOOKAHEAD){if(fill_window(_),_.lookahead<MIN_LOOKAHEAD&&T===Z_NO_FLUSH$2)return BS_NEED_MORE;if(_.lookahead===0)break}if(R=0,_.lookahead>=MIN_MATCH&&(_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),R=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),_.prev_length=_.match_length,_.prev_match=_.match_start,_.match_length=MIN_MATCH-1,R!==0&&_.prev_length<_.max_lazy_match&&_.strstart-R<=_.w_size-MIN_LOOKAHEAD&&(_.match_length=longest_match(_,R),_.match_length<=5&&(_.strategy===Z_FILTERED||_.match_length===MIN_MATCH&&_.strstart-_.match_start>4096)&&(_.match_length=MIN_MATCH-1)),_.prev_length>=MIN_MATCH&&_.match_length<=_.prev_length){O=_.strstart+_.lookahead-MIN_MATCH,P=_tr_tally(_,_.strstart-1-_.prev_match,_.prev_length-MIN_MATCH),_.lookahead-=_.prev_length-1,_.prev_length-=2;do++_.strstart<=O&&(_.ins_h=HASH(_,_.ins_h,_.window[_.strstart+MIN_MATCH-1]),R=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart);while(--_.prev_length!==0);if(_.match_available=0,_.match_length=MIN_MATCH-1,_.strstart++,P&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}else if(_.match_available){if(P=_tr_tally(_,0,_.window[_.strstart-1]),P&&flush_block_only(_,!1),_.strstart++,_.lookahead--,_.strm.avail_out===0)return BS_NEED_MORE}else _.match_available=1,_.strstart++,_.lookahead--}return _.match_available&&(P=_tr_tally(_,0,_.window[_.strstart-1]),_.match_available=0),_.insert=_.strstart<MIN_MATCH-1?_.strstart:MIN_MATCH-1,T===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(_,T)=>{let R,P,O,I;const L=_.window;for(;;){if(_.lookahead<=MAX_MATCH){if(fill_window(_),_.lookahead<=MAX_MATCH&&T===Z_NO_FLUSH$2)return BS_NEED_MORE;if(_.lookahead===0)break}if(_.match_length=0,_.lookahead>=MIN_MATCH&&_.strstart>0&&(O=_.strstart-1,P=L[O],P===L[++O]&&P===L[++O]&&P===L[++O])){I=_.strstart+MAX_MATCH;do;while(P===L[++O]&&P===L[++O]&&P===L[++O]&&P===L[++O]&&P===L[++O]&&P===L[++O]&&P===L[++O]&&P===L[++O]&&O<I);_.match_length=MAX_MATCH-(I-O),_.match_length>_.lookahead&&(_.match_length=_.lookahead)}if(_.match_length>=MIN_MATCH?(R=_tr_tally(_,1,_.match_length-MIN_MATCH),_.lookahead-=_.match_length,_.strstart+=_.match_length,_.match_length=0):(R=_tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++),R&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}return _.insert=0,T===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(_,T)=>{let R;for(;;){if(_.lookahead===0&&(fill_window(_),_.lookahead===0)){if(T===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(_.match_length=0,R=_tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++,R&&(flush_block_only(_,!1),_.strm.avail_out===0))return BS_NEED_MORE}return _.insert=0,T===Z_FINISH$3?(flush_block_only(_,!0),_.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):_.sym_next&&(flush_block_only(_,!1),_.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(_,T,R,P,O){this.good_length=_,this.max_lazy=T,this.nice_length=R,this.max_chain=P,this.func=O}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=_=>{_.window_size=2*_.w_size,zero(_.head),_.max_lazy_match=configuration_table[_.level].max_lazy,_.good_match=configuration_table[_.level].good_length,_.nice_match=configuration_table[_.level].nice_length,_.max_chain_length=configuration_table[_.level].max_chain,_.strstart=0,_.block_start=0,_.lookahead=0,_.insert=0,_.match_length=_.prev_length=MIN_MATCH-1,_.match_available=0,_.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=_=>{if(!_)return 1;const T=_.state;return!T||T.strm!==_||T.status!==INIT_STATE&&T.status!==GZIP_STATE&&T.status!==EXTRA_STATE&&T.status!==NAME_STATE&&T.status!==COMMENT_STATE&&T.status!==HCRC_STATE&&T.status!==BUSY_STATE&&T.status!==FINISH_STATE?1:0},deflateResetKeep=_=>{if(deflateStateCheck(_))return err(_,Z_STREAM_ERROR$2);_.total_in=_.total_out=0,_.data_type=Z_UNKNOWN;const T=_.state;return T.pending=0,T.pending_out=0,T.wrap<0&&(T.wrap=-T.wrap),T.status=T.wrap===2?GZIP_STATE:T.wrap?INIT_STATE:BUSY_STATE,_.adler=T.wrap===2?0:1,T.last_flush=-2,_tr_init(T),Z_OK$3},deflateReset=_=>{const T=deflateResetKeep(_);return T===Z_OK$3&&lm_init(_.state),T},deflateSetHeader=(_,T)=>deflateStateCheck(_)||_.state.wrap!==2?Z_STREAM_ERROR$2:(_.state.gzhead=T,Z_OK$3),deflateInit2=(_,T,R,P,O,I)=>{if(!_)return Z_STREAM_ERROR$2;let L=1;if(T===Z_DEFAULT_COMPRESSION$1&&(T=6),P<0?(L=0,P=-P):P>15&&(L=2,P-=16),O<1||O>MAX_MEM_LEVEL||R!==Z_DEFLATED$2||P<8||P>15||T<0||T>9||I<0||I>Z_FIXED||P===8&&L!==1)return err(_,Z_STREAM_ERROR$2);P===8&&(P=9);const U=new DeflateState;return _.state=U,U.strm=_,U.status=INIT_STATE,U.wrap=L,U.gzhead=null,U.w_bits=P,U.w_size=1<<U.w_bits,U.w_mask=U.w_size-1,U.hash_bits=O+7,U.hash_size=1<<U.hash_bits,U.hash_mask=U.hash_size-1,U.hash_shift=~~((U.hash_bits+MIN_MATCH-1)/MIN_MATCH),U.window=new Uint8Array(U.w_size*2),U.head=new Uint16Array(U.hash_size),U.prev=new Uint16Array(U.w_size),U.lit_bufsize=1<<O+6,U.pending_buf_size=U.lit_bufsize*4,U.pending_buf=new Uint8Array(U.pending_buf_size),U.sym_buf=U.lit_bufsize,U.sym_end=(U.lit_bufsize-1)*3,U.level=T,U.strategy=I,U.method=R,deflateReset(_)},deflateInit=(_,T)=>deflateInit2(_,T,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(_,T)=>{if(deflateStateCheck(_)||T>Z_BLOCK$1||T<0)return _?err(_,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const R=_.state;if(!_.output||_.avail_in!==0&&!_.input||R.status===FINISH_STATE&&T!==Z_FINISH$3)return err(_,_.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const P=R.last_flush;if(R.last_flush=T,R.pending!==0){if(flush_pending(_),_.avail_out===0)return R.last_flush=-1,Z_OK$3}else if(_.avail_in===0&&rank(T)<=rank(P)&&T!==Z_FINISH$3)return err(_,Z_BUF_ERROR$1);if(R.status===FINISH_STATE&&_.avail_in!==0)return err(_,Z_BUF_ERROR$1);if(R.status===INIT_STATE&&R.wrap===0&&(R.status=BUSY_STATE),R.status===INIT_STATE){let O=Z_DEFLATED$2+(R.w_bits-8<<4)<<8,I=-1;if(R.strategy>=Z_HUFFMAN_ONLY||R.level<2?I=0:R.level<6?I=1:R.level===6?I=2:I=3,O|=I<<6,R.strstart!==0&&(O|=PRESET_DICT),O+=31-O%31,putShortMSB(R,O),R.strstart!==0&&(putShortMSB(R,_.adler>>>16),putShortMSB(R,_.adler&65535)),_.adler=1,R.status=BUSY_STATE,flush_pending(_),R.pending!==0)return R.last_flush=-1,Z_OK$3}if(R.status===GZIP_STATE){if(_.adler=0,put_byte(R,31),put_byte(R,139),put_byte(R,8),R.gzhead)put_byte(R,(R.gzhead.text?1:0)+(R.gzhead.hcrc?2:0)+(R.gzhead.extra?4:0)+(R.gzhead.name?8:0)+(R.gzhead.comment?16:0)),put_byte(R,R.gzhead.time&255),put_byte(R,R.gzhead.time>>8&255),put_byte(R,R.gzhead.time>>16&255),put_byte(R,R.gzhead.time>>24&255),put_byte(R,R.level===9?2:R.strategy>=Z_HUFFMAN_ONLY||R.level<2?4:0),put_byte(R,R.gzhead.os&255),R.gzhead.extra&&R.gzhead.extra.length&&(put_byte(R,R.gzhead.extra.length&255),put_byte(R,R.gzhead.extra.length>>8&255)),R.gzhead.hcrc&&(_.adler=crc32_1(_.adler,R.pending_buf,R.pending,0)),R.gzindex=0,R.status=EXTRA_STATE;else if(put_byte(R,0),put_byte(R,0),put_byte(R,0),put_byte(R,0),put_byte(R,0),put_byte(R,R.level===9?2:R.strategy>=Z_HUFFMAN_ONLY||R.level<2?4:0),put_byte(R,OS_CODE),R.status=BUSY_STATE,flush_pending(_),R.pending!==0)return R.last_flush=-1,Z_OK$3}if(R.status===EXTRA_STATE){if(R.gzhead.extra){let O=R.pending,I=(R.gzhead.extra.length&65535)-R.gzindex;for(;R.pending+I>R.pending_buf_size;){let U=R.pending_buf_size-R.pending;if(R.pending_buf.set(R.gzhead.extra.subarray(R.gzindex,R.gzindex+U),R.pending),R.pending=R.pending_buf_size,R.gzhead.hcrc&&R.pending>O&&(_.adler=crc32_1(_.adler,R.pending_buf,R.pending-O,O)),R.gzindex+=U,flush_pending(_),R.pending!==0)return R.last_flush=-1,Z_OK$3;O=0,I-=U}let L=new Uint8Array(R.gzhead.extra);R.pending_buf.set(L.subarray(R.gzindex,R.gzindex+I),R.pending),R.pending+=I,R.gzhead.hcrc&&R.pending>O&&(_.adler=crc32_1(_.adler,R.pending_buf,R.pending-O,O)),R.gzindex=0}R.status=NAME_STATE}if(R.status===NAME_STATE){if(R.gzhead.name){let O=R.pending,I;do{if(R.pending===R.pending_buf_size){if(R.gzhead.hcrc&&R.pending>O&&(_.adler=crc32_1(_.adler,R.pending_buf,R.pending-O,O)),flush_pending(_),R.pending!==0)return R.last_flush=-1,Z_OK$3;O=0}R.gzindex<R.gzhead.name.length?I=R.gzhead.name.charCodeAt(R.gzindex++)&255:I=0,put_byte(R,I)}while(I!==0);R.gzhead.hcrc&&R.pending>O&&(_.adler=crc32_1(_.adler,R.pending_buf,R.pending-O,O)),R.gzindex=0}R.status=COMMENT_STATE}if(R.status===COMMENT_STATE){if(R.gzhead.comment){let O=R.pending,I;do{if(R.pending===R.pending_buf_size){if(R.gzhead.hcrc&&R.pending>O&&(_.adler=crc32_1(_.adler,R.pending_buf,R.pending-O,O)),flush_pending(_),R.pending!==0)return R.last_flush=-1,Z_OK$3;O=0}R.gzindex<R.gzhead.comment.length?I=R.gzhead.comment.charCodeAt(R.gzindex++)&255:I=0,put_byte(R,I)}while(I!==0);R.gzhead.hcrc&&R.pending>O&&(_.adler=crc32_1(_.adler,R.pending_buf,R.pending-O,O))}R.status=HCRC_STATE}if(R.status===HCRC_STATE){if(R.gzhead.hcrc){if(R.pending+2>R.pending_buf_size&&(flush_pending(_),R.pending!==0))return R.last_flush=-1,Z_OK$3;put_byte(R,_.adler&255),put_byte(R,_.adler>>8&255),_.adler=0}if(R.status=BUSY_STATE,flush_pending(_),R.pending!==0)return R.last_flush=-1,Z_OK$3}if(_.avail_in!==0||R.lookahead!==0||T!==Z_NO_FLUSH$2&&R.status!==FINISH_STATE){let O=R.level===0?deflate_stored(R,T):R.strategy===Z_HUFFMAN_ONLY?deflate_huff(R,T):R.strategy===Z_RLE?deflate_rle(R,T):configuration_table[R.level].func(R,T);if((O===BS_FINISH_STARTED||O===BS_FINISH_DONE)&&(R.status=FINISH_STATE),O===BS_NEED_MORE||O===BS_FINISH_STARTED)return _.avail_out===0&&(R.last_flush=-1),Z_OK$3;if(O===BS_BLOCK_DONE&&(T===Z_PARTIAL_FLUSH?_tr_align(R):T!==Z_BLOCK$1&&(_tr_stored_block(R,0,0,!1),T===Z_FULL_FLUSH$1&&(zero(R.head),R.lookahead===0&&(R.strstart=0,R.block_start=0,R.insert=0))),flush_pending(_),_.avail_out===0))return R.last_flush=-1,Z_OK$3}return T!==Z_FINISH$3?Z_OK$3:R.wrap<=0?Z_STREAM_END$3:(R.wrap===2?(put_byte(R,_.adler&255),put_byte(R,_.adler>>8&255),put_byte(R,_.adler>>16&255),put_byte(R,_.adler>>24&255),put_byte(R,_.total_in&255),put_byte(R,_.total_in>>8&255),put_byte(R,_.total_in>>16&255),put_byte(R,_.total_in>>24&255)):(putShortMSB(R,_.adler>>>16),putShortMSB(R,_.adler&65535)),flush_pending(_),R.wrap>0&&(R.wrap=-R.wrap),R.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=_=>{if(deflateStateCheck(_))return Z_STREAM_ERROR$2;const T=_.state.status;return _.state=null,T===BUSY_STATE?err(_,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(_,T)=>{let R=T.length;if(deflateStateCheck(_))return Z_STREAM_ERROR$2;const P=_.state,O=P.wrap;if(O===2||O===1&&P.status!==INIT_STATE||P.lookahead)return Z_STREAM_ERROR$2;if(O===1&&(_.adler=adler32_1(_.adler,T,R,0)),P.wrap=0,R>=P.w_size){O===0&&(zero(P.head),P.strstart=0,P.block_start=0,P.insert=0);let G=new Uint8Array(P.w_size);G.set(T.subarray(R-P.w_size,R),0),T=G,R=P.w_size}const I=_.avail_in,L=_.next_in,U=_.input;for(_.avail_in=R,_.next_in=0,_.input=T,fill_window(P);P.lookahead>=MIN_MATCH;){let G=P.strstart,V=P.lookahead-(MIN_MATCH-1);do P.ins_h=HASH(P,P.ins_h,P.window[G+MIN_MATCH-1]),P.prev[G&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=G,G++;while(--V);P.strstart=G,P.lookahead=MIN_MATCH-1,fill_window(P)}return P.strstart+=P.lookahead,P.block_start=P.strstart,P.insert=P.lookahead,P.lookahead=0,P.match_length=P.prev_length=MIN_MATCH-1,P.match_available=0,_.next_in=L,_.input=U,_.avail_in=I,P.wrap=O,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(_,T)=>Object.prototype.hasOwnProperty.call(_,T);var assign=function(_){const T=Array.prototype.slice.call(arguments,1);for(;T.length;){const R=T.shift();if(R){if(typeof R!="object")throw new TypeError(R+"must be non-object");for(const P in R)_has(R,P)&&(_[P]=R[P])}}return _},flattenChunks=_=>{let T=0;for(let P=0,O=_.length;P<O;P++)T+=_[P].length;const R=new Uint8Array(T);for(let P=0,O=0,I=_.length;P<I;P++){let L=_[P];R.set(L,O),O+=L.length}return R},common={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(_){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let _=0;_<256;_++)_utf8len[_]=_>=252?6:_>=248?5:_>=240?4:_>=224?3:_>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=_=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(_);let T,R,P,O,I,L=_.length,U=0;for(O=0;O<L;O++)R=_.charCodeAt(O),(R&64512)===55296&&O+1<L&&(P=_.charCodeAt(O+1),(P&64512)===56320&&(R=65536+(R-55296<<10)+(P-56320),O++)),U+=R<128?1:R<2048?2:R<65536?3:4;for(T=new Uint8Array(U),I=0,O=0;I<U;O++)R=_.charCodeAt(O),(R&64512)===55296&&O+1<L&&(P=_.charCodeAt(O+1),(P&64512)===56320&&(R=65536+(R-55296<<10)+(P-56320),O++)),R<128?T[I++]=R:R<2048?(T[I++]=192|R>>>6,T[I++]=128|R&63):R<65536?(T[I++]=224|R>>>12,T[I++]=128|R>>>6&63,T[I++]=128|R&63):(T[I++]=240|R>>>18,T[I++]=128|R>>>12&63,T[I++]=128|R>>>6&63,T[I++]=128|R&63);return T};const buf2binstring=(_,T)=>{if(T<65534&&_.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,_.length===T?_:_.subarray(0,T));let R="";for(let P=0;P<T;P++)R+=String.fromCharCode(_[P]);return R};var buf2string=(_,T)=>{const R=T||_.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(_.subarray(0,T));let P,O;const I=new Array(R*2);for(O=0,P=0;P<R;){let L=_[P++];if(L<128){I[O++]=L;continue}let U=_utf8len[L];if(U>4){I[O++]=65533,P+=U-1;continue}for(L&=U===2?31:U===3?15:7;U>1&&P<R;)L=L<<6|_[P++]&63,U--;if(U>1){I[O++]=65533;continue}L<65536?I[O++]=L:(L-=65536,I[O++]=55296|L>>10&1023,I[O++]=56320|L&1023)}return buf2binstring(I,O)},utf8border=(_,T)=>{T=T||_.length,T>_.length&&(T=_.length);let R=T-1;for(;R>=0&&(_[R]&192)===128;)R--;return R<0||R===0?T:R+_utf8len[_[R]]>T?R:T},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(_){this.options=common.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},_||{});let T=this.options;T.raw&&T.windowBits>0?T.windowBits=-T.windowBits:T.gzip&&T.windowBits>0&&T.windowBits<16&&(T.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let R=deflate_1$2.deflateInit2(this.strm,T.level,T.method,T.windowBits,T.memLevel,T.strategy);if(R!==Z_OK$2)throw new Error(messages[R]);if(T.header&&deflate_1$2.deflateSetHeader(this.strm,T.header),T.dictionary){let P;if(typeof T.dictionary=="string"?P=strings.string2buf(T.dictionary):toString$1.call(T.dictionary)==="[object ArrayBuffer]"?P=new Uint8Array(T.dictionary):P=T.dictionary,R=deflate_1$2.deflateSetDictionary(this.strm,P),R!==Z_OK$2)throw new Error(messages[R]);this._dict_set=!0}}Deflate$1.prototype.push=function(_,T){const R=this.strm,P=this.options.chunkSize;let O,I;if(this.ended)return!1;for(T===~~T?I=T:I=T===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof _=="string"?R.input=strings.string2buf(_):toString$1.call(_)==="[object ArrayBuffer]"?R.input=new Uint8Array(_):R.input=_,R.next_in=0,R.avail_in=R.input.length;;){if(R.avail_out===0&&(R.output=new Uint8Array(P),R.next_out=0,R.avail_out=P),(I===Z_SYNC_FLUSH||I===Z_FULL_FLUSH)&&R.avail_out<=6){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(O=deflate_1$2.deflate(R,I),O===Z_STREAM_END$2)return R.next_out>0&&this.onData(R.output.subarray(0,R.next_out)),O=deflate_1$2.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===Z_OK$2;if(R.avail_out===0){this.onData(R.output);continue}if(I>0&&R.next_out>0){this.onData(R.output.subarray(0,R.next_out)),R.avail_out=0;continue}if(R.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(_){this.chunks.push(_)};Deflate$1.prototype.onEnd=function(_){_===Z_OK$2&&(this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function deflate$1(_,T){const R=new Deflate$1(T);if(R.push(_,!0),R.err)throw R.msg||messages[R.err];return R.result}function deflateRaw$1(_,T){return T=T||{},T.raw=!0,deflate$1(_,T)}function gzip$1(_,T){return T=T||{},T.gzip=!0,deflate$1(_,T)}var Deflate_1$1=Deflate$1,deflate_2=deflate$1,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1};const BAD$1=16209,TYPE$1=16191;var inffast=function _(T,R){let P,O,I,L,U,G,V,Z,Y,W,J,ee,te,ie,oe,ae,ce,le,he,me,fe,ue,pe,ge;const _e=T.state;P=T.next_in,pe=T.input,O=P+(T.avail_in-5),I=T.next_out,ge=T.output,L=I-(R-T.avail_out),U=I+(T.avail_out-257),G=_e.dmax,V=_e.wsize,Z=_e.whave,Y=_e.wnext,W=_e.window,J=_e.hold,ee=_e.bits,te=_e.lencode,ie=_e.distcode,oe=(1<<_e.lenbits)-1,ae=(1<<_e.distbits)-1;e:do{ee<15&&(J+=pe[P++]<<ee,ee+=8,J+=pe[P++]<<ee,ee+=8),ce=te[J&oe];t:for(;;){if(le=ce>>>24,J>>>=le,ee-=le,le=ce>>>16&255,le===0)ge[I++]=ce&65535;else if(le&16){he=ce&65535,le&=15,le&&(ee<le&&(J+=pe[P++]<<ee,ee+=8),he+=J&(1<<le)-1,J>>>=le,ee-=le),ee<15&&(J+=pe[P++]<<ee,ee+=8,J+=pe[P++]<<ee,ee+=8),ce=ie[J&ae];n:for(;;){if(le=ce>>>24,J>>>=le,ee-=le,le=ce>>>16&255,le&16){if(me=ce&65535,le&=15,ee<le&&(J+=pe[P++]<<ee,ee+=8,ee<le&&(J+=pe[P++]<<ee,ee+=8)),me+=J&(1<<le)-1,me>G){T.msg="invalid distance too far back",_e.mode=BAD$1;break e}if(J>>>=le,ee-=le,le=I-L,me>le){if(le=me-le,le>Z&&_e.sane){T.msg="invalid distance too far back",_e.mode=BAD$1;break e}if(fe=0,ue=W,Y===0){if(fe+=V-le,le<he){he-=le;do ge[I++]=W[fe++];while(--le);fe=I-me,ue=ge}}else if(Y<le){if(fe+=V+Y-le,le-=Y,le<he){he-=le;do ge[I++]=W[fe++];while(--le);if(fe=0,Y<he){le=Y,he-=le;do ge[I++]=W[fe++];while(--le);fe=I-me,ue=ge}}}else if(fe+=Y-le,le<he){he-=le;do ge[I++]=W[fe++];while(--le);fe=I-me,ue=ge}for(;he>2;)ge[I++]=ue[fe++],ge[I++]=ue[fe++],ge[I++]=ue[fe++],he-=3;he&&(ge[I++]=ue[fe++],he>1&&(ge[I++]=ue[fe++]))}else{fe=I-me;do ge[I++]=ge[fe++],ge[I++]=ge[fe++],ge[I++]=ge[fe++],he-=3;while(he>2);he&&(ge[I++]=ge[fe++],he>1&&(ge[I++]=ge[fe++]))}}else if((le&64)===0){ce=ie[(ce&65535)+(J&(1<<le)-1)];continue n}else{T.msg="invalid distance code",_e.mode=BAD$1;break e}break}}else if((le&64)===0){ce=te[(ce&65535)+(J&(1<<le)-1)];continue t}else if(le&32){_e.mode=TYPE$1;break e}else{T.msg="invalid literal/length code",_e.mode=BAD$1;break e}break}}while(P<O&&I<U);he=ee>>3,P-=he,ee-=he<<3,J&=(1<<ee)-1,T.next_in=P,T.next_out=I,T.avail_in=P<O?5+(O-P):5-(P-O),T.avail_out=I<U?257+(U-I):257-(I-U),_e.hold=J,_e.bits=ee};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(_,T,R,P,O,I,L,U)=>{const G=U.bits;let V=0,Z=0,Y=0,W=0,J=0,ee=0,te=0,ie=0,oe=0,ae=0,ce,le,he,me,fe,ue=null,pe;const ge=new Uint16Array(MAXBITS+1),_e=new Uint16Array(MAXBITS+1);let we=null,be,Ce,Ee;for(V=0;V<=MAXBITS;V++)ge[V]=0;for(Z=0;Z<P;Z++)ge[T[R+Z]]++;for(J=G,W=MAXBITS;W>=1&&ge[W]===0;W--);if(J>W&&(J=W),W===0)return O[I++]=1<<24|64<<16|0,O[I++]=1<<24|64<<16|0,U.bits=1,0;for(Y=1;Y<W&&ge[Y]===0;Y++);for(J<Y&&(J=Y),ie=1,V=1;V<=MAXBITS;V++)if(ie<<=1,ie-=ge[V],ie<0)return-1;if(ie>0&&(_===CODES$1||W!==1))return-1;for(_e[1]=0,V=1;V<MAXBITS;V++)_e[V+1]=_e[V]+ge[V];for(Z=0;Z<P;Z++)T[R+Z]!==0&&(L[_e[T[R+Z]]++]=Z);if(_===CODES$1?(ue=we=L,pe=20):_===LENS$1?(ue=lbase,we=lext,pe=257):(ue=dbase,we=dext,pe=0),ae=0,Z=0,V=Y,fe=I,ee=J,te=0,he=-1,oe=1<<J,me=oe-1,_===LENS$1&&oe>ENOUGH_LENS$1||_===DISTS$1&&oe>ENOUGH_DISTS$1)return 1;for(;;){be=V-te,L[Z]+1<pe?(Ce=0,Ee=L[Z]):L[Z]>=pe?(Ce=we[L[Z]-pe],Ee=ue[L[Z]-pe]):(Ce=96,Ee=0),ce=1<<V-te,le=1<<ee,Y=le;do le-=ce,O[fe+(ae>>te)+le]=be<<24|Ce<<16|Ee|0;while(le!==0);for(ce=1<<V-1;ae&ce;)ce>>=1;if(ce!==0?(ae&=ce-1,ae+=ce):ae=0,Z++,--ge[V]===0){if(V===W)break;V=T[R+L[Z]]}if(V>J&&(ae&me)!==he){for(te===0&&(te=J),fe+=Y,ee=V-te,ie=1<<ee;ee+te<W&&(ie-=ge[ee+te],!(ie<=0));)ee++,ie<<=1;if(oe+=1<<ee,_===LENS$1&&oe>ENOUGH_LENS$1||_===DISTS$1&&oe>ENOUGH_DISTS$1)return 1;he=ae&me,O[he]=J<<24|ee<<16|fe-I|0}}return ae!==0&&(O[fe+ae]=V-te<<24|64<<16|0),U.bits=J,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=_=>(_>>>24&255)+(_>>>8&65280)+((_&65280)<<8)+((_&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=_=>{if(!_)return 1;const T=_.state;return!T||T.strm!==_||T.mode<HEAD||T.mode>SYNC?1:0},inflateResetKeep=_=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const T=_.state;return _.total_in=_.total_out=T.total=0,_.msg="",T.wrap&&(_.adler=T.wrap&1),T.mode=HEAD,T.last=0,T.havedict=0,T.flags=-1,T.dmax=32768,T.head=null,T.hold=0,T.bits=0,T.lencode=T.lendyn=new Int32Array(ENOUGH_LENS),T.distcode=T.distdyn=new Int32Array(ENOUGH_DISTS),T.sane=1,T.back=-1,Z_OK$1},inflateReset=_=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const T=_.state;return T.wsize=0,T.whave=0,T.wnext=0,inflateResetKeep(_)},inflateReset2=(_,T)=>{let R;if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const P=_.state;return T<0?(R=0,T=-T):(R=(T>>4)+5,T<48&&(T&=15)),T&&(T<8||T>15)?Z_STREAM_ERROR$1:(P.window!==null&&P.wbits!==T&&(P.window=null),P.wrap=R,P.wbits=T,inflateReset(_))},inflateInit2=(_,T)=>{if(!_)return Z_STREAM_ERROR$1;const R=new InflateState;_.state=R,R.strm=_,R.window=null,R.mode=HEAD;const P=inflateReset2(_,T);return P!==Z_OK$1&&(_.state=null),P},inflateInit=_=>inflateInit2(_,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=_=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let T=0;for(;T<144;)_.lens[T++]=8;for(;T<256;)_.lens[T++]=9;for(;T<280;)_.lens[T++]=7;for(;T<288;)_.lens[T++]=8;for(inftrees(LENS,_.lens,0,288,lenfix,0,_.work,{bits:9}),T=0;T<32;)_.lens[T++]=5;inftrees(DISTS,_.lens,0,32,distfix,0,_.work,{bits:5}),virgin=!1}_.lencode=lenfix,_.lenbits=9,_.distcode=distfix,_.distbits=5},updatewindow=(_,T,R,P)=>{let O;const I=_.state;return I.window===null&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new Uint8Array(I.wsize)),P>=I.wsize?(I.window.set(T.subarray(R-I.wsize,R),0),I.wnext=0,I.whave=I.wsize):(O=I.wsize-I.wnext,O>P&&(O=P),I.window.set(T.subarray(R-P,R-P+O),I.wnext),P-=O,P?(I.window.set(T.subarray(R-P,R),0),I.wnext=P,I.whave=I.wsize):(I.wnext+=O,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=O))),0},inflate$2=(_,T)=>{let R,P,O,I,L,U,G,V,Z,Y,W,J,ee,te,ie=0,oe,ae,ce,le,he,me,fe,ue;const pe=new Uint8Array(4);let ge,_e;const we=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(_)||!_.output||!_.input&&_.avail_in!==0)return Z_STREAM_ERROR$1;R=_.state,R.mode===TYPE&&(R.mode=TYPEDO),L=_.next_out,O=_.output,G=_.avail_out,I=_.next_in,P=_.input,U=_.avail_in,V=R.hold,Z=R.bits,Y=U,W=G,ue=Z_OK$1;e:for(;;)switch(R.mode){case HEAD:if(R.wrap===0){R.mode=TYPEDO;break}for(;Z<16;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}if(R.wrap&2&&V===35615){R.wbits===0&&(R.wbits=15),R.check=0,pe[0]=V&255,pe[1]=V>>>8&255,R.check=crc32_1(R.check,pe,2,0),V=0,Z=0,R.mode=FLAGS;break}if(R.head&&(R.head.done=!1),!(R.wrap&1)||(((V&255)<<8)+(V>>8))%31){_.msg="incorrect header check",R.mode=BAD;break}if((V&15)!==Z_DEFLATED){_.msg="unknown compression method",R.mode=BAD;break}if(V>>>=4,Z-=4,fe=(V&15)+8,R.wbits===0&&(R.wbits=fe),fe>15||fe>R.wbits){_.msg="invalid window size",R.mode=BAD;break}R.dmax=1<<R.wbits,R.flags=0,_.adler=R.check=1,R.mode=V&512?DICTID:TYPE,V=0,Z=0;break;case FLAGS:for(;Z<16;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}if(R.flags=V,(R.flags&255)!==Z_DEFLATED){_.msg="unknown compression method",R.mode=BAD;break}if(R.flags&57344){_.msg="unknown header flags set",R.mode=BAD;break}R.head&&(R.head.text=V>>8&1),R.flags&512&&R.wrap&4&&(pe[0]=V&255,pe[1]=V>>>8&255,R.check=crc32_1(R.check,pe,2,0)),V=0,Z=0,R.mode=TIME;case TIME:for(;Z<32;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}R.head&&(R.head.time=V),R.flags&512&&R.wrap&4&&(pe[0]=V&255,pe[1]=V>>>8&255,pe[2]=V>>>16&255,pe[3]=V>>>24&255,R.check=crc32_1(R.check,pe,4,0)),V=0,Z=0,R.mode=OS;case OS:for(;Z<16;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}R.head&&(R.head.xflags=V&255,R.head.os=V>>8),R.flags&512&&R.wrap&4&&(pe[0]=V&255,pe[1]=V>>>8&255,R.check=crc32_1(R.check,pe,2,0)),V=0,Z=0,R.mode=EXLEN;case EXLEN:if(R.flags&1024){for(;Z<16;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}R.length=V,R.head&&(R.head.extra_len=V),R.flags&512&&R.wrap&4&&(pe[0]=V&255,pe[1]=V>>>8&255,R.check=crc32_1(R.check,pe,2,0)),V=0,Z=0}else R.head&&(R.head.extra=null);R.mode=EXTRA;case EXTRA:if(R.flags&1024&&(J=R.length,J>U&&(J=U),J&&(R.head&&(fe=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Uint8Array(R.head.extra_len)),R.head.extra.set(P.subarray(I,I+J),fe)),R.flags&512&&R.wrap&4&&(R.check=crc32_1(R.check,P,J,I)),U-=J,I+=J,R.length-=J),R.length))break e;R.length=0,R.mode=NAME;case NAME:if(R.flags&2048){if(U===0)break e;J=0;do fe=P[I+J++],R.head&&fe&&R.length<65536&&(R.head.name+=String.fromCharCode(fe));while(fe&&J<U);if(R.flags&512&&R.wrap&4&&(R.check=crc32_1(R.check,P,J,I)),U-=J,I+=J,fe)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=COMMENT;case COMMENT:if(R.flags&4096){if(U===0)break e;J=0;do fe=P[I+J++],R.head&&fe&&R.length<65536&&(R.head.comment+=String.fromCharCode(fe));while(fe&&J<U);if(R.flags&512&&R.wrap&4&&(R.check=crc32_1(R.check,P,J,I)),U-=J,I+=J,fe)break e}else R.head&&(R.head.comment=null);R.mode=HCRC;case HCRC:if(R.flags&512){for(;Z<16;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}if(R.wrap&4&&V!==(R.check&65535)){_.msg="header crc mismatch",R.mode=BAD;break}V=0,Z=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),_.adler=R.check=0,R.mode=TYPE;break;case DICTID:for(;Z<32;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}_.adler=R.check=zswap32(V),V=0,Z=0,R.mode=DICT;case DICT:if(R.havedict===0)return _.next_out=L,_.avail_out=G,_.next_in=I,_.avail_in=U,R.hold=V,R.bits=Z,Z_NEED_DICT$1;_.adler=R.check=1,R.mode=TYPE;case TYPE:if(T===Z_BLOCK||T===Z_TREES)break e;case TYPEDO:if(R.last){V>>>=Z&7,Z-=Z&7,R.mode=CHECK;break}for(;Z<3;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}switch(R.last=V&1,V>>>=1,Z-=1,V&3){case 0:R.mode=STORED;break;case 1:if(fixedtables(R),R.mode=LEN_,T===Z_TREES){V>>>=2,Z-=2;break e}break;case 2:R.mode=TABLE;break;case 3:_.msg="invalid block type",R.mode=BAD}V>>>=2,Z-=2;break;case STORED:for(V>>>=Z&7,Z-=Z&7;Z<32;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}if((V&65535)!==(V>>>16^65535)){_.msg="invalid stored block lengths",R.mode=BAD;break}if(R.length=V&65535,V=0,Z=0,R.mode=COPY_,T===Z_TREES)break e;case COPY_:R.mode=COPY;case COPY:if(J=R.length,J){if(J>U&&(J=U),J>G&&(J=G),J===0)break e;O.set(P.subarray(I,I+J),L),U-=J,I+=J,G-=J,L+=J,R.length-=J;break}R.mode=TYPE;break;case TABLE:for(;Z<14;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}if(R.nlen=(V&31)+257,V>>>=5,Z-=5,R.ndist=(V&31)+1,V>>>=5,Z-=5,R.ncode=(V&15)+4,V>>>=4,Z-=4,R.nlen>286||R.ndist>30){_.msg="too many length or distance symbols",R.mode=BAD;break}R.have=0,R.mode=LENLENS;case LENLENS:for(;R.have<R.ncode;){for(;Z<3;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}R.lens[we[R.have++]]=V&7,V>>>=3,Z-=3}for(;R.have<19;)R.lens[we[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,ge={bits:R.lenbits},ue=inftrees(CODES,R.lens,0,19,R.lencode,0,R.work,ge),R.lenbits=ge.bits,ue){_.msg="invalid code lengths set",R.mode=BAD;break}R.have=0,R.mode=CODELENS;case CODELENS:for(;R.have<R.nlen+R.ndist;){for(;ie=R.lencode[V&(1<<R.lenbits)-1],oe=ie>>>24,ae=ie>>>16&255,ce=ie&65535,!(oe<=Z);){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}if(ce<16)V>>>=oe,Z-=oe,R.lens[R.have++]=ce;else{if(ce===16){for(_e=oe+2;Z<_e;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}if(V>>>=oe,Z-=oe,R.have===0){_.msg="invalid bit length repeat",R.mode=BAD;break}fe=R.lens[R.have-1],J=3+(V&3),V>>>=2,Z-=2}else if(ce===17){for(_e=oe+3;Z<_e;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}V>>>=oe,Z-=oe,fe=0,J=3+(V&7),V>>>=3,Z-=3}else{for(_e=oe+7;Z<_e;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}V>>>=oe,Z-=oe,fe=0,J=11+(V&127),V>>>=7,Z-=7}if(R.have+J>R.nlen+R.ndist){_.msg="invalid bit length repeat",R.mode=BAD;break}for(;J--;)R.lens[R.have++]=fe}}if(R.mode===BAD)break;if(R.lens[256]===0){_.msg="invalid code -- missing end-of-block",R.mode=BAD;break}if(R.lenbits=9,ge={bits:R.lenbits},ue=inftrees(LENS,R.lens,0,R.nlen,R.lencode,0,R.work,ge),R.lenbits=ge.bits,ue){_.msg="invalid literal/lengths set",R.mode=BAD;break}if(R.distbits=6,R.distcode=R.distdyn,ge={bits:R.distbits},ue=inftrees(DISTS,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,ge),R.distbits=ge.bits,ue){_.msg="invalid distances set",R.mode=BAD;break}if(R.mode=LEN_,T===Z_TREES)break e;case LEN_:R.mode=LEN;case LEN:if(U>=6&&G>=258){_.next_out=L,_.avail_out=G,_.next_in=I,_.avail_in=U,R.hold=V,R.bits=Z,inffast(_,W),L=_.next_out,O=_.output,G=_.avail_out,I=_.next_in,P=_.input,U=_.avail_in,V=R.hold,Z=R.bits,R.mode===TYPE&&(R.back=-1);break}for(R.back=0;ie=R.lencode[V&(1<<R.lenbits)-1],oe=ie>>>24,ae=ie>>>16&255,ce=ie&65535,!(oe<=Z);){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}if(ae&&(ae&240)===0){for(le=oe,he=ae,me=ce;ie=R.lencode[me+((V&(1<<le+he)-1)>>le)],oe=ie>>>24,ae=ie>>>16&255,ce=ie&65535,!(le+oe<=Z);){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}V>>>=le,Z-=le,R.back+=le}if(V>>>=oe,Z-=oe,R.back+=oe,R.length=ce,ae===0){R.mode=LIT;break}if(ae&32){R.back=-1,R.mode=TYPE;break}if(ae&64){_.msg="invalid literal/length code",R.mode=BAD;break}R.extra=ae&15,R.mode=LENEXT;case LENEXT:if(R.extra){for(_e=R.extra;Z<_e;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}R.length+=V&(1<<R.extra)-1,V>>>=R.extra,Z-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=DIST;case DIST:for(;ie=R.distcode[V&(1<<R.distbits)-1],oe=ie>>>24,ae=ie>>>16&255,ce=ie&65535,!(oe<=Z);){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}if((ae&240)===0){for(le=oe,he=ae,me=ce;ie=R.distcode[me+((V&(1<<le+he)-1)>>le)],oe=ie>>>24,ae=ie>>>16&255,ce=ie&65535,!(le+oe<=Z);){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}V>>>=le,Z-=le,R.back+=le}if(V>>>=oe,Z-=oe,R.back+=oe,ae&64){_.msg="invalid distance code",R.mode=BAD;break}R.offset=ce,R.extra=ae&15,R.mode=DISTEXT;case DISTEXT:if(R.extra){for(_e=R.extra;Z<_e;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}R.offset+=V&(1<<R.extra)-1,V>>>=R.extra,Z-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){_.msg="invalid distance too far back",R.mode=BAD;break}R.mode=MATCH;case MATCH:if(G===0)break e;if(J=W-G,R.offset>J){if(J=R.offset-J,J>R.whave&&R.sane){_.msg="invalid distance too far back",R.mode=BAD;break}J>R.wnext?(J-=R.wnext,ee=R.wsize-J):ee=R.wnext-J,J>R.length&&(J=R.length),te=R.window}else te=O,ee=L-R.offset,J=R.length;J>G&&(J=G),G-=J,R.length-=J;do O[L++]=te[ee++];while(--J);R.length===0&&(R.mode=LEN);break;case LIT:if(G===0)break e;O[L++]=R.length,G--,R.mode=LEN;break;case CHECK:if(R.wrap){for(;Z<32;){if(U===0)break e;U--,V|=P[I++]<<Z,Z+=8}if(W-=G,_.total_out+=W,R.total+=W,R.wrap&4&&W&&(_.adler=R.check=R.flags?crc32_1(R.check,O,W,L-W):adler32_1(R.check,O,W,L-W)),W=G,R.wrap&4&&(R.flags?V:zswap32(V))!==R.check){_.msg="incorrect data check",R.mode=BAD;break}V=0,Z=0}R.mode=LENGTH;case LENGTH:if(R.wrap&&R.flags){for(;Z<32;){if(U===0)break e;U--,V+=P[I++]<<Z,Z+=8}if(R.wrap&4&&V!==(R.total&4294967295)){_.msg="incorrect length check",R.mode=BAD;break}V=0,Z=0}R.mode=DONE;case DONE:ue=Z_STREAM_END$1;break e;case BAD:ue=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return _.next_out=L,_.avail_out=G,_.next_in=I,_.avail_in=U,R.hold=V,R.bits=Z,(R.wsize||W!==_.avail_out&&R.mode<BAD&&(R.mode<CHECK||T!==Z_FINISH$1))&&updatewindow(_,_.output,_.next_out,W-_.avail_out),Y-=_.avail_in,W-=_.avail_out,_.total_in+=Y,_.total_out+=W,R.total+=W,R.wrap&4&&W&&(_.adler=R.check=R.flags?crc32_1(R.check,O,W,_.next_out-W):adler32_1(R.check,O,W,_.next_out-W)),_.data_type=R.bits+(R.last?64:0)+(R.mode===TYPE?128:0)+(R.mode===LEN_||R.mode===COPY_?256:0),(Y===0&&W===0||T===Z_FINISH$1)&&ue===Z_OK$1&&(ue=Z_BUF_ERROR),ue},inflateEnd=_=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;let T=_.state;return T.window&&(T.window=null),_.state=null,Z_OK$1},inflateGetHeader=(_,T)=>{if(inflateStateCheck(_))return Z_STREAM_ERROR$1;const R=_.state;return(R.wrap&2)===0?Z_STREAM_ERROR$1:(R.head=T,T.done=!1,Z_OK$1)},inflateSetDictionary=(_,T)=>{const R=T.length;let P,O,I;return inflateStateCheck(_)||(P=_.state,P.wrap!==0&&P.mode!==DICT)?Z_STREAM_ERROR$1:P.mode===DICT&&(O=1,O=adler32_1(O,T,R,0),O!==P.check)?Z_DATA_ERROR$1:(I=updatewindow(_,T,R,R),I?(P.mode=MEM,Z_MEM_ERROR$1):(P.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(_){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},_||{});const T=this.options;T.raw&&T.windowBits>=0&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),T.windowBits>=0&&T.windowBits<16&&!(_&&_.windowBits)&&(T.windowBits+=32),T.windowBits>15&&T.windowBits<48&&(T.windowBits&15)===0&&(T.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let R=inflate_1$2.inflateInit2(this.strm,T.windowBits);if(R!==Z_OK)throw new Error(messages[R]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),T.dictionary&&(typeof T.dictionary=="string"?T.dictionary=strings.string2buf(T.dictionary):toString.call(T.dictionary)==="[object ArrayBuffer]"&&(T.dictionary=new Uint8Array(T.dictionary)),T.raw&&(R=inflate_1$2.inflateSetDictionary(this.strm,T.dictionary),R!==Z_OK)))throw new Error(messages[R])}Inflate$1.prototype.push=function(_,T){const R=this.strm,P=this.options.chunkSize,O=this.options.dictionary;let I,L,U;if(this.ended)return!1;for(T===~~T?L=T:L=T===!0?Z_FINISH:Z_NO_FLUSH,toString.call(_)==="[object ArrayBuffer]"?R.input=new Uint8Array(_):R.input=_,R.next_in=0,R.avail_in=R.input.length;;){for(R.avail_out===0&&(R.output=new Uint8Array(P),R.next_out=0,R.avail_out=P),I=inflate_1$2.inflate(R,L),I===Z_NEED_DICT&&O&&(I=inflate_1$2.inflateSetDictionary(R,O),I===Z_OK?I=inflate_1$2.inflate(R,L):I===Z_DATA_ERROR&&(I=Z_NEED_DICT));R.avail_in>0&&I===Z_STREAM_END&&R.state.wrap>0&&_[R.next_in]!==0;)inflate_1$2.inflateReset(R),I=inflate_1$2.inflate(R,L);switch(I){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(I),this.ended=!0,!1}if(U=R.avail_out,R.next_out&&(R.avail_out===0||I===Z_STREAM_END))if(this.options.to==="string"){let G=strings.utf8border(R.output,R.next_out),V=R.next_out-G,Z=strings.buf2string(R.output,G);R.next_out=V,R.avail_out=P-V,V&&R.output.set(R.output.subarray(G,G+V),0),this.onData(Z)}else this.onData(R.output.length===R.next_out?R.output:R.output.subarray(0,R.next_out));if(!(I===Z_OK&&U===0)){if(I===Z_STREAM_END)return I=inflate_1$2.inflateEnd(this.strm),this.onEnd(I),this.ended=!0,!0;if(R.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(_){this.chunks.push(_)};Inflate$1.prototype.onEnd=function(_){_===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function inflate$1(_,T){const R=new Inflate$1(T);if(R.push(_),R.err)throw R.msg||messages[R.err];return R.result}function inflateRaw$1(_,T){return T=T||{},T.raw=!0,inflate$1(_,T)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var Deflate_1=Deflate,deflate_1=deflate,deflateRaw_1=deflateRaw,gzip_1=gzip,Inflate_1=Inflate,inflate_1=inflate,inflateRaw_1=inflateRaw,ungzip_1=ungzip,constants_1=constants$2,pako={Deflate:Deflate_1,deflate:deflate_1,deflateRaw:deflateRaw_1,gzip:gzip_1,Inflate:Inflate_1,inflate:inflate_1,inflateRaw:inflateRaw_1,ungzip:ungzip_1,constants:constants_1};function encodeParamsToUrl(_,T){const R=toToml(T),P=pako.deflate(R),I=btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),L=new URL(window.location.origin+window.location.pathname);return L.searchParams.set("model",_),L.searchParams.set("config",I),L.toString()}function decodeParamsFromUrl(){const _=new URL(window.location.href),T=_.searchParams.get("model"),R=_.searchParams.get("config");if(!T||!R)return null;try{let P=R.replace(/-/g,"+").replace(/_/g,"/");for(;P.length%4;)P+="=";const O=atob(P),I=new Uint8Array(O.length);for(let G=0;G<O.length;G++)I[G]=O.charCodeAt(G);const L=pako.inflate(I,{to:"string"}),U=parseTomlWithDefaults(L);return{modelName:T,params:U}}catch(P){return console.error("Failed to decode URL params:",P),null}}function clearUrlParams(){const _=new URL(window.location.origin+window.location.pathname);window.history.replaceState({},"",_.toString())}function WorkerWrapper(_){return new Worker("/assets/simulation.worker-lpZW5uPC.js",{name:_?.name})}class WorkerPool{constructor(T=navigator.hardwareConcurrency||4){this.poolSize=T}workers=[];busyWorkers=new Set;taskQueue=[];pendingTasks=new Map;init(){for(let T=0;T<this.poolSize;T++){const R=new WorkerWrapper;R.onmessage=P=>{this.handleWorkerMessage(R,P.data)},R.onerror=P=>{console.error("Worker error:",P),this.handleWorkerError(R,P)},this.workers.push(R)}}getPoolSize(){return this.poolSize}submit(T,R,P,O,I,L){return new Promise((U,G)=>{const Z={request:{type:"run",modelName:T,baseParams:R,overrides:P,seed:O,timeSamples:I,runIndex:L},resolve:U,reject:G},Y=this.workers.find(W=>!this.busyWorkers.has(W));Y?this.executeTask(Y,Z):this.taskQueue.push(Z)})}executeTask(T,R){this.busyWorkers.add(T),this.pendingTasks.set(R.request.runIndex,R),T.postMessage(R.request)}handleWorkerMessage(T,R){const P=this.pendingTasks.get(R.runIndex);if(this.pendingTasks.delete(R.runIndex),this.busyWorkers.delete(T),P&&(R.type==="complete"&&R.snapshots?P.resolve(R.snapshots):R.type==="error"&&P.reject(new Error(R.error||"Unknown worker error"))),this.taskQueue.length>0){const O=this.taskQueue.shift();this.executeTask(T,O)}}handleWorkerError(T,R){if(this.busyWorkers.delete(T),console.error("Worker error:",R.message),this.taskQueue.length>0){const P=this.taskQueue.shift();this.executeTask(T,P)}}terminate(){for(const T of this.workers)T.terminate();this.workers=[],this.busyWorkers.clear(),this.taskQueue=[],this.pendingTasks.clear()}static isSupported(){return typeof Worker<"u"}}function runSingleSimulation(_,T,R,P,O,I,L){const U=structuredClone(T);for(const[Y,W]of Object.entries(R))setNestedValue(U,Y,W);U.general.random_seed=P;const G=new SimulationEngine({model:_,params:U});G.init();const V=[];let Z=0;if(O.length>0&&O[0]<=0){const Y=_.getSnapshot(G.getState()),W={run_index:I,seed:P,time_h:0,sampled_params:R,data:Y};V.push(W),L?.onSnapshot?.(W),Z=1}for(;!G.isComplete()&&Z<O.length;){G.step();const Y=G.getState(),W=Y.t??0;for(;Z<O.length&&W>=O[Z];){const J=_.getSnapshot(Y),ee={run_index:I,seed:P,time_h:O[Z],sampled_params:R,data:J};V.push(ee),L?.onSnapshot?.(ee),Z++}}return V}function yieldToUI(){return new Promise(_=>setTimeout(_,0))}async function runBatchSequential(_,T,R,P){const O=generateParameterConfigs(R.parameter_ranges,R.sampling_mode,R.random_sample_count),I=getTimeSamples(R.time_samples),L=O.length*R.seeds_per_config,U=[];let G=0;for(const Z of O)for(let Y=0;Y<R.seeds_per_config;Y++){const W=T.general.random_seed+G;P?.onProgress?.({current_run:G,total_runs:L,current_config:Z,is_running:!0,is_complete:!1}),await yieldToUI();const J=runSingleSimulation(_,T,Z,W,I,G,P);U.push(...J),G++}const V={config:R,snapshots:U,completed_runs:L,total_runs:L};return P?.onProgress?.({current_run:L,total_runs:L,current_config:{},is_running:!1,is_complete:!0}),P?.onComplete?.(V),V}async function runBatchParallel(_,T,R,P,O){const I=generateParameterConfigs(R.parameter_ranges,R.sampling_mode,R.random_sample_count),L=getTimeSamples(R.time_samples),U=I.length*R.seeds_per_config,G=[];let V=0;const Z=new WorkerPool(O);Z.init();try{const W=[];let J=0;for(const ie of I)for(let oe=0;oe<R.seeds_per_config;oe++){const ae=T.general.random_seed+J;W.push({paramConfig:ie,seed:ae,runIndex:J}),J++}P?.onProgress?.({current_run:0,total_runs:U,current_config:{},is_running:!0,is_complete:!1});const ee=W.map(async ie=>{const oe=await Z.submit(_.id,T,ie.paramConfig,ie.seed,L,ie.runIndex);V++,P?.onProgress?.({current_run:V,total_runs:U,current_config:ie.paramConfig,is_running:!0,is_complete:!1});for(const ae of oe)P?.onSnapshot?.(ae);return oe}),te=await Promise.all(ee);for(const ie of te)G.push(...ie);G.sort((ie,oe)=>ie.run_index!==oe.run_index?ie.run_index-oe.run_index:ie.time_h-oe.time_h)}finally{Z.terminate()}const Y={config:R,snapshots:G,completed_runs:U,total_runs:U};return P?.onProgress?.({current_run:U,total_runs:U,current_config:{},is_running:!1,is_complete:!0}),P?.onComplete?.(Y),Y}async function runBatch(_,T,R,P){const O=P?.modelName??_.metadata?.model;if(!O)throw new Error("Model name not specified. Provide options.modelName or ensure params.metadata.model is set.");const I=modelRegistry.get(O);if(!I)throw new Error(`Model "${O}" not found in registry.`);return(P?.parallel??WorkerPool.isSupported())&&WorkerPool.isSupported()?runBatchParallel(I,_,T,R,P?.workerCount):runBatchSequential(I,_,T,R)}function computeTotalRuns(_,T){return generateParameterConfigs(_,"grid").length*T}var papaparse_min$1={exports:{}};var papaparse_min=papaparse_min$1.exports,hasRequiredPapaparse_min;function requirePapaparse_min(){return hasRequiredPapaparse_min||(hasRequiredPapaparse_min=1,(function(_,T){((R,P)=>{_.exports=P()})(papaparse_min,function R(){var P=typeof self<"u"?self:typeof window<"u"?window:P!==void 0?P:{},O,I=!P.document&&!!P.postMessage,L=P.IS_PAPA_WORKER||!1,U={},G=0,V={};function Z(ue){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(pe){var ge=he(pe);ge.chunkSize=parseInt(ge.chunkSize),pe.step||pe.chunk||(ge.chunkSize=null),this._handle=new te(ge),(this._handle.streamer=this)._config=ge}).call(this,ue),this.parseChunk=function(pe,ge){var _e=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<_e){let be=this._config.newline;be||(we=this._config.quoteChar||'"',be=this._handle.guessLineEndings(pe,we)),pe=[...pe.split(be).slice(_e)].join(be)}this.isFirstChunk&&fe(this._config.beforeFirstChunk)&&(we=this._config.beforeFirstChunk(pe))!==void 0&&(pe=we),this.isFirstChunk=!1,this._halted=!1;var _e=this._partialLine+pe,we=(this._partialLine="",this._handle.parse(_e,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(pe=we.meta.cursor,_e=(this._finished||(this._partialLine=_e.substring(pe-this._baseIndex),this._baseIndex=pe),we&&we.data&&(this._rowCount+=we.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),L)P.postMessage({results:we,workerId:V.WORKER_ID,finished:_e});else if(fe(this._config.chunk)&&!ge){if(this._config.chunk(we,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=we=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(we.data),this._completeResults.errors=this._completeResults.errors.concat(we.errors),this._completeResults.meta=we.meta),this._completed||!_e||!fe(this._config.complete)||we&&we.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),_e||we&&we.meta.paused||this._nextChunk(),we}this._halted=!0},this._sendError=function(pe){fe(this._config.error)?this._config.error(pe):L&&this._config.error&&P.postMessage({workerId:V.WORKER_ID,error:pe,finished:!1})}}function Y(ue){var pe;(ue=ue||{}).chunkSize||(ue.chunkSize=V.RemoteChunkSize),Z.call(this,ue),this._nextChunk=I?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(ge){this._input=ge,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(pe=new XMLHttpRequest,this._config.withCredentials&&(pe.withCredentials=this._config.withCredentials),I||(pe.onload=me(this._chunkLoaded,this),pe.onerror=me(this._chunkError,this)),pe.open(this._config.downloadRequestBody?"POST":"GET",this._input,!I),this._config.downloadRequestHeaders){var ge,_e=this._config.downloadRequestHeaders;for(ge in _e)pe.setRequestHeader(ge,_e[ge])}var we;this._config.chunkSize&&(we=this._start+this._config.chunkSize-1,pe.setRequestHeader("Range","bytes="+this._start+"-"+we));try{pe.send(this._config.downloadRequestBody)}catch(be){this._chunkError(be.message)}I&&pe.status===0&&this._chunkError()}},this._chunkLoaded=function(){pe.readyState===4&&(pe.status<200||400<=pe.status?this._chunkError():(this._start+=this._config.chunkSize||pe.responseText.length,this._finished=!this._config.chunkSize||this._start>=(ge=>(ge=ge.getResponseHeader("Content-Range"))!==null?parseInt(ge.substring(ge.lastIndexOf("/")+1)):-1)(pe),this.parseChunk(pe.responseText)))},this._chunkError=function(ge){ge=pe.statusText||ge,this._sendError(new Error(ge))}}function W(ue){(ue=ue||{}).chunkSize||(ue.chunkSize=V.LocalChunkSize),Z.call(this,ue);var pe,ge,_e=typeof FileReader<"u";this.stream=function(we){this._input=we,ge=we.slice||we.webkitSlice||we.mozSlice,_e?((pe=new FileReader).onload=me(this._chunkLoaded,this),pe.onerror=me(this._chunkError,this)):pe=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var we=this._input,be=(this._config.chunkSize&&(be=Math.min(this._start+this._config.chunkSize,this._input.size),we=ge.call(we,this._start,be)),pe.readAsText(we,this._config.encoding));_e||this._chunkLoaded({target:{result:be}})},this._chunkLoaded=function(we){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(we.target.result)},this._chunkError=function(){this._sendError(pe.error)}}function J(ue){var pe;Z.call(this,ue=ue||{}),this.stream=function(ge){return pe=ge,this._nextChunk()},this._nextChunk=function(){var ge,_e;if(!this._finished)return ge=this._config.chunkSize,pe=ge?(_e=pe.substring(0,ge),pe.substring(ge)):(_e=pe,""),this._finished=!pe,this.parseChunk(_e)}}function ee(ue){Z.call(this,ue=ue||{});var pe=[],ge=!0,_e=!1;this.pause=function(){Z.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){Z.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(we){this._input=we,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){_e&&pe.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),pe.length?this.parseChunk(pe.shift()):ge=!0},this._streamData=me(function(we){try{pe.push(typeof we=="string"?we:we.toString(this._config.encoding)),ge&&(ge=!1,this._checkIsFinished(),this.parseChunk(pe.shift()))}catch(be){this._streamError(be)}},this),this._streamError=me(function(we){this._streamCleanUp(),this._sendError(we)},this),this._streamEnd=me(function(){this._streamCleanUp(),_e=!0,this._streamData("")},this),this._streamCleanUp=me(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function te(ue){var pe,ge,_e,we,be=Math.pow(2,53),Ce=-be,Ee=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ye=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,Se=this,Te=0,Ae=0,Be=!1,ve=!1,Re=[],Me={data:[],errors:[],meta:{}};function ze(Ve){return ue.skipEmptyLines==="greedy"?Ve.join("").trim()==="":Ve.length===1&&Ve[0].length===0}function qe(){if(Me&&_e&&(Oe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+V.DefaultDelimiter+"'"),_e=!1),ue.skipEmptyLines&&(Me.data=Me.data.filter(function(He){return!ze(He)})),We()){let He=function(Pe,Je){fe(ue.transformHeader)&&(Pe=ue.transformHeader(Pe,Je)),Re.push(Pe)};if(Me)if(Array.isArray(Me.data[0])){for(var Ve=0;We()&&Ve<Me.data.length;Ve++)Me.data[Ve].forEach(He);Me.data.splice(0,1)}else Me.data.forEach(He)}function ke(He,Pe){for(var Je=ue.header?{}:[],Ke=0;Ke<He.length;Ke++){var Ze=Ke,Qe=He[Ke],Qe=((at,et)=>(ct=>(ue.dynamicTypingFunction&&ue.dynamicTyping[ct]===void 0&&(ue.dynamicTyping[ct]=ue.dynamicTypingFunction(ct)),(ue.dynamicTyping[ct]||ue.dynamicTyping)===!0))(at)?et==="true"||et==="TRUE"||et!=="false"&&et!=="FALSE"&&((ct=>{if(Ee.test(ct)&&(ct=parseFloat(ct),Ce<ct&&ct<be))return 1})(et)?parseFloat(et):ye.test(et)?new Date(et):et===""?null:et):et)(Ze=ue.header?Ke>=Re.length?"__parsed_extra":Re[Ke]:Ze,Qe=ue.transform?ue.transform(Qe,Ze):Qe);Ze==="__parsed_extra"?(Je[Ze]=Je[Ze]||[],Je[Ze].push(Qe)):Je[Ze]=Qe}return ue.header&&(Ke>Re.length?Oe("FieldMismatch","TooManyFields","Too many fields: expected "+Re.length+" fields but parsed "+Ke,Ae+Pe):Ke<Re.length&&Oe("FieldMismatch","TooFewFields","Too few fields: expected "+Re.length+" fields but parsed "+Ke,Ae+Pe)),Je}var Fe;Me&&(ue.header||ue.dynamicTyping||ue.transform)&&(Fe=1,!Me.data.length||Array.isArray(Me.data[0])?(Me.data=Me.data.map(ke),Fe=Me.data.length):Me.data=ke(Me.data,0),ue.header&&Me.meta&&(Me.meta.fields=Re),Ae+=Fe)}function We(){return ue.header&&Re.length===0}function Oe(Ve,ke,Fe,He){Ve={type:Ve,code:ke,message:Fe},He!==void 0&&(Ve.row=He),Me.errors.push(Ve)}fe(ue.step)&&(we=ue.step,ue.step=function(Ve){Me=Ve,We()?qe():(qe(),Me.data.length!==0&&(Te+=Ve.data.length,ue.preview&&Te>ue.preview?ge.abort():(Me.data=Me.data[0],we(Me,Se))))}),this.parse=function(Ve,ke,Fe){var He=ue.quoteChar||'"',He=(ue.newline||(ue.newline=this.guessLineEndings(Ve,He)),_e=!1,ue.delimiter?fe(ue.delimiter)&&(ue.delimiter=ue.delimiter(Ve),Me.meta.delimiter=ue.delimiter):((He=((Pe,Je,Ke,Ze,Qe)=>{var at,et,ct,Dt;Qe=Qe||[",","	","|",";",V.RECORD_SEP,V.UNIT_SEP];for(var gt=0;gt<Qe.length;gt++){for(var wt,Nt=Qe[gt],st=0,vt=0,yt=0,kt=(ct=void 0,new oe({comments:Ze,delimiter:Nt,newline:Je,preview:10}).parse(Pe)),Pt=0;Pt<kt.data.length;Pt++)Ke&&ze(kt.data[Pt])?yt++:(wt=kt.data[Pt].length,vt+=wt,ct===void 0?ct=wt:0<wt&&(st+=Math.abs(wt-ct),ct=wt));0<kt.data.length&&(vt/=kt.data.length-yt),(et===void 0||st<=et)&&(Dt===void 0||Dt<vt)&&1.99<vt&&(et=st,at=Nt,Dt=vt)}return{successful:!!(ue.delimiter=at),bestDelimiter:at}})(Ve,ue.newline,ue.skipEmptyLines,ue.comments,ue.delimitersToGuess)).successful?ue.delimiter=He.bestDelimiter:(_e=!0,ue.delimiter=V.DefaultDelimiter),Me.meta.delimiter=ue.delimiter),he(ue));return ue.preview&&ue.header&&He.preview++,pe=Ve,ge=new oe(He),Me=ge.parse(pe,ke,Fe),qe(),Be?{meta:{paused:!0}}:Me||{meta:{paused:!1}}},this.paused=function(){return Be},this.pause=function(){Be=!0,ge.abort(),pe=fe(ue.chunk)?"":pe.substring(ge.getCharIndex())},this.resume=function(){Se.streamer._halted?(Be=!1,Se.streamer.parseChunk(pe,!0)):setTimeout(Se.resume,3)},this.aborted=function(){return ve},this.abort=function(){ve=!0,ge.abort(),Me.meta.aborted=!0,fe(ue.complete)&&ue.complete(Me),pe=""},this.guessLineEndings=function(Pe,He){Pe=Pe.substring(0,1048576);var He=new RegExp(ie(He)+"([^]*?)"+ie(He),"gm"),Fe=(Pe=Pe.replace(He,"")).split("\r"),He=Pe.split(`
`),Pe=1<He.length&&He[0].length<Fe[0].length;if(Fe.length===1||Pe)return`
`;for(var Je=0,Ke=0;Ke<Fe.length;Ke++)Fe[Ke][0]===`
`&&Je++;return Je>=Fe.length/2?`\r
`:"\r"}}function ie(ue){return ue.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function oe(ue){var pe=(ue=ue||{}).delimiter,ge=ue.newline,_e=ue.comments,we=ue.step,be=ue.preview,Ce=ue.fastMode,Ee=null,ye=!1,Se=ue.quoteChar==null?'"':ue.quoteChar,Te=Se;if(ue.escapeChar!==void 0&&(Te=ue.escapeChar),(typeof pe!="string"||-1<V.BAD_DELIMITERS.indexOf(pe))&&(pe=","),_e===pe)throw new Error("Comment character same as delimiter");_e===!0?_e="#":(typeof _e!="string"||-1<V.BAD_DELIMITERS.indexOf(_e))&&(_e=!1),ge!==`
`&&ge!=="\r"&&ge!==`\r
`&&(ge=`
`);var Ae=0,Be=!1;this.parse=function(ve,Re,Me){if(typeof ve!="string")throw new Error("Input must be a string");var ze=ve.length,qe=pe.length,We=ge.length,Oe=_e.length,Ve=fe(we),ke=[],Fe=[],He=[],Pe=Ae=0;if(!ve)return st();if(Ce||Ce!==!1&&ve.indexOf(Se)===-1){for(var Je=ve.split(ge),Ke=0;Ke<Je.length;Ke++){if(He=Je[Ke],Ae+=He.length,Ke!==Je.length-1)Ae+=ge.length;else if(Me)return st();if(!_e||He.substring(0,Oe)!==_e){if(Ve){if(ke=[],Dt(He.split(pe)),vt(),Be)return st()}else Dt(He.split(pe));if(be&&be<=Ke)return ke=ke.slice(0,be),st(!0)}}return st()}for(var Ze=ve.indexOf(pe,Ae),Qe=ve.indexOf(ge,Ae),at=new RegExp(ie(Te)+ie(Se),"g"),et=ve.indexOf(Se,Ae);;)if(ve[Ae]===Se)for(et=Ae,Ae++;;){if((et=ve.indexOf(Se,et+1))===-1)return Me||Fe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ke.length,index:Ae}),wt();if(et===ze-1)return wt(ve.substring(Ae,et).replace(at,Se));if(Se===Te&&ve[et+1]===Te)et++;else if(Se===Te||et===0||ve[et-1]!==Te){Ze!==-1&&Ze<et+1&&(Ze=ve.indexOf(pe,et+1));var ct=gt((Qe=Qe!==-1&&Qe<et+1?ve.indexOf(ge,et+1):Qe)===-1?Ze:Math.min(Ze,Qe));if(ve.substr(et+1+ct,qe)===pe){He.push(ve.substring(Ae,et).replace(at,Se)),ve[Ae=et+1+ct+qe]!==Se&&(et=ve.indexOf(Se,Ae)),Ze=ve.indexOf(pe,Ae),Qe=ve.indexOf(ge,Ae);break}if(ct=gt(Qe),ve.substring(et+1+ct,et+1+ct+We)===ge){if(He.push(ve.substring(Ae,et).replace(at,Se)),Nt(et+1+ct+We),Ze=ve.indexOf(pe,Ae),et=ve.indexOf(Se,Ae),Ve&&(vt(),Be))return st();if(be&&ke.length>=be)return st(!0);break}Fe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ke.length,index:Ae}),et++}}else if(_e&&He.length===0&&ve.substring(Ae,Ae+Oe)===_e){if(Qe===-1)return st();Ae=Qe+We,Qe=ve.indexOf(ge,Ae),Ze=ve.indexOf(pe,Ae)}else if(Ze!==-1&&(Ze<Qe||Qe===-1))He.push(ve.substring(Ae,Ze)),Ae=Ze+qe,Ze=ve.indexOf(pe,Ae);else{if(Qe===-1)break;if(He.push(ve.substring(Ae,Qe)),Nt(Qe+We),Ve&&(vt(),Be))return st();if(be&&ke.length>=be)return st(!0)}return wt();function Dt(yt){ke.push(yt),Pe=Ae}function gt(yt){var kt=0;return kt=yt!==-1&&(yt=ve.substring(et+1,yt))&&yt.trim()===""?yt.length:kt}function wt(yt){return Me||(yt===void 0&&(yt=ve.substring(Ae)),He.push(yt),Ae=ze,Dt(He),Ve&&vt()),st()}function Nt(yt){Ae=yt,Dt(He),He=[],Qe=ve.indexOf(ge,Ae)}function st(yt){if(ue.header&&!Re&&ke.length&&!ye){var kt=ke[0],Pt=Object.create(null),wn=new Set(kt);let tn=!1;for(let En=0;En<kt.length;En++){let an=kt[En];if(Pt[an=fe(ue.transformHeader)?ue.transformHeader(an,En):an]){let nn,$t=Pt[an];for(;nn=an+"_"+$t,$t++,wn.has(nn););wn.add(nn),kt[En]=nn,Pt[an]++,tn=!0,(Ee=Ee===null?{}:Ee)[nn]=an}else Pt[an]=1,kt[En]=an;wn.add(an)}tn&&console.warn("Duplicate headers found and renamed."),ye=!0}return{data:ke,errors:Fe,meta:{delimiter:pe,linebreak:ge,aborted:Be,truncated:!!yt,cursor:Pe+(Re||0),renamedHeaders:Ee}}}function vt(){we(st()),ke=[],Fe=[]}},this.abort=function(){Be=!0},this.getCharIndex=function(){return Ae}}function ae(ue){var pe=ue.data,ge=U[pe.workerId],_e=!1;if(pe.error)ge.userError(pe.error,pe.file);else if(pe.results&&pe.results.data){var we={abort:function(){_e=!0,ce(pe.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:le,resume:le};if(fe(ge.userStep)){for(var be=0;be<pe.results.data.length&&(ge.userStep({data:pe.results.data[be],errors:pe.results.errors,meta:pe.results.meta},we),!_e);be++);delete pe.results}else fe(ge.userChunk)&&(ge.userChunk(pe.results,we,pe.file),delete pe.results)}pe.finished&&!_e&&ce(pe.workerId,pe.results)}function ce(ue,pe){var ge=U[ue];fe(ge.userComplete)&&ge.userComplete(pe),ge.terminate(),delete U[ue]}function le(){throw new Error("Not implemented.")}function he(ue){if(typeof ue!="object"||ue===null)return ue;var pe,ge=Array.isArray(ue)?[]:{};for(pe in ue)ge[pe]=he(ue[pe]);return ge}function me(ue,pe){return function(){ue.apply(pe,arguments)}}function fe(ue){return typeof ue=="function"}return V.parse=function(ue,pe){var ge=(pe=pe||{}).dynamicTyping||!1;if(fe(ge)&&(pe.dynamicTypingFunction=ge,ge={}),pe.dynamicTyping=ge,pe.transform=!!fe(pe.transform)&&pe.transform,!pe.worker||!V.WORKERS_SUPPORTED)return ge=null,V.NODE_STREAM_INPUT,typeof ue=="string"?(ue=(_e=>_e.charCodeAt(0)!==65279?_e:_e.slice(1))(ue),ge=new(pe.download?Y:J)(pe)):ue.readable===!0&&fe(ue.read)&&fe(ue.on)?ge=new ee(pe):(P.File&&ue instanceof File||ue instanceof Object)&&(ge=new W(pe)),ge.stream(ue);(ge=(()=>{var _e;return!!V.WORKERS_SUPPORTED&&(_e=(()=>{var we=P.URL||P.webkitURL||null,be=R.toString();return V.BLOB_URL||(V.BLOB_URL=we.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",be,")();"],{type:"text/javascript"})))})(),(_e=new P.Worker(_e)).onmessage=ae,_e.id=G++,U[_e.id]=_e)})()).userStep=pe.step,ge.userChunk=pe.chunk,ge.userComplete=pe.complete,ge.userError=pe.error,pe.step=fe(pe.step),pe.chunk=fe(pe.chunk),pe.complete=fe(pe.complete),pe.error=fe(pe.error),delete pe.worker,ge.postMessage({input:ue,config:pe,workerId:ge.id})},V.unparse=function(ue,pe){var ge=!1,_e=!0,we=",",be=`\r
`,Ce='"',Ee=Ce+Ce,ye=!1,Se=null,Te=!1,Ae=((()=>{if(typeof pe=="object"){if(typeof pe.delimiter!="string"||V.BAD_DELIMITERS.filter(function(Re){return pe.delimiter.indexOf(Re)!==-1}).length||(we=pe.delimiter),typeof pe.quotes!="boolean"&&typeof pe.quotes!="function"&&!Array.isArray(pe.quotes)||(ge=pe.quotes),typeof pe.skipEmptyLines!="boolean"&&typeof pe.skipEmptyLines!="string"||(ye=pe.skipEmptyLines),typeof pe.newline=="string"&&(be=pe.newline),typeof pe.quoteChar=="string"&&(Ce=pe.quoteChar),typeof pe.header=="boolean"&&(_e=pe.header),Array.isArray(pe.columns)){if(pe.columns.length===0)throw new Error("Option columns is empty");Se=pe.columns}pe.escapeChar!==void 0&&(Ee=pe.escapeChar+Ce),pe.escapeFormulae instanceof RegExp?Te=pe.escapeFormulae:typeof pe.escapeFormulae=="boolean"&&pe.escapeFormulae&&(Te=/^[=+\-@\t\r].*$/)}})(),new RegExp(ie(Ce),"g"));if(typeof ue=="string"&&(ue=JSON.parse(ue)),Array.isArray(ue)){if(!ue.length||Array.isArray(ue[0]))return Be(null,ue,ye);if(typeof ue[0]=="object")return Be(Se||Object.keys(ue[0]),ue,ye)}else if(typeof ue=="object")return typeof ue.data=="string"&&(ue.data=JSON.parse(ue.data)),Array.isArray(ue.data)&&(ue.fields||(ue.fields=ue.meta&&ue.meta.fields||Se),ue.fields||(ue.fields=Array.isArray(ue.data[0])?ue.fields:typeof ue.data[0]=="object"?Object.keys(ue.data[0]):[]),Array.isArray(ue.data[0])||typeof ue.data[0]=="object"||(ue.data=[ue.data])),Be(ue.fields||[],ue.data||[],ye);throw new Error("Unable to serialize unrecognized input");function Be(Re,Me,ze){var qe="",We=(typeof Re=="string"&&(Re=JSON.parse(Re)),typeof Me=="string"&&(Me=JSON.parse(Me)),Array.isArray(Re)&&0<Re.length),Oe=!Array.isArray(Me[0]);if(We&&_e){for(var Ve=0;Ve<Re.length;Ve++)0<Ve&&(qe+=we),qe+=ve(Re[Ve],Ve);0<Me.length&&(qe+=be)}for(var ke=0;ke<Me.length;ke++){var Fe=(We?Re:Me[ke]).length,He=!1,Pe=We?Object.keys(Me[ke]).length===0:Me[ke].length===0;if(ze&&!We&&(He=ze==="greedy"?Me[ke].join("").trim()==="":Me[ke].length===1&&Me[ke][0].length===0),ze==="greedy"&&We){for(var Je=[],Ke=0;Ke<Fe;Ke++){var Ze=Oe?Re[Ke]:Ke;Je.push(Me[ke][Ze])}He=Je.join("").trim()===""}if(!He){for(var Qe=0;Qe<Fe;Qe++){0<Qe&&!Pe&&(qe+=we);var at=We&&Oe?Re[Qe]:Qe;qe+=ve(Me[ke][at],Qe)}ke<Me.length-1&&(!ze||0<Fe&&!Pe)&&(qe+=be)}}return qe}function ve(Re,Me){var ze,qe;return Re==null?"":Re.constructor===Date?JSON.stringify(Re).slice(1,25):(qe=!1,Te&&typeof Re=="string"&&Te.test(Re)&&(Re="'"+Re,qe=!0),ze=Re.toString().replace(Ae,Ee),(qe=qe||ge===!0||typeof ge=="function"&&ge(Re,Me)||Array.isArray(ge)&&ge[Me]||((We,Oe)=>{for(var Ve=0;Ve<Oe.length;Ve++)if(-1<We.indexOf(Oe[Ve]))return!0;return!1})(ze,V.BAD_DELIMITERS)||-1<ze.indexOf(we)||ze.charAt(0)===" "||ze.charAt(ze.length-1)===" ")?Ce+ze+Ce:ze)}},V.RECORD_SEP="",V.UNIT_SEP="",V.BYTE_ORDER_MARK="\uFEFF",V.BAD_DELIMITERS=["\r",`
`,'"',V.BYTE_ORDER_MARK],V.WORKERS_SUPPORTED=!I&&!!P.Worker,V.NODE_STREAM_INPUT=1,V.LocalChunkSize=10485760,V.RemoteChunkSize=5242880,V.DefaultDelimiter=",",V.Parser=oe,V.ParserHandle=te,V.NetworkStreamer=Y,V.FileStreamer=W,V.StringStreamer=J,V.ReadableStreamStreamer=ee,P.jQuery&&((O=P.jQuery).fn.parse=function(ue){var pe=ue.config||{},ge=[];return this.each(function(be){if(!(O(this).prop("tagName").toUpperCase()==="INPUT"&&O(this).attr("type").toLowerCase()==="file"&&P.FileReader)||!this.files||this.files.length===0)return!0;for(var Ce=0;Ce<this.files.length;Ce++)ge.push({file:this.files[Ce],inputElem:this,instanceConfig:O.extend({},pe)})}),_e(),this;function _e(){if(ge.length===0)fe(ue.complete)&&ue.complete();else{var be,Ce,Ee,ye,Se=ge[0];if(fe(ue.before)){var Te=ue.before(Se.file,Se.inputElem);if(typeof Te=="object"){if(Te.action==="abort")return be="AbortError",Ce=Se.file,Ee=Se.inputElem,ye=Te.reason,void(fe(ue.error)&&ue.error({name:be},Ce,Ee,ye));if(Te.action==="skip")return void we();typeof Te.config=="object"&&(Se.instanceConfig=O.extend(Se.instanceConfig,Te.config))}else if(Te==="skip")return void we()}var Ae=Se.instanceConfig.complete;Se.instanceConfig.complete=function(Be){fe(Ae)&&Ae(Be,Se.file,Se.inputElem),we()},V.parse(Se.file,Se.instanceConfig)}}function we(){ge.splice(0,1),_e()}}),L&&(P.onmessage=function(ue){ue=ue.data,V.WORKER_ID===void 0&&ue&&(V.WORKER_ID=ue.workerId),typeof ue.input=="string"?P.postMessage({workerId:V.WORKER_ID,results:V.parse(ue.input,ue.config),finished:!0}):(P.File&&ue.input instanceof File||ue.input instanceof Object)&&(ue=V.parse(ue.input,ue.config))&&P.postMessage({workerId:V.WORKER_ID,results:ue,finished:!0})}),(Y.prototype=Object.create(Z.prototype)).constructor=Y,(W.prototype=Object.create(Z.prototype)).constructor=W,(J.prototype=Object.create(J.prototype)).constructor=J,(ee.prototype=Object.create(Z.prototype)).constructor=ee,V})})(papaparse_min$1)),papaparse_min$1.exports}var papaparse_minExports=requirePapaparse_min();const Papa=getDefaultExportFromCjs(papaparse_minExports),PATH_SEPARATOR="__";function pathToColumn(_){return"param"+PATH_SEPARATOR+_.replace(/\./g,PATH_SEPARATOR)}function columnToPath(_){return _.startsWith("param"+PATH_SEPARATOR)?_.slice(("param"+PATH_SEPARATOR).length).replace(new RegExp(PATH_SEPARATOR,"g"),"."):_}function batchSnapshotsToCSV(_){if(_.length===0)return"";const T=new Set;for(const U of _)for(const G of Object.keys(U.sampled_params))T.add(G);const R=Array.from(T).sort(),P=new Set;for(const U of _)U.data.length>0&&Object.keys(U.data[0]).forEach(G=>P.add(G));const O=Array.from(P).sort((U,G)=>U==="id"?-1:G==="id"?1:U.localeCompare(G)),I=[];for(const U of _)for(const G of U.data){const V={run_index:U.run_index,seed:U.seed,time_h:U.time_h,...G};for(const Z of R)V[pathToColumn(Z)]=U.sampled_params[Z]??"";I.push(V)}const L=["run_index","seed","time_h",...R.map(pathToColumn),...O];return Papa.unparse(I,{columns:L,delimiter:"	"})}function csvToBatchSnapshots(_){const T=Papa.parse(_,{header:!0,dynamicTyping:!1,skipEmptyLines:!0,delimiter:"	"});T.errors.length>0&&console.warn("CSV parse warnings:",T.errors);const R=new Map,P=T.meta.fields?.filter(U=>U.startsWith("param"+PATH_SEPARATOR))??[],O=new Set(["run_index","seed","time_h"]),I=T.meta.fields?.filter(U=>!O.has(U)&&!U.startsWith("param"+PATH_SEPARATOR))??[];for(const U of T.data){const G=parseInt(U.run_index,10),V=parseInt(U.seed,10),Z=parseFloat(U.time_h),Y=`${G}-${V}-${Z}`;if(!R.has(Y)){const ee={};for(const te of P){const ie=U[te];ie!==""&&ie!==void 0&&(ee[columnToPath(te)]=parseFloat(ie))}R.set(Y,{run_index:G,seed:V,time_h:Z,sampled_params:ee,data:[]})}const W=R.get(Y),J={};for(const ee of I){const te=U[ee],ie=Number(te);!isNaN(ie)&&te.trim()!==""?J[ee]=ie:te==="true"?J[ee]=!0:te==="false"?J[ee]=!1:J[ee]=te}W.data.push(J)}const L=Array.from(R.values());return L.sort((U,G)=>U.run_index!==G.run_index?U.run_index-G.run_index:U.time_h-G.time_h),L}function createBatchDataFromSnapshots(_){const T=new Set;for(const L of _)for(const U of Object.keys(L.sampled_params))T.add(U);const R=new Set;for(const L of _)R.add(L.time_h);const P=Array.from(R).sort((L,U)=>L-U),O=new Set;for(const L of _)O.add(`${L.run_index}-${L.seed}`);return{config:{parameter_ranges:Array.from(T).map(L=>({path:L,min:0,max:0,steps:0})),time_samples:{start:P[0]??0,end:P[P.length-1]??48,step:P.length>1?P[1]-P[0]:12},seeds_per_config:1,sampling_mode:"grid"},snapshots:_,completed_runs:O.size,total_runs:O.size}}function statisticsToCSV(_,T){const R=T.map(P=>{const O={};return _.forEach((I,L)=>{O[I]=P[L]}),O});return Papa.unparse(R,{columns:_,delimiter:"	"})}function downloadCSV(_,T){const R=new Blob([_],{type:"text/csv;charset=utf-8;"}),P=URL.createObjectURL(R),O=document.createElement("a");O.href=P,O.download=T,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(P)}function readFileAsText(_){return new Promise((T,R)=>{const P=new FileReader;P.onload=()=>T(P.result),P.onerror=()=>R(P.error),P.readAsText(_)})}function BatchTab({config:_,onConfigChange:T}){const{currentModel:R}=useModel(),[P,O]=reactExports.useState(null),[I,L]=reactExports.useState(null),[U,G]=reactExports.useState(!1),[V,Z]=reactExports.useState(null),Y=reactExports.useRef(!1),J=(R?.generateStatistics?R.generateStatistics(_.params):R?.statistics||[]).map(Ze=>Ze.id),[ee,te]=reactExports.useState("time_series"),[ie,oe]=reactExports.useState([]),[ae,ce]=reactExports.useState([]),[le,he]=reactExports.useState([]),[me,fe]=reactExports.useState("time_h"),[ue,pe]=reactExports.useState(""),[ge,_e]=reactExports.useState("line_ci"),[we,be]=reactExports.useState(WorkerPool.isSupported()),Ce=typeof navigator<"u"&&navigator.hardwareConcurrency||4,Ee=reactExports.useRef(null),ye=computeTotalRuns(_.parameterRanges,_.seedsPerConfig),Se=getTimeSamples(_.timeSamples),Te=ye*Se.length,Ae=reactExports.useCallback(async()=>{G(!0),Z(Date.now()),Y.current=!1;try{const Ze=await runBatch(_.params,{parameter_ranges:_.parameterRanges,time_samples:_.timeSamples,seeds_per_config:_.seedsPerConfig,sampling_mode:"grid"},{onProgress:Qe=>{Y.current||L(Qe)}},{parallel:we,workerCount:Ce});Y.current||(O(Ze),oe([]),ce([]))}catch(Ze){console.error("Batch run failed:",Ze),alert("Batch run failed. Check console for details.")}finally{G(!1),L(null),Z(null)}},[_,we,Ce]),Be=reactExports.useCallback(()=>{Y.current=!0},[]),ve=async Ze=>{const Qe=Ze.target.files?.[0];if(Qe){try{const at=await readFileAsText(Qe),et=csvToBatchSnapshots(at),ct=createBatchDataFromSnapshots(et);O(ct),oe([]),ce([])}catch(at){console.error("Failed to load batch CSV:",at),alert("Failed to load batch CSV. Check console for details.")}Ee.current&&(Ee.current.value="")}},Re=()=>{if(!P)return;const Ze=batchSnapshotsToCSV(P.snapshots);downloadCSV(Ze,"batch_snapshots.csv")},Me=()=>{if(!P||J.length===0||!R)return;const Ze=new Set;for(const st of P.snapshots)for(const vt of Object.keys(st.sampled_params))Ze.add(vt);const Qe=Array.from(Ze).sort();let at;if(ee==="terminal"){const st=new Map;for(const vt of P.snapshots){const yt=`${vt.run_index}-${vt.seed}`,kt=st.get(yt);(!kt||vt.time_h>kt.time_h)&&st.set(yt,vt)}at=Array.from(st.values())}else at=P.snapshots;const et=new Set,ct=new Set;for(const st of J){const vt=st.lastIndexOf("_");if(vt>0){const yt=st.substring(0,vt),kt=st.substring(vt+1);ct.add(yt),et.add(kt)}}const Dt=Array.from(et).sort(),gt=Array.from(ct).sort(),wt=[...Qe,"run_index","seed","time_h","cell_group",...gt],Nt=[];for(const st of at){const vt=structuredClone(_.params);for(const[Pt,wn]of Object.entries(st.sampled_params))setNestedValue(vt,Pt,wn);const yt=R.loadSnapshot(st.data,vt),kt=R.computeStats(yt,vt);for(const Pt of Dt){const wn=[...Qe.map(tn=>st.sampled_params[tn]??""),st.run_index,st.seed,st.time_h,Pt,...gt.map(tn=>{const En=`${tn}_${Pt}`;return kt[En]??0})];Nt.push(wn)}}oe(wt),ce(Nt),he(Qe),!ue&&gt.length>0&&pe(gt[0])},ze=Ze=>{const Qe=ae[Ze];if(!Qe)return;const at=structuredClone(_.params);le.forEach((gt,wt)=>{const Nt=Qe[wt];Nt!==""&&Nt!==void 0&&setNestedValue(at,gt,Nt)});const et=le.length+1,ct=Qe[et];typeof ct=="number"&&(at.general.random_seed=ct);const Dt=encodeParamsToUrl(R.name,at);window.open(Dt,"_blank")},qe=()=>{if(ie.length===0||ae.length===0)return;const Ze=statisticsToCSV(ie,ae);downloadCSV(Ze,"batch_statistics.csv")},We=()=>{if(!P||!R)return;const Ze=new Set;for(const gt of P.snapshots)for(const wt of Object.keys(gt.sampled_params))Ze.add(wt);const Qe=Array.from(Ze).sort();let at;if(ee==="terminal"){const gt=new Map;for(const wt of P.snapshots){const Nt=`${wt.run_index}-${wt.seed}`,st=gt.get(Nt);(!st||wt.time_h>st.time_h)&&gt.set(Nt,wt)}at=Array.from(gt.values())}else at=P.snapshots;const et=[...Qe,"run_index","seed","time_h","cell_id","cell_type","X_x","X_y","A_x","A_y","B_x","B_y","a_x","a_y","b_x","b_y","ab_distance","AX","BX","ax","bx","x","below_basal","above_apical","below_neighbours"],ct=[];for(const gt of at){const wt=structuredClone(_.params);for(const[Nt,st]of Object.entries(gt.sampled_params))setNestedValue(wt,Nt,st);for(let Nt=0;Nt<gt.data.length;Nt++){const st=gt.data[Nt],vt=[...Qe.map(yt=>gt.sampled_params[yt]??""),gt.run_index,gt.seed,gt.time_h,Nt,st.typeIndex||"",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];ct.push(vt)}}const Dt=statisticsToCSV(et,ct);downloadCSV(Dt,"batch_full_cell_data.csv")},Oe=I?I.current_run/I.total_runs*100:0,ke=(()=>{if(!I||!V||I.current_run===0)return null;const Qe=(Date.now()-V)/I.current_run,at=I.total_runs-I.current_run,et=Qe*at;if(et<1e3)return"< 1s";if(et<6e4)return`${Math.ceil(et/1e3)}s`;if(et<36e5){const gt=Math.floor(et/6e4),wt=Math.ceil(et%6e4/1e3);return`${gt}m ${wt}s`}const ct=Math.floor(et/36e5),Dt=Math.ceil(et%36e5/6e4);return`${ct}h ${Dt}m`})(),Fe=ie.filter(Ze=>!["run_index","seed","time_h","cell_group"].includes(Ze)&&!Ze.includes(".")),He=ie.filter(Ze=>Ze==="time_h"||Ze.includes(".")&&!["run_index","seed","cell_group"].includes(Ze));let Pe=[],Je=[],Ke=[];return ge==="histogram"&&ue?Ke=aggregateForHistogram(ie,ae,ue):ge==="line_ci"&&me&&ue?Je=aggregateByXAxisWithCI(ie,ae,me,ue):me&&ue&&(Pe=aggregateByTime(ie,ae,ue)),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-3",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-base",children:"Run New Batch"})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Uses the shared parameters, ranges, seeds, and time samples configured in the Parameters panel."}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Parameter ranges"}),_.parameterRanges.length===0?jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"No ranges defined."}):jsxRuntimeExports.jsx("ul",{className:"space-y-1 text-sm",children:_.parameterRanges.map(Ze=>jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-mono text-xs",children:Ze.path}),jsxRuntimeExports.jsxs("span",{className:"text-muted-foreground",children:[Ze.min,"  ",Ze.max," (",Ze.steps," steps)"]})]},Ze.path))})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-1 text-sm",children:[jsxRuntimeExports.jsxs("p",{children:["Time samples: ",_.timeSamples.start,"h  ",_.timeSamples.end,"h (step ",_.timeSamples.step,"h)"]}),jsxRuntimeExports.jsxs("p",{children:["Seeds per configuration: ",_.seedsPerConfig]}),jsxRuntimeExports.jsxs("p",{className:"text-muted-foreground",children:["Total: ",ye," run",ye!==1?"s":"","  ",Se.length," time point",Se.length!==1?"s":""," = ",Te," snapshot",Te!==1?"s":""]})]}),WorkerPool.isSupported()&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:we,onChange:Ze=>be(Ze.target.checked),disabled:U,className:"rounded"}),"Parallel execution"]}),we&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",Ce," workers)"]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:U?jsxRuntimeExports.jsxs(Button,{onClick:Be,variant:"destructive",size:"sm",children:[jsxRuntimeExports.jsx(Square,{className:"h-4 w-4 mr-1"}),"Stop"]}):jsxRuntimeExports.jsxs(Button,{onClick:Ae,size:"sm",disabled:_.parameterRanges.length===0&&_.seedsPerConfig<=1,children:[jsxRuntimeExports.jsx(Play,{className:"h-4 w-4 mr-1"}),"Run Batch"]})}),U&&I&&jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Progress,{value:Oe,className:"h-2"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground",children:[I.current_run," / ",I.total_runs," runs",ke&&`  ~${ke} remaining`]})]})]})]}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"pt-4 space-y-3",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx("input",{ref:Ee,type:"file",accept:".csv",onChange:ve,className:"hidden"}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>Ee.current?.click(),disabled:U,children:[jsxRuntimeExports.jsx(Upload,{className:"h-4 w-4 mr-1"}),"Load Batch CSV"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:Re,disabled:!P||U,children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-1"}),"Save Batch CSV"]}),P&&jsxRuntimeExports.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:[P.snapshots.length," snapshots loaded"]})]})})}),P&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-3",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-base",children:"Compute Statistics"})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"All available statistics will be computed for all cell groups."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 items-center",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm",children:"Output:"}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-1 text-sm cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"outputMode",checked:ee==="time_series",onChange:()=>te("time_series"),disabled:U}),"Time Series"]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-1 text-sm cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"outputMode",checked:ee==="terminal",onChange:()=>te("terminal"),disabled:U}),"Terminal Only"]})]}),jsxRuntimeExports.jsx(Button,{onClick:Me,size:"sm",disabled:!R||U,children:"Compute"})]})]}),ae.length>0&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{className:"pb-3 flex-row items-center justify-between",children:[jsxRuntimeExports.jsx(CardTitle,{className:"text-base",children:"Results"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:qe,children:[jsxRuntimeExports.jsx(FileSpreadsheet,{className:"h-4 w-4 mr-1"}),"Export CSV"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:We,children:[jsxRuntimeExports.jsx(FileSpreadsheet,{className:"h-4 w-4 mr-1"}),"Export Full CSV"]})]})]}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ResultsTable,{columns:ie,rows:ae,onRunRow:ze}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[ae.length," row",ae.length!==1?"s":""]})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium",children:"Visualization"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"plot-type",className:"text-sm",children:"Plot Type"}),jsxRuntimeExports.jsxs("select",{id:"plot-type",value:ge,onChange:Ze=>_e(Ze.target.value),className:"w-full h-9 px-3 rounded-md border border-input bg-background text-sm",children:[jsxRuntimeExports.jsx("option",{value:"line_ci",children:"Line + CI"}),jsxRuntimeExports.jsx("option",{value:"histogram",children:"Histogram"})]})]}),ge!=="histogram"&&jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"plot-x-axis",className:"text-sm",children:"X-Axis"}),jsxRuntimeExports.jsxs("select",{id:"plot-x-axis",value:me,onChange:Ze=>fe(Ze.target.value),className:"w-full h-9 px-3 rounded-md border border-input bg-background text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select x-axis..."}),He.map(Ze=>jsxRuntimeExports.jsx("option",{value:Ze,children:Ze},Ze))]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"plot-y-axis",className:"text-sm",children:"Y-Axis (Statistic)"}),jsxRuntimeExports.jsxs("select",{id:"plot-y-axis",value:ue,onChange:Ze=>pe(Ze.target.value),className:"w-full h-9 px-3 rounded-md border border-input bg-background text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select statistic..."}),Fe.map(Ze=>jsxRuntimeExports.jsx("option",{value:Ze,children:Ze},Ze))]})]})]}),ge==="histogram"&&ue&&Ke.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-4 border rounded-md p-4 bg-muted/30",children:jsxRuntimeExports.jsx(BatchPlot,{data:Pe,dataWithCI:Je,histogramData:Ke,xAxisLabel:"Cell Group",yAxisLabel:ue,plotType:ge,width:640,height:400})}),ge==="line_ci"&&me&&ue&&Je.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-4 border rounded-md p-4 bg-muted/30",children:jsxRuntimeExports.jsx(BatchPlot,{data:Pe,dataWithCI:Je,histogramData:Ke,xAxisLabel:me==="time_h"?"Time (h)":me,yAxisLabel:ue,plotType:ge,width:640,height:400})})]})]})]})]})}var COLLAPSIBLE_NAME="Collapsible",[createCollapsibleContext,createCollapsibleScope]=createContextScope$1(COLLAPSIBLE_NAME),[CollapsibleProvider,useCollapsibleContext]=createCollapsibleContext(COLLAPSIBLE_NAME),Collapsible=reactExports.forwardRef((_,T)=>{const{__scopeCollapsible:R,open:P,defaultOpen:O,disabled:I,onOpenChange:L,...U}=_,[G,V]=useControllableState({prop:P,defaultProp:O??!1,onChange:L,caller:COLLAPSIBLE_NAME});return jsxRuntimeExports.jsx(CollapsibleProvider,{scope:R,disabled:I,contentId:useId(),open:G,onOpenToggle:reactExports.useCallback(()=>V(Z=>!Z),[V]),children:jsxRuntimeExports.jsx(Primitive$2.div,{"data-state":getState$1(G),"data-disabled":I?"":void 0,...U,ref:T})})});Collapsible.displayName=COLLAPSIBLE_NAME;var TRIGGER_NAME$2="CollapsibleTrigger",CollapsibleTrigger=reactExports.forwardRef((_,T)=>{const{__scopeCollapsible:R,...P}=_,O=useCollapsibleContext(TRIGGER_NAME$2,R);return jsxRuntimeExports.jsx(Primitive$2.button,{type:"button","aria-controls":O.contentId,"aria-expanded":O.open||!1,"data-state":getState$1(O.open),"data-disabled":O.disabled?"":void 0,disabled:O.disabled,...P,ref:T,onClick:composeEventHandlers(_.onClick,O.onOpenToggle)})});CollapsibleTrigger.displayName=TRIGGER_NAME$2;var CONTENT_NAME$2="CollapsibleContent",CollapsibleContent=reactExports.forwardRef((_,T)=>{const{forceMount:R,...P}=_,O=useCollapsibleContext(CONTENT_NAME$2,_.__scopeCollapsible);return jsxRuntimeExports.jsx(Presence,{present:R||O.open,children:({present:I})=>jsxRuntimeExports.jsx(CollapsibleContentImpl,{...P,ref:T,present:I})})});CollapsibleContent.displayName=CONTENT_NAME$2;var CollapsibleContentImpl=reactExports.forwardRef((_,T)=>{const{__scopeCollapsible:R,present:P,children:O,...I}=_,L=useCollapsibleContext(CONTENT_NAME$2,R),[U,G]=reactExports.useState(P),V=reactExports.useRef(null),Z=useComposedRefs(T,V),Y=reactExports.useRef(0),W=Y.current,J=reactExports.useRef(0),ee=J.current,te=L.open||U,ie=reactExports.useRef(te),oe=reactExports.useRef(void 0);return reactExports.useEffect(()=>{const ae=requestAnimationFrame(()=>ie.current=!1);return()=>cancelAnimationFrame(ae)},[]),useLayoutEffect2(()=>{const ae=V.current;if(ae){oe.current=oe.current||{transitionDuration:ae.style.transitionDuration,animationName:ae.style.animationName},ae.style.transitionDuration="0s",ae.style.animationName="none";const ce=ae.getBoundingClientRect();Y.current=ce.height,J.current=ce.width,ie.current||(ae.style.transitionDuration=oe.current.transitionDuration,ae.style.animationName=oe.current.animationName),G(P)}},[L.open,P]),jsxRuntimeExports.jsx(Primitive$2.div,{"data-state":getState$1(L.open),"data-disabled":L.disabled?"":void 0,id:L.contentId,hidden:!te,...I,ref:Z,style:{"--radix-collapsible-content-height":W?`${W}px`:void 0,"--radix-collapsible-content-width":ee?`${ee}px`:void 0,..._.style},children:te&&O})});function getState$1(_){return _?"open":"closed"}var Root$1=Collapsible,Trigger$1=CollapsibleTrigger,Content$1=CollapsibleContent,ACCORDION_NAME="Accordion",ACCORDION_KEYS=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(ACCORDION_NAME),[createAccordionContext]=createContextScope$1(ACCORDION_NAME,[createCollectionScope$1,createCollapsibleScope]),useCollapsibleScope=createCollapsibleScope(),Accordion=React.forwardRef((_,T)=>{const{type:R,...P}=_,O=P,I=P;return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:_.__scopeAccordion,children:R==="multiple"?jsxRuntimeExports.jsx(AccordionImplMultiple,{...I,ref:T}):jsxRuntimeExports.jsx(AccordionImplSingle,{...O,ref:T})})});Accordion.displayName=ACCORDION_NAME;var[AccordionValueProvider,useAccordionValueContext]=createAccordionContext(ACCORDION_NAME),[AccordionCollapsibleProvider,useAccordionCollapsibleContext]=createAccordionContext(ACCORDION_NAME,{collapsible:!1}),AccordionImplSingle=React.forwardRef((_,T)=>{const{value:R,defaultValue:P,onValueChange:O=()=>{},collapsible:I=!1,...L}=_,[U,G]=useControllableState({prop:R,defaultProp:P??"",onChange:O,caller:ACCORDION_NAME});return jsxRuntimeExports.jsx(AccordionValueProvider,{scope:_.__scopeAccordion,value:React.useMemo(()=>U?[U]:[],[U]),onItemOpen:G,onItemClose:React.useCallback(()=>I&&G(""),[I,G]),children:jsxRuntimeExports.jsx(AccordionCollapsibleProvider,{scope:_.__scopeAccordion,collapsible:I,children:jsxRuntimeExports.jsx(AccordionImpl,{...L,ref:T})})})}),AccordionImplMultiple=React.forwardRef((_,T)=>{const{value:R,defaultValue:P,onValueChange:O=()=>{},...I}=_,[L,U]=useControllableState({prop:R,defaultProp:P??[],onChange:O,caller:ACCORDION_NAME}),G=React.useCallback(Z=>U((Y=[])=>[...Y,Z]),[U]),V=React.useCallback(Z=>U((Y=[])=>Y.filter(W=>W!==Z)),[U]);return jsxRuntimeExports.jsx(AccordionValueProvider,{scope:_.__scopeAccordion,value:L,onItemOpen:G,onItemClose:V,children:jsxRuntimeExports.jsx(AccordionCollapsibleProvider,{scope:_.__scopeAccordion,collapsible:!0,children:jsxRuntimeExports.jsx(AccordionImpl,{...I,ref:T})})})}),[AccordionImplProvider,useAccordionContext]=createAccordionContext(ACCORDION_NAME),AccordionImpl=React.forwardRef((_,T)=>{const{__scopeAccordion:R,disabled:P,dir:O,orientation:I="vertical",...L}=_,U=React.useRef(null),G=useComposedRefs(U,T),V=useCollection$1(R),Y=useDirection(O)==="ltr",W=composeEventHandlers(_.onKeyDown,J=>{if(!ACCORDION_KEYS.includes(J.key))return;const ee=J.target,te=V().filter(ue=>!ue.ref.current?.disabled),ie=te.findIndex(ue=>ue.ref.current===ee),oe=te.length;if(ie===-1)return;J.preventDefault();let ae=ie;const ce=0,le=oe-1,he=()=>{ae=ie+1,ae>le&&(ae=ce)},me=()=>{ae=ie-1,ae<ce&&(ae=le)};switch(J.key){case"Home":ae=ce;break;case"End":ae=le;break;case"ArrowRight":I==="horizontal"&&(Y?he():me());break;case"ArrowDown":I==="vertical"&&he();break;case"ArrowLeft":I==="horizontal"&&(Y?me():he());break;case"ArrowUp":I==="vertical"&&me();break}const fe=ae%oe;te[fe].ref.current?.focus()});return jsxRuntimeExports.jsx(AccordionImplProvider,{scope:R,disabled:P,direction:O,orientation:I,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:R,children:jsxRuntimeExports.jsx(Primitive$2.div,{...L,"data-orientation":I,ref:G,onKeyDown:P?void 0:W})})})}),ITEM_NAME$1="AccordionItem",[AccordionItemProvider,useAccordionItemContext]=createAccordionContext(ITEM_NAME$1),AccordionItem$1=React.forwardRef((_,T)=>{const{__scopeAccordion:R,value:P,...O}=_,I=useAccordionContext(ITEM_NAME$1,R),L=useAccordionValueContext(ITEM_NAME$1,R),U=useCollapsibleScope(R),G=useId(),V=P&&L.value.includes(P)||!1,Z=I.disabled||_.disabled;return jsxRuntimeExports.jsx(AccordionItemProvider,{scope:R,open:V,disabled:Z,triggerId:G,children:jsxRuntimeExports.jsx(Root$1,{"data-orientation":I.orientation,"data-state":getState(V),...U,...O,ref:T,disabled:Z,open:V,onOpenChange:Y=>{Y?L.onItemOpen(P):L.onItemClose(P)}})})});AccordionItem$1.displayName=ITEM_NAME$1;var HEADER_NAME="AccordionHeader",AccordionHeader=React.forwardRef((_,T)=>{const{__scopeAccordion:R,...P}=_,O=useAccordionContext(ACCORDION_NAME,R),I=useAccordionItemContext(HEADER_NAME,R);return jsxRuntimeExports.jsx(Primitive$2.h3,{"data-orientation":O.orientation,"data-state":getState(I.open),"data-disabled":I.disabled?"":void 0,...P,ref:T})});AccordionHeader.displayName=HEADER_NAME;var TRIGGER_NAME$1="AccordionTrigger",AccordionTrigger$1=React.forwardRef((_,T)=>{const{__scopeAccordion:R,...P}=_,O=useAccordionContext(ACCORDION_NAME,R),I=useAccordionItemContext(TRIGGER_NAME$1,R),L=useAccordionCollapsibleContext(TRIGGER_NAME$1,R),U=useCollapsibleScope(R);return jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:R,children:jsxRuntimeExports.jsx(Trigger$1,{"aria-disabled":I.open&&!L.collapsible||void 0,"data-orientation":O.orientation,id:I.triggerId,...U,...P,ref:T})})});AccordionTrigger$1.displayName=TRIGGER_NAME$1;var CONTENT_NAME$1="AccordionContent",AccordionContent$1=React.forwardRef((_,T)=>{const{__scopeAccordion:R,...P}=_,O=useAccordionContext(ACCORDION_NAME,R),I=useAccordionItemContext(CONTENT_NAME$1,R),L=useCollapsibleScope(R);return jsxRuntimeExports.jsx(Content$1,{role:"region","aria-labelledby":I.triggerId,"data-orientation":O.orientation,...L,...P,ref:T,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",..._.style}})});AccordionContent$1.displayName=CONTENT_NAME$1;function getState(_){return _?"open":"closed"}var Item$1=AccordionItem$1,Header=AccordionHeader,Trigger2=AccordionTrigger$1,Content2=AccordionContent$1;const AccordionItem=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(Item$1,{ref:R,className:cn("border-b",_),...T}));AccordionItem.displayName="AccordionItem";const AccordionTrigger=reactExports.forwardRef(({className:_,children:T,...R},P)=>jsxRuntimeExports.jsx(Header,{className:"flex",children:jsxRuntimeExports.jsxs(Trigger2,{ref:P,className:cn("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",_),...R,children:[T,jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));AccordionTrigger.displayName=Trigger2.displayName;const AccordionContent=reactExports.forwardRef(({className:_,children:T,...R},P)=>jsxRuntimeExports.jsx(Content2,{ref:P,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...R,children:jsxRuntimeExports.jsx("div",{className:cn("pb-4 pt-0",_),children:T})}));AccordionContent.displayName=Content2.displayName;var ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME="RovingFocusGroup",[Collection,useCollection,createCollectionScope]=createCollection(GROUP_NAME),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope$1(GROUP_NAME,[createCollectionScope]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME),RovingFocusGroup=reactExports.forwardRef((_,T)=>jsxRuntimeExports.jsx(Collection.Provider,{scope:_.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:_.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{..._,ref:T})})}));RovingFocusGroup.displayName=GROUP_NAME;var RovingFocusGroupImpl=reactExports.forwardRef((_,T)=>{const{__scopeRovingFocusGroup:R,orientation:P,loop:O=!1,dir:I,currentTabStopId:L,defaultCurrentTabStopId:U,onCurrentTabStopIdChange:G,onEntryFocus:V,preventScrollOnEntryFocus:Z=!1,...Y}=_,W=reactExports.useRef(null),J=useComposedRefs(T,W),ee=useDirection(I),[te,ie]=useControllableState({prop:L,defaultProp:U??null,onChange:G,caller:GROUP_NAME}),[oe,ae]=reactExports.useState(!1),ce=useCallbackRef$1(V),le=useCollection(R),he=reactExports.useRef(!1),[me,fe]=reactExports.useState(0);return reactExports.useEffect(()=>{const ue=W.current;if(ue)return ue.addEventListener(ENTRY_FOCUS,ce),()=>ue.removeEventListener(ENTRY_FOCUS,ce)},[ce]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:R,orientation:P,dir:ee,loop:O,currentTabStopId:te,onItemFocus:reactExports.useCallback(ue=>ie(ue),[ie]),onItemShiftTab:reactExports.useCallback(()=>ae(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>fe(ue=>ue+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>fe(ue=>ue-1),[]),children:jsxRuntimeExports.jsx(Primitive$2.div,{tabIndex:oe||me===0?-1:0,"data-orientation":P,...Y,ref:J,style:{outline:"none",..._.style},onMouseDown:composeEventHandlers(_.onMouseDown,()=>{he.current=!0}),onFocus:composeEventHandlers(_.onFocus,ue=>{const pe=!he.current;if(ue.target===ue.currentTarget&&pe&&!oe){const ge=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(ue.currentTarget.dispatchEvent(ge),!ge.defaultPrevented){const _e=le().filter(ye=>ye.focusable),we=_e.find(ye=>ye.active),be=_e.find(ye=>ye.id===te),Ee=[we,be,..._e].filter(Boolean).map(ye=>ye.ref.current);focusFirst(Ee,Z)}}he.current=!1}),onBlur:composeEventHandlers(_.onBlur,()=>ae(!1))})})}),ITEM_NAME="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((_,T)=>{const{__scopeRovingFocusGroup:R,focusable:P=!0,active:O=!1,tabStopId:I,children:L,...U}=_,G=useId(),V=I||G,Z=useRovingFocusContext(ITEM_NAME,R),Y=Z.currentTabStopId===V,W=useCollection(R),{onFocusableItemAdd:J,onFocusableItemRemove:ee,currentTabStopId:te}=Z;return reactExports.useEffect(()=>{if(P)return J(),()=>ee()},[P,J,ee]),jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:R,id:V,focusable:P,active:O,children:jsxRuntimeExports.jsx(Primitive$2.span,{tabIndex:Y?0:-1,"data-orientation":Z.orientation,...U,ref:T,onMouseDown:composeEventHandlers(_.onMouseDown,ie=>{P?Z.onItemFocus(V):ie.preventDefault()}),onFocus:composeEventHandlers(_.onFocus,()=>Z.onItemFocus(V)),onKeyDown:composeEventHandlers(_.onKeyDown,ie=>{if(ie.key==="Tab"&&ie.shiftKey){Z.onItemShiftTab();return}if(ie.target!==ie.currentTarget)return;const oe=getFocusIntent(ie,Z.orientation,Z.dir);if(oe!==void 0){if(ie.metaKey||ie.ctrlKey||ie.altKey||ie.shiftKey)return;ie.preventDefault();let ce=W().filter(le=>le.focusable).map(le=>le.ref.current);if(oe==="last")ce.reverse();else if(oe==="prev"||oe==="next"){oe==="prev"&&ce.reverse();const le=ce.indexOf(ie.currentTarget);ce=Z.loop?wrapArray(ce,le+1):ce.slice(le+1)}setTimeout(()=>focusFirst(ce))}}),children:typeof L=="function"?L({isCurrentTabStop:Y,hasTabStop:te!=null}):L})})});RovingFocusGroupItem.displayName=ITEM_NAME;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(_,T){return T!=="rtl"?_:_==="ArrowLeft"?"ArrowRight":_==="ArrowRight"?"ArrowLeft":_}function getFocusIntent(_,T,R){const P=getDirectionAwareKey(_.key,R);if(!(T==="vertical"&&["ArrowLeft","ArrowRight"].includes(P))&&!(T==="horizontal"&&["ArrowUp","ArrowDown"].includes(P)))return MAP_KEY_TO_FOCUS_INTENT[P]}function focusFirst(_,T=!1){const R=document.activeElement;for(const P of _)if(P===R||(P.focus({preventScroll:T}),document.activeElement!==R))return}function wrapArray(_,T){return _.map((R,P)=>_[(T+P)%_.length])}var Root=RovingFocusGroup,Item=RovingFocusGroupItem,TABS_NAME="Tabs",[createTabsContext]=createContextScope$1(TABS_NAME,[createRovingFocusGroupScope]),useRovingFocusGroupScope=createRovingFocusGroupScope(),[TabsProvider,useTabsContext]=createTabsContext(TABS_NAME),Tabs$1=reactExports.forwardRef((_,T)=>{const{__scopeTabs:R,value:P,onValueChange:O,defaultValue:I,orientation:L="horizontal",dir:U,activationMode:G="automatic",...V}=_,Z=useDirection(U),[Y,W]=useControllableState({prop:P,onChange:O,defaultProp:I??"",caller:TABS_NAME});return jsxRuntimeExports.jsx(TabsProvider,{scope:R,baseId:useId(),value:Y,onValueChange:W,orientation:L,dir:Z,activationMode:G,children:jsxRuntimeExports.jsx(Primitive$2.div,{dir:Z,"data-orientation":L,...V,ref:T})})});Tabs$1.displayName=TABS_NAME;var TAB_LIST_NAME="TabsList",TabsList$1=reactExports.forwardRef((_,T)=>{const{__scopeTabs:R,loop:P=!0,...O}=_,I=useTabsContext(TAB_LIST_NAME,R),L=useRovingFocusGroupScope(R);return jsxRuntimeExports.jsx(Root,{asChild:!0,...L,orientation:I.orientation,dir:I.dir,loop:P,children:jsxRuntimeExports.jsx(Primitive$2.div,{role:"tablist","aria-orientation":I.orientation,...O,ref:T})})});TabsList$1.displayName=TAB_LIST_NAME;var TRIGGER_NAME="TabsTrigger",TabsTrigger$1=reactExports.forwardRef((_,T)=>{const{__scopeTabs:R,value:P,disabled:O=!1,...I}=_,L=useTabsContext(TRIGGER_NAME,R),U=useRovingFocusGroupScope(R),G=makeTriggerId(L.baseId,P),V=makeContentId(L.baseId,P),Z=P===L.value;return jsxRuntimeExports.jsx(Item,{asChild:!0,...U,focusable:!O,active:Z,children:jsxRuntimeExports.jsx(Primitive$2.button,{type:"button",role:"tab","aria-selected":Z,"aria-controls":V,"data-state":Z?"active":"inactive","data-disabled":O?"":void 0,disabled:O,id:G,...I,ref:T,onMouseDown:composeEventHandlers(_.onMouseDown,Y=>{!O&&Y.button===0&&Y.ctrlKey===!1?L.onValueChange(P):Y.preventDefault()}),onKeyDown:composeEventHandlers(_.onKeyDown,Y=>{[" ","Enter"].includes(Y.key)&&L.onValueChange(P)}),onFocus:composeEventHandlers(_.onFocus,()=>{const Y=L.activationMode!=="manual";!Z&&!O&&Y&&L.onValueChange(P)})})})});TabsTrigger$1.displayName=TRIGGER_NAME;var CONTENT_NAME="TabsContent",TabsContent$1=reactExports.forwardRef((_,T)=>{const{__scopeTabs:R,value:P,forceMount:O,children:I,...L}=_,U=useTabsContext(CONTENT_NAME,R),G=makeTriggerId(U.baseId,P),V=makeContentId(U.baseId,P),Z=P===U.value,Y=reactExports.useRef(Z);return reactExports.useEffect(()=>{const W=requestAnimationFrame(()=>Y.current=!1);return()=>cancelAnimationFrame(W)},[]),jsxRuntimeExports.jsx(Presence,{present:O||Z,children:({present:W})=>jsxRuntimeExports.jsx(Primitive$2.div,{"data-state":Z?"active":"inactive","data-orientation":U.orientation,role:"tabpanel","aria-labelledby":G,hidden:!W,id:V,tabIndex:0,...L,ref:T,style:{..._.style,animationDuration:Y.current?"0s":void 0},children:W&&I})})});TabsContent$1.displayName=CONTENT_NAME;function makeTriggerId(_,T){return`${_}-trigger-${T}`}function makeContentId(_,T){return`${_}-content-${T}`}var Root2=Tabs$1,List=TabsList$1,Trigger=TabsTrigger$1,Content=TabsContent$1;const Tabs=Root2,TabsList=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(List,{ref:R,className:cn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",_),...T}));TabsList.displayName=List.displayName;const TabsTrigger=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(Trigger,{ref:R,className:cn("m-1 inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all hover:bg-blue-500 hover:text-white disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-green-500 data-[state=active]:text-white data-[state=active]:shadow-sm",_),...T}));TabsTrigger.displayName=Trigger.displayName;const TabsContent=reactExports.forwardRef(({className:_,...T},R)=>jsxRuntimeExports.jsx(Content,{ref:R,className:cn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",_),...T}));TabsContent.displayName=Content.displayName;function ModelParameterPanel({params:_,onChange:T,disabled:R}){const{currentModel:P}=useModel(),O=P.ui?.WarningBanner,I=P.ui?.ParametersTab,L=P.ui?.CellTypesTab,U=P.ui?.SimulationTab,G=!!L,V=!!U;return jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col",children:[O&&jsxRuntimeExports.jsx("div",{className:"shrink-0 p-2",children:jsxRuntimeExports.jsx(O,{params:_,onChange:T,disabled:R})}),jsxRuntimeExports.jsxs(Tabs,{defaultValue:"parameters",className:"flex-1 flex flex-col min-h-0",children:[jsxRuntimeExports.jsxs(TabsList,{className:"w-full justify-start shrink-0",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"parameters",children:"Parameters"}),G&&jsxRuntimeExports.jsx(TabsTrigger,{value:"celltypes",children:"Cell Types"}),V&&jsxRuntimeExports.jsx(TabsTrigger,{value:"simulation",children:"Simulation"})]}),jsxRuntimeExports.jsx(TabsContent,{value:"parameters",className:"flex-1 overflow-hidden mt-0",children:jsxRuntimeExports.jsx(ScrollArea,{className:"h-full",children:jsxRuntimeExports.jsx("div",{className:"p-4 space-y-3",children:I?jsxRuntimeExports.jsx(I,{params:_,onChange:T,disabled:R}):jsxRuntimeExports.jsx("div",{className:"text-sm text-muted-foreground",children:"No parameter UI defined for this model."})})})}),G&&jsxRuntimeExports.jsx(TabsContent,{value:"celltypes",className:"flex-1 mt-0 overflow-auto",children:jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsx(L,{params:_,onChange:T,disabled:R})})}),V&&jsxRuntimeExports.jsx(TabsContent,{value:"simulation",className:"flex-1 overflow-hidden mt-0",children:jsxRuntimeExports.jsx(ScrollArea,{className:"h-full",children:jsxRuntimeExports.jsx("div",{className:"p-4 space-y-3",children:jsxRuntimeExports.jsx(U,{params:_,onChange:T,disabled:R})})})})]})]})}function parseNumber(_,T=0){if(_==null||_==="")return T;if(typeof _=="number")return _;const R=String(_).trim().toLowerCase();if(R==="inf"||R==="infinity")return 1/0;if(R==="-inf"||R==="-infinity")return-1/0;const P=parseFloat(R);return isNaN(P)?T:P}function parseInitDistr(_){const T={};if(!_)return T;const R=_.split(",");for(const P of R){const[O,I]=P.split(":").map(L=>L.trim());if(O&&I){const L=parseInt(I,10);isNaN(L)||(T[O]=(T[O]||0)+L)}}return T}function importLegacyXLSX(_){const T=structuredClone(DEFAULT_EHT_PARAMS),R=_.parameters;R["sim.t_end"]!==void 0&&(T.general.t_end=parseNumber(R["sim.t_end"],48)),R["sim.dt"]!==void 0&&(T.general.dt=parseNumber(R["sim.dt"],.1)),R["stat.random_seed"]!==void 0&&(T.general.random_seed=Math.floor(parseNumber(R["stat.random_seed"],0))),R["epi.prob_out_div"]!==void 0&&(T.general.p_div_out=parseNumber(R["epi.prob_out_div"],1)),R["epi.mu"]!==void 0&&(T.general.mu=parseNumber(R["epi.mu"],.2)),R["alg.n_substeps"]!==void 0&&(T.general.n_substeps=Math.floor(parseNumber(R["alg.n_substeps"],30))),R["alg.dt"]!==void 0&&(T.general.alg_dt=parseNumber(R["alg.dt"],.01)),R["epi.init_zone.size.x"]!==void 0&&(T.general.w_init=parseNumber(R["epi.init_zone.size.x"],80)),R["epi.init_zone.size.y"]!==void 0&&(T.general.h_init=parseNumber(R["epi.init_zone.size.y"],5)),parseNumber(R["epi.basal_curvature"],0)===0?(T.general.perimeter=T.general.w_init*2,T.general.aspect_ratio=0,T.general.full_circle=!1):(T.general.perimeter=T.general.w_init*2,T.general.aspect_ratio=1,T.general.full_circle=!0),T.general.w_screen=T.general.w_init*1.5,T.general.h_screen=0;const O=R["epi.init_apical_junction_dist"]!==void 0?parseNumber(R["epi.init_apical_junction_dist"],0):void 0,I=R["epi.init_basal_junction_dist"]!==void 0?parseNumber(R["epi.init_basal_junction_dist"],4):void 0,L=parseInitDistr(String(R["epi.init_distr"]||"")),U=parseNumber(R["epi.N_init"],0),G=Object.values(L).reduce((W,J)=>W+J,0),V=U>0&&G>0?U/G:1;T.cell_types={};const Z=_.cell_type,Y=Object.keys(Z.types);for(const W of Y){const J=Z.types[W],ee=W==="exp"?"emt":W,te=ee==="control"?{r:0,g:128,b:0}:{r:255,g:0,b:255},ie=ee==="emt"?"bottom":"",oe=Math.round((L[W]||0)*V),ae={...structuredClone(DEFAULT_CONTROL_CELL),N_init:oe,location:ie,R_hard:parseNumber(J.R_hard,.3),R_hard_div:parseNumber(J.R_hard,.3)*.7/.3,R_soft:parseNumber(J.R_soft,1.2),color:te,dur_G2:parseNumber(J.duration_G2,.5),dur_mitosis:parseNumber(J.duration_mitosis,.5),k_apical_junction:Math.abs(parseNumber(J.k_apical_junction,5)),k_cytos:parseNumber(J.k_cytoskeleton,5),max_cytoskeleton_length:parseNumber(J.max_cytoskeleton_length,0),run:0,running_speed:parseNumber(J.running_speed,1),running_mode:Math.floor(parseNumber(J.running_mode,0)),stiffness_apical_apical:parseNumber(J.stiffness_apical_apical,2),stiffness_apical_apical_div:parseNumber(J.stiffness_apical_apical,2)*2,stiffness_nuclei_apical:parseNumber(J.stiffness_nuclei_apical,3),stiffness_nuclei_basal:parseNumber(J.stiffness_nuclei_basal,2),stiffness_repulsion:parseNumber(J.stiffness_repulsion,2),stiffness_straightness:parseNumber(J.stiffness_straightness,5),lifespan_start:parseNumber(J["life_span.min"],5.5),lifespan_end:parseNumber(J["life_span.max"],6.5),INM:0,hetero:!1,events:{time_A_start:1/0,time_A_end:1/0,time_B_start:1/0,time_B_end:1/0,time_S_start:1/0,time_S_end:1/0,time_P_start:1/0,time_P_end:1/0},diffusion:parseNumber(J.diffusion,0)||DEFAULT_CONTROL_CELL.diffusion,basal_damping_ratio:parseNumber(J.basal_damping_ratio,0)||DEFAULT_CONTROL_CELL.basal_damping_ratio,max_basal_junction_dist:parseNumber(J.max_basal_junction_dist,0)||I||DEFAULT_CONTROL_CELL.max_basal_junction_dist,cytos_init:parseNumber(J.cytoskeleton_init,DEFAULT_CONTROL_CELL.cytos_init),basal_membrane_repulsion:parseNumber(J.basal_repulsion,DEFAULT_CONTROL_CELL.basal_membrane_repulsion),apical_junction_init:parseNumber(J.apical_junction_init,0)||O||DEFAULT_CONTROL_CELL.apical_junction_init};T.cell_types[ee]=ae}if(_.special_cell_events)for(const W of _.special_cell_events){const J=W.cell_type==="exp"?"emt":W.cell_type,ee=T.cell_types[J];if(!ee)continue;const te=parseNumber(W.sim_time_start,1/0),ie=parseNumber(W.sim_time_end,1/0);switch(W.name){case"loss_apical_adhesion":case"local_loss_apical_adhesion":ee.events.time_A_start=te,ee.events.time_A_end=ie;break;case"loss_basal_adhesion":ee.events.time_B_start=te,ee.events.time_B_end=ie;break}}if(_.cell_events)for(const W of _.cell_events){const J=W.cell_type==="exp"?"emt":W.cell_type,ee=T.cell_types[J];ee&&W.name==="loss_polarity"&&W.symbol==="stiffness_straightness"&&(ee.events.time_S_start=parseNumber(W.sim_time_start,1/0),ee.events.time_S_end=parseNumber(W.sim_time_end,1/0))}for(const W of Object.values(T.cell_types))(isFinite(W.events.time_A_start)||isFinite(W.events.time_B_start)||isFinite(W.events.time_S_start))&&(W.hetero=!0);return T}async function parseXLSXFile(_){const T=await __vitePreload(()=>import("./xlsx-CebWqg3Z.js"),[]),R=await _.arrayBuffer(),P=T.read(R,{type:"array"}),O={parameters:{},cell_type:{parameters:[],types:{}}},I=P.Sheets.parameters;if(I){const V=T.utils.sheet_to_json(I);for(const Z of V)Z.key&&(O.parameters[Z.key]=Z.value)}const L=P.Sheets.cell_type;if(L){const V=T.utils.sheet_to_json(L);if(V.length>0){const Z=V[0],Y=Object.keys(Z).filter(W=>W!=="parameter");for(const W of Y)O.cell_type.types[W]={};for(const W of V){const J=String(W.parameter||"");if(J){O.cell_type.parameters.push(J);for(const ee of Y)O.cell_type.types[ee][J]=W[ee]}}}}const U=P.Sheets.cell_events;U&&(O.cell_events=T.utils.sheet_to_json(U));const G=P.Sheets.special_cell_events;return G&&(O.special_cell_events=T.utils.sheet_to_json(G)),O}async function importXLSXToParams(_){const T=await parseXLSXFile(_);return importLegacyXLSX(T)}function ParameterConfigView({config:_,onConfigChange:T,disabled:R}){const{currentModel:P}=useModel(),O=reactExports.useRef(null),I=reactExports.useRef(null),[L,U]=reactExports.useState(!1),[G,V]=reactExports.useState(!1),Z=EHT_PRESETS,Y=le=>{const he=Z.find(fe=>fe.key===le);if(!he)return;const me=he.create();T({..._,params:me})},W=le=>{T({..._,params:le})},J=le=>{T({..._,parameterRanges:le})},ee=le=>{T({..._,timeSamples:le})},te=le=>{const he=Math.max(1,parseInt(le,10)||1);T({..._,seedsPerConfig:he})},ie=async le=>{const he=le.target.files?.[0];if(he){try{const me=await he.text(),fe=parseSimulationConfigToml(me);T(fe)}catch(me){console.error("Failed to parse TOML:",me),alert("Failed to parse TOML file. Check console for details.")}O.current&&(O.current.value="")}},oe=()=>{const le=toSimulationConfigToml(_),he=new Blob([le],{type:"text/plain"}),me=URL.createObjectURL(he),fe=document.createElement("a");fe.href=me,fe.download="simulation_config.toml",document.body.appendChild(fe),fe.click(),document.body.removeChild(fe),URL.revokeObjectURL(me)},ae=async le=>{const he=le.target.files?.[0];if(he){U(!0);try{const me=await importXLSXToParams(he);T({..._,params:me})}catch(me){console.error("Failed to import XLSX:",me),alert("Failed to import legacy XLSX file. Check console for details.")}finally{U(!1)}I.current&&(I.current.value="")}},ce=async()=>{const le=encodeParamsToUrl(P.name,_.params);try{await navigator.clipboard.writeText(le),V(!0),setTimeout(()=>V(!1),2e3)}catch(he){console.error("Failed to copy link:",he),prompt("Copy this link:",le)}};return jsxRuntimeExports.jsxs(Card,{className:"h-full",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-3",children:jsxRuntimeExports.jsx(CardTitle,{className:"text-base",children:"Parameters & Ranges"})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx("input",{ref:O,type:"file",accept:".toml",onChange:ie,className:"hidden"}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>O.current?.click(),disabled:R,className:"flex-1",children:[jsxRuntimeExports.jsx(Upload,{className:"h-4 w-4 mr-2"}),"Load TOML"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:oe,disabled:R,className:"flex-1",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-2"}),"Save TOML"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx("input",{ref:I,type:"file",accept:".xlsx,.xls",onChange:ae,className:"hidden"}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>I.current?.click(),disabled:R||L,className:"flex-1",children:[jsxRuntimeExports.jsx(FileSpreadsheet,{className:"h-4 w-4 mr-2"}),L?"Importing...":"Import Legacy XLSX"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:ce,disabled:R,className:"flex-1",children:[jsxRuntimeExports.jsx(Link2,{className:"h-4 w-4 mr-2"}),G?"Copied!":"Share Link"]})]})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Select preset"}),jsxRuntimeExports.jsxs(Select,{onValueChange:Y,disabled:R,children:[jsxRuntimeExports.jsx(SelectTrigger,{className:"w-full",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Choose a preset"})}),jsxRuntimeExports.jsx(SelectContent,{children:Z.map(le=>jsxRuntimeExports.jsx(SelectItem,{value:le.key,children:le.label},le.key))})]})]}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsx("div",{className:"h-[500px] border rounded-md overflow-hidden relative",children:jsxRuntimeExports.jsx(ModelParameterPanel,{params:_.params,onChange:W,disabled:R})}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsx(ParameterRangeList,{ranges:_.parameterRanges,onChange:J,baseParams:_.params,disabled:R}),jsxRuntimeExports.jsx(Separator,{}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx(Label$1,{className:"text-sm font-medium",children:"Batch Sampling"}),jsxRuntimeExports.jsx(TimeSampleConfig,{config:_.timeSamples,onChange:ee,disabled:R}),jsxRuntimeExports.jsxs("div",{className:"space-y-1",children:[jsxRuntimeExports.jsx(Label$1,{htmlFor:"seeds",className:"text-xs text-muted-foreground",children:"Seeds per configuration"}),jsxRuntimeExports.jsx(Input,{id:"seeds",type:"number",min:1,step:1,value:_.seedsPerConfig,onChange:le=>te(le.target.value),disabled:R,className:"h-8 w-32"})]})]})]})]})}function AppContent(){const{currentParams:_,setParams:T,setModel:R}=useModel();reactExports.useEffect(()=>{const U=decodeParamsFromUrl();U&&(R(U.modelName),T(U.params),clearUrlParams())},[R,T]);const[P,O]=reactExports.useState({parameterRanges:[],timeSamples:{...DEFAULT_TIME_SAMPLES},seedsPerConfig:1}),I=reactExports.useMemo(()=>({params:_,...P}),[_,P]),L=reactExports.useCallback(U=>{T(U.params),O({parameterRanges:U.parameterRanges,timeSamples:U.timeSamples,seedsPerConfig:U.seedsPerConfig})},[T]);return jsxRuntimeExports.jsx(AppLayout,{children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsx(SingleSimulationTab,{})}),jsxRuntimeExports.jsx("section",{children:jsxRuntimeExports.jsx(ParameterConfigView,{config:I,onConfigChange:L})}),jsxRuntimeExports.jsx("section",{className:"lg:col-span-2",children:jsxRuntimeExports.jsx(BatchTab,{config:I,onConfigChange:L})})]})})}function App(){return jsxRuntimeExports.jsx(ModelProvider,{children:jsxRuntimeExports.jsx(MessagesProvider,{children:jsxRuntimeExports.jsx(AppContent,{})})})}console.log("[Main] Registering global for debug");window.EHT_REGISTRY=modelRegistry;clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{RenderGroup as $,AbstractRenderer as A,BufferUsage as B,Container as C,DOMAdapter as D,ExtensionType as E,TexturePool as F,GpuProgram as G,FilterEffect as H,Sprite as I,getAttributeInfoFromFormat as J,unsafeEvalSupported as K,GlobalResourceRegistry as L,Matrix as M,uid as N,Rectangle as O,Point as P,SystemRunner as Q,RendererType as R,Shader as S,Ticker as T,UPDATE_PRIORITY as U,multiplyColors as V,UPDATE_VISIBLE as W,UPDATE_COLOR as X,UPDATE_BLEND as Y,TextureStyle as Z,Color$1 as _,GlProgram as a,getLocalBounds as a0,VERSION as a1,deprecation as a2,v8_0_0 as a3,RendererInitHook as a4,Geometry as a5,checkMaxIfStatementsInShader as a6,compileHighShaderGlProgram as a7,colorBitGl as a8,generateTextureBatchBitGl as a9,roundPixelsBitGl as aa,getBatchSamplersUniformGroup as ab,fontStringFromTextStyle as ac,CanvasTextMetrics as ad,ImageSource as ae,getCanvasFillStyle as af,TextStyle as ag,lru as ah,Cache as ai,BatchableGraphics as aj,getAdjustedBlendModeBlend as ak,ViewableBuffer as al,Graphics as am,updateQuadBounds as an,CanvasTextGenerator as ao,GraphicsContextSystem as ap,EventEmitter as b,STENCIL_MODES as c,Buffer$2 as d,extensions as e,fastCopy as f,getTextureBatchBindGroup as g,BindGroup as h,createIdFromString as i,CLEAR as j,CanvasSource as k,TextureSource as l,UniformGroup as m,CanvasPool as n,compileHighShaderGpuProgram as o,colorBit as p,generateTextureBatchBit as q,removeItems as r,roundPixelsBit as s,Texture as t,TextureMatrix as u,DefaultBatcher as v,warn$1 as w,BigPool as x,getGlobalBounds as y,Bounds as z};
//# sourceMappingURL=index-gL9FqDBo.js.map
